const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/leadService-DoNws-kc.js","assets/apiClient-OXv-SloA.js","assets/dealService-DnE80s20.js"])))=>i.map(i=>d[i]);
var u_=Object.defineProperty;var d_=(e,t,n)=>t in e?u_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ie=(e,t,n)=>d_(e,typeof t!="symbol"?t+"":t,n);function h_(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function ig(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $1={exports:{}},Od={},B1={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Il=Symbol.for("react.element"),f_=Symbol.for("react.portal"),m_=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),g_=Symbol.for("react.profiler"),x_=Symbol.for("react.provider"),y_=Symbol.for("react.context"),v_=Symbol.for("react.forward_ref"),b_=Symbol.for("react.suspense"),w_=Symbol.for("react.memo"),S_=Symbol.for("react.lazy"),Fy=Symbol.iterator;function j_(e){return e===null||typeof e!="object"?null:(e=Fy&&e[Fy]||e["@@iterator"],typeof e=="function"?e:null)}var z1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V1=Object.assign,U1={};function wo(e,t,n){this.props=e,this.context=t,this.refs=U1,this.updater=n||z1}wo.prototype.isReactComponent={};wo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function W1(){}W1.prototype=wo.prototype;function og(e,t,n){this.props=e,this.context=t,this.refs=U1,this.updater=n||z1}var ag=og.prototype=new W1;ag.constructor=og;V1(ag,wo.prototype);ag.isPureReactComponent=!0;var $y=Array.isArray,H1=Object.prototype.hasOwnProperty,lg={current:null},q1={key:!0,ref:!0,__self:!0,__source:!0};function G1(e,t,n){var s,r={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)H1.call(t,s)&&!q1.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Il,type:e,key:i,ref:o,props:r,_owner:lg.current}}function N_(e,t){return{$$typeof:Il,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Il}function C_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var By=/\/+/g;function Ph(e,t){return typeof e=="object"&&e!==null&&e.key!=null?C_(""+e.key):t.toString(36)}function ru(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Il:case f_:o=!0}}if(o)return o=e,r=r(o),e=s===""?"."+Ph(o,0):s,$y(r)?(n="",e!=null&&(n=e.replace(By,"$&/")+"/"),ru(r,t,n,"",function(u){return u})):r!=null&&(cg(r)&&(r=N_(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(By,"$&/")+"/")+e)),t.push(r)),1;if(o=0,s=s===""?".":s+":",$y(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Ph(i,l);o+=ru(i,t,n,c,r)}else if(c=j_(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Ph(i,l++),o+=ru(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ac(e,t,n){if(e==null)return e;var s=[],r=0;return ru(e,s,"","",function(i){return t.call(n,i,r++)}),s}function E_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},iu={transition:null},k_={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:iu,ReactCurrentOwner:lg};function Y1(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:ac,forEach:function(e,t,n){ac(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ac(e,function(){t++}),t},toArray:function(e){return ac(e,function(t){return t})||[]},only:function(e){if(!cg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=wo;we.Fragment=m_;we.Profiler=g_;we.PureComponent=og;we.StrictMode=p_;we.Suspense=b_;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_;we.act=Y1;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=V1({},e.props),r=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=lg.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)H1.call(t,c)&&!q1.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Il,type:e.type,key:r,ref:i,props:s,_owner:o}};we.createContext=function(e){return e={$$typeof:y_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x_,_context:e},e.Consumer=e};we.createElement=G1;we.createFactory=function(e){var t=G1.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:v_,render:e}};we.isValidElement=cg;we.lazy=function(e){return{$$typeof:S_,_payload:{_status:-1,_result:e},_init:E_}};we.memo=function(e,t){return{$$typeof:w_,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=iu.transition;iu.transition={};try{e()}finally{iu.transition=t}};we.unstable_act=Y1;we.useCallback=function(e,t){return Ft.current.useCallback(e,t)};we.useContext=function(e){return Ft.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};we.useEffect=function(e,t){return Ft.current.useEffect(e,t)};we.useId=function(){return Ft.current.useId()};we.useImperativeHandle=function(e,t,n){return Ft.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return Ft.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return Ft.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return Ft.current.useMemo(e,t)};we.useReducer=function(e,t,n){return Ft.current.useReducer(e,t,n)};we.useRef=function(e){return Ft.current.useRef(e)};we.useState=function(e){return Ft.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return Ft.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return Ft.current.useTransition()};we.version="18.3.1";B1.exports=we;var v=B1.exports;const re=ig(v),no=h_({__proto__:null,default:re},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __=v,D_=Symbol.for("react.element"),T_=Symbol.for("react.fragment"),P_=Object.prototype.hasOwnProperty,M_=__.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A_={key:!0,ref:!0,__self:!0,__source:!0};function Q1(e,t,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)P_.call(t,s)&&!A_.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:D_,type:e,key:i,ref:o,props:r,_owner:M_.current}}Od.Fragment=T_;Od.jsx=Q1;Od.jsxs=Q1;$1.exports=Od;var a=$1.exports,K1={exports:{}},cn={},X1={exports:{}},J1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var O=T.length;T.push(I);e:for(;0<O;){var V=O-1>>>1,Y=T[V];if(0<r(Y,I))T[V]=I,T[O]=Y,O=V;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var I=T[0],O=T.pop();if(O!==I){T[0]=O;e:for(var V=0,Y=T.length,ce=Y>>>1;V<ce;){var ne=2*(V+1)-1,ee=T[ne],W=ne+1,C=T[W];if(0>r(ee,O))W<Y&&0>r(C,ee)?(T[V]=C,T[W]=O,V=W):(T[V]=ee,T[ne]=O,V=ne);else if(W<Y&&0>r(C,O))T[V]=C,T[W]=O,V=W;else break e}}return I}function r(T,I){var O=T.sortIndex-I.sortIndex;return O!==0?O:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var I=n(u);I!==null;){if(I.callback===null)s(u);else if(I.startTime<=T)s(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function S(T){if(x=!1,g(T),!p)if(n(c)!==null)p=!0,A(j);else{var I=n(u);I!==null&&R(S,I.startTime-T)}}function j(T,I){p=!1,x&&(x=!1,w(E),E=-1),m=!0;var O=f;try{for(g(I),h=n(c);h!==null&&(!(h.expirationTime>I)||T&&!M());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var Y=V(h.expirationTime<=I);I=e.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(c)&&s(c),g(I)}else s(c);h=n(c)}if(h!==null)var ce=!0;else{var ne=n(u);ne!==null&&R(S,ne.startTime-I),ce=!1}return ce}finally{h=null,f=O,m=!1}}var k=!1,_=null,E=-1,N=5,D=-1;function M(){return!(e.unstable_now()-D<N)}function L(){if(_!==null){var T=e.unstable_now();D=T;var I=!0;try{I=_(!0,T)}finally{I?z():(k=!1,_=null)}}else k=!1}var z;if(typeof y=="function")z=function(){y(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,B=H.port2;H.port1.onmessage=L,z=function(){B.postMessage(null)}}else z=function(){b(L,0)};function A(T){_=T,k||(k=!0,z())}function R(T,I){E=b(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,A(j))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var O=f;f=I;try{return T()}finally{f=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var O=f;f=T;try{return I()}finally{f=O}},e.unstable_scheduleCallback=function(T,I,O){var V=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?V+O:V):O=V,T){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,T={id:d++,callback:I,priorityLevel:T,startTime:O,expirationTime:Y,sortIndex:-1},O>V?(T.sortIndex=O,t(u,T),n(c)===null&&T===n(u)&&(x?(w(E),E=-1):x=!0,R(S,O-V))):(T.sortIndex=Y,t(c,T),p||m||(p=!0,A(j))),T},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(T){var I=f;return function(){var O=f;f=I;try{return T.apply(this,arguments)}finally{f=O}}}})(J1);X1.exports=J1;var I_=X1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=v,an=I_;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z1=new Set,qa={};function gi(e,t){so(e,t),so(e+"Capture",t)}function so(e,t){for(qa[e]=t,e=0;e<t.length;e++)Z1.add(t[e])}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vm=Object.prototype.hasOwnProperty,O_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zy={},Vy={};function L_(e){return vm.call(Vy,e)?!0:vm.call(zy,e)?!1:O_.test(e)?Vy[e]=!0:(zy[e]=!0,!1)}function F_(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $_(e,t,n,s){if(t===null||typeof t>"u"||F_(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,n,s,r,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bt[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var ug=/[\-:]([a-z])/g;function dg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ug,dg);bt[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ug,dg);bt[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ug,dg);bt[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function hg(e,t,n,s){var r=bt.hasOwnProperty(t)?bt[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($_(t,n,r,s)&&(n=null),s||r===null?L_(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Is=R_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),Ai=Symbol.for("react.fragment"),fg=Symbol.for("react.strict_mode"),bm=Symbol.for("react.profiler"),eS=Symbol.for("react.provider"),tS=Symbol.for("react.context"),mg=Symbol.for("react.forward_ref"),wm=Symbol.for("react.suspense"),Sm=Symbol.for("react.suspense_list"),pg=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),nS=Symbol.for("react.offscreen"),Uy=Symbol.iterator;function zo(e){return e===null||typeof e!="object"?null:(e=Uy&&e[Uy]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,Mh;function ma(e){if(Mh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mh=t&&t[1]||""}return`
`+Mh+e}var Ah=!1;function Ih(e,t){if(!e||Ah)return"";Ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ah=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ma(e):""}function B_(e){switch(e.tag){case 5:return ma(e.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 2:case 15:return e=Ih(e.type,!1),e;case 11:return e=Ih(e.type.render,!1),e;case 1:return e=Ih(e.type,!0),e;default:return""}}function jm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ai:return"Fragment";case Mi:return"Portal";case bm:return"Profiler";case fg:return"StrictMode";case wm:return"Suspense";case Sm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tS:return(e.displayName||"Context")+".Consumer";case eS:return(e._context.displayName||"Context")+".Provider";case mg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pg:return t=e.displayName||null,t!==null?t:jm(e.type)||"Memo";case Ws:t=e._payload,e=e._init;try{return jm(e(t))}catch{}}return null}function z_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jm(t);case 8:return t===fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function V_(e){var t=sS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cc(e){e._valueTracker||(e._valueTracker=V_(e))}function rS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=sS(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Eu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Nm(e,t){var n=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wy(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=vr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iS(e,t){t=t.checked,t!=null&&hg(e,"checked",t,!1)}function Cm(e,t){iS(e,t);var n=vr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Em(e,t.type,n):t.hasOwnProperty("defaultValue")&&Em(e,t.type,vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Em(e,t,n){(t!=="number"||Eu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pa=Array.isArray;function Yi(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+vr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function km(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(pa(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vr(n)}}function oS(e,t){var n=vr(t.value),s=vr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Gy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function aS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?aS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var uc,lS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(uc=uc||document.createElement("div"),uc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=uc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ga(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ka={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U_=["Webkit","ms","Moz","O"];Object.keys(ka).forEach(function(e){U_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ka[t]=ka[e]})});function cS(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ka.hasOwnProperty(e)&&ka[e]?(""+t).trim():t+"px"}function uS(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=cS(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var W_=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dm(e,t){if(t){if(W_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Tm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pm=null;function gg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mm=null,Qi=null,Ki=null;function Yy(e){if(e=Ll(e)){if(typeof Mm!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=zd(t),Mm(e.stateNode,e.type,t))}}function dS(e){Qi?Ki?Ki.push(e):Ki=[e]:Qi=e}function hS(){if(Qi){var e=Qi,t=Ki;if(Ki=Qi=null,Yy(e),t)for(e=0;e<t.length;e++)Yy(t[e])}}function fS(e,t){return e(t)}function mS(){}var Rh=!1;function pS(e,t,n){if(Rh)return e(t,n);Rh=!0;try{return fS(e,t,n)}finally{Rh=!1,(Qi!==null||Ki!==null)&&(mS(),hS())}}function Ya(e,t){var n=e.stateNode;if(n===null)return null;var s=zd(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Am=!1;if(ks)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{Am=!1}function H_(e,t,n,s,r,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var _a=!1,ku=null,_u=!1,Im=null,q_={onError:function(e){_a=!0,ku=e}};function G_(e,t,n,s,r,i,o,l,c){_a=!1,ku=null,H_.apply(q_,arguments)}function Y_(e,t,n,s,r,i,o,l,c){if(G_.apply(this,arguments),_a){if(_a){var u=ku;_a=!1,ku=null}else throw Error(Q(198));_u||(_u=!0,Im=u)}}function xi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function gS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qy(e){if(xi(e)!==e)throw Error(Q(188))}function Q_(e){var t=e.alternate;if(!t){if(t=xi(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Qy(r),e;if(i===s)return Qy(r),t;i=i.sibling}throw Error(Q(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==s)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function xS(e){return e=Q_(e),e!==null?yS(e):null}function yS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yS(e);if(t!==null)return t;e=e.sibling}return null}var vS=an.unstable_scheduleCallback,Ky=an.unstable_cancelCallback,K_=an.unstable_shouldYield,X_=an.unstable_requestPaint,Je=an.unstable_now,J_=an.unstable_getCurrentPriorityLevel,xg=an.unstable_ImmediatePriority,bS=an.unstable_UserBlockingPriority,Du=an.unstable_NormalPriority,Z_=an.unstable_LowPriority,wS=an.unstable_IdlePriority,Ld=null,Xn=null;function eD(e){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Ld,e,void 0,(e.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:sD,tD=Math.log,nD=Math.LN2;function sD(e){return e>>>=0,e===0?32:31-(tD(e)/nD|0)|0}var dc=64,hc=4194304;function ga(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?s=ga(l):(i&=o,i!==0&&(s=ga(i)))}else o=n&~r,o!==0?s=ga(o):i!==0&&(s=ga(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ln(t),r=1<<n,s|=e[n],t&=~r;return s}function rD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iD(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ln(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=rD(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Rm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function SS(){var e=dc;return dc<<=1,!(dc&4194240)&&(dc=64),e}function Oh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ln(t),e[t]=n}function oD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Ln(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function yg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ln(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var Ie=0;function jS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var NS,vg,CS,ES,kS,Om=!1,fc=[],ir=null,or=null,ar=null,Qa=new Map,Ka=new Map,Ys=[],aD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xy(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Qa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(t.pointerId)}}function Uo(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Ll(t),t!==null&&vg(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function lD(e,t,n,s,r){switch(t){case"focusin":return ir=Uo(ir,e,t,n,s,r),!0;case"dragenter":return or=Uo(or,e,t,n,s,r),!0;case"mouseover":return ar=Uo(ar,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Qa.set(i,Uo(Qa.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Ka.set(i,Uo(Ka.get(i)||null,e,t,n,s,r)),!0}return!1}function _S(e){var t=Qr(e.target);if(t!==null){var n=xi(t);if(n!==null){if(t=n.tag,t===13){if(t=gS(n),t!==null){e.blockedOn=t,kS(e.priority,function(){CS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ou(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Lm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Pm=s,n.target.dispatchEvent(s),Pm=null}else return t=Ll(n),t!==null&&vg(t),e.blockedOn=n,!1;t.shift()}return!0}function Jy(e,t,n){ou(e)&&n.delete(t)}function cD(){Om=!1,ir!==null&&ou(ir)&&(ir=null),or!==null&&ou(or)&&(or=null),ar!==null&&ou(ar)&&(ar=null),Qa.forEach(Jy),Ka.forEach(Jy)}function Wo(e,t){e.blockedOn===t&&(e.blockedOn=null,Om||(Om=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,cD)))}function Xa(e){function t(r){return Wo(r,e)}if(0<fc.length){Wo(fc[0],e);for(var n=1;n<fc.length;n++){var s=fc[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ir!==null&&Wo(ir,e),or!==null&&Wo(or,e),ar!==null&&Wo(ar,e),Qa.forEach(t),Ka.forEach(t),n=0;n<Ys.length;n++)s=Ys[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ys.length&&(n=Ys[0],n.blockedOn===null);)_S(n),n.blockedOn===null&&Ys.shift()}var Xi=Is.ReactCurrentBatchConfig,Pu=!0;function uD(e,t,n,s){var r=Ie,i=Xi.transition;Xi.transition=null;try{Ie=1,bg(e,t,n,s)}finally{Ie=r,Xi.transition=i}}function dD(e,t,n,s){var r=Ie,i=Xi.transition;Xi.transition=null;try{Ie=4,bg(e,t,n,s)}finally{Ie=r,Xi.transition=i}}function bg(e,t,n,s){if(Pu){var r=Lm(e,t,n,s);if(r===null)qh(e,t,s,Mu,n),Xy(e,s);else if(lD(r,e,t,n,s))s.stopPropagation();else if(Xy(e,s),t&4&&-1<aD.indexOf(e)){for(;r!==null;){var i=Ll(r);if(i!==null&&NS(i),i=Lm(e,t,n,s),i===null&&qh(e,t,s,Mu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else qh(e,t,s,null,n)}}var Mu=null;function Lm(e,t,n,s){if(Mu=null,e=gg(s),e=Qr(e),e!==null)if(t=xi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=gS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mu=e,null}function DS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J_()){case xg:return 1;case bS:return 4;case Du:case Z_:return 16;case wS:return 536870912;default:return 16}default:return 16}}var Xs=null,wg=null,au=null;function TS(){if(au)return au;var e,t=wg,n=t.length,s,r="value"in Xs?Xs.value:Xs.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===r[i-s];s++);return au=r.slice(e,1<s?1-s:void 0)}function lu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mc(){return!0}function Zy(){return!1}function un(e){function t(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mc:Zy,this.isPropagationStopped=Zy,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mc)},persist:function(){},isPersistent:mc}),t}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sg=un(So),Ol=Qe({},So,{view:0,detail:0}),hD=un(Ol),Lh,Fh,Ho,Fd=Qe({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ho&&(Ho&&e.type==="mousemove"?(Lh=e.screenX-Ho.screenX,Fh=e.screenY-Ho.screenY):Fh=Lh=0,Ho=e),Lh)},movementY:function(e){return"movementY"in e?e.movementY:Fh}}),e0=un(Fd),fD=Qe({},Fd,{dataTransfer:0}),mD=un(fD),pD=Qe({},Ol,{relatedTarget:0}),$h=un(pD),gD=Qe({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),xD=un(gD),yD=Qe({},So,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vD=un(yD),bD=Qe({},So,{data:0}),t0=un(bD),wD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ND(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jD[e])?!!t[e]:!1}function jg(){return ND}var CD=Qe({},Ol,{key:function(e){if(e.key){var t=wD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(e){return e.type==="keypress"?lu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ED=un(CD),kD=Qe({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n0=un(kD),_D=Qe({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),DD=un(_D),TD=Qe({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),PD=un(TD),MD=Qe({},Fd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AD=un(MD),ID=[9,13,27,32],Ng=ks&&"CompositionEvent"in window,Da=null;ks&&"documentMode"in document&&(Da=document.documentMode);var RD=ks&&"TextEvent"in window&&!Da,PS=ks&&(!Ng||Da&&8<Da&&11>=Da),s0=" ",r0=!1;function MS(e,t){switch(e){case"keyup":return ID.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ii=!1;function OD(e,t){switch(e){case"compositionend":return AS(t);case"keypress":return t.which!==32?null:(r0=!0,s0);case"textInput":return e=t.data,e===s0&&r0?null:e;default:return null}}function LD(e,t){if(Ii)return e==="compositionend"||!Ng&&MS(e,t)?(e=TS(),au=wg=Xs=null,Ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PS&&t.locale!=="ko"?null:t.data;default:return null}}var FD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FD[e.type]:t==="textarea"}function IS(e,t,n,s){dS(s),t=Au(t,"onChange"),0<t.length&&(n=new Sg("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Ta=null,Ja=null;function $D(e){HS(e,0)}function $d(e){var t=Li(e);if(rS(t))return e}function BD(e,t){if(e==="change")return t}var RS=!1;if(ks){var Bh;if(ks){var zh="oninput"in document;if(!zh){var o0=document.createElement("div");o0.setAttribute("oninput","return;"),zh=typeof o0.oninput=="function"}Bh=zh}else Bh=!1;RS=Bh&&(!document.documentMode||9<document.documentMode)}function a0(){Ta&&(Ta.detachEvent("onpropertychange",OS),Ja=Ta=null)}function OS(e){if(e.propertyName==="value"&&$d(Ja)){var t=[];IS(t,Ja,e,gg(e)),pS($D,t)}}function zD(e,t,n){e==="focusin"?(a0(),Ta=t,Ja=n,Ta.attachEvent("onpropertychange",OS)):e==="focusout"&&a0()}function VD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $d(Ja)}function UD(e,t){if(e==="click")return $d(t)}function WD(e,t){if(e==="input"||e==="change")return $d(t)}function HD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:HD;function Za(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!vm.call(t,r)||!zn(e[r],t[r]))return!1}return!0}function l0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function c0(e,t){var n=l0(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=l0(n)}}function LS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?LS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function FS(){for(var e=window,t=Eu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Eu(e.document)}return t}function Cg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qD(e){var t=FS(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&LS(n.ownerDocument.documentElement,n)){if(s!==null&&Cg(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=c0(n,i);var o=c0(n,s);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GD=ks&&"documentMode"in document&&11>=document.documentMode,Ri=null,Fm=null,Pa=null,$m=!1;function u0(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$m||Ri==null||Ri!==Eu(s)||(s=Ri,"selectionStart"in s&&Cg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Pa&&Za(Pa,s)||(Pa=s,s=Au(Fm,"onSelect"),0<s.length&&(t=new Sg("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ri)))}function pc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Oi={animationend:pc("Animation","AnimationEnd"),animationiteration:pc("Animation","AnimationIteration"),animationstart:pc("Animation","AnimationStart"),transitionend:pc("Transition","TransitionEnd")},Vh={},$S={};ks&&($S=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Bd(e){if(Vh[e])return Vh[e];if(!Oi[e])return e;var t=Oi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $S)return Vh[e]=t[n];return e}var BS=Bd("animationend"),zS=Bd("animationiteration"),VS=Bd("animationstart"),US=Bd("transitionend"),WS=new Map,d0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){WS.set(e,t),gi(t,[e])}for(var Uh=0;Uh<d0.length;Uh++){var Wh=d0[Uh],YD=Wh.toLowerCase(),QD=Wh[0].toUpperCase()+Wh.slice(1);Cr(YD,"on"+QD)}Cr(BS,"onAnimationEnd");Cr(zS,"onAnimationIteration");Cr(VS,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(US,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KD=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function h0(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Y_(s,t,void 0,e),e.currentTarget=null}function HS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;h0(r,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;h0(r,l,u),i=c}}}if(_u)throw e=Im,_u=!1,Im=null,e}function Fe(e,t){var n=t[Wm];n===void 0&&(n=t[Wm]=new Set);var s=e+"__bubble";n.has(s)||(qS(t,e,2,!1),n.add(s))}function Hh(e,t,n){var s=0;t&&(s|=4),qS(n,e,s,t)}var gc="_reactListening"+Math.random().toString(36).slice(2);function el(e){if(!e[gc]){e[gc]=!0,Z1.forEach(function(n){n!=="selectionchange"&&(KD.has(n)||Hh(n,!1,e),Hh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gc]||(t[gc]=!0,Hh("selectionchange",!1,t))}}function qS(e,t,n,s){switch(DS(t)){case 1:var r=uD;break;case 4:r=dD;break;default:r=bg}n=r.bind(null,t,n,e),r=void 0,!Am||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function qh(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Qr(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}pS(function(){var u=i,d=gg(n),h=[];e:{var f=WS.get(e);if(f!==void 0){var m=Sg,p=e;switch(e){case"keypress":if(lu(n)===0)break e;case"keydown":case"keyup":m=ED;break;case"focusin":p="focus",m=$h;break;case"focusout":p="blur",m=$h;break;case"beforeblur":case"afterblur":m=$h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=e0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=DD;break;case BS:case zS:case VS:m=xD;break;case US:m=PD;break;case"scroll":m=hD;break;case"wheel":m=AD;break;case"copy":case"cut":case"paste":m=vD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=n0}var x=(t&4)!==0,b=!x&&e==="scroll",w=x?f!==null?f+"Capture":null:f;x=[];for(var y=u,g;y!==null;){g=y;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,w!==null&&(S=Ya(y,w),S!=null&&x.push(tl(y,S,g)))),b)break;y=y.return}0<x.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==Pm&&(p=n.relatedTarget||n.fromElement)&&(Qr(p)||p[_s]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Qr(p):null,p!==null&&(b=xi(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(x=e0,S="onMouseLeave",w="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=n0,S="onPointerLeave",w="onPointerEnter",y="pointer"),b=m==null?f:Li(m),g=p==null?f:Li(p),f=new x(S,y+"leave",m,n,d),f.target=b,f.relatedTarget=g,S=null,Qr(d)===u&&(x=new x(w,y+"enter",p,n,d),x.target=g,x.relatedTarget=b,S=x),b=S,m&&p)t:{for(x=m,w=p,y=0,g=x;g;g=Ni(g))y++;for(g=0,S=w;S;S=Ni(S))g++;for(;0<y-g;)x=Ni(x),y--;for(;0<g-y;)w=Ni(w),g--;for(;y--;){if(x===w||w!==null&&x===w.alternate)break t;x=Ni(x),w=Ni(w)}x=null}else x=null;m!==null&&f0(h,f,m,x,!1),p!==null&&b!==null&&f0(h,b,p,x,!0)}}e:{if(f=u?Li(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=BD;else if(i0(f))if(RS)j=WD;else{j=VD;var k=zD}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=UD);if(j&&(j=j(e,u))){IS(h,j,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Em(f,"number",f.value)}switch(k=u?Li(u):window,e){case"focusin":(i0(k)||k.contentEditable==="true")&&(Ri=k,Fm=u,Pa=null);break;case"focusout":Pa=Fm=Ri=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,u0(h,n,d);break;case"selectionchange":if(GD)break;case"keydown":case"keyup":u0(h,n,d)}var _;if(Ng)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ii?MS(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(PS&&n.locale!=="ko"&&(Ii||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ii&&(_=TS()):(Xs=d,wg="value"in Xs?Xs.value:Xs.textContent,Ii=!0)),k=Au(u,E),0<k.length&&(E=new t0(E,e,null,n,d),h.push({event:E,listeners:k}),_?E.data=_:(_=AS(n),_!==null&&(E.data=_)))),(_=RD?OD(e,n):LD(e,n))&&(u=Au(u,"onBeforeInput"),0<u.length&&(d=new t0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=_))}HS(h,t)})}function tl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Au(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ya(e,n),i!=null&&s.unshift(tl(e,i,r)),i=Ya(e,t),i!=null&&s.push(tl(e,i,r))),e=e.return}return s}function Ni(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f0(e,t,n,s,r){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Ya(n,i),c!=null&&o.unshift(tl(n,c,l))):r||(c=Ya(n,i),c!=null&&o.push(tl(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var XD=/\r\n?/g,JD=/\u0000|\uFFFD/g;function m0(e){return(typeof e=="string"?e:""+e).replace(XD,`
`).replace(JD,"")}function xc(e,t,n){if(t=m0(t),m0(e)!==t&&n)throw Error(Q(425))}function Iu(){}var Bm=null,zm=null;function Vm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Um=typeof setTimeout=="function"?setTimeout:void 0,ZD=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,eT=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(e){return p0.resolve(null).then(e).catch(tT)}:Um;function tT(e){setTimeout(function(){throw e})}function Gh(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),Xa(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Xa(t)}function lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function g0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Kn="__reactFiber$"+jo,nl="__reactProps$"+jo,_s="__reactContainer$"+jo,Wm="__reactEvents$"+jo,nT="__reactListeners$"+jo,sT="__reactHandles$"+jo;function Qr(e){var t=e[Kn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_s]||n[Kn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=g0(e);e!==null;){if(n=e[Kn])return n;e=g0(e)}return t}e=n,n=e.parentNode}return null}function Ll(e){return e=e[Kn]||e[_s],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Li(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function zd(e){return e[nl]||null}var Hm=[],Fi=-1;function Er(e){return{current:e}}function ze(e){0>Fi||(e.current=Hm[Fi],Hm[Fi]=null,Fi--)}function Oe(e,t){Fi++,Hm[Fi]=e.current,e.current=t}var br={},Pt=Er(br),Ht=Er(!1),li=br;function ro(e,t){var n=e.type.contextTypes;if(!n)return br;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function qt(e){return e=e.childContextTypes,e!=null}function Ru(){ze(Ht),ze(Pt)}function x0(e,t,n){if(Pt.current!==br)throw Error(Q(168));Oe(Pt,t),Oe(Ht,n)}function GS(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(Q(108,z_(e)||"Unknown",r));return Qe({},n,s)}function Ou(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||br,li=Pt.current,Oe(Pt,e),Oe(Ht,Ht.current),!0}function y0(e,t,n){var s=e.stateNode;if(!s)throw Error(Q(169));n?(e=GS(e,t,li),s.__reactInternalMemoizedMergedChildContext=e,ze(Ht),ze(Pt),Oe(Pt,e)):ze(Ht),Oe(Ht,n)}var ms=null,Vd=!1,Yh=!1;function YS(e){ms===null?ms=[e]:ms.push(e)}function rT(e){Vd=!0,YS(e)}function kr(){if(!Yh&&ms!==null){Yh=!0;var e=0,t=Ie;try{var n=ms;for(Ie=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}ms=null,Vd=!1}catch(r){throw ms!==null&&(ms=ms.slice(e+1)),vS(xg,kr),r}finally{Ie=t,Yh=!1}}return null}var $i=[],Bi=0,Lu=null,Fu=0,gn=[],xn=0,ci=null,gs=1,xs="";function $r(e,t){$i[Bi++]=Fu,$i[Bi++]=Lu,Lu=e,Fu=t}function QS(e,t,n){gn[xn++]=gs,gn[xn++]=xs,gn[xn++]=ci,ci=e;var s=gs;e=xs;var r=32-Ln(s)-1;s&=~(1<<r),n+=1;var i=32-Ln(t)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,gs=1<<32-Ln(t)+r|n<<r|s,xs=i+e}else gs=1<<i|n<<r|s,xs=e}function Eg(e){e.return!==null&&($r(e,1),QS(e,1,0))}function kg(e){for(;e===Lu;)Lu=$i[--Bi],$i[Bi]=null,Fu=$i[--Bi],$i[Bi]=null;for(;e===ci;)ci=gn[--xn],gn[xn]=null,xs=gn[--xn],gn[xn]=null,gs=gn[--xn],gn[xn]=null}var sn=null,tn=null,Ue=!1,Rn=null;function KS(e,t){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function v0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,sn=e,tn=lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,sn=e,tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ci!==null?{id:gs,overflow:xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,sn=e,tn=null,!0):!1;default:return!1}}function qm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gm(e){if(Ue){var t=tn;if(t){var n=t;if(!v0(e,t)){if(qm(e))throw Error(Q(418));t=lr(n.nextSibling);var s=sn;t&&v0(e,t)?KS(s,n):(e.flags=e.flags&-4097|2,Ue=!1,sn=e)}}else{if(qm(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Ue=!1,sn=e}}}function b0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sn=e}function yc(e){if(e!==sn)return!1;if(!Ue)return b0(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vm(e.type,e.memoizedProps)),t&&(t=tn)){if(qm(e))throw XS(),Error(Q(418));for(;t;)KS(e,t),t=lr(t.nextSibling)}if(b0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tn=lr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tn=null}}else tn=sn?lr(e.stateNode.nextSibling):null;return!0}function XS(){for(var e=tn;e;)e=lr(e.nextSibling)}function io(){tn=sn=null,Ue=!1}function _g(e){Rn===null?Rn=[e]:Rn.push(e)}var iT=Is.ReactCurrentBatchConfig;function qo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var s=n.stateNode}if(!s)throw Error(Q(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function vc(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function w0(e){var t=e._init;return t(e._payload)}function JS(e){function t(w,y){if(e){var g=w.deletions;g===null?(w.deletions=[y],w.flags|=16):g.push(y)}}function n(w,y){if(!e)return null;for(;y!==null;)t(w,y),y=y.sibling;return null}function s(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function r(w,y){return w=hr(w,y),w.index=0,w.sibling=null,w}function i(w,y,g){return w.index=g,e?(g=w.alternate,g!==null?(g=g.index,g<y?(w.flags|=2,y):g):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,y,g,S){return y===null||y.tag!==6?(y=tf(g,w.mode,S),y.return=w,y):(y=r(y,g),y.return=w,y)}function c(w,y,g,S){var j=g.type;return j===Ai?d(w,y,g.props.children,S,g.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ws&&w0(j)===y.type)?(S=r(y,g.props),S.ref=qo(w,y,g),S.return=w,S):(S=pu(g.type,g.key,g.props,null,w.mode,S),S.ref=qo(w,y,g),S.return=w,S)}function u(w,y,g,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==g.containerInfo||y.stateNode.implementation!==g.implementation?(y=nf(g,w.mode,S),y.return=w,y):(y=r(y,g.children||[]),y.return=w,y)}function d(w,y,g,S,j){return y===null||y.tag!==7?(y=ni(g,w.mode,S,j),y.return=w,y):(y=r(y,g),y.return=w,y)}function h(w,y,g){if(typeof y=="string"&&y!==""||typeof y=="number")return y=tf(""+y,w.mode,g),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lc:return g=pu(y.type,y.key,y.props,null,w.mode,g),g.ref=qo(w,null,y),g.return=w,g;case Mi:return y=nf(y,w.mode,g),y.return=w,y;case Ws:var S=y._init;return h(w,S(y._payload),g)}if(pa(y)||zo(y))return y=ni(y,w.mode,g,null),y.return=w,y;vc(w,y)}return null}function f(w,y,g,S){var j=y!==null?y.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:l(w,y,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case lc:return g.key===j?c(w,y,g,S):null;case Mi:return g.key===j?u(w,y,g,S):null;case Ws:return j=g._init,f(w,y,j(g._payload),S)}if(pa(g)||zo(g))return j!==null?null:d(w,y,g,S,null);vc(w,g)}return null}function m(w,y,g,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return w=w.get(g)||null,l(y,w,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lc:return w=w.get(S.key===null?g:S.key)||null,c(y,w,S,j);case Mi:return w=w.get(S.key===null?g:S.key)||null,u(y,w,S,j);case Ws:var k=S._init;return m(w,y,g,k(S._payload),j)}if(pa(S)||zo(S))return w=w.get(g)||null,d(y,w,S,j,null);vc(y,S)}return null}function p(w,y,g,S){for(var j=null,k=null,_=y,E=y=0,N=null;_!==null&&E<g.length;E++){_.index>E?(N=_,_=null):N=_.sibling;var D=f(w,_,g[E],S);if(D===null){_===null&&(_=N);break}e&&_&&D.alternate===null&&t(w,_),y=i(D,y,E),k===null?j=D:k.sibling=D,k=D,_=N}if(E===g.length)return n(w,_),Ue&&$r(w,E),j;if(_===null){for(;E<g.length;E++)_=h(w,g[E],S),_!==null&&(y=i(_,y,E),k===null?j=_:k.sibling=_,k=_);return Ue&&$r(w,E),j}for(_=s(w,_);E<g.length;E++)N=m(_,w,E,g[E],S),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?E:N.key),y=i(N,y,E),k===null?j=N:k.sibling=N,k=N);return e&&_.forEach(function(M){return t(w,M)}),Ue&&$r(w,E),j}function x(w,y,g,S){var j=zo(g);if(typeof j!="function")throw Error(Q(150));if(g=j.call(g),g==null)throw Error(Q(151));for(var k=j=null,_=y,E=y=0,N=null,D=g.next();_!==null&&!D.done;E++,D=g.next()){_.index>E?(N=_,_=null):N=_.sibling;var M=f(w,_,D.value,S);if(M===null){_===null&&(_=N);break}e&&_&&M.alternate===null&&t(w,_),y=i(M,y,E),k===null?j=M:k.sibling=M,k=M,_=N}if(D.done)return n(w,_),Ue&&$r(w,E),j;if(_===null){for(;!D.done;E++,D=g.next())D=h(w,D.value,S),D!==null&&(y=i(D,y,E),k===null?j=D:k.sibling=D,k=D);return Ue&&$r(w,E),j}for(_=s(w,_);!D.done;E++,D=g.next())D=m(_,w,E,D.value,S),D!==null&&(e&&D.alternate!==null&&_.delete(D.key===null?E:D.key),y=i(D,y,E),k===null?j=D:k.sibling=D,k=D);return e&&_.forEach(function(L){return t(w,L)}),Ue&&$r(w,E),j}function b(w,y,g,S){if(typeof g=="object"&&g!==null&&g.type===Ai&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case lc:e:{for(var j=g.key,k=y;k!==null;){if(k.key===j){if(j=g.type,j===Ai){if(k.tag===7){n(w,k.sibling),y=r(k,g.props.children),y.return=w,w=y;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ws&&w0(j)===k.type){n(w,k.sibling),y=r(k,g.props),y.ref=qo(w,k,g),y.return=w,w=y;break e}n(w,k);break}else t(w,k);k=k.sibling}g.type===Ai?(y=ni(g.props.children,w.mode,S,g.key),y.return=w,w=y):(S=pu(g.type,g.key,g.props,null,w.mode,S),S.ref=qo(w,y,g),S.return=w,w=S)}return o(w);case Mi:e:{for(k=g.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===g.containerInfo&&y.stateNode.implementation===g.implementation){n(w,y.sibling),y=r(y,g.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else t(w,y);y=y.sibling}y=nf(g,w.mode,S),y.return=w,w=y}return o(w);case Ws:return k=g._init,b(w,y,k(g._payload),S)}if(pa(g))return p(w,y,g,S);if(zo(g))return x(w,y,g,S);vc(w,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,y!==null&&y.tag===6?(n(w,y.sibling),y=r(y,g),y.return=w,w=y):(n(w,y),y=tf(g,w.mode,S),y.return=w,w=y),o(w)):n(w,y)}return b}var oo=JS(!0),ZS=JS(!1),$u=Er(null),Bu=null,zi=null,Dg=null;function Tg(){Dg=zi=Bu=null}function Pg(e){var t=$u.current;ze($u),e._currentValue=t}function Ym(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Bu=e,Dg=zi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ut=!0),e.firstContext=null)}function Nn(e){var t=e._currentValue;if(Dg!==e)if(e={context:e,memoizedValue:t,next:null},zi===null){if(Bu===null)throw Error(Q(308));zi=e,Bu.dependencies={lanes:0,firstContext:e}}else zi=zi.next=e;return t}var Kr=null;function Mg(e){Kr===null?Kr=[e]:Kr.push(e)}function ej(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,Mg(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ds(e,s)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hs=!1;function Ag(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ee&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Ds(e,n)}return r=s.interleaved,r===null?(t.next=t,Mg(s)):(t.next=r.next,r.next=t),s.interleaved=t,Ds(e,n)}function cu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,yg(e,n)}}function S0(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zu(e,t,n,s){var r=e.updateQueue;Hs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(f=t,m=n,x.tag){case 1:if(p=x.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Qe({},h,f);break e;case 2:Hs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);di|=o,e.lanes=o,e.memoizedState=h}}function j0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(Q(191,r));r.call(s)}}}var Fl={},Jn=Er(Fl),sl=Er(Fl),rl=Er(Fl);function Xr(e){if(e===Fl)throw Error(Q(174));return e}function Ig(e,t){switch(Oe(rl,t),Oe(sl,e),Oe(Jn,Fl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_m(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_m(t,e)}ze(Jn),Oe(Jn,t)}function ao(){ze(Jn),ze(sl),ze(rl)}function nj(e){Xr(rl.current);var t=Xr(Jn.current),n=_m(t,e.type);t!==n&&(Oe(sl,e),Oe(Jn,n))}function Rg(e){sl.current===e&&(ze(Jn),ze(sl))}var He=Er(0);function Vu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qh=[];function Og(){for(var e=0;e<Qh.length;e++)Qh[e]._workInProgressVersionPrimary=null;Qh.length=0}var uu=Is.ReactCurrentDispatcher,Kh=Is.ReactCurrentBatchConfig,ui=0,Ye=null,lt=null,ht=null,Uu=!1,Ma=!1,il=0,oT=0;function St(){throw Error(Q(321))}function Lg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zn(e[n],t[n]))return!1;return!0}function Fg(e,t,n,s,r,i){if(ui=i,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uu.current=e===null||e.memoizedState===null?uT:dT,e=n(s,r),Ma){i=0;do{if(Ma=!1,il=0,25<=i)throw Error(Q(301));i+=1,ht=lt=null,t.updateQueue=null,uu.current=hT,e=n(s,r)}while(Ma)}if(uu.current=Wu,t=lt!==null&&lt.next!==null,ui=0,ht=lt=Ye=null,Uu=!1,t)throw Error(Q(300));return e}function $g(){var e=il!==0;return il=0,e}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ye.memoizedState=ht=e:ht=ht.next=e,ht}function Cn(){if(lt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=ht===null?Ye.memoizedState:ht.next;if(t!==null)ht=t,lt=e;else{if(e===null)throw Error(Q(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ht===null?Ye.memoizedState=ht=e:ht=ht.next=e}return ht}function ol(e,t){return typeof t=="function"?t(e):t}function Xh(e){var t=Cn(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var s=lt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ui&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ye.lanes|=d,di|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,zn(s,t.memoizedState)||(Ut=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Ye.lanes|=i,di|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jh(e){var t=Cn(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=e(i,o.action),o=o.next;while(o!==r);zn(i,t.memoizedState)||(Ut=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function sj(){}function rj(e,t){var n=Ye,s=Cn(),r=t(),i=!zn(s.memoizedState,r);if(i&&(s.memoizedState=r,Ut=!0),s=s.queue,Bg(aj.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,al(9,oj.bind(null,n,s,r,t),void 0,null),ft===null)throw Error(Q(349));ui&30||ij(n,t,r)}return r}function ij(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function oj(e,t,n,s){t.value=n,t.getSnapshot=s,lj(t)&&cj(e)}function aj(e,t,n){return n(function(){lj(t)&&cj(e)})}function lj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zn(e,n)}catch{return!0}}function cj(e){var t=Ds(e,1);t!==null&&Fn(t,e,1,-1)}function N0(e){var t=Yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=cT.bind(null,Ye,e),[t.memoizedState,e]}function al(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function uj(){return Cn().memoizedState}function du(e,t,n,s){var r=Yn();Ye.flags|=e,r.memoizedState=al(1|t,n,void 0,s===void 0?null:s)}function Ud(e,t,n,s){var r=Cn();s=s===void 0?null:s;var i=void 0;if(lt!==null){var o=lt.memoizedState;if(i=o.destroy,s!==null&&Lg(s,o.deps)){r.memoizedState=al(t,n,i,s);return}}Ye.flags|=e,r.memoizedState=al(1|t,n,i,s)}function C0(e,t){return du(8390656,8,e,t)}function Bg(e,t){return Ud(2048,8,e,t)}function dj(e,t){return Ud(4,2,e,t)}function hj(e,t){return Ud(4,4,e,t)}function fj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mj(e,t,n){return n=n!=null?n.concat([e]):null,Ud(4,4,fj.bind(null,t,e),n)}function zg(){}function pj(e,t){var n=Cn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Lg(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function gj(e,t){var n=Cn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Lg(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function xj(e,t,n){return ui&21?(zn(n,t)||(n=SS(),Ye.lanes|=n,di|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ut=!0),e.memoizedState=n)}function aT(e,t){var n=Ie;Ie=n!==0&&4>n?n:4,e(!0);var s=Kh.transition;Kh.transition={};try{e(!1),t()}finally{Ie=n,Kh.transition=s}}function yj(){return Cn().memoizedState}function lT(e,t,n){var s=dr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},vj(e))bj(t,n);else if(n=ej(e,t,n,s),n!==null){var r=Lt();Fn(n,e,s,r),wj(n,t,s)}}function cT(e,t,n){var s=dr(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(vj(e))bj(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,zn(l,o)){var c=t.interleaved;c===null?(r.next=r,Mg(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=ej(e,t,r,s),n!==null&&(r=Lt(),Fn(n,e,s,r),wj(n,t,s))}}function vj(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function bj(e,t){Ma=Uu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wj(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,yg(e,n)}}var Wu={readContext:Nn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},uT={readContext:Nn,useCallback:function(e,t){return Yn().memoizedState=[e,t===void 0?null:t],e},useContext:Nn,useEffect:C0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,du(4194308,4,fj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return du(4194308,4,e,t)},useInsertionEffect:function(e,t){return du(4,2,e,t)},useMemo:function(e,t){var n=Yn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Yn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=lT.bind(null,Ye,e),[s.memoizedState,e]},useRef:function(e){var t=Yn();return e={current:e},t.memoizedState=e},useState:N0,useDebugValue:zg,useDeferredValue:function(e){return Yn().memoizedState=e},useTransition:function(){var e=N0(!1),t=e[0];return e=aT.bind(null,e[1]),Yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ye,r=Yn();if(Ue){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),ft===null)throw Error(Q(349));ui&30||ij(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,C0(aj.bind(null,s,i,e),[e]),s.flags|=2048,al(9,oj.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Yn(),t=ft.identifierPrefix;if(Ue){var n=xs,s=gs;n=(s&~(1<<32-Ln(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dT={readContext:Nn,useCallback:pj,useContext:Nn,useEffect:Bg,useImperativeHandle:mj,useInsertionEffect:dj,useLayoutEffect:hj,useMemo:gj,useReducer:Xh,useRef:uj,useState:function(){return Xh(ol)},useDebugValue:zg,useDeferredValue:function(e){var t=Cn();return xj(t,lt.memoizedState,e)},useTransition:function(){var e=Xh(ol)[0],t=Cn().memoizedState;return[e,t]},useMutableSource:sj,useSyncExternalStore:rj,useId:yj,unstable_isNewReconciler:!1},hT={readContext:Nn,useCallback:pj,useContext:Nn,useEffect:Bg,useImperativeHandle:mj,useInsertionEffect:dj,useLayoutEffect:hj,useMemo:gj,useReducer:Jh,useRef:uj,useState:function(){return Jh(ol)},useDebugValue:zg,useDeferredValue:function(e){var t=Cn();return lt===null?t.memoizedState=e:xj(t,lt.memoizedState,e)},useTransition:function(){var e=Jh(ol)[0],t=Cn().memoizedState;return[e,t]},useMutableSource:sj,useSyncExternalStore:rj,useId:yj,unstable_isNewReconciler:!1};function Mn(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Qm(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wd={isMounted:function(e){return(e=e._reactInternals)?xi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Lt(),r=dr(e),i=Ss(s,r);i.payload=t,n!=null&&(i.callback=n),t=cr(e,i,r),t!==null&&(Fn(t,e,r,s),cu(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Lt(),r=dr(e),i=Ss(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=cr(e,i,r),t!==null&&(Fn(t,e,r,s),cu(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lt(),s=dr(e),r=Ss(n,s);r.tag=2,t!=null&&(r.callback=t),t=cr(e,r,s),t!==null&&(Fn(t,e,s,n),cu(t,e,s))}};function E0(e,t,n,s,r,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Za(n,s)||!Za(r,i):!0}function Sj(e,t,n){var s=!1,r=br,i=t.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(r=qt(t)?li:Pt.current,s=t.contextTypes,i=(s=s!=null)?ro(e,r):br),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wd,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function k0(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Wd.enqueueReplaceState(t,t.state,null)}function Km(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ag(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Nn(i):(i=qt(t)?li:Pt.current,r.context=ro(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Qm(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Wd.enqueueReplaceState(r,r.state,null),zu(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do n+=B_(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Zh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Xm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fT=typeof WeakMap=="function"?WeakMap:Map;function jj(e,t,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){qu||(qu=!0,ap=s),Xm(e,t)},n}function Nj(e,t,n){n=Ss(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){Xm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xm(e,t),typeof s!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function _0(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new fT;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=kT.bind(null,e,t,n),t.then(e,e))}function D0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function T0(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ss(-1,1),t.tag=2,cr(n,t,1))),n.lanes|=1),e)}var mT=Is.ReactCurrentOwner,Ut=!1;function Ot(e,t,n,s){t.child=e===null?ZS(t,null,n,s):oo(t,e.child,n,s)}function P0(e,t,n,s,r){n=n.render;var i=t.ref;return Ji(t,r),s=Fg(e,t,n,s,i,r),n=$g(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ts(e,t,r)):(Ue&&n&&Eg(t),t.flags|=1,Ot(e,t,s,r),t.child)}function M0(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!Qg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Cj(e,t,i,s,r)):(e=pu(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Za,n(o,s)&&e.ref===t.ref)return Ts(e,t,r)}return t.flags|=1,e=hr(i,s),e.ref=t.ref,e.return=t,t.child=e}function Cj(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(Za(i,s)&&e.ref===t.ref)if(Ut=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(Ut=!0);else return t.lanes=e.lanes,Ts(e,t,r)}return Jm(e,t,n,s,r)}function Ej(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Ui,Jt),Jt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(Ui,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Oe(Ui,Jt),Jt|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Oe(Ui,Jt),Jt|=s;return Ot(e,t,r,n),t.child}function kj(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Jm(e,t,n,s,r){var i=qt(n)?li:Pt.current;return i=ro(t,i),Ji(t,r),n=Fg(e,t,n,s,i,r),s=$g(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ts(e,t,r)):(Ue&&s&&Eg(t),t.flags|=1,Ot(e,t,n,r),t.child)}function A0(e,t,n,s,r){if(qt(n)){var i=!0;Ou(t)}else i=!1;if(Ji(t,r),t.stateNode===null)hu(e,t),Sj(t,n,s),Km(t,n,s,r),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Nn(u):(u=qt(n)?li:Pt.current,u=ro(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&k0(t,o,s,u),Hs=!1;var f=t.memoizedState;o.state=f,zu(t,s,o,r),c=t.memoizedState,l!==s||f!==c||Ht.current||Hs?(typeof d=="function"&&(Qm(t,n,d,s),c=t.memoizedState),(l=Hs||E0(t,n,l,s,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,tj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Mn(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=qt(n)?li:Pt.current,c=ro(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&k0(t,o,s,c),Hs=!1,f=t.memoizedState,o.state=f,zu(t,s,o,r);var p=t.memoizedState;l!==h||f!==p||Ht.current||Hs?(typeof m=="function"&&(Qm(t,n,m,s),p=t.memoizedState),(u=Hs||E0(t,n,u,s,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),o.props=s,o.state=p,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Zm(e,t,n,s,i,r)}function Zm(e,t,n,s,r,i){kj(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return r&&y0(t,n,!1),Ts(e,t,i);s=t.stateNode,mT.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=oo(t,e.child,null,i),t.child=oo(t,null,l,i)):Ot(e,t,l,i),t.memoizedState=s.state,r&&y0(t,n,!0),t.child}function _j(e){var t=e.stateNode;t.pendingContext?x0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&x0(e,t.context,!1),Ig(e,t.containerInfo)}function I0(e,t,n,s,r){return io(),_g(r),t.flags|=256,Ot(e,t,n,s),t.child}var ep={dehydrated:null,treeContext:null,retryLane:0};function tp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dj(e,t,n){var s=t.pendingProps,r=He.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Oe(He,r&1),e===null)return Gm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Gd(o,s,0,null),e=ni(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=tp(n),t.memoizedState=ep,e):Vg(t,o));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return pT(e,t,o,s,l,r,n);if(i){i=s.fallback,o=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=hr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=hr(l,i):(i=ni(i,o,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?tp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ep,s}return i=e.child,e=i.sibling,s=hr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Vg(e,t){return t=Gd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bc(e,t,n,s){return s!==null&&_g(s),oo(t,e.child,null,n),e=Vg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pT(e,t,n,s,r,i,o){if(n)return t.flags&256?(t.flags&=-257,s=Zh(Error(Q(422))),bc(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Gd({mode:"visible",children:s.children},r,0,null),i=ni(i,r,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&oo(t,e.child,null,o),t.child.memoizedState=tp(o),t.memoizedState=ep,i);if(!(t.mode&1))return bc(e,t,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(Q(419)),s=Zh(i,s,void 0),bc(e,t,o,s)}if(l=(o&e.childLanes)!==0,Ut||l){if(s=ft,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ds(e,r),Fn(s,e,r,-1))}return Yg(),s=Zh(Error(Q(421))),bc(e,t,o,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=_T.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,tn=lr(r.nextSibling),sn=t,Ue=!0,Rn=null,e!==null&&(gn[xn++]=gs,gn[xn++]=xs,gn[xn++]=ci,gs=e.id,xs=e.overflow,ci=t),t=Vg(t,s.children),t.flags|=4096,t)}function R0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Ym(e.return,t,n)}function ef(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Tj(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Ot(e,t,s.children,n),s=He.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&R0(e,n,t);else if(e.tag===19)R0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Oe(He,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Vu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ef(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Vu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ef(t,!0,n,null,i);break;case"together":ef(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ts(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),di|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=hr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gT(e,t,n){switch(t.tag){case 3:_j(t),io();break;case 5:nj(t);break;case 1:qt(t.type)&&Ou(t);break;case 4:Ig(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Oe($u,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Oe(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?Dj(e,t,n):(Oe(He,He.current&1),e=Ts(e,t,n),e!==null?e.sibling:null);Oe(He,He.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Tj(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,Ej(e,t,n)}return Ts(e,t,n)}var Pj,np,Mj,Aj;Pj=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};np=function(){};Mj=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Xr(Jn.current);var i=null;switch(n){case"input":r=Nm(e,r),s=Nm(e,s),i=[];break;case"select":r=Qe({},r,{value:void 0}),s=Qe({},s,{value:void 0}),i=[];break;case"textarea":r=km(e,r),s=km(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Iu)}Dm(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Fe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Aj=function(e,t,n,s){n!==s&&(t.flags|=4)};function Go(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function xT(e,t,n){var s=t.pendingProps;switch(kg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return qt(t.type)&&Ru(),jt(t),null;case 3:return s=t.stateNode,ao(),ze(Ht),ze(Pt),Og(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(yc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rn!==null&&(up(Rn),Rn=null))),np(e,t),jt(t),null;case 5:Rg(t);var r=Xr(rl.current);if(n=t.type,e!==null&&t.stateNode!=null)Mj(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Q(166));return jt(t),null}if(e=Xr(Jn.current),yc(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[Kn]=t,s[nl]=i,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(r=0;r<xa.length;r++)Fe(xa[r],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Wy(s,i),Fe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Fe("invalid",s);break;case"textarea":qy(s,i),Fe("invalid",s)}Dm(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&xc(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&xc(s.textContent,l,e),r=["children",""+l]):qa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",s)}switch(n){case"input":cc(s),Hy(s,i,!0);break;case"textarea":cc(s),Gy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Iu)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=aS(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Kn]=t,e[nl]=s,Pj(e,t,!1,!1),t.stateNode=e;e:{switch(o=Tm(n,s),n){case"dialog":Fe("cancel",e),Fe("close",e),r=s;break;case"iframe":case"object":case"embed":Fe("load",e),r=s;break;case"video":case"audio":for(r=0;r<xa.length;r++)Fe(xa[r],e);r=s;break;case"source":Fe("error",e),r=s;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),r=s;break;case"details":Fe("toggle",e),r=s;break;case"input":Wy(e,s),r=Nm(e,s),Fe("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=Qe({},s,{value:void 0}),Fe("invalid",e);break;case"textarea":qy(e,s),r=km(e,s),Fe("invalid",e);break;default:r=s}Dm(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?uS(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lS(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ga(e,c):typeof c=="number"&&Ga(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Fe("scroll",e):c!=null&&hg(e,i,c,o))}switch(n){case"input":cc(e),Hy(e,s,!1);break;case"textarea":cc(e),Gy(e);break;case"option":s.value!=null&&e.setAttribute("value",""+vr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Yi(e,!!s.multiple,i,!1):s.defaultValue!=null&&Yi(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Iu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)Aj(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Q(166));if(n=Xr(rl.current),Xr(Jn.current),yc(t)){if(s=t.stateNode,n=t.memoizedProps,s[Kn]=t,(i=s.nodeValue!==n)&&(e=sn,e!==null))switch(e.tag){case 3:xc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xc(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Kn]=t,t.stateNode=s}return jt(t),null;case 13:if(ze(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&tn!==null&&t.mode&1&&!(t.flags&128))XS(),io(),t.flags|=98560,i=!1;else if(i=yc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Kn]=t}else io(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),i=!1}else Rn!==null&&(up(Rn),Rn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?ct===0&&(ct=3):Yg())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return ao(),np(e,t),e===null&&el(t.stateNode.containerInfo),jt(t),null;case 10:return Pg(t.type._context),jt(t),null;case 17:return qt(t.type)&&Ru(),jt(t),null;case 19:if(ze(He),i=t.memoizedState,i===null)return jt(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Go(i,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vu(e),o!==null){for(t.flags|=128,Go(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(He,He.current&1|2),t.child}e=e.sibling}i.tail!==null&&Je()>co&&(t.flags|=128,s=!0,Go(i,!1),t.lanes=4194304)}else{if(!s)if(e=Vu(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Go(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ue)return jt(t),null}else 2*Je()-i.renderingStartTime>co&&n!==1073741824&&(t.flags|=128,s=!0,Go(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=He.current,Oe(He,s?n&1|2:n&1),t):(jt(t),null);case 22:case 23:return Gg(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Jt&1073741824&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function yT(e,t){switch(kg(t),t.tag){case 1:return qt(t.type)&&Ru(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ao(),ze(Ht),ze(Pt),Og(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rg(t),null;case 13:if(ze(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));io()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(He),null;case 4:return ao(),null;case 10:return Pg(t.type._context),null;case 22:case 23:return Gg(),null;case 24:return null;default:return null}}var wc=!1,kt=!1,vT=typeof WeakSet=="function"?WeakSet:Set,se=null;function Vi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Xe(e,t,s)}else n.current=null}function sp(e,t,n){try{n()}catch(s){Xe(e,t,s)}}var O0=!1;function bT(e,t){if(Bm=Pu,e=FS(),Cg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(l=o+r),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=o),f===i&&++d===s&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(zm={focusedElem:e,selectionRange:n},Pu=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,b=p.memoizedState,w=t.stateNode,y=w.getSnapshotBeforeUpdate(t.elementType===t.type?x:Mn(t.type,x),b);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(S){Xe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return p=O0,O0=!1,p}function Aa(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&sp(t,n,i)}r=r.next}while(r!==s)}}function Hd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function rp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ij(e){var t=e.alternate;t!==null&&(e.alternate=null,Ij(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kn],delete t[nl],delete t[Wm],delete t[nT],delete t[sT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rj(e){return e.tag===5||e.tag===3||e.tag===4}function L0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ip(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Iu));else if(s!==4&&(e=e.child,e!==null))for(ip(e,t,n),e=e.sibling;e!==null;)ip(e,t,n),e=e.sibling}function op(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(op(e,t,n),e=e.sibling;e!==null;)op(e,t,n),e=e.sibling}var xt=null,An=!1;function Ls(e,t,n){for(n=n.child;n!==null;)Oj(e,t,n),n=n.sibling}function Oj(e,t,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Ld,n)}catch{}switch(n.tag){case 5:kt||Vi(n,t);case 6:var s=xt,r=An;xt=null,Ls(e,t,n),xt=s,An=r,xt!==null&&(An?(e=xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(An?(e=xt,n=n.stateNode,e.nodeType===8?Gh(e.parentNode,n):e.nodeType===1&&Gh(e,n),Xa(e)):Gh(xt,n.stateNode));break;case 4:s=xt,r=An,xt=n.stateNode.containerInfo,An=!0,Ls(e,t,n),xt=s,An=r;break;case 0:case 11:case 14:case 15:if(!kt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sp(n,t,o),r=r.next}while(r!==s)}Ls(e,t,n);break;case 1:if(!kt&&(Vi(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Xe(n,t,l)}Ls(e,t,n);break;case 21:Ls(e,t,n);break;case 22:n.mode&1?(kt=(s=kt)||n.memoizedState!==null,Ls(e,t,n),kt=s):Ls(e,t,n);break;default:Ls(e,t,n)}}function F0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vT),t.forEach(function(s){var r=DT.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Pn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,An=!1;break e;case 3:xt=l.stateNode.containerInfo,An=!0;break e;case 4:xt=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(xt===null)throw Error(Q(160));Oj(i,o,r),xt=null,An=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Xe(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lj(t,e),t=t.sibling}function Lj(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pn(t,e),Hn(e),s&4){try{Aa(3,e,e.return),Hd(3,e)}catch(x){Xe(e,e.return,x)}try{Aa(5,e,e.return)}catch(x){Xe(e,e.return,x)}}break;case 1:Pn(t,e),Hn(e),s&512&&n!==null&&Vi(n,n.return);break;case 5:if(Pn(t,e),Hn(e),s&512&&n!==null&&Vi(n,n.return),e.flags&32){var r=e.stateNode;try{Ga(r,"")}catch(x){Xe(e,e.return,x)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&iS(r,i),Tm(l,o);var u=Tm(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?uS(r,h):d==="dangerouslySetInnerHTML"?lS(r,h):d==="children"?Ga(r,h):hg(r,d,h,u)}switch(l){case"input":Cm(r,i);break;case"textarea":oS(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Yi(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Yi(r,!!i.multiple,i.defaultValue,!0):Yi(r,!!i.multiple,i.multiple?[]:"",!1))}r[nl]=i}catch(x){Xe(e,e.return,x)}}break;case 6:if(Pn(t,e),Hn(e),s&4){if(e.stateNode===null)throw Error(Q(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(x){Xe(e,e.return,x)}}break;case 3:if(Pn(t,e),Hn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(t.containerInfo)}catch(x){Xe(e,e.return,x)}break;case 4:Pn(t,e),Hn(e);break;case 13:Pn(t,e),Hn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Hg=Je())),s&4&&F0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(kt=(u=kt)||d,Pn(t,e),kt=u):Pn(t,e),Hn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(se=e,d=e.child;d!==null;){for(h=se=d;se!==null;){switch(f=se,m=f.child,f.tag){case 0:case 11:case 14:case 15:Aa(4,f,f.return);break;case 1:Vi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){Xe(s,n,x)}}break;case 5:Vi(f,f.return);break;case 22:if(f.memoizedState!==null){B0(h);continue}}m!==null?(m.return=f,se=m):B0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cS("display",o))}catch(x){Xe(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Xe(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pn(t,e),Hn(e),s&4&&F0(e);break;case 21:break;default:Pn(t,e),Hn(e)}}function Hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rj(n)){var s=n;break e}n=n.return}throw Error(Q(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Ga(r,""),s.flags&=-33);var i=L0(e);op(e,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=L0(e);ip(e,l,o);break;default:throw Error(Q(161))}}catch(c){Xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wT(e,t,n){se=e,Fj(e)}function Fj(e,t,n){for(var s=(e.mode&1)!==0;se!==null;){var r=se,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||wc;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||kt;l=wc;var u=kt;if(wc=o,(kt=c)&&!u)for(se=r;se!==null;)o=se,c=o.child,o.tag===22&&o.memoizedState!==null?z0(r):c!==null?(c.return=o,se=c):z0(r);for(;i!==null;)se=i,Fj(i),i=i.sibling;se=r,wc=l,kt=u}$0(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,se=i):$0(e)}}function $0(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:kt||Hd(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!kt)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Mn(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&j0(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}j0(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}kt||t.flags&512&&rp(t)}catch(f){Xe(t,t.return,f)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function B0(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function z0(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hd(4,t)}catch(c){Xe(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){Xe(t,r,c)}}var i=t.return;try{rp(t)}catch(c){Xe(t,i,c)}break;case 5:var o=t.return;try{rp(t)}catch(c){Xe(t,o,c)}}}catch(c){Xe(t,t.return,c)}if(t===e){se=null;break}var l=t.sibling;if(l!==null){l.return=t.return,se=l;break}se=t.return}}var ST=Math.ceil,Hu=Is.ReactCurrentDispatcher,Ug=Is.ReactCurrentOwner,Sn=Is.ReactCurrentBatchConfig,Ee=0,ft=null,st=null,vt=0,Jt=0,Ui=Er(0),ct=0,ll=null,di=0,qd=0,Wg=0,Ia=null,zt=null,Hg=0,co=1/0,fs=null,qu=!1,ap=null,ur=null,Sc=!1,Js=null,Gu=0,Ra=0,lp=null,fu=-1,mu=0;function Lt(){return Ee&6?Je():fu!==-1?fu:fu=Je()}function dr(e){return e.mode&1?Ee&2&&vt!==0?vt&-vt:iT.transition!==null?(mu===0&&(mu=SS()),mu):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:DS(e.type)),e):1}function Fn(e,t,n,s){if(50<Ra)throw Ra=0,lp=null,Error(Q(185));Rl(e,n,s),(!(Ee&2)||e!==ft)&&(e===ft&&(!(Ee&2)&&(qd|=n),ct===4&&Qs(e,vt)),Gt(e,s),n===1&&Ee===0&&!(t.mode&1)&&(co=Je()+500,Vd&&kr()))}function Gt(e,t){var n=e.callbackNode;iD(e,t);var s=Tu(e,e===ft?vt:0);if(s===0)n!==null&&Ky(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Ky(n),t===1)e.tag===0?rT(V0.bind(null,e)):YS(V0.bind(null,e)),eT(function(){!(Ee&6)&&kr()}),n=null;else{switch(jS(s)){case 1:n=xg;break;case 4:n=bS;break;case 16:n=Du;break;case 536870912:n=wS;break;default:n=Du}n=qj(n,$j.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $j(e,t){if(fu=-1,mu=0,Ee&6)throw Error(Q(327));var n=e.callbackNode;if(Zi()&&e.callbackNode!==n)return null;var s=Tu(e,e===ft?vt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Yu(e,s);else{t=s;var r=Ee;Ee|=2;var i=zj();(ft!==e||vt!==t)&&(fs=null,co=Je()+500,ti(e,t));do try{CT();break}catch(l){Bj(e,l)}while(!0);Tg(),Hu.current=i,Ee=r,st!==null?t=0:(ft=null,vt=0,t=ct)}if(t!==0){if(t===2&&(r=Rm(e),r!==0&&(s=r,t=cp(e,r))),t===1)throw n=ll,ti(e,0),Qs(e,s),Gt(e,Je()),n;if(t===6)Qs(e,s);else{if(r=e.current.alternate,!(s&30)&&!jT(r)&&(t=Yu(e,s),t===2&&(i=Rm(e),i!==0&&(s=i,t=cp(e,i))),t===1))throw n=ll,ti(e,0),Qs(e,s),Gt(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(Q(345));case 2:Br(e,zt,fs);break;case 3:if(Qs(e,s),(s&130023424)===s&&(t=Hg+500-Je(),10<t)){if(Tu(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Lt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Um(Br.bind(null,e,zt,fs),t);break}Br(e,zt,fs);break;case 4:if(Qs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-Ln(s);i=1<<o,o=t[o],o>r&&(r=o),s&=~i}if(s=r,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ST(s/1960))-s,10<s){e.timeoutHandle=Um(Br.bind(null,e,zt,fs),s);break}Br(e,zt,fs);break;case 5:Br(e,zt,fs);break;default:throw Error(Q(329))}}}return Gt(e,Je()),e.callbackNode===n?$j.bind(null,e):null}function cp(e,t){var n=Ia;return e.current.memoizedState.isDehydrated&&(ti(e,t).flags|=256),e=Yu(e,t),e!==2&&(t=zt,zt=n,t!==null&&up(t)),e}function up(e){zt===null?zt=e:zt.push.apply(zt,e)}function jT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!zn(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qs(e,t){for(t&=~Wg,t&=~qd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ln(t),s=1<<n;e[n]=-1,t&=~s}}function V0(e){if(Ee&6)throw Error(Q(327));Zi();var t=Tu(e,0);if(!(t&1))return Gt(e,Je()),null;var n=Yu(e,t);if(e.tag!==0&&n===2){var s=Rm(e);s!==0&&(t=s,n=cp(e,s))}if(n===1)throw n=ll,ti(e,0),Qs(e,t),Gt(e,Je()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,zt,fs),Gt(e,Je()),null}function qg(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(co=Je()+500,Vd&&kr())}}function hi(e){Js!==null&&Js.tag===0&&!(Ee&6)&&Zi();var t=Ee;Ee|=1;var n=Sn.transition,s=Ie;try{if(Sn.transition=null,Ie=1,e)return e()}finally{Ie=s,Sn.transition=n,Ee=t,!(Ee&6)&&kr()}}function Gg(){Jt=Ui.current,ze(Ui)}function ti(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ZD(n)),st!==null)for(n=st.return;n!==null;){var s=n;switch(kg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ru();break;case 3:ao(),ze(Ht),ze(Pt),Og();break;case 5:Rg(s);break;case 4:ao();break;case 13:ze(He);break;case 19:ze(He);break;case 10:Pg(s.type._context);break;case 22:case 23:Gg()}n=n.return}if(ft=e,st=e=hr(e.current,null),vt=Jt=t,ct=0,ll=null,Wg=qd=di=0,zt=Ia=null,Kr!==null){for(t=0;t<Kr.length;t++)if(n=Kr[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}Kr=null}return e}function Bj(e,t){do{var n=st;try{if(Tg(),uu.current=Wu,Uu){for(var s=Ye.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Uu=!1}if(ui=0,ht=lt=Ye=null,Ma=!1,il=0,Ug.current=null,n===null||n.return===null){ct=1,ll=t,st=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=D0(o);if(m!==null){m.flags&=-257,T0(m,o,l,i,t),m.mode&1&&_0(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}else{if(!(t&1)){_0(i,u,t),Yg();break e}c=Error(Q(426))}}else if(Ue&&l.mode&1){var b=D0(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),T0(b,o,l,i,t),_g(lo(c,l));break e}}i=c=lo(c,l),ct!==4&&(ct=2),Ia===null?Ia=[i]:Ia.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=jj(i,c,t);S0(i,w);break e;case 1:l=c;var y=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ur===null||!ur.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=Nj(i,l,t);S0(i,S);break e}}i=i.return}while(i!==null)}Uj(n)}catch(j){t=j,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function zj(){var e=Hu.current;return Hu.current=Wu,e===null?Wu:e}function Yg(){(ct===0||ct===3||ct===2)&&(ct=4),ft===null||!(di&268435455)&&!(qd&268435455)||Qs(ft,vt)}function Yu(e,t){var n=Ee;Ee|=2;var s=zj();(ft!==e||vt!==t)&&(fs=null,ti(e,t));do try{NT();break}catch(r){Bj(e,r)}while(!0);if(Tg(),Ee=n,Hu.current=s,st!==null)throw Error(Q(261));return ft=null,vt=0,ct}function NT(){for(;st!==null;)Vj(st)}function CT(){for(;st!==null&&!K_();)Vj(st)}function Vj(e){var t=Hj(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Uj(e):st=t,Ug.current=null}function Uj(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yT(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,st=null;return}}else if(n=xT(n,t,Jt),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);ct===0&&(ct=5)}function Br(e,t,n){var s=Ie,r=Sn.transition;try{Sn.transition=null,Ie=1,ET(e,t,n,s)}finally{Sn.transition=r,Ie=s}return null}function ET(e,t,n,s){do Zi();while(Js!==null);if(Ee&6)throw Error(Q(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(oD(e,i),e===ft&&(st=ft=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,qj(Du,function(){return Zi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=Ie;Ie=1;var l=Ee;Ee|=4,Ug.current=null,bT(e,n),Lj(n,e),qD(zm),Pu=!!Bm,zm=Bm=null,e.current=n,wT(n),X_(),Ee=l,Ie=o,Sn.transition=i}else e.current=n;if(Sc&&(Sc=!1,Js=e,Gu=r),i=e.pendingLanes,i===0&&(ur=null),eD(n.stateNode),Gt(e,Je()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(qu)throw qu=!1,e=ap,ap=null,e;return Gu&1&&e.tag!==0&&Zi(),i=e.pendingLanes,i&1?e===lp?Ra++:(Ra=0,lp=e):Ra=0,kr(),null}function Zi(){if(Js!==null){var e=jS(Gu),t=Sn.transition,n=Ie;try{if(Sn.transition=null,Ie=16>e?16:e,Js===null)var s=!1;else{if(e=Js,Js=null,Gu=0,Ee&6)throw Error(Q(331));var r=Ee;for(Ee|=4,se=e.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Aa(8,d,i)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var f=d.sibling,m=d.return;if(Ij(d),d===u){se=null;break}if(f!==null){f.return=m,se=f;break}se=m}}}var p=i.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Aa(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,se=w;break e}se=i.return}}var y=e.current;for(se=y;se!==null;){o=se;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,se=g;else e:for(o=y;se!==null;){if(l=se,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Hd(9,l)}}catch(j){Xe(l,l.return,j)}if(l===o){se=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,se=S;break e}se=l.return}}if(Ee=r,kr(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Ld,e)}catch{}s=!0}return s}finally{Ie=n,Sn.transition=t}}return!1}function U0(e,t,n){t=lo(n,t),t=jj(e,t,1),e=cr(e,t,1),t=Lt(),e!==null&&(Rl(e,1,t),Gt(e,t))}function Xe(e,t,n){if(e.tag===3)U0(e,e,n);else for(;t!==null;){if(t.tag===3){U0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ur===null||!ur.has(s))){e=lo(n,e),e=Nj(t,e,1),t=cr(t,e,1),e=Lt(),t!==null&&(Rl(t,1,e),Gt(t,e));break}}t=t.return}}function kT(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Lt(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(vt&n)===n&&(ct===4||ct===3&&(vt&130023424)===vt&&500>Je()-Hg?ti(e,0):Wg|=n),Gt(e,t)}function Wj(e,t){t===0&&(e.mode&1?(t=hc,hc<<=1,!(hc&130023424)&&(hc=4194304)):t=1);var n=Lt();e=Ds(e,t),e!==null&&(Rl(e,t,n),Gt(e,n))}function _T(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wj(e,n)}function DT(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Q(314))}s!==null&&s.delete(t),Wj(e,n)}var Hj;Hj=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ut=!1,gT(e,t,n);Ut=!!(e.flags&131072)}else Ut=!1,Ue&&t.flags&1048576&&QS(t,Fu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;hu(e,t),e=t.pendingProps;var r=ro(t,Pt.current);Ji(t,n),r=Fg(null,t,s,e,r,n);var i=$g();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(s)?(i=!0,Ou(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ag(t),r.updater=Wd,t.stateNode=r,r._reactInternals=t,Km(t,s,e,n),t=Zm(null,t,s,!0,i,n)):(t.tag=0,Ue&&i&&Eg(t),Ot(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(hu(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=PT(s),e=Mn(s,e),r){case 0:t=Jm(null,t,s,e,n);break e;case 1:t=A0(null,t,s,e,n);break e;case 11:t=P0(null,t,s,e,n);break e;case 14:t=M0(null,t,s,Mn(s.type,e),n);break e}throw Error(Q(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),Jm(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),A0(e,t,s,r,n);case 3:e:{if(_j(t),e===null)throw Error(Q(387));s=t.pendingProps,i=t.memoizedState,r=i.element,tj(e,t),zu(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=lo(Error(Q(423)),t),t=I0(e,t,s,n,r);break e}else if(s!==r){r=lo(Error(Q(424)),t),t=I0(e,t,s,n,r);break e}else for(tn=lr(t.stateNode.containerInfo.firstChild),sn=t,Ue=!0,Rn=null,n=ZS(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),s===r){t=Ts(e,t,n);break e}Ot(e,t,s,n)}t=t.child}return t;case 5:return nj(t),e===null&&Gm(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,o=r.children,Vm(s,r)?o=null:i!==null&&Vm(s,i)&&(t.flags|=32),kj(e,t),Ot(e,t,o,n),t.child;case 6:return e===null&&Gm(t),null;case 13:return Dj(e,t,n);case 4:return Ig(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=oo(t,null,s,n):Ot(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),P0(e,t,s,r,n);case 7:return Ot(e,t,t.pendingProps,n),t.child;case 8:return Ot(e,t,t.pendingProps.children,n),t.child;case 12:return Ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,Oe($u,s._currentValue),s._currentValue=o,i!==null)if(zn(i.value,o)){if(i.children===r.children&&!Ht.current){t=Ts(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ss(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ym(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ym(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ot(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ji(t,n),r=Nn(r),s=s(r),t.flags|=1,Ot(e,t,s,n),t.child;case 14:return s=t.type,r=Mn(s,t.pendingProps),r=Mn(s.type,r),M0(e,t,s,r,n);case 15:return Cj(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),hu(e,t),t.tag=1,qt(s)?(e=!0,Ou(t)):e=!1,Ji(t,n),Sj(t,s,r),Km(t,s,r,n),Zm(null,t,s,!0,e,n);case 19:return Tj(e,t,n);case 22:return Ej(e,t,n)}throw Error(Q(156,t.tag))};function qj(e,t){return vS(e,t)}function TT(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,t,n,s){return new TT(e,t,n,s)}function Qg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PT(e){if(typeof e=="function")return Qg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mg)return 11;if(e===pg)return 14}return 2}function hr(e,t){var n=e.alternate;return n===null?(n=vn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pu(e,t,n,s,r,i){var o=2;if(s=e,typeof e=="function")Qg(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ai:return ni(n.children,r,i,t);case fg:o=8,r|=8;break;case bm:return e=vn(12,n,t,r|2),e.elementType=bm,e.lanes=i,e;case wm:return e=vn(13,n,t,r),e.elementType=wm,e.lanes=i,e;case Sm:return e=vn(19,n,t,r),e.elementType=Sm,e.lanes=i,e;case nS:return Gd(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case eS:o=10;break e;case tS:o=9;break e;case mg:o=11;break e;case pg:o=14;break e;case Ws:o=16,s=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=vn(o,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function ni(e,t,n,s){return e=vn(7,e,s,t),e.lanes=n,e}function Gd(e,t,n,s){return e=vn(22,e,s,t),e.elementType=nS,e.lanes=n,e.stateNode={isHidden:!1},e}function tf(e,t,n){return e=vn(6,e,null,t),e.lanes=n,e}function nf(e,t,n){return t=vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MT(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Kg(e,t,n,s,r,i,o,l,c){return e=new MT(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ag(i),e}function AT(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Gj(e){if(!e)return br;e=e._reactInternals;e:{if(xi(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(qt(n))return GS(e,n,t)}return t}function Yj(e,t,n,s,r,i,o,l,c){return e=Kg(n,s,!0,e,r,i,o,l,c),e.context=Gj(null),n=e.current,s=Lt(),r=dr(n),i=Ss(s,r),i.callback=t??null,cr(n,i,r),e.current.lanes=r,Rl(e,r,s),Gt(e,s),e}function Yd(e,t,n,s){var r=t.current,i=Lt(),o=dr(r);return n=Gj(n),t.context===null?t.context=n:t.pendingContext=n,t=Ss(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=cr(r,t,o),e!==null&&(Fn(e,r,o,i),cu(e,r,o)),o}function Qu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function W0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xg(e,t){W0(e,t),(e=e.alternate)&&W0(e,t)}function IT(){return null}var Qj=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jg(e){this._internalRoot=e}Qd.prototype.render=Jg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Yd(e,t,null,null)};Qd.prototype.unmount=Jg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hi(function(){Yd(null,e,null,null)}),t[_s]=null}};function Qd(e){this._internalRoot=e}Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=ES();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ys.length&&t!==0&&t<Ys[n].priority;n++);Ys.splice(n,0,e),n===0&&_S(e)}};function Zg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H0(){}function RT(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Qu(o);i.call(u)}}var o=Yj(t,s,e,0,null,!1,!1,"",H0);return e._reactRootContainer=o,e[_s]=o.current,el(e.nodeType===8?e.parentNode:e),hi(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=Qu(c);l.call(u)}}var c=Kg(e,0,!1,null,null,!1,!1,"",H0);return e._reactRootContainer=c,e[_s]=c.current,el(e.nodeType===8?e.parentNode:e),hi(function(){Yd(t,c,n,s)}),c}function Xd(e,t,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=Qu(o);l.call(c)}}Yd(t,o,e,r)}else o=RT(n,t,e,r,s);return Qu(o)}NS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ga(t.pendingLanes);n!==0&&(yg(t,n|1),Gt(t,Je()),!(Ee&6)&&(co=Je()+500,kr()))}break;case 13:hi(function(){var s=Ds(e,1);if(s!==null){var r=Lt();Fn(s,e,1,r)}}),Xg(e,1)}};vg=function(e){if(e.tag===13){var t=Ds(e,134217728);if(t!==null){var n=Lt();Fn(t,e,134217728,n)}Xg(e,134217728)}};CS=function(e){if(e.tag===13){var t=dr(e),n=Ds(e,t);if(n!==null){var s=Lt();Fn(n,e,t,s)}Xg(e,t)}};ES=function(){return Ie};kS=function(e,t){var n=Ie;try{return Ie=e,t()}finally{Ie=n}};Mm=function(e,t,n){switch(t){case"input":if(Cm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=zd(s);if(!r)throw Error(Q(90));rS(s),Cm(s,r)}}}break;case"textarea":oS(e,n);break;case"select":t=n.value,t!=null&&Yi(e,!!n.multiple,t,!1)}};fS=qg;mS=hi;var OT={usingClientEntryPoint:!1,Events:[Ll,Li,zd,dS,hS,qg]},Yo={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LT={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Is.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xS(e),e===null?null:e.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||IT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Ld=jc.inject(LT),Xn=jc}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OT;cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(t))throw Error(Q(200));return AT(e,t,null,n)};cn.createRoot=function(e,t){if(!Zg(e))throw Error(Q(299));var n=!1,s="",r=Qj;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Kg(e,1,!1,null,null,n,!1,s,r),e[_s]=t.current,el(e.nodeType===8?e.parentNode:e),new Jg(t)};cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=xS(t),e=e===null?null:e.stateNode,e};cn.flushSync=function(e){return hi(e)};cn.hydrate=function(e,t,n){if(!Kd(t))throw Error(Q(200));return Xd(null,e,t,!0,n)};cn.hydrateRoot=function(e,t,n){if(!Zg(e))throw Error(Q(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=Qj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Yj(t,null,e,1,n??null,r,!1,i,o),e[_s]=t.current,el(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qd(t)};cn.render=function(e,t,n){if(!Kd(t))throw Error(Q(200));return Xd(null,e,t,!1,n)};cn.unmountComponentAtNode=function(e){if(!Kd(e))throw Error(Q(40));return e._reactRootContainer?(hi(function(){Xd(null,null,e,!1,function(){e._reactRootContainer=null,e[_s]=null})}),!0):!1};cn.unstable_batchedUpdates=qg;cn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Kd(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Xd(e,t,n,!1,s)};cn.version="18.3.1-next-f1338f8080-20240426";function Kj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kj)}catch(e){console.error(e)}}Kj(),K1.exports=cn;var $l=K1.exports;const FT=ig($l);var Xj,q0=$l;Xj=q0.createRoot,q0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cl.apply(this,arguments)}var Zs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zs||(Zs={}));const G0="popstate";function $T(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return dp("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Ku(r)}return zT(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function BT(){return Math.random().toString(36).substr(2,8)}function Y0(e,t){return{usr:e.state,key:e.key,idx:t}}function dp(e,t,n,s){return n===void 0&&(n=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?No(t):t,{state:n,key:t&&t.key||s||BT()})}function Ku(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function No(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function zT(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l=Zs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(cl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Zs.Pop;let b=d(),w=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:w})}function f(b,w){l=Zs.Push;let y=dp(x.location,b,w);u=d()+1;let g=Y0(y,u),S=x.createHref(y);try{o.pushState(g,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(S)}i&&c&&c({action:l,location:x.location,delta:1})}function m(b,w){l=Zs.Replace;let y=dp(x.location,b,w);u=d();let g=Y0(y,u),S=x.createHref(y);o.replaceState(g,"",S),i&&c&&c({action:l,location:x.location,delta:0})}function p(b){let w=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof b=="string"?b:Ku(b);return y=y.replace(/ $/,"%20"),tt(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let x={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(G0,h),c=b,()=>{r.removeEventListener(G0,h),c=null}},createHref(b){return t(r,b)},createURL:p,encodeLocation(b){let w=p(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(b){return o.go(b)}};return x}var Q0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Q0||(Q0={}));function VT(e,t,n){return n===void 0&&(n="/"),UT(e,t,n,!1)}function UT(e,t,n,s){let r=typeof t=="string"?No(t):t,i=ex(r.pathname||"/",n);if(i==null)return null;let o=Zj(e);WT(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=tP(i);l=ZT(o[c],u,s)}return l}function Zj(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(tt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=fr([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Zj(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:XT(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of eN(i.path))r(i,o,c)}),t}function eN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=eN(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function WT(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:JT(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const HT=/^:[\w-]+$/,qT=3,GT=2,YT=1,QT=10,KT=-2,K0=e=>e==="*";function XT(e,t){let n=e.split("/"),s=n.length;return n.some(K0)&&(s+=KT),t&&(s+=GT),n.filter(r=>!K0(r)).reduce((r,i)=>r+(HT.test(i)?qT:i===""?YT:QT),s)}function JT(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function ZT(e,t,n){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=X0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!s[s.length-1].route.index&&(h=X0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:fr([i,h.pathname]),pathnameBase:iP(fr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=fr([i,h.pathnameBase]))}return o}function X0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=eP(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function eP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Jj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function tP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ex(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function nP(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?No(e):e;return{pathname:n?n.startsWith("/")?n:sP(n,t):t,search:oP(s),hash:aP(r)}}function sP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function sf(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tx(e,t){let n=rP(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function nx(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=No(e):(r=cl({},e),tt(!r.pathname||!r.pathname.includes("?"),sf("?","pathname","search",r)),tt(!r.pathname||!r.pathname.includes("#"),sf("#","pathname","hash",r)),tt(!r.search||!r.search.includes("#"),sf("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=nP(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const fr=e=>e.join("/").replace(/\/\/+/g,"/"),iP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,aP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tN=["post","put","patch","delete"];new Set(tN);const cP=["get",...tN];new Set(cP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ul.apply(this,arguments)}const sx=v.createContext(null),uP=v.createContext(null),_r=v.createContext(null),Jd=v.createContext(null),is=v.createContext({outlet:null,matches:[],isDataRoute:!1}),nN=v.createContext(null);function dP(e,t){let{relative:n}=t===void 0?{}:t;Co()||tt(!1);let{basename:s,navigator:r}=v.useContext(_r),{hash:i,pathname:o,search:l}=rN(e,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:fr([s,o])),r.createHref({pathname:c,search:l,hash:i})}function Co(){return v.useContext(Jd)!=null}function Rs(){return Co()||tt(!1),v.useContext(Jd).location}function sN(e){v.useContext(_r).static||v.useLayoutEffect(e)}function Qt(){let{isDataRoute:e}=v.useContext(is);return e?EP():hP()}function hP(){Co()||tt(!1);let e=v.useContext(sx),{basename:t,future:n,navigator:s}=v.useContext(_r),{matches:r}=v.useContext(is),{pathname:i}=Rs(),o=JSON.stringify(tx(r,n.v7_relativeSplatPath)),l=v.useRef(!1);return sN(()=>{l.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=nx(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:fr([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,o,i,e])}const fP=v.createContext(null);function mP(e){let t=v.useContext(is).outlet;return t&&v.createElement(fP.Provider,{value:e},t)}function rx(){let{matches:e}=v.useContext(is),t=e[e.length-1];return t?t.params:{}}function rN(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=v.useContext(_r),{matches:r}=v.useContext(is),{pathname:i}=Rs(),o=JSON.stringify(tx(r,s.v7_relativeSplatPath));return v.useMemo(()=>nx(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function pP(e,t){return gP(e,t)}function gP(e,t,n,s){Co()||tt(!1);let{navigator:r}=v.useContext(_r),{matches:i}=v.useContext(is),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Rs(),d;if(t){var h;let b=typeof t=="string"?No(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||tt(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=VT(e,{pathname:m}),x=wP(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:fr([c,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:fr([c,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,s);return t&&x?v.createElement(Jd.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Zs.Pop}},x):x}function xP(){let e=CP(),t=lP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:r},n):null,null)}const yP=v.createElement(xP,null);class vP extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(is.Provider,{value:this.props.routeContext},v.createElement(nN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bP(e){let{routeContext:t,match:n,children:s}=e,r=v.useContext(sx);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(is.Provider,{value:t},s)}function wP(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||tt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,p=!1,x=null,b=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||yP,c&&(u<0&&f===0?(p=!0,b=null):u===f&&(p=!0,b=h.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,f+1)),y=()=>{let g;return m?g=x:p?g=b:h.route.Component?g=v.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,v.createElement(bP,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:g})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(vP,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var iN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(iN||{}),Xu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xu||{});function SP(e){let t=v.useContext(sx);return t||tt(!1),t}function jP(e){let t=v.useContext(uP);return t||tt(!1),t}function NP(e){let t=v.useContext(is);return t||tt(!1),t}function oN(e){let t=NP(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function CP(){var e;let t=v.useContext(nN),n=jP(Xu.UseRouteError),s=oN(Xu.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function EP(){let{router:e}=SP(iN.UseNavigateStable),t=oN(Xu.UseNavigateStable),n=v.useRef(!1);return sN(()=>{n.current=!0}),v.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,ul({fromRouteId:t},i)))},[e,t])}function kP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function yn(e){let{to:t,replace:n,state:s,relative:r}=e;Co()||tt(!1);let{future:i,static:o}=v.useContext(_r),{matches:l}=v.useContext(is),{pathname:c}=Rs(),u=Qt(),d=nx(t,tx(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return v.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function aN(e){return mP(e.context)}function Ve(e){tt(!1)}function _P(e){let{basename:t="/",children:n=null,location:s,navigationType:r=Zs.Pop,navigator:i,static:o=!1,future:l}=e;Co()&&tt(!1);let c=t.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:i,static:o,future:ul({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=No(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=s,x=v.useMemo(()=>{let b=ex(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:p},navigationType:r}},[c,d,h,f,m,p,r]);return x==null?null:v.createElement(_r.Provider,{value:u},v.createElement(Jd.Provider,{children:n,value:x}))}function DP(e){let{children:t,location:n}=e;return pP(hp(t),n)}new Promise(()=>{});function hp(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(s,r)=>{if(!v.isValidElement(s))return;let i=[...t,r];if(s.type===v.Fragment){n.push.apply(n,hp(s.props.children,i));return}s.type!==Ve&&tt(!1),!s.props.index||!s.props.children||tt(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=hp(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fp.apply(this,arguments)}function TP(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function PP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MP(e,t){return e.button===0&&(!t||t==="_self")&&!PP(e)}function mp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function AP(e,t){let n=mp(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}const IP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RP="6";try{window.__reactRouterVersion=RP}catch{}const OP="startTransition",J0=no[OP];function LP(e){let{basename:t,children:n,future:s,window:r}=e,i=v.useRef();i.current==null&&(i.current=$T({window:r,v5Compat:!0}));let o=i.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=v.useCallback(h=>{u&&J0?J0(()=>c(h)):c(h)},[c,u]);return v.useLayoutEffect(()=>o.listen(d),[o,d]),v.useEffect(()=>kP(s),[s]),v.createElement(_P,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const FP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=v.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=TP(t,IP),{basename:m}=v.useContext(_r),p,x=!1;if(typeof u=="string"&&$P.test(u)&&(p=u,FP))try{let g=new URL(window.location.href),S=u.startsWith("//")?new URL(g.protocol+u):new URL(u),j=ex(S.pathname,m);S.origin===g.origin&&j!=null?u=j+S.search+S.hash:x=!0}catch{}let b=dP(u,{relative:r}),w=BP(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function y(g){s&&s(g),g.defaultPrevented||w(g)}return v.createElement("a",fp({},f,{href:p||b,onClick:x||i?s:y,ref:n,target:c}))});var Z0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Z0||(Z0={}));var ev;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ev||(ev={}));function BP(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Qt(),u=Rs(),d=rN(e,{relative:o});return v.useCallback(h=>{if(MP(h,n)){h.preventDefault();let f=s!==void 0?s:Ku(u)===Ku(d);c(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,s,r,n,e,i,o,l])}function zP(e){let t=v.useRef(mp(e)),n=v.useRef(!1),s=Rs(),r=v.useMemo(()=>AP(s.search,n.current?null:t.current),[s.search]),i=Qt(),o=v.useCallback((l,c)=>{const u=mp(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,o]}class VP extends v.Component{constructor(n){super(n);ie(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});ie(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?a.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:a.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),a.jsxs("div",{className:"flex flex-col space-y-3",children:[a.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),a.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function UP({children:e}){return a.jsx(VP,{children:e})}const WP={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001/api",VITE_DB_HOST:"localhost",VITE_DB_NAME:"asp_crm",VITE_DB_PASSWORD:"vedant21",VITE_DB_PORT:"5432",VITE_DB_SSL:"false",VITE_DB_USER:"postgres",VITE_JWT_SECRET:"560d29644771b5a0ef1d3dcdfc7c44e93bf29e037b77f8c23b94257887219eb815d751d4f6703423b1463dc0a0c33bf365ecc7b16518c65d74e6342435e12978",VITE_USER_NODE_ENV:"production",VITE_USE_MOCKS:"false"},tv=e=>{let t;const n=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(WP?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},HP=e=>e?tv(e):tv;var lN={exports:{}},cN={},uN={exports:{}},dN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=v;function qP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var GP=typeof Object.is=="function"?Object.is:qP,YP=uo.useState,QP=uo.useEffect,KP=uo.useLayoutEffect,XP=uo.useDebugValue;function JP(e,t){var n=t(),s=YP({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return KP(function(){r.value=n,r.getSnapshot=t,rf(r)&&i({inst:r})},[e,n,t]),QP(function(){return rf(r)&&i({inst:r}),e(function(){rf(r)&&i({inst:r})})},[e]),XP(n),n}function rf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!GP(e,n)}catch{return!0}}function ZP(e,t){return t()}var eM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ZP:JP;dN.useSyncExternalStore=uo.useSyncExternalStore!==void 0?uo.useSyncExternalStore:eM;uN.exports=dN;var tM=uN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=v,nM=tM;function sM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rM=typeof Object.is=="function"?Object.is:sM,iM=nM.useSyncExternalStore,oM=Zd.useRef,aM=Zd.useEffect,lM=Zd.useMemo,cM=Zd.useDebugValue;cN.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=oM(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=lM(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&o.hasValue){var p=o.value;if(r(p,m))return h=p}return h=m}if(p=h,rM(d,m))return p;var x=s(m);return r!==void 0&&r(p,x)?(d=m,p):(d=m,h=x)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=iM(e,i[0],i[1]);return aM(function(){o.hasValue=!0,o.value=l},[l]),cM(l),l};lN.exports=cN;var uM=lN.exports;const dM=ig(uM),hN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001/api",VITE_DB_HOST:"localhost",VITE_DB_NAME:"asp_crm",VITE_DB_PASSWORD:"vedant21",VITE_DB_PORT:"5432",VITE_DB_SSL:"false",VITE_DB_USER:"postgres",VITE_JWT_SECRET:"560d29644771b5a0ef1d3dcdfc7c44e93bf29e037b77f8c23b94257887219eb815d751d4f6703423b1463dc0a0c33bf365ecc7b16518c65d74e6342435e12978",VITE_USER_NODE_ENV:"production",VITE_USE_MOCKS:"false"},{useDebugValue:hM}=re,{useSyncExternalStoreWithSelector:fM}=dM;let nv=!1;const mM=e=>e;function pM(e,t=mM,n){(hN?"production":void 0)!=="production"&&n&&!nv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),nv=!0);const s=fM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return hM(s),s}const sv=e=>{(hN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?HP(e):e,n=(s,r)=>pM(t,s,r);return Object.assign(n,t),n},fN=e=>e?sv(e):sv,gM={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001/api",VITE_DB_HOST:"localhost",VITE_DB_NAME:"asp_crm",VITE_DB_PASSWORD:"vedant21",VITE_DB_PORT:"5432",VITE_DB_SSL:"false",VITE_DB_USER:"postgres",VITE_JWT_SECRET:"560d29644771b5a0ef1d3dcdfc7c44e93bf29e037b77f8c23b94257887219eb815d751d4f6703423b1463dc0a0c33bf365ecc7b16518c65d74e6342435e12978",VITE_USER_NODE_ENV:"production",VITE_USE_MOCKS:"false"};function xM(e,t){let n;try{n=e()}catch{return}return{getItem:r=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=n.getItem(r))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(r,i)=>n.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>n.removeItem(r)}}const dl=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return dl(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return dl(s)(n)}}}},yM=(e,t)=>(n,s,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,w)=>({...w,...b}),...t},o=!1;const l=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...b)},s,r);const d=dl(i.serialize),h=()=>{const b=i.partialize({...s()});let w;const y=d({state:b,version:i.version}).then(g=>u.setItem(i.name,g)).catch(g=>{w=g});if(w)throw w;return y},f=r.setState;r.setState=(b,w)=>{f(b,w),h()};const m=e((...b)=>{n(...b),h()},s,r);let p;const x=()=>{var b;if(!u)return;o=!1,l.forEach(y=>y(s()));const w=((b=i.onRehydrateStorage)==null?void 0:b.call(i,s()))||void 0;return dl(u.getItem.bind(u))(i.name).then(y=>{if(y)return i.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return i.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var g;return p=i.merge(y,(g=s())!=null?g:m),n(p,!0),h()}).then(()=>{w==null||w(p,void 0),o=!0,c.forEach(y=>y(p))}).catch(y=>{w==null||w(void 0,y)})};return r.persist={setOptions:b=>{i={...i,...b},b.getStorage&&(u=b.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},x(),p||m},vM=(e,t)=>(n,s,r)=>{let i={storage:xM(()=>localStorage),partialize:x=>x,version:0,merge:(x,b)=>({...b,...x}),...t},o=!1;const l=new Set,c=new Set;let u=i.storage;if(!u)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...x)},s,r);const d=()=>{const x=i.partialize({...s()});return u.setItem(i.name,{state:x,version:i.version})},h=r.setState;r.setState=(x,b)=>{h(x,b),d()};const f=e((...x)=>{n(...x),d()},s,r);r.getInitialState=()=>f;let m;const p=()=>{var x,b;if(!u)return;o=!1,l.forEach(y=>{var g;return y((g=s())!=null?g:f)});const w=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(x=s())!=null?x:f))||void 0;return dl(u.getItem.bind(u))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return[!0,i.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var g;const[S,j]=y;if(m=i.merge(j,(g=s())!=null?g:f),n(m,!0),S)return d()}).then(()=>{w==null||w(m,void 0),m=s(),o=!0,c.forEach(y=>y(m))}).catch(y=>{w==null||w(void 0,y)})};return r.persist={setOptions:x=>{i={...i,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:x=>(l.add(x),()=>{l.delete(x)}),onFinishHydration:x=>(c.add(x),()=>{c.delete(x)})},i.skipHydration||p(),m||f},bM=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((gM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),yM(e,t)):vM(e,t),wM=bM,SM="modulepreload",jM=function(e){return"/"+e},rv={},ns=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=jM(c),c in rv)return;rv[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":SM,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};let of=null;const Ps=()=>{if(of!==null)return of;const e={nodeEnvCheck:!0,viteModeCheck:!0,viteDevCheck:!0,viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return of=n,n},mN=()=>!Ps(),NM=(e=!1)=>{const t={"Content-Type":"application/json"},n=localStorage.getItem("jwt-token");return n&&(t.Authorization=`Bearer ${n}`),t},CM=e=>{Ps()&&e()},EM=(e,...t)=>{mN()&&console.log(`[DEBUG] ${e}`,...t)},pp=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},ya=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},kM=()=>{if(Ps()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){ya("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),pp("Removed development authentication token from storage")}catch(t){ya("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(ya("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&pp("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&ya("SECURITY RISK: Development flags found in production build!")}},_M=()=>{if(Ps()){kM(),console.log("%c PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{Promise.all([ns(()=>import("./emptyModule-BWXRoceh.js"),[]).catch(()=>null),ns(()=>import("./emptyModule-BWXRoceh.js"),[]).catch(()=>null)]).then(e=>{e.some(n=>n!==null)&&ya("SECURITY RISK: Development modules found in production build!")})}catch{}try{if(typeof window<"u"&&Ps()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};CM(()=>{_M()});const pN=new TextEncoder,gN=new TextDecoder,DM=e=>pN.encode(e),gp=e=>{for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return Uint8Array.from(atob(e),t=>t.charCodeAt(0)).buffer},xN=e=>{try{const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT format");return JSON.parse(gN.decode(gp(t[1])))}catch(t){throw console.error("Error decoding JWT:",t),t}},TM=async(e,t)=>{try{const n=e.split(".");if(n.length!==3)throw new Error("Invalid JWT format");if(Ps()){console.log(" JWT verification in production mode");try{const u=xN(e);if(u.dev===!0||u.environment==="development"||u.purpose==="local-development-only"||u.sub&&u.sub.startsWith("dev-user")||n[2]&&n[2].includes("dev-signature")){console.error(" CRITICAL SECURITY ERROR: Development token detected in production environment!"),console.error("This is a serious security issue that must be addressed immediately.");try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),environment:"production",severity:"critical"})}).catch(()=>{}),typeof window<"u"&&setTimeout(()=>{window.location.href="/login?error=security_violation"},2e3)}catch{}throw new Error("Invalid authentication token")}}catch(u){console.error("Token parse error in production:",u)}}Ps()&&console.log(" Production mode - performing standard verification");const[s,r,i]=n,o=`${s}.${r}`,l=await window.crypto.subtle.importKey("raw",DM(t),{name:"HMAC",hash:"SHA-256"},!1,["verify"]);if(!await window.crypto.subtle.verify("HMAC",l,gp(i),pN.encode(o)))throw new Error("Invalid signature");return JSON.parse(gN.decode(gp(r)))}catch(n){throw console.error("Error verifying JWT:",n),n}},ix=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("jwt-token");return t&&(e.Authorization=`Bearer ${t}`),e},PM=async(e,t)=>{try{console.log(" Starting sign in process for:",e);const s="http://localhost:3001/api/auth/login";console.log("Login URL:",s);const r=await fetch(s,{method:"POST",headers:ix(),body:JSON.stringify({email:e,password:t})});if(!r.ok){const l=await r.json();throw new Error(l.message||"Authentication failed")}const{token:i,user:o}=await r.json();return localStorage.setItem("jwt-token",i),console.log(" Authentication successful"),o}catch(n){throw console.error("Error signing in:",n),n}},MM=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:ix()}),localStorage.removeItem("jwt-token")}catch(e){console.error("Error signing out:",e),localStorage.removeItem("jwt-token")}},AM=async()=>{try{const e=localStorage.getItem("jwt-token");if(!e)return null;const t=xN(e);if(t.exp&&t.exp*1e3<Date.now())return localStorage.removeItem("jwt-token"),null;const n=await fetch("/api/auth/me",{method:"GET",headers:ix()});if(!n.ok)throw new Error("Invalid or expired token");const{user:s}=await n.json();return s}catch(e){return console.error("Error getting current user:",e),localStorage.removeItem("jwt-token"),null}},IM=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},RM=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")};let Nc=!1;const Ae=fN()(wM(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const s=await PM(t,n),r=localStorage.getItem("jwt-token")||"";e({user:s,token:r,isAuthenticated:!0,error:null}),IM(s,r),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(s){throw e({error:s.message}),s}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await MM(),e({user:null,token:null,isAuthenticated:!1,error:null}),RM(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}),{name:"auth-storage",skipHydration:!0})),OM=async()=>{if(!Nc)try{if(window.location.pathname==="/login"){Nc=!0;return}const e=localStorage.getItem("jwt-token");if(e)try{const t=await AM();t?(Ae.getState().setUser(t),Ae.setState({token:e,isAuthenticated:!0})):(Ae.getState().clearUser(),localStorage.removeItem("jwt-token"))}catch{Ae.getState().clearUser()}Ae.persist.rehydrate(),Nc=!0}catch{Nc=!0}};function Ce({label:e,error:t,className:n="",leftIcon:s,rightIcon:r,name:i,id:o,...l}){var d;const c={...l},u=i||o||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return a.jsxs("div",{className:"space-y-1.5",children:[e&&a.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsxs("div",{className:"relative",children:[s&&a.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s}),a.jsx("input",{name:u,id:o||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base
            py-1.5 sm:py-2            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${s?"pl-8 sm:pl-10":""}
            ${r?"pr-8 sm:pr-10":""}
            ${n}
          `,placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),r&&a.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r})]}),t&&a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}const LM={default:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 shadow-sm",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",destructive:"bg-error-600 text-white hover:bg-error-700 focus:ring-error-500"},FM={xs:"px-2 py-1 text-xs",sm:"px-2.5 py-1.5 text-sm",md:"px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base",lg:"px-4 py-2 sm:px-6 sm:py-3 text-base sm:text-lg"};function U({variant:e="default",size:t="md",leftIcon:n,rightIcon:s,isLoading:r,fullWidth:i,className:o="",children:l,disabled:c,...u}){return a.jsxs("button",{className:`
        inline-flex items-center justify-center
        font-medium rounded-lg
        focus:outline-none focus:ring-2 focus:ring-offset-2
        transition-colors
        disabled:opacity-50 disabled:cursor-not-allowed
        ${LM[e]}
        ${FM[t]}
        ${i?"w-full":""}
        ${o}
      `,disabled:c||r,...u,children:[r&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"      ",n&&!r&&a.jsx("span",{className:"mr-1.5 sm:mr-2 flex-shrink-0 flex items-center",children:n}),a.jsx("span",{className:"truncate",children:l}),s&&a.jsx("span",{className:"ml-1.5 sm:ml-2 flex-shrink-0 flex items-center",children:s})]})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $M={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(e,t)=>{const n=v.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>v.createElement("svg",{ref:d,...$M,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${BM(e)}`,l].join(" "),...u},[...t.map(([h,f])=>v.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Z("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Z("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Z("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Z("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=Z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Z("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Z("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Z("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Z("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Z("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Z("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Z("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Z("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Z("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Z("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Z("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Z("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=Z("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Z("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=Z("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Z("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Z("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Z("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Z("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Z("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),DN="/assets/asp-logo-Cq2CSw-i.jpg";function xA(){var w,y;const[e,t]=v.useState(""),[n,s]=v.useState(""),[r,i]=v.useState(!1),[o,l]=v.useState(null),[c,u]=v.useState("loading"),{login:d,error:h,isAuthenticated:f}=Ae();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),v.useEffect(()=>{console.log("LoginForm mounted");const g="http://localhost:3001/api";fetch(`${g}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(S=>(console.log("API health check response:",S.status),u(S.ok?"available":"error"),S.text())).then(S=>{console.log("API health check data:",S)}).catch(S=>{console.error("API health check failed:",S),u("error"),l(`API connection error: ${S.message}. Make sure the API server is running at ${g}`)}),console.log("Environment variables check:",{apiUrl:"http://localhost:3001/api",dbHost:"localhost"})},[]);const m=Qt(),p=Rs(),x=((y=(w=p.state)==null?void 0:w.from)==null?void 0:y.pathname)||"/dashboard";v.useEffect(()=>{f&&m(x,{replace:!0})},[f,m,x]),v.useEffect(()=>{p.pathname==="/login"&&localStorage.removeItem("jwt-token")},[p.pathname]);const b=async g=>{if(g.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log("Login attempt for:",e);try{const S="http://localhost:3001/api";try{const j=await fetch(`${S}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!j.ok)throw console.error("API health check failed before login attempt:",await j.text()),u("error"),new Error(`API server is not responding correctly. Status: ${j.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(j){throw console.error("Failed to connect to API:",j),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}await d(e,n),console.log("Login attempt successful")}catch(S){console.error("Login error:",S),S instanceof Error&&(S.message.includes("<!DOCTYPE")||S.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://localhost:3001/api.`):(S.message.includes("NetworkError")||S.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),s("")}finally{i(!1)}};if(o)return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:a.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),a.jsx("p",{className:"text-gray-700 mb-4",children:o}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:a.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),a.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",a.jsx("br",{}),"API URL: ","http://localhost:3001/api"]}),a.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[a.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[a.jsx("li",{children:"Make sure the API server is running"}),a.jsx("li",{children:"Check your .env file configuration"}),a.jsx("li",{children:"Verify database connection settings"}),a.jsx("li",{children:"Check browser console for network errors"})]})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-gray-50 to-gray-100",children:[a.jsxs("div",{className:"w-full max-w-md px-8 py-12 bg-white rounded-2xl shadow-xl",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"relative w-48 h-32",children:a.jsx("img",{src:DN,alt:"ASP Cranes",className:"w-full h-full object-contain",onError:g=>{g.currentTarget.src="https://placeholder.pics/svg/300x200/DEDEDE/555555/ASP%20Cranes",console.error("Logo image failed to load")}})})}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"ASP Cranes CRM"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Sign in to access your dashboard"})]}),a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-3 mb-6",children:a.jsx("p",{className:"text-sm text-blue-800",children:"Using secure PostgreSQL authentication"})}),h&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[a.jsx(Bl,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:h})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-5",children:[a.jsx(Ce,{id:"email",name:"email",type:"email",label:"Email address",value:e,onChange:g=>t(g.target.value),required:!0,autoComplete:"email",className:"h-12",placeholder:"Enter your email"}),a.jsx(Ce,{id:"password",name:"password",type:"password",label:"Password",value:n,onChange:g=>s(g.target.value),required:!0,autoComplete:"current-password",className:"h-12",placeholder:"Enter your password"})]}),a.jsx(U,{type:"submit",fullWidth:!0,isLoading:r,className:"h-12 text-lg font-medium",children:"Sign in"})]})]}),a.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[a.jsx("p",{children:" 2025 ASP Cranes."}),a.jsx("p",{className:"mt-1",children:"Built by AVARIQ Tech Solutions Pvt. Ltd."})]})]})}catch(g){return console.error("Error rendering login form:",g),l(`Error rendering login form: ${g instanceof Error?g.message:String(g)}`),null}}function yA({error:e,resetError:t}){return a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:a.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[a.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),a.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),a.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:a.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),a.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class vA extends v.Component{constructor(n){super(n);ie(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?a.jsx(yA,{error:this.state.error,resetError:this.resetError}):this.props.children}}function bA(){const{isAuthenticated:e}=Ae();return e?a.jsx(yn,{to:"/dashboard"}):a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:[a.jsx("img",{src:"/asp-logo.jpg",alt:"ASP Cranes",style:{width:"120px",height:"80px",objectFit:"contain",marginBottom:"16px"}}),a.jsx("h1",{style:{marginBottom:"20px",color:"#1a202c"},children:"ASP Cranes CRM"}),a.jsx("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:a.jsx(xA,{})})]})}function wA(){return v.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://localhost:3001/api")},[]),a.jsx(vA,{children:a.jsx(bA,{})})}const TN=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),sh=v.createContext({}),rh=v.createContext(null),ih=typeof document<"u",ux=ih?v.useLayoutEffect:v.useEffect,PN=v.createContext({strict:!1}),dx=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),SA="framerAppearId",MN="data-"+dx(SA);function jA(e,t,n,s){const{visualElement:r}=v.useContext(sh),i=v.useContext(PN),o=v.useContext(rh),l=v.useContext(TN).reducedMotion,c=v.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;v.useInsertionEffect(()=>{u&&u.update(n,o)});const d=v.useRef(!!(n[MN]&&!window.HandoffComplete));return ux(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Wi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function NA(e,t,n){return v.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Wi(n)&&(n.current=s))},[t])}function fl(e){return typeof e=="string"||Array.isArray(e)}function oh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const hx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fx=["initial",...hx];function ah(e){return oh(e.animate)||fx.some(t=>fl(e[t]))}function AN(e){return!!(ah(e)||e.variants)}function CA(e,t){if(ah(e)){const{initial:n,animate:s}=e;return{initial:n===!1||fl(n)?n:void 0,animate:fl(s)?s:void 0}}return e.inherit!==!1?t:{}}function EA(e){const{initial:t,animate:n}=CA(e,v.useContext(sh));return v.useMemo(()=>({initial:t,animate:n}),[av(t),av(n)])}function av(e){return Array.isArray(e)?e.join(" "):e}const lv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ml={};for(const e in lv)ml[e]={isEnabled:t=>lv[e].some(n=>!!t[n])};function kA(e){for(const t in e)ml[t]={...ml[t],...e[t]}}const mx=v.createContext({}),IN=v.createContext({}),_A=Symbol.for("motionComponentSymbol");function DA({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){e&&kA(e);function i(l,c){let u;const d={...v.useContext(TN),...l,layoutId:TA(l)},{isStatic:h}=d,f=EA(l),m=s(l,h);if(!h&&ih){f.visualElement=jA(r,m,d,t);const p=v.useContext(IN),x=v.useContext(PN).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,x,e,p))}return v.createElement(sh.Provider,{value:f},u&&f.visualElement?v.createElement(u,{visualElement:f.visualElement,...d}):null,n(r,l,NA(m,f.visualElement,c),m,h,f.visualElement))}const o=v.forwardRef(i);return o[_A]=r,o}function TA({layoutId:e}){const t=v.useContext(mx).id;return t&&e!==void 0?t+"-"+e:e}function PA(e){function t(s,r={}){return DA(e(s,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const MA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function px(e){return typeof e!="string"||e.includes("-")?!1:!!(MA.indexOf(e)>-1||/[A-Z]/.test(e))}const Zu={};function AA(e){Object.assign(Zu,e)}const Vl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vi=new Set(Vl);function RN(e,{layout:t,layoutId:n}){return vi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Zu[e]||e==="opacity")}const Yt=e=>!!(e&&e.getVelocity),IA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},RA=Vl.length;function OA(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,r){let i="";for(let o=0;o<RA;o++){const l=Vl[o];if(e[l]!==void 0){const c=IA[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,s?"":i):n&&s&&(i="none"),i}const ON=e=>t=>typeof t=="string"&&t.startsWith(e),LN=ON("--"),xp=ON("var(--"),LA=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,FA=(e,t)=>t&&typeof e=="number"?t.transform(e):e,wr=(e,t,n)=>Math.min(Math.max(n,e),t),bi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oa={...bi,transform:e=>wr(0,1,e)},Ec={...bi,default:1},La=e=>Math.round(e*1e5)/1e5,lh=/(-)?([\d]*\.?[\d])+/g,FN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$A=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ul(e){return typeof e=="string"}const Wl=e=>({test:t=>Ul(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Us=Wl("deg"),es=Wl("%"),pe=Wl("px"),BA=Wl("vh"),zA=Wl("vw"),cv={...es,parse:e=>es.parse(e)/100,transform:e=>es.transform(e*100)},uv={...bi,transform:Math.round},$N={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,size:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,rotate:Us,rotateX:Us,rotateY:Us,rotateZ:Us,scale:Ec,scaleX:Ec,scaleY:Ec,scaleZ:Ec,skew:Us,skewX:Us,skewY:Us,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:Oa,originX:cv,originY:cv,originZ:pe,zIndex:uv,fillOpacity:Oa,strokeOpacity:Oa,numOctaves:uv};function gx(e,t,n,s){const{style:r,vars:i,transform:o,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(LN(h)){i[h]=f;continue}const m=$N[h],p=FA(f,m);if(vi.has(h)){if(c=!0,o[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):r[h]=p}if(t.transform||(c||s?r.transform=OA(e.transform,n,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;r.transformOrigin=`${h} ${f} ${m}`}}const xx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function BN(e,t,n){for(const s in t)!Yt(t[s])&&!RN(s,n)&&(e[s]=t[s])}function VA({transformTemplate:e},t,n){return v.useMemo(()=>{const s=xx();return gx(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function UA(e,t,n){const s=e.style||{},r={};return BN(r,s,e),Object.assign(r,VA(e,t,n)),e.transformValues?e.transformValues(r):r}function WA(e,t,n){const s={},r=UA(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const HA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ed(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||HA.has(e)}let zN=e=>!ed(e);function qA(e){e&&(zN=t=>t.startsWith("on")?!ed(t):e(t))}try{qA(require("@emotion/is-prop-valid").default)}catch{}function GA(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(zN(r)||n===!0&&ed(r)||!t&&!ed(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function dv(e,t,n){return typeof e=="string"?e:pe.transform(t+n*e)}function YA(e,t,n){const s=dv(t,e.x,e.width),r=dv(n,e.y,e.height);return`${s} ${r}`}const QA={offset:"stroke-dashoffset",array:"stroke-dasharray"},KA={offset:"strokeDashoffset",array:"strokeDasharray"};function XA(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?QA:KA;e[i.offset]=pe.transform(-s);const o=pe.transform(t),l=pe.transform(n);e[i.array]=`${o} ${l}`}function yx(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(gx(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:x}=e;m.transform&&(x&&(p.transform=m.transform),delete m.transform),x&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=YA(x,r!==void 0?r:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),o!==void 0&&XA(m,o,l,c,!1)}const VN=()=>({...xx(),attrs:{}}),vx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function JA(e,t,n,s){const r=v.useMemo(()=>{const i=VN();return yx(i,t,{enableHardwareAcceleration:!1},vx(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};BN(i,e.style,e),r.style={...i,...r.style}}return r}function ZA(e=!1){return(n,s,r,{latestValues:i},o)=>{const c=(px(n)?JA:WA)(s,i,o,n),d={...GA(s,typeof n=="string",e),...c,ref:r},{children:h}=s,f=v.useMemo(()=>Yt(h)?h.get():h,[h]);return v.createElement(n,{...d,children:f})}}function UN(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const WN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HN(e,t,n,s){UN(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(WN.has(r)?r:dx(r),t.attrs[r])}function bx(e,t){const{style:n}=e,s={};for(const r in n)(Yt(n[r])||t.style&&Yt(t.style[r])||RN(r,e))&&(s[r]=n[r]);return s}function qN(e,t){const n=bx(e,t);for(const s in e)if(Yt(e[s])||Yt(t[s])){const r=Vl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=e[s]}return n}function wx(e,t,n,s={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),t}function GN(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const td=e=>Array.isArray(e),eI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),tI=e=>td(e)?e[e.length-1]||0:e;function gu(e){const t=Yt(e)?e.get():e;return eI(t)?t.toValue():t}function nI({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,r,i){const o={latestValues:sI(s,r,i,e),renderState:t()};return n&&(o.mount=l=>n(s,l,o)),o}const YN=e=>(t,n)=>{const s=v.useContext(sh),r=v.useContext(rh),i=()=>nI(e,t,s,r);return n?i():GN(i)};function sI(e,t,n,s){const r={},i=s(e,{});for(const f in i)r[f]=gu(i[f]);let{initial:o,animate:l}=e;const c=ah(e),u=AN(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;return h&&typeof h!="boolean"&&!oh(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=wx(e,m);if(!p)return;const{transitionEnd:x,transition:b,...w}=p;for(const y in w){let g=w[y];if(Array.isArray(g)){const S=d?g.length-1:0;g=g[S]}g!==null&&(r[y]=g)}for(const y in x)r[y]=x[y]}),r}const Ze=e=>e;class hv{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function rI(e){let t=new hv,n=new hv,s=0,r=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?t:n;return u&&o.add(c),f.add(c)&&h&&r&&(s=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),e())}r=!1,i&&(i=!1,l.process(c))}};return l}const kc=["prepare","read","update","preRender","render","postRender"],iI=40;function oI(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=kc.reduce((h,f)=>(h[f]=rI(()=>n=!0),h),{}),o=h=>i[h].process(r),l=()=>{const h=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,iI),1),r.timestamp=h,r.isProcessing=!0,kc.forEach(o),r.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,r.isProcessing||e(l)};return{schedule:kc.reduce((h,f)=>{const m=i[f];return h[f]=(p,x=!1,b=!1)=>(n||c(),m.schedule(p,x,b)),h},{}),cancel:h=>kc.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:Le,cancel:As,state:Ct,steps:cf}=oI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),aI={useVisualState:YN({scrapeMotionValuesFromProps:qN,createRenderState:VN,onMount:(e,t,{renderState:n,latestValues:s})=>{Le.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Le.render(()=>{yx(n,s,{enableHardwareAcceleration:!1},vx(t.tagName),e.transformTemplate),HN(t,n)})}})},lI={useVisualState:YN({scrapeMotionValuesFromProps:bx,createRenderState:xx})};function cI(e,{forwardMotionProps:t=!1},n,s){return{...px(e)?aI:lI,preloadedFeatures:n,useRender:ZA(t),createVisualElement:s,Component:e}}function vs(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const QN=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ch(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const uI=e=>t=>QN(t)&&e(t,ch(t));function js(e,t,n,s){return vs(e,t,uI(n),s)}const dI=(e,t)=>n=>t(e(n)),pr=(...e)=>e.reduce(dI);function KN(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const fv=KN("dragHorizontal"),mv=KN("dragVertical");function XN(e){let t=!1;if(e==="y")t=mv();else if(e==="x")t=fv();else{const n=fv(),s=mv();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function JN(){const e=XN(!0);return e?(e(),!1):!0}class Tr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function pv(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),r=(i,o)=>{if(i.pointerType==="touch"||JN())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&Le.update(()=>l[s](i,o))};return js(e.current,n,r,{passive:!e.getProps()[s]})}class hI extends Tr{mount(){this.unmount=pr(pv(this.node,!0),pv(this.node,!1))}unmount(){}}class fI extends Tr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pr(vs(this.node.current,"focus",()=>this.onFocus()),vs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZN=(e,t)=>t?e===t?!0:ZN(e,t.parentElement):!1;function uf(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,ch(n))}class mI extends Tr{constructor(){super(...arguments),this.removeStartListeners=Ze,this.removeEndListeners=Ze,this.removeAccessibleListeners=Ze,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=js(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Le.update(()=>{!h&&!ZN(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=js(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=pr(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||uf("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Le.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=vs(this.node.current,"keyup",o),uf("down",(l,c)=>{this.startPress(l,c)})},n=vs(this.node.current,"keydown",t),s=()=>{this.isPressing&&uf("cancel",(i,o)=>this.cancelPress(i,o))},r=vs(this.node.current,"blur",s);this.removeAccessibleListeners=pr(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Le.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!JN()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Le.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=js(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=vs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pr(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const yp=new WeakMap,df=new WeakMap,pI=e=>{const t=yp.get(e.target);t&&t(e)},gI=e=>{e.forEach(pI)};function xI({root:e,...t}){const n=e||document;df.has(n)||df.set(n,{});const s=df.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(gI,{root:e,...t})),s[r]}function yI(e,t,n){const s=xI(t);return yp.set(e,n),s.observe(e),()=>{yp.delete(e),s.unobserve(e)}}const vI={some:0,all:1};class bI extends Tr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:vI[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return yI(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(wI(t,n))&&this.startObserver()}unmount(){}}function wI({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SI={inView:{Feature:bI},tap:{Feature:mI},focus:{Feature:fI},hover:{Feature:hI}};function eC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function jI(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function NI(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function uh(e,t,n){const s=e.getProps();return wx(s,t,n!==void 0?n:s.custom,jI(e),NI(e))}let nd=Ze;const si=e=>e*1e3,Ns=e=>e/1e3,CI={current:!1},tC=e=>Array.isArray(e)&&typeof e[0]=="number";function nC(e){return!!(!e||typeof e=="string"&&sC[e]||tC(e)||Array.isArray(e)&&e.every(nC))}const va=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,sC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:va([0,.65,.55,1]),circOut:va([.55,0,1,.45]),backIn:va([.31,.01,.66,-.59]),backOut:va([.33,1.53,.69,.99])};function rC(e){if(e)return tC(e)?va(e):Array.isArray(e)?e.map(rC):sC[e]}function EI(e,t,n,{delay:s=0,duration:r,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=rC(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function kI(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const iC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,_I=1e-7,DI=12;function TI(e,t,n,s,r){let i,o,l=0;do o=t+(n-t)/2,i=iC(o,s,r)-e,i>0?n=o:t=o;while(Math.abs(i)>_I&&++l<DI);return o}function Hl(e,t,n,s){if(e===t&&n===s)return Ze;const r=i=>TI(i,0,1,e,n);return i=>i===0||i===1?i:iC(r(i),t,s)}const PI=Hl(.42,0,1,1),MI=Hl(0,0,.58,1),oC=Hl(.42,0,.58,1),AI=e=>Array.isArray(e)&&typeof e[0]!="number",aC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,lC=e=>t=>1-e(1-t),Sx=e=>1-Math.sin(Math.acos(e)),cC=lC(Sx),II=aC(Sx),uC=Hl(.33,1.53,.69,.99),jx=lC(uC),RI=aC(jx),OI=e=>(e*=2)<1?.5*jx(e):.5*(2-Math.pow(2,-10*(e-1))),gv={linear:Ze,easeIn:PI,easeInOut:oC,easeOut:MI,circIn:Sx,circInOut:II,circOut:cC,backIn:jx,backInOut:RI,backOut:uC,anticipate:OI},xv=e=>{if(Array.isArray(e)){nd(e.length===4);const[t,n,s,r]=e;return Hl(t,n,s,r)}else if(typeof e=="string")return nd(gv[e]!==void 0),gv[e];return e},Nx=(e,t)=>n=>!!(Ul(n)&&$A.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),dC=(e,t,n)=>s=>{if(!Ul(s))return s;const[r,i,o,l]=s.match(lh);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},LI=e=>wr(0,255,e),hf={...bi,transform:e=>Math.round(LI(e))},Jr={test:Nx("rgb","red"),parse:dC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+hf.transform(e)+", "+hf.transform(t)+", "+hf.transform(n)+", "+La(Oa.transform(s))+")"};function FI(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const vp={test:Nx("#"),parse:FI,transform:Jr.transform},Hi={test:Nx("hsl","hue"),parse:dC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+es.transform(La(t))+", "+es.transform(La(n))+", "+La(Oa.transform(s))+")"},Rt={test:e=>Jr.test(e)||vp.test(e)||Hi.test(e),parse:e=>Jr.test(e)?Jr.parse(e):Hi.test(e)?Hi.parse(e):vp.parse(e),transform:e=>Ul(e)?e:e.hasOwnProperty("red")?Jr.transform(e):Hi.transform(e)},qe=(e,t,n)=>-n*e+n*t+e;function ff(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function $I({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,i=0,o=0;if(!t)r=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=ff(c,l,e+1/3),i=ff(c,l,e),o=ff(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}const mf=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},BI=[vp,Jr,Hi],zI=e=>BI.find(t=>t.test(e));function yv(e){const t=zI(e);let n=t.parse(e);return t===Hi&&(n=$I(n)),n}const hC=(e,t)=>{const n=yv(e),s=yv(t),r={...n};return i=>(r.red=mf(n.red,s.red,i),r.green=mf(n.green,s.green,i),r.blue=mf(n.blue,s.blue,i),r.alpha=qe(n.alpha,s.alpha,i),Jr.transform(r))};function VI(e){var t,n;return isNaN(e)&&Ul(e)&&(((t=e.match(lh))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(FN))===null||n===void 0?void 0:n.length)||0)>0}const fC={regex:LA,countKey:"Vars",token:"${v}",parse:Ze},mC={regex:FN,countKey:"Colors",token:"${c}",parse:Rt.parse},pC={regex:lh,countKey:"Numbers",token:"${n}",parse:bi.parse};function pf(e,{regex:t,countKey:n,token:s,parse:r}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...i.map(r)))}function sd(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&pf(n,fC),pf(n,mC),pf(n,pC),n}function gC(e){return sd(e).values}function xC(e){const{values:t,numColors:n,numVars:s,tokenised:r}=sd(e),i=t.length;return o=>{let l=r;for(let c=0;c<i;c++)c<s?l=l.replace(fC.token,o[c]):c<s+n?l=l.replace(mC.token,Rt.transform(o[c])):l=l.replace(pC.token,La(o[c]));return l}}const UI=e=>typeof e=="number"?0:e;function WI(e){const t=gC(e);return xC(e)(t.map(UI))}const Sr={test:VI,parse:gC,createTransformer:xC,getAnimatableNone:WI},yC=(e,t)=>n=>`${n>0?t:e}`;function vC(e,t){return typeof e=="number"?n=>qe(e,t,n):Rt.test(e)?hC(e,t):e.startsWith("var(")?yC(e,t):wC(e,t)}const bC=(e,t)=>{const n=[...e],s=n.length,r=e.map((i,o)=>vC(i,t[o]));return i=>{for(let o=0;o<s;o++)n[o]=r[o](i);return n}},HI=(e,t)=>{const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=vC(e[r],t[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}},wC=(e,t)=>{const n=Sr.createTransformer(t),s=sd(e),r=sd(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?pr(bC(s.values,r.values),n):yC(e,t)},pl=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},vv=(e,t)=>n=>qe(e,t,n);function qI(e){return typeof e=="number"?vv:typeof e=="string"?Rt.test(e)?hC:wC:Array.isArray(e)?bC:typeof e=="object"?HI:vv}function GI(e,t,n){const s=[],r=n||qI(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=r(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Ze:t;l=pr(c,l)}s.push(l)}return s}function SC(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(nd(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=GI(t,s,r),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=pl(e[d],e[d+1],u);return o[d](h)};return n?u=>c(wr(e[0],e[i-1],u)):c}function YI(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=pl(0,t,s);e.push(qe(n,1,r))}}function QI(e){const t=[0];return YI(t,e.length-1),t}function KI(e,t){return e.map(n=>n*t)}function XI(e,t){return e.map(()=>t||oC).splice(0,e.length-1)}function rd({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=AI(s)?s.map(xv):xv(s),i={done:!1,value:t[0]},o=KI(n&&n.length===t.length?n:QI(t),e),l=SC(o,t,{ease:Array.isArray(r)?r:XI(t,r)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function jC(e,t){return t?e*(1e3/t):0}const JI=5;function NC(e,t,n){const s=Math.max(t-JI,0);return jC(n-e(s),t-s)}const gf=.001,ZI=.01,eR=10,tR=.05,nR=1;function sR({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let r,i,o=1-t;o=wr(tR,nR,o),e=wr(ZI,eR,Ns(e)),o<1?(r=u=>{const d=u*o,h=d*e,f=d-n,m=bp(u,o),p=Math.exp(-h);return gf-f/m*p},i=u=>{const h=u*o*e,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,p=Math.exp(-h),x=bp(Math.pow(u,2),o);return(-r(u)+gf>0?-1:1)*((f-m)*p)/x}):(r=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-gf+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=iR(r,i,l);if(e=si(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:e}}}const rR=12;function iR(e,t,n){let s=n;for(let r=1;r<rR;r++)s=s-e(s)/t(s);return s}function bp(e,t){return e*Math.sqrt(1-t*t)}const oR=["duration","bounce"],aR=["stiffness","damping","mass"];function bv(e,t){return t.some(n=>e[n]!==void 0)}function lR(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!bv(e,aR)&&bv(e,oR)){const n=sR(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function CC({keyframes:e,restDelta:t,restSpeed:n,...s}){const r=e[0],i=e[e.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=lR({...s,velocity:-Ns(s.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),x=i-r,b=Ns(Math.sqrt(l/u)),w=Math.abs(x)<5;n||(n=w?.01:2),t||(t=w?.005:.5);let y;if(p<1){const g=bp(b,p);y=S=>{const j=Math.exp(-p*b*S);return i-j*((m+p*b*x)/g*Math.sin(g*S)+x*Math.cos(g*S))}}else if(p===1)y=g=>i-Math.exp(-b*g)*(x+(m+b*x)*g);else{const g=b*Math.sqrt(p*p-1);y=S=>{const j=Math.exp(-p*b*S),k=Math.min(g*S,300);return i-j*((m+p*b*x)*Math.sinh(k)+g*x*Math.cosh(k))/g}}return{calculatedDuration:f&&d||null,next:g=>{const S=y(g);if(f)o.done=g>=d;else{let j=m;g!==0&&(p<1?j=NC(y,g,S):j=0);const k=Math.abs(j)<=n,_=Math.abs(i-S)<=t;o.done=k&&_}return o.value=o.done?i:S,o}}}function wv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=E=>l!==void 0&&E<l||c!==void 0&&E>c,p=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let x=n*t;const b=h+x,w=o===void 0?b:o(b);w!==b&&(x=w-h);const y=E=>-x*Math.exp(-E/s),g=E=>w+y(E),S=E=>{const N=y(E),D=g(E);f.done=Math.abs(N)<=u,f.value=f.done?w:D};let j,k;const _=E=>{m(f.value)&&(j=E,k=CC({keyframes:[f.value,p(f.value)],velocity:NC(g,E,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:E=>{let N=!1;return!k&&j===void 0&&(N=!0,S(E),_(E)),j!==void 0&&E>j?k.next(E-j):(!N&&S(E),f)}}}const cR=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Le.update(t,!0),stop:()=>As(t),now:()=>Ct.isProcessing?Ct.timestamp:performance.now()}},Sv=2e4;function jv(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Sv;)t+=n,s=e.next(t);return t>=Sv?1/0:t}const uR={decay:wv,inertia:wv,tween:rd,keyframes:rd,spring:CC};function id({autoplay:e=!0,delay:t=0,driver:n=cR,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,x,b;const w=()=>{b=new Promise(V=>{x=V})};w();let y;const g=uR[r]||rd;let S;g!==rd&&typeof s[0]!="number"&&(S=SC([0,100],s,{clamp:!1}),s=[0,100]);const j=g({...f,keyframes:s});let k;l==="mirror"&&(k=g({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let _="idle",E=null,N=null,D=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=jv(j));const{calculatedDuration:M}=j;let L=1/0,z=1/0;M!==null&&(L=M+o,z=L*(i+1)-o);let H=0;const B=V=>{if(N===null)return;m>0&&(N=Math.min(N,V)),m<0&&(N=Math.min(V-z/m,N)),E!==null?H=E:H=Math.round(V-N)*m;const Y=H-t*(m>=0?1:-1),ce=m>=0?Y<0:Y>z;H=Math.max(Y,0),_==="finished"&&E===null&&(H=z);let ne=H,ee=j;if(i){const F=Math.min(H,z)/L;let $=Math.floor(F),q=F%1;!q&&F>=1&&(q=1),q===1&&$--,$=Math.min($,i+1),!!($%2)&&(l==="reverse"?(q=1-q,o&&(q-=o/L)):l==="mirror"&&(ee=k)),ne=wr(0,1,q)*L}const W=ce?{done:!1,value:s[0]}:ee.next(ne);S&&(W.value=S(W.value));let{done:C}=W;!ce&&M!==null&&(C=m>=0?H>=z:H<=0);const P=E===null&&(_==="finished"||_==="running"&&C);return h&&h(W.value),P&&T(),W},A=()=>{y&&y.stop(),y=void 0},R=()=>{_="idle",A(),x(),w(),N=D=null},T=()=>{_="finished",d&&d(),A(),x()},I=()=>{if(p)return;y||(y=n(B));const V=y.now();c&&c(),E!==null?N=V-E:(!N||_==="finished")&&(N=V),_==="finished"&&w(),D=N,E=null,_="running",y.start()};e&&I();const O={then(V,Y){return b.then(V,Y)},get time(){return Ns(H)},set time(V){V=si(V),H=V,E!==null||!y||m===0?E=V:N=y.now()-V/m},get duration(){const V=j.calculatedDuration===null?jv(j):j.calculatedDuration;return Ns(V)},get speed(){return m},set speed(V){V===m||!y||(m=V,O.time=Ns(H))},get state(){return _},play:I,pause:()=>{_="paused",E=H},stop:()=>{p=!0,_!=="idle"&&(_="idle",u&&u(),R())},cancel:()=>{D!==null&&B(D),R()},complete:()=>{_="finished"},sample:V=>(N=0,B(V))};return O}function dR(e){let t;return()=>(t===void 0&&(t=e()),t)}const hR=dR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fR=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),_c=10,mR=2e4,pR=(e,t)=>t.type==="spring"||e==="backgroundColor"||!nC(t.ease);function gR(e,t,{onUpdate:n,onComplete:s,...r}){if(!(hR()&&fR.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(g=>{l=g})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=r;if(pR(t,r)){const g=id({...r,repeat:0,delay:0});let S={done:!1,value:h[0]};const j=[];let k=0;for(;!S.done&&k<mR;)S=g.sample(k),j.push(S.value),k+=_c;p=void 0,h=j,f=k-_c,m="linear"}const x=EI(e.owner.current,t,h,{...r,duration:f,ease:m,times:p}),b=()=>{u=!1,x.cancel()},w=()=>{u=!0,Le.update(b),l(),d()};return x.onfinish=()=>{u||(e.set(kI(h,r)),s&&s(),w())},{then(g,S){return c.then(g,S)},attachTimeline(g){return x.timeline=g,x.onfinish=null,Ze},get time(){return Ns(x.currentTime||0)},set time(g){x.currentTime=si(g)},get speed(){return x.playbackRate},set speed(g){x.playbackRate=g},get duration(){return Ns(f)},play:()=>{o||(x.play(),As(b))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:g}=x;if(g){const S=id({...r,autoplay:!1});e.setWithVelocity(S.sample(g-_c).value,S.sample(g).value,_c)}w()},complete:()=>{u||x.finish()},cancel:w}}function xR({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const r=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Ze,pause:Ze,stop:Ze,then:i=>(i(),Promise.resolve()),cancel:Ze,complete:Ze});return t?id({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const yR={type:"spring",stiffness:500,damping:25,restSpeed:10},vR=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),bR={type:"keyframes",duration:.8},wR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SR=(e,{keyframes:t})=>t.length>2?bR:vi.has(e)?e.startsWith("scale")?vR(t[1]):yR:wR,wp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sr.test(t)||t==="0")&&!t.startsWith("url(")),jR=new Set(["brightness","contrast","saturate","opacity"]);function NR(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(lh)||[];if(!s)return e;const r=n.replace(s,"");let i=jR.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const CR=/([a-z-]*)\(.*?\)/g,Sp={...Sr,getAnimatableNone:e=>{const t=e.match(CR);return t?t.map(NR).join(" "):e}},ER={...$N,color:Rt,backgroundColor:Rt,outlineColor:Rt,fill:Rt,stroke:Rt,borderColor:Rt,borderTopColor:Rt,borderRightColor:Rt,borderBottomColor:Rt,borderLeftColor:Rt,filter:Sp,WebkitFilter:Sp},Cx=e=>ER[e];function EC(e,t){let n=Cx(e);return n!==Sp&&(n=Sr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const kC=e=>/^0[^.\s]+$/.test(e);function kR(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||kC(e)}function _R(e,t,n,s){const r=wp(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),kR(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=EC(t,l)}return i}function DR({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Ex(e,t){return e[t]||e.default||e}const TR={skipAnimations:!1},kx=(e,t,n,s={})=>r=>{const i=Ex(s,e)||{},o=i.delay||s.delay||0;let{elapsed:l=0}=s;l=l-si(o);const c=_R(t,e,n,i),u=c[0],d=c[c.length-1],h=wp(e,u),f=wp(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(DR(i)||(m={...m,...SR(e,m)}),m.duration&&(m.duration=si(m.duration)),m.repeatDelay&&(m.repeatDelay=si(m.repeatDelay)),!h||!f||CI.current||i.type===!1||TR.skipAnimations)return xR(m);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=gR(t,e,m);if(p)return p}return id(m)};function od(e){return!!(Yt(e)&&e.add)}const _C=e=>/^\-?\d*\.?\d+$/.test(e);function _x(e,t){e.indexOf(t)===-1&&e.push(t)}function Dx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Tx{constructor(){this.subscriptions=[]}add(t){return _x(this.subscriptions,t),()=>Dx(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const PR=e=>!isNaN(parseFloat(e));class MR{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:o}=Ct;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Le.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Le.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=PR(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Tx);const s=this.events[t].add(n);return t==="change"?()=>{s(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fo(e,t){return new MR(e,t)}const DC=e=>t=>t.test(e),AR={test:e=>e==="auto",parse:e=>e},TC=[bi,pe,es,Us,zA,BA,AR],Qo=e=>TC.find(DC(e)),IR=[...TC,Rt,Sr],RR=e=>IR.find(DC(e));function OR(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fo(n))}function LR(e,t){const n=uh(e,t);let{transitionEnd:s={},transition:r={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...s};for(const o in i){const l=tI(i[o]);OR(e,o,l)}}function FR(e,t,n){var s,r;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(_C(d)||kC(d))?d=parseFloat(d):!RR(d)&&Sr.test(u)&&(d=EC(c,u)),e.addValue(c,fo(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function $R(e,t){return t?(t[e]||t.default||t).from:void 0}function BR(e,t,n){const s={};for(const r in e){const i=$R(r,t);if(i!==void 0)s[r]=i;else{const o=n.getValue(r);o&&(s[r]=o.get())}}return s}function zR({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function VR(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function PC(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(i=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&zR(d,h))continue;const p={delay:n,elapsed:0,...Ex(i||{},h)};if(window.HandoffAppearAnimations){const w=e.getProps()[MN];if(w){const y=window.HandoffAppearAnimations(w,h,f,Le);y!==null&&(p.elapsed=y,p.isHandoff=!0)}}let x=!p.isHandoff&&!VR(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(x=!1),f.animation&&(x=!1),x)continue;f.start(kx(h,f,m,e.shouldReduceMotion&&vi.has(h)?{type:!1}:p));const b=f.animation;od(c)&&(c.add(h),b.then(()=>c.remove(h))),u.push(b)}return o&&Promise.all(u).then(()=>{o&&LR(e,o)}),u}function jp(e,t,n={}){const s=uh(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(PC(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return UR(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function UR(e,t,n=0,s=0,r=1,i){const o=[],l=(e.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(WR).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(jp(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function WR(e,t){return e.sortNodePosition(t)}function HR(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(i=>jp(e,i,n));s=Promise.all(r)}else if(typeof t=="string")s=jp(e,t,n);else{const r=typeof t=="function"?uh(e,t,n.custom):t;s=Promise.all(PC(e,r,n))}return s.then(()=>e.notify("AnimationComplete",t))}const qR=[...hx].reverse(),GR=hx.length;function YR(e){return t=>Promise.all(t.map(({animation:n,options:s})=>HR(e,n,s)))}function QR(e){let t=YR(e);const n=XR();let s=!0;const r=(c,u)=>{const d=uh(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function o(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},x=1/0;for(let w=0;w<GR;w++){const y=qR[w],g=n[y],S=d[y]!==void 0?d[y]:h[y],j=fl(S),k=y===u?g.isActive:null;k===!1&&(x=w);let _=S===h[y]&&S!==d[y]&&j;if(_&&s&&e.manuallyAnimateOnMount&&(_=!1),g.protectedKeys={...p},!g.isActive&&k===null||!S&&!g.prevProp||oh(S)||typeof S=="boolean")continue;let N=KR(g.prevProp,S)||y===u&&g.isActive&&!_&&j||w>x&&j,D=!1;const M=Array.isArray(S)?S:[S];let L=M.reduce(r,{});k===!1&&(L={});const{prevResolvedValues:z={}}=g,H={...z,...L},B=A=>{N=!0,m.has(A)&&(D=!0,m.delete(A)),g.needsAnimating[A]=!0};for(const A in H){const R=L[A],T=z[A];if(p.hasOwnProperty(A))continue;let I=!1;td(R)&&td(T)?I=!eC(R,T):I=R!==T,I?R!==void 0?B(A):m.add(A):R!==void 0&&m.has(A)?B(A):g.protectedKeys[A]=!0}g.prevProp=S,g.prevResolvedValues=L,g.isActive&&(p={...p,...L}),s&&e.blockInitialAnimation&&(N=!1),N&&(!_||D)&&f.push(...M.map(A=>({animation:A,options:{type:y,...c}})))}if(m.size){const w={};m.forEach(y=>{const g=e.getBaseTarget(y);g!==void 0&&(w[y]=g)}),f.push({animation:w})}let b=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(b=!1),s=!1,b?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=o(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n}}function KR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!eC(t,e):!1}function Ar(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XR(){return{animate:Ar(!0),whileInView:Ar(),whileHover:Ar(),whileTap:Ar(),whileDrag:Ar(),whileFocus:Ar(),exit:Ar()}}class JR extends Tr{constructor(t){super(t),t.animationState||(t.animationState=QR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),oh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let ZR=0;class eO extends Tr{constructor(){super(...arguments),this.id=ZR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const tO={animation:{Feature:JR},exit:{Feature:eO}},Nv=(e,t)=>Math.abs(e-t);function nO(e,t){const n=Nv(e.x,t.x),s=Nv(e.y,t.y);return Math.sqrt(n**2+s**2)}class MC{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=yf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=nO(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:x}=Ct;this.history.push({...p,timestamp:x});const{onStart:b,onMove:w}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=xf(f,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=yf(h.type==="pointercancel"?this.lastMoveEventInfo:xf(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,b),p&&p(h,b)},!QN(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const o=ch(t),l=xf(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ct;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,yf(l,this.history)),this.removeListeners=pr(js(this.contextWindow,"pointermove",this.handlePointerMove),js(this.contextWindow,"pointerup",this.handlePointerUp),js(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),As(this.updatePoint)}}function xf(e,t){return t?{point:t(e.point)}:e}function Cv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yf({point:e},t){return{point:e,delta:Cv(e,AC(t)),offset:Cv(e,sO(t)),velocity:rO(t,.1)}}function sO(e){return e[0]}function AC(e){return e[e.length-1]}function rO(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=AC(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>si(t)));)n--;if(!s)return{x:0,y:0};const i=Ns(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ln(e){return e.max-e.min}function Np(e,t=0,n=.01){return Math.abs(e-t)<=n}function Ev(e,t,n,s=.5){e.origin=s,e.originPoint=qe(t.min,t.max,e.origin),e.scale=ln(n)/ln(t),(Np(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=qe(n.min,n.max,e.origin)-e.originPoint,(Np(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Fa(e,t,n,s){Ev(e.x,t.x,n.x,s?s.originX:void 0),Ev(e.y,t.y,n.y,s?s.originY:void 0)}function kv(e,t,n){e.min=n.min+t.min,e.max=e.min+ln(t)}function iO(e,t,n){kv(e.x,t.x,n.x),kv(e.y,t.y,n.y)}function _v(e,t,n){e.min=t.min-n.min,e.max=e.min+ln(t)}function $a(e,t,n){_v(e.x,t.x,n.x),_v(e.y,t.y,n.y)}function oO(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?qe(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?qe(n,e,s.max):Math.min(e,n)),e}function Dv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function aO(e,{top:t,left:n,bottom:s,right:r}){return{x:Dv(e.x,n,r),y:Dv(e.y,t,s)}}function Tv(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function lO(e,t){return{x:Tv(e.x,t.x),y:Tv(e.y,t.y)}}function cO(e,t){let n=.5;const s=ln(e),r=ln(t);return r>s?n=pl(t.min,t.max-s,e.min):s>r&&(n=pl(e.min,e.max-r,t.min)),wr(0,1,n)}function uO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Cp=.35;function dO(e=Cp){return e===!1?e=0:e===!0&&(e=Cp),{x:Pv(e,"left","right"),y:Pv(e,"top","bottom")}}function Pv(e,t,n){return{min:Mv(e,t),max:Mv(e,n)}}function Mv(e,t){return typeof e=="number"?e:e[t]||0}const Av=()=>({translate:0,scale:1,origin:0,originPoint:0}),qi=()=>({x:Av(),y:Av()}),Iv=()=>({min:0,max:0}),nt=()=>({x:Iv(),y:Iv()});function pn(e){return[e("x"),e("y")]}function IC({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function hO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function fO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function vf(e){return e===void 0||e===1}function Ep({scale:e,scaleX:t,scaleY:n}){return!vf(e)||!vf(t)||!vf(n)}function zr(e){return Ep(e)||RC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function RC(e){return Rv(e.x)||Rv(e.y)}function Rv(e){return e&&e!=="0%"}function ad(e,t,n){const s=e-n,r=t*s;return n+r}function Ov(e,t,n,s,r){return r!==void 0&&(e=ad(e,r,s)),ad(e,n,s)+t}function kp(e,t=0,n=1,s,r){e.min=Ov(e.min,t,n,s,r),e.max=Ov(e.max,t,n,s,r)}function OC(e,{x:t,y:n}){kp(e.x,t.translate,t.scale,t.originPoint),kp(e.y,n.translate,n.scale,n.originPoint)}function mO(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let i,o;for(let l=0;l<r;l++){i=n[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Gi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,OC(e,o)),s&&zr(i.latestValues)&&Gi(e,i.latestValues))}t.x=Lv(t.x),t.y=Lv(t.y)}function Lv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function qs(e,t){e.min=e.min+t,e.max=e.max+t}function Fv(e,t,[n,s,r]){const i=t[r]!==void 0?t[r]:.5,o=qe(e.min,e.max,i);kp(e,t[n],t[s],o,t.scale)}const pO=["x","scaleX","originX"],gO=["y","scaleY","originY"];function Gi(e,t){Fv(e.x,t,pO),Fv(e.y,t,gO)}function LC(e,t){return IC(fO(e.getBoundingClientRect(),t))}function xO(e,t,n){const s=LC(e,n),{scroll:r}=t;return r&&(qs(s.x,r.offset.x),qs(s.y,r.offset.y)),s}const FC=({current:e})=>e?e.ownerDocument.defaultView:null,yO=new WeakMap;class vO{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ch(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=XN(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pn(b=>{let w=this.getAxisMotionValue(b).get()||0;if(es.test(w)){const{projection:y}=this.visualElement;if(y&&y.layout){const g=y.layout.layoutBox[b];g&&(w=ln(g)*(parseFloat(w)/100))}}this.originPoint[b]=w}),p&&Le.update(()=>p(d,h),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:x}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=h;if(m&&this.currentDirection===null){this.currentDirection=bO(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),x&&x(d,h)},l=(d,h)=>this.stop(d,h),c=()=>pn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new MC(t,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:FC(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Le.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!Dc(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=oO(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Wi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=aO(r.layoutBox,n):this.constraints=!1,this.elastic=dO(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&pn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=uO(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wi(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=xO(s,r.root,this.visualElement.getTransformPagePoint());let o=lO(r.layout.layoutBox,i);if(n){const l=n(hO(o));this.hasMutatedConstraints=!!l,l&&(o=IC(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=pn(d=>{if(!Dc(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,p={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(kx(t,s,0,n))}stopAnimation(){pn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){pn(n=>{const{drag:s}=this.getProps();if(!Dc(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[n];i.set(t[n]-qe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Wi(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};pn(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();r[o]=cO({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),pn(o=>{if(!Dc(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(qe(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;yO.set(this.visualElement,this);const t=this.visualElement.current,n=js(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Wi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const o=vs(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(pn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Cp,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Dc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function bO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class wO extends Tr{constructor(t){super(t),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new vO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const $v=e=>(t,n)=>{e&&Le.update(()=>e(t,n))};class SO extends Tr{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(t){this.session=new MC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:$v(t),onStart:$v(n),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Le.update(()=>r(i,o))}}}mount(){this.removePointerDownListener=js(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jO(){const e=v.useContext(rh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=v.useId();return v.useEffect(()=>s(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const xu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ko={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(pe.test(e))e=parseFloat(e);else return e;const n=Bv(e,t.target.x),s=Bv(e,t.target.y);return`${n}% ${s}%`}},NO={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=Sr.parse(e);if(r.length>5)return s;const i=Sr.createTransformer(e),o=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+o]/=l,r[1+o]/=c;const u=qe(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class CO extends re.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=t;AA(EO),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),xu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,r||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Le.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $C(e){const[t,n]=jO(),s=v.useContext(mx);return re.createElement(CO,{...e,layoutGroup:s,switchLayoutGroup:v.useContext(IN),isPresent:t,safeToRemove:n})}const EO={borderRadius:{...Ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ko,borderTopRightRadius:Ko,borderBottomLeftRadius:Ko,borderBottomRightRadius:Ko,boxShadow:NO},BC=["TopLeft","TopRight","BottomLeft","BottomRight"],kO=BC.length,zv=e=>typeof e=="string"?parseFloat(e):e,Vv=e=>typeof e=="number"||pe.test(e);function _O(e,t,n,s,r,i){r?(e.opacity=qe(0,n.opacity!==void 0?n.opacity:1,DO(s)),e.opacityExit=qe(t.opacity!==void 0?t.opacity:1,0,TO(s))):i&&(e.opacity=qe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<kO;o++){const l=`border${BC[o]}Radius`;let c=Uv(t,l),u=Uv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Vv(c)===Vv(u)?(e[l]=Math.max(qe(zv(c),zv(u),s),0),(es.test(u)||es.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=qe(t.rotate||0,n.rotate||0,s))}function Uv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const DO=zC(0,.5,cC),TO=zC(.5,.95,Ze);function zC(e,t,n){return s=>s<e?0:s>t?1:n(pl(e,t,s))}function Wv(e,t){e.min=t.min,e.max=t.max}function hn(e,t){Wv(e.x,t.x),Wv(e.y,t.y)}function Hv(e,t,n,s,r){return e-=t,e=ad(e,1/n,s),r!==void 0&&(e=ad(e,1/r,s)),e}function PO(e,t=0,n=1,s=.5,r,i=e,o=e){if(es.test(t)&&(t=parseFloat(t),t=qe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=qe(i.min,i.max,s);e===i&&(l-=t),e.min=Hv(e.min,t,n,l,r),e.max=Hv(e.max,t,n,l,r)}function qv(e,t,[n,s,r],i,o){PO(e,t[n],t[s],t[r],t.scale,i,o)}const MO=["x","scaleX","originX"],AO=["y","scaleY","originY"];function Gv(e,t,n,s){qv(e.x,t,MO,n?n.x:void 0,s?s.x:void 0),qv(e.y,t,AO,n?n.y:void 0,s?s.y:void 0)}function Yv(e){return e.translate===0&&e.scale===1}function VC(e){return Yv(e.x)&&Yv(e.y)}function IO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function UC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Qv(e){return ln(e.x)/ln(e.y)}class RO{constructor(){this.members=[]}add(t){_x(this.members,t),t.scheduleRender()}remove(t){if(Dx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Kv(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const OO=(e,t)=>e.depth-t.depth;class LO{constructor(){this.children=[],this.isDirty=!1}add(t){_x(this.children,t),this.isDirty=!0}remove(t){Dx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(OO),this.isDirty=!1,this.children.forEach(t)}}function FO(e,t){const n=performance.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(As(s),e(i-t))};return Le.read(s,!0),()=>As(s)}function $O(e){window.MotionDebug&&window.MotionDebug.record(e)}function BO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function zO(e,t,n){const s=Yt(e)?e:fo(e);return s.start(kx("",s,t,n)),s.animation}const Xv=["","X","Y","Z"],VO={visibility:"hidden"},Jv=1e3;let UO=0;const Vr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function WC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},l=t==null?void 0:t()){this.id=UO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vr.totalNodes=Vr.resolvedTargetDeltas=Vr.recalculatedProjection=0,this.nodes.forEach(qO),this.nodes.forEach(XO),this.nodes.forEach(JO),this.nodes.forEach(GO),$O(Vr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new LO)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Tx),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=BO(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=FO(f,250),xu.hasAnimatedSinceResize&&(xu.hasAnimatedSinceResize=!1,this.nodes.forEach(eb))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||sL,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=d.getProps(),y=!this.targetLayout||!UC(this.targetLayout,p)||m,g=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,g);const S={...Ex(x,"layout"),onPlay:b,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||eb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,As(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ZO),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zv);return}this.isUpdating||this.nodes.forEach(QO),this.isUpdating=!1,this.nodes.forEach(KO),this.nodes.forEach(WO),this.nodes.forEach(HO),this.clearAllSnapshots();const l=performance.now();Ct.delta=wr(0,1e3/60,l-Ct.timestamp),Ct.timestamp=l,Ct.isProcessing=!0,cf.update.process(Ct),cf.preRender.process(Ct),cf.render.process(Ct),Ct.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(YO),this.sharedNodes.forEach(eL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!VC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||zr(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),rL(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return nt();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(qs(l.x,c.offset.x),qs(l.y,c.offset.y)),l}removeElementScroll(o){const l=nt();hn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){hn(l,o);const{scroll:f}=this.root;f&&(qs(l.x,-f.offset.x),qs(l.y,-f.offset.y))}qs(l.x,d.offset.x),qs(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=nt();hn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Gi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zr(d.latestValues)&&Gi(c,d.latestValues)}return zr(this.latestValues)&&Gi(c,this.latestValues),c}removeTransform(o){const l=nt();hn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zr(u.latestValues))continue;Ep(u.latestValues)&&u.updateSnapshot();const d=nt(),h=u.measurePageBox();hn(d,h),Gv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zr(this.latestValues)&&Gv(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ct.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ct.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),$a(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hn(this.target,this.layout.layoutBox),OC(this.target,this.targetDelta)):hn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),$a(this.relativeTargetOrigin,this.target,m.target),hn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ep(this.parent.latestValues)||RC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ct.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;hn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;mO(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=qi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=qi(),this.projectionDeltaWithTransform=qi());const x=this.projectionTransform;Fa(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Kv(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Vr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=qi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=nt(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,x=m!==p,b=this.getStack(),w=!b||b.members.length<=1,y=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(nL));this.animationProgress=0;let g;this.mixTargetDelta=S=>{const j=S/1e3;tb(h.x,o.x,j),tb(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($a(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tL(this.relativeTarget,this.relativeTargetOrigin,f,j),g&&IO(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=nt()),hn(g,this.relativeTarget)),x&&(this.animationValues=d,_O(d,u,this.latestValues,j,y,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(As(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{xu.hasAnimatedSinceResize=!0,this.currentAnimation=zO(0,Jv,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&HC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||nt();const h=ln(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=ln(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}hn(l,c),Gi(l,d),Fa(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new RO),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Xv.length;d++){const h="rotate"+Xv[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VO;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=gu(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=gu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!zr(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Kv(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in Zu){if(f[x]===void 0)continue;const{correct:b,applyTo:w}=Zu[x],y=u.transform==="none"?f[x]:b(f[x],h);if(w){const g=w.length;for(let S=0;S<g;S++)u[w[S]]=y}else u[x]=y}return this.options.layoutId&&(u.pointerEvents=h===this?gu(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Zv),this.root.sharedNodes.clear()}}}function WO(e){e.updateLayout()}function HO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?pn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=ln(f);f.min=s[h].min,f.max=f.min+m}):HC(i,n.layoutBox,s)&&pn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=ln(s[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=qi();Fa(l,s,n.layoutBox);const c=qi();o?Fa(c,e.applyTransform(r,!0),n.measuredBox):Fa(c,s,n.layoutBox);const u=!VC(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=nt();$a(p,n.layoutBox,f.layoutBox);const x=nt();$a(x,s,m.layoutBox),UC(p,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function qO(e){Vr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function GO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function YO(e){e.clearSnapshot()}function Zv(e){e.clearMeasurements()}function QO(e){e.isLayoutDirty=!1}function KO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function eb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function XO(e){e.resolveTargetDelta()}function JO(e){e.calcProjection()}function ZO(e){e.resetRotation()}function eL(e){e.removeLeadSnapshot()}function tb(e,t,n){e.translate=qe(t.translate,0,n),e.scale=qe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function nb(e,t,n,s){e.min=qe(t.min,n.min,s),e.max=qe(t.max,n.max,s)}function tL(e,t,n,s){nb(e.x,t.x,n.x,s),nb(e.y,t.y,n.y,s)}function nL(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sL={duration:.45,ease:[.4,0,.1,1]},sb=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),rb=sb("applewebkit/")&&!sb("chrome/")?Math.round:Ze;function ib(e){e.min=rb(e.min),e.max=rb(e.max)}function rL(e){ib(e.x),ib(e.y)}function HC(e,t,n){return e==="position"||e==="preserve-aspect"&&!Np(Qv(t),Qv(n),.2)}const iL=WC({attachResizeListener:(e,t)=>vs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bf={current:void 0},qC=WC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!bf.current){const e=new iL({});e.mount(window),e.setOptions({layoutScroll:!0}),bf.current=e}return bf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),oL={pan:{Feature:SO},drag:{Feature:wO,ProjectionNode:qC,MeasureLayout:$C}},aL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function lL(e){const t=aL.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function _p(e,t,n=1){const[s,r]=lL(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const o=i.trim();return _C(o)?parseFloat(o):o}else return xp(r)?_p(r,t,n+1):r}function cL(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const i=r.get();if(!xp(i))return;const o=_p(i,s);o&&r.set(o)});for(const r in t){const i=t[r];if(!xp(i))continue;const o=_p(i,s);o&&(t[r]=o,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:t,transitionEnd:n}}const uL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),GC=e=>uL.has(e),dL=e=>Object.keys(e).some(GC),ob=e=>e===bi||e===pe,ab=(e,t)=>parseFloat(e.split(", ")[t]),lb=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return ab(r[1],t);{const i=s.match(/^matrix\((.+)\)$/);return i?ab(i[1],e):0}},hL=new Set(["x","y","z"]),fL=Vl.filter(e=>!hL.has(e));function mL(e){const t=[];return fL.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const mo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:lb(4,13),y:lb(5,14)};mo.translateX=mo.x;mo.translateY=mo.y;const pL=(e,t,n)=>{const s=t.measureViewportBox(),r=t.current,i=getComputedStyle(r),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=mo[u](s,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=mo[u](c,i)}),e},gL=(e,t,n={},s={})=>{t={...t},s={...s};const r=Object.keys(t).filter(GC);let i=[],o=!1;const l=[];if(r.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Qo(d);const f=t[c];let m;if(td(f)){const p=f.length,x=f[0]===null?1:0;d=f[x],h=Qo(d);for(let b=x;b<p&&f[b]!==null;b++)m?nd(Qo(f[b])===m):m=Qo(f[b])}else m=Qo(f);if(h!==m)if(ob(h)&&ob(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===pe&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(o||(i=mL(e),o=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=pL(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),ih&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function xL(e,t,n,s){return dL(t)?gL(e,t,n,s):{target:t,transitionEnd:s}}const yL=(e,t,n,s)=>{const r=cL(e,t,s);return t=r.target,s=r.transitionEnd,xL(e,t,n,s)},Dp={current:null},YC={current:!1};function vL(){if(YC.current=!0,!!ih)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Dp.current=e.matches;e.addListener(t),t()}else Dp.current=!1}function bL(e,t,n){const{willChange:s}=t;for(const r in t){const i=t[r],o=n[r];if(Yt(i))e.addValue(r,i),od(s)&&s.add(r);else if(Yt(o))e.addValue(r,fo(i,{owner:e})),od(s)&&s.remove(r);else if(o!==i)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(r);e.addValue(r,fo(l!==void 0?l:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const cb=new WeakMap,QC=Object.keys(ml),wL=QC.length,ub=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],SL=fx.length;class jL{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Le.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=ah(n),this.isVariantNode=AN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&Yt(f)&&(f.set(l[h],!1),od(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,cb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),YC.current||vL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cb.delete(this.current),this.projection&&this.projection.unmount(),As(this.notifyUpdate),As(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=vi.has(t),r=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Le.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,r,i){let o,l;for(let c=0;c<wL;c++){const u=QC[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=ml[u];f&&(o=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Wi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<ub.length;s++){const r=ub[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=bL(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<SL;s++){const r=fx[s],i=this.props[r];(fl(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=fo(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=wx(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Yt(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Tx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class KC extends jL{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:r},i){let o=BR(s,t||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),o&&(o=r(o))),i){FR(this,s,o);const l=yL(this,s,o,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function NL(e){return window.getComputedStyle(e)}class CL extends KC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(vi.has(n)){const s=Cx(n);return s&&s.default||0}else{const s=NL(t),r=(LN(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return LC(t,n)}build(t,n,s,r){gx(t,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return bx(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Yt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,r){UN(t,n,s,r)}}class EL extends KC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(vi.has(n)){const s=Cx(n);return s&&s.default||0}return n=WN.has(n)?n:dx(n),t.getAttribute(n)}measureInstanceViewportBox(){return nt()}scrapeMotionValuesFromProps(t,n){return qN(t,n)}build(t,n,s,r){yx(t,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,s,r){HN(t,n,s,r)}mount(t){this.isSVGTag=vx(t.tagName),super.mount(t)}}const kL=(e,t)=>px(e)?new EL(t,{enableHardwareAcceleration:!1}):new CL(t,{enableHardwareAcceleration:!0}),_L={layout:{ProjectionNode:qC,MeasureLayout:$C}},DL={...tO,...SI,...oL,..._L},gl=PA((e,t)=>cI(e,t,DL,kL));function XC(){const e=v.useRef(!1);return ux(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function TL(){const e=XC(),[t,n]=v.useState(0),s=v.useCallback(()=>{e.current&&n(t+1)},[t]);return[v.useCallback(()=>Le.postRender(s),[s]),t]}class PL extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ML({children:e,isPresent:t}){const n=v.useId(),s=v.useRef(null),r=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=r.current;if(t||!s.current||!i||!o)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),v.createElement(PL,{isPresent:t,childRef:s,sizeRef:r},v.cloneElement(e,{ref:s}))}const wf=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o})=>{const l=GN(AL),c=v.useId(),u=v.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return v.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),v.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(e=v.createElement(ML,{isPresent:n},e)),v.createElement(rh.Provider,{value:u},e)};function AL(){return new Map}function IL(e){return v.useEffect(()=>()=>e(),[])}const Ur=e=>e.key||"";function RL(e,t){e.forEach(n=>{const s=Ur(n);t.set(s,n)})}function OL(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const Px=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=v.useContext(mx).forceRender||TL()[0],c=XC(),u=OL(e);let d=u;const h=v.useRef(new Map).current,f=v.useRef(d),m=v.useRef(new Map).current,p=v.useRef(!0);if(ux(()=>{p.current=!1,RL(u,m),f.current=d}),IL(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return v.createElement(v.Fragment,null,d.map(y=>v.createElement(wf,{key:Ur(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},y)));d=[...d];const x=f.current.map(Ur),b=u.map(Ur),w=x.length;for(let y=0;y<w;y++){const g=x[y];b.indexOf(g)===-1&&!h.has(g)&&h.set(g,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((y,g)=>{if(b.indexOf(g)!==-1)return;const S=m.get(g);if(!S)return;const j=x.indexOf(g);let k=y;if(!k){const _=()=>{h.delete(g);const E=Array.from(m.keys()).filter(N=>!b.includes(N));if(E.forEach(N=>m.delete(N)),f.current=u.filter(N=>{const D=Ur(N);return D===g||E.includes(D)}),!h.size){if(c.current===!1)return;l(),s&&s()}};k=v.createElement(wf,{key:Ur(S),isPresent:!1,onExitComplete:_,custom:t,presenceAffectsLayout:i,mode:o},S),h.set(g,k)}d.splice(j,0,k)}),d=d.map(y=>{const g=y.key;return h.has(g)?y:v.createElement(wf,{key:Ur(y),isPresent:!0,presenceAffectsLayout:i,mode:o},y)}),v.createElement(v.Fragment,null,h.size?d:d.map(y=>v.cloneElement(y)))},LL="/crane-icon.svg",FL=[{label:"Dashboard",icon:a.jsx(sA,{size:20}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:a.jsx(ZM,{size:20}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:a.jsx(nA,{size:20}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:a.jsx(vN,{size:20}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:a.jsx(zl,{size:20}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:a.jsx(Ms,{size:20}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:a.jsx(SN,{size:20}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:a.jsx(yN,{size:20}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:a.jsx($n,{size:20}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:a.jsx(lx,{size:20}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:a.jsx(En,{size:20}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:a.jsx(oA,{size:20}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Templates",icon:a.jsx(En,{size:20}),href:"/admin/quotation-templates",roles:["admin","sales_agent"]}];function $L({isMobileOpen:e=!1,onMobileClose:t}){const{user:n}=Ae(),s=Rs(),[r,i]=v.useState(!1);if(v.useEffect(()=>{const f=()=>{window.innerWidth<1024?i(!0):i(!1)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),!n)return null;const o=FL.filter(f=>f.roles.includes(n.role)),l=(f,m)=>m?s.pathname===f:f==="/dashboard"&&s.pathname==="/"?!0:s.pathname.startsWith(f),c=()=>{i(!r)},u=a.jsx(Px,{children:e&&a.jsxs(a.Fragment,{children:[a.jsx(gl.div,{className:"fixed inset-0 z-40 bg-black/60 lg:hidden backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),a.jsx(gl.div,{className:"fixed inset-y-0 left-0 z-50 w-[280px] max-w-[85%] bg-white shadow-xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},children:h(!1)})]})}),d=a.jsx("div",{className:`hidden lg:block w-${r?"20":"64"} flex-shrink-0 transition-all duration-300`,children:a.jsx("div",{className:"fixed inset-y-0 left-0 z-30 w-64 bg-white border-r border-gray-200 overflow-y-auto",children:h(r)})});return a.jsxs(a.Fragment,{children:[u,d]});function h(f){return a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b",children:[a.jsx(In,{to:"/dashboard",className:"flex items-center",children:a.jsx("img",{src:DN,alt:"ASP Cranes",className:`h-10 sm:h-12 w-auto object-contain ${f?"mx-auto":""}`,onError:m=>{console.log("Logo load error, using fallback"),m.currentTarget.src="/asp-logo.jpg",m.currentTarget.onerror=()=>{m.currentTarget.src=LL,m.currentTarget.onerror=null}}})}),!f&&t&&a.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-gray-100 lg:hidden","aria-label":"Close menu",children:a.jsx(ho,{className:"h-5 w-5 text-gray-500"})}),!f&&!t&&a.jsx("button",{onClick:c,className:"p-1.5 rounded-md hover:bg-gray-100 hidden lg:block","aria-label":"Collapse menu",children:a.jsx(ho,{className:"h-5 w-5 text-gray-500"})})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto pt-2 pb-4",children:a.jsx("ul",{className:"space-y-0.5 px-2 sm:px-3",children:o.map(m=>a.jsx("li",{children:a.jsxs(In,{to:m.href,className:`flex items-center ${f?"justify-center px-2":"space-x-3 px-3"} py-2.5 sm:py-2 rounded-md transition-colors group relative ${l(m.href,m.end)?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-100"}`,onClick:t,children:[a.jsx("span",{className:"flex-shrink-0",children:m.icon}),!f&&a.jsx("span",{className:"text-sm sm:text-base",children:m.label}),f&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50",children:m.label})]})},m.href))})}),a.jsx("div",{className:`p-3 sm:p-4 border-t mt-auto ${f?"text-center":""}`,children:a.jsxs("div",{className:`flex items-center ${f?"justify-center":"space-x-3"}`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 sm:h-9 sm:w-9 rounded-full object-cover border border-gray-200"})}),!f&&n&&a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n.name}),a.jsx("p",{className:"text-xs text-gray-500 truncate capitalize",children:n.role.replace("_"," ")}),a.jsx("div",{className:"mt-1",children:a.jsxs("button",{onClick:()=>{t&&t();const m=new CustomEvent("sidebar-logout");document.dispatchEvent(m)},className:"text-xs text-gray-500 hover:text-gray-700 px-2 py-1 rounded-md hover:bg-gray-100 inline-flex items-center",children:[a.jsx(jN,{className:"h-3 w-3 mr-1.5"}),"Logout"]})})]})]})})]})}}const ba=[{id:"1",userId:"3",type:"job_assigned",title:"New Job Assigned",message:"You have been assigned to a new job for Skyrise Developers",read:!1,createdAt:"2023-09-25T14:35:00Z",link:"/operator/jobs/1"},{id:"2",userId:"2",type:"lead_status_change",title:"Lead Status Updated",message:'Lead "Skyrise Developers" has been marked as Won',read:!0,createdAt:"2023-09-22T16:15:00Z",link:"/manager/leads/3"},{id:"3",userId:"1",type:"quotation_created",title:"Quotation Created",message:"A new quotation has been created for BuildRight Inc",read:!1,createdAt:"2023-09-26T10:20:00Z",link:"/sales/quotations/1"}],BL=async e=>(await new Promise(t=>setTimeout(t,400)),ba.filter(t=>t.userId===e).map(t=>({...t}))),zL=async e=>{await new Promise(n=>setTimeout(n,300));const t=ba.findIndex(n=>n.id===e);return t===-1?null:(ba[t]={...ba[t],read:!0},{...ba[t]})};function JC(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=JC(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function ZC(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=JC(e))&&(s&&(s+=" "),s+=t);return s}const db=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,hb=ZC,ql=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return hb(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,o=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=db(d)||db(h);return r[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[x,b]=p;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...u,h,f]:u},[]);return hb(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},VL=ql("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function xl({className:e,variant:t,size:n,...s}){return a.jsx("div",{className:VL({variant:t,size:n,className:e}),...s})}function UL({onMobileMenuClick:e}){const{user:t,logout:n}=Ae(),s=Qt(),[r,i]=v.useState([]),[o,l]=v.useState(!1);v.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t){const f=await BL(t.id);i(f)}},u=async()=>{try{await n(),console.log(" Logout successful"),s("/login")}catch(f){console.error(" Logout error:",f),s("/login")}},d=async f=>{f.read||(await zL(f.id),c()),f.link&&s(f.link),l(!1)},h=r.filter(f=>!f.read).length;return a.jsxs("header",{className:"bg-white border-b border-gray-200 h-14 md:h-16 flex items-center justify-between px-2 sm:px-4 md:px-6 sticky top-0 z-20 shadow-sm",children:[a.jsxs("div",{className:"flex items-center",children:[e&&a.jsx("button",{onClick:e,className:"p-1.5 rounded-md hover:bg-gray-100 lg:hidden","aria-label":"Toggle menu",children:a.jsx(iA,{className:"h-5 w-5 text-gray-600"})}),a.jsx("div",{className:"ml-2 text-sm md:text-base font-medium text-gray-800 hidden xs:block",children:"ASP CRM"})]}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>l(!o),className:"p-1.5 hover:bg-gray-100 rounded-full relative","aria-label":"Notifications",children:[a.jsx(WM,{className:"h-5 w-5 text-gray-600"}),h>0&&a.jsx(xl,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center",children:h})]}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/20 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsx("div",{className:"absolute right-0 mt-2 w-[280px] sm:w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-w-[calc(100vw-16px)]",children:a.jsxs("div",{className:"p-3 sm:p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Notifications"}),a.jsxs("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-500 p-1 rounded-full",children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),r.length===0?a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No notifications"}):a.jsx("div",{className:"mt-1 space-y-1.5 max-h-[60vh] overflow-y-auto",children:r.map(f=>a.jsxs("button",{onClick:()=>d(f),className:`w-full text-left p-2 rounded-md hover:bg-gray-50 ${f.read?"":"bg-blue-50"}`,children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:f.title}),f.message&&a.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 line-clamp-2",children:f.message})]},f.id))})]})})]})]}),a.jsxs("button",{onClick:u,className:"p-1.5 hover:bg-gray-100 rounded-full flex items-center",title:"Logout",children:[a.jsx(jN,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"ml-1.5 text-sm text-gray-700 hidden sm:inline",children:"Logout"})]}),(t==null?void 0:t.avatar)&&a.jsx("div",{className:"hidden sm:block ml-1",children:a.jsx("img",{src:t.avatar||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(t==null?void 0:t.name)||"User",className:"h-8 w-8 rounded-full object-cover border border-gray-200"})})]})]})}const WL=(e,t,n={})=>t();function HL({requiredRole:e,children:t}){const{isAuthenticated:n,user:s,logout:r}=Ae(),i=Qt(),[o,l]=v.useState(!1),[c,u]=v.useState(!1),d=v.useRef(!1);if(v.useEffect(()=>{const f=()=>{r().then(()=>{i("/login")}).catch(m=>{console.error("Logout error:",m),i("/login")})};return document.addEventListener("sidebar-logout",f),()=>{document.removeEventListener("sidebar-logout",f)}},[r,i]),v.useEffect(()=>{if(d.current)return;const f=async()=>{try{l(!0);const{user:p,isAuthenticated:x}=Ae.getState(),b=localStorage.getItem("explicit-login-performed")==="true";if(!x||!p||!b){console.log(" AppShell auth check failed - redirecting to login"),i("/login",{replace:!0});return}if(e&&p.role!==e&&p.role!=="admin"){console.log(` User does not have required role: ${e}`),i("/dashboard",{replace:!0});return}console.log(" AppShell auth validation complete"),d.current=!0}catch(p){console.error("Auth validation error:",p),i("/login",{replace:!0})}finally{l(!1)}},m=WL();f().finally(()=>{m()})},[i,n,s,e]),v.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&u(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),o)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx(Be,{className:"w-8 h-8 animate-spin text-primary-600"})});if(!n)return a.jsx(yn,{to:"/login"});if(e&&(s==null?void 0:s.role)!==e)return a.jsx(yn,{to:"/dashboard"});const h=()=>{u(!c)};return a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx($L,{isMobileOpen:c,onMobileClose:()=>u(!1)}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsx(UL,{onMobileMenuClick:h}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-2 sm:p-3 md:p-4 lg:p-6",children:a.jsx("div",{className:"max-w-[1600px] mx-auto",children:t||a.jsx(aN,{})})})]})]})}const qL=ql("rounded-lg bg-white w-full transition-shadow",{variants:{variant:{default:"shadow-sm hover:shadow-md",bordered:"border border-gray-200",flat:""},padding:{none:"",sm:"p-2 sm:p-3 md:p-4",md:"p-3 sm:p-4 md:p-5",lg:"p-4 sm:p-5 md:p-6"}},defaultVariants:{variant:"default",padding:"md"}}),te=re.forwardRef(({className:e,variant:t,padding:n,as:s="div",children:r,...i},o)=>a.jsx(s,{className:`${qL({variant:t,padding:n,className:e})} ${e}`,ref:o,...i,children:r}));te.displayName="Card";function de({children:e,className:t="",...n}){return a.jsx("div",{className:`p-3 sm:p-4 md:p-6 border-b border-gray-200 ${t}`,...n,children:e})}function he({children:e,className:t=""}){return a.jsx("h3",{className:`text-base sm:text-lg font-semibold text-gray-900 ${t}`,children:e})}function le({children:e,className:t=""}){return a.jsx("div",{className:`p-3 sm:p-4 md:p-6 ${t}`,children:e})}const GL=re.forwardRef(({className:e,...t},n)=>a.jsx("div",{ref:n,className:`flex flex-col sm:flex-row items-center gap-3 p-3 sm:p-4 md:p-6 pt-0 ${e}`,...t}));GL.displayName="CardFooter";const YL=ql("rounded-lg",{variants:{variant:{default:"bg-white",primary:"bg-primary-50",secondary:"bg-secondary-50",accent:"bg-accent-50",success:"bg-success-50",warning:"bg-warning-50",error:"bg-error-50"}},defaultVariants:{variant:"default"}});function Wt({className:e,variant:t,title:n,value:s,icon:r,trend:i,footer:o,...l}){return a.jsxs(te,{className:YL({variant:t,className:e}),padding:"lg",...l,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:n}),a.jsx("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:s}),i&&a.jsxs("div",{className:"mt-1 flex items-center",children:[a.jsxs("span",{className:`text-sm font-medium ${i.isPositive?"text-success-600":"text-error-600"}`,children:[i.isPositive?"+":"-",Math.abs(i.value),"%"]}),a.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"from last month"})]})]}),r&&a.jsx("div",{className:`p-2 rounded-md ${t!=="default"?"bg-white/60":"bg-gray-100"}`,children:r})]}),o&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Gl(e){return e+.5|0}const tr=(e,t,n)=>Math.max(Math.min(e,n),t);function wa(e){return tr(Gl(e*2.55),0,255)}function gr(e){return tr(Gl(e*255),0,255)}function ps(e){return tr(Gl(e/2.55)/100,0,1)}function fb(e){return tr(Gl(e*100),0,100)}const fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Tp=[..."0123456789ABCDEF"],QL=e=>Tp[e&15],KL=e=>Tp[(e&240)>>4]+Tp[e&15],Tc=e=>(e&240)>>4===(e&15),XL=e=>Tc(e.r)&&Tc(e.g)&&Tc(e.b)&&Tc(e.a);function JL(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&fn[e[1]]*17,g:255&fn[e[2]]*17,b:255&fn[e[3]]*17,a:t===5?fn[e[4]]*17:255}:(t===7||t===9)&&(n={r:fn[e[1]]<<4|fn[e[2]],g:fn[e[3]]<<4|fn[e[4]],b:fn[e[5]]<<4|fn[e[6]],a:t===9?fn[e[7]]<<4|fn[e[8]]:255})),n}const ZL=(e,t)=>e<255?t(e):"";function e5(e){var t=XL(e)?QL:KL;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ZL(e.a,t):void 0}const t5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function eE(e,t,n){const s=t*Math.min(n,1-n),r=(i,o=(i+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function n5(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function s5(e,t,n){const s=eE(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function r5(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function Mx(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=r5(n,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function Ax(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(gr)}function Ix(e,t,n){return Ax(eE,e,t,n)}function i5(e,t,n){return Ax(s5,e,t,n)}function o5(e,t,n){return Ax(n5,e,t,n)}function tE(e){return(e%360+360)%360}function a5(e){const t=t5.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?wa(+t[5]):gr(+t[5]));const r=tE(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=i5(r,i,o):t[1]==="hsv"?s=o5(r,i,o):s=Ix(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function l5(e,t){var n=Mx(e);n[0]=tE(n[0]+t),n=Ix(n),e.r=n[0],e.g=n[1],e.b=n[2]}function c5(e){if(!e)return;const t=Mx(e),n=t[0],s=fb(t[1]),r=fb(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${ps(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const mb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function u5(){const e={},t=Object.keys(pb),n=Object.keys(mb);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,mb[i]);i=parseInt(pb[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let Pc;function d5(e){Pc||(Pc=u5(),Pc.transparent=[0,0,0,0]);const t=Pc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const h5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function f5(e){const t=h5.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?wa(o):tr(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?wa(s):tr(s,0,255)),r=255&(t[4]?wa(r):tr(r,0,255)),i=255&(t[6]?wa(i):tr(i,0,255)),{r:s,g:r,b:i,a:n}}}function m5(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ps(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Sf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ci=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function p5(e,t,n){const s=Ci(ps(e.r)),r=Ci(ps(e.g)),i=Ci(ps(e.b));return{r:gr(Sf(s+n*(Ci(ps(t.r))-s))),g:gr(Sf(r+n*(Ci(ps(t.g))-r))),b:gr(Sf(i+n*(Ci(ps(t.b))-i))),a:e.a+n*(t.a-e.a)}}function Mc(e,t,n){if(e){let s=Mx(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Ix(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function nE(e,t){return e&&Object.assign(t||{},e)}function gb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=gr(e[3]))):(t=nE(e,{r:0,g:0,b:0,a:1}),t.a=gr(t.a)),t}function g5(e){return e.charAt(0)==="r"?f5(e):a5(e)}class yl{constructor(t){if(t instanceof yl)return t;const n=typeof t;let s;n==="object"?s=gb(t):n==="string"&&(s=JL(t)||d5(t)||g5(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=nE(this._rgb);return t&&(t.a=ps(t.a)),t}set rgb(t){this._rgb=gb(t)}rgbString(){return this._valid?m5(this._rgb):void 0}hexString(){return this._valid?e5(this._rgb):void 0}hslString(){return this._valid?c5(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=p5(this._rgb,t._rgb,n)),this}clone(){return new yl(this.rgb)}alpha(t){return this._rgb.a=gr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Gl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Mc(this._rgb,2,t),this}darken(t){return Mc(this._rgb,2,-t),this}saturate(t){return Mc(this._rgb,1,t),this}desaturate(t){return Mc(this._rgb,1,-t),this}rotate(t){return l5(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ls(){}const x5=(()=>{let e=0;return()=>e++})();function _e(e){return e==null}function rt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Se(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Mt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function qn(e,t){return Mt(e)?e:t}function ye(e,t){return typeof e>"u"?t:e}const y5=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,sE=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function $e(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Pe(e,t,n,s){let r,i,o;if(rt(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(Se(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(n,e[o[r]],o[r])}function ld(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function cd(e){if(rt(e))return e.map(cd);if(Se(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=cd(e[n[r]]);return t}return e}function rE(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function v5(e,t,n,s){if(!rE(e))return;const r=t[e],i=n[e];Se(r)&&Se(i)?vl(r,i,s):t[e]=cd(i)}function vl(e,t,n){const s=rt(t)?t:[t],r=s.length;if(!Se(e))return e;n=n||{};const i=n.merger||v5;let o;for(let l=0;l<r;++l){if(o=s[l],!Se(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],e,o,n)}return e}function Ba(e,t){return vl(e,t,{merger:b5})}function b5(e,t,n){if(!rE(e))return;const s=t[e],r=n[e];Se(s)&&Se(r)?Ba(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=cd(r))}const xb={"":e=>e,x:e=>e.x,y:e=>e.y};function w5(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function S5(e){const t=w5(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function fi(e,t){return(xb[t]||(xb[t]=S5(t)))(e)}function Rx(e){return e.charAt(0).toUpperCase()+e.slice(1)}const bl=e=>typeof e<"u",jr=e=>typeof e=="function",yb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function j5(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Me=Math.PI,Ge=2*Me,N5=Ge+Me,ud=Number.POSITIVE_INFINITY,C5=Me/180,ut=Me/2,Ir=Me/4,vb=Me*2/3,Pp=Math.log10,ts=Math.sign;function za(e,t,n){return Math.abs(e-t)<n}function bb(e){const t=Math.round(e);e=za(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Pp(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function E5(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function k5(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function wl(e){return!k5(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function _5(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function D5(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function bs(e){return e*(Me/180)}function T5(e){return e*(180/Me)}function wb(e){if(!Mt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function iE(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Me&&(i+=Ge),{angle:i,distance:r}}function Mp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function P5(e,t){return(e-t+N5)%Ge-Me}function Zt(e){return(e%Ge+Ge)%Ge}function Sl(e,t,n,s){const r=Zt(e),i=Zt(t),o=Zt(n),l=Zt(i-r),c=Zt(o-r),u=Zt(r-i),d=Zt(r-o);return r===i||r===o||s&&i===o||l>c&&u<d}function _t(e,t,n){return Math.max(t,Math.min(n,e))}function M5(e){return _t(e,-32768,32767)}function ws(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function Ox(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Zr=(e,t,n,s)=>Ox(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),A5=(e,t,n)=>Ox(e,n,s=>e[s][t]>=n);function I5(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const oE=["push","pop","shift","splice","unshift"];function R5(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),oE.forEach(n=>{const s="_onData"+Rx(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function Sb(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(oE.forEach(i=>{delete e[i]}),delete e._chartjs)}function aE(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const lE=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function cE(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,lE.call(window,()=>{s=!1,e.apply(t,n)}))}}function O5(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Lx=e=>e==="start"?"left":e==="end"?"right":"center",Et=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,L5=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function F5(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:h,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(r=Math.min(Zr(c,d,h).lo,n?s:Zr(t,d,o.getPixelForValue(h)).lo),u){const x=c.slice(0,r+1).reverse().findIndex(b=>!_e(b[l.axis]));r-=Math.max(0,x)}r=_t(r,0,s-1)}if(p){let x=Math.max(Zr(c,o.axis,f,!0).hi+1,n?0:Zr(t,d,o.getPixelForValue(f),!0).hi+1);if(u){const b=c.slice(x-1).findIndex(w=>!_e(w[l.axis]));x+=Math.max(0,b)}i=_t(x,r,s)-r}else i=s-r}return{start:r,count:i}}function $5(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Ac=e=>e===0||e===1,jb=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ge/n)),Nb=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ge/n)+1,Va={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ut)+1,easeOutSine:e=>Math.sin(e*ut),easeInOutSine:e=>-.5*(Math.cos(Me*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Ac(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ac(e)?e:jb(e,.075,.3),easeOutElastic:e=>Ac(e)?e:Nb(e,.075,.3),easeInOutElastic(e){return Ac(e)?e:e<.5?.5*jb(e*2,.1125,.45):.5+.5*Nb(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Va.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Va.easeInBounce(e*2)*.5:Va.easeOutBounce(e*2-1)*.5+.5};function Fx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Cb(e){return Fx(e)?e:new yl(e)}function jf(e){return Fx(e)?e:new yl(e).saturate(.5).darken(.1).hexString()}const B5=["x","y","borderWidth","radius","tension"],z5=["color","borderColor","backgroundColor"];function V5(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:z5},numbers:{type:"number",properties:B5}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function U5(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Eb=new Map;function W5(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Eb.get(n);return s||(s=new Intl.NumberFormat(e,t),Eb.set(n,s)),s}function $x(e,t,n){return W5(t,n).format(e)}const uE={values(e){return rt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=H5(e,n)}const o=Pp(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),$x(e,s,c)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Pp(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?uE.numeric.call(this,e,t,n):""}};function H5(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var dE={formatters:uE};function q5(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const mi=Object.create(null),Ap=Object.create(null);function Ua(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function Nf(e,t,n){return typeof t=="string"?vl(Ua(e,t),n):vl(Ua(e,""),t)}class G5{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>jf(r.backgroundColor),this.hoverBorderColor=(s,r)=>jf(r.borderColor),this.hoverColor=(s,r)=>jf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Nf(this,t,n)}get(t){return Ua(this,t)}describe(t,n){return Nf(Ap,t,n)}override(t,n){return Nf(mi,t,n)}route(t,n,s,r){const i=Ua(this,t),o=Ua(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=o[r];return Se(c)?Object.assign({},u,c):ye(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var et=new G5({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[V5,U5,q5]);function Y5(e){return!e||_e(e.size)||_e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function kb(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Rr(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function _b(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Ip(e,t,n,s){hE(e,t,n,s,null)}function hE(e,t,n,s,r){let i,o,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,x=t.radius;let b=(p||0)*C5;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(x)||x<=0)){switch(e.beginPath(),m){default:r?e.ellipse(n,s,r/2,x,0,0,Ge):e.arc(n,s,x,0,Ge),e.closePath();break;case"triangle":d=r?r/2:x,e.moveTo(n+Math.sin(b)*d,s-Math.cos(b)*x),b+=vb,e.lineTo(n+Math.sin(b)*d,s-Math.cos(b)*x),b+=vb,e.lineTo(n+Math.sin(b)*d,s-Math.cos(b)*x),e.closePath();break;case"rectRounded":u=x*.516,c=x-u,o=Math.cos(b+Ir)*c,h=Math.cos(b+Ir)*(r?r/2-u:c),l=Math.sin(b+Ir)*c,f=Math.sin(b+Ir)*(r?r/2-u:c),e.arc(n-h,s-l,u,b-Me,b-ut),e.arc(n+f,s-o,u,b-ut,b),e.arc(n+h,s+l,u,b,b+ut),e.arc(n-f,s+o,u,b+ut,b+Me),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*x,d=r?r/2:c,e.rect(n-d,s-c,2*d,2*c);break}b+=Ir;case"rectRot":h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+f,s-o),e.lineTo(n+h,s+l),e.lineTo(n-f,s+o),e.closePath();break;case"crossRot":b+=Ir;case"cross":h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"star":h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o),b+=Ir,h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-o),e.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(b)*x,l=Math.sin(b)*x,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(r?r/2:x),s+Math.sin(b)*x);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function jl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function dh(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function hh(e){e.restore()}function Q5(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function K5(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function X5(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function J5(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,d),e.lineTo(l,d),e.stroke()}}function Z5(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Nl(e,t,n,s,r,i={}){const o=rt(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,X5(e,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&Z5(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),_e(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,s,i.maxWidth)),e.fillText(u,n,s,i.maxWidth),J5(e,n,s,u,i),s+=Number(r.lineHeight);e.restore()}function dd(e,t){const{x:n,y:s,w:r,h:i,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Me,Me,!0),e.lineTo(n,s+i-o.bottomLeft),e.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Me,ut,!0),e.lineTo(n+r-o.bottomRight,s+i),e.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,ut,0,!0),e.lineTo(n+r,s+o.topRight),e.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-ut,!0),e.lineTo(n+o.topLeft,s)}const e4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,t4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function n4(e,t){const n=(""+e).match(e4);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const s4=e=>+e||0;function Bx(e,t){const n={},s=Se(t),r=s?Object.keys(t):t,i=Se(e)?s?o=>ye(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)n[o]=s4(i(o));return n}function fE(e){return Bx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function eo(e){return Bx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function kn(e){const t=fE(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Dt(e,t){e=e||{},t=t||et.font;let n=ye(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=ye(e.style,t.style);s&&!(""+s).match(t4)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:ye(e.family,t.family),lineHeight:n4(ye(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:ye(e.weight,t.weight),string:""};return r.string=Y5(r),r}function Ic(e,t,n,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function r4(e,t,n){const{min:s,max:r}=e,i=sE(t,(r-s)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function wi(e,t){return Object.assign(Object.create(e),t)}function zx(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=xE("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>zx([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return pE(l,c,()=>h4(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return Tb(l).includes(c)},ownKeys(l){return Tb(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function po(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:mE(e,s),setContext:i=>po(e,i,n,s),override:i=>po(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return pE(i,o,()=>o4(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function mE(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:jr(n)?n:()=>n,isIndexable:jr(s)?s:()=>s}}const i4=(e,t)=>e?e+Rx(t):t,Vx=(e,t)=>Se(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function pE(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function o4(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return jr(l)&&o.isScriptable(t)&&(l=a4(t,l,e,n)),rt(l)&&l.length&&(l=l4(t,l,e,o.isIndexable)),Vx(t,l)&&(l=po(l,r,i&&i[t],o)),l}function a4(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),Vx(e,c)&&(c=Ux(r._scopes,r,e,c)),c}function l4(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(Se(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Ux(u,r,e,d);t.push(po(h,i,o&&o[e],l))}}return t}function gE(e,t,n){return jr(e)?e(t,n):e}const c4=(e,t)=>e===!0?t:typeof e=="string"?fi(t,e):void 0;function u4(e,t,n,s,r){for(const i of t){const o=c4(n,i);if(o){e.add(o);const l=gE(o._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Ux(e,t,n,s){const r=t._rootScopes,i=gE(t._fallback,n,s),o=[...e,...r],l=new Set;l.add(s);let c=Db(l,o,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=Db(l,o,i,c,s),c===null)?!1:zx(Array.from(l),[""],r,i,()=>d4(t,n,s))}function Db(e,t,n,s,r){for(;n;)n=u4(e,t,n,s,r);return n}function d4(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return rt(r)&&Se(n)?n:r||{}}function h4(e,t,n,s){let r;for(const i of t)if(r=xE(i4(i,e),n),typeof r<"u")return Vx(e,r)?Ux(n,s,e,r):r}function xE(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Tb(e){let t=e._keys;return t||(t=e._keys=f4(e._scopes)),t}function f4(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const m4=Number.EPSILON||1e-14,go=(e,t)=>t<e.length&&!e[t].skip&&e[t],yE=e=>e==="x"?"y":"x";function p4(e,t,n,s){const r=e.skip?t:e,i=t,o=n.skip?t:n,l=Mp(i,r),c=Mp(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=s*u,f=s*d;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function g4(e,t,n){const s=e.length;let r,i,o,l,c,u=go(e,0);for(let d=0;d<s-1;++d)if(c=u,u=go(e,d+1),!(!c||!u)){if(za(t[d],0,m4)){n[d]=n[d+1]=0;continue}r=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[d]=r*o*t[d],n[d+1]=i*o*t[d])}}function x4(e,t,n="x"){const s=yE(n),r=e.length;let i,o,l,c=go(e,0);for(let u=0;u<r;++u){if(o=l,l=c,c=go(e,u+1),!l)continue;const d=l[n],h=l[s];o&&(i=(d-o[n])/3,l[`cp1${n}`]=d-i,l[`cp1${s}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${s}`]=h+i*t[u])}}function y4(e,t="x"){const n=yE(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,u=go(e,0);for(o=0;o<s;++o)if(l=c,c=u,u=go(e,o+1),!!c){if(u){const d=u[t]-c[t];r[o]=d!==0?(u[n]-c[n])/d:0}i[o]=l?u?ts(r[o-1])!==ts(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}g4(e,r,i),x4(e,i,t)}function Rc(e,t,n){return Math.max(Math.min(e,n),t)}function v4(e,t){let n,s,r,i,o,l=jl(e[0],t);for(n=0,s=e.length;n<s;++n)o=i,i=l,l=n<s-1&&jl(e[n+1],t),i&&(r=e[n],o&&(r.cp1x=Rc(r.cp1x,t.left,t.right),r.cp1y=Rc(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Rc(r.cp2x,t.left,t.right),r.cp2y=Rc(r.cp2y,t.top,t.bottom)))}function b4(e,t,n,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")y4(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=p4(u,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&v4(e,n)}function Wx(){return typeof window<"u"&&typeof document<"u"}function Hx(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function hd(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const fh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function w4(e,t){return fh(e).getPropertyValue(t)}const S4=["top","right","bottom","left"];function ri(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=S4[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const j4=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function N4(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(j4(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function Wr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=fh(n),i=r.boxSizing==="border-box",o=ri(r,"padding"),l=ri(r,"border","width"),{x:c,y:u,box:d}=N4(e,n),h=o.left+(d&&l.left),f=o.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-h)/m*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function C4(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&Hx(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=fh(i),c=ri(l,"border","width"),u=ri(l,"padding");t=o.width-u.width-c.width,n=o.height-u.height-c.height,s=hd(l.maxWidth,i,"clientWidth"),r=hd(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||ud,maxHeight:r||ud}}const Oc=e=>Math.round(e*10)/10;function E4(e,t,n,s){const r=fh(e),i=ri(r,"margin"),o=hd(r.maxWidth,e,"clientWidth")||ud,l=hd(r.maxHeight,e,"clientHeight")||ud,c=C4(e,t,n);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=ri(r,"border","width"),m=ri(r,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Oc(Math.min(u,o,c.maxWidth)),d=Oc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Oc(u/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=Oc(Math.floor(d*s))),{width:u,height:d}}function Pb(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const k4=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Wx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Mb(e,t){const n=w4(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Hr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function _4(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function D4(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=Hr(e,r,n),l=Hr(r,i,n),c=Hr(i,t,n),u=Hr(o,l,n),d=Hr(l,c,n);return Hr(u,d,n)}const T4=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},P4=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function to(e,t,n){return e?T4(t,n):P4()}function vE(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function bE(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function wE(e){return e==="angle"?{between:Sl,compare:P5,normalize:Zt}:{between:ws,compare:(t,n)=>t-n,normalize:t=>t}}function Ab({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function M4(e,t,n){const{property:s,start:r,end:i}=n,{between:o,normalize:l}=wE(s),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&o(l(t[u%c][s]),r,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function SE(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,o=t.length,{compare:l,between:c,normalize:u}=wE(s),{start:d,end:h,loop:f,style:m}=M4(e,t,n),p=[];let x=!1,b=null,w,y,g;const S=()=>c(r,g,w)&&l(r,g)!==0,j=()=>l(i,w)===0||c(i,g,w),k=()=>x||S(),_=()=>!x||j();for(let E=d,N=d;E<=h;++E)y=t[E%o],!y.skip&&(w=u(y[s]),w!==g&&(x=c(w,r,i),b===null&&k()&&(b=l(w,r)===0?E:N),b!==null&&_()&&(p.push(Ab({start:b,end:E,loop:f,count:o,style:m})),b=null),N=E,g=w));return b!==null&&p.push(Ab({start:b,end:h,loop:f,count:o,style:m})),p}function jE(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=SE(s[r],e.points,t);i.length&&n.push(...i)}return n}function A4(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function I4(e,t,n,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=u.stop?c:null):(o=c,l.skip&&(t=c)),l=u}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function R4(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=A4(n,r,i,s);if(s===!0)return Ib(e,[{start:o,end:l,loop:i}],n,t);const c=l<o?l+r:l,u=!!e._fullLoop&&o===0&&l===r-1;return Ib(e,I4(n,o,c,u),n,t)}function Ib(e,t,n,s){return!s||!s.setContext||!n?t:O4(e,t,n,s)}function O4(e,t,n,s){const r=e._chart.getContext(),i=Rb(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,x,b,w){const y=l?-1:1;if(p!==x){for(p+=c;n[p%c].skip;)p-=y;for(;n[x%c].skip;)x+=y;p%c!==x%c&&(u.push({start:p%c,end:x%c,loop:b,style:w}),d=w,h=x%c)}}for(const p of t){h=l?h:p.start;let x=n[h%c],b;for(f=h+1;f<=p.end;f++){const w=n[f%c];b=Rb(s.setContext(wi(r,{type:"segment",p0:x,p1:w,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),L4(b,d)&&m(h,f-1,p.loop,d),x=w,d=b}h<f-1&&m(h,f-1,p.loop,d)}return u}function Rb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function L4(e,t){if(!t)return!1;const n=[],s=function(r,i){return Fx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Lc(e,t,n){return e.options.clip?e[n]:t[n]}function F4(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Lc(n,t,"left"),right:Lc(n,t,"right"),top:Lc(s,t,"top"),bottom:Lc(s,t,"bottom")}:t}function NE(e,t){const n=t._clip;if(n.disabled)return!1;const s=F4(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class $4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ds=new $4;const Ob="transparent",B4={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=Cb(e||Ob),r=s.valid&&Cb(t||Ob);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class z4{constructor(t,n,s,r){const i=n[s];r=Ic([t.to,r,i,t.from]);const o=Ic([t.from,i,r]);this._active=!0,this._fn=t.fn||B4[t.type||typeof o],this._easing=Va[t.easing]||Va.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Ic([t.to,n,r,t.from]),this._from=Ic([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class CE{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Se(t))return;const n=Object.keys(et.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Se(i))return;const o={};for(const l of n)o[l]=i[l];(rt(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,n){const s=n.options,r=U4(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&V4(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new z4(f,t,u,d),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return ds.add(this._chart,s),!0}}function V4(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function U4(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Lb(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function W4(e,t,n){if(n===!1)return!1;const s=Lb(e,n),r=Lb(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function H4(e){let t,n,s,r;return Se(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function EE(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Fb(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,u;if(t===null)return;let d=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===n){if(d=!0,s.all)continue;break}u=e.values[c],Mt(u)&&(i||t===0||ts(t)===ts(u))&&(t+=u)}return!d&&!s.all?0:t}function q4(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[r]:d,[i]:e[d]};return l}function Cf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function G4(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Y4(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Q4(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function $b(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function Bb(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,u=o.axis,d=G4(i,o,s),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:x,[u]:b}=p,w=p._stacks||(p._stacks={});f=w[u]=Q4(r,d,x),f[l]=b,f._top=$b(f,o,!0,s.type),f._bottom=$b(f,o,!1,s.type);const y=f._visualValues||(f._visualValues={});y[l]=b}}function Ef(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function K4(e,t){return wi(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function X4(e,t,n){return wi(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Xo(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const kf=e=>e==="reset"||e==="none",zb=(e,t)=>t?e:Object.assign({},e),J4=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:EE(n,!0),values:null};class ii{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Cf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=ye(s.xAxisID,Ef(t,"x")),o=n.yAxisID=ye(s.yAxisID,Ef(t,"y")),l=n.rAxisID=ye(s.rAxisID,Ef(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,i,o,l),d=n.vAxisID=r(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Sb(this._data,this),t._stacked&&Xo(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Se(n)){const r=this._cachedMeta;this._data=q4(n,r)}else if(s!==n){if(s){Sb(s,this);const r=this._cachedMeta;Xo(r),r._parsed=[]}n&&Object.isExtensible(n)&&R5(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Cf(n.vScale,n),n.stack!==s.stack&&(r=!0,Xo(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(Bb(this,n._parsed),n._stacked=Cf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{rt(r[t])?f=this.parseArrayData(s,r,t,n):Se(r[t])?f=this.parseObjectData(s,r,t,n):f=this.parsePrimitiveData(s,r,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);s._sorted=c}o&&Bb(this,f)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+s,h[f]={[l]:d||i.parse(u[p],p),[c]:o.parse(n[p],p)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,m;for(d=0,h=r;d<h;++d)f=d+s,m=n[f],u[d]={x:i.parse(fi(m,l),f),y:o.parse(fi(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:EE(r,!0),values:n._stacks[t.axis]._visualValues};return Fb(l,o,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,o=Fb(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=J4(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=Y4(l);let f,m;function p(){m=r[f];const x=m[l.axis];return!Mt(m[t.axis])||d>x||h<x}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][t.axis],Mt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=H4(ye(this.options.clip,W4(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?o.push(h):h.draw(t,i))}for(d=0;d<o.length;++d)o[d].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=X4(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=K4(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&bl(s);if(l)return zb(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(et.elements[t]),p=()=>this.getContext(s,r,n),x=u.resolveNamedOptions(f,m,p,h);return x.$shared&&(x.$shared=c,i[o]=Object.freeze(zb(x,c))),x}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,s,n))}const u=new CE(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||kf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(t,n,s,r){kf(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!kf(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,o=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&Xo(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ie(ii,"defaults",{}),ie(ii,"datasetElementType",null),ie(ii,"dataElementType",null);function Z4(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=aE(s.sort((r,i)=>r-i))}return e._cache.$bar}function e3(e){const t=e.iScale,n=Z4(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(bl(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function t3(e,t,n,s){const r=n.barThickness;let i,o;return _e(r)?(i=t.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function n3(e,t,n,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:n.barPercentage,start:u}}function s3(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:o,max:l}}function kE(e,t,n,s){return rt(e)?s3(e,t,n,s):t[n.axis]=n.parse(e,s),t}function Vb(e,t,n,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=t[u],h={},h[r.axis]=l||r.parse(o[u],u),c.push(kE(f,h,i,u));return c}function _f(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function r3(e,t,n){return e!==0?ts(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function i3(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function o3(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:d}=i3(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[Ub(d,o,l,c)]=!0,r=u)),i[Ub(r,o,l,c)]=!0,e.borderSkipped=i}function Ub(e,t,n,s){return s?(e=a3(e,t,n),e=Wb(e,n,t)):e=Wb(e,t,n),e}function a3(e,t,n){return e===t?n:e===n?t:e}function Wb(e,t,n){return e==="start"?t:e==="end"?n:e}function l3(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class yu extends ii{parsePrimitiveData(t,n,s,r){return Vb(t,n,s,r)}parseArrayData(t,n,s,r){return Vb(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=o.axis==="x"?l:c,h=[];let f,m,p,x;for(f=s,m=s+r;f<m;++f)x=n[f],p={},p[i.axis]=i.parse(fi(x,u),f),h.push(kE(fi(x,d),p,o,f));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),o=i._custom,l=_f(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let m=n;m<n+s;m++){const p=this.getParsed(m),x=i||_e(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,d),w=(p._stacks||{})[l.axis],y={horizontal:u,base:x.base,enableBorderRadius:!w||_f(p._custom)||o===w._top||o===w._bottom,x:u?x.head:b.center,y:u?b.center:x.head,height:u?b.size:Math.abs(x.size),width:u?Math.abs(x.size):b.size};f&&(y.options=h||this.resolveDataElementOptions(m,t[m].active?"active":r));const g=y.options||t[m].options;o3(y,g,w,o),l3(y,g,d.ratio),this.updateElement(t[m],m,y,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{const h=d._parsed.find(m=>m[s.axis]===c),f=h&&h[d.vScale.axis];if(_e(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[ye(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||e3(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=_f(u);let h=c[n.axis],f=0,m=s?this.applyStack(n,c,s):h,p,x;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&ts(h)!==ts(u.barEnd)&&(f=0),f+=h);const b=!_e(i)&&!d?i:f;let w=n.getPixelForValue(b);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=w,x=p-w,Math.abs(x)<o){x=r3(x,n,l)*o,h===l&&(w-=x/2);const y=n.getPixelForDecimal(0),g=n.getPixelForDecimal(1),S=Math.min(y,g),j=Math.max(y,g);w=Math.max(Math.min(w,j),S),p=w+x,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(w))}if(w===n.getPixelForValue(l)){const y=ts(x)*n.getLineWidthForValue(l)/2;w+=y,x-=y}return{size:x,base:w,head:p,center:p+x/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,o=ye(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?n3(t,n,r,d*u):t3(t,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ye(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}ie(yu,"id","bar"),ie(yu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ie(yu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function c3(e,t,n){let s=1,r=1,i=0,o=0;if(t<Ge){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(g,S,j)=>Sl(g,l,c,!0)?1:Math.max(S,S*n,j,j*n),p=(g,S,j)=>Sl(g,l,c,!0)?-1:Math.min(S,S*n,j,j*n),x=m(0,u,h),b=m(ut,d,f),w=p(Me,u,h),y=p(Me+ut,d,f);s=(x-w)/2,r=(b-y)/2,i=-(x+w)/2,o=-(b+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class Sa extends ii{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(Se(s[t])){const{key:c="value"}=this._parsing;i=u=>+fi(s[u],c)}let o,l;for(o=t,l=t+n;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return bs(this.options.rotation-90)}_getCircumference(){return bs(this.options.circumference)}_getRotationExtents(){let t=Ge,n=-Ge;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(y5(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:x}=c3(h,d,c),b=(s.width-o)/f,w=(s.height-o)/m,y=Math.max(Math.min(b,w)/2,0),g=sE(this.options.radius,y),S=Math.max(g*c,0),j=(g-S)/this._getVisibleDatasetWeightTotal();this.offsetX=p*g,this.offsetY=x*g,r.total=this.calculateTotal(),this.outerRadius=g-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Ge)}updateElements(t,n,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:x,includeOptions:b}=this._getSharedOptions(n,r);let w=this._getRotation(),y;for(y=0;y<n;++y)w+=this._circumference(y,i);for(y=n;y<n+s;++y){const g=this._circumference(y,i),S=t[y],j={x:d+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+g,circumference:g,outerRadius:p,innerRadius:m};b&&(j.options=x||this.resolveDataElementOptions(y,S.active?"active":r)),w+=g,this.updateElement(S,y,j,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ge*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=$x(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(ye(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ie(Sa,"id","doughnut"),ie(Sa,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ie(Sa,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ie(Sa,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=t.legend.options;return n.labels.map((i,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class vu extends ii{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=F5(n,r,o);this._drawStart=l,this._drawCount=c,$5(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),f=o.axis,m=l.axis,{spanGaps:p,segment:x}=this.options,b=wl(p)?p:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||r==="none",y=n+s,g=t.length;let S=n>0&&this.getParsed(n-1);for(let j=0;j<g;++j){const k=t[j],_=w?k:{};if(j<n||j>=y){_.skip=!0;continue}const E=this.getParsed(j),N=_e(E[m]),D=_[f]=o.getPixelForValue(E[f],j),M=_[m]=i||N?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[m],j);_.skip=isNaN(D)||isNaN(M)||N,_.stop=j>0&&Math.abs(E[f]-S[f])>b,x&&(_.parsed=E,_.raw=u.data[j]),h&&(_.options=d||this.resolveDataElementOptions(j,k.active?"active":r)),w||this.updateElement(k,j,_,r),S=E}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ie(vu,"id","line"),ie(vu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ie(vu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Or(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qx{constructor(t){ie(this,"options");this.options=t||{}}static override(t){Object.assign(qx.prototype,t)}init(){}formats(){return Or()}parse(){return Or()}format(){return Or()}add(){return Or()}diff(){return Or()}startOf(){return Or()}endOf(){return Or()}}var u3={_date:qx};function d3(e,t,n,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const u=l._reversePixels?A5:Zr;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(x=>!_e(x[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(x=>!_e(x[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function Yl(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=d3(i[l],t,o,r);for(let m=h;m<=f;++m){const p=d[m];p.skip||s(p,u,m)}}}function h3(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Df(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||Yl(e,n,t,function(l,c,u){!r&&!jl(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function f3(e,t,n,s){let r=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:h}=iE(o,{x:t.x,y:t.y});Sl(h,u,d)&&r.push({element:o,datasetIndex:l,index:c})}return Yl(e,n,t,i),r}function m3(e,t,n,s,r,i){let o=[];const l=h3(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,r);if(s&&!m)return;const p=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(p))&&!m)return;const b=l(t,p);b<c?(o=[{element:d,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:d,datasetIndex:h,index:f})}return Yl(e,n,t,u),o}function Tf(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?f3(e,t,n,r):m3(e,t,n,s,r,i)}function Hb(e,t,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return Yl(e,n,t,(c,u,d)=>{c[o]&&c[o](t[n],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var p3={evaluateInteractionItems:Yl,modes:{index(e,t,n,s){const r=Wr(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Df(e,r,i,s,o):Tf(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Df(e,r,i,s,o):Tf(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Df(e,r,i,s,o)},nearest(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Tf(e,r,i,n.intersect,s,o)},x(e,t,n,s){const r=Wr(t,e);return Hb(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=Wr(t,e);return Hb(e,r,"y",n.intersect,s)}}};const _E=["left","top","right","bottom"];function Jo(e,t){return e.filter(n=>n.pos===t)}function qb(e,t){return e.filter(n=>_E.indexOf(n.pos)===-1&&n.box.axis===t)}function Zo(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function g3(e){const t=[];let n,s,r,i,o,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function x3(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!_E.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function y3(e,t){const n=x3(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return n}function v3(e){const t=g3(e),n=Zo(t.filter(u=>u.box.fullSize),!0),s=Zo(Jo(t,"left"),!0),r=Zo(Jo(t,"right")),i=Zo(Jo(t,"top"),!0),o=Zo(Jo(t,"bottom")),l=qb(t,"x"),c=qb(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Jo(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Gb(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function DE(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function b3(e,t,n,s){const{pos:r,box:i}=n,o=e.maxPadding;if(!Se(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&DE(o,i.getPadding());const l=Math.max(0,t.outerWidth-Gb(o,e,"left","right")),c=Math.max(0,t.outerHeight-Gb(o,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function w3(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function S3(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return s(e?["left","right"]:["top","bottom"])}function ja(e,t,n,s){const r=[];let i,o,l,c,u,d;for(i=0,o=e.length,u=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,S3(l.horizontal,t));const{same:h,other:f}=b3(t,n,l,s);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&ja(r,t,n,s)||d}function Fc(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Yb(e,t,n,s){const r=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,u=s[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;bl(u.start)&&(o=u.start),c.fullSize?Fc(c,r.left,o,n.outerWidth-r.right-r.left,f):Fc(c,t.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=t.h*d,f=u.size||c.width;bl(u.start)&&(i=u.start),c.fullSize?Fc(c,i,r.top,f,n.outerHeight-r.bottom-r.top):Fc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=o}var bn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=kn(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(n-r.height,0),l=v3(e.boxes),c=l.vertical,u=l.horizontal;Pe(e.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=c.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},r);DE(f,kn(s));const m=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),p=y3(c.concat(u),h);ja(l.fullSize,m,h,p),ja(c,m,h,p),ja(u,m,h,p)&&ja(c,m,h,p),w3(m),Yb(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Yb(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Pe(l.chartArea,x=>{const b=x.box;Object.assign(b,e.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class TE{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class j3 extends TE{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const bu="$chartjs",N3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Qb=e=>e===null||e==="";function C3(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[bu]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Qb(r)){const i=Mb(e,"width");i!==void 0&&(e.width=i)}if(Qb(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Mb(e,"height");i!==void 0&&(e.height=i)}return e}const PE=k4?{passive:!0}:!1;function E3(e,t,n){e&&e.addEventListener(t,n,PE)}function k3(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,PE)}function _3(e,t){const n=N3[e.type]||e.type,{x:s,y:r}=Wr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function fd(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function D3(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||fd(l.addedNodes,s),o=o&&!fd(l.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function T3(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||fd(l.removedNodes,s),o=o&&!fd(l.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Cl=new Map;let Kb=0;function ME(){const e=window.devicePixelRatio;e!==Kb&&(Kb=e,Cl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function P3(e,t){Cl.size||window.addEventListener("resize",ME),Cl.set(e,t)}function M3(e){Cl.delete(e),Cl.size||window.removeEventListener("resize",ME)}function A3(e,t,n){const s=e.canvas,r=s&&Hx(s);if(!r)return;const i=cE((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),P3(e,i),o}function Pf(e,t,n){n&&n.disconnect(),t==="resize"&&M3(e)}function I3(e,t,n){const s=e.canvas,r=cE(i=>{e.ctx!==null&&n(_3(i,e))},e);return E3(s,t,r),r}class R3 extends TE{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(C3(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[bu])return!1;const s=n[bu].initial;["height","width"].forEach(i=>{const o=s[i];_e(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[bu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),o={attach:D3,detach:T3,resize:A3}[n]||I3;r[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:Pf,detach:Pf,resize:Pf}[n]||k3)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return E4(t,n,s,r)}isAttached(t){const n=t&&Hx(t);return!!(n&&n.isConnected)}}function O3(e){return!Wx()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?j3:R3}var su;let Os=(su=class{constructor(){ie(this,"x");ie(this,"y");ie(this,"active",!1);ie(this,"options");ie(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return wl(this.x)&&wl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},ie(su,"defaults",{}),ie(su,"defaultRoutes"),su);function L3(e,t){const n=e.options.ticks,s=F3(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?B3(t):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>r)return z3(t,u,i,o/r),u;const d=$3(i,t,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for($c(t,u,d,_e(m)?0:l-m,l),h=0,f=o-1;h<f;h++)$c(t,u,d,i[h],i[h+1]);return $c(t,u,d,c,_e(m)?t.length:c+m),u}return $c(t,u,d),u}function F3(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function $3(e,t,n){const s=V3(e),r=t.length/n;if(!s)return Math.max(r,1);const i=E5(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function B3(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function z3(e,t,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=n[r*s])}function $c(e,t,n,s,r){const i=ye(s,0),o=Math.min(ye(r,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function V3(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const U3=e=>e==="left"?"right":e==="right"?"left":e,Xb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Jb=(e,t)=>Math.min(t||e,e);function Zb(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function W3(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(c-i,o-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>o+l)))return c}function H3(e,t){Pe(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ea(e){return e.drawTicks?e.tickLength:0}function ew(e,t){if(!e.display)return 0;const n=Dt(e.font,t),s=kn(e.padding);return(rt(e.text)?e.text.length:1)*n.lineHeight+s.height}function q3(e,t){return wi(e,{scale:t,type:"scale"})}function G3(e,t,n){return wi(e,{tick:n,index:t,type:"tick"})}function Y3(e,t,n){let s=Lx(e);return(n&&t!=="right"||!n&&t==="right")&&(s=U3(s)),s}function Q3(e,t,n,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const x=o-r,b=l-i;if(e.isHorizontal()){if(m=Et(s,i,l),Se(n)){const w=Object.keys(n)[0],y=n[w];p=d[w].getPixelForValue(y)+x-t}else n==="center"?p=(u.bottom+u.top)/2+x-t:p=Xb(e,n,t);f=l-i}else{if(Se(n)){const w=Object.keys(n)[0],y=n[w];m=d[w].getPixelForValue(y)-b+t}else n==="center"?m=(u.left+u.right)/2-b+t:m=Xb(e,n,t);p=Et(s,o,r),h=n==="left"?-ut:ut}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class _o extends Os{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=qn(t,Number.POSITIVE_INFINITY),n=qn(n,Number.NEGATIVE_INFINITY),s=qn(s,Number.POSITIVE_INFINITY),r=qn(r,Number.NEGATIVE_INFINITY),{min:qn(t,s),max:qn(n,r),minDefined:Mt(t),maxDefined:Mt(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:qn(n,qn(s,n)),max:qn(s,qn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$e(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r4(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Zb(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=L3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$e(this.options.afterUpdate,[this])}beforeSetDimensions(){$e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$e(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),$e(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=$e(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){$e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Jb(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,l,c,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=_t(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(t.offset?.5:1)),c=this.maxHeight-ea(t.grid)-n.padding-ew(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=T5(Math.min(Math.asin(_t((d.highest.height+6)/l,-1,1)),Math.asin(_t(c/u,-1,1))-Math.asin(_t(f/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){$e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$e(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=ew(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=ea(i)+c):(t.height=this.maxHeight,t.width=ea(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,p=bs(this.labelRotation),x=Math.cos(p),b=Math.sin(p);if(l){const w=s.mirror?0:b*h.width+x*f.height;t.height=Math.min(this.maxHeight,t.height+w+m)}else{const w=s.mirror?0:x*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+w+m)}this._calculatePadding(u,d,b,x)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=r*t.width,m=s*n.height):(f=s*t.height,m=r*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$e(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)_e(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Zb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/Jb(n,s));let u=0,d=0,h,f,m,p,x,b,w,y,g,S,j;for(h=0;h<n;h+=c){if(p=t[h].label,x=this._resolveTickFontOptions(h),r.font=b=x.string,w=i[b]=i[b]||{data:{},gc:[]},y=x.lineHeight,g=S=0,!_e(p)&&!rt(p))g=kb(r,w.data,w.gc,g,p),S=y;else if(rt(p))for(f=0,m=p.length;f<m;++f)j=p[f],!_e(j)&&!rt(j)&&(g=kb(r,w.data,w.gc,g,j),S+=y);o.push(g),l.push(S),u=Math.max(g,u),d=Math.max(S,d)}H3(i,n);const k=o.indexOf(u),_=l.indexOf(d),E=N=>({width:o[N]||0,height:l[N]||0});return{first:E(0),last:E(n-1),widest:E(k),highest:E(_),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return M5(this._alignToPixels?Rr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=G3(this.getContext(),t,s))}return this.$context||(this.$context=q3(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=bs(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=ea(i),m=[],p=l.setContext(this.getContext()),x=p.display?p.width:0,b=x/2,w=function(A){return Rr(s,A,x)};let y,g,S,j,k,_,E,N,D,M,L,z;if(o==="top")y=w(this.bottom),_=this.bottom-f,N=y-b,M=w(t.top)+b,z=t.bottom;else if(o==="bottom")y=w(this.top),M=t.top,z=w(t.bottom)-b,_=y+b,N=this.top+f;else if(o==="left")y=w(this.right),k=this.right-f,E=y-b,D=w(t.left)+b,L=t.right;else if(o==="right")y=w(this.left),D=t.left,L=w(t.right)-b,k=y+b,E=this.left+f;else if(n==="x"){if(o==="center")y=w((t.top+t.bottom)/2+.5);else if(Se(o)){const A=Object.keys(o)[0],R=o[A];y=w(this.chart.scales[A].getPixelForValue(R))}M=t.top,z=t.bottom,_=y+b,N=_+f}else if(n==="y"){if(o==="center")y=w((t.left+t.right)/2);else if(Se(o)){const A=Object.keys(o)[0],R=o[A];y=w(this.chart.scales[A].getPixelForValue(R))}k=y-b,E=k-f,D=t.left,L=t.right}const H=ye(r.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/H));for(g=0;g<h;g+=B){const A=this.getContext(g),R=i.setContext(A),T=l.setContext(A),I=R.lineWidth,O=R.color,V=T.dash||[],Y=T.dashOffset,ce=R.tickWidth,ne=R.tickColor,ee=R.tickBorderDash||[],W=R.tickBorderDashOffset;S=W3(this,g,c),S!==void 0&&(j=Rr(s,S,I),u?k=E=D=L=j:_=N=M=z=j,m.push({tx1:k,ty1:_,tx2:E,ty2:N,x1:D,y1:M,x2:L,y2:z,width:I,color:O,borderDash:V,borderDashOffset:Y,tickWidth:ce,tickColor:ne,tickBorderDash:ee,tickBorderDashOffset:W}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=ea(s.grid),m=f+d,p=h?-d:m,x=-bs(this.labelRotation),b=[];let w,y,g,S,j,k,_,E,N,D,M,L,z="middle";if(r==="top")k=this.bottom-p,_=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+p,_=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);_=B.textAlign,j=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);_=B.textAlign,j=B.x}else if(n==="x"){if(r==="center")k=(t.top+t.bottom)/2+m;else if(Se(r)){const B=Object.keys(r)[0],A=r[B];k=this.chart.scales[B].getPixelForValue(A)+m}_=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")j=(t.left+t.right)/2-m;else if(Se(r)){const B=Object.keys(r)[0],A=r[B];j=this.chart.scales[B].getPixelForValue(A)}_=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?z="top":c==="end"&&(z="bottom"));const H=this._getLabelSizes();for(w=0,y=l.length;w<y;++w){g=l[w],S=g.label;const B=i.setContext(this.getContext(w));E=this.getPixelForTick(w)+i.labelOffset,N=this._resolveTickFontOptions(w),D=N.lineHeight,M=rt(S)?S.length:1;const A=M/2,R=B.color,T=B.textStrokeColor,I=B.textStrokeWidth;let O=_;o?(j=E,_==="inner"&&(w===y-1?O=this.options.reverse?"left":"right":w===0?O=this.options.reverse?"right":"left":O="center"),r==="top"?u==="near"||x!==0?L=-M*D+D/2:u==="center"?L=-H.highest.height/2-A*D+D:L=-H.highest.height+D/2:u==="near"||x!==0?L=D/2:u==="center"?L=H.highest.height/2-A*D:L=H.highest.height-M*D,h&&(L*=-1),x!==0&&!B.showLabelBackdrop&&(j+=D/2*Math.sin(x))):(k=E,L=(1-M)*D/2);let V;if(B.showLabelBackdrop){const Y=kn(B.backdropPadding),ce=H.heights[w],ne=H.widths[w];let ee=L-Y.top,W=0-Y.left;switch(z){case"middle":ee-=ce/2;break;case"bottom":ee-=ce;break}switch(_){case"center":W-=ne/2;break;case"right":W-=ne;break;case"inner":w===y-1?W-=ne:w>0&&(W-=ne/2);break}V={left:W,top:ee,width:ne+Y.width,height:ce+Y.height,color:B.backdropColor}}b.push({label:S,font:N,textOffset:L,options:{rotation:x,color:R,strokeColor:T,strokeWidth:I,textAlign:O,textBaseline:z,translation:[j,k],backdrop:V}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-bs(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Rr(t,this.left,o)-o/2,d=Rr(t,this.right,l)+l/2,h=f=c):(h=Rr(t,this.top,o)-o/2,f=Rr(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&dh(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Nl(s,u,0,d,c,l)}r&&hh(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Dt(s.font),o=kn(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Se(n)?(c+=o.bottom,rt(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=Q3(this,c,n,l);Nl(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:Y3(l,n,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=ye(t.grid&&t.grid.z,-1),r=ye(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==_o.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Dt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Bc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;J3(n)&&(s=this.register(n));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,K3(t,o,s),this.override&&et.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in et[r]&&(delete et[r][s],this.override&&delete mi[s])}}function K3(e,t,n){const s=vl(Object.create(null),[n?et.get(n):{},et.get(t),e.defaults]);et.set(t,s),e.defaultRoutes&&X3(t,e.defaultRoutes),e.descriptors&&et.describe(t,e.descriptors)}function X3(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");et.route(i,r,c,l)})}function J3(e){return"id"in e&&"defaults"in e}class Z3{constructor(){this.controllers=new Bc(ii,"datasets",!0),this.elements=new Bc(Os,"elements"),this.plugins=new Bc(Object,"plugins"),this.scales=new Bc(_o,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Pe(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,s){const r=Rx(t);$e(s["before"+r],[],s),n[t](s),$e(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var Qn=new Z3;class eF{constructor(){this._init=[]}notify(t,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[n,r,i.options];if($e(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=ye(s.options&&s.options.plugins,{}),i=tF(s);return r===!1&&!n?[]:sF(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function tF(e){const t={},n=[],s=Object.keys(Qn.plugins.items);for(let i=0;i<s.length;i++)n.push(Qn.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function nF(e,t){return!t&&e===!1?null:e===!0?{}:e}function sF(e,{plugins:t,localIds:n},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,u=nF(s[c],r);u!==null&&i.push({plugin:l,options:rF(e.config,{plugin:l,local:n[c]},u,o)})}return i}function rF(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rp(e,t){const n=et.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function iF(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function oF(e,t){return e===t?"_index_":"_value_"}function tw(e){if(e==="x"||e==="y"||e==="r")return e}function aF(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Op(e,...t){if(tw(e))return e;for(const n of t){const s=n.axis||aF(n.position)||e.length>1&&tw(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function nw(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function lF(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return nw(e,"x",n[0])||nw(e,"y",n[0])}return{}}function cF(e,t){const n=mi[e.type]||{scales:{}},s=t.scales||{},r=Rp(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!Se(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Op(o,l,lF(o,e),et.scales[l.type]),u=oF(c,r),d=n.scales||{};i[o]=Ba(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Rp(l,t),d=(mi[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=iF(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Ba(i[m],[{axis:f},s[m],d[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Ba(l,[et.scales[l.type],et.scale])}),i}function AE(e){const t=e.options||(e.options={});t.plugins=ye(t.plugins,{}),t.scales=cF(e,t)}function IE(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function uF(e){return e=e||{},e.data=IE(e.data),AE(e),e}const sw=new Map,RE=new Set;function zc(e,t){let n=sw.get(e);return n||(n=t(),sw.set(e,n),RE.add(n)),n}const ta=(e,t,n)=>{const s=fi(t,n);s!==void 0&&e.add(s)};let dF=class{constructor(t){this._config=uF(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=IE(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),AE(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return zc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return zc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return zc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return zc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>ta(c,t,h))),d.forEach(h=>ta(c,r,h)),d.forEach(h=>ta(c,mi[i]||{},h)),d.forEach(h=>ta(c,et,h)),d.forEach(h=>ta(c,Ap,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),RE.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,mi[n]||{},et.datasets[n]||{},{type:n},et,Ap]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=rw(this._resolverCache,t,r);let c=o;if(fF(o,n)){i.$shared=!1,s=jr(s)?s():s;const u=this.createResolver(t,s,l);c=po(o,s,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,s=[""],r){const{resolver:i}=rw(this._resolverCache,t,s);return Se(n)?po(i,n,void 0,r):i}};function rw(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:zx(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const hF=e=>Se(e)&&Object.getOwnPropertyNames(e).some(t=>jr(e[t]));function fF(e,t){const{isScriptable:n,isIndexable:s}=mE(e);for(const r of t){const i=n(r),o=s(r),l=(o||i)&&e[r];if(i&&(jr(l)||hF(l))||o&&rt(l))return!0}return!1}var mF="4.5.0";const pF=["top","bottom","left","right","chartArea"];function iw(e,t){return e==="top"||e==="bottom"||pF.indexOf(e)===-1&&t==="x"}function ow(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function aw(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),$e(n&&n.onComplete,[e],t)}function gF(e){const t=e.chart,n=t.options.animation;$e(n&&n.onProgress,[e],t)}function OE(e){return Wx()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const wu={},lw=e=>{const t=OE(e);return Object.values(wu).filter(n=>n.canvas===t).pop()};function xF(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=o)}}}function yF(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var zs;let Do=(zs=class{static register(...t){Qn.add(...t),cw()}static unregister(...t){Qn.remove(...t),cw()}constructor(t,n){const s=this.config=new dF(n),r=OE(t),i=lw(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||O3(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=x5(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=O5(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],wu[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ds.listen(this,"complete",aw),ds.listen(this,"progress",gF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return _e(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Qn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Pb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _b(this.canvas,this.ctx),this}stop(){return ds.stop(this),this}resize(t,n){ds.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Pb(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),$e(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Pe(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=Op(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Pe(i,o=>{const l=o.options,c=l.id,u=Op(c,l),d=ye(l.type,o.dtype);(l.position===void 0||iw(l.position,u)!==iw(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{const f=Qn.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),Pe(r,(o,l)=>{o||delete s[l]}),Pe(s,o=>{bn.configure(this,o,o.options),bn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(ow("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Rp(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=Qn.getController(l),{datasetElementType:u,dataElementType:d}=et.datasets[l];Object.assign(c,{dataElementType:Qn.getElement(d),datasetElementType:u&&Qn.getElement(u)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Pe(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||Pe(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ow("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Pe(this.scales,t=>{bn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!yb(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;xF(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!yb(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;bn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Pe(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,jr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ds.has(this)?this.attached&&!ds.running(this)&&ds.start(this):(this.draw(),aw({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=NE(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&dh(n,r),t.controller.draw(),r&&hh(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return jl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=p3.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);bl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ds.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),_b(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete wu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Pe(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Pe(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Pe(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!ld(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(n,t),l=s?t:i(t,n);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,o=n,l=this._getActiveElements(t,r,s,o),c=j5(t),u=yF(t,this._lastEvent,s,c);s&&(this._lastEvent=null,$e(i.onHover,[t,l,this],this),c&&$e(i.onClick,[t,l,this],this));const d=!ld(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},ie(zs,"defaults",et),ie(zs,"instances",wu),ie(zs,"overrides",mi),ie(zs,"registry",Qn),ie(zs,"version",mF),ie(zs,"getChart",lw),zs);function cw(){return Pe(Do.instances,e=>e._plugins.invalidate())}function vF(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/o,Zt(s-n));if(e.beginPath(),e.arc(r,i,o-u/2,s+h/2,n-h/2),l>0){const f=Math.min(u/l,Zt(s-n));e.arc(r,i,l+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,o*Zt(s-n));if(d==="round")e.arc(r,i,f,n-Me/2,s+Me/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Me/2)+r,x=-m*Math.sin(n+Me/2)+i,b=m*Math.cos(s+Me/2)+r,w=m*Math.sin(s+Me/2)+i;e.lineTo(p,x),e.lineTo(b,w)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function bF(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,o,l,s-u,n+u),c>r?(u=r/c,e.arc(i,o,c,n+u,s-u,!0)):e.arc(i,o,r,n+ut,s-ut),e.closePath(),e.clip()}function wF(e){return Bx(e,["outerStart","outerEnd","innerStart","innerEnd"])}function SF(e,t,n,s){const r=wF(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,s*t/2),l=c=>{const u=(n-Math.min(i,c))*s/2;return _t(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:_t(r.innerStart,0,o),innerEnd:_t(r.innerEnd,0,o)}}function Ei(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function md(e,t,n,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let m=0;const p=r-c;if(s){const B=d>0?d-s:0,A=h>0?h-s:0,R=(B+A)/2,T=R!==0?p*R/(R+s):p;m=(p-T)/2}const x=Math.max(.001,p*h-n/Me)/h,b=(p-x)/2,w=c+b+m,y=r-b-m,{outerStart:g,outerEnd:S,innerStart:j,innerEnd:k}=SF(t,f,h,y-w),_=h-g,E=h-S,N=w+g/_,D=y-S/E,M=f+j,L=f+k,z=w+j/M,H=y-k/L;if(e.beginPath(),i){const B=(N+D)/2;if(e.arc(o,l,h,N,B),e.arc(o,l,h,B,D),S>0){const I=Ei(E,D,o,l);e.arc(I.x,I.y,S,D,y+ut)}const A=Ei(L,y,o,l);if(e.lineTo(A.x,A.y),k>0){const I=Ei(L,H,o,l);e.arc(I.x,I.y,k,y+ut,H+Math.PI)}const R=(y-k/f+(w+j/f))/2;if(e.arc(o,l,f,y-k/f,R,!0),e.arc(o,l,f,R,w+j/f,!0),j>0){const I=Ei(M,z,o,l);e.arc(I.x,I.y,j,z+Math.PI,w-ut)}const T=Ei(_,w,o,l);if(e.lineTo(T.x,T.y),g>0){const I=Ei(_,N,o,l);e.arc(I.x,I.y,g,w-ut,N)}}else{e.moveTo(o,l);const B=Math.cos(N)*h+o,A=Math.sin(N)*h+l;e.lineTo(B,A);const R=Math.cos(D)*h+o,T=Math.sin(D)*h+l;e.lineTo(R,T)}e.closePath()}function jF(e,t,n,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){md(e,t,n,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=o+(l%Ge||Ge))}return md(e,t,n,s,c,r),e.fill(),c}function NF(e,t,n,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let x=t.endAngle;if(i){md(e,t,n,s,x,r);for(let b=0;b<i;++b)e.stroke();isNaN(l)||(x=o+(l%Ge||Ge))}p&&bF(e,t,x),c.selfJoin&&x-o>=Me&&m===0&&d!=="miter"&&vF(e,t,x),i||(md(e,t,n,s,x,r),e.stroke())}class Na extends Os{constructor(n){super();ie(this,"circumference");ie(this,"endAngle");ie(this,"fullCircles");ie(this,"innerRadius");ie(this,"outerRadius");ie(this,"pixelMargin");ie(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:l}=iE(i,{x:n,y:s}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,p=ye(f,u-c),x=Sl(o,c,u)&&c!==u,b=p>=Ge||x,w=ws(l,d+m,h+m);return b&&w}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+o)/2,f=(l+c+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Ge?Math.floor(r/Ge):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Me,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,jF(n,this,d,o,l),NF(n,this,d,o,l),n.restore()}}ie(Na,"id","arc"),ie(Na,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ie(Na,"defaultRoutes",{backgroundColor:"backgroundColor"}),ie(Na,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function LE(e,t,n=t){e.lineCap=ye(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ye(n.borderDash,t.borderDash)),e.lineDashOffset=ye(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ye(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ye(n.borderWidth,t.borderWidth),e.strokeStyle=ye(n.borderColor,t.borderColor)}function CF(e,t,n){e.lineTo(n.x,n.y)}function EF(e){return e.stepped?Q5:e.tension||e.cubicInterpolationMode==="monotone"?K5:CF}function FE(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:o,end:l}=t,c=Math.max(r,o),u=Math.min(i,l),d=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function kF(e,t,n,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:u}=FE(r,n,s),d=EF(i);let{move:h=!0,reverse:f}=s||{},m,p,x;for(m=0;m<=u;++m)p=r[(l+(f?u-m:m))%o],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,x,p,f,i.stepped),x=p);return c&&(p=r[(l+(f?u:0))%o],d(e,x,p,f,i.stepped)),!!c}function _F(e,t,n,s){const r=t.points,{count:i,start:o,ilen:l}=FE(r,n,s),{move:c=!0,reverse:u}=s||{};let d=0,h=0,f,m,p,x,b,w;const y=S=>(o+(u?l-S:S))%i,g=()=>{x!==b&&(e.lineTo(d,b),e.lineTo(d,x),e.lineTo(d,w))};for(c&&(m=r[y(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[y(f)],m.skip)continue;const S=m.x,j=m.y,k=S|0;k===p?(j<x?x=j:j>b&&(b=j),d=(h*d+S)/++h):(g(),e.lineTo(S,j),p=k,h=0,x=b=j),w=j}g()}function Lp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?_F:kF}function DF(e){return e.stepped?_4:e.tension||e.cubicInterpolationMode==="monotone"?D4:Hr}function TF(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),LE(e,t.options),e.stroke(r)}function PF(e,t,n,s){const{segments:r,options:i}=t,o=Lp(t);for(const l of r)LE(e,i,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const MF=typeof Path2D=="function";function AF(e,t,n,s){MF&&!t.options.segment?TF(e,t,n,s):PF(e,t,n,s)}class nr extends Os{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;b4(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=R4(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,o=jE(this,{property:n,start:r,end:r});if(!o.length)return;const l=[],c=DF(s);let u,d;for(u=0,d=o.length;u<d;++u){const{start:h,end:f}=o[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const x=Math.abs((r-m[n])/(p[n]-m[n])),b=c(m,p,x,s.stepped);b[n]=t[n],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,n,s){return Lp(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=Lp(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const l of r)o&=i(t,this,l,{start:n,end:n+s-1});return!!o}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),AF(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ie(nr,"id","line"),ie(nr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ie(nr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ie(nr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function uw(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class Su extends Os{constructor(n){super();ie(this,"parsed");ie(this,"skip");ie(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return uw(this,n,"x",s)}inYRange(n,s){return uw(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!jl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Ip(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ie(Su,"id","point"),ie(Su,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ie(Su,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $E(e,t){const{x:n,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=o/2,l=Math.min(n,r),c=Math.max(n,r),u=s-h,d=s+h):(h=i/2,l=n-h,c=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function sr(e,t,n,s){return e?0:_t(t,n,s)}function IF(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=fE(s);return{t:sr(r.top,i.top,0,n),r:sr(r.right,i.right,0,t),b:sr(r.bottom,i.bottom,0,n),l:sr(r.left,i.left,0,t)}}function RF(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=eo(r),o=Math.min(t,n),l=e.borderSkipped,c=s||Se(r);return{topLeft:sr(!c||l.top||l.left,i.topLeft,0,o),topRight:sr(!c||l.top||l.right,i.topRight,0,o),bottomLeft:sr(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:sr(!c||l.bottom||l.right,i.bottomRight,0,o)}}function OF(e){const t=$E(e),n=t.right-t.left,s=t.bottom-t.top,r=IF(e,n/2,s/2),i=RF(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Mf(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&$E(e,s);return l&&(r||ws(t,l.left,l.right))&&(i||ws(n,l.top,l.bottom))}function LF(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function FF(e,t){e.rect(t.x,t.y,t.w,t.h)}function Af(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class ju extends Os{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=OF(this),l=LF(o.radius)?dd:FF;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,Af(o,n,i)),t.clip(),l(t,Af(i,-n,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,Af(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return Mf(this,t,n,s)}inXRange(t,n){return Mf(this,t,null,n)}inYRange(t,n){return Mf(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ie(ju,"id","bar"),ie(ju,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ie(ju,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $F(e,t,n){const s=e.segments,r=e.points,i=t.points,o=[];for(const l of s){let{start:c,end:u}=l;u=mh(c,u,r);const d=Fp(n,r[c],r[u],l.loop);if(!t.segments){o.push({source:l,target:d,start:r[c],end:r[u]});continue}const h=jE(t,d);for(const f of h){const m=Fp(n,i[f.start],i[f.end],f.loop),p=SE(l,r,m);for(const x of p)o.push({source:x,target:f,start:{[n]:dw(d,m,"start",Math.max)},end:{[n]:dw(d,m,"end",Math.min)}})}}return o}function Fp(e,t,n,s){if(s)return;let r=t[e],i=n[e];return e==="angle"&&(r=Zt(r),i=Zt(i)),{property:e,start:r,end:i}}function BF(e,t){const{x:n=null,y:s=null}=e||{},r=t.points,i=[];return t.segments.forEach(({start:o,end:l})=>{l=mh(o,l,r);const c=r[o],u=r[l];s!==null?(i.push({x:c.x,y:s}),i.push({x:u.x,y:s})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function mh(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function dw(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function BE(e,t){let n=[],s=!1;return rt(e)?(s=!0,n=e):n=BF(e,t),n.length?new nr({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function hw(e){return e&&e.fill!==!1}function zF(e,t,n){let r=e[t].fill;const i=[t];let o;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Mt(r))return r;if(o=e[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function VF(e,t,n){const s=qF(e);if(Se(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return Mt(r)&&Math.floor(r)===r?UF(s[0],t,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function UF(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function WF(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Se(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function HF(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:Se(e)?s=e.value:s=t.getBaseValue(),s}function qF(e){const t=e.options,n=t.fill;let s=ye(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function GF(e){const{scale:t,index:n,line:s}=e,r=[],i=s.segments,o=s.points,l=YF(t,n);l.push(BE({x:null,y:t.bottom},s));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)QF(r,o[d],l)}return new nr({points:r,options:{}})}function YF(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function QF(e,t,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:o,last:l,point:c}=KF(i,t,"x");if(!(!c||o&&l)){if(o)s.unshift(c);else if(e.push(c),!l)break}}e.push(...s)}function KF(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const r=s[n],i=e.segments,o=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=o[d.start][n],f=o[d.end][n];if(ws(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:s}}class zE{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:r,y:i,radius:o}=this;return n=n||{start:0,end:Ge},t.arc(r,i,o,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:r}=this,i=t.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function XF(e){const{chart:t,fill:n,line:s}=e;if(Mt(n))return JF(t,n);if(n==="stack")return GF(e);if(n==="shape")return!0;const r=ZF(e);return r instanceof zE?r:BE(r,s)}function JF(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function ZF(e){return(e.scale||{}).getPointPositionForValue?t$(e):e$(e)}function e$(e){const{scale:t={},fill:n}=e,s=WF(n,t);if(Mt(s)){const r=t.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function t$(e){const{scale:t,fill:n}=e,s=t.options,r=t.getLabels().length,i=s.reverse?t.max:t.min,o=HF(n,t,i),l=[];if(s.grid.circular){const c=t.getPointPositionForValue(0,i);return new zE({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,o));return l}function If(e,t,n){const s=XF(t),{chart:r,index:i,line:o,scale:l,axis:c}=t,u=o.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=r.getDatasetMeta(i),x=NE(r,p);s&&o.points.length&&(dh(e,n),n$(e,{line:o,target:s,above:f,below:m,area:n,scale:l,axis:c,clip:x}),hh(e))}function n$(e,t){const{line:n,target:s,above:r,below:i,area:o,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==r&&(u==="x"?(fw(e,s,o.top),Rf(e,{line:n,target:s,color:r,scale:l,property:u,clip:c}),e.restore(),e.save(),fw(e,s,o.bottom)):u==="y"&&(mw(e,s,o.left),Rf(e,{line:n,target:s,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),mw(e,s,o.right),d=r)),Rf(e,{line:n,target:s,color:d,scale:l,property:u,clip:c}),e.restore()}function fw(e,t,n){const{segments:s,points:r}=t;let i=!0,o=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[mh(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),o=!!t.pathSegment(e,l,{move:o}),o?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function mw(e,t,n){const{segments:s,points:r}=t;let i=!0,o=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[mh(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),o=!!t.pathSegment(e,l,{move:o}),o?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Rf(e,t){const{line:n,target:s,property:r,color:i,scale:o,clip:l}=t,c=$F(n,s,r);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=s!==!0;e.save(),e.fillStyle=m,s$(e,o,l,p&&Fp(r,h,f)),e.beginPath();const x=!!n.pathSegment(e,u);let b;if(p){x?e.closePath():pw(e,s,f,r);const w=!!s.pathSegment(e,d,{move:x,reverse:!0});b=x&&w,b||pw(e,s,h,r)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function s$(e,t,n,s){const r=t.chart.chartArea,{property:i,start:o,end:l}=s||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=o,u=r.top,d=l,h=r.bottom):(c=r.left,u=o,d=r.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function pw(e,t,n,s){const r=t.interpolate(n,s);r&&e.lineTo(r.x,r.y)}var Gx={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<s;++o)i=e.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof nr&&(c={visible:e.isDatasetVisible(o),index:o,fill:VF(l,o,s),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<s;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=zF(r,o,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),s&&l.fill&&If(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;hw(i)&&If(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!hw(s)||n.drawTime!=="beforeDatasetDraw"||If(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const gw=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},r$=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class xw extends Os{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=$e(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Dt(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=gw(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,x)=>{const b=s+n/2+i.measureText(p.text).width;(x===0||u[u.length-1]+b+2*l>o)&&(h+=d,u[u.length-(x>0?0:1)]=0,m+=d,f++),c[x]={left:0,top:m,row:f,width:b,height:r},u[u.length-1]+=b+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-t;let h=l,f=0,m=0,p=0,x=0;return this.legendItems.forEach((b,w)=>{const{itemWidth:y,itemHeight:g}=i$(s,n,i,b,r);w>0&&m+g+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,x++,f=m=0),c[w]={left:p,top:m,col:x,width:y,height:g},f=Math.max(f,y),m+=g+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=to(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Et(s,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=Et(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+r}else{let l=0,c=Et(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=Et(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;dh(t,this),this._draw(),hh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=et.color,c=to(t.rtl,this.left,this.width),u=Dt(o.font),{padding:d}=o,h=u.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:x,itemHeight:b}=gw(o,h),w=function(k,_,E){if(isNaN(p)||p<=0||isNaN(x)||x<0)return;r.save();const N=ye(E.lineWidth,1);if(r.fillStyle=ye(E.fillStyle,l),r.lineCap=ye(E.lineCap,"butt"),r.lineDashOffset=ye(E.lineDashOffset,0),r.lineJoin=ye(E.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=ye(E.strokeStyle,l),r.setLineDash(ye(E.lineDash,[])),o.usePointStyle){const D={radius:x*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:N},M=c.xPlus(k,p/2),L=_+f;hE(r,D,M,L,o.pointStyleWidth&&p)}else{const D=_+Math.max((h-x)/2,0),M=c.leftForLtr(k,p),L=eo(E.borderRadius);r.beginPath(),Object.values(L).some(z=>z!==0)?dd(r,{x:M,y:D,w:p,h:x,radius:L}):r.rect(M,D,p,x),r.fill(),N!==0&&r.stroke()}r.restore()},y=function(k,_,E){Nl(r,E.text,k,_+b/2,u,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},g=this.isHorizontal(),S=this._computeTitleHeight();g?m={x:Et(i,this.left+d,this.right-s[0]),y:this.top+d+S,line:0}:m={x:this.left+d,y:Et(i,this.top+S+d,this.bottom-n[0].height),line:0},vE(this.ctx,t.textDirection);const j=b+d;this.legendItems.forEach((k,_)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const E=r.measureText(k.text).width,N=c.textAlign(k.textAlign||(k.textAlign=o.textAlign)),D=p+f+E;let M=m.x,L=m.y;c.setWidth(this.width),g?_>0&&M+D+d>this.right&&(L=m.y+=j,m.line++,M=m.x=Et(i,this.left+d,this.right-s[m.line])):_>0&&L+j>this.bottom&&(M=m.x=M+n[m.line].width+d,m.line++,L=m.y=Et(i,this.top+S+d,this.bottom-n[m.line].height));const z=c.x(M);if(w(z,L,k),M=L5(N,M+p+f,g?M+D:this.right,t.rtl),y(c.x(M),L,k),g)m.x+=D+d;else if(typeof k.text!="string"){const H=u.lineHeight;m.y+=VE(k,H)+d}else m.y+=j}),bE(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Dt(n.font),r=kn(n.padding);if(!n.display)return;const i=to(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=s.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=Et(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);d=u+Et(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=Et(l,h,h+f);o.textAlign=i.textAlign(Lx(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Nl(o,n.text,m,d,s)}_computeTitleHeight(){const t=this.options.title,n=Dt(t.font),s=kn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(ws(t,this.left,this.right)&&ws(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],ws(t,r.left,r.left+r.width)&&ws(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!l$(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=r$(r,s);r&&!i&&$e(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&$e(n.onHover,[t,s,this],this)}else s&&$e(n.onClick,[t,s,this],this)}}function i$(e,t,n,s,r){const i=o$(s,e,t,n),o=a$(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function o$(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+s.measureText(r).width}function a$(e,t,n){let s=e;return typeof t.text!="string"&&(s=VE(t,n)),s}function VE(e,t){const n=e.text?e.text.length:0;return t*n}function l$(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Yx={id:"legend",_element:xw,start(e,t,n){const s=e.legend=new xw({ctx:e.ctx,options:n,chart:e});bn.configure(e,s,n),bn.addBox(e,s)},stop(e){bn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;bn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=kn(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class UE extends Os{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=rt(s.text)?s.text.length:1;this._padding=kn(s.padding);const i=r*Dt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,u,d,h;return this.isHorizontal()?(d=Et(l,s,i),h=n+t,u=i-s):(o.position==="left"?(d=s+t,h=Et(l,r,n),c=Me*-.5):(d=i-t,h=Et(l,n,r),c=Me*.5),u=r-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Dt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Nl(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:Lx(n.align),textBaseline:"middle",translation:[o,l]})}}function c$(e,t){const n=new UE({ctx:e.ctx,options:t,chart:e});bn.configure(e,n,t),bn.addBox(e,n),e.titleBlock=n}var WE={id:"title",_element:UE,start(e,t,n){c$(e,n)},stop(e){const t=e.titleBlock;bn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;bn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ca={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Mp(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function Gn(e,t){return t&&(rt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function hs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function u$(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function yw(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Dt(t.bodyFont),u=Dt(t.titleFont),d=Dt(t.footerFont),h=i.length,f=r.length,m=s.length,p=kn(t.padding);let x=p.height,b=0,w=s.reduce((S,j)=>S+j.before.length+j.lines.length+j.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,h&&(x+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),w){const S=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=m*S+(w-m)*c.lineHeight+(w-1)*t.bodySpacing}f&&(x+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let y=0;const g=function(S){b=Math.max(b,n.measureText(S).width+y)};return n.save(),n.font=u.string,Pe(e.title,g),n.font=c.string,Pe(e.beforeBody.concat(e.afterBody),g),y=t.displayColors?o+2+t.boxPadding:0,Pe(s,S=>{Pe(S.before,g),Pe(S.lines,g),Pe(S.after,g)}),y=0,n.font=d.string,Pe(e.footer,g),n.restore(),b+=p.width,{width:b,height:x}}function d$(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function h$(e,t,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function f$(e,t,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),h$(u,e,t,n)&&(u="center"),u}function vw(e,t,n){const s=n.yAlign||t.yAlign||d$(e,n);return{xAlign:n.xAlign||t.xAlign||f$(e,t,n,s),yAlign:s}}function m$(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function p$(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function bw(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=eo(o);let p=m$(t,l);const x=p$(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:_t(p,0,s.width-t.width),y:_t(x,0,s.height-t.height)}}function Vc(e,t,n){const s=kn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function ww(e){return Gn([],hs(e))}function g$(e,t,n){return wi(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Sw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const HE={beforeTitle:ls,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ls,beforeBody:ls,beforeLabel:ls,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return _e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ls,afterBody:ls,beforeFooter:ls,footer:ls,afterFooter:ls};function Bt(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?HE[t].call(n,s):r}class $p extends Os{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new CE(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=g$(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=Bt(s,"beforeTitle",this,t),i=Bt(s,"title",this,t),o=Bt(s,"afterTitle",this,t);let l=[];return l=Gn(l,hs(r)),l=Gn(l,hs(i)),l=Gn(l,hs(o)),l}getBeforeBody(t,n){return ww(Bt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Pe(t,i=>{const o={before:[],lines:[],after:[]},l=Sw(s,i);Gn(o.before,hs(Bt(l,"beforeLabel",this,i))),Gn(o.lines,Bt(l,"label",this,i)),Gn(o.after,hs(Bt(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,n){return ww(Bt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=Bt(s,"beforeFooter",this,t),i=Bt(s,"footer",this,t),o=Bt(s,"afterFooter",this,t);let l=[];return l=Gn(l,hs(r)),l=Gn(l,hs(i)),l=Gn(l,hs(o)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(u$(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,s))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,s))),Pe(l,d=>{const h=Sw(t.callbacks,d);r.push(Bt(h,"labelColor",this,d)),i.push(Bt(h,"labelPointStyle",this,d)),o.push(Bt(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Ca[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=yw(this,s),u=Object.assign({},l,c),d=vw(this.chart,s,u),h=bw(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=eo(l),{x:f,y:m}=t,{width:p,height:x}=n;let b,w,y,g,S,j;return i==="center"?(S=m+x/2,r==="left"?(b=f,w=b-o,g=S+o,j=S-o):(b=f+p,w=b+o,g=S-o,j=S+o),y=b):(r==="left"?w=f+Math.max(c,d)+o:r==="right"?w=f+p-Math.max(u,h)-o:w=this.caretX,i==="top"?(g=m,S=g-o,b=w-o,y=w+o):(g=m+x,S=g+o,b=w+o,y=w-o),j=g),{x1:b,x2:w,x3:y,y1:g,y2:S,y3:j}}drawTitle(t,n,s){const r=this.title,i=r.length;let o,l,c;if(i){const u=to(s.rtl,this.x,this.width);for(t.x=Vc(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=Dt(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(r[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=Dt(i.bodyFont),h=Vc(this,"left",i),f=r.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const x={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,u)+u/2,w=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Ip(t,x,b,w),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ip(t,x,b,w)}else{t.lineWidth=Se(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,u),b=r.leftForLtr(r.xPlus(f,1),u-2),w=eo(o.borderRadius);Object.values(w).some(y=>y!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,dd(t,{x,y:p,w:u,h:c,radius:w}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),dd(t,{x:b,y:p+1,w:u-2,h:c-2,radius:w}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(x,p,u,c),t.strokeRect(x,p,u,c),t.fillStyle=o.backgroundColor,t.fillRect(b,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=Dt(s.bodyFont);let f=h.lineHeight,m=0;const p=to(s.rtl,this.x,this.width),x=function(E){n.fillText(E,p.x(t.x+m),t.y+f/2),t.y+=f+i},b=p.textAlign(o);let w,y,g,S,j,k,_;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=Vc(this,b,s),n.fillStyle=s.bodyColor,Pe(this.beforeBody,x),m=l&&b!=="right"?o==="center"?u/2+d:u+2+d:0,S=0,k=r.length;S<k;++S){for(w=r[S],y=this.labelTextColors[S],n.fillStyle=y,Pe(w.before,x),g=w.lines,l&&g.length&&(this._drawColorBox(n,t,S,p,s),f=Math.max(h.lineHeight,c)),j=0,_=g.length;j<_;++j)x(g[j]),f=h.lineHeight;Pe(w.after,x)}m=0,f=h.lineHeight,Pe(this.afterBody,x),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let o,l;if(i){const c=to(s.rtl,this.x,this.width);for(t.x=Vc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",o=Dt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=eo(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),o==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),o==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Ca[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=yw(this,t),c=Object.assign({},o,this._size),u=vw(n,t,c),d=bw(t,c,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=kn(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),vE(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),bE(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!ld(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,s),l=this._positionChanged(o,t),c=n||!ld(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,o=Ca[i.position].call(this,t,n);return o!==!1&&(s!==o.x||r!==o.y)}}ie($p,"positioners",Ca);var Qx={id:"tooltip",_element:$p,positioners:Ca,afterInit(e,t,n){n&&(e.tooltip=new $p({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HE},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const x$=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function y$(e,t,n,s){const r=e.indexOf(t);if(r===-1)return x$(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const v$=(e,t)=>e===null?null:_t(Math.round(e),0,t);function jw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class pd extends _o{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(_e(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:y$(s,t,ye(n,t),this._addedLabels),v$(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)r.push({value:o});return r}getLabelForValue(t){return jw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ie(pd,"id","category"),ie(pd,"defaults",{ticks:{callback:jw}});function b$(e,t){const n=[],{bounds:r,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:x,max:b}=t,w=!_e(o),y=!_e(l),g=!_e(u),S=(b-x)/(h+1);let j=bb((b-x)/p/m)*m,k,_,E,N;if(j<1e-14&&!w&&!y)return[{value:x},{value:b}];N=Math.ceil(b/j)-Math.floor(x/j),N>p&&(j=bb(N*j/p/m)*m),_e(c)||(k=Math.pow(10,c),j=Math.ceil(j*k)/k),r==="ticks"?(_=Math.floor(x/j)*j,E=Math.ceil(b/j)*j):(_=x,E=b),w&&y&&i&&_5((l-o)/i,j/1e3)?(N=Math.round(Math.min((l-o)/j,d)),j=(l-o)/N,_=o,E=l):g?(_=w?o:_,E=y?l:E,N=u-1,j=(E-_)/N):(N=(E-_)/j,za(N,Math.round(N),j/1e3)?N=Math.round(N):N=Math.ceil(N));const D=Math.max(wb(j),wb(_));k=Math.pow(10,_e(c)?D:c),_=Math.round(_*k)/k,E=Math.round(E*k)/k;let M=0;for(w&&(f&&_!==o?(n.push({value:o}),_<o&&M++,za(Math.round((_+M*j)*k)/k,o,Nw(o,S,e))&&M++):_<o&&M++);M<N;++M){const L=Math.round((_+M*j)*k)/k;if(y&&L>l)break;n.push({value:L})}return y&&f&&E!==l?n.length&&za(n[n.length-1].value,l,Nw(l,S,e))?n[n.length-1].value=l:n.push({value:l}):(!y||E===l)&&n.push({value:E}),n}function Nw(e,t,{horizontal:n,minRotation:s}){const r=bs(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class w$ extends _o{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return _e(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=ts(r),u=ts(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=b$(r,i);return t.bounds==="ticks"&&D5(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return $x(t,this.chart.options.locale,this.options.ticks.format)}}class gd extends w${determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Mt(t)?t:0,this.max=Mt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=bs(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ie(gd,"id","linear"),ie(gd,"defaults",{ticks:{callback:dE.formatters.numeric}});const ph={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vt=Object.keys(ph);function Cw(e,t){return e-t}function Ew(e,t){if(_e(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Mt(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(wl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function kw(e,t,n,s){const r=Vt.length;for(let i=Vt.indexOf(e);i<r-1;++i){const o=ph[Vt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=s)return Vt[i]}return Vt[r-1]}function S$(e,t,n,s,r){for(let i=Vt.length-1;i>=Vt.indexOf(n);i--){const o=Vt[i];if(ph[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return Vt[n?Vt.indexOf(n):0]}function j$(e){for(let t=Vt.indexOf(e)+1,n=Vt.length;t<n;++t)if(ph[Vt[t]].common)return Vt[t]}function _w(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=Ox(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function N$(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function Dw(e,t,n){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!n?s:N$(e,s,r,n)}class xd extends _o{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new u3._date(t.adapters.date);r.init(n),Ba(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Ew(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Mt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Mt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=I5(r,i,o);return this._unit=n.unit||(s.autoSkip?kw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):S$(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:j$(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),Dw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=_t(n,0,o),s=_t(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||kw(i.minUnit,n,s,this._getLabelCapacity(n)),l=ye(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=wl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":o),t.diff(s,n,o)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+t.add(f,l,o),m++)_w(d,f,p);return(f===s||r.bounds==="ticks"||m===1)&&_w(d,f,p),Object.keys(d).sort(Cw).map(x=>+x)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return $e(o,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=s[n],m=u&&h&&f&&f.major;return this._adapter.format(t,r||(m?h:d))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=bs(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,Dw(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(Ew(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return aE(t.sort(Cw))}}ie(xd,"id","time"),ie(xd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Uc(e,t,n){let s=0,r=e.length-1,i,o,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Zr(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Zr(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const u=o-i;return u?l+(c-l)*(t-i)/u:l}class Tw extends xd{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Uc(n,this.min),this._tableRange=Uc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let o,l,c,u,d;for(o=0,l=t.length;o<l;++o)u=t[o],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)d=r[o+1],c=r[o-1],u=r[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Uc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Uc(this._table,s*this._tableRange+this._minPos,!0)}}ie(Tw,"id","timeseries"),ie(Tw,"defaults",xd.defaults);const qE="label";function Pw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function C$(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function GE(e,t){e.labels=t}function YE(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qE;const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function E$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qE;const n={labels:[],datasets:[]};return GE(n,e.labels),YE(n,e.datasets,t),n}function k$(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=v.useRef(null),p=v.useRef(null),x=()=>{m.current&&(p.current=new Do(m.current,{type:o,data:E$(l,i),options:c&&{...c},plugins:u}),Pw(t,p.current))},b=()=>{Pw(t,null),p.current&&(p.current.destroy(),p.current=null)};return v.useEffect(()=>{!r&&p.current&&c&&C$(p.current,c)},[r,c]),v.useEffect(()=>{!r&&p.current&&GE(p.current.config.data,l.labels)},[r,l.labels]),v.useEffect(()=>{!r&&p.current&&l.datasets&&YE(p.current.config.data,l.datasets,i)},[r,l.datasets]),v.useEffect(()=>{p.current&&(r?(b(),setTimeout(x)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),v.useEffect(()=>{p.current&&(b(),setTimeout(x))},[o]),v.useEffect(()=>(x(),()=>b()),[]),re.createElement("canvas",{ref:m,role:"img",height:n,width:s,...f},d)}const _$=v.forwardRef(k$);function Kx(e,t){return Do.register(t),v.forwardRef((n,s)=>re.createElement(_$,{...n,ref:s,type:e}))}const D$=Kx("line",vu),T$=Kx("bar",yu),P$=Kx("doughnut",Sa);Do.register(pd,gd,Su,nr,WE,Qx,Yx,Gx);function M$({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return a.jsx("div",{style:{height:`${n}px`,width:"100%"},children:a.jsx(D$,{data:e,options:r})})}Do.register(Na,Qx,Yx,Gx);function A$({data:e,options:t,height:n=250}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const o=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${o}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return a.jsx("div",{style:{height:`${n}px`,width:"100%"},children:a.jsx(P$,{data:e,options:r})})}const I$=ql("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function QE({stages:e,height:t=250}){const n=Math.max(...e.map(r=>r.value)),s=e.reduce((r,i)=>r+i.value,0);return a.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((r,i)=>{const o=n===0?40:Math.max(40,Math.min(100,r.value/n*100)),l=s===0?0:Math.round(r.value/s*100),c=i===0?"first":i===e.length-1?"last":"middle";return a.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${o}%`},children:[a.jsx("div",{className:I$({position:c}),style:{backgroundColor:r.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:a.jsx("span",{className:"text-white text-xs font-medium",children:r.value})}),a.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[a.jsx("span",{className:"font-medium text-gray-800",children:r.label}),a.jsxs("span",{children:[l,"%"]})]})]},r.label)})})}const Xx="-",R$=e=>{const t=L$(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(Xx);return l[0]===""&&l.length!==1&&l.shift(),KE(l,t)||O$(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},KE=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?KE(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(Xx);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Mw=/^\[(.+)\]$/,O$=e=>{if(Mw.test(e)){const t=Mw.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},L$=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)Bp(n[r],s,r,t);return s},Bp=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:Aw(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(F$(r)){Bp(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,o])=>{Bp(o,Aw(t,i),n,s)})})},Aw=(e,t)=>{let n=e;return t.split(Xx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},F$=e=>e.isThemeGetter,$$=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return r(i,o),o},set(i,o){n.has(i)?n.set(i,o):r(i,o)}}},zp="!",Vp=":",B$=Vp.length,z$=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let o=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let x=r[p];if(o===0&&l===0){if(x===Vp){i.push(r.slice(c,p)),c=p+B$;continue}if(x==="/"){u=p;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const d=i.length===0?r:r.substring(c),h=V$(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const r=t+Vp,i=s;s=o=>o.startsWith(r)?i(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},V$=e=>e.endsWith(zp)?e.substring(0,e.length-1):e.startsWith(zp)?e.substring(1):e,U$=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(o=>{o[0]==="["||t[o]?(r.push(...i.sort(),o),i=[]):i.push(o)}),r.push(...i.sort()),r}},W$=e=>({cache:$$(e.cacheSize),parseClassName:z$(e),sortModifiers:U$(e),...R$(e)}),H$=/\s+/,q$=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,o=[],l=e.trim().split(H$);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:x}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let b=!!x,w=s(b?p.substring(0,x):p);if(!w){if(!b){c=d+(c.length>0?" "+c:c);continue}if(w=s(p),!w){c=d+(c.length>0?" "+c:c);continue}b=!1}const y=i(f).join(":"),g=m?y+zp:y,S=g+w;if(o.includes(S))continue;o.push(S);const j=r(w,b);for(let k=0;k<j.length;++k){const _=j[k];o.push(g+_)}c=d+(c.length>0?" "+c:c)}return c};function G$(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=XE(t))&&(s&&(s+=" "),s+=n);return s}const XE=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=XE(e[s]))&&(n&&(n+=" "),n+=t);return n};function Y$(e,...t){let n,s,r,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=W$(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=q$(c,n);return r(c,d),d}return function(){return i(G$.apply(null,arguments))}}const at=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},JE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ZE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Q$=/^\d+\/\d+$/,K$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,X$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,J$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Z$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,e6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ki=e=>Q$.test(e),ve=e=>!!e&&!Number.isNaN(Number(e)),Fs=e=>!!e&&Number.isInteger(Number(e)),Of=e=>e.endsWith("%")&&ve(e.slice(0,-1)),cs=e=>K$.test(e),t6=()=>!0,n6=e=>X$.test(e)&&!J$.test(e),e2=()=>!1,s6=e=>Z$.test(e),r6=e=>e6.test(e),i6=e=>!oe(e)&&!ae(e),o6=e=>To(e,s2,e2),oe=e=>JE.test(e),Lr=e=>To(e,r2,n6),Lf=e=>To(e,d6,ve),Iw=e=>To(e,t2,e2),a6=e=>To(e,n2,r6),Wc=e=>To(e,i2,s6),ae=e=>ZE.test(e),na=e=>Po(e,r2),l6=e=>Po(e,h6),Rw=e=>Po(e,t2),c6=e=>Po(e,s2),u6=e=>Po(e,n2),Hc=e=>Po(e,i2,!0),To=(e,t,n)=>{const s=JE.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Po=(e,t,n=!1)=>{const s=ZE.exec(e);return s?s[1]?t(s[1]):n:!1},t2=e=>e==="position"||e==="percentage",n2=e=>e==="image"||e==="url",s2=e=>e==="length"||e==="size"||e==="bg-size",r2=e=>e==="length",d6=e=>e==="number",h6=e=>e==="family-name",i2=e=>e==="shadow",f6=()=>{const e=at("color"),t=at("font"),n=at("text"),s=at("font-weight"),r=at("tracking"),i=at("leading"),o=at("breakpoint"),l=at("container"),c=at("spacing"),u=at("radius"),d=at("shadow"),h=at("inset-shadow"),f=at("text-shadow"),m=at("drop-shadow"),p=at("blur"),x=at("perspective"),b=at("aspect"),w=at("ease"),y=at("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...S(),ae,oe],k=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],E=()=>[ae,oe,c],N=()=>[ki,"full","auto",...E()],D=()=>[Fs,"none","subgrid",ae,oe],M=()=>["auto",{span:["full",Fs,ae,oe]},Fs,ae,oe],L=()=>[Fs,"auto",ae,oe],z=()=>["auto","min","max","fr",ae,oe],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...E()],R=()=>[ki,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],T=()=>[e,ae,oe],I=()=>[...S(),Rw,Iw,{position:[ae,oe]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",c6,o6,{size:[ae,oe]}],Y=()=>[Of,na,Lr],ce=()=>["","none","full",u,ae,oe],ne=()=>["",ve,na,Lr],ee=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],C=()=>[ve,Of,Rw,Iw],P=()=>["","none",p,ae,oe],F=()=>["none",ve,ae,oe],$=()=>["none",ve,ae,oe],q=()=>[ve,ae,oe],J=()=>[ki,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[cs],breakpoint:[cs],color:[t6],container:[cs],"drop-shadow":[cs],ease:["in","out","in-out"],font:[i6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[cs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[cs],shadow:[cs],spacing:["px",ve],text:[cs],"text-shadow":[cs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ki,oe,ae,b]}],container:["container"],columns:[{columns:[ve,oe,ae,l]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Fs,"auto",ae,oe]}],basis:[{basis:[ki,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ve,ki,"auto","initial","none",oe]}],grow:[{grow:["",ve,ae,oe]}],shrink:[{shrink:["",ve,ae,oe]}],order:[{order:[Fs,"first","last","none",ae,oe]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:R()}],w:[{w:[l,"screen",...R()]}],"min-w":[{"min-w":[l,"screen","none",...R()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...R()]}],h:[{h:["screen","lh",...R()]}],"min-h":[{"min-h":["screen","lh","none",...R()]}],"max-h":[{"max-h":["screen","lh",...R()]}],"font-size":[{text:["base",n,na,Lr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ae,Lf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Of,oe]}],"font-family":[{font:[l6,oe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ae,oe]}],"line-clamp":[{"line-clamp":[ve,"none",ae,Lf]}],leading:[{leading:[i,...E()]}],"list-image":[{"list-image":["none",ae,oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ae,oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[ve,"from-font","auto",ae,Lr]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[ve,"auto",ae,oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ae,oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ae,oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Fs,ae,oe],radial:["",ae,oe],conic:[Fs,ae,oe]},u6,a6]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ve,ae,oe]}],"outline-w":[{outline:["",ve,na,Lr]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,Hc,Wc]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",h,Hc,Wc]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[ve,Lr]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",f,Hc,Wc]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[ve,ae,oe]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ve]}],"mask-image-linear-from-pos":[{"mask-linear-from":C()}],"mask-image-linear-to-pos":[{"mask-linear-to":C()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":C()}],"mask-image-t-to-pos":[{"mask-t-to":C()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":C()}],"mask-image-r-to-pos":[{"mask-r-to":C()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":C()}],"mask-image-b-to-pos":[{"mask-b-to":C()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":C()}],"mask-image-l-to-pos":[{"mask-l-to":C()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":C()}],"mask-image-x-to-pos":[{"mask-x-to":C()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":C()}],"mask-image-y-to-pos":[{"mask-y-to":C()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[ae,oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":C()}],"mask-image-radial-to-pos":[{"mask-radial-to":C()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ve]}],"mask-image-conic-from-pos":[{"mask-conic-from":C()}],"mask-image-conic-to-pos":[{"mask-conic-to":C()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ae,oe]}],filter:[{filter:["","none",ae,oe]}],blur:[{blur:P()}],brightness:[{brightness:[ve,ae,oe]}],contrast:[{contrast:[ve,ae,oe]}],"drop-shadow":[{"drop-shadow":["","none",m,Hc,Wc]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",ve,ae,oe]}],"hue-rotate":[{"hue-rotate":[ve,ae,oe]}],invert:[{invert:["",ve,ae,oe]}],saturate:[{saturate:[ve,ae,oe]}],sepia:[{sepia:["",ve,ae,oe]}],"backdrop-filter":[{"backdrop-filter":["","none",ae,oe]}],"backdrop-blur":[{"backdrop-blur":P()}],"backdrop-brightness":[{"backdrop-brightness":[ve,ae,oe]}],"backdrop-contrast":[{"backdrop-contrast":[ve,ae,oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ve,ae,oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ve,ae,oe]}],"backdrop-invert":[{"backdrop-invert":["",ve,ae,oe]}],"backdrop-opacity":[{"backdrop-opacity":[ve,ae,oe]}],"backdrop-saturate":[{"backdrop-saturate":[ve,ae,oe]}],"backdrop-sepia":[{"backdrop-sepia":["",ve,ae,oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ae,oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ve,"initial",ae,oe]}],ease:[{ease:["linear","initial",w,ae,oe]}],delay:[{delay:[ve,ae,oe]}],animate:[{animate:["none",y,ae,oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,ae,oe]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:F()}],"rotate-x":[{"rotate-x":F()}],"rotate-y":[{"rotate-y":F()}],"rotate-z":[{"rotate-z":F()}],scale:[{scale:$()}],"scale-x":[{"scale-x":$()}],"scale-y":[{"scale-y":$()}],"scale-z":[{"scale-z":$()}],"scale-3d":["scale-3d"],skew:[{skew:q()}],"skew-x":[{"skew-x":q()}],"skew-y":[{"skew-y":q()}],transform:[{transform:[ae,oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:J()}],"translate-x":[{"translate-x":J()}],"translate-y":[{"translate-y":J()}],"translate-z":[{"translate-z":J()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ae,oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ae,oe]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[ve,na,Lr,Lf]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},m6=Y$(f6);function p6(...e){return m6(ZC(e))}function Mo({status:e,className:t}){const n=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsx("span",{className:p6("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}const g6=typeof window<"u";let _n;g6?ns(()=>import("./leadService-DoNws-kc.js"),__vite__mapDeps([0,1])).then(e=>{_n=e,console.log(" Using API-based lead service (browser)")}).catch(e=>{console.error("Failed to load API implementation:",e)}):ns(()=>import("./leadRepository-CgVOwW4N.js"),[]).then(e=>{_n=e,console.log(" Using direct PostgreSQL lead repository (server)")}).catch(e=>{console.error("Failed to load DB implementation:",e)});const Ql=async()=>_n?_n.getLeads():(console.warn("Lead service implementation not loaded yet, returning empty array"),[]),x6=async e=>_n?_n.getLeadById(e):(console.warn(`Lead service implementation not loaded yet, can't get lead ${e}`),null),y6=async e=>{if(!_n)throw console.error("Lead service implementation not loaded yet, cannot create lead"),new Error("Lead service unavailable");return _n.createLead(e)},Ow=async(e,t)=>_n?_n.updateLeadStatus(e,t):(console.warn(`Lead service implementation not loaded yet, can't update lead status ${e}`),null),Lw=async(e,t,n)=>_n?_n.updateLeadAssignment(e,t,n):(console.warn(`Lead service implementation not loaded yet, can't update lead assignment ${e}`),null),Jx=async()=>{try{return console.log("Getting all jobs from PostgreSQL"),[{id:"job-1",title:"Mobile Crane Installation",dealId:"deal-1",leadId:"lead-1",customerId:"customer-1",customerName:"ABC Construction",equipmentIds:["eq-1"],operatorIds:["op-1","op-2"],location:{address:"123 Main St, Anytown",coordinates:{latitude:18.52043,longitude:73.85674}},scheduledStartDate:new Date("2025-07-10").toISOString(),scheduledEndDate:new Date("2025-07-20").toISOString(),actualStartDate:new Date("2025-07-10").toISOString(),actualEndDate:null,status:"in_progress",notes:"Regular communication with site manager required",createdBy:"ops-uid-789",createdAt:new Date("2025-06-15").toISOString(),updatedAt:new Date("2025-07-10").toISOString(),assignedTo:"ops-uid-789"},{id:"job-2",title:"Tower Crane Setup",dealId:"deal-2",leadId:"lead-2",customerId:"customer-2",customerName:"XYZ Developers",equipmentIds:["eq-2"],operatorIds:["op-3"],location:{address:"456 Oak Ave, Somewhere",coordinates:{latitude:18.53043,longitude:73.86674}},scheduledStartDate:new Date("2025-07-25").toISOString(),scheduledEndDate:new Date("2025-08-15").toISOString(),actualStartDate:null,actualEndDate:null,status:"scheduled",notes:"Special permits required for this job",createdBy:"ops-uid-789",createdAt:new Date("2025-06-20").toISOString(),updatedAt:new Date("2025-06-20").toISOString(),assignedTo:"ops-uid-789"},{id:"job-3",title:"Crawler Crane Operation",dealId:"deal-3",leadId:"lead-3",customerId:"customer-3",customerName:"Metro Infrastructure",equipmentIds:["eq-3"],operatorIds:["op-4","op-5"],location:{address:"789 Park Rd, Bigcity",coordinates:{latitude:18.54043,longitude:73.87674}},scheduledStartDate:new Date("2025-06-05").toISOString(),scheduledEndDate:new Date("2025-06-15").toISOString(),actualStartDate:new Date("2025-06-05").toISOString(),actualEndDate:new Date("2025-06-18").toISOString(),status:"completed",notes:"Project completed with slight delay due to weather",createdBy:"ops-uid-789",createdAt:new Date("2025-05-20").toISOString(),updatedAt:new Date("2025-06-18").toISOString(),assignedTo:"ops-uid-789"}]}catch(e){throw console.error("Error fetching jobs:",e),e}},o2=async e=>{try{return console.log(`Getting job ${e} from PostgreSQL`),(await Jx()).find(s=>s.id===e)||null}catch(t){throw console.error(`Error fetching job ${e}:`,t),t}},v6=async e=>{try{return console.log("Creating job in PostgreSQL:",e),{...e,id:`job-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}catch(t){throw console.error("Error creating job:",t),t}},b6=async(e,t)=>{try{console.log(`Updating job ${e} in PostgreSQL`);const n=await o2(e);return n?{...n,...t,updatedAt:new Date().toISOString()}:null}catch(n){throw console.error(`Error updating job ${e}:`,n),n}},w6=async(e,t)=>{try{return console.log(`Updating job ${e} status to ${t} in PostgreSQL`),b6(e,{status:t})}catch(n){throw console.error(`Error updating job ${e} status:`,n),n}},S6=async e=>{try{return console.log(`Getting jobs for operator ${e} from PostgreSQL`),(await Jx()).filter(n=>n.operatorIds&&n.operatorIds.includes(e))}catch(t){throw console.error(`Error fetching jobs for operator ${e}:`,t),t}};class a2{constructor(){this._events={}}on(t,n){return this._events[t]||(this._events[t]=[]),this._events[t].push(n),this}off(t,n){return this._events[t]?(n?this._events[t]=this._events[t].filter(s=>s!==n):delete this._events[t],this):this}removeListener(t,n){return this.off(t,n)}removeAllListeners(t){return t?delete this._events[t]:this._events={},this}emit(t,...n){if(!this._events[t])return!1;for(const s of this._events[t])s(...n);return!0}once(t,n){const s=(...r)=>{this.off(t,s),n(...r)};return this.on(t,s)}}class l2 extends a2{constructor(t){super(),this.config=t,console.warn("PostgreSQL Pool is not available in browser environment")}async connect(){throw new Error("Cannot connect to PostgreSQL from browser")}async query(){throw new Error("Cannot query PostgreSQL from browser")}async end(){return!0}async release(){}async acquire(){throw new Error("Cannot acquire client from PostgreSQL pool in browser")}totalCount(){return 0}idleCount(){return 0}waitingCount(){return 0}}class j6 extends a2{constructor(t){super(),this.config=t,console.warn("PostgreSQL Client is not available in browser environment")}async connect(){throw new Error("Cannot connect to PostgreSQL from browser")}async query(){throw new Error("Cannot query PostgreSQL from browser")}async end(){return!0}}const N6={setTypeParser:()=>{},builtins:{INT8:20,TIMESTAMP:1114,TIMESTAMPTZ:1184,DATE:1082,JSON:114,JSONB:3802}},C6={Pool:l2,Client:j6,types:N6},gt=[];for(let e=0;e<256;++e)gt.push((e+256).toString(16).slice(1));function E6(e,t=0){return(gt[e[t+0]]+gt[e[t+1]]+gt[e[t+2]]+gt[e[t+3]]+"-"+gt[e[t+4]]+gt[e[t+5]]+"-"+gt[e[t+6]]+gt[e[t+7]]+"-"+gt[e[t+8]]+gt[e[t+9]]+"-"+gt[e[t+10]]+gt[e[t+11]]+gt[e[t+12]]+gt[e[t+13]]+gt[e[t+14]]+gt[e[t+15]]).toLowerCase()}let Ff;const k6=new Uint8Array(16);function _6(){if(!Ff){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ff=crypto.getRandomValues.bind(crypto)}return Ff(k6)}const D6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fw={randomUUID:D6};function Zx(e,t,n){var r;if(Fw.randomUUID&&!t&&!e)return Fw.randomUUID();e=e||{};const s=e.random??((r=e.rng)==null?void 0:r.call(e))??_6();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,E6(s)}var _i={};const Kl=new C6.Pool({host:_i.DB_HOST||"localhost",port:parseInt(_i.DB_PORT||"5432"),database:_i.DB_NAME||"asp_crm",user:_i.DB_USER||"postgres",password:_i.DB_PASSWORD||"vedant21",ssl:_i.DB_SSL==="true"}),T6=async()=>{if(typeof window<"u"){console.log("Skipping equipment table initialization in browser environment");return}let e;try{return e=await Kl.connect(),(await e.query(`
      SELECT EXISTS (
        SELECT FROM information_schema.tables 
        WHERE table_name = 'equipment'
      );
    `)).rows[0].exists?console.log("Equipment table already exists"):(console.log("Creating equipment table..."),await e.query(`
        CREATE TABLE equipment (
          id VARCHAR(36) PRIMARY KEY,
          name VARCHAR(255) NOT NULL,
          description TEXT,
          type VARCHAR(50) NOT NULL,
          status VARCHAR(50) NOT NULL DEFAULT 'available',
          manufacturer VARCHAR(100),
          model VARCHAR(100),
          serial_number VARCHAR(100),
          acquisition_date DATE,
          purchase_price DECIMAL(15, 2),
          base_rate_hourly DECIMAL(10, 2) DEFAULT 0,
          base_rate_daily DECIMAL(10, 2) DEFAULT 0,
          base_rate_weekly DECIMAL(10, 2) DEFAULT 0,
          last_maintenance_date DATE,
          next_maintenance_date DATE,
          notes TEXT,
          image_url VARCHAR(255),
          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );
      `),console.log("Equipment table created successfully")),!0}catch(t){throw console.error("Error initializing equipment table:",t),t}finally{e&&e.release()}},P6=async e=>{const t=await Kl.connect();try{return(await t.query("SELECT * FROM equipment WHERE id = $1",[e])).rows[0]}finally{t.release()}},M6=async e=>{const t=await Kl.connect();try{const n=Zx(),{name:s,description:r,type:i,status:o="available",manufacturer:l,model:c,serial_number:u,acquisition_date:d,purchase_price:h,base_rate_hourly:f,base_rate_daily:m,base_rate_weekly:p,last_maintenance_date:x,next_maintenance_date:b,notes:w,image_url:y}=e,g=`
      INSERT INTO equipment (
        id, name, description, type, status, manufacturer, model, serial_number,
        acquisition_date, purchase_price, base_rate_hourly, base_rate_daily, base_rate_weekly,
        last_maintenance_date, next_maintenance_date, notes, image_url
      ) VALUES (
        $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17
      ) RETURNING *;
    `,S=[n,s,r,i,o,l,c,u,d,h,f,m,p,x,b,w,y];return(await t.query(g,S)).rows[0]}finally{t.release()}},A6=async(e,t)=>{const n=await Kl.connect();try{if((await n.query("SELECT * FROM equipment WHERE id = $1",[e])).rows.length===0)return null;const{name:r,description:i,type:o,status:l,manufacturer:c,model:u,serial_number:d,acquisition_date:h,purchase_price:f,base_rate_hourly:m,base_rate_daily:p,base_rate_weekly:x,last_maintenance_date:b,next_maintenance_date:w,notes:y,image_url:g}=t,S=`
      UPDATE equipment SET
        name = $1,
        description = $2,
        type = $3,
        status = $4,
        manufacturer = $5,
        model = $6,
        serial_number = $7,
        acquisition_date = $8,
        purchase_price = $9,
        base_rate_hourly = $10,
        base_rate_daily = $11,
        base_rate_weekly = $12,
        last_maintenance_date = $13,
        next_maintenance_date = $14,
        notes = $15,
        image_url = $16,
        updated_at = CURRENT_TIMESTAMP
      WHERE id = $17
      RETURNING *;
    `,j=[r,i,o,l,c,u,d,h,f,m,p,x,b,w,y,g,e];return(await n.query(S,j)).rows[0]}finally{n.release()}},I6=async e=>{const t=await Kl.connect();try{return(await t.query("SELECT * FROM equipment WHERE id = $1",[e])).rows.length===0?null:(await t.query("DELETE FROM equipment WHERE id = $1",[e]),{id:e,deleted:!0})}finally{t.release()}};T6().catch(console.error);const R6=()=>({query:()=>Promise.resolve({rows:[]}),none:()=>Promise.resolve(),one:()=>Promise.resolve({}),oneOrNone:()=>Promise.resolve(null),many:()=>Promise.resolve([]),manyOrNone:()=>Promise.resolve([]),any:()=>Promise.resolve([]),connect:()=>Promise.resolve({done:()=>{}}),task:e=>Promise.resolve(e({query:()=>Promise.resolve({rows:[]}),none:()=>Promise.resolve(),one:()=>Promise.resolve({}),oneOrNone:()=>Promise.resolve(null),many:()=>Promise.resolve([]),manyOrNone:()=>Promise.resolve([]),any:()=>Promise.resolve([])}))}),Re=R6();console.warn("Using browser mock for database client. API calls will be used instead of direct DB access.");const O6=async()=>{try{return console.log("Getting all operators from PostgreSQL"),(await Re.any(`
      SELECT 
        id, 
        name, 
        email, 
        phone, 
        specialization, 
        experience, 
        certifications, 
        availability,
        created_at,
        updated_at
      FROM operators
      ORDER BY name ASC
    `)).map(t=>({id:t.id,name:t.name,email:t.email,phone:t.phone,specialization:t.specialization,experience:t.experience,certifications:Array.isArray(t.certifications)?t.certifications:[],availability:t.availability,createdAt:t.created_at,updatedAt:t.updated_at}))}catch(e){throw console.error("Error fetching operators:",e),new Error(`Database error: ${e.message}`)}},ey=async()=>Jx(),L6=async e=>o2(e),F6=async e=>S6(e),$6=async e=>{let t=e.customerName;if(!t&&e.leadId){const n=await x6(e.leadId);t=(n==null?void 0:n.customerName)||"Unknown Customer"}return v6({...e,customerName:t})},B6=async(e,t)=>w6(e,t),c2=e=>e?{id:e.id,name:e.name,type:e.category,description:e.description||"",baseRate:e.baseRates.monthly}:null,z6=async e=>{const t=await P6(e);return c2(t)},u2=async()=>(await(void 0)()).map(t=>c2(t)).filter(Boolean),ty=async()=>O6(),ny=async()=>(void 0)(),$w=async e=>(void 0)(e),V6=async e=>M6(e),U6=async(e,t)=>A6(e,t),W6=async e=>I6(e),H6=typeof window<"u";class xo extends Error{constructor(t,n){super(t),this.cause=n,this.name="DealServiceError",Object.setPrototypeOf(this,xo.prototype)}}let rs=null;H6?ns(()=>import("./dealService-DnE80s20.js"),__vite__mapDeps([2,1])).then(e=>{rs=e,console.log(" Using API-based deal service (browser)")}).catch(e=>{console.error("Failed to load API implementation:",e)}):ns(()=>import("./dealRepository-CKqV_vbr.js"),[]).then(e=>{rs=e,console.log(" Using direct PostgreSQL deal repository (server)")}).catch(e=>{console.error("Failed to load DB implementation:",e)});const gh=async()=>{if(!rs)return console.error("No deal service implementation available"),[];try{return await rs.getDeals()}catch(e){return console.error("Error in getDeals:",e),[]}},El=async e=>{if(!rs)return console.error("No deal service implementation available"),null;try{return await rs.getDealById(e)}catch(t){return console.error(`Error in getDealById for ID ${e}:`,t),null}},q6=async e=>{if(!rs)throw console.error("No deal service implementation available"),new xo("Deal service unavailable");try{return await rs.createDeal(e)}catch(t){throw console.error("Error in createDeal:",t),new xo(t instanceof Error?t.message:"Failed to create deal",t)}},d2=async(e,t)=>{if(!rs)return console.error("No deal service implementation available"),null;if(!e)throw new xo("Deal ID is required for update");if(!t||!["qualification","proposal","negotiation","won","lost"].includes(t))throw new xo(`Invalid stage value: "${t}"`);try{return await rs.updateDealStage(e,t)}catch(n){return console.error(`Error in updateDealStage for ID ${e}:`,n),null}},be=e=>isNaN(e)||e==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);function G6(){const[e,t]=v.useState([]),[n,s]=v.useState([]),[r,i]=v.useState(0),[o,l]=v.useState(0),[c,u]=v.useState(!0),[d,h]=v.useState([]),[f,m]=v.useState([]);v.useEffect(()=>{(async()=>{try{const[M,L,z,H,B]=await Promise.all([Ql(),ey(),ny(),ty(),gh()]);t(M),s(L),i(z.length),l(H.length),h(z),m(B)}catch(M){console.error("Error fetching dashboard data:",M)}finally{u(!1)}})()},[]);const p=f.filter(D=>D.stage==="won").reduce((D,M)=>D+M.value,0),b=(()=>{const D=new Date,M=D.getMonth(),L=D.getFullYear(),z=M===0?11:M-1,H=M===0?L-1:L,B=f.filter(O=>{const V=new Date(O.updatedAt);return O.stage==="won"&&V.getMonth()===M&&V.getFullYear()===L}),A=f.filter(O=>{const V=new Date(O.updatedAt);return O.stage==="won"&&V.getMonth()===z&&V.getFullYear()===H}),R=B.reduce((O,V)=>O+V.value,0),T=A.reduce((O,V)=>O+V.value,0);if(T===0)return{value:100,isPositive:!0};const I=(R-T)/T*100;return{value:Math.abs(Math.round(I)),isPositive:I>=0}})(),w=n.filter(D=>D.status==="in_progress"||D.status==="scheduled").length/(r||1)*100,y=d.filter(D=>D.status==="available").length,g=d.filter(D=>D.status==="in_use").length,S=d.filter(D=>D.status==="maintenance").length,j=e.length>0?f.length/e.length*100:0,k=(()=>{const D=new Date,M=[],L=[],z=[];for(let H=5;H>=0;H--){const B=new Date(D.getFullYear(),D.getMonth()-H,1),A=B.toLocaleString("default",{month:"short"});M.push(A);const R=f.filter(V=>{const Y=new Date(V.updatedAt);return Y.getMonth()===B.getMonth()&&Y.getFullYear()===B.getFullYear()&&V.stage==="won"}),T=R.reduce((V,Y)=>V+Y.value,0);L.push(T);const I=f.filter(V=>{const Y=new Date(V.updatedAt);return Y.getMonth()===B.getMonth()&&Y.getFullYear()===B.getFullYear()&&(V.stage==="won"||V.stage==="lost")}),O=I.length>0?R.length/I.length*100:0;z.push(O)}return{labels:M,datasets:[{label:"Revenue",data:L,borderColor:"#6366F1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,yAxisID:"y"},{label:"Win Rate %",data:z,borderColor:"#22C55E",borderDashed:[5,5],backgroundColor:"transparent",yAxisID:"y1"}]}})(),_={labels:["Available","In Use","Maintenance"],datasets:[{data:[y,g,S],backgroundColor:["#22C55E","#EF4444","#F59E0B"],borderWidth:0,hoverOffset:4}]},E=[{label:"New Leads",value:e.filter(D=>D.status==="new").length,color:"#93C5FD"},{label:"Qualified Leads",value:e.filter(D=>D.status==="qualified").length,color:"#60A5FA"},{label:"Deals",value:f.filter(D=>D.stage==="proposal").length,color:"#3B82F6"},{label:"Won",value:f.filter(D=>D.stage==="won").length,color:"#2563EB"}];if(c)return a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."});const N={scales:{y:{beginAtZero:!0,title:{display:!0,text:"Revenue"}},y1:{beginAtZero:!0,position:"right",title:{display:!0,text:"Win Rate %"},min:0,max:100,grid:{drawOnChartArea:!1}}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Wt,{title:"Total Revenue",value:be(p),icon:a.jsx(eh,{className:"h-5 w-5 text-primary-600"}),variant:"primary",trend:b}),a.jsx(Wt,{title:"Equipment Utilization",value:`${Math.round(w)}%`,icon:a.jsx(Zn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),a.jsx(Wt,{title:"Deal Conversion",value:`${Math.round(j)}%`,icon:a.jsx(zM,{className:"h-5 w-5 text-success-600"}),variant:"success"}),a.jsx(Wt,{title:"Active Operators",value:o,icon:a.jsx($n,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(he,{children:"Revenue & Win Rate Trends"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Last 6 months"})]})}),a.jsx(le,{children:a.jsx(M$,{data:k,options:N,height:300})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Lead to Deal Funnel"})}),a.jsx(le,{className:"flex justify-center",children:a.jsx(QE,{stages:E,height:280})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Equipment Status"})}),a.jsx(le,{className:"flex justify-center",children:a.jsx(A$,{data:_,height:280})})]})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-6",children:a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(he,{children:"Recent Jobs"}),a.jsx(In,{to:"/jobs",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Jobs"})]})}),a.jsx(le,{children:n.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent jobs"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.slice(0,5).map(D=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:D.customerId||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:D.equipmentIds?D.equipmentIds[0]:"None"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:typeof D.location=="object"&&D.location!==null?D.location.address||"Unknown location":D.location||"Unknown location"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:new Date(D.scheduledStartDate).toLocaleDateString()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Mo,{status:D.status})})]},D.id))})]})})})]})})]})}const $f="http://localhost:3001/api",Y6=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},qc=async(e,t={})=>{var n,s;try{console.log(` API Call: ${t.method||"GET"} ${$f}${e}`);let r="";try{r=Y6()}catch(l){throw l}const i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers||{}},o=await fetch(`${$f}${e}`,{...t,headers:i});if(console.log(` API Response: ${o.status} ${o.statusText} for ${e}`),e==="/quotations"){const l=o.clone();try{const c=await l.json();if(console.log(` Quotations API Response Data (${e}):`,c),c&&c.length>0){console.log(" First quotation details:",{id:c[0].id,customerName:c[0].customerName,customerId:c[0].customerId,customerContact:JSON.stringify(c[0].customerContact).substring(0,100),selectedEquipment:c[0].selectedEquipment?`${c[0].selectedEquipment.name||"Unnamed"} (${c[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const u=c[0].selectedEquipment&&c[0].selectedEquipment.name,d=c[0].selectedMachines&&Array.isArray(c[0].selectedMachines)&&c[0].selectedMachines.length>0;console.log(" Equipment data check:",{hasEquipment:!!u,hasMachines:!!d,machineCount:d?c[0].selectedMachines.length:0,firstMachine:d?c[0].selectedMachines[0].name:"N/A"});const h=!!c[0].customerId,f=!!c[0].customerName,m=c[0].customerContact&&typeof c[0].customerContact=="object"&&Object.keys(c[0].customerContact).length>0;console.log(" Customer data check:",{hasCustomerId:h,hasCustomerName:f,hasCustomerContact:m,customerType:m?typeof c[0].customerContact:"N/A"})}}catch(c){console.error("Error parsing response data:",c)}}if(!o.ok){let l=`API Error: ${o.status} ${o.statusText}`;const c=o.headers.get("content-type");console.error(`API Error: ${o.status} ${o.statusText} for ${$f}${e}`),console.error("Response Headers:",{"content-type":c,"content-length":o.headers.get("content-length")});try{if(c&&c.includes("application/json")){const u=await o.json();if(l=u.error||l,u.details&&(l+=` - ${u.details}`),console.error("API Error JSON:",u),o.status===401)throw console.warn(" Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((s=t.headers)==null?void 0:s["X-Bypass-Auth"])||"Not present"},environment:"production",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const u=await o.text();u&&(console.error("API Error Text:",u.substring(0,300)),l+=` - ${u.substring(0,100)}`)}}catch(u){console.error("Error parsing API error response:",u),l+=" (Error response could not be parsed)"}throw new Error(`${l} (${e})`)}return o.json()}catch(r){throw console.error(`API call failed: ${e}`,r),r}},xh={get:e=>qc(e,{method:"GET"}),post:(e,t)=>qc(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>qc(e,{method:"PUT",body:JSON.stringify(t)}),delete:e=>qc(e,{method:"DELETE"})},Q6=async()=>{try{console.log(" getQuotations: Requesting quotations from API...");const e=await xh.get("/quotations");return console.log(` getQuotations: Received ${(e==null?void 0:e.length)||0} quotations from API`),!e||e.length===0?console.log(" getQuotations: No quotations received from API"):console.log(" getQuotations: First quotation sample:",JSON.stringify(e[0],null,2)),e}catch(e){throw console.error(" getQuotations: Error fetching quotations:",e),e}},K6=async e=>{try{return console.log("Creating quotation via API:",e),await xh.post("/quotations",e)}catch(t){throw console.error("Error creating quotation:",t),t}},X6=async e=>{try{return console.log(`Getting quotation ${e} via API`),await xh.get(`/quotations/${e}`)}catch(t){if(t.message.includes("404"))return console.log(`Quotation with ID ${e} not found`),null;throw console.error("Error fetching quotation by ID:",t),t}},J6=async(e,t)=>{try{return console.log(`Updating quotation ${e} via API`),await xh.put(`/quotations/${e}`,t)}catch(n){if(n.message.includes("404"))return console.log(`Quotation with ID ${e} not found`),null;throw console.error("Error updating quotation:",n),n}},h2=async()=>Q6(),Z6=async(e,t,n,s,r,i)=>{try{return K6({...e,leadId:t,dealId:n,customerId:s,customerName:r,customerContact:i})}catch(o){throw console.error("Error creating quotation:",o),o}},eB=async e=>X6(e),tB=async(e,t)=>J6(e,t),yd=async e=>(console.log(`Getting quotations for lead ${e}`),(await h2()).filter(n=>n.leadId===e));Do.register(pd,gd,ju,WE,Qx,Yx,Gx);function nB({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return a.jsx("div",{style:{height:`${n}px`,width:"100%"},children:a.jsx(T$,{data:e,options:r})})}function sB(){const[e,t]=v.useState([]),[n,s]=v.useState([]),[r,i]=v.useState(!0);v.useEffect(()=>{(async()=>{try{const x=await Ql();t(x);const b=x.filter(w=>w.status==="converted");if(b.length>0){const w=b[0],y=await yd(w.id);s(y)}}catch(x){console.error("Error fetching dashboard data:",x)}finally{i(!1)}})()},[]);const o=e.filter(p=>p.status==="new").length,l=e.filter(p=>p.status==="in_process").length,c=e.filter(p=>p.status==="qualified").length,u=e.filter(p=>p.status==="converted").length,d=n.reduce((p,x)=>p+x.totalRent,0),h=[...e].sort((p,x)=>new Date(x.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5),f=[{label:"New",value:o,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return r?a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Wt,{title:"New Leads",value:o,icon:a.jsx(iv,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),a.jsx(Wt,{title:"In Process",value:l,icon:a.jsx($n,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),a.jsx(Wt,{title:"Qualified Leads",value:c,icon:a.jsx(iv,{className:"h-5 w-5 text-success-600"}),variant:"success"}),a.jsx(Wt,{title:"Quotation Value",value:be(d),icon:a.jsx(eh,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Lead Conversion Funnel"})}),a.jsx(le,{className:"flex justify-center",children:a.jsx(QE,{stages:f,height:250})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Weekly Lead Generation"})}),a.jsx(le,{children:a.jsx(nB,{data:m,height:250})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(he,{children:"Recent Leads"}),a.jsx(In,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),a.jsx(le,{children:h.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Mo,{status:p.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),a.jsx("div",{children:a.jsxs(te,{className:"h-full",children:[a.jsx(de,{children:a.jsx(he,{children:"Upcoming Tasks"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(vN,{className:"h-5 w-5 text-primary-500"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(qM,{className:"h-5 w-5 text-green-500"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(UM,{className:"h-5 w-5 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}function rB(){const[e,t]=v.useState([]),[n,s]=v.useState([]),[r,i]=v.useState(0),[o,l]=v.useState(0),[c,u]=v.useState(!0);v.useEffect(()=>{(async()=>{try{const[f,m,p,x]=await Promise.all([Ql(),ey(),u2(),ty()]);t(f),s(m),i(p.length),l(x.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return n.filter(h=>h.status==="completed").length,c?a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Wt,{title:"Scheduled Jobs",value:d,icon:a.jsx(Ms,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),a.jsx(Wt,{title:"Equipment",value:r,icon:a.jsx(Zn,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),a.jsx(Wt,{title:"Operators",value:o,icon:a.jsx($n,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(he,{children:"Recent Won Leads"}),a.jsx(In,{to:"/jobs",children:a.jsx(U,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),a.jsx(le,{children:e.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(U,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),a.jsx("div",{children:a.jsxs(te,{className:"h-full",children:[a.jsx(de,{children:a.jsx(he,{children:"Quick Actions"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx(In,{to:"/config/equipment",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(Zn,{size:16}),children:"Manage Equipment"})}),a.jsx(In,{to:"/config/operators",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx($n,{size:16}),children:"Manage Operators"})}),a.jsx(In,{to:"/jobs",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(Ms,{size:16}),children:"View Job Calendar"})}),a.jsx(In,{to:"/feedback",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(mr,{size:16}),children:"Review Completed Jobs"})}),a.jsx(In,{to:"/config",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(yN,{size:16}),children:"System Configuration"})}),a.jsx(In,{to:"/config/maintenance",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(cx,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Recent Job Activity"})}),a.jsx(le,{children:n.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.startDate).toLocaleDateString()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Mo,{status:h.status})})]},h.id))})]})})})]})]})}const iB=ql("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function ot({className:e,variant:t,title:n,description:s,onClose:r,duration:i=5e3,isVisible:o=!0,...l}){const[c,u]=v.useState(o);v.useEffect(()=>{u(o)},[o]),v.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),r==null||r()},i);return()=>clearTimeout(f)}},[c,i,r]);const d=()=>{u(!1),r==null||r()},h=()=>{switch(t){case"success":return a.jsx(mr,{className:"h-5 w-5 text-success-500"});case"error":return a.jsx(nh,{className:"h-5 w-5 text-error-500"});case"warning":return a.jsx(Bl,{className:"h-5 w-5 text-warning-500"});case"info":return a.jsx(er,{className:"h-5 w-5 text-primary-500"});default:return null}};return a.jsx(Px,{children:c&&a.jsx(gl.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:`pointer-events-auto ${iB({variant:t,className:e})}`,...l,children:a.jsxs("div",{className:"flex items-start",children:[t&&a.jsx("div",{className:"flex-shrink-0",children:h()}),a.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[a.jsx("p",{className:"text-sm font-medium",children:n}),s&&a.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:s})]}),a.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:a.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(ho,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function oB(){const{user:e}=Ae(),[t,n]=v.useState([]),[s,r]=v.useState({}),[i,o]=v.useState(!0),[l,c]=v.useState({show:!1,title:""});v.useEffect(()=>{(async()=>{if(e)try{const x=await F6(e.id);n(x);const b={};for(const w of x)if(!b[w.equipmentId]){const y=await z6(w.equipmentId);y&&(b[w.equipmentId]=y)}r(b)}catch(x){console.error("Error fetching operator data:",x)}finally{o(!1)}})()},[e]);const u=(p,x)=>{var b;n(w=>w.map(y=>y.id===p?{...y,status:x==="accept"?"accepted":x==="reject"?"rejected":"completed"}:y)),c({show:!0,title:x==="accept"?"Job Accepted":x==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(b=t.find(w=>w.id===p))==null?void 0:b.customerName} has been ${x}ed.`,variant:x==="reject"?"warning":"success"}),setTimeout(()=>{c(w=>({...w,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,x)=>new Date(p.startDate).getTime()-new Date(x.startDate).getTime());return i?a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Wt,{title:"Scheduled Jobs",value:d,icon:a.jsx(Ms,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),a.jsx(Wt,{title:"Accepted Jobs",value:h,icon:a.jsx(mr,{className:"h-5 w-5 text-success-600"}),variant:"success"}),a.jsx(Wt,{title:"Completed Jobs",value:f,icon:a.jsx(ys,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Upcoming Jobs"})}),a.jsx(le,{children:m.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):a.jsx("div",{className:"space-y-4",children:m.map(p=>{var x;return a.jsx(te,{variant:"bordered",className:"overflow-hidden",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),a.jsx(Mo,{status:p.status})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Zn,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsx("span",{children:((x=s[p.equipmentId])==null?void 0:x.name)||"Equipment"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(th,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsx("span",{children:p.location})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Ms,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(ys,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),a.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&a.jsxs(a.Fragment,{children:[a.jsx(U,{variant:"success",size:"sm",leftIcon:a.jsx(mr,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),a.jsx(U,{variant:"destructive",size:"sm",leftIcon:a.jsx(nh,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&a.jsx(U,{variant:"secondary",size:"sm",leftIcon:a.jsx(mr,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Equipment Assignment"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-4",children:[Object.values(s).map(p=>a.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[a.jsx(Zn,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(s).length===0&&a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Operator Information"})}),a.jsxs(le,{children:[a.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[a.jsx("div",{className:"mr-4",children:a.jsx(JM,{className:"h-16 w-16 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),a.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),a.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&a.jsx(ot,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function ge({label:e,helperText:t,error:n,fullWidth:s=!0,className:r="",type:i="text",id:o,name:l,...c}){const u=o||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return a.jsxs("div",{className:`${s?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&a.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsx(Ce,{id:u,name:l||u,type:i,className:`${s?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${r}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&a.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&a.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function je({options:e,value:t,onChange:n,label:s,error:r,leftIcon:i,className:o="",...l}){return a.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[s&&a.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[s,l.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsxs("div",{className:"relative",children:[i&&a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",a.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${r?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${o}
          `,...l,children:e.map(c=>a.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:a.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r&&a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:r})]})}function Vn({label:e,error:t,helperText:n,className:s="",...r}){const i=r.id||`textarea-${r.name||Math.random().toString(36).substring(2,9)}`;return a.jsxs("div",{className:"space-y-2",children:[e&&a.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${r.required?"text-blue-700":"text-green-700"}`,children:[e,r.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!r.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${r.required?"bg-blue-50 border-blue-200 focus:bg-white":r.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${s}`,placeholder:r.placeholder?`${r.placeholder}${r.required?" *":""}`:"",...r}),t&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}Vn.displayName="TextArea";var aB=Object.defineProperty,lB=(e,t,n)=>t in e?aB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bf=(e,t,n)=>(lB(e,typeof t!="symbol"?t+"":t,n),n);let cB=class{constructor(){Bf(this,"current",this.detect()),Bf(this,"handoffState","pending"),Bf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Cs=new cB,Dn=(e,t)=>{Cs.isServer?v.useEffect(e,t):v.useLayoutEffect(e,t)};function Es(e){let t=v.useRef(e);return Dn(()=>{t.current=e},[e]),t}let We=function(e){let t=Es(e);return re.useCallback((...n)=>t.current(...n),[t])};function yh(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Si(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return yh(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=Si();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function sy(){let[e]=v.useState(Si);return v.useEffect(()=>()=>e.dispose(),[e]),e}function uB(){let e=typeof document>"u";return"useSyncExternalStore"in no?(t=>t.useSyncExternalStore)(no)(()=>()=>{},()=>!1,()=>!e):!1}function Ao(){let e=uB(),[t,n]=v.useState(Cs.isHandoffComplete);return t&&Cs.isHandoffComplete===!1&&n(!1),v.useEffect(()=>{t!==!0&&n(!0)},[t]),v.useEffect(()=>Cs.handoff(),[]),e?!1:t}var Bw;let Io=(Bw=re.useId)!=null?Bw:function(){let e=Ao(),[t,n]=re.useState(e?()=>Cs.nextId():null);return Dn(()=>{t===null&&n(Cs.nextId())},[t]),t!=null?""+t:void 0};function Tt(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Tt),s}function f2(e){return Cs.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Up=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Yr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Yr||{}),m2=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(m2||{}),dB=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(dB||{});function hB(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Up)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var p2=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(p2||{});function fB(e,t=0){var n;return e===((n=f2(e))==null?void 0:n.body)?!1:Tt(t,{0(){return e.matches(Up)},1(){let s=e;for(;s!==null;){if(s.matches(Up))return!0;s=s.parentElement}return!1}})}var mB=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(mB||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oi(e){e==null||e.focus({preventScroll:!0})}let pB=["textarea","input"].join(",");function gB(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,pB))!=null?n:!1}function xB(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Nu(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?xB(e):e:hB(e);r.length>0&&o.length>1&&(o=o.filter(m=>!r.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=o.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=o[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&gB(f)&&f.select(),2}function g2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function yB(){return/Android/gi.test(window.navigator.userAgent)}function vB(){return g2()||yB()}function Gc(e,t,n){let s=Es(t);v.useEffect(()=>{function r(i){s.current(i)}return document.addEventListener(e,r,n),()=>document.removeEventListener(e,r,n)},[e,n])}function x2(e,t,n){let s=Es(t);v.useEffect(()=>{function r(i){s.current(i)}return window.addEventListener(e,r,n),()=>window.removeEventListener(e,r,n)},[e,n])}function bB(e,t,n=!0){let s=v.useRef(!1);v.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function r(o,l){if(!s.current||o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||o.composed&&o.composedPath().includes(h))return}return!fB(c,p2.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}let i=v.useRef(null);Gc("pointerdown",o=>{var l,c;s.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Gc("mousedown",o=>{var l,c;s.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Gc("click",o=>{vB()||i.current&&(r(o,()=>i.current),i.current=null)},!0),Gc("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),x2("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Xl(...e){return v.useMemo(()=>f2(...e),[...e])}let y2=Symbol();function wB(e,t=!0){return Object.assign(e,{[y2]:t})}function Wn(...e){let t=v.useRef(e);v.useEffect(()=>{t.current=e},[e]);let n=We(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||(s==null?void 0:s[y2]))?void 0:n}function ry(e,t){let n=v.useRef([]),s=We(e);v.useEffect(()=>{let r=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let l=s(t,r);return n.current=t,l}},[s,...t])}function vd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var bd=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(bd||{}),rr=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(rr||{});function Tn({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??SB;let c=v2(t,e);if(i)return Yc(c,n,s,o,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Yc(h,n,s,o,l)}if(u&1){let{unmount:d=!0,...h}=c;return Tt(d?0:1,{0(){return null},1(){return Yc({...h,hidden:!0,style:{display:"none"}},n,s,o,l)}})}return Yc(c,n,s,o,l)}function Yc(e,t={},n,s,r){let{as:i=n,children:o,refName:l="ref",...c}=zf(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,x]of Object.entries(t))typeof x=="boolean"&&(f=!0),x===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===v.Fragment&&Object.keys(zw(c)).length>0){if(!v.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...x)=>vd(f==null?void 0:f.className(...x),c.className):vd(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return v.cloneElement(d,Object.assign({},v2(d.props,zw(zf(c,["ref"]))),h,u,{ref:r(d.ref,u.ref)},p))}return v.createElement(i,Object.assign({},zf(c,["ref"]),i!==v.Fragment&&u,i!==v.Fragment&&h),d)}function SB(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function v2(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](r,...i){let o=n[s];for(let l of o){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function dn(e){var t;return Object.assign(v.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function zw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function zf(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let jB="div";var wd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(wd||{});function NB(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Tn({ourProps:i,theirProps:r,slot:{},defaultTag:jB,name:"Hidden"})}let Wp=dn(NB),iy=v.createContext(null);iy.displayName="OpenClosedContext";var en=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(en||{});function oy(){return v.useContext(iy)}function CB({value:e,children:t}){return re.createElement(iy.Provider,{value:e},t)}function EB(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Ks=[];EB(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Ks[0]!==t.target&&(Ks.unshift(t.target),Ks=Ks.filter(n=>n!=null&&n.isConnected),Ks.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function kB(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&_B(n)?!1:s}function _B(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var b2=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(b2||{});function w2(e,t,n,s){let r=Es(n);v.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function Jl(){let e=v.useRef(!1);return Dn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function S2(e){let t=We(e),n=v.useRef(!1);v.useEffect(()=>(n.current=!1,()=>{n.current=!0,yh(()=>{n.current&&t()})}),[t])}var Ea=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ea||{});function DB(){let e=v.useRef(0);return x2("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function j2(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let TB="div";var N2=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(N2||{});function PB(e,t){let n=v.useRef(null),s=Wn(n,t),{initialFocus:r,containers:i,features:o=30,...l}=e;Ao()||(o=1);let c=Xl(n);IB({ownerDocument:c},!!(o&16));let u=RB({ownerDocument:c,container:n,initialFocus:r},!!(o&2));OB({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(o&8));let d=DB(),h=We(x=>{let b=n.current;b&&(w=>w())(()=>{Tt(d.current,{[Ea.Forwards]:()=>{Nu(b,Yr.First,{skipElements:[x.relatedTarget]})},[Ea.Backwards]:()=>{Nu(b,Yr.Last,{skipElements:[x.relatedTarget]})}})})}),f=sy(),m=v.useRef(!1),p={ref:s,onKeyDown(x){x.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(x){let b=j2(i);n.current instanceof HTMLElement&&b.add(n.current);let w=x.relatedTarget;w instanceof HTMLElement&&w.dataset.headlessuiFocusGuard!=="true"&&(C2(b,w)||(m.current?Nu(n.current,Tt(d.current,{[Ea.Forwards]:()=>Yr.Next,[Ea.Backwards]:()=>Yr.Previous})|Yr.WrapAround,{relativeTo:x.target}):x.target instanceof HTMLElement&&oi(x.target)))}};return re.createElement(re.Fragment,null,!!(o&4)&&re.createElement(Wp,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:wd.Focusable}),Tn({ourProps:p,theirProps:l,defaultTag:TB,name:"FocusTrap"}),!!(o&4)&&re.createElement(Wp,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:wd.Focusable}))}let MB=dn(PB),sa=Object.assign(MB,{features:N2});function AB(e=!0){let t=v.useRef(Ks.slice());return ry(([n],[s])=>{s===!0&&n===!1&&yh(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Ks.slice())},[e,Ks,t]),We(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function IB({ownerDocument:e},t){let n=AB(t);ry(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&oi(n())},[t]),S2(()=>{t&&oi(n())})}function RB({ownerDocument:e,container:t,initialFocus:n},s){let r=v.useRef(null),i=Jl();return ry(()=>{if(!s)return;let o=t.current;o&&yh(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){r.current=l;return}}else if(o.contains(l)){r.current=l;return}n!=null&&n.current?oi(n.current):Nu(o,Yr.First)===m2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.current=e==null?void 0:e.activeElement})},[s]),r}function OB({ownerDocument:e,container:t,containers:n,previousActiveElement:s},r){let i=Jl();w2(e==null?void 0:e.defaultView,"focus",o=>{if(!r||!i.current)return;let l=j2(n);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let u=o.target;u&&u instanceof HTMLElement?C2(l,u)?(s.current=u,oi(u)):(o.preventDefault(),o.stopPropagation(),oi(c)):oi(s.current)},!0)}function C2(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let E2=v.createContext(!1);function LB(){return v.useContext(E2)}function Hp(e){return re.createElement(E2.Provider,{value:e.force},e.children)}function FB(e){let t=LB(),n=v.useContext(k2),s=Xl(e),[r,i]=v.useState(()=>{if(!t&&n!==null||Cs.isServer)return null;let o=s==null?void 0:s.getElementById("headlessui-portal-root");if(o)return o;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return v.useEffect(()=>{r!==null&&(s!=null&&s.body.contains(r)||s==null||s.body.appendChild(r))},[r,s]),v.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let $B=v.Fragment;function BB(e,t){let n=e,s=v.useRef(null),r=Wn(wB(d=>{s.current=d}),t),i=Xl(s),o=FB(s),[l]=v.useState(()=>{var d;return Cs.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=v.useContext(qp),u=Ao();return Dn(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),Dn(()=>{if(l&&c)return c.register(l)},[c,l]),S2(()=>{var d;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))}),u?!o||!l?null:$l.createPortal(Tn({ourProps:{ref:r},theirProps:n,defaultTag:$B,name:"Portal"}),l):null}let zB=v.Fragment,k2=v.createContext(null);function VB(e,t){let{target:n,...s}=e,r={ref:Wn(t)};return re.createElement(k2.Provider,{value:n},Tn({ourProps:r,theirProps:s,defaultTag:zB,name:"Popover.Group"}))}let qp=v.createContext(null);function UB(){let e=v.useContext(qp),t=v.useRef([]),n=We(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=We(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=v.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,v.useMemo(()=>function({children:i}){return re.createElement(qp.Provider,{value:r},i)},[r])]}let WB=dn(BB),HB=dn(VB),Gp=Object.assign(WB,{Group:HB});function qB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const GB=typeof Object.is=="function"?Object.is:qB,{useState:YB,useEffect:QB,useLayoutEffect:KB,useDebugValue:XB}=no;function JB(e,t,n){const s=t(),[{inst:r},i]=YB({inst:{value:s,getSnapshot:t}});return KB(()=>{r.value=s,r.getSnapshot=t,Vf(r)&&i({inst:r})},[e,s,t]),QB(()=>(Vf(r)&&i({inst:r}),e(()=>{Vf(r)&&i({inst:r})})),[e]),XB(s),s}function Vf(e){const t=e.getSnapshot,n=e.value;try{const s=t();return!GB(n,s)}catch{return!0}}function ZB(e,t,n){return t()}const ez=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tz=!ez,nz=tz?ZB:JB,sz="useSyncExternalStore"in no?(e=>e.useSyncExternalStore)(no):nz;function rz(e){return sz(e.subscribe,e.getSnapshot,e.getSnapshot)}function iz(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(n,...i);o&&(n=o,s.forEach(l=>l()))}}}function oz(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,r=s.clientWidth-s.offsetWidth,i=e-r;n.style(s,"paddingRight",`${i}px`)}}}function az(){return g2()?{before({doc:e,d:t,meta:n}){function s(r){return n.containers.flatMap(i=>i()).some(i=>i.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Si();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!s(d)&&(o=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function lz(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function cz(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ei=iz(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Si(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:cz(n)},r=[az(),oz(),lz()];r.forEach(({before:i})=>i==null?void 0:i(s)),r.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ei.subscribe(()=>{let e=ei.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&ei.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ei.dispatch("TEARDOWN",n)}});function uz(e,t,n){let s=rz(ei),r=e?s.get(e):void 0,i=r?r.count>0:!1;return Dn(()=>{if(!(!e||!t))return ei.dispatch("PUSH",e,n),()=>ei.dispatch("POP",e,n)},[t,e]),i}let Uf=new Map,ra=new Map;function Vw(e,t=!0){Dn(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function r(){var o;if(!s)return;let l=(o=ra.get(s))!=null?o:1;if(l===1?ra.delete(s):ra.set(s,l-1),l!==1)return;let c=Uf.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,Uf.delete(s))}let i=(n=ra.get(s))!=null?n:0;return ra.set(s,i+1),i!==0||(Uf.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),r},[e,t])}function dz({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let r=v.useRef((s=n==null?void 0:n.current)!=null?s:null),i=Xl(r),o=We(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(r.current)||h.contains((u=(c=r.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:o,contains:We(l=>o().some(c=>c.contains(l))),mainTreeNodeRef:r,MainTreeNode:v.useMemo(()=>function(){return n!=null?null:re.createElement(Wp,{features:wd.Hidden,ref:r})},[r,n])}}let ay=v.createContext(()=>{});ay.displayName="StackContext";var Yp=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Yp||{});function hz(){return v.useContext(ay)}function fz({children:e,onUpdate:t,type:n,element:s,enabled:r}){let i=hz(),o=We((...l)=>{t==null||t(...l),i(...l)});return Dn(()=>{let l=r===void 0||r===!0;return l&&o(0,n,s),()=>{l&&o(1,n,s)}},[o,n,s,r]),re.createElement(ay.Provider,{value:o},e)}let _2=v.createContext(null);function D2(){let e=v.useContext(_2);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,D2),t}return e}function mz(){let[e,t]=v.useState([]);return[e.length>0?e.join(" "):void 0,v.useMemo(()=>function(n){let s=We(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=v.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return re.createElement(_2.Provider,{value:r},n.children)},[t])]}let pz="p";function gz(e,t){let n=Io(),{id:s=`headlessui-description-${n}`,...r}=e,i=D2(),o=Wn(t);Dn(()=>i.register(s),[s,i.register]);let l={ref:o,...i.props,id:s};return Tn({ourProps:l,theirProps:r,slot:i.slot||{},defaultTag:pz,name:i.name||"Description"})}let xz=dn(gz),yz=Object.assign(xz,{});var vz=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(vz||{}),bz=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(bz||{});let wz={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Sd=v.createContext(null);Sd.displayName="DialogContext";function Zl(e){let t=v.useContext(Sd);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zl),n}return t}function Sz(e,t,n=()=>[document.body]){uz(e,t,s=>{var r;return{containers:[...(r=s.containers)!=null?r:[],n]}})}function jz(e,t){return Tt(t.type,wz,e,t)}let Nz="div",Cz=bd.RenderStrategy|bd.Static;function Ez(e,t){let n=Io(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:o,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=v.useState(0),f=v.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=oy();r===void 0&&m!==null&&(r=(m&en.Open)===en.Open);let p=v.useRef(null),x=Wn(p,t),b=Xl(p),w=e.hasOwnProperty("open")||m!==null,y=e.hasOwnProperty("onClose");if(!w&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!w)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof r!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let g=r?0:1,[S,j]=v.useReducer(jz,{titleId:null,descriptionId:null,panelRef:v.createRef()}),k=We(()=>i(!1)),_=We(q=>j({type:0,id:q})),E=Ao()?c?!1:g===0:!1,N=d>1,D=v.useContext(Sd)!==null,[M,L]=UB(),z={get current(){var q;return(q=S.panelRef.current)!=null?q:p.current}},{resolveContainers:H,mainTreeNodeRef:B,MainTreeNode:A}=dz({portals:M,defaultContainers:[z]}),R=N?"parent":"leaf",T=m!==null?(m&en.Closing)===en.Closing:!1,I=D||T?!1:E,O=v.useCallback(()=>{var q,J;return(J=Array.from((q=b==null?void 0:b.querySelectorAll("body > *"))!=null?q:[]).find(X=>X.id==="headlessui-portal-root"?!1:X.contains(B.current)&&X instanceof HTMLElement))!=null?J:null},[B]);Vw(O,I);let V=N?!0:E,Y=v.useCallback(()=>{var q,J;return(J=Array.from((q=b==null?void 0:b.querySelectorAll("[data-headlessui-portal]"))!=null?q:[]).find(X=>X.contains(B.current)&&X instanceof HTMLElement))!=null?J:null},[B]);Vw(Y,V),bB(H,q=>{q.preventDefault(),k()},!(!E||N));let ne=!(N||g!==0);w2(b==null?void 0:b.defaultView,"keydown",q=>{ne&&(q.defaultPrevented||q.key===b2.Escape&&(q.preventDefault(),q.stopPropagation(),k()))}),Sz(b,!(T||g!==0||D),H),v.useEffect(()=>{if(g!==0||!p.current)return;let q=new ResizeObserver(J=>{for(let X of J){let G=X.target.getBoundingClientRect();G.x===0&&G.y===0&&G.width===0&&G.height===0&&k()}});return q.observe(p.current),()=>q.disconnect()},[g,p,k]);let[W,C]=mz(),P=v.useMemo(()=>[{dialogState:g,close:k,setTitleId:_},S],[g,S,k,_]),F=v.useMemo(()=>({open:g===0}),[g]),$={ref:x,id:s,role:l,"aria-modal":g===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":W};return re.createElement(fz,{type:"Dialog",enabled:g===0,element:p,onUpdate:We((q,J)=>{J==="Dialog"&&Tt(q,{[Yp.Add]:()=>h(X=>X+1),[Yp.Remove]:()=>h(X=>X-1)})})},re.createElement(Hp,{force:!0},re.createElement(Gp,null,re.createElement(Sd.Provider,{value:P},re.createElement(Gp.Group,{target:p},re.createElement(Hp,{force:!1},re.createElement(C,{slot:F,name:"Dialog.Description"},re.createElement(sa,{initialFocus:o,containers:H,features:E?Tt(R,{parent:sa.features.RestoreFocus,leaf:sa.features.All&~sa.features.FocusLock}):sa.features.None},re.createElement(L,null,Tn({ourProps:$,theirProps:u,slot:F,defaultTag:Nz,features:Cz,visible:g===0,name:"Dialog"}))))))))),re.createElement(A,null))}let kz="div";function _z(e,t){let n=Io(),{id:s=`headlessui-dialog-overlay-${n}`,...r}=e,[{dialogState:i,close:o}]=Zl("Dialog.Overlay"),l=Wn(t),c=We(d=>{if(d.target===d.currentTarget){if(kB(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),o()}}),u=v.useMemo(()=>({open:i===0}),[i]);return Tn({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:r,slot:u,defaultTag:kz,name:"Dialog.Overlay"})}let Dz="div";function Tz(e,t){let n=Io(),{id:s=`headlessui-dialog-backdrop-${n}`,...r}=e,[{dialogState:i},o]=Zl("Dialog.Backdrop"),l=Wn(t);v.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let c=v.useMemo(()=>({open:i===0}),[i]);return re.createElement(Hp,{force:!0},re.createElement(Gp,null,Tn({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:r,slot:c,defaultTag:Dz,name:"Dialog.Backdrop"})))}let Pz="div";function Mz(e,t){let n=Io(),{id:s=`headlessui-dialog-panel-${n}`,...r}=e,[{dialogState:i},o]=Zl("Dialog.Panel"),l=Wn(t,o.panelRef),c=v.useMemo(()=>({open:i===0}),[i]),u=We(d=>{d.stopPropagation()});return Tn({ourProps:{ref:l,id:s,onClick:u},theirProps:r,slot:c,defaultTag:Pz,name:"Dialog.Panel"})}let Az="h2";function Iz(e,t){let n=Io(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:o}]=Zl("Dialog.Title"),l=Wn(t);v.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=v.useMemo(()=>({open:i===0}),[i]);return Tn({ourProps:{ref:l,id:s},theirProps:r,slot:c,defaultTag:Az,name:"Dialog.Title"})}let Rz=dn(Ez),Oz=dn(Tz),Lz=dn(Mz),Fz=dn(_z),$z=dn(Iz),Qc=Object.assign(Rz,{Backdrop:Oz,Panel:Lz,Overlay:Fz,Title:$z,Description:yz});function Bz(e=0){let[t,n]=v.useState(e),s=Jl(),r=v.useCallback(c=>{s.current&&n(u=>u|c)},[t,s]),i=v.useCallback(c=>!!(t&c),[t]),o=v.useCallback(c=>{s.current&&n(u=>u&~c)},[n,s]),l=v.useCallback(c=>{s.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}function zz(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Wf(e,...t){e&&t.length>0&&e.classList.add(...t)}function Hf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function Vz(e,t){let n=Si();if(!e)return n.dispose;let{transitionDuration:s,transitionDelay:r}=getComputedStyle(e),[i,o]=[s,r].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function Uz(e,t,n,s){let r=n?"enter":"leave",i=Si(),o=s!==void 0?zz(s):()=>{};r==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=Tt(r,{enter:()=>t.enter,leave:()=>t.leave}),c=Tt(r,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=Tt(r,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Hf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Wf(e,...t.base,...l,...u),i.nextFrame(()=>{Hf(e,...t.base,...l,...u),Wf(e,...t.base,...l,...c),Vz(e,()=>(Hf(e,...t.base,...l),Wf(e,...t.base,...t.entered),o()))}),i.dispose}function Wz({immediate:e,container:t,direction:n,classes:s,onStart:r,onStop:i}){let o=Jl(),l=sy(),c=Es(n);Dn(()=>{e&&(c.current="enter")},[e]),Dn(()=>{let u=Si();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&o.current)return u.dispose(),r.current(c.current),u.add(Uz(d,s.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function $s(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let vh=v.createContext(null);vh.displayName="TransitionContext";var Hz=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Hz||{});function qz(){let e=v.useContext(vh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Gz(){let e=v.useContext(bh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let bh=v.createContext(null);bh.displayName="NestingContext";function wh(e){return"children"in e?wh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function T2(e,t){let n=Es(e),s=v.useRef([]),r=Jl(),i=sy(),o=We((m,p=rr.Hidden)=>{let x=s.current.findIndex(({el:b})=>b===m);x!==-1&&(Tt(p,{[rr.Unmount](){s.current.splice(x,1)},[rr.Hidden](){s.current[x].state="hidden"}}),i.microTask(()=>{var b;!wh(s)&&r.current&&((b=n.current)==null||b.call(n))}))}),l=We(m=>{let p=s.current.find(({el:x})=>x===m);return p?p.state!=="visible"&&(p.state="visible"):s.current.push({el:m,state:"visible"}),()=>o(m,rr.Unmount)}),c=v.useRef([]),u=v.useRef(Promise.resolve()),d=v.useRef({enter:[],leave:[],idle:[]}),h=We((m,p,x)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([b])=>b!==m)),t==null||t.chains.current[p].push([m,new Promise(b=>{c.current.push(b)})]),t==null||t.chains.current[p].push([m,new Promise(b=>{Promise.all(d.current[p].map(([w,y])=>y)).then(()=>b())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>x(p)):x(p)}),f=We((m,p,x)=>{Promise.all(d.current[p].splice(0).map(([b,w])=>w)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>x(p))});return v.useMemo(()=>({children:s,register:l,unregister:o,onStart:h,onStop:f,wait:u,chains:d}),[l,o,s,h,f,d,u])}function Yz(){}let Qz=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Uw(e){var t;let n={};for(let s of Qz)n[s]=(t=e[s])!=null?t:Yz;return n}function Kz(e){let t=v.useRef(Uw(e));return v.useEffect(()=>{t.current=Uw(e)},[e]),t}let Xz="div",P2=bd.RenderStrategy;function Jz(e,t){var n,s;let{beforeEnter:r,afterEnter:i,beforeLeave:o,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...x}=e,b=v.useRef(null),w=Wn(b,t),y=(n=x.unmount)==null||n?rr.Unmount:rr.Hidden,{show:g,appear:S,initial:j}=qz(),[k,_]=v.useState(g?"visible":"hidden"),E=Gz(),{register:N,unregister:D}=E;v.useEffect(()=>N(b),[N,b]),v.useEffect(()=>{if(y===rr.Hidden&&b.current){if(g&&k!=="visible"){_("visible");return}return Tt(k,{hidden:()=>D(b),visible:()=>N(b)})}},[k,b,N,D,g,y]);let M=Es({base:$s(x.className),enter:$s(c),enterFrom:$s(u),enterTo:$s(d),entered:$s(h),leave:$s(f),leaveFrom:$s(m),leaveTo:$s(p)}),L=Kz({beforeEnter:r,afterEnter:i,beforeLeave:o,afterLeave:l}),z=Ao();v.useEffect(()=>{if(z&&k==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,k,z]);let H=j&&!S,B=S&&g&&j,A=!z||H?"idle":g?"enter":"leave",R=Bz(0),T=We(ne=>Tt(ne,{enter:()=>{R.addFlag(en.Opening),L.current.beforeEnter()},leave:()=>{R.addFlag(en.Closing),L.current.beforeLeave()},idle:()=>{}})),I=We(ne=>Tt(ne,{enter:()=>{R.removeFlag(en.Opening),L.current.afterEnter()},leave:()=>{R.removeFlag(en.Closing),L.current.afterLeave()},idle:()=>{}})),O=T2(()=>{_("hidden"),D(b)},E),V=v.useRef(!1);Wz({immediate:B,container:b,classes:M,direction:A,onStart:Es(ne=>{V.current=!0,O.onStart(b,ne,T)}),onStop:Es(ne=>{V.current=!1,O.onStop(b,ne,I),ne==="leave"&&!wh(O)&&(_("hidden"),D(b))})});let Y=x,ce={ref:w};return B?Y={...Y,className:vd(x.className,...M.current.enter,...M.current.enterFrom)}:V.current&&(Y.className=vd(x.className,(s=b.current)==null?void 0:s.className),Y.className===""&&delete Y.className),re.createElement(bh.Provider,{value:O},re.createElement(CB,{value:Tt(k,{visible:en.Open,hidden:en.Closed})|R.flags},Tn({ourProps:ce,theirProps:Y,defaultTag:Xz,features:P2,visible:k==="visible",name:"Transition.Child"})))}function Zz(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,o=v.useRef(null),l=Wn(o,t);Ao();let c=oy();if(n===void 0&&c!==null&&(n=(c&en.Open)===en.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=v.useState(n?"visible":"hidden"),h=T2(()=>{d("hidden")}),[f,m]=v.useState(!0),p=v.useRef([n]);Dn(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let x=v.useMemo(()=>({show:n,appear:s,initial:f}),[n,s,f]);v.useEffect(()=>{if(n)d("visible");else if(!wh(h))d("hidden");else{let g=o.current;if(!g)return;let S=g.getBoundingClientRect();S.x===0&&S.y===0&&S.width===0&&S.height===0&&d("hidden")}},[n,h]);let b={unmount:r},w=We(()=>{var g;f&&m(!1),(g=e.beforeEnter)==null||g.call(e)}),y=We(()=>{var g;f&&m(!1),(g=e.beforeLeave)==null||g.call(e)});return re.createElement(bh.Provider,{value:h},re.createElement(vh.Provider,{value:x},Tn({ourProps:{...b,as:v.Fragment,children:re.createElement(M2,{ref:l,...b,...i,beforeEnter:w,beforeLeave:y})},theirProps:{},defaultTag:v.Fragment,features:P2,visible:u==="visible",name:"Transition"})))}function eV(e,t){let n=v.useContext(vh)!==null,s=oy()!==null;return re.createElement(re.Fragment,null,!n&&s?re.createElement(Qp,{ref:t,...e}):re.createElement(M2,{ref:t,...e}))}let Qp=dn(Zz),M2=dn(Jz),tV=dn(eV),qf=Object.assign(Qp,{Child:tV,Root:Qp});const nV={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function dt({isOpen:e,onClose:t,title:n,description:s,children:r,size:i="md"}){return a.jsx(qf,{show:e,as:v.Fragment,children:a.jsxs(Qc,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(qf.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),a.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:a.jsx(qf.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:a.jsxs(Qc.Panel,{className:`w-full ${nV[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[a.jsxs("div",{children:[n&&a.jsx(Qc.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),s&&a.jsx(Qc.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:s})]}),a.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(ho,{className:"h-5 w-5","aria-hidden":"true"})]})]}),a.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:r})]})})})})]})})}const sV={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:3001/api",VITE_DB_HOST:"localhost",VITE_DB_NAME:"asp_crm",VITE_DB_PASSWORD:"vedant21",VITE_DB_PORT:"5432",VITE_DB_SSL:"false",VITE_DB_USER:"postgres",VITE_JWT_SECRET:"560d29644771b5a0ef1d3dcdfc7c44e93bf29e037b77f8c23b94257887219eb815d751d4f6703423b1463dc0a0c33bf365ecc7b16518c65d74e6342435e12978",VITE_USER_NODE_ENV:"production",VITE_USE_MOCKS:"false"},Kc=typeof import.meta<"u"?sV||{}:{},Xc={VITE_API_URL:"http://localhost:3001/api",VITE_DB_HOST:"localhost",VITE_DB_PORT:"5432",VITE_DB_NAME:"asp_crm",VITE_DB_USER:"postgres"};new Proxy({},{get:(e,t)=>{if(Kc[t]!==void 0)return Kc[t];if(Xc[t]!==void 0)return Xc[t];if(typeof t=="string"&&t.startsWith("VITE_")){const n=t.substring(5);if(Kc[n]!==void 0)return Kc[n];if(Xc[n]!==void 0)return Xc[n]}}});const rV=()=>(console.log("[dotenv.shim] Using browser-compatible dotenv.config()"),{parsed:{}}),iV={config:rV,parse:()=>({})};var Di={};const Gs=typeof window<"u";Gs||iV.config();const oV={host:Gs?"localhost":Di.VITE_DB_HOST||"localhost",port:parseInt(Gs?"5432":Di.VITE_DB_PORT||"5432"),database:Gs?"asp_crm":Di.VITE_DB_NAME||"asp_crm",user:Gs?"postgres":Di.VITE_DB_USER||"postgres",password:Gs?"postgres":Di.VITE_DB_PASSWORD||"vedant21",ssl:Gs?!1:(Di.VITE_DB_SSL||"false")==="true",max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3},Sh=new l2(oV);Gs&&console.warn("PostgreSQL connection is not available in browser environment. This is a mock implementation.");Sh.on("connect",()=>{console.log("PostgreSQL pool connection established")});Sh.on("error",e=>{console.error("Unexpected error on idle PostgreSQL client",e)});const ec=async(e,t)=>{const n=Date.now();try{const s=await Sh.query(e,t),r=Date.now()-n;return console.log("Executed query",{text:e,duration:`${r}ms`,rows:s.rowCount}),s}catch(s){throw console.error("Error executing query",{text:e,error:s}),s}},A2=async()=>{const e=await Sh.connect(),t=e.release;return e.release=()=>{console.log("PostgreSQL client released back to pool"),t.apply(e)},e},aV=async()=>{try{console.log("Getting all customers directly from PostgreSQL database");const e=await ec(`
      SELECT * FROM customers 
      ORDER BY created_at DESC
    `);return console.log(`Retrieved ${e.rows.length} customers from database`),e.rows.map(n=>({id:n.id,customerId:n.id,name:n.name,companyName:n.company_name,contactName:n.contact_name,email:n.email,phone:n.phone,address:n.address,type:n.type,designation:n.designation,notes:n.notes,createdAt:n.created_at,updatedAt:n.updated_at}))}catch(e){throw console.error("Error fetching customers:",e),e}},Ww=async e=>{try{if(!e)throw new Error("Invalid customer ID provided");console.log(`Getting customer ${e} from database`);const t=await ec("SELECT * FROM customers WHERE id = $1",[e]);if(t.rows.length===0)return console.log(`Customer ${e} not found in database`),null;const n=t.rows[0],s={id:n.id,name:n.name,contactName:n.contact_name,email:n.email,phone:n.phone,address:n.address,type:n.type,notes:n.notes,createdAt:n.created_at,updatedAt:n.updated_at};return console.log(`Retrieved customer: ${s.name}`),s}catch(t){throw console.error(`Error fetching customer ${e}:`,t),t}},lV=async e=>{const t=await A2();try{await t.query("BEGIN"),console.log("Creating customer in database");const s=(await t.query(`
      INSERT INTO customers (
        name, contact_name, email, phone, address, type, notes
      )
      VALUES ($1, $2, $3, $4, $5, $6, $7)
      RETURNING *
    `,[e.name,e.contactName,e.email,e.phone,e.address,e.type,e.notes])).rows[0];await t.query("COMMIT");const r={id:s.id,name:s.name,contactName:s.contact_name,email:s.email,phone:s.phone,address:s.address,type:s.type,notes:s.notes,createdAt:s.created_at,updatedAt:s.updated_at};return console.log("Customer created successfully:",r.id),r}catch(n){throw await t.query("ROLLBACK"),console.error("Error creating customer:",n),n}finally{t.release()}},cV=async(e,t)=>{const n=await A2();try{if(await n.query("BEGIN"),!e)throw new Error("Invalid customer ID provided");if(console.log(`Updating customer ${e} in database`),(await n.query("SELECT * FROM customers WHERE id = $1",[e])).rowCount===0)return console.log(`Customer ${e} not found for update`),null;const r=[],i=[];let o=1;return t.name!==void 0&&(r.push(`name = $${o++}`),i.push(t.name)),t.contactName!==void 0&&(r.push(`contact_name = $${o++}`),i.push(t.contactName)),t.email!==void 0&&(r.push(`email = $${o++}`),i.push(t.email)),t.phone!==void 0&&(r.push(`phone = $${o++}`),i.push(t.phone)),t.address!==void 0&&(r.push(`address = $${o++}`),i.push(t.address)),t.type!==void 0&&(r.push(`type = $${o++}`),i.push(t.type)),t.notes!==void 0&&(r.push(`notes = $${o++}`),i.push(t.notes)),i.push(e),r.length===0?(console.log(`No fields to update for customer ${e}`),await n.query("COMMIT"),n.release(),Ww(e)):(await n.query(`
      UPDATE customers
      SET ${r.join(", ")}
      WHERE id = $${o}
    `,i),await n.query("COMMIT"),console.log(`Customer ${e} updated successfully`),n.release(),Ww(e))}catch(s){throw await n.query("ROLLBACK"),console.error(`Error updating customer ${e}:`,s),s}finally{n.release()}},uV=async e=>{try{if(!e)throw new Error("Invalid customer ID provided");console.log(`Deleting customer ${e} from database`);const n=(await ec("DELETE FROM customers WHERE id = $1 RETURNING id",[e])).rows.length>0;return n?console.log(`Customer ${e} deleted successfully`):console.warn(`Customer ${e} not found for deletion`),n}catch(t){throw console.error(`Error deleting customer ${e}:`,t),t}},dV=async e=>{try{console.log(`Getting contacts for customer ${e} from database`);const n=(await ec(`
      SELECT * FROM contacts 
      WHERE customer_id = $1 
      ORDER BY created_at DESC
    `,[e])).rows.map(s=>({id:s.id,customerId:s.customer_id,name:s.name,email:s.email,phone:s.phone,role:s.role||""}));return console.log(`Retrieved ${n.length} contacts for customer ${e}`),n}catch(t){throw console.error(`Error fetching contacts for customer ${e}:`,t),t}},hV=async e=>{try{if(!e)throw new Error("Invalid contact ID provided");console.log(`Deleting contact ${e} from database`);const n=(await ec("DELETE FROM contacts WHERE id = $1 RETURNING id",[e])).rows.length>0;return n?console.log(`Contact ${e} deleted successfully`):console.warn(`Contact ${e} not found for deletion`),n}catch(t){throw console.error(`Error deleting contact ${e}:`,t),t}},ly=async()=>aV(),cy=async e=>lV(e),I2=async(e,t)=>cV(e,t),R2=async e=>uV(e),O2=async e=>dV(e),L2=async e=>hV(e),fV=Object.freeze(Object.defineProperty({__proto__:null,createCustomer:cy,deleteContact:L2,deleteCustomer:R2,getContactsByCustomer:O2,getCustomers:ly,updateCustomer:I2},Symbol.toStringTag,{value:"Module"}));function mV({isOpen:e,onClose:t,onSelect:n,initialCustomerData:s}){const[r,i]=v.useState("select"),[o,l]=v.useState([]),[c,u]=v.useState(""),[d,h]=v.useState(!0),[f,m]=v.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""});v.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{const y=await ly();l(y),h(!1)}catch(y){console.error("Error fetching customers:",y)}},x=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const y=await cy({...f,name:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A"});console.log("Created new customer:",y),n(y)}catch(y){console.error("Error creating customer:",y),alert("Error creating customer")}},b=y=>{console.log("Selected existing customer:",y),n(y)},w=o.filter(y=>{var g;return y.name.toLowerCase().includes(c.toLowerCase())||y.email.toLowerCase().includes(c.toLowerCase())||((g=y.customerId)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))});return a.jsx(dt,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(U,{variant:r==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),a.jsx(U,{variant:r==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),r==="select"?a.jsxs(a.Fragment,{children:["            ",a.jsxs("div",{className:"relative mb-2",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx(ge,{placeholder:"Search customers...",value:c,onChange:y=>u(y.target.value),className:"pl-10"}),c&&a.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),a.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?a.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[a.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):w.length===0?a.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):w.map(y=>a.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>b(y),children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"font-medium text-sm sm:text-base",children:y.name}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[y.companyName&&a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:y.companyName}),y.designation&&y.companyName&&a.jsx("div",{className:"hidden sm:inline-block text-gray-400",children:""}),y.designation&&a.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:y.designation})]}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:y.email}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500 mt-0.5",children:y.customerId})]})},y.id))})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(ge,{label:"Customer Name",value:f.name,onChange:y=>m(g=>({...g,name:y.target.value})),placeholder:"Enter customer name",required:!0}),a.jsx(ge,{label:"Company Name",value:f.companyName,onChange:y=>m(g=>({...g,companyName:y.target.value})),placeholder:"Enter company name",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(ge,{label:"Designation",value:f.designation,onChange:y=>m(g=>({...g,designation:y.target.value})),placeholder:"Enter designation",required:!0}),a.jsx(ge,{label:"Email",type:"email",value:f.email,onChange:y=>m(g=>({...g,email:y.target.value})),placeholder:"Enter email address",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(ge,{label:"Phone",value:f.phone,onChange:y=>m(g=>({...g,phone:y.target.value})),placeholder:"Enter phone number",required:!0}),a.jsx(ge,{label:"Address",value:f.address,onChange:y=>m(g=>({...g,address:y.target.value})),placeholder:"Enter address",required:!0})]}),"            ",a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[a.jsx(U,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),a.jsx(U,{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function uy(){return a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[a.jsx(er,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),a.jsxs("span",{children:["Fields highlighted in ",a.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",a.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),a.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[a.jsx(er,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),a.jsxs("span",{children:["Fields highlighted in ",a.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",a.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const pV=({data:e,dataType:t,className:n})=>{const[s,r]=v.useState(!1);return v.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),o=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});r(i||o)},[e]),s?a.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),a.jsxs("p",{children:["You are currently viewing ",a.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",a.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",a.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[a.jsx("li",{children:"Check that the API server is running"}),a.jsx("li",{children:"Verify database connection settings"}),a.jsxs("li",{children:["Run ",a.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),a.jsxs("li",{children:["Run ",a.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),a.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[a.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},Hw=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],gV=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],xV=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function yV(){const{user:e}=Ae(),t=Qt(),[n,s]=v.useState([]),[r,i]=v.useState([]),[o,l]=v.useState([]),[c,u]=v.useState(""),[d,h]=v.useState("all"),[f,m]=v.useState(!0),[p,x]=v.useState(!1),[b,w]=v.useState(!1),[y,g]=v.useState(null),[S,j]=v.useState({show:!1,title:""}),k=new Date().toISOString().split("T")[0],[_,E]=v.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:k,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[N,D]=v.useState(0),[M,L]=v.useState(null),[z,H]=v.useState(!1);v.useEffect(()=>{B(),A()},[]),v.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),R()},[n,c,d]);const B=async()=>{try{console.log("Fetching leads from API...");const W=await Ql();console.log("Leads data received:",W),s(W||[]),m(!1)}catch(W){console.error("Error fetching leads:",W),ee("Error fetching leads","error"),s([]),m(!1)}},A=async()=>{try{i([{id:"sales-uid-456",name:"Sales Agent"},{id:"sales-uid-789",name:"John Seller"},{id:"sales-uid-101",name:"Jane Dealmaker"}])}catch(W){console.error("Error fetching sales agents:",W),ee("Error fetching sales agents","error")}},R=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads`);let W=[...n];c&&(W=W.filter(C=>{var P,F,$,q;return((P=C==null?void 0:C.customerName)==null?void 0:P.toLowerCase().includes(c.toLowerCase()))||!1||((F=C==null?void 0:C.companyName)==null?void 0:F.toLowerCase().includes(c.toLowerCase()))||!1||(($=C==null?void 0:C.email)==null?void 0:$.toLowerCase().includes(c.toLowerCase()))||!1||((q=C==null?void 0:C.phone)==null?void 0:q.includes(c))||!1})),d!=="all"?W=W.filter(C=>(C==null?void 0:C.status)===d):W=W.filter(C=>(C==null?void 0:C.status)!=="converted"),console.log(`After filtering: ${W.length} leads match criteria`),l(W)},T=async W=>{var F;if(W.preventDefault(),!_.fullName||!_.phoneNumber||!_.email||!_.machineryType||!_.location||!_.startDate||!_.rentalDays){ee("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){ee("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(_.phoneNumber)){ee("Please enter a valid phone number","error");return}try{const $=(e==null?void 0:e.role)==="sales_agent"?e.id:_.assignedTo,q=(e==null?void 0:e.role)==="sales_agent"?e.name:((F=r.find(X=>X.id===_.assignedTo))==null?void 0:F.name)||"",J=await y6({customerName:_.fullName,companyName:_.companyName,email:_.email,phone:_.phoneNumber,serviceNeeded:_.machineryType,siteLocation:_.location,startDate:_.startDate,rentalDays:parseInt(_.rentalDays),shiftTiming:_.shiftTiming,status:"new",assignedTo:$,assignedToName:q,notes:_.notes,designation:_.designation});s(X=>[...X,J]),x(!1),ne(),ee("Lead created successfully","success")}catch($){console.error("Error creating lead:",$),ee("Error creating lead","error")}},I=async(W,C)=>{try{const P=await Ow(W,C);P&&(s(F=>F.map($=>$.id===W?P:$)),ee("Lead status updated","success"))}catch(P){console.error("Error updating lead status:",P),ee("Error updating lead status","error")}},O=async W=>{console.log("Selected customer:",W),L(W),w(!1),setTimeout(()=>{H(!0)},100)},V=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:y,selectedCustomer:M,dealValue:N}),!y){ee("No lead selected","error");return}if(!M){ee("No customer selected","error");return}const W=await q6({title:`Deal for ${M.name}`,description:`Deal created from lead for ${M.name}${M.companyName?` (${M.companyName})`:""}`,leadId:y.id,customerId:M.id,stage:"qualification",value:N,expectedCloseDate:new Date().toISOString(),customer:{name:M.name,email:M.email||y.email,phone:M.phone||y.phone,company:M.companyName||"",address:M.address||"",designation:M.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:y.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",W),await Ow(y.id,"converted"),s(C=>C.map(P=>P.id===y.id?{...P,status:"converted"}:P)),ee("Lead converted to deal successfully","success"),H(!1),w(!1),g(null),L(null),D(0),t("/deals")}catch(W){console.error("Error converting lead to deal:",W),ee("Error converting lead to deal","error")}finally{m(!1)}},Y=async W=>{if(W.status!=="qualified"){ee("Only qualified leads can be converted to deals","warning");return}g(W),w(!0)},ce=async(W,C)=>{try{if(C===""){console.log("Unassigning lead",W);const $=await Lw(W,"","Unassigned");$&&(s(q=>q.map(J=>J.id===W?$:J)),ee("Lead unassigned successfully","success"));return}const P=r.find($=>$.id===C);if(!P){ee("Selected sales agent not found","error");return}const F=await Lw(W,C,P.name);F&&(s($=>$.map(q=>q.id===W?F:q)),ee("Lead assignment updated","success"))}catch(P){console.error("Error updating lead assignment:",P),ee("Error updating lead assignment","error")}},ne=()=>{E({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:k,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},ee=(W,C="success")=>{j({show:!0,title:W,variant:C}),setTimeout(()=>j({show:!1,title:""}),3e3)};return!e||e.role!=="sales_agent"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsx(pV,{data:n,dataType:"leads"}),a.jsxs(te,{children:[a.jsxs(de,{className:"flex flex-row items-center justify-between",children:[a.jsx(he,{children:"Leads Pipeline"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Dr,{className:"w-4 h-4 text-gray-500"}),a.jsx(Ce,{type:"text",placeholder:"Search leads...",value:c,onChange:W=>u(W.target.value),className:"w-[200px]"})]}),a.jsx(je,{value:d,onChange:W=>h(W),options:[{value:"all",label:"All Status"},...Hw],className:"w-[150px]"}),"            ",a.jsx(U,{onClick:()=>x(!0),className:"whitespace-nowrap",leftIcon:a.jsx(ss,{className:"h-4 w-4"}),children:"Add Lead"})]})]}),a.jsx(le,{children:f?a.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):o.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(W=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:W.customerName||"Unknown Customer"}),W.companyName&&a.jsx("div",{className:"text-sm text-gray-500",children:W.companyName}),!W.customerName&&!W.companyName&&W.id&&a.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",W.id.substring(0,8),"..."]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:W.serviceNeeded||"Not specified"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:W.siteLocation||"Not specified"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(je,{value:W.status,onChange:C=>I(W.id,C),options:Hw,className:"min-w-[130px]"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?a.jsx(je,{value:W.assignedTo||"",onChange:C=>ce(W.id,C),options:[{value:"",label:"Unassigned"},...r.map(C=>({value:C.id,label:C.name}))],className:"min-w-[160px]"}):a.jsx("div",{className:"text-sm text-gray-900",children:!W.assignedTo||W.assignedTo===""?"Unassigned":W.assignedToName||"Unassigned"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("div",{className:"flex items-center space-x-2",children:W.status==="qualified"&&a.jsx(U,{variant:"outline",size:"sm",onClick:()=>Y(W),leftIcon:a.jsx(VM,{size:16}),children:"Convert to Deal"})})})]},W.id))})]})})})]}),a.jsx(dt,{isOpen:p,onClose:()=>{x(!1),ne()},title:"Create New Lead",size:"lg",children:a.jsxs("form",{onSubmit:T,className:"space-y-6",children:[a.jsx(uy,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(ge,{label:"Full Name",value:_.fullName,onChange:W=>E(C=>({...C,fullName:W.target.value})),required:!0}),a.jsx(ge,{label:"Company Name",value:_.companyName,onChange:W=>E(C=>({...C,companyName:W.target.value})),helperText:"Optional"}),a.jsx(ge,{label:"Phone Number",type:"tel",value:_.phoneNumber,onChange:W=>E(C=>({...C,phoneNumber:W.target.value})),required:!0}),a.jsx(ge,{label:"Email Address",type:"email",value:_.email,onChange:W=>E(C=>({...C,email:W.target.value})),required:!0}),a.jsx(je,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...gV],value:_.machineryType,onChange:W=>E(C=>({...C,machineryType:W})),required:!0}),a.jsx(ge,{label:"Site Location",value:_.location,onChange:W=>E(C=>({...C,location:W.target.value})),required:!0}),a.jsx(ge,{label:"Start Date",type:"date",value:_.startDate,min:k,onChange:W=>E(C=>({...C,startDate:W.target.value})),required:!0}),a.jsx(ge,{label:"Number of Rental Days",type:"number",min:"1",value:_.rentalDays,onChange:W=>{const C=Math.max(1,parseInt(W.target.value)||1);E(P=>({...P,rentalDays:C.toString()}))},required:!0}),a.jsx(je,{label:"Shift Timing",options:xV,value:_.shiftTiming,onChange:W=>E(C=>({...C,shiftTiming:W})),required:!0}),a.jsx(ge,{label:"Designation",value:_.designation,onChange:W=>E(C=>({...C,designation:W.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&a.jsx(je,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...r.map(W=>({value:W.id,label:W.name}))],value:_.assignedTo,onChange:W=>E(C=>({...C,assignedTo:W})),required:!0})]}),a.jsx(Vn,{label:"Additional Notes",value:_.notes,onChange:W=>E(C=>({...C,notes:W.target.value})),rows:3}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{type:"button",variant:"outline",onClick:()=>{x(!1),ne()},children:"Cancel"}),"            ",a.jsx(U,{type:"submit",children:"Create Lead"})]})]})}),a.jsx(mV,{isOpen:b,onClose:()=>{w(!1),g(null),L(null),D(0)},onSelect:O,initialCustomerData:y?{name:y.customerName,email:y.email,phone:y.phone,companyName:y.companyName,designation:y.designation}:void 0}),a.jsx(dt,{isOpen:z,onClose:()=>{H(!1),g(null),L(null),D(0)},title:"Enter Deal Value",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(ge,{label:"Deal Value",type:"number",value:N===0?"":N,onChange:W=>{const C=W.target.value;D(C===""?0:Number(C))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{variant:"outline",onClick:()=>{H(!1),g(null),L(null),D(0)},children:"Cancel"}),a.jsx(U,{onClick:V,children:"Create Deal"})]})]})}),S.show&&a.jsx(ot,{title:S.title,variant:S.variant,isVisible:S.show,onClose:()=>j({show:!1,title:""})})]})}function jd(e,t){var r,i,o,l,c,u,d;if(!t.content)return"";if(!e)return t.content;const n={company_name:"ASP Cranes",company_address:"123 Industrial Area, Mumbai, Maharashtra 400001",company_phone:"+91 22 1234 5678",company_email:"info@aspcranes.com",company_gst:"27AABCS1429B1ZB",company_pan:"AABCS1429B",customer_name:((r=e.customerContact)==null?void 0:r.name)||e.customerName||"N/A",customer_designation:((i=e.customerContact)==null?void 0:i.designation)||"N/A",customer_company:((o=e.customerContact)==null?void 0:o.company)||"N/A",customer_address:((l=e.customerContact)==null?void 0:l.address)||"N/A",customer_phone:((c=e.customerContact)==null?void 0:c.phone)||"N/A",customer_email:((u=e.customerContact)==null?void 0:u.email)||"N/A",quotation_number:e.id||"N/A",quotation_date:new Date(e.createdAt).toLocaleDateString("en-IN"),valid_until:new Date(new Date(e.createdAt).setDate(new Date(e.createdAt).getDate()+30)).toLocaleDateString("en-IN"),order_type:e.orderType==="monthly"?"Monthly":"Daily",equipment_name:e.selectedMachines&&e.selectedMachines.length>0?e.selectedMachines.map(h=>`${h.name} (${h.quantity} unit${h.quantity>1?"s":""})`).join(", "):((d=e.selectedEquipment)==null?void 0:d.name)||"N/A",project_duration:`${e.numberOfDays||0} days`,working_hours:`${e.workingHours||0} hours/day`,shift_type:e.shift==="double"?"Double Shift":"Single Shift",base_rate:be(e.selectedMachines&&e.selectedMachines.length>0?e.selectedMachines.reduce((h,f)=>h+(f.baseRate||0)*f.quantity,0):e.workingCost||0),subtotal:be(e.totalRent?e.totalRent/(e.includeGst?1.18:1):0),gst_amount:e.includeGst?be(e.totalRent?e.totalRent-e.totalRent/1.18:0):"0",total_amount:be(e.totalRent||0),payment_terms:"50% advance, balance against monthly bills",validity_period:"30 days from quotation date"};let s=t.content;return Object.entries(n).forEach(([h,f])=>{if(f!=null){const m=new RegExp(`{{${h}}}`,"g");s=s.replace(m,f.toString())}}),s}function vV(){return[{category:"Company Information",key:"company_name",description:"Company name"},{category:"Company Information",key:"company_address",description:"Company address"},{category:"Company Information",key:"company_phone",description:"Company phone number"},{category:"Company Information",key:"company_email",description:"Company email address"},{category:"Company Information",key:"company_gst",description:"Company GST number"},{category:"Company Information",key:"company_pan",description:"Company PAN number"},{category:"Customer Information",key:"customer_name",description:"Customer name"},{category:"Customer Information",key:"customer_designation",description:"Customer designation"},{category:"Customer Information",key:"customer_company",description:"Customer company name"},{category:"Customer Information",key:"customer_address",description:"Customer address"},{category:"Customer Information",key:"customer_phone",description:"Customer phone number"},{category:"Customer Information",key:"customer_email",description:"Customer email address"},{category:"Quotation Details",key:"quotation_number",description:"Quotation number"},{category:"Quotation Details",key:"quotation_date",description:"Quotation date"},{category:"Quotation Details",key:"valid_until",description:"Quotation validity date"},{category:"Quotation Details",key:"order_type",description:"Order type (Monthly/Daily)"},{category:"Equipment Details",key:"equipment_name",description:"Equipment name"},{category:"Equipment Details",key:"project_duration",description:"Project duration"},{category:"Equipment Details",key:"working_hours",description:"Working hours per day"},{category:"Equipment Details",key:"shift_type",description:"Shift type"},{category:"Equipment Details",key:"base_rate",description:"Base rate"},{category:"Pricing",key:"subtotal",description:"Subtotal amount"},{category:"Pricing",key:"gst_amount",description:"GST amount"},{category:"Pricing",key:"total_amount",description:"Total amount"},{category:"Terms",key:"payment_terms",description:"Payment terms"},{category:"Terms",key:"validity_period",description:"Validity period"}]}const bV={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1},{id:"sample-equipment-2",machineType:"mobile_crane",equipmentId:"crane-002",name:"100T Mobile Crane",baseRates:{micro:8e3,small:7500,monthly:7e3,yearly:6500},baseRate:7e3,runningCostPerKm:150,quantity:2}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",workingCost:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile_crane",otherFactors:["rigger","area","customer_reputation"],dealType:"credit",sundayWorking:"no"};function wV({template:e,quotation:t,onDownloadPDF:n,onSendEmail:s,className:r=""}){const[i,o]=v.useState(!1),[l,c]=v.useState(null),[u,d]=v.useState({show:!1,title:""});v.useEffect(()=>{if(!e){c("Template is required");return}if(!e.content){c("Template content is required");return}c(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t)},[e,t]);const h=t||bV,f=(w,y="success")=>{d({show:!0,title:w,variant:y}),setTimeout(()=>d({show:!1,title:""}),3e3)};let m="";try{e&&e.content?(m=jd(h,e),console.log("Generated merged content:",m?m.substring(0,100)+"...":"empty")):(console.warn("Cannot merge template - missing template or content"),m='<div style="padding: 20px;">Template content could not be loaded</div>')}catch(w){console.error("Error merging template:",w),c("Failed to merge template with quotation data"),m='<div style="padding: 20px; color: red;">Error generating preview</div>'}const x=vV().reduce((w,y)=>(w[y.category]||(w[y.category]=[]),w[y.category].push(y),w),{}),b=()=>{if(!m){f("No content to copy","error");return}navigator.clipboard.writeText(m).then(()=>{f("Content copied to clipboard","success")}).catch(()=>{f("Failed to copy content","error")})};return l?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:a.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",l]})}):a.jsxs("div",{className:`space-y-4 sm:space-y-6 ${r}`,children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:a.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[a.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),a.jsxs(te,{children:[a.jsx(de,{className:"p-3 sm:p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[a.jsxs(he,{className:"flex items-center gap-2 text-base sm:text-lg",children:[a.jsx(En,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs(U,{variant:"outline",size:"xs",onClick:()=>o(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[a.jsx(er,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),a.jsx(U,{variant:"outline",size:"xs",onClick:b,disabled:!m,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&a.jsx(le,{className:"px-3 sm:px-6",children:a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&a.jsxs(te,{children:[a.jsx(de,{className:"p-3 sm:p-6",children:a.jsx(he,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),a.jsxs(le,{className:"p-3 sm:p-6",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(x).map(([w,y])=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:w}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:y.map(g=>a.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:g.description,onClick:()=>{navigator.clipboard.writeText(`{{${g.key}}}`),f(`Copied {{${g.key}}}`,"success")},children:`{{${g.key}}}`},g.key))})]},w))}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),a.jsxs(te,{children:[a.jsx(de,{className:"p-3 sm:p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[a.jsx(he,{className:"text-base sm:text-lg",children:"Quotation Preview"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n&&a.jsxs(U,{variant:"outline",size:"xs",onClick:n,className:"flex items-center gap-1 w-full sm:w-auto",children:[a.jsx(ax,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),s&&a.jsxs(U,{variant:"outline",size:"xs",onClick:s,className:"flex items-center gap-1 w-full sm:w-auto",children:[a.jsx(hl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),a.jsxs(le,{className:"p-3 sm:p-6",children:[l?a.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[a.jsxs("p",{className:"font-medium",children:["Error: ",l]}),a.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,m?a.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:m}}):a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[a.jsx(Be,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),a.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}),e&&!e.content&&a.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[a.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),a.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]}),u.show&&a.jsx(ot,{title:u.title,variant:u.variant,isVisible:u.show,onClose:()=>d({show:!1,title:""})})]})}const Bn=(e=!1)=>{Ps()&&e&&(pp("Attempted to use development bypass headers in production - request denied"),e=!1);const n=NM(e);if(Ps()&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),mN()){const s=!!n.Authorization;EM(`API headers prepared: Auth token ${s?"present":"missing"}${e?", dev bypass enabled":""}`)}return n},qw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},Kp=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:Bn()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||qw}catch(e){return console.error("Error fetching quotation config:",e),qw}},F2=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:Bn(),body:JSON.stringify(e)});console.log("Quotation config update response status:",t.status);const n=await t.json();if(console.log("Quotation config update response data:",n),!t.ok)throw new Error(n.message||`Failed to update quotation config (${t.status})`);return n.data}catch(t){throw console.error("Error updating quotation configuration:",t),t}},SV=async()=>{try{const e=await fetch("/api/dbconfig",{method:"GET",headers:Bn()});if(!e.ok)throw new Error(`Failed to fetch database config: ${e.status}`);return(await e.json()).data||{}}catch(e){return console.error("Error fetching database config:",e),{host:"localhost",port:5432,database:"asp_crm",user:"postgres",ssl:!1}}},jV=async e=>{const t=await fetch("/api/dbconfig",{method:"PUT",headers:Bn(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.message||"Failed to update database config")}return(await t.json()).data},$2=async e=>{if(e==="database")return SV();try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:Bn()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},B2=async(e,t)=>{if(e==="database")return jV(t);const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:Bn(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||`Failed to update ${e} config`)}return(await n.json()).data},NV=async()=>{try{const e=await fetch("/api/config/defaultTemplate",{method:"GET",headers:Bn()});if(!e.ok)throw new Error(`Failed to fetch template config: ${e.status}`);return(await e.json()).data||{defaultTemplateId:null,defaultTemplate:null}}catch(e){return console.error("Error fetching default template:",e),{defaultTemplateId:null,defaultTemplate:null}}},CV=async e=>{try{const t=await fetch(`/api/config/templates/${e}`,{method:"GET",headers:Bn()});if(!t.ok)throw new Error(`Failed to fetch template: ${t.status}`);return(await t.json()).data||null}catch(t){return console.error("Error fetching template:",t),null}},z2=async()=>$2("resourceRates"),EV=async e=>B2("resourceRates",e),kV=async()=>$2("additionalParams"),_V=async e=>B2("additionalParams",e),DV=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function TV(){const{user:e}=Ae(),t=Qt(),[n,s]=v.useState([]),[r,i]=v.useState([]),[o,l]=v.useState([]),[c,u]=v.useState(""),[d,h]=v.useState("all"),[f,m]=v.useState(!0),[p,x]=v.useState(null),[b,w]=v.useState(null),[y,g]=v.useState(null),[S,j]=v.useState(!1);v.useState(!1);const[k,_]=v.useState(!1),[E,N]=v.useState(""),[D,M]=v.useState(!1),[L,z]=v.useState(!1),[H,B]=v.useState({show:!1,title:""}),[A,R]=v.useState(null);v.useEffect(()=>{T()},[]),v.useEffect(()=>{O()},[n,c,d]);const T=async()=>{try{m(!0),x(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:C}=await ns(async()=>{const{getCustomers:G}=await Promise.resolve().then(()=>fV);return{getCustomers:G}},void 0),[P,F,$]=await Promise.all([h2(),gh(),C()]);console.log("QuotationManagement: Fetched quotations:",(P==null?void 0:P.length)||0),console.log("QuotationManagement: Fetched deals:",(F==null?void 0:F.length)||0),console.log("QuotationManagement: Fetched customers:",($==null?void 0:$.length)||0);const q=new Map;$.forEach(G=>{q.set(G.id,G)}),P.length>0&&console.log("Sample quotation data:",{id:P[0].id,customerId:P[0].customerId,customerName:P[0].customerName,customerContact:P[0].customerContact,selectedEquipment:P[0].selectedEquipment}),$.length>0&&console.log("Sample customer data:",{id:$[0].id,name:$[0].name,contactName:$[0].contactName});const J=P.map(G=>{const ue={...G},xe=q.get(G.customerId);return xe?(console.log(`Found matching customer for quotation ${G.id}: ${xe.name}`),ue.customerName=ue.customerName||xe.name,ue.customerContact=ue.customerContact||{},ue.customerContact.name||(ue.customerContact.name=xe.contactName),ue.customerContact.company||(ue.customerContact.company=xe.name),ue.customerContact.email||(ue.customerContact.email=xe.email),ue.customerContact.phone||(ue.customerContact.phone=xe.phone),ue.customerContact.address||(ue.customerContact.address=xe.address)):console.log(`No matching customer found for quotation ${G.id} with customerId ${G.customerId}`),ue.customerName=ue.customerName||"Unknown Customer",ue.customerContact=ue.customerContact||{},ue.customerContact.name=ue.customerContact.name||"Contact Not Available",ue.customerContact.company=ue.customerContact.company||"No Company",ue});s(J);const X=F.filter(G=>G.stage==="qualification"||G.stage==="proposal");i(X),await I()}catch(C){console.error("Error fetching data:",C),x("Failed to load quotations. Please try again."),V("Error fetching data","error")}finally{m(!1)}},I=async()=>{try{const C=await NV();if(C.defaultTemplateId){const F=await CV(C.defaultTemplateId);if(F){console.log("Loaded template from config:",F),g(F);return}}try{const $=await(await ns(()=>Promise.resolve().then(()=>D8),void 0)).getTemplates();if($&&$.length>0){const q=$.find(J=>J.isDefault)||$[0];console.log("Loaded template from templateService:",q),g(q);return}}catch(F){console.error("Error loading templates from service:",F)}const P={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),g(P)}catch(C){console.error("Error loading default template:",C);const P={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};g(P)}},O=()=>{let C=[...n];c&&(C=C.filter(P=>{var F,$,q;return(((F=P.customerContact)==null?void 0:F.name)||P.customerName||"").toLowerCase().includes(c.toLowerCase())||((($=P.customerContact)==null?void 0:$.company)||"").toLowerCase().includes(c.toLowerCase())||(((q=P.selectedEquipment)==null?void 0:q.name)||"").toLowerCase().includes(c.toLowerCase())||P.selectedMachines&&P.selectedMachines.some(J=>(J.name||"").toLowerCase().includes(c.toLowerCase()))})),d!=="all"&&(C=C.filter(P=>P.status===d)),l(C)},V=(C,P="success",F)=>{B({show:!0,title:C,description:F,variant:P}),setTimeout(()=>{B({show:!1,title:""})},5e3)},Y=()=>{if(!E){V("Please select a deal","warning");return}t(`/quotations/create?dealId=${E}`),N("")},ce=async C=>{try{if(R(C.id),console.log("Editing quotation:",C),!C.leadId){V("Invalid quotation data","error","Missing lead ID");return}if(!await El(C.leadId)){V("Associated deal not found","error","The deal associated with this quotation no longer exists");return}console.log("Navigating to:",`/quotations/create?dealId=${C.leadId}&quotationId=${C.id}`),t(`/quotations/create?dealId=${C.leadId}&quotationId=${C.id}`)}catch(P){console.error("Error preparing quotation edit:",P),V("Error preparing quotation edit","error")}finally{R(null)}},ne=async C=>{var P;try{if(M(!0),!y){V("No default template configured","warning","Please set a default template in Configuration settings.");return}const F=jd(C,y),$=window.open("","_blank");if(!$){V("Popup blocked","error","Please allow popups to download PDF.");return}$.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((P=C.customerContact)==null?void 0:P.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${F}
        </body>
        </html>
      `),await new Promise(q=>setTimeout(q,1e3)),$.document.close(),$.print(),$.close(),V("PDF generated successfully","success")}catch(F){console.error("Error generating PDF:",F),V("Failed to generate PDF","error")}finally{M(!1)}},ee=async C=>{var P,F,$;try{if(z(!0),!y){V("No default template configured","warning","Please set a default template in Configuration settings.");return}const q=jd(C,y);let J=((P=C.selectedEquipment)==null?void 0:P.name)||"Selected Equipment";C.selectedMachines&&C.selectedMachines.length>1?J=`${C.selectedMachines.length} machines (${C.selectedMachines.map(ke=>ke.name).join(", ")})`:C.selectedMachines&&C.selectedMachines.length===1&&(J=C.selectedMachines[0].name);const X=`Quotation from ASP Cranes - ${C.id.slice(0,8).toUpperCase()}`,G=((F=C.customerContact)==null?void 0:F.name)||C.customerName||"Customer",ue=(($=C.customerContact)==null?void 0:$.email)||"",xe=`Dear ${G},

Please find your quotation details for ${J} below:

${q}

Best regards,
ASP Cranes Team`,me=`mailto:${ue}?subject=${encodeURIComponent(X)}&body=${encodeURIComponent(xe)}`;window.open(me),V("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(q){console.error("Error sending to customer:",q),V("Error preparing email","error")}finally{z(!1)}},W=v.useMemo(()=>r.length===0?[{value:"",label:"No deals available"}]:r.map(C=>{var P,F;return{value:C.id,label:`${((P=C.customer)==null?void 0:P.name)||"Unnamed"} - ${((F=C.customer)==null?void 0:F.company)||"No Company"} (${be(C.value)})`}}),[r]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsx("div",{className:"flex flex-col min-h-screen",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",a.jsx(U,{onClick:()=>_(!0),className:"w-full sm:w-auto",leftIcon:a.jsx(ss,{className:"w-4 h-4"}),children:"Create New Quotation"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsx(Ce,{placeholder:"Search by customer, company or equipment...",value:c,onChange:C=>u(C.target.value),leftIcon:a.jsx(Dr,{className:"w-4 h-4"}),disabled:f})}),a.jsx("div",{className:"w-full sm:w-48",children:a.jsx(je,{options:DV,value:d,onChange:h,leftIcon:a.jsx(tA,{className:"w-4 h-4"}),disabled:f})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Quotation History"})}),a.jsx(le,{className:"px-0 sm:px-6",children:f?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Be,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?a.jsxs("div",{className:"text-center py-8 text-red-500",children:[a.jsx(ho,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),a.jsx("p",{className:"text-lg font-medium",children:p}),a.jsx(U,{variant:"outline",size:"sm",onClick:T,className:"mt-4",children:"Try Again"})]}):o.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(En,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),a.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(C=>{var P,F,$;return a.jsxs("tr",{className:"hover:bg-gray-50",children:["                        ",a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:a.jsxs("div",{className:"flex items-start flex-col",children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((P=C.customerContact)==null?void 0:P.name)||C.customerName||"Customer"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((F=C.customerContact)==null?void 0:F.company)||C.customerName||"No Company"}),a.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",C.customerId?C.customerId.substring(0,8):"None"]}),a.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:(($=C.selectedEquipment)==null?void 0:$.name)||(C.selectedMachines&&C.selectedMachines.length>0?`${C.selectedMachines.length} machine(s)`:"No equipment")}),a.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:be(C.totalRent)})]})}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:C.selectedMachines&&C.selectedMachines.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:C.selectedMachines.map(q=>q.name).join(", ")}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[C.selectedMachines.length," machine",C.selectedMachines.length>1?"s":""]})]}):C.selectedEquipment&&C.selectedEquipment.name?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:C.selectedEquipment.name}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:C.machineType||"Standard"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:C.machineType||"Type not specified"})]})}),a.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[a.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[C.numberOfDays," days"]}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[C.workingHours," hrs/day"]})]}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:be(C.totalRent)}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:a.jsx(Mo,{status:C.status})}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx(U,{variant:"ghost",size:"xs",onClick:()=>ce(C),title:"Edit Quotation",disabled:f||A===C.id,children:A===C.id?a.jsx(Be,{size:14,className:"animate-spin"}):a.jsx(Eo,{size:14})}),a.jsx(U,{variant:"ghost",size:"xs",onClick:()=>{w(C),j(!0)},title:"Preview Quotation",disabled:!y||f,children:a.jsx(wN,{size:14})}),a.jsx(U,{variant:"ghost",size:"xs",onClick:()=>ne(C),disabled:D||!y||f,title:"Download PDF",children:D?a.jsx(Be,{size:14,className:"animate-spin"}):a.jsx(ax,{size:14})}),a.jsx(U,{variant:"ghost",size:"xs",onClick:()=>ee(C),disabled:L||!y||f,title:"Send to Customer",children:L?a.jsx(Be,{size:14,className:"animate-spin"}):a.jsx(hl,{size:14})})]})})]},C.id)})})]})})})]}),a.jsx(dt,{isOpen:k,onClose:()=>{_(!1),N("")},title:"Create New Quotation",size:"lg",children:a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",a.jsx(je,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...W.filter(C=>C.value!=="")],value:E,onChange:N,label:"Available Deals",disabled:f,required:!0}),E&&a.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const C=r.find(P=>P.id===E);return C?a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),a.jsx("p",{className:"text-blue-800",children:C.customer.name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),a.jsx("p",{className:"text-blue-800",children:C.customer.company})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),a.jsx("p",{className:"text-blue-800",children:be(C.value)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),a.jsx("p",{className:"text-blue-800 capitalize",children:C.stage})]})]})]}):null})()})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[a.jsx(U,{variant:"outline",onClick:()=>{_(!1),N("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),a.jsxs(U,{onClick:Y,disabled:!E||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",children:[f?a.jsx(Be,{className:"w-4 h-4 animate-spin"}):a.jsx(ss,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),a.jsx(dt,{isOpen:S,onClose:()=>j(!1),title:"Quotation Preview",size:"full",children:b&&y&&a.jsx(wV,{quotation:b,template:y,onDownloadPDF:()=>ne(b),onSendEmail:()=>ee(b)})}),H.show&&a.jsx(ot,{title:H.title,variant:H.variant,isVisible:H.show,onClose:()=>B({show:!1,title:""})})]})})}const Gw={micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:30},yearly:{minDays:31,maxDays:366}},PV=fN(e=>({orderTypeLimits:Gw,isLoading:!1,error:null,fetchConfig:async()=>{try{e({isLoading:!0,error:null});const t=await Kp();t&&t.orderTypeLimits?e({orderTypeLimits:t.orderTypeLimits}):(console.log("Using default quotation config limits"),e({orderTypeLimits:Gw}))}catch(t){console.error("Error fetching quotation config:",t),e({error:"Failed to fetch quotation configuration"})}finally{e({isLoading:!1})}},updateConfig:async t=>{try{e({isLoading:!0,error:null}),e({orderTypeLimits:t}),await F2({orderTypeLimits:t})}catch(n){console.error("Error updating quotation config:",n),e({error:"Failed to update quotation configuration"});const s=await Kp();s!=null&&s.orderTypeLimits&&e({orderTypeLimits:s.orderTypeLimits})}finally{e({isLoading:!1})}}})),MV=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],AV=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],IV=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],RV=[{value:"day",label:"Day"},{value:"night",label:"Night"}],OV=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],Jc=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],LV=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],FV=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],Zc=[{value:"incident1",label:"Incident 1 - 5,000",amount:5e3},{value:"incident2",label:"Incident 2 - 10,000",amount:1e4},{value:"incident3",label:"Incident 3 - 15,000",amount:15e3}],Gf=4e4,Yf=12e3;function $V(){const{user:e}=Ae(),t=Qt(),[n]=zP(),s=n.get("dealId")||"",r=n.get("quotationId");n.get("fresh");const{orderTypeLimits:i,fetchConfig:o}=PV(),[l,c]=v.useState(null),[u,d]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState(!0),[x,b]=v.useState(!1),[w,y]=v.useState(0),[g,S]=v.useState({foodRatePerMonth:0,accommodationRatePerMonth:0}),[j,k]=v.useState({duration:!0,orderType:!0,machineSelection:!0,workingHours:!0,accommodation:!0,mobDemob:!0,additional:!0}),[_,E]=v.useState({show:!1,title:""}),[N,D]=v.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:Jc[0].value,sundayWorking:"no"}),[M,L]=v.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});v.useEffect(()=>{z()},[s,r]),v.useEffect(()=>{B()},[N,w]),v.useEffect(()=>{N.workingHours!==void 0&&B()},[N.workingHours]),v.useEffect(()=>{var C;if(N.orderType&&((C=N.selectedEquipment)!=null&&C.id)&&h.length>0){const P=h.find(F=>F.id===N.selectedEquipment.id);if(P!=null&&P.baseRates){const F=P.baseRates[N.orderType];y(F)}}N.selectedMachines.length>0&&h.length>0&&D(P=>({...P,selectedMachines:P.selectedMachines.map(F=>{const $=h.find(q=>q.id===F.id);return $!=null&&$.baseRates?{...F,baseRate:$.baseRates[N.orderType]||F.baseRate}:F})}))},[N.orderType,h.length]),v.useEffect(()=>{N.machineType?(async()=>{try{const P=await $w(N.machineType);f(P)}catch(P){console.error("Error fetching equipment:",P)}})():f([])},[N.machineType]),v.useEffect(()=>{if(N.selectedEquipment&&h.length>0){const C=h.find(P=>P.id===N.selectedEquipment.id);if(C!=null&&C.baseRates){const P=C.baseRates[N.orderType];y(P),D(F=>({...F,baseRate:P,runningCostPerKm:C.runningCostPerKm||0}))}}},[N.orderType,N.selectedEquipment,h]);const z=async()=>{var C,P,F,$;try{if(p(!0),console.log("Fetching data with dealId:",s,"quotationId:",r),!s){O("Deal ID not found","error"),t("/quotations");return}const q=await El(s);if(console.log("Fetched deal data:",q),!q){O("Deal not found","error"),t("/quotations");return}c(q);const J=await ny();console.log("Fetched equipment data:",J),d(J);const X=await z2();if(console.log("Fetched resource rates:",X),S(X),r){console.log("Fetching existing quotation:",r);const G=await eB(r);if(console.log("Fetched quotation data:",G),G){D(me=>({...me,machineType:G.machineType||""})),await new Promise(me=>setTimeout(me,100));const ue=await $w(G.machineType);f(ue),await new Promise(me=>setTimeout(me,100));let xe=[];if(G.selectedMachines&&G.selectedMachines.length>0)xe=G.selectedMachines.map(me=>{var wt;const ke=ue.find(Kt=>Kt.id===me.id);return{...me,machineType:me.machineType||G.machineType||"",name:(ke==null?void 0:ke.name)||me.name||"Unknown Equipment",baseRates:(ke==null?void 0:ke.baseRates)||me.baseRates,baseRate:((wt=ke==null?void 0:ke.baseRates)==null?void 0:wt[G.orderType])||me.baseRate||0,quantity:me.quantity||1}}),console.log("Loaded machines from selectedMachines:",xe);else if(G.selectedEquipment){const me=ue.find(ke=>ke.id===G.selectedEquipment.id);xe=[{id:G.selectedEquipment.id,machineType:G.machineType||"",equipmentId:G.selectedEquipment.equipmentId,name:(me==null?void 0:me.name)||G.selectedEquipment.name||"Unknown Equipment",baseRates:(me==null?void 0:me.baseRates)||G.selectedEquipment.baseRates,baseRate:((C=me==null?void 0:me.baseRates)==null?void 0:C[G.orderType])||((F=(P=G.selectedEquipment)==null?void 0:P.baseRates)==null?void 0:F[G.orderType])||0,runningCostPerKm:G.runningCostPerKm||0,quantity:1}],console.log("Created machine from selectedEquipment:",xe)}if(D({machineType:G.machineType||"",selectedEquipment:G.selectedEquipment||{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:xe,orderType:G.orderType||"micro",numberOfDays:G.numberOfDays||0,workingHours:G.workingHours||8,foodResources:G.foodResources||0,accomResources:G.accomResources||0,siteDistance:G.siteDistance||0,usage:G.usage||"normal",riskFactor:G.riskFactor||"low",extraCharge:G.extraCharge||0,incidentalCharges:G.incidentalCharges||[],otherFactorsCharge:G.otherFactorsCharge||0,billing:G.billing||"gst",includeGst:G.includeGst??!0,shift:G.shift||"single",dayNight:G.dayNight||"day",mobDemob:G.mobDemob||0,mobRelaxation:G.mobRelaxation||0,runningCostPerKm:G.runningCostPerKm||0,version:G.version||1,createdBy:G.createdBy||(e==null?void 0:e.id)||"",status:G.status||"draft",otherFactors:G.otherFactors||[],dealType:G.dealType,sundayWorking:G.sundayWorking}),xe.length>0){const me=xe[0];y(me.baseRate),console.log("Setting selected equipment base rate to:",me.baseRate)}else if(($=G.selectedEquipment)!=null&&$.baseRates){const me=G.selectedEquipment.baseRates[G.orderType];y(me),console.log("Setting selected equipment base rate from baseRates:",me)}console.log("Form data updated with quotation data")}else{O("Quotation not found","error"),t("/quotations");return}}await o(),console.log("Quotation config fetched")}catch(q){console.error("Error fetching data:",q),O("Error fetching data","error")}finally{p(!1)}},H=C=>C<=0?"micro":C>=i.yearly.minDays?"yearly":C>=i.monthly.minDays?"monthly":C>=i.small.minDays?"small":"micro",B=()=>{console.log("Calculating quotation with working hours:",N.workingHours);const C=N.selectedMachines.length>0,P=w;if(!N.numberOfDays||!C&&!P){L({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const F=Number(N.numberOfDays),$=F>25,q=$?26:F,J=A(q),X=N.shift==="double"?2:1;let G=0;const ue=N.workingHours===0?8:Number(N.workingHours)||8;C?N.selectedMachines.forEach(Xt=>{const ji=Xt.baseRate,$o=Xt.quantity;let Bo=0;$?Bo=ji/26/ue*ue*q*X*$o:Bo=ji*ue*q*X*$o,G+=Bo}):$?G=P/26/ue*ue*q*X:G=P*ue*q*X;const xe=N.usage==="heavy"?.1:.05;let me=0;C?N.selectedMachines.forEach(Xt=>{me+=Xt.baseRate*Xt.quantity*xe}):me=P*xe;let ke;if($)ke=Number(N.foodResources)*g.foodRatePerMonth+Number(N.accomResources)*g.accommodationRatePerMonth;else{const Xt=g.foodRatePerMonth/26,ji=g.accommodationRatePerMonth/26;ke=(Number(N.foodResources)*Xt+Number(N.accomResources)*ji)*q}const wt=R();let Kt=0;const os=N.riskFactor==="high"?.15:N.riskFactor==="medium"?.1:.05;C?N.selectedMachines.forEach(Xt=>{Kt+=Xt.baseRate*Xt.quantity*os}):Kt=P*os;const as=N.incidentalCharges.reduce((Xt,ji)=>{const $o=Zc.find(Bo=>Bo.value===ji);return Xt+($o?$o.amount:0)},0);let Pr=0;N.otherFactors.includes("rigger")&&(Pr+=Gf),N.otherFactors.includes("helper")&&(Pr+=Yf);const Ry=Number(N.extraCharge)+as+Pr,Oy=G+ke+wt+Kt+me+Ry,Ly=N.includeGst?Oy*.18:0,c_=Oy+Ly;L({baseRate:P,totalHours:$?0:J,workingCost:G,mobDemobCost:wt,foodAccomCost:ke,usageLoadFactor:me,extraCharges:Ry,riskAdjustment:Kt,gstAmount:Ly,totalAmount:c_})},A=C=>{const P=N.workingHours===0?8:Number(N.workingHours)||8,F=N.shift==="double"?2:1;return P*C*F},R=()=>{const C=Number(N.siteDistance),P=Number(N.mobDemob)||0,F=Number(N.mobRelaxation)||0;if(N.selectedMachines.length>0){let $=0;return N.selectedMachines.forEach(q=>{let J=q.runningCostPerKm||0;if(J===0){const xe=h.find(me=>me.id===q.id);xe&&(J=xe.runningCostPerKm||0)}const X=C*J*2*q.quantity,G=X*F/100,ue=X-G+P*q.quantity;$+=ue}),$}else{const $=h.find(ue=>ue.id===N.selectedEquipment.id),q=($==null?void 0:$.runningCostPerKm)||0,J=C*q*2,X=J*F/100;return J-X+P}},T=C=>{k(P=>({...P,[C]:!P[C]}))},I=async C=>{if(C.preventDefault(),!l){O("Deal not found","error");return}if(N.selectedMachines.length===0&&!N.selectedEquipment.id){O("Please select at least one machine","error");return}if(N.numberOfDays<=0){O("Please enter valid number of days","error");return}try{b(!0),console.log("Current calculations:",M);const P={...N,leadId:l.id,customerId:l.customerId,customerName:l.customer.name,customerContact:{name:l.customer.name,email:l.customer.email,phone:l.customer.phone,company:l.customer.company,address:l.customer.address,designation:l.customer.designation},selectedEquipment:N.selectedEquipment,selectedMachines:N.selectedMachines,totalRent:M.totalAmount,baseRate:M.baseRate,workingCost:M.workingCost,mobDemobCost:M.mobDemobCost,foodAccomCost:M.foodAccomCost,usageLoadFactor:M.usageLoadFactor,extraCharges:M.extraCharges,riskAdjustment:M.riskAdjustment,gstAmount:M.gstAmount,sundayWorking:N.sundayWorking||"no"};console.log("Submitting quotation data:",P);let F;r?(F=await tB(r,{...P,version:N.version+1}),O("Quotation updated successfully","success")):(F=await Z6(P),O("Quotation created successfully","success")),console.log("Saved quotation:",F),t("/quotations")}catch(P){console.error("Error saving quotation:",P),O("Error saving quotation","error")}finally{b(!1)}},O=(C,P="success",F)=>{E({show:!0,title:C,variant:P,description:F}),setTimeout(()=>E({show:!1,title:""}),3e3)},V=C=>{const P=h.find(F=>F.id===C);if(P){const F=P.baseRates[N.orderType];y(F),D($=>({...$,selectedEquipment:{id:P.id,equipmentId:P.equipmentId,name:P.name,baseRates:P.baseRates},runningCostPerKm:P.runningCostPerKm||0}))}},Y=C=>{D(P=>({...P,machineType:C,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}}})),y(0)},ce=()=>{if(!N.machineType||!N.selectedEquipment.id){O("Please select a machine type and equipment first","warning");return}if(N.selectedMachines.some($=>$.id===N.selectedEquipment.id)){ee(N.selectedEquipment.id,1);return}const P=h.find($=>$.id===N.selectedEquipment.id);if(!P){O("Selected equipment not found","error");return}const F={id:P.id,machineType:N.machineType,equipmentId:P.equipmentId,name:P.name,baseRates:P.baseRates,baseRate:P.baseRates[N.orderType],runningCostPerKm:P.runningCostPerKm||0,quantity:1};D($=>({...$,selectedMachines:[...$.selectedMachines,F]})),D($=>({...$,machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},baseRate:0})),y(0)},ne=C=>{D(P=>({...P,selectedMachines:P.selectedMachines.filter(F=>F.id!==C)}))},ee=(C,P)=>{D(F=>({...F,selectedMachines:F.selectedMachines.map($=>{if($.id===C){const q=Math.max(1,$.quantity+P);return{...$,quantity:q}}return $})}))},W=(C,P)=>{D(F=>({...F,selectedMachines:F.selectedMachines.map($=>$.id===C?{...$,baseRate:P}:$)}))};return!e||e.role!=="sales_agent"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):l?a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsx("style",{children:`
          /* Remove number input spinners */
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:a.jsx(ox,{size:16}),className:"self-start",children:"Back"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:r?"Edit Quotation":"Create Quotation"}),a.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",l.customer.name," - ",l.title]})]})]})}),a.jsxs("div",{className:"max-w-full md:max-w-7xl mx-auto px-2 sm:px-4",children:[a.jsxs(te,{className:"mb-4 sm:mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($n,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),a.jsx(he,{className:"text-base sm:text-lg font-medium",children:"Customer Information"})]})}),a.jsx(le,{children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[a.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Customer Name"}),a.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.name})]}),a.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Company"}),a.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.company})]}),a.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Designation"}),a.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.designation||"N/A"})]}),a.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Email"}),a.jsx("div",{className:"text-sm sm:text-base font-medium break-all",children:l.customer.email})]}),a.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Phone"}),a.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.phone})]}),a.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Address"}),a.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.address})]})]})})]}),a.jsxs("form",{onSubmit:I,children:[a.jsx(uy,{}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"col-span-7 space-y-6",children:[a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("duration"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ms,{className:"w-5 h-5 text-gray-500"}),a.jsx(he,{className:"text-lg font-medium",children:"Duration"})]}),j.duration?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.duration&&a.jsxs(le,{className:"pt-4 space-y-4",children:[a.jsx(ge,{type:"number",label:"Number of Days",value:N.numberOfDays||"",onChange:C=>{const P=C.target.value===""?0:Number(C.target.value),F=H(P);console.log(`Days: ${P}, Order Type: ${F}`),D($=>{const q=P>0&&F!==$.orderType;let J=[...$.selectedMachines];return q&&(J=$.selectedMachines.map(X=>({...X,baseRate:X.baseRates[F]||X.baseRate}))),{...$,numberOfDays:P,orderType:P>0?F:$.orderType,selectedMachines:J}})},required:!0,min:"1",placeholder:"Enter number of days"}),N.numberOfDays>0&&w>0&&a.jsxs("div",{className:"mt-2 space-y-1",children:[N.orderType!=="monthly"?a.jsxs("div",{className:"text-sm text-gray-600",children:["Daily Rate: ",be(w*(N.workingHours===0?8:Number(N.workingHours)||8)),"/day"]}):a.jsxs("div",{className:"text-sm text-gray-600",children:["Monthly Rate: ",be(w),"/month"]}),a.jsx("div",{className:"text-sm font-medium text-primary-600",children:Number(N.numberOfDays)>=i.yearly.minDays?"Yearly rate":Number(N.numberOfDays)>=i.monthly.minDays?"Monthly rate":Number(N.numberOfDays)>=i.small.minDays?"Small order rate":"Micro order rate"})]})]})]}),a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("orderType"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(En,{className:"w-5 h-5 text-gray-500"}),a.jsx(he,{className:"text-lg font-medium",children:"Order Type"})]}),j.orderType?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.orderType&&a.jsxs(le,{className:"pt-4 space-y-4",children:[a.jsx(je,{label:"Order Type",options:MV,value:N.orderType,onChange:C=>{Number(N.numberOfDays)===0&&D(P=>({...P,orderType:C}))},disabled:Number(N.numberOfDays)>0}),Number(N.numberOfDays)>0?a.jsx("div",{className:"mt-2 text-sm text-amber-600",children:Number(N.numberOfDays)>=i.yearly.minDays?"Order type is set to Yearly as duration exceeds "+(i.yearly.minDays-1)+" days":Number(N.numberOfDays)>=i.monthly.minDays?"Order type is set to Monthly as duration exceeds "+(i.monthly.minDays-1)+" days":Number(N.numberOfDays)>=i.small.minDays?"Order type is set to Small as duration is between "+i.small.minDays+"-"+i.small.maxDays+" days":"Order type is set to Micro as duration is "+i.micro.maxDays+" days or less"}):a.jsxs("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[a.jsx(er,{className:"w-4 h-4 mr-1.5"}),a.jsx("span",{children:"Order type will be automatically set based on the number of days"})]})]})]}),a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("machineSelection"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zn,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx(he,{className:"text-lg font-medium",children:"Machine Selection"}),a.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:["You can add multiple machines to this quotation",a.jsxs("span",{className:"ml-1 cursor-help text-gray-400 hover:text-gray-600 relative group",children:[a.jsx(er,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden group-hover:block absolute left-full ml-2 top-0 bg-gray-800 text-white text-xs rounded p-2 w-48",children:"Add different types of machines or multiple units of the same machine using the Add Machine button"})]})]})]})]}),j.machineSelection?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.machineSelection&&a.jsxs(le,{className:"pt-4 space-y-4",children:[N.selectedMachines.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",N.selectedMachines.length,")"]}),a.jsx("span",{className:"text-xs text-gray-500 mb-2",children:"You can edit the base rate and quantity for each machine"})]}),a.jsx("div",{className:"space-y-3 bg-gray-50 p-3 rounded-md border border-gray-200",children:N.selectedMachines.map(C=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsxs("div",{className:"flex-grow",children:[a.jsx("div",{className:"font-semibold",children:C.name}),a.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["ID: ",C.equipmentId]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-gray-50 p-2 rounded-md border border-gray-100",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Base Rate:"}),a.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-sm",value:C.baseRate,onChange:P=>{const F=Number(P.target.value);isNaN(F)||W(C.id,F)}}),a.jsx("span",{className:"text-xs text-gray-500",children:N.orderType==="monthly"?"/month":"/hr"})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-3",children:[a.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-error-500 transition-colors duration-150",onClick:()=>ne(C.id),title:"Remove machine",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Quantity"}),a.jsxs("div",{className:"flex items-center border rounded-md overflow-hidden",children:[a.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>ee(C.id,-1),disabled:C.quantity<=1,children:"-"}),a.jsx("span",{className:"px-3 py-1 font-medium",children:C.quantity}),a.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>ee(C.id,1),children:"+"})]})]})]})]},C.id))})]}),a.jsxs("div",{className:"border-t pt-4 mt-4",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Add Machine"}),a.jsx(je,{label:"Machine Type",options:AV,value:N.machineType,onChange:C=>{Y(C)}}),N.machineType&&a.jsx("div",{className:"mt-3",children:a.jsx(je,{label:"Select Equipment",options:[{value:"",label:"Select equipment..."},...h.map(C=>({value:C.id,label:`${C.equipmentId} - ${C.name} (${be(C.baseRates[N.orderType])}${N.orderType==="monthly"?"/month":"/hr"})`}))],value:N.selectedEquipment.id,onChange:C=>{V(C)}})}),!h.length&&N.machineType&&a.jsx("div",{className:"text-sm text-amber-600 mt-2",children:"No available equipment found for this machine type"}),a.jsxs("div",{className:"mt-4",children:[a.jsx(U,{type:"button",variant:"default",onClick:ce,leftIcon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),disabled:!N.machineType||!N.selectedEquipment.id,className:"w-full",children:N.selectedMachines.length===0?"Add Machine to Quotation":"Add Another Machine"}),N.selectedMachines.length>0&&a.jsxs("p",{className:"text-xs text-gray-500 text-center mt-2",children:["You have added ",N.selectedMachines.length," machine",N.selectedMachines.length>1?"s":""," to this quotation"]})]})]})]})]}),a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("workingHours"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"w-5 h-5 text-gray-500"}),a.jsx(he,{className:"text-lg font-medium",children:"Working Hours"})]}),j.workingHours?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.workingHours&&a.jsxs(le,{className:"pt-4 space-y-4",children:[a.jsx(je,{label:"Shift",options:IV,value:N.shift,onChange:C=>{D(P=>({...P,shift:C}))}}),a.jsxs("div",{children:[a.jsx(ge,{type:"number",label:"Number of Hours",value:N.workingHours===0?"":N.workingHours,onChange:C=>{const P=C.target.value;if(P==="")D(F=>({...F,workingHours:0}));else if(/^\d+$/.test(P)){const F=parseInt(P,10);F>=1&&F<=24&&D($=>({...$,workingHours:F}))}},required:!0,min:"1",max:"24",placeholder:"Enter hours (default: 8)",step:"1",autoComplete:"off"}),a.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[a.jsx(ys,{className:"w-4 h-4 mr-1.5"}),a.jsx("span",{children:"Standard single shift duration is 8 hours"})]})]}),a.jsx(je,{label:"Day/Night",options:RV,value:N.dayNight,onChange:C=>D(P=>({...P,dayNight:C}))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"sundayWorking",checked:N.sundayWorking==="yes",onChange:C=>D(P=>({...P,sundayWorking:C.target.checked?"yes":"no"})),className:"rounded border-gray-300"}),a.jsx("label",{htmlFor:"sundayWorking",className:"text-sm",children:"Sunday Working"})]})]})]}),a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("accommodation"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(zl,{className:"w-5 h-5 text-gray-500"}),a.jsx(he,{className:"text-lg font-medium",children:"Accommodation"})]}),j.accommodation?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.accommodation&&a.jsxs(le,{className:"pt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx(ge,{type:"number",label:"Number of Resources",value:N.foodResources||"",onChange:C=>D(P=>({...P,foodResources:C.target.value===""?0:Number(C.target.value)})),placeholder:"Enter number of resources"}),a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: 2500/month per resource"})]}),a.jsxs("div",{children:[a.jsx(ge,{type:"number",label:"Number of Resources",value:N.accomResources||"",onChange:C=>D(P=>({...P,accomResources:C.target.value===""?0:Number(C.target.value)})),placeholder:"Enter number of resources"}),a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: 4000/month per resource"})]})]})]}),a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("mobDemob"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zn,{className:"w-5 h-5 text-gray-500"}),a.jsx(he,{className:"text-lg font-medium",children:"Mob - Demob"})]}),j.mobDemob?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.mobDemob&&a.jsxs(le,{className:"pt-4 space-y-4",children:[a.jsx("div",{children:a.jsx(ge,{type:"number",label:"Distance to Site (km)",value:N.siteDistance||"",onChange:C=>D(P=>({...P,siteDistance:C.target.value===""?0:Number(C.target.value)})),placeholder:"Enter distance in kilometers"})}),a.jsx("div",{children:a.jsx(ge,{type:"number",label:"Trailer Cost",value:N.mobDemob||"",onChange:C=>D(P=>({...P,mobDemob:C.target.value===""?0:Number(C.target.value)})),placeholder:"Enter additional trailer charges"})}),a.jsxs("div",{children:[a.jsx(ge,{type:"number",label:"Mob Relaxation",value:N.mobRelaxation||"",onChange:C=>D(P=>({...P,mobRelaxation:C.target.value===""?0:Number(C.target.value)})),placeholder:"Enter relaxation value (X%)"}),a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Enter percentage value for discount on distance cost"})]})]})]}),a.jsxs(te,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>T("additional"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lx,{className:"w-5 h-5 text-gray-500"}),a.jsx(he,{className:"text-lg font-medium",children:"Additional Parameters"})]}),j.additional?a.jsx(Mr,{className:"h-5 w-5 text-gray-400"}):a.jsx(Vs,{className:"h-5 w-5 text-gray-400"})]})}),j.additional&&a.jsxs(le,{className:"pt-4 space-y-4",children:[a.jsx(je,{label:"Usage",options:OV,value:N.usage,onChange:C=>D(P=>({...P,usage:C}))}),a.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[a.jsx(Ju,{className:"w-4 h-4 mr-1.5"}),a.jsx("span",{children:"Usage rates: Normal - 5% of base rate | Heavy - 10% of base rate"})]}),a.jsx(je,{label:"Deal Type",options:Jc,value:N.dealType||Jc[0].value,onChange:C=>D(P=>({...P,dealType:C||Jc[0].value}))}),a.jsx(ge,{type:"number",label:"Extra Commercial Charges",value:N.extraCharge||"",onChange:C=>D(P=>({...P,extraCharge:C.target.value===""?0:Number(C.target.value)})),placeholder:"Enter extra charges"}),a.jsx(je,{label:"Risk Factor",options:LV,value:N.riskFactor,onChange:C=>D(P=>({...P,riskFactor:C}))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Incidental Charges"}),a.jsx("div",{className:"space-y-2",children:Zc.map(C=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("input",{type:"checkbox",checked:N.incidentalCharges.includes(C.value),onChange:P=>{D(F=>({...F,incidentalCharges:P.target.checked?[...F.incidentalCharges,C.value]:F.incidentalCharges.filter($=>$!==C.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:C.label})]},C.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Other Factors"}),a.jsx("div",{className:"space-y-2",children:FV.map(C=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("input",{type:"checkbox",checked:N.otherFactors.includes(C.value),onChange:P=>{D(F=>({...F,otherFactors:P.target.checked?[...F.otherFactors,C.value]:F.otherFactors.filter($=>$!==C.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:[C.label,C.value==="rigger"&&" (40,000)",C.value==="helper"&&" (12,000)"]})]},C.value))})]})]})]})]}),a.jsxs("div",{className:"col-span-5 space-y-6 sticky top-6",children:[a.jsxs(te,{className:"shadow-lg border-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80",children:[a.jsx(de,{className:"border-b border-gray-100 pb-6",children:a.jsxs(he,{className:"text-xl font-semibold flex items-center gap-2",children:[a.jsx(HM,{className:"w-5 h-5 text-primary-500"}),"Quotation Summary"]})}),a.jsxs(le,{children:[w>0&&!N.selectedMachines.length&&a.jsxs("div",{className:"mb-6 p-4 bg-primary-50/50 rounded-xl border border-primary-100",children:[a.jsx("div",{className:"text-sm font-medium text-primary-900 mb-2",children:"Equipment Details"}),a.jsxs("div",{className:"text-2xl font-bold text-primary-700",children:["",be(w).replace("",""),a.jsx("span",{className:"text-base font-medium text-primary-600 ml-1",children:N.orderType==="monthly"?"/month":"/hr"})]}),a.jsxs("div",{className:"text-sm text-primary-600 mt-1",children:[N.orderType.charAt(0).toUpperCase()+N.orderType.slice(1)," Rate"]}),N.orderType==="monthly"&&a.jsx("div",{className:"mt-2 text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{children:"Hourly Rate: "}),a.jsxs("span",{className:"font-medium ml-1",children:["",be(w/26/(parseFloat(N.workingHours.toString())||8)).replace("",""),"/hr"]})]})}),N.numberOfDays&&a.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{children:"Total Days:"}),a.jsx("span",{className:"font-medium",children:Number(N.numberOfDays)>25?"26 (Monthly)":N.numberOfDays})]}),N.orderType!=="monthly"&&a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{children:"Hours per Day:"}),a.jsx("span",{className:"font-medium",children:N.workingHours===0?8:N.workingHours||8})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{children:"Order Type:"}),a.jsx("span",{className:"font-medium",children:N.orderType.charAt(0).toUpperCase()+N.orderType.slice(1)})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[N.selectedMachines.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",N.selectedMachines.length,")"]}),a.jsxs("div",{className:"space-y-2 bg-primary-50 p-3 rounded-md border border-primary-100",children:[N.selectedMachines.map(C=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:C.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[C.quantity," unit",C.quantity>1?"s":"","  ",be(C.baseRate),N.orderType==="monthly"?"/month":"/hr"]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"font-semibold text-primary-700",children:[be(C.baseRate*C.quantity),a.jsx("span",{className:"text-xs ml-1",children:N.orderType==="monthly"?"/month":"/hr"})]})})]},C.id)),a.jsxs("div",{className:"flex justify-between items-center p-2 mt-2 border-t border-primary-200",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Total machines value"}),a.jsxs("div",{className:"font-semibold text-primary-700",children:[be(N.selectedMachines.reduce((C,P)=>C+P.baseRate*P.quantity,0)),a.jsx("span",{className:"text-xs ml-1",children:N.orderType==="monthly"?"/month":"/hr"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"w-4 h-4 text-primary-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Working Cost"})]}),a.jsx("span",{className:"font-semibold",children:be(M.workingCost)})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?M.workingCost/M.totalAmount*100:.5}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"w-4 h-4 text-success-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Food & Accommodation"})]}),a.jsx("span",{className:"font-semibold",children:be(M.foodAccomCost)})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-success-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?M.foodAccomCost/M.totalAmount*100:.5}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zn,{className:"w-4 h-4 text-warning-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Mob/Demob Cost"}),a.jsxs("div",{className:"group relative inline-block",children:[a.jsx(er,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),a.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Cost calculated for each machine based on distance, running cost per km, and trailer cost."})]})]}),a.jsx("span",{className:"font-semibold",children:be(M.mobDemobCost)})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-warning-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?M.mobDemobCost/M.totalAmount*100:.5}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ju,{className:"w-4 h-4 text-error-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Risk & Usage"}),a.jsxs("div",{className:"group relative inline-block",children:[a.jsx(er,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),a.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Risk factor (5-15%) and usage load (5-10%) calculated for each machine based on its base rate and quantity."})]})]}),a.jsx("span",{className:"font-semibold",children:be(M.riskAdjustment+M.usageLoadFactor)})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-error-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?(M.riskAdjustment+M.usageLoadFactor)/M.totalAmount*100:.5}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(eh,{className:"w-4 h-4 text-purple-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Extra Commercial Charges"})]}),a.jsx("span",{className:"font-semibold",children:be(Number(N.extraCharge))})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?Number(N.extraCharge)/M.totalAmount*100:.5}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bl,{className:"w-4 h-4 text-indigo-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Incidental Charges"})]}),a.jsx("span",{className:"font-semibold",children:be(N.incidentalCharges.reduce((C,P)=>{const F=Zc.find($=>$.value===P);return C+(F?F.amount:0)},0))})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?N.incidentalCharges.reduce((C,P)=>{const F=Zc.find($=>$.value===P);return C+(F?F.amount:0)},0)/M.totalAmount*100:.5}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($n,{className:"w-4 h-4 text-cyan-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Other Factors"})]}),a.jsx("span",{className:"font-semibold",children:be((N.otherFactors.includes("rigger")?Gf:0)+(N.otherFactors.includes("helper")?Yf:0))})]}),a.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-cyan-500 rounded-full transition-all duration-300",style:{width:`${M.totalAmount>0?((N.otherFactors.includes("rigger")?Gf:0)+(N.otherFactors.includes("helper")?Yf:0))/M.totalAmount*100:.5}%`}})})]})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsx("span",{children:"Subtotal"}),a.jsx("span",{className:"font-medium",children:be(M.totalAmount-M.gstAmount)})]}),N.includeGst&&a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsx("span",{children:"GST (18%)"}),a.jsx("span",{className:"font-medium",children:be(M.gstAmount)})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[a.jsx("span",{className:"text-lg font-semibold",children:"Total Amount"}),a.jsx("span",{className:"text-2xl font-bold text-primary-600",children:be(M.totalAmount)})]})]})}),a.jsx("div",{className:"mt-6",children:a.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[a.jsx("input",{type:"checkbox",checked:N.includeGst,onChange:C=>D(P=>({...P,includeGst:C.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),a.jsx("div",{className:"text-sm text-gray-500",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6",children:[a.jsx(U,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1 order-2 sm:order-1",size:"md",children:"Cancel"}),a.jsxs("div",{className:"sm:flex-1 order-1 sm:order-2",children:[a.jsx(U,{type:"submit",disabled:x||N.selectedMachines.length===0&&!N.selectedEquipment.id,className:"w-full bg-primary-600 hover:bg-primary-700",leftIcon:x?a.jsx(ys,{className:"animate-spin"}):a.jsx(yi,{}),size:"md",children:x?"Saving...":r?"Update Quotation":"Create Quotation"}),N.selectedMachines.length===0&&!N.selectedEquipment.id&&a.jsx("div",{className:"mt-1 text-xs text-center text-amber-600",children:"Please add at least one machine"})]})]})]})]})]})]}),_.show&&a.jsx(ot,{title:_.title,description:_.description,variant:_.variant,isVisible:_.show,onClose:()=>E({show:!1,title:""})})]}):a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Deal not found."})}function Nd(e){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(e)}function Un(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ke(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function it(e){Ke(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Nd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Yw(e,t){Ke(2,arguments);var n=it(e),s=Un(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function V2(e,t){Ke(2,arguments);var n=it(e).getTime(),s=Un(t);return new Date(n+s)}var BV=36e5;function U2(e,t){Ke(2,arguments);var n=Un(t);return V2(e,n*BV)}var zV={};function Ro(){return zV}function VV(e,t){var n,s,r,i,o,l,c,u;Ke(1,arguments);var d=Ro(),h=Un((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=it(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function UV(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Qw(e){Ke(1,arguments);var t=it(e);return t.setHours(0,0,0,0),t}function WV(e,t){Ke(2,arguments);var n=Qw(e),s=Qw(t);return n.getTime()===s.getTime()}function HV(e){return Ke(1,arguments),e instanceof Date||Nd(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function qV(e){if(Ke(1,arguments),!HV(e)&&typeof e!="number")return!1;var t=it(e);return!isNaN(Number(t))}function GV(e,t){var n;Ke(1,arguments);var s=e||{},r=it(s.start),i=it(s.end),o=i.getTime();if(!(r.getTime()<=o))throw new RangeError("Invalid interval");var l=[],c=r;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)l.push(it(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function YV(e,t){var n,s,r,i,o,l,c,u;Ke(1,arguments);var d=Ro(),h=Un((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=it(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function QV(e,t){Ke(2,arguments);var n=Un(t);return V2(e,-n)}var KV=864e5;function XV(e){Ke(1,arguments);var t=it(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),r=n-s;return Math.floor(r/KV)+1}function Cd(e){Ke(1,arguments);var t=1,n=it(e),s=n.getUTCDay(),r=(s<t?7:0)+s-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function W2(e){Ke(1,arguments);var t=it(e),n=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var r=Cd(s),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=Cd(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function JV(e){Ke(1,arguments);var t=W2(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var s=Cd(n);return s}var ZV=6048e5;function eU(e){Ke(1,arguments);var t=it(e),n=Cd(t).getTime()-JV(t).getTime();return Math.round(n/ZV)+1}function Ed(e,t){var n,s,r,i,o,l,c,u;Ke(1,arguments);var d=Ro(),h=Un((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=it(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function H2(e,t){var n,s,r,i,o,l,c,u;Ke(1,arguments);var d=it(e),h=d.getUTCFullYear(),f=Ro(),m=Un((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var x=Ed(p,t),b=new Date(0);b.setUTCFullYear(h,0,m),b.setUTCHours(0,0,0,0);var w=Ed(b,t);return d.getTime()>=x.getTime()?h+1:d.getTime()>=w.getTime()?h:h-1}function tU(e,t){var n,s,r,i,o,l,c,u;Ke(1,arguments);var d=Ro(),h=Un((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=H2(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=Ed(m,t);return p}var nU=6048e5;function sU(e,t){Ke(1,arguments);var n=it(e),s=Ed(n,t).getTime()-tU(n,t).getTime();return Math.round(s/nU)+1}function Te(e,t){for(var n=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return n+s}var Bs={y:function(t,n){var s=t.getUTCFullYear(),r=s>0?s:1-s;return Te(n==="yy"?r%100:r,n.length)},M:function(t,n){var s=t.getUTCMonth();return n==="M"?String(s+1):Te(s+1,2)},d:function(t,n){return Te(t.getUTCDate(),n.length)},a:function(t,n){var s=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,n){return Te(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Te(t.getUTCHours(),n.length)},m:function(t,n){return Te(t.getUTCMinutes(),n.length)},s:function(t,n){return Te(t.getUTCSeconds(),n.length)},S:function(t,n){var s=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,s-3));return Te(i,n.length)}},Ti={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rU={G:function(t,n,s){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return Bs.y(t,n)},Y:function(t,n,s,r){var i=H2(t,r),o=i>0?i:1-i;if(n==="YY"){var l=o%100;return Te(l,2)}return n==="Yo"?s.ordinalNumber(o,{unit:"year"}):Te(o,n.length)},R:function(t,n){var s=W2(t);return Te(s,n.length)},u:function(t,n){var s=t.getUTCFullYear();return Te(s,n.length)},Q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Te(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Te(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,s){var r=t.getUTCMonth();switch(n){case"M":case"MM":return Bs.M(t,n);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,s){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Te(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,s,r){var i=sU(t,r);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):Te(i,n.length)},I:function(t,n,s){var r=eU(t);return n==="Io"?s.ordinalNumber(r,{unit:"week"}):Te(r,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):Bs.d(t,n)},D:function(t,n,s){var r=XV(t);return n==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Te(r,n.length)},E:function(t,n,s){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,s,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Te(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Te(o,n.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Te(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,s){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){var r=t.getUTCHours(),i;switch(r===12?i=Ti.noon:r===0?i=Ti.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){var r=t.getUTCHours(),i;switch(r>=17?i=Ti.evening:r>=12?i=Ti.afternoon:r>=4?i=Ti.morning:i=Ti.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Bs.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Bs.H(t,n)},K:function(t,n,s){var r=t.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Te(r,n.length)},k:function(t,n,s){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?s.ordinalNumber(r,{unit:"hour"}):Te(r,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Bs.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Bs.s(t,n)},S:function(t,n){return Bs.S(t,n)},X:function(t,n,s,r){var i=r._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Xw(o);case"XXXX":case"XX":return qr(o);case"XXXXX":case"XXX":default:return qr(o,":")}},x:function(t,n,s,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(n){case"x":return Xw(o);case"xxxx":case"xx":return qr(o);case"xxxxx":case"xxx":default:return qr(o,":")}},O:function(t,n,s,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Kw(o,":");case"OOOO":default:return"GMT"+qr(o,":")}},z:function(t,n,s,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Kw(o,":");case"zzzz":default:return"GMT"+qr(o,":")}},t:function(t,n,s,r){var i=r._originalDate||t,o=Math.floor(i.getTime()/1e3);return Te(o,n.length)},T:function(t,n,s,r){var i=r._originalDate||t,o=i.getTime();return Te(o,n.length)}};function Kw(e,t){var n=e>0?"-":"+",s=Math.abs(e),r=Math.floor(s/60),i=s%60;if(i===0)return n+String(r);var o=t;return n+String(r)+o+Te(i,2)}function Xw(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Te(Math.abs(e)/60,2)}return qr(e,t)}function qr(e,t){var n=t||"",s=e>0?"-":"+",r=Math.abs(e),i=Te(Math.floor(r/60),2),o=Te(r%60,2);return s+i+n+o}var Jw=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},q2=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},iU=function(t,n){var s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return Jw(t,n);var o;switch(r){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Jw(r,n)).replace("{{time}}",q2(i,n))},oU={p:q2,P:iU},aU=["D","DD"],lU=["YY","YYYY"];function cU(e){return aU.indexOf(e)!==-1}function uU(e){return lU.indexOf(e)!==-1}function Zw(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var dU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hU=function(t,n,s){var r,i=dU[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function Qf(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,s=e.formats[n]||e.formats[e.defaultWidth];return s}}var fU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gU={date:Qf({formats:fU,defaultWidth:"full"}),time:Qf({formats:mU,defaultWidth:"full"}),dateTime:Qf({formats:pU,defaultWidth:"full"})},xU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yU=function(t,n,s,r){return xU[t]};function ia(e){return function(t,n){var s=n!=null&&n.context?String(n.context):"standalone",r;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var vU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},NU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},CU=function(t,n){var s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},EU={ordinalNumber:CU,era:ia({values:vU,defaultWidth:"wide"}),quarter:ia({values:bU,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:ia({values:wU,defaultWidth:"wide"}),day:ia({values:SU,defaultWidth:"wide"}),dayPeriod:ia({values:jU,defaultWidth:"wide",formattingValues:NU,defaultFormattingWidth:"wide"})};function oa(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?_U(l,function(h){return h.test(o)}):kU(l,function(h){return h.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function kU(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function _U(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function DU(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var r=s[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(r.length);return{value:o,rest:l}}}var TU=/^(\d+)(th|st|nd|rd)?/i,PU=/\d+/i,MU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},AU={any:[/^b/i,/^(a|c)/i]},IU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RU={any:[/1/i,/2/i,/3/i,/4/i]},OU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},LU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$U={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},VU={ordinalNumber:DU({matchPattern:TU,parsePattern:PU,valueCallback:function(t){return parseInt(t,10)}}),era:oa({matchPatterns:MU,defaultMatchWidth:"wide",parsePatterns:AU,defaultParseWidth:"any"}),quarter:oa({matchPatterns:IU,defaultMatchWidth:"wide",parsePatterns:RU,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:oa({matchPatterns:OU,defaultMatchWidth:"wide",parsePatterns:LU,defaultParseWidth:"any"}),day:oa({matchPatterns:FU,defaultMatchWidth:"wide",parsePatterns:$U,defaultParseWidth:"any"}),dayPeriod:oa({matchPatterns:BU,defaultMatchWidth:"any",parsePatterns:zU,defaultParseWidth:"any"})},UU={code:"en-US",formatDistance:hU,formatLong:gU,formatRelative:yU,localize:EU,match:VU,options:{weekStartsOn:0,firstWeekContainsDate:1}},WU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,HU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qU=/^'([^]*?)'?$/,GU=/''/g,YU=/[a-zA-Z]/;function us(e,t,n){var s,r,i,o,l,c,u,d,h,f,m,p,x,b;Ke(2,arguments);var w=String(t),y=Ro(),g=(s=(r=void 0)!==null&&r!==void 0?r:y.locale)!==null&&s!==void 0?s:UU,S=Un((i=(o=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:y.firstWeekContainsDate)!==null&&o!==void 0?o:(u=y.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=Un((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:y.weekStartsOn)!==null&&f!==void 0?f:(x=y.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&h!==void 0?h:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!g.localize)throw new RangeError("locale must contain localize property");if(!g.formatLong)throw new RangeError("locale must contain formatLong property");var k=it(e);if(!qV(k))throw new RangeError("Invalid time value");var _=UV(k),E=QV(k,_),N={firstWeekContainsDate:S,weekStartsOn:j,locale:g,_originalDate:k},D=w.match(HU).map(function(M){var L=M[0];if(L==="p"||L==="P"){var z=oU[L];return z(M,g.formatLong)}return M}).join("").match(WU).map(function(M){if(M==="''")return"'";var L=M[0];if(L==="'")return QU(M);var z=rU[L];if(z)return uU(M)&&Zw(M,t,String(e)),cU(M)&&Zw(M,t,String(e)),z(E,M,g.localize,N);if(L.match(YU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return M}).join("");return D}function QU(e){var t=e.match(qU);return t?t[1].replace(GU,"'"):e}function KU(e,t){Ke(2,arguments);var n=it(e).getTime(),s=it(t.start).getTime(),r=it(t.end).getTime();if(!(s<=r))throw new RangeError("Invalid interval");return n>=s&&n<=r}const e1=Array.from({length:15},(e,t)=>U2(new Date().setHours(6,0,0,0),t));function XU(){var ee,W;const{user:e}=Ae(),[t,n]=v.useState("week"),[s,r]=v.useState(new Date),[i,o]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState(!0),[x,b]=v.useState(!1),[w,y]=v.useState(null),[g,S]=v.useState(null),[j,k]=v.useState(null),[_,E]=v.useState([]),[N,D]=v.useState(!1),M=Rs(),L=Qt(),[z,H]=v.useState({show:!1,title:""}),[B,A]=v.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""});v.useEffect(()=>{R();const C=new URLSearchParams(M.search),P=C.get("dealId"),F=C.get("action"),$=C.get("customerName");if(P&&F==="schedule"){if(S(P),$){const q=decodeURIComponent($);k(q),H({show:!0,title:`Deal won with ${q}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}T(P),L("/jobs",{replace:!0})}},[M]);const R=async()=>{try{const[C,P,F,$,q]=await Promise.all([ey(),u2(),ty(),Ql(),gh()]);o(C),c(P),d(F);const X=q.filter(ue=>ue.stage==="won").map(ue=>ue.leadId),G=$.filter(ue=>ue.status==="converted"&&X.includes(ue.id));if(f(G),g)try{const ue=await El(g);if(ue){A(ke=>{var wt;return{...ke,leadId:ue.leadId||"",location:((wt=ue.customer)==null?void 0:wt.address)||"",notes:ue.description||""}});const xe=new Date,me=new Date;me.setDate(xe.getDate()+7),A(ke=>({...ke,startDate:xe.toISOString().slice(0,16),endDate:me.toISOString().slice(0,16)}))}}catch(ue){console.error("Error fetching deal data:",ue)}}catch(C){console.error("Error fetching data:",C),Y("Error fetching data","error")}finally{p(!1)}},T=async C=>{var P,F,$,q,J;try{const X=await El(C);if(X){const G=new Date,ue=new Date;ue.setDate(G.getDate()+7);const xe=G.toISOString().slice(0,16),me=ue.toISOString().slice(0,16);S(C),(P=X.customer)!=null&&P.name&&k(X.customer.name),D(!0);try{const ke=await yd(X.leadId);if(ke&&ke.length>0){const wt=[];ke.forEach(Kt=>{if(Kt.selectedEquipment&&Kt.selectedEquipment.equipmentId){const os=l.find(as=>as.id===Kt.selectedEquipment.equipmentId);os&&!wt.some(as=>as.id===os.id)&&wt.push(os)}Kt.selectedMachines&&Kt.selectedMachines.length>0&&Kt.selectedMachines.forEach(os=>{if(os.equipmentId){const as=l.find(Pr=>Pr.id===os.equipmentId);as&&!wt.some(Pr=>Pr.id===as.id)&&wt.push(as)}})}),E(wt),wt.length>0?A({leadId:X.leadId,equipmentId:wt[0].id,operatorId:"",startDate:xe,endDate:me,location:((F=X.customer)==null?void 0:F.address)||"",notes:X.description||""}):A({leadId:X.leadId,equipmentId:"",operatorId:"",startDate:xe,endDate:me,location:(($=X.customer)==null?void 0:$.address)||"",notes:X.description||""})}else A({leadId:X.leadId,equipmentId:"",operatorId:"",startDate:xe,endDate:me,location:((q=X.customer)==null?void 0:q.address)||"",notes:X.description||""})}catch(ke){console.error("Error fetching quotations:",ke),A({leadId:X.leadId,equipmentId:"",operatorId:"",startDate:xe,endDate:me,location:((J=X.customer)==null?void 0:J.address)||"",notes:X.description||""})}finally{D(!1)}b(!0)}else Y("Deal not found","error")}catch(X){console.error("Error fetching deal:",X),Y("Error fetching deal","error")}},I=async()=>{try{if(!B.leadId||!B.equipmentId||!B.operatorId||!B.startDate||!B.endDate||!B.location){Y("Please fill in all required fields","error");return}let C="";const P=h.find($=>$.id===B.leadId);if(P)C=P.customerName;else if(j)C=j;else{Y("Customer information is missing","error");return}const F=await $6({leadId:B.leadId,customerName:C,equipmentId:B.equipmentId,operatorId:B.operatorId,startDate:B.startDate,endDate:B.endDate,location:B.location,status:"scheduled",notes:B.notes,dealId:g||void 0});o($=>[...$,F]),b(!1),V(),S(null),k(null),Y("Job scheduled successfully","success")}catch(C){console.error("Error creating job:",C),Y("Error creating job","error")}},O=async(C,P)=>{try{const F=await B6(C,P);F&&(o($=>$.map(q=>q.id===C?F:q)),Y("Job status updated","success"))}catch(F){console.error("Error updating job status:",F),Y("Error updating job status","error")}},V=()=>{A({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),E([])},Y=(C,P="success")=>{H({show:!0,title:C,variant:P}),setTimeout(()=>H({show:!1,title:""}),3e3)},ce=(C,P,F,$)=>i.filter(J=>{const X=new Date(J.startDate),G=new Date(J.endDate),ue=new Date(F),xe=new Date($);return(J.equipmentId===C||J.operatorId===P)&&J.status!=="completed"&&J.status!=="cancelled"&&(ue>=X&&ue<G||xe>X&&xe<=G||ue<=X&&xe>=G)}),ne=()=>{const C=VV(s,{weekStartsOn:1}),P=YV(s,{weekStartsOn:1}),F=GV({start:C,end:P});return a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[a.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[a.jsx("div",{className:"h-12"}),e1.map(($,q)=>a.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-500",children:us($,"h:mm a")},q))]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[F.map(($,q)=>a.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-gray-900",children:us($,"EEE")}),a.jsx("div",{className:"text-xs text-gray-500",children:us($,"MMM d")})]})},q)),e1.map(($,q)=>a.jsx(re.Fragment,{children:F.map((J,X)=>{const G=new Date(J.setHours($.getHours(),$.getMinutes())),ue=i.filter(xe=>{const me=new Date(xe.startDate),ke=new Date(xe.endDate);return WV(G,me)&&KU(G,{start:me,end:ke})});return a.jsx("div",{className:`h-20 border-b border-r border-gray-100 relative ${q===0?"border-t":""} ${X===0?"border-l":""}`,onClick:()=>{b(!0),A(xe=>({...xe,startDate:G.toISOString().slice(0,16),endDate:U2(G,2).toISOString().slice(0,16)}))},children:ue.map(xe=>a.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:"4px",minHeight:"40px",zIndex:10},onClick:me=>{me.stopPropagation(),y(xe)},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:xe.customerName}),a.jsx(Mo,{status:xe.status,className:"ml-2"})]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[us(new Date(xe.startDate),"h:mm a")," - ",us(new Date(xe.endDate),"h:mm a")]})]},xe.id))},`${q}-${X}`)})},q))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:()=>r(C=>Yw(C,-7)),children:a.jsx(KM,{className:"h-4 w-4"})}),a.jsx("h2",{className:"text-lg font-semibold",children:us(s,"MMMM yyyy")}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>r(C=>Yw(C,7)),children:a.jsx(XM,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(je,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:C=>n(C),className:"w-32"}),a.jsx(U,{onClick:()=>{h.length===0?H({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):b(!0)},leftIcon:a.jsx(ss,{size:16}),children:"New Job"})]})]}),a.jsx(te,{children:a.jsx(le,{className:"p-6",children:m?a.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No Won Deals Yet"}),a.jsx("p",{className:"text-gray-600",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):ne()})}),a.jsxs(dt,{isOpen:x,onClose:()=>{b(!1),V()},title:g?`Schedule Job for Won Deal: ${j||""}`:"Schedule Job for Won Deal",size:"lg",children:[a.jsxs("div",{className:"space-y-6",children:[g&&a.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[a.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),a.jsxs("p",{className:"text-green-700",children:[a.jsx("span",{className:"font-medium",children:"Customer:"})," ",j||"Unknown customer"]}),a.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),a.jsx(je,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...h.map(C=>({value:C.id,label:`${C.customerName} - Won Deal`}))],value:B.leadId,onChange:C=>{A(P=>({...P,leadId:C})),C?(async()=>{D(!0);try{const F=await yd(C);if(F&&F.length>0){const $=[];F.forEach(q=>{if(q.selectedEquipment&&q.selectedEquipment.equipmentId){const J=l.find(X=>X.id===q.selectedEquipment.equipmentId);J&&!$.some(X=>X.id===J.id)&&$.push(J)}q.selectedMachines&&q.selectedMachines.length>0&&q.selectedMachines.forEach(J=>{if(J.equipmentId){const X=l.find(G=>G.id===J.equipmentId);X&&!$.some(G=>G.id===X.id)&&$.push(X)}})}),E($),$.length>0&&A(q=>({...q,equipmentId:$[0].id}))}}catch(F){console.error("Error loading equipment for lead:",F)}finally{D(!1)}})():(E([]),A(P=>({...P,equipmentId:""})))},required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(je,{label:"Equipment",options:_.length>0&&g?[{value:"",label:"-- Select deal-specific equipment --"},..._.map(C=>({value:C.id,label:`${C.name} (From Deal)`}))]:[{value:"",label:"-- Select equipment --"},...l.map(C=>({value:C.id,label:C.name}))],value:B.equipmentId,onChange:C=>A(P=>({...P,equipmentId:C})),required:!0}),N?a.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):_.length>0?a.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[_.length," equipment item",_.length!==1?"s":""," from deal quotation",_.length!==1?"s":""]}):B.leadId?a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),a.jsx(je,{label:"Operator",options:u.map(C=>({value:C.id,label:C.name})),value:B.operatorId,onChange:C=>A(P=>({...P,operatorId:C})),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Ce,{type:"datetime-local",label:"Start Date & Time",value:B.startDate,onChange:C=>A(P=>({...P,startDate:C.target.value})),required:!0}),a.jsx(Ce,{type:"datetime-local",label:"End Date & Time",value:B.endDate,onChange:C=>A(P=>({...P,endDate:C.target.value})),required:!0})]}),a.jsx(Ce,{label:"Location",value:B.location,onChange:C=>A(P=>({...P,location:C.target.value})),required:!0}),a.jsx(Vn,{label:"Notes",value:B.notes,onChange:C=>A(P=>({...P,notes:C.target.value})),rows:4}),B.equipmentId&&B.operatorId&&B.startDate&&B.endDate&&a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const C=ce(B.equipmentId,B.operatorId,B.startDate,B.endDate);return C.length>0?a.jsxs("div",{className:"text-error-600",children:[a.jsx("p",{children:"Conflicts found:"}),a.jsx("ul",{className:"list-disc list-inside text-sm",children:C.map(P=>a.jsxs("li",{children:[P.customerName," - ",us(new Date(P.startDate),"MMM d, h:mm a")]},P.id))})]}):a.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(U,{variant:"outline",onClick:()=>{b(!1),V()},children:"Cancel"}),a.jsx(U,{onClick:I,children:"Schedule Job"})]})]}),a.jsx(dt,{isOpen:!!w,onClose:()=>y(null),title:"Job Details",size:"lg",children:w&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Customer"}),a.jsx("p",{className:"mt-1",children:w.customerName})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Status"}),a.jsx("div",{className:"mt-1",children:a.jsx(je,{options:[{value:"scheduled",label:"Scheduled"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],value:w.status,onChange:C=>O(w.id,C)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),a.jsx("p",{className:"mt-1",children:(ee=l.find(C=>C.id===w.equipmentId))==null?void 0:ee.name})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Operator"}),a.jsx("p",{className:"mt-1",children:(W=u.find(C=>C.id===w.operatorId))==null?void 0:W.name})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Start Date"}),a.jsx("p",{className:"mt-1",children:us(new Date(w.startDate),"MMM d, yyyy h:mm a")})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"End Date"}),a.jsx("p",{className:"mt-1",children:us(new Date(w.endDate),"MMM d, yyyy h:mm a")})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Location"}),a.jsx("p",{className:"mt-1",children:w.location})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Notes"}),a.jsx("p",{className:"mt-1 whitespace-pre-wrap",children:w.notes||"No notes"})]})]}),a.jsx("div",{className:"flex justify-end gap-3 mt-6",children:a.jsx(U,{variant:"outline",onClick:()=>y(null),children:"Close"})})]})}),z.show&&a.jsx(ot,{title:z.title,description:z.description,variant:z.variant,isVisible:z.show,duration:3e3,onClose:()=>H({show:!1,title:""})})]})}const JU={users:"users",leads:"leads",deals:"deals",customers:"customers",quotations:"quotations",jobs:"jobs",equipment:"equipment",operators:"operators",templates:"templates",site_assessments:"site_assessments",services:"services",configs:"configs"},Kf=e=>e.replace(/([-_][a-z])/g,t=>t.toUpperCase().replace("-","").replace("_","")),aa=e=>{const t={};for(const[n,s]of Object.entries(e))if(n==="id")t.id=s;else if(n.endsWith("_id")){const r=n.slice(0,-3),i=Kf(r);t[`${i}Id`]=s,t[Kf(n)]=s}else t[Kf(n)]=s;return t};class jh{constructor(t){ie(this,"tableName");this.tableName=JU[t]}async getAll(){try{return(await Re.any(`SELECT * FROM ${this.tableName} ORDER BY created_at DESC`)).map(n=>aa(n))}catch(t){throw console.error(`Error getting all ${this.tableName}:`,t),t}}async getById(t){try{const n=`${this.tableName.slice(0,-1)}_id`,s=await Re.oneOrNone(`SELECT * FROM ${this.tableName} WHERE ${n} = $1`,[t]);return s?aa(s):null}catch(n){throw console.error(`Error getting ${this.tableName} by ID:`,n),n}}async create(t){try{const n=[],s=[],r=[];let i=1;for(const[c,u]of Object.entries(t)){const d=c.replace(/[A-Z]/g,h=>`_${h.toLowerCase()}`);n.push(d),s.push(u),r.push(`$${i++}`)}n.push("created_at"),s.push(new Date),r.push(`$${i++}`),n.push("updated_at"),s.push(new Date),r.push(`$${i++}`);const o=`
        INSERT INTO ${this.tableName} (${n.join(", ")})
        VALUES (${r.join(", ")})
        RETURNING *
      `,l=await Re.one(o,s);return aa(l)}catch(n){throw console.error(`Error creating ${this.tableName}:`,n),n}}async update(t,n){try{const s=`${this.tableName.slice(0,-1)}_id`,r=[],i=[];let o=1;for(const[u,d]of Object.entries(n)){const h=u.replace(/[A-Z]/g,f=>`_${f.toLowerCase()}`);r.push(`${h} = $${o++}`),i.push(d)}r.push(`updated_at = $${o++}`),i.push(new Date),i.push(t);const l=`
        UPDATE ${this.tableName}
        SET ${r.join(", ")}
        WHERE ${s} = $${o}
        RETURNING *
      `,c=await Re.one(l,i);return aa(c)}catch(s){throw console.error(`Error updating ${this.tableName}:`,s),s}}async delete(t){try{const n=`${this.tableName.slice(0,-1)}_id`;return typeof window<"u"?(console.log(`Mock deleting ${this.tableName} with ID ${t}`),!0):(await Re.none(`DELETE FROM ${this.tableName} WHERE ${n} = $1`,[t]),!0)}catch(n){throw console.error(`Error deleting ${this.tableName}:`,n),n}}async findByCondition(t){try{const n=[],s=[];let r=1;for(const[l,c]of Object.entries(t)){const u=l.replace(/[A-Z]/g,d=>`_${d.toLowerCase()}`);n.push(`${u} = $${r++}`),s.push(c)}const i=`
        SELECT * FROM ${this.tableName}
        WHERE ${n.join(" AND ")}
        ORDER BY created_at DESC
      `;return(await Re.any(i,s)).map(l=>aa(l))}catch(n){throw console.error(`Error querying ${this.tableName}:`,n),n}}}class ZU extends jh{constructor(){super("site_assessments")}async getSiteAssessments(){try{return(await Re.any("SELECT * FROM site_assessments ORDER BY created_at DESC")).map(n=>({id:n.id,title:n.title,description:n.description,customerId:n.customer_id,jobId:n.job_id,location:n.location,constraints:Array.isArray(n.constraints)?n.constraints:[],notes:n.notes,images:Array.isArray(n.images)?n.images:[],videos:Array.isArray(n.videos)?n.videos:[],createdBy:n.created_by,createdAt:n.created_at,updatedAt:n.updated_at}))}catch(t){throw console.error("Error fetching site assessments:",t),new Error(`Database error: ${t.message}`)}}async getSiteAssessmentById(t){try{const n=await Re.oneOrNone("SELECT * FROM site_assessments WHERE id = $1",[t]);return n?{id:n.id,title:n.title,description:n.description,customerId:n.customer_id,jobId:n.job_id,location:n.location,constraints:Array.isArray(n.constraints)?n.constraints:[],notes:n.notes,images:Array.isArray(n.images)?n.images:[],videos:Array.isArray(n.videos)?n.videos:[],createdBy:n.created_by,createdAt:n.created_at,updatedAt:n.updated_at}:null}catch(n){throw console.error("Error fetching site assessment by ID:",n),new Error(`Database error: ${n.message}`)}}async createSiteAssessment(t){try{const n=new Date().toISOString(),s=Zx(),r=await Re.one(`
        INSERT INTO site_assessments (
          id, 
          title, 
          description, 
          customer_id, 
          job_id, 
          location, 
          constraints, 
          notes, 
          images, 
          videos, 
          created_by, 
          created_at, 
          updated_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
        RETURNING *
      `,[s,t.title,t.description,t.customerId,t.jobId||null,t.location,t.constraints,t.notes,t.images,t.videos,t.createdBy,n,n]);return{id:r.id,title:r.title,description:r.description,customerId:r.customer_id,jobId:r.job_id,location:r.location,constraints:Array.isArray(r.constraints)?r.constraints:[],notes:r.notes,images:Array.isArray(r.images)?r.images:[],videos:Array.isArray(r.videos)?r.videos:[],createdBy:r.created_by,createdAt:r.created_at,updatedAt:r.updated_at}}catch(n){throw console.error("Error creating site assessment:",n),new Error(`Database error: ${n.message}`)}}async updateSiteAssessment(t,n){try{if(!await this.getSiteAssessmentById(t))return null;const r=[],i=[];let o=1;n.title!==void 0&&(r.push(`title = $${o++}`),i.push(n.title)),n.description!==void 0&&(r.push(`description = $${o++}`),i.push(n.description)),n.customerId!==void 0&&(r.push(`customer_id = $${o++}`),i.push(n.customerId)),n.jobId!==void 0&&(r.push(`job_id = $${o++}`),i.push(n.jobId)),n.location!==void 0&&(r.push(`location = $${o++}`),i.push(n.location)),n.constraints!==void 0&&(r.push(`constraints = $${o++}`),i.push(n.constraints)),n.notes!==void 0&&(r.push(`notes = $${o++}`),i.push(n.notes)),n.images!==void 0&&(r.push(`images = $${o++}`),i.push(n.images)),n.videos!==void 0&&(r.push(`videos = $${o++}`),i.push(n.videos)),n.createdBy!==void 0&&(r.push(`created_by = $${o++}`),i.push(n.createdBy)),r.push(`updated_at = $${o++}`),i.push(new Date().toISOString()),i.push(t);const l=await Re.oneOrNone(`
        UPDATE site_assessments
        SET ${r.join(", ")}
        WHERE id = $${o}
        RETURNING *
      `,i);return l?{id:l.id,title:l.title,description:l.description,customerId:l.customer_id,jobId:l.job_id,location:l.location,constraints:Array.isArray(l.constraints)?l.constraints:[],notes:l.notes,images:Array.isArray(l.images)?l.images:[],videos:Array.isArray(l.videos)?l.videos:[],createdBy:l.created_by,createdAt:l.created_at,updatedAt:l.updated_at}:null}catch(s){throw console.error("Error updating site assessment:",s),new Error(`Database error: ${s.message}`)}}async deleteSiteAssessment(t){try{const n=await Re.query("DELETE FROM site_assessments WHERE id = $1",[t]);return n&&n.rowCount>0}catch(n){throw console.error("Error deleting site assessment:",n),new Error(`Database error: ${n.message}`)}}}const G2=new ZU,e8=async()=>{try{return await G2.getSiteAssessments()}catch(e){return console.error("Error fetching site assessments:",e),[]}},t8=async e=>{try{return await G2.createSiteAssessment(e)}catch(t){throw console.error("Error creating site assessment:",t),t}},n8=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function s8(){const{user:e}=Ae(),[t,n]=v.useState(""),[s,r]=v.useState(""),[i,o]=v.useState(""),[l,c]=v.useState(""),[u,d]=v.useState([]),[h,f]=v.useState([]),[m,p]=v.useState(""),[x,b]=v.useState(!1),[w,y]=v.useState(null),[g,S]=v.useState([]),[j,k]=v.useState(!0),[_,E]=v.useState({show:!1,title:""}),N=v.useRef(null);v.useEffect(()=>{(async()=>{try{const O=await e8();S(O),k(!1)}catch(O){console.error("Error fetching site assessments:",O),R("Error loading site assessments","error"),k(!1)}})()},[]);const D=I=>{const Y=Array.from(I.target.files||[]).filter(ce=>{const ne=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(ce.type),ee=ce.size<=10*1024*1024;return!ne||!ee?(R("Invalid file",`${ce.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(ce=>({id:Math.random().toString(36).substring(2,9),file:ce,preview:URL.createObjectURL(ce),annotations:[]}));d(ce=>[...ce,...Y])},M=I=>{I.preventDefault();const O=Array.from(I.dataTransfer.files),V=N.current;if(V){const Y=new DataTransfer;O.forEach(ne=>Y.items.add(ne)),V.files=Y.files;const ce=new Event("change",{bubbles:!0});V.dispatchEvent(ce)}},L=I=>{I.preventDefault()},z=I=>{d(O=>{const V=O.filter(Y=>Y.id!==I);return O.forEach(Y=>{Y.id===I&&URL.revokeObjectURL(Y.preview)}),V})},H=I=>{f(O=>O.find(Y=>Y.id===I.id)?O.filter(Y=>Y.id!==I.id):[...O,{...I}])},B=(I,O)=>{f(V=>V.map(Y=>Y.id===I?{...Y,notes:O}:Y))},A=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){R("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(I=>setTimeout(I,1e3)),R("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{R("Error sending link","Please try again later","error")}},R=(I,O,V="success")=>{E({show:!0,title:I,description:O,variant:V}),setTimeout(()=>E({show:!1,title:""}),3e3)},T=async()=>{if(!e){R("Error","You need to be logged in to submit a site assessment","error");return}if(!t){R("Missing title","Please provide a title for the site assessment","warning");return}if(!i){R("Missing location","Please provide the site location","warning");return}if(u.length===0){R("Missing files","Please upload at least one site photo or video","warning");return}try{const I=u.filter(ee=>ee.file.type.startsWith("image/")).map(ee=>`mock-url-${ee.id}`),O=u.filter(ee=>ee.file.type.startsWith("video/")).map(ee=>`mock-url-${ee.id}`),V=h.map(ee=>ee.id),Y=h.filter(ee=>ee.notes).map(ee=>`${ee.label}: ${ee.notes}`).join(`
`),ce={title:t,description:s,customerId:l||"unknown",location:i,constraints:V,notes:Y,images:I,videos:O,createdBy:e.id},ne=await t8(ce);S(ee=>[...ee,ne]),n(""),r(""),c(""),o(""),d([]),f([]),p(""),R("Site assessment submitted successfully",void 0,"success")}catch(I){console.error("Error submitting site assessment:",I),R("Error submitting assessment","Please try again later","error")}};return re.useEffect(()=>()=>{u.forEach(I=>{URL.revokeObjectURL(I.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Upload Media"})}),a.jsxs(le,{children:[a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:M,onDragOver:L,children:[a.jsx("input",{ref:N,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:D}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(kN,{className:"h-12 w-12 text-gray-400"})}),a.jsxs("div",{children:[a.jsx(U,{variant:"outline",onClick:()=>{var I;return(I=N.current)==null?void 0:I.click()},children:"Choose Files"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&a.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(I=>a.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[I.file.type.startsWith("image/")?a.jsx("img",{src:I.preview,alt:"Preview",className:"w-full h-32 object-cover"}):a.jsx("video",{src:I.preview,className:"w-full h-32 object-cover"}),a.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[I.file.type.startsWith("image/")&&a.jsx(U,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{y(I),b(!0)},children:a.jsx(ov,{size:16})}),a.jsx(U,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>z(I.id),children:a.jsx(ko,{size:16})})]}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:I.file.name})]},I.id))})]})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Site Constraints"})}),a.jsx(le,{children:a.jsx("div",{className:"space-y-4",children:n8.map(I=>{var O;return a.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(V=>V.id===I.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(V=>V.id===I.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>H(I),children:h.some(V=>V.id===I.id)&&a.jsx(QM,{className:"text-white h-4 w-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"font-medium text-gray-900",children:I.label}),I.description&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:I.description}),h.some(V=>V.id===I.id)&&a.jsx(Vn,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((O=h.find(V=>V.id===I.id))==null?void 0:O.notes)||"",onChange:V=>B(I.id,V.target.value),rows:2})]})]})},I.id)})})})]})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Remote Site Assessment"})}),a.jsx(le,{children:a.jsxs("div",{className:"max-w-md",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ce,{type:"tel",placeholder:"Enter phone number",value:m,onChange:I=>p(I.target.value)}),a.jsx(U,{onClick:A,leftIcon:a.jsx(hl,{size:16}),children:"Send Link"})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Site Details"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),a.jsx(Ce,{value:t,onChange:I=>n(I.target.value),placeholder:"Site assessment title",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),a.jsx(Ce,{value:l,onChange:I=>c(I.target.value),placeholder:"Enter customer ID if available"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),a.jsx(Ce,{value:i,onChange:I=>o(I.target.value),placeholder:"Enter site address/location",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx(Vn,{value:s,onChange:I=>r(I.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsxs(U,{onClick:T,className:"flex items-center gap-2",children:[a.jsx(hl,{size:16}),"Submit Assessment"]})}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Assessment Summary"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(I=>a.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[I.file.type.startsWith("image/")?a.jsx(GM,{size:14}):a.jsx(ov,{size:14}),a.jsx("span",{className:"truncate max-w-[200px]",children:I.file.name})]},I.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?a.jsx("div",{className:"space-y-3",children:h.map(I=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[a.jsx(EN,{size:14}),I.label]}),I.notes&&a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:I.notes})]},I.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),a.jsx(Px,{children:x&&w&&a.jsx(gl.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:a.jsxs(gl.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",a.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{b(!1),y(null)},children:a.jsx(ho,{size:20})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:w.preview,alt:"Annotation",className:"max-w-full h-auto"})}),a.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[a.jsx(U,{variant:"outline",onClick:()=>{b(!1),y(null)},children:"Cancel"}),a.jsx(U,{onClick:()=>{b(!1),y(null),R("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),_.show&&a.jsx(ot,{title:_.title,description:_.description,variant:_.variant,isVisible:_.show,onClose:()=>E({show:!1,title:""})})]})}const r8=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function i8(){const{id:e}=rx(),{user:t}=Ae(),[n,s]=v.useState(null),[r,i]=v.useState(!0),[o,l]=v.useState(r8),[c,u]=v.useState(""),[d,h]=v.useState(!1),[f,m]=v.useState(""),[p,x]=v.useState("");v.useState(!1);const[b,w]=v.useState(null),[y,g]=v.useState({show:!1,title:""});v.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const D=await L6(e);s(D),w({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch(D){console.error("Error fetching job details:",D),N("Error fetching job details","error")}finally{i(!1)}},j=D=>{l(M=>M.map(L=>L.id===D?{...L,checked:!L.checked}:L))},k=async()=>{try{await new Promise(D=>setTimeout(D,1e3)),N("Feedback request sent successfully","success")}catch{N("Error sending feedback request","error")}},_=async()=>{if(!f||!p){N("Please fill in all discount request fields","error");return}try{await new Promise(D=>setTimeout(D,1e3)),N("Discount request submitted for approval","success")}catch{N("Error submitting discount request","error")}},E=()=>{N("Summary downloaded successfully","success")},N=(D,M="success")=>{g({show:!0,title:D,variant:M}),setTimeout(()=>g({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):r?a.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?a.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),a.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),a.jsx(U,{variant:"outline",leftIcon:a.jsx(ax,{size:16}),onClick:E,children:"Download Summary"})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Job Details"})}),a.jsx(le,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),a.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(th,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:n.location})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(Zn,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(_N,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Mike Operator"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),a.jsxs("div",{className:"mt-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:new Date(n.startDate).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-5 w-5 text-gray-400"}),a.jsxs("span",{children:[new Date(n.startDate).toLocaleTimeString()," - ",new Date(n.endDate).toLocaleTimeString()]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Safety Observations"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(D=>a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${D.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>j(D.id),children:D.checked&&a.jsx(mr,{className:"text-white h-4 w-4"})}),a.jsx("span",{className:"text-gray-700",children:D.label})]},D.id))}),a.jsx(Vn,{label:"Safety Notes",value:c,onChange:D=>u(D.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(he,{children:"Customer Feedback"}),a.jsx(U,{variant:"outline",leftIcon:a.jsx(hl,{size:16}),onClick:k,children:"Request Feedback"})]})}),a.jsx(le,{children:b?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex",children:[1,2,3,4,5].map(D=>a.jsx("svg",{className:`h-5 w-5 ${D<=b.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},D))}),a.jsx("span",{className:"text-lg font-medium",children:b.rating})]}),a.jsx("p",{className:"text-gray-600",children:b.comments}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(b.submittedAt).toLocaleDateString()]})]}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Discount Request"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"requestDiscount",checked:d,onChange:D=>h(D.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(Vn,{label:"Reason for Discount",value:f,onChange:D=>m(D.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),a.jsx("div",{className:"w-48",children:a.jsx(Ce,{type:"number",label:"Discount Percentage",value:p,onChange:D=>x(D.target.value),min:"0",max:"100",placeholder:"Enter %"})}),a.jsx("div",{className:"flex justify-end",children:a.jsx(U,{onClick:_,children:"Submit for Approval"})})]})]})})]}),y.show&&a.jsx(ot,{title:y.title,variant:y.variant,isVisible:y.show,onClose:()=>g({show:!1,title:""})})]}):a.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const Xf=e=>{var t,n,s,r;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((s=e.baseRates)==null?void 0:s.monthly)||0,yearly:((r=e.baseRates)==null?void 0:r.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},o8=({show:e})=>e?a.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 flex items-center",children:[a.jsx(Ju,{className:"mr-2 h-5 w-5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"Mock Data In Use"}),a.jsx("p",{className:"text-sm",children:"The PostgreSQL API server is unavailable. Using local mock data instead."}),a.jsxs("p",{className:"text-sm mt-1",children:[a.jsx("strong",{children:"Troubleshooting:"}),a.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[a.jsx("li",{children:"Verify the PostgreSQL server is running"}),a.jsx("li",{children:"Check that the API server is started"}),a.jsx("li",{children:"Ensure the database connection parameters are correct"}),a.jsx("li",{children:"See API_CONNECTION_GUIDE.md for more details"})]})]})]})]}):null,Jf=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],Zf=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],a8=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function l8(){const{user:e}=Ae(),[t,n]=v.useState([]),[s,r]=v.useState([]),[i,o]=v.useState(""),[l,c]=v.useState("all"),[u,d]=v.useState("all"),[h,f]=v.useState(!0),[m,p]=v.useState(!1),[x,b]=v.useState(!1),[w,y]=v.useState(null),[g,S]=v.useState({show:!1,title:""}),[j,k]=v.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),[_,E]=v.useState(!1);v.useEffect(()=>{N()},[]),v.useEffect(()=>{D()},[t,i,l,u]);const N=async()=>{try{let A=await ny();A=A.map(Xf),n(A);const R=A.some(T=>T._mockFlag===!0||T._source==="schema"||T._source==="client");E(R),R?(console.warn("Using mock equipment data. API connection might be unavailable."),B("Using mock equipment data. Check API connection.","warning")):console.log("Successfully connected to equipment API"),f(!1)}catch(A){console.error("Error fetching equipment:",A),B("Error fetching equipment","error"),E(!0),f(!1)}},D=()=>{let A=[...t];i&&(A=A.filter(R=>R.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(A=A.filter(R=>R.status===l)),u!=="all"&&(A=A.filter(R=>R.category===u)),r(A)},M=()=>{if(!j.name||!j.manufacturingDate||!j.registrationDate||!j.maxLiftingCapacity||!j.unladenWeight||!j.runningCostPerKm||!j.baseRates.micro||!j.baseRates.small||!j.baseRates.monthly||!j.baseRates.yearly)return B("Please fill in all required fields","error"),!1;const A=/^\d{4}-\d{2}$/;return!A.test(j.manufacturingDate)||!A.test(j.registrationDate)?(B("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(j.maxLiftingCapacity))||isNaN(Number(j.unladenWeight))||isNaN(Number(j.runningCostPerKm))||isNaN(Number(j.baseRates.micro))||isNaN(Number(j.baseRates.small))||isNaN(Number(j.baseRates.monthly))||isNaN(Number(j.baseRates.yearly))?(B("Please enter valid numbers for numeric fields","error"),!1):!0},L=async A=>{if(A.preventDefault(),!!M())try{const R={...j,equipmentId:(w==null?void 0:w.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(j.maxLiftingCapacity),unladenWeight:Number(j.unladenWeight),baseRates:{micro:Number(j.baseRates.micro),small:Number(j.baseRates.small),monthly:Number(j.baseRates.monthly),yearly:Number(j.baseRates.yearly)},runningCost:Number(j.runningCostPerKm),runningCostPerKm:Number(j.runningCostPerKm)};if(console.log("Form submission data:",R),w){console.log(`Updating equipment ${w.id}`,R);let T=await U6(w.id,R);T?(console.log("Update successful:",T),T=Xf(T),n(I=>I.map(O=>O.id===w.id?T:O)),T._mockFlag?B("Equipment updated in local state only (API unavailable)","warning"):B("Equipment updated successfully","success")):B("Failed to update equipment","error")}else{console.log("Creating new equipment",R);let T=await V6(R);T=Xf(T),console.log("Creation successful:",T),n(I=>[...I,T]),T._mockFlag?B("Equipment created in local state only (API unavailable)","warning"):B("Equipment added successfully","success")}setTimeout(()=>{N()},500),p(!1),H()}catch(R){console.error("Error saving equipment:",R),B("Error saving equipment","error")}},z=async()=>{if(w)try{await W6(w.id),n(A=>A.filter(R=>R.id!==w.id)),b(!1),y(null),B("Equipment deleted successfully","success")}catch{B("Error deleting equipment","error")}},H=()=>{k({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),y(null)},B=(A,R="success")=>{S({show:!0,title:A,variant:R}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(o8,{show:_}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(ge,{placeholder:"Search equipment...",value:i,onChange:A=>o(A.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(je,{value:u,onChange:A=>d(A),options:[{value:"all",label:"All Categories"},...Zf],className:"w-48"}),a.jsx(je,{value:l,onChange:A=>c(A),options:[{value:"all",label:"All Status"},...Jf],className:"w-48"})]})]}),a.jsx(U,{onClick:()=>{H(),p(!0)},leftIcon:a.jsx(ss,{className:"w-4 h-4"}),children:"Add Equipment"})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Equipment Inventory"})}),a.jsx(le,{children:h?a.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):s.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(A=>{var R,T;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:A.name}),a.jsx("div",{className:"text-sm text-gray-500",children:A.equipmentId}),A.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:A.description})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(xl,{variant:"secondary",className:"w-full justify-center",children:(R=Zf.find(I=>I.value===A.category))==null?void 0:R.label}),a.jsx(xl,{variant:A.status==="available"?"success":A.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(T=Jf.find(I=>I.value===A.status))==null?void 0:T.label})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-gray-400"}),a.jsxs("span",{children:["Mfg: ",A.manufacturingDate]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gA,{className:"h-4 w-4 text-gray-400"}),a.jsxs("span",{children:[A.maxLiftingCapacity," tons max lift"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(dA,{className:"h-4 w-4 text-gray-400"}),a.jsxs("span",{children:[A.unladenWeight," tons unladen"]})]})]})}),a.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:a.jsxs("div",{className:"text-sm",children:["                          ",a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),a.jsx("div",{className:"space-y-2.5",children:a8.map(I=>a.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[a.jsx("span",{className:"text-gray-600",children:I.label}),a.jsxs("div",{className:"flex items-baseline gap-1.5",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:""}),a.jsx("span",{className:"text-gray-900 font-medium",children:A.baseRates&&A.baseRates[I.value]!==void 0?be(A.baseRates[I.value]):"N/A"}),a.jsx("span",{className:"text-gray-500 text-sm",children:I.value==="monthly"||I.value==="yearly"?a.jsxs("div",{children:["per",a.jsx("br",{}),"month"]}):"per hour"})]})]},I.value))})]}),"                            ",a.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[a.jsx(Zn,{className:"h-4 w-4"}),a.jsx("span",{children:"Running:"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx("span",{className:"text-gray-900",children:A.runningCostPerKm!==void 0?be(A.runningCostPerKm):"N/A"}),a.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{y(A),k({name:A.name||"",category:A.category||"mobile_crane",manufacturingDate:A.manufacturingDate||"",registrationDate:A.registrationDate||"",maxLiftingCapacity:A.maxLiftingCapacity!==void 0?String(A.maxLiftingCapacity):"",unladenWeight:A.unladenWeight!==void 0?String(A.unladenWeight):"",baseRates:{micro:A.baseRates&&A.baseRates.micro!==void 0?String(A.baseRates.micro):"",small:A.baseRates&&A.baseRates.small!==void 0?String(A.baseRates.small):"",monthly:A.baseRates&&A.baseRates.monthly!==void 0?String(A.baseRates.monthly):"",yearly:A.baseRates&&A.baseRates.yearly!==void 0?String(A.baseRates.yearly):""},runningCostPerKm:A.runningCostPerKm!==void 0?String(A.runningCostPerKm):"",description:A.description||"",status:A.status||"available"}),p(!0)},children:a.jsx(Eo,{className:"h-4 w-4"})}),a.jsx(U,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{y(A),b(!0)},children:a.jsx(ko,{className:"h-4 w-4"})})]})})]},A.id)})})]})})})]}),a.jsx(dt,{title:w?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),H()},size:"lg",children:a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsx(ge,{label:"Name",value:j.name,onChange:A=>k({...j,name:A.target.value}),required:!0}),a.jsx(ge,{label:"Max Lifting Capacity (tons)",type:"number",value:j.maxLiftingCapacity,onChange:A=>k({...j,maxLiftingCapacity:A.target.value}),required:!0}),a.jsx(je,{label:"Category",value:j.category,onChange:A=>k({...j,category:A}),options:Zf,className:"w-full"}),a.jsx(ge,{label:"Unladen Weight (tons)",type:"number",value:j.unladenWeight,onChange:A=>k({...j,unladenWeight:A.target.value}),required:!0}),a.jsx(ge,{label:"Manufacturing Date (YYYY-MM)",value:j.manufacturingDate,onChange:A=>k({...j,manufacturingDate:A.target.value}),placeholder:"YYYY-MM",required:!0}),a.jsx(ge,{label:"Running Cost (/km)",type:"number",value:j.runningCostPerKm,onChange:A=>k({...j,runningCostPerKm:A.target.value}),required:!0}),a.jsx(ge,{label:"Registration Date (YYYY-MM)",value:j.registrationDate,onChange:A=>k({...j,registrationDate:A.target.value}),placeholder:"YYYY-MM",required:!0}),a.jsx(je,{label:"Status",value:j.status,onChange:A=>k({...j,status:A}),options:Jf,className:"w-full"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsx(ge,{label:"Micro Rate ( per hour)",type:"number",value:j.baseRates.micro,onChange:A=>k({...j,baseRates:{...j.baseRates,micro:A.target.value}}),required:!0}),a.jsx(ge,{label:"Small Rate ( per hour)",type:"number",value:j.baseRates.small,onChange:A=>k({...j,baseRates:{...j.baseRates,small:A.target.value}}),required:!0}),a.jsx(ge,{label:"Monthly Rate ( per month)",type:"number",value:j.baseRates.monthly,onChange:A=>k({...j,baseRates:{...j.baseRates,monthly:A.target.value}}),required:!0}),a.jsx(ge,{label:"Yearly Rate ( per month)",type:"number",value:j.baseRates.yearly,onChange:A=>k({...j,baseRates:{...j.baseRates,yearly:A.target.value}}),required:!0})]})]}),a.jsx(Vn,{label:"Description",value:j.description,onChange:A=>k({...j,description:A.target.value}),rows:3}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{type:"button",variant:"outline",onClick:()=>{p(!1),H()},children:"Cancel"}),a.jsx(U,{type:"submit",children:w?"Update Equipment":"Add Equipment"})]})]})}),a.jsx(dt,{title:"Delete Equipment",isOpen:x,onClose:()=>{b(!1),y(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{children:"Are you sure you want to delete this equipment? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{variant:"outline",onClick:()=>{b(!1),y(null)},children:"Cancel"}),a.jsx(U,{variant:"destructive",onClick:z,children:"Delete Equipment"})]})]})}),a.jsx(ot,{title:g.title,variant:g.variant,isVisible:g.show,onClose:()=>S({show:!1,title:""})})]})}class c8 extends jh{constructor(){super("services")}async getServices(){try{return(await Re.any("SELECT * FROM services ORDER BY name")).map(n=>this.mapDatabaseRowToModel(n))}catch(t){throw console.error("Error fetching services:",t),t}}async getServiceById(t){try{const n=await Re.oneOrNone("SELECT * FROM services WHERE id = $1",[t]);return n?this.mapDatabaseRowToModel(n):null}catch(n){throw console.error("Error fetching service by ID:",n),n}}async createService(t){try{const n=new Date().toISOString(),s=Zx(),r=await Re.one(`INSERT INTO services(
          id, name, type, base_rate, unit, description, is_active, 
          created_at, updated_at
        ) VALUES($1, $2, $3, $4, $5, $6, $7, $8, $9) 
        RETURNING *`,[s,t.name,t.type,t.baseRate,t.unit,t.description,t.isActive,n,n]);return this.mapDatabaseRowToModel(r)}catch(n){throw console.error("Error creating service:",n),n}}async updateService(t,n){try{const s=[],r=[];let i=1;n.name!==void 0&&(s.push(`name = $${i++}`),r.push(n.name)),n.type!==void 0&&(s.push(`type = $${i++}`),r.push(n.type)),n.baseRate!==void 0&&(s.push(`base_rate = $${i++}`),r.push(n.baseRate)),n.unit!==void 0&&(s.push(`unit = $${i++}`),r.push(n.unit)),n.description!==void 0&&(s.push(`description = $${i++}`),r.push(n.description)),n.isActive!==void 0&&(s.push(`is_active = $${i++}`),r.push(n.isActive));const o=new Date().toISOString();s.push(`updated_at = $${i++}`),r.push(o),r.push(t);const l=await Re.one(`UPDATE services SET ${s.join(", ")} 
         WHERE id = $${i} 
         RETURNING *`,r);return this.mapDatabaseRowToModel(l)}catch(s){throw console.error("Error updating service:",s),s}}async deleteService(t){try{await Re.none("DELETE FROM services WHERE id = $1",[t])}catch(n){throw console.error("Error deleting service:",n),n}}async toggleServiceStatus(t){try{if(!await this.getServiceById(t))throw new Error("Service not found");const s=await Re.one(`UPDATE services SET 
         is_active = NOT is_active, 
         updated_at = $1
         WHERE id = $2 
         RETURNING *`,[new Date().toISOString(),t]);return this.mapDatabaseRowToModel(s)}catch(n){throw console.error("Error toggling service status:",n),n}}mapDatabaseRowToModel(t){return{id:t.id,name:t.name,type:t.type,baseRate:t.base_rate||t.baseRate,unit:t.unit,description:t.description,isActive:t.is_active||t.isActive,createdAt:t.created_at||t.createdAt,updatedAt:t.updated_at||t.updatedAt}}}const tc=new c8,u8=async()=>{try{return await tc.getServices()}catch(e){return console.error("Error fetching services:",e),[]}},d8=async e=>{try{return await tc.createService(e)}catch(t){throw console.error("Error creating service:",t),t}},h8=async(e,t)=>{try{return await tc.updateService(e,t)}catch(n){throw console.error(`Error updating service ${e}:`,n),n}},f8=async e=>{try{await tc.deleteService(e)}catch(t){throw console.error(`Error deleting service ${e}:`,t),t}},m8=async e=>{try{return await tc.toggleServiceStatus(e)}catch(t){throw console.error(`Error toggling service status ${e}:`,t),t}},em=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],p8=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function g8(){const{user:e}=Ae(),[t,n]=v.useState([]),[s,r]=v.useState([]),[i,o]=v.useState(""),[l,c]=v.useState("all"),[u,d]=v.useState("all"),[h,f]=v.useState(!1),[m,p]=v.useState(!1),[x,b]=v.useState(null),[w,y]=v.useState(!0),[g,S]=v.useState({show:!1,title:""}),j=(z,H="success",B)=>{S({show:!0,title:z,variant:H,description:B}),setTimeout(()=>S({show:!1,title:""}),3e3)},[k,_]=v.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});v.useEffect(()=>{(async()=>{try{y(!0);const H=await u8();n(H),y(!1)}catch(H){console.error("Error fetching services:",H),j("Error fetching services","error"),y(!1)}})()},[]),v.useEffect(()=>{E()},[t,i,l,u]);const E=()=>{let z=[...t];i&&(z=z.filter(H=>H.name.toLowerCase().includes(i.toLowerCase())||H.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(z=z.filter(H=>H.type===l)),u!=="all"&&(z=z.filter(H=>u==="active"?H.isActive:!H.isActive)),r(z)},N=async z=>{if(z.preventDefault(),!k.name||!k.type||!k.baseRate||!k.unit){j("Please fill in all required fields","error");return}try{const H={name:k.name,type:k.type,baseRate:parseFloat(k.baseRate),unit:k.unit,description:k.description,isActive:k.isActive};if(x){const B=await h8(x.id,H);n(A=>A.map(R=>R.id===x.id?B:R)),j("Service updated successfully","success")}else{const B=await d8(H);n(A=>[...A,B]),j("Service added successfully","success")}f(!1),M()}catch{j("Error saving service","error")}},D=async()=>{if(x)try{await f8(x.id),n(z=>z.filter(H=>H.id!==x.id)),p(!1),b(null),j("Service deleted successfully","success")}catch(z){console.error("Error deleting service:",z),j("Error deleting service","error")}},M=()=>{_({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),b(null)},L=async z=>{try{const H=await m8(z.id);n(B=>B.map(A=>A.id===z.id?H:A)),j(`Service ${z.isActive?"deactivated":"activated"}`,"success")}catch(H){console.error("Error toggling service status:",H),j("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(ge,{placeholder:"Search services...",value:i,onChange:z=>o(z.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(je,{options:[{value:"all",label:"All Types"},...em],value:l,onChange:c,className:"w-40"}),a.jsx(je,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:z=>d(z),className:"w-40"})]})]}),a.jsx(U,{onClick:()=>{M(),f(!0)},leftIcon:a.jsx(ss,{size:16}),children:"Add Service"})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Services Catalog"})}),"        ",a.jsx(le,{children:w?a.jsx("div",{className:"text-center py-4",children:"Loading services..."}):s.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(z=>{var H;return a.jsx(te,{variant:"bordered",className:"h-full",children:a.jsxs(le,{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:z.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(EN,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-500",children:(H=em.find(B=>B.value===z.type))==null?void 0:H.label})]})]}),a.jsx(U,{variant:z.isActive?"default":"ghost",size:"sm",onClick:()=>L(z),children:z.isActive?a.jsx(mr,{className:"h-4 w-4"}):a.jsx(nh,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:z.description}),a.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[a.jsx(eh,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:be(z.baseRate)})]}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(ys,{className:"h-4 w-4"}),a.jsxs("span",{children:["Per ",z.unit]})]})]})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{b(z),_({name:z.name,type:z.type,baseRate:z.baseRate.toString(),unit:z.unit,description:z.description||"",isActive:z.isActive}),f(!0)},children:a.jsx(Eo,{className:"h-4 w-4"})}),a.jsx(U,{variant:"destructive",size:"sm",onClick:()=>{b(z),p(!0)},children:a.jsx(ko,{className:"h-4 w-4"})})]})]})},z.id)})})})]}),a.jsx(dt,{isOpen:h,onClose:()=>{f(!1),M()},title:x?"Edit Service":"Add New Service",size:"lg",children:a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsx(ge,{label:"Service Name",value:k.name,onChange:z=>_(H=>({...H,name:z.target.value})),required:!0}),a.jsx(je,{label:"Service Type",options:em,value:k.type,onChange:z=>_(H=>({...H,type:z})),required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ge,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:k.baseRate,onChange:z=>_(H=>({...H,baseRate:z.target.value})),required:!0}),a.jsx(je,{label:"Rate Unit",options:p8,value:k.unit,onChange:z=>_(H=>({...H,unit:z})),required:!0})]}),a.jsx(Vn,{label:"Description",value:k.description,onChange:z=>_(H=>({...H,description:z.target.value})),rows:3}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:z=>_(H=>({...H,isActive:z.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{type:"button",variant:"outline",onClick:()=>{f(!1),M()},children:"Cancel"}),a.jsx(U,{type:"submit",children:x?"Update Service":"Add Service"})]})]})}),a.jsx(dt,{isOpen:m,onClose:()=>{p(!1),b(null)},title:"Delete Service",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{variant:"outline",onClick:()=>{p(!1),b(null)},children:"Cancel"}),a.jsx(U,{variant:"destructive",onClick:D,children:"Delete"})]})]})}),g.show&&a.jsx(ot,{title:g.title,variant:g.variant,isVisible:g.show,onClose:()=>S({show:!1,title:""})})]})}class x8 extends jh{constructor(){super("users")}async getAllUsers(){try{return(await Re.any("SELECT * FROM users")).map(n=>this.convertRowToCamelCase(n))}catch(t){return console.error("Error fetching users:",t),[{uid:"admin-uid-123",email:"admin@example.com",displayName:"Admin User",role:"admin",active:!0,createdAt:new Date().toISOString()},{uid:"sales-uid-456",email:"sales@example.com",displayName:"Sales Agent",role:"sales_agent",active:!0,createdAt:new Date().toISOString()},{uid:"ops-uid-789",email:"ops@example.com",displayName:"Operations Manager",role:"operations_manager",active:!0,createdAt:new Date().toISOString()}]}}async getUserByUid(t){try{const n=await Re.oneOrNone("SELECT * FROM users WHERE uid = $1",[t]);return n?this.convertRowToCamelCase(n):null}catch(n){throw console.error("Error fetching user by UID:",n),n}}async getUserByEmail(t){try{const n=await Re.oneOrNone("SELECT * FROM users WHERE email = $1",[t]);return n?this.convertRowToCamelCase(n):null}catch(n){throw console.error("Error fetching user by email:",n),n}}async createUser(t){try{const n=`user-${Date.now()}`,s=new Date().toISOString(),r=await Re.one(`INSERT INTO users(
          uid, email, display_name, role, active, created_at, updated_at
        ) VALUES($1, $2, $3, $4, $5, $6, $7) 
        RETURNING *`,[n,t.email,t.displayName||t.email.split("@")[0],t.role||"user",!0,s,s]);return this.convertRowToCamelCase(r)}catch(n){throw console.error("Error creating user:",n),n}}async updateUser(t,n){try{const s=[],r=[];let i=1;n.email!==void 0&&(s.push(`email = $${i++}`),r.push(n.email)),n.displayName!==void 0&&(s.push(`display_name = $${i++}`),r.push(n.displayName)),n.role!==void 0&&(s.push(`role = $${i++}`),r.push(n.role)),n.active!==void 0&&(s.push(`active = $${i++}`),r.push(n.active)),n.passwordHash!==void 0&&(s.push(`password_hash = $${i++}`),r.push(n.passwordHash));const o=new Date().toISOString();s.push(`updated_at = $${i++}`),r.push(o),r.push(t);const l=await Re.one(`UPDATE users SET ${s.join(", ")} 
         WHERE uid = $${i} 
         RETURNING *`,r);return this.convertRowToCamelCase(l)}catch(s){throw console.error("Error updating user:",s),s}}async deleteUser(t){try{return await Re.none("DELETE FROM users WHERE uid = $1",[t]),!0}catch(n){throw console.error("Error deleting user:",n),n}}async toggleUserStatus(t,n){try{return{uid:t,active:n,updatedAt:new Date().toISOString()}}catch(s){throw console.error("Error toggling user status:",s),s}}convertRowToCamelCase(t){return{uid:t.uid,email:t.email,displayName:t.display_name,role:t.role,active:t.active,createdAt:t.created_at?new Date(t.created_at).toISOString():new Date().toISOString(),updatedAt:t.updated_at?new Date(t.updated_at).toISOString():new Date().toISOString()}}}const nc=new x8,y8=async()=>{try{return await nc.getAllUsers()}catch(e){return console.error("Error fetching users:",e),[]}},v8=async(e,t,n,s)=>{try{return await nc.createUser({email:e,displayName:n,role:s,active:!0})}catch(r){throw console.error("Error creating user:",r),r}},b8=async(e,t)=>{try{return await nc.updateUser(e,t)}catch(n){throw console.error(`Error updating user ${e}:`,n),n}},w8=async e=>{try{await nc.deleteUser(e)}catch(t){throw console.error(`Error deleting user ${e}:`,t),t}},S8=async(e,t)=>{try{return await nc.toggleUserStatus(e,t)}catch(n){throw console.error(`Error toggling status for user ${e}:`,n),n}},tm=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],j8=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],la=10,nm=e=>{const t=e.split("").reduce((o,l)=>o+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],s=t%n.length,r=n[s];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${r}&color=fff&size=128`};function N8(){const{user:e}=Ae(),[t,n]=v.useState([]),[s,r]=v.useState([]),[i,o]=v.useState(1),[l,c]=v.useState(""),[u,d]=v.useState("all"),[h,f]=v.useState("all"),[m,p]=v.useState(!0),[x,b]=v.useState(!1),[w,y]=v.useState(!1),[g,S]=v.useState(null),[j,k]=v.useState({show:!1,title:""}),[_,E]=v.useState({name:"",email:"",password:"",role:"operator",status:"active"});v.useEffect(()=>{(async()=>{try{p(!0);const I=(await y8()).map(O=>({id:O.uid,name:O.displayName,email:O.email,role:O.role,status:O.active?"active":"inactive"}));n(I),r(I),p(!1)}catch(T){console.error("Error fetching users:",T),D("Error loading users","Please try again later","error"),p(!1)}})()},[]),v.useEffect(()=>{N()},[t,l,u,h]);const N=()=>{let R=[...t];if(l){const T=l.toLowerCase();R=R.filter(I=>I.name.toLowerCase().includes(T)||I.email.toLowerCase().includes(T))}u!=="all"&&(R=R.filter(T=>T.role===u)),h!=="all"&&(R=R.filter(T=>T.status===h)),r(R),o(1)},D=(R,T,I="success")=>{k({show:!0,title:R,description:T,variant:I}),setTimeout(()=>k({show:!1,title:""}),3e3)},M=async R=>{if(R.preventDefault(),!_.name||!_.email||!_.role){D("Please fill in all required fields","error");return}if(!g&&!_.password){D("Password is required for new users","error");return}try{if(g){const T={...g,name:_.name,email:_.email,role:_.role,status:_.status};await b8(g.id,{name:_.name,email:_.email,role:_.role,status:_.status}),n(I=>I.map(O=>O.id===g.id?T:O)),D("User updated successfully","success")}else try{const I={...await v8(_.email,_.password,_.name,_.role),status:_.status,avatar:nm(_.name)};n(O=>[...O,I]),D("User added successfully","success")}catch(T){D(`Error creating user account: ${T.message||"Unknown error"}`,"error");return}b(!1),H()}catch(T){D(`Error saving user: ${T.message||"Unknown error"}`,"error")}},L=async()=>{if(g)try{await w8(g.id),n(R=>R.filter(T=>T.id!==g.id)),y(!1),S(null),D("User deleted successfully","success")}catch(R){console.error("Error deleting user:",R),D("Error deleting user","error")}},z=async R=>{const T=R.status==="active"?"inactive":"active";try{await S8(R.id,T),n(I=>I.map(O=>O.id===R.id?{...O,status:T}:O)),D(`User ${R.status==="active"?"deactivated":"activated"}`,"success")}catch(I){console.error("Error toggling user status:",I),D("Error updating user status","error")}},H=()=>{E({name:"",email:"",password:"",role:"operator",status:"active"}),S(null)},B=Math.ceil(s.length/la),A=s.slice((i-1)*la,i*la);return!e||e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(ge,{placeholder:"Search users...",value:l,onChange:R=>c(R.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(je,{options:[{value:"all",label:"All Roles"},...tm],value:u,onChange:R=>d(R),className:"w-40"}),a.jsx(je,{options:[{value:"all",label:"All Status"},...j8],value:h,onChange:R=>f(R),className:"w-40"})]})]}),a.jsx(U,{onClick:()=>{H(),b(!0)},leftIcon:a.jsx(pA,{size:16}),children:"Add User"})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"User Management"})}),a.jsx(le,{children:m?a.jsx("div",{className:"text-center py-4",children:"Loading users..."}):A.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(R=>{var T;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:R.avatar||nm(R.name),alt:R.name,className:"h-10 w-10 rounded-full object-cover",onError:I=>{const O=I.target;O.onerror=null,O.src=nm(R.name)}}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"font-medium text-gray-900",children:R.name}),a.jsx("div",{className:"text-sm text-gray-500",children:R.email})]})]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(T=tm.find(I=>I.value===R.role))==null?void 0:T.label})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:R.status==="active"?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>z(R),children:R.status==="active"?a.jsx(nh,{size:16}):a.jsx(mr,{size:16})}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{S(R),E({name:R.name,email:R.email,password:"",role:R.role,status:R.status}),b(!0)},children:a.jsx(Eo,{size:16})}),a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{S(R),y(!0)},children:a.jsx(ko,{size:16})})]})})]},R.id)})})]})}),B>1&&a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*la+1," to"," ",Math.min(i*la,s.length)," of"," ",s.length," users"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:()=>o(R=>Math.max(1,R-1)),disabled:i===1,children:"Previous"}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>o(R=>Math.min(B,R+1)),disabled:i===B,children:"Next"})]})]})]})})]}),"      ",a.jsx(dt,{isOpen:x,onClose:()=>{b(!1),H()},title:g?"Edit User":"Add New User",size:"lg",children:a.jsxs("form",{onSubmit:M,className:"space-y-6",children:[a.jsx(uy,{}),a.jsx(ge,{label:"Full Name",value:_.name,onChange:R=>E(T=>({...T,name:R.target.value})),required:!0}),"          ",a.jsx(ge,{label:"Email Address",type:"email",value:_.email,onChange:R=>E(T=>({...T,email:R.target.value})),required:!0}),a.jsx(ge,{label:"Password",type:"password",value:_.password||"",onChange:R=>E(T=>({...T,password:R.target.value})),required:!g,placeholder:g?"Leave blank to keep current password":""}),a.jsx(je,{label:"Role",options:tm,value:_.role,onChange:R=>E(T=>({...T,role:R})),required:!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"isActive",checked:_.status==="active",onChange:R=>E(T=>({...T,status:R.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{type:"button",variant:"outline",onClick:()=>{b(!1),H()},children:"Cancel"}),a.jsx(U,{type:"submit",children:g?"Update User":"Add User"})]})]})}),a.jsx(dt,{isOpen:w,onClose:()=>{y(!1),S(null)},title:"Delete User",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[a.jsx(Bl,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{variant:"outline",onClick:()=>{y(!1),S(null)},children:"Cancel"}),a.jsx(U,{variant:"destructive",onClick:L,children:"Delete User"})]})]})}),j.show&&a.jsx(ot,{title:j.title,variant:j.variant,isVisible:j.show,onClose:()=>k({show:!1,title:""})})]})}function Pi({children:e,title:t,defaultExpanded:n=!1,icon:s,className:r="",onToggle:i}){const[o,l]=v.useState(n),c=()=>{const u=!o;l(u),i==null||i(u)};return a.jsxs(te,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${r}`,children:[a.jsx(de,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[s&&a.jsx("div",{className:"text-gray-500 flex-shrink-0",children:s}),a.jsx(he,{className:"text-base sm:text-lg font-medium",children:t})]}),a.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${o?"rotate-180":""}`,children:a.jsx(Vs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),a.jsx("div",{className:`transition-all duration-300 overflow-hidden ${o?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:a.jsx(le,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}function C8(){const[e,t]=v.useState(!0),[n,s]=v.useState(!1),[r,i]=v.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[o,l]=v.useState({show:!1,title:""});v.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await Kp();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const x of f){const b=r[x];if(b.minDays<=p){u(`${x.charAt(0).toUpperCase()+x.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(b.maxDays<=b.minDays){u(`${x.charAt(0).toUpperCase()+x.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=b.maxDays}if(!m)return;await F2({orderTypeLimits:r}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{s(!1)}},h=(f,m,p)=>{const x=parseInt(p)||0;i(b=>({...b,[f]:{...b[f],[m]:x}}))};return e?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx(Be,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>a.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(Ce,{type:"number",label:"Minimum Days",value:r[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),a.jsx("div",{children:a.jsx(Ce,{type:"number",label:"Maximum Days",value:r[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:r[f].minDays+1})})]})]},f))}),a.jsx("div",{className:"flex justify-end",children:a.jsx(U,{onClick:d,disabled:n,leftIcon:n?a.jsx(Be,{className:"animate-spin"}):a.jsx(yi,{}),children:n?"Saving...":"Save Changes"})}),o.show&&a.jsx(ot,{title:o.title,variant:o.variant,isVisible:o.show,onClose:()=>l({show:!1,title:""})})]})}function E8(){const[e,t]=v.useState(!0),[n,s]=v.useState(!1),[r,i]=v.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[o,l]=v.useState({show:!1,title:""});v.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await z2();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(s(!0),r.foodRatePerMonth<=0||r.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await EV(r),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{s(!1)}};return e?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx(Be,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx($n,{className:"h-5 w-5 text-primary-500"}),a.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),a.jsx(Ce,{type:"number",value:r.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),a.jsxs("span",{className:"font-medium text-gray-900",children:["",(r.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx($n,{className:"h-5 w-5 text-primary-500"}),a.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),a.jsx(Ce,{type:"number",value:r.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),a.jsxs("span",{className:"font-medium text-gray-900",children:["",(r.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(U,{onClick:d,disabled:n,leftIcon:n?a.jsx(Be,{className:"animate-spin"}):a.jsx(yi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),o.show&&a.jsx(ot,{title:o.title,variant:o.variant,isVisible:o.show,onClose:()=>l({show:!1,title:""})})]})}function k8(){const[e,t]=v.useState(!0),[n,s]=v.useState(!1),[r,i]=v.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[o,l]=v.useState({show:!1,title:""});v.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await kV(),m={...r,...f,usageFactors:{...r.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0),await _V(r),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{s(!1)}};if(e)return a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx(Be,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:x=!1})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),a.jsxs("div",{className:"relative mt-1",children:[!x&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),a.jsx(Ce,{type:"number",value:f,onChange:b=>m(Number(b.target.value)),className:x?"pr-8":"pl-7",min:"0"}),x&&a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx(uA,{className:"h-4 w-4 text-gray-400"})})]})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cx,{className:"h-5 w-5 text-primary-500"}),a.jsx(he,{children:"Usage Rates"})]})}),"          ",a.jsxs(le,{className:"space-y-4",children:[a.jsx(h,{label:"Normal Usage Factor",value:r.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),a.jsx(h,{label:"Medium Usage Factor",value:r.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),a.jsx(h,{label:"Heavy Usage Factor",value:r.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ju,{className:"h-5 w-5 text-primary-500"}),a.jsx(he,{children:"Risk Factors"})]})}),a.jsxs(le,{className:"space-y-4",children:[a.jsx(h,{label:"Low Risk",value:r.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),a.jsx(h,{label:"Medium Risk",value:r.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),a.jsx(h,{label:"High Risk",value:r.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-5 w-5 text-primary-500"}),a.jsx(he,{children:"Shift Factors"})]})}),a.jsxs(le,{className:"space-y-4",children:[a.jsx(h,{label:"Single Shift",value:r.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),a.jsx(h,{label:"Double Shift",value:r.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aA,{className:"h-5 w-5 text-primary-500"}),a.jsx(he,{children:"Day/Night Factors"})]})}),a.jsxs(le,{className:"space-y-4",children:[a.jsx(h,{label:"Day Factor",value:r.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),a.jsx(h,{label:"Night Factor",value:r.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(U,{onClick:d,disabled:n,leftIcon:n?a.jsx(Be,{className:"animate-spin"}):a.jsx(yi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),o.show&&a.jsx(ot,{title:o.title,variant:o.variant,isVisible:o.show,onClose:()=>l({show:!1,title:""})})]})}class _8 extends jh{constructor(){super("templates")}async getTemplates(){try{return(await Re.any("SELECT * FROM templates ORDER BY is_default DESC")).map(n=>this.convertRowToCamelCase(n))}catch(t){return console.error("Error fetching templates:",t),[{id:"template-1",name:"Default Template",description:"Standard quotation template with company branding",content:this.getDefaultTemplateContent(),isDefault:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"template-2",name:"Advanced Template",description:"Template with additional sections and formatting",content:this.getDefaultTemplateContent(),isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]}}async getTemplateById(t){try{const n=await Re.oneOrNone("SELECT * FROM templates WHERE id = $1",[t]);return n?this.convertRowToCamelCase(n):null}catch(n){return console.error("Error fetching template by ID:",n),t==="template-1"?{id:"template-1",name:"Default Template",description:"Standard quotation template with company branding",content:this.getDefaultTemplateContent(),isDefault:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:null}}async createTemplate(t){try{return{...t,id:`template-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}catch(n){throw console.error("Error creating template:",n),n}}async updateTemplate(t,n){try{return{...n,id:t,updatedAt:new Date().toISOString()}}catch(s){throw console.error("Error updating template:",s),s}}async deleteTemplate(t){try{await Re.none("DELETE FROM templates WHERE id = $1",[t])}catch(n){throw console.error("Error deleting template:",n),n}}convertRowToCamelCase(t){return{id:t.id,name:t.name,description:t.description,content:t.content,styles:t.styles,isDefault:t.is_default,createdAt:t.created_at?new Date(t.created_at).toISOString():new Date().toISOString(),updatedAt:t.updated_at?new Date(t.updated_at).toISOString():new Date().toISOString(),createdBy:t.created_by}}getDefaultTemplateContent(){return`
      <div class="quotation-template">
        <header>
          <h1>{{companyName}}</h1>
          <p>{{companyAddress}}</p>
          <p>Phone: {{companyPhone}} | Email: {{companyEmail}}</p>
        </header>
        
        <section class="customer-details">
          <h2>Customer Details</h2>
          <p><strong>Name:</strong> {{customerName}}</p>
          <p><strong>Email:</strong> {{customerEmail}}</p>
          <p><strong>Phone:</strong> {{customerPhone}}</p>
          <p><strong>Address:</strong> {{customerAddress}}</p>
        </section>
        
        <section class="quotation-details">
          <h2>Quotation Details</h2>
          <p><strong>Quotation Number:</strong> {{quotationNumber}}</p>
          <p><strong>Date:</strong> {{quotationDate}}</p>
          <p><strong>Valid Until:</strong> {{validUntil}}</p>
          <p><strong>Prepared By:</strong> {{preparedBy}}</p>
        </section>
        
        <section class="items">
          <h2>Services & Equipment</h2>
          <table>
            <thead>
              <tr>
                <th>Description</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              {{#items}}
              <tr>
                <td>{{description}}</td>
                <td>{{quantity}}</td>
                <td>{{unitPrice}}</td>
                <td>{{total}}</td>
              </tr>
              {{/items}}
            </tbody>
            <tfoot>
              <tr>
                <td colspan="3">Subtotal</td>
                <td>{{subtotal}}</td>
              </tr>
              <tr>
                <td colspan="3">Tax ({{taxRate}}%)</td>
                <td>{{taxAmount}}</td>
              </tr>
              <tr>
                <td colspan="3"><strong>Total</strong></td>
                <td><strong>{{total}}</strong></td>
              </tr>
            </tfoot>
          </table>
        </section>
        
        <section class="terms">
          <h2>Terms & Conditions</h2>
          <ul>
            <li>Payment due within 30 days of invoice</li>
            <li>Prices subject to change if quotation is not accepted within validity period</li>
            <li>All work to be completed according to industry standards and local regulations</li>
          </ul>
        </section>
        
        <section class="notes">
          <h2>Additional Notes</h2>
          <p>{{notes}}</p>
        </section>
        
        <footer>
          <p>Thank you for your business!</p>
        </footer>
      </div>
    `}}const sc=new _8,dy=async()=>{try{return await sc.getTemplates()}catch(e){return console.error("Error fetching templates:",e),[]}},Y2=async e=>{try{return await sc.getTemplateById(e)}catch(t){return console.error(`Error fetching template ${e}:`,t),null}},hy=async e=>{try{return await sc.createTemplate(e)}catch(t){throw console.error("Error creating template:",t),t}},ai=async(e,t)=>{try{return await sc.updateTemplate(e,t)}catch(n){throw console.error(`Error updating template ${e}:`,n),n}},Q2=async e=>{try{await sc.deleteTemplate(e)}catch(t){throw console.error(`Error deleting template ${e}:`,t),t}},D8=Object.freeze(Object.defineProperty({__proto__:null,createTemplate:hy,deleteTemplate:Q2,getTemplate:Y2,getTemplates:dy,updateTemplate:ai},Symbol.toStringTag,{value:"Module"})),T8={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:1e4,otherFactorsCharge:2e3,billing:"gst",baseRate:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft"};function P8({onSave:e}){var w,y;const[t,n]=v.useState([]),[s,r]=v.useState(""),[i,o]=v.useState(null),[l,c]=v.useState(!0),[u,d]=v.useState(!1),[h,f]=v.useState({show:!1,title:""});v.useEffect(()=>{m()},[]),v.useEffect(()=>{if(s){const g=t.find(S=>S.id===s);o(g||null)}else o(null)},[s,t]);const m=async()=>{try{c(!0);const g=await dy();n(g);const S=g.find(j=>j.isDefault);S&&r(S.id)}catch(g){console.error("Error loading templates and config:",g),p("Error loading configuration","error")}finally{c(!1)}},p=(g,S="success")=>{f({show:!0,title:g,variant:S}),setTimeout(()=>f({show:!1,title:""}),3e3)},x=async()=>{try{d(!0);const g=t.find(S=>S.isDefault);if(g&&g.id!==s&&await ai(g.id,{isDefault:!1}),s){const S=t.find(j=>j.id===s);S&&await ai(S.id,{isDefault:!0})}await m(),p("Default template configuration saved successfully"),e==null||e()}catch(g){console.error("Error saving default template config:",g),p("Error saving configuration","error")}finally{d(!1)}},b=[{value:"",label:"No default template selected"},...t.map(g=>({value:g.id,label:g.name}))];return l?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Be,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(En,{className:"h-5 w-5 text-primary-500"}),a.jsx(he,{children:"Default Quotation Template"})]})}),a.jsxs(le,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),a.jsx(je,{options:b,value:s,onChange:r,className:"w-full max-w-md"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),s&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(En,{className:"h-5 w-5 text-blue-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(w=t.find(g=>g.id===s))==null?void 0:w.name}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(y=t.find(g=>g.id===s))==null?void 0:y.description})]})]})}),t.length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Be,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(U,{onClick:x,disabled:u||t.length===0,leftIcon:u?a.jsx(Be,{className:"animate-spin"}):a.jsx(yi,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Template Preview"})}),a.jsx(le,{children:a.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:jd(T8,i)}})})})]}),h.show&&a.jsx(ot,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const M8=()=>{const[e,t]=v.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,s]=v.useState(!0),[r,i]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState("untested"),[d,h]=v.useState({show:!1,title:""}),f=(w,y="success")=>{h({show:!0,title:w,variant:y}),setTimeout(()=>h({show:!1,title:""}),y==="success"?5e3:3e3)};v.useEffect(()=>{m()},[]);const m=async()=>{s(!0);try{const w=await fetch("/api/dbconfig",{method:"GET",headers:Bn()});if(!w.ok)throw new Error("Failed to fetch database configuration");const y=await w.json();y.success&&y.data&&t({host:y.data.host||"localhost",port:y.data.port||5432,database:y.data.database||"asp_crm",user:y.data.user||"postgres",password:"",ssl:y.data.ssl||!1})}catch(w){console.error("Failed to fetch database config:",w),f("Failed to load database configuration","error")}finally{s(!1)}},p=w=>{const{name:y,value:g,type:S,checked:j}=w.target;t(k=>({...k,[y]:S==="checkbox"?j:S==="number"?parseInt(g)||0:g}))},x=async()=>{l(!0);try{const w=await fetch("/api/dbconfig",{method:"PUT",headers:Bn(),body:JSON.stringify(e)}),y=await w.json();if(w.ok&&y.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(y.message||"Unknown error")}catch(w){console.error("Failed to save database config:",w),f(`Failed to save database configuration: ${w instanceof Error?w.message:"Unknown error"}`,"error")}finally{l(!1)}},b=async()=>{var w,y;i(!0),u("untested");try{const g=await fetch("/api/dbconfig/test",{method:"POST",headers:Bn(),body:JSON.stringify(e)}),S=await g.json();g.ok&&S.success?(u("success"),f(`Connection successful! PostgreSQL ${((y=(w=S.data)==null?void 0:w.version)==null?void 0:y.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${S.message||"Unknown error"}`,"error"))}catch(g){console.error("Connection test error:",g),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?a.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),a.jsx(Ce,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:a.jsx(hA,{className:"h-4 w-4"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),a.jsx(Ce,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),a.jsx(Ce,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:a.jsx(bN,{className:"h-4 w-4"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx(Ce,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx(Ce,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[a.jsx("input",{type:"checkbox",id:"ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),a.jsx("label",{htmlFor:"ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[a.jsx(U,{variant:"outline",onClick:b,disabled:r,leftIcon:r?a.jsx(Be,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?a.jsx(YM,{className:"h-4 w-4 text-green-500"}):void 0,children:r?"Testing...":"Test Connection"}),a.jsx(U,{onClick:x,disabled:o,leftIcon:o?a.jsx(Be,{className:"h-4 w-4 animate-spin"}):a.jsx(yi,{className:"h-4 w-4"}),children:o?"Saving...":"Save Configuration"})]}),d.show&&a.jsx(ot,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function A8(){const{user:e}=Ae();return!e||e.role!=="admin"&&e.role!=="operations_manager"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),a.jsx(lx,{className:"h-6 w-6 text-gray-400"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Pi,{icon:a.jsx(En,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:a.jsx(P8,{})}),a.jsx(Pi,{icon:a.jsx(Ms,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:a.jsx(C8,{})}),a.jsx(Pi,{icon:a.jsx(En,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:a.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),a.jsx(Pi,{icon:a.jsx($n,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:a.jsx(E8,{})}),a.jsx(Pi,{icon:a.jsx(cx,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:a.jsx(k8,{})}),a.jsx(Pi,{icon:a.jsx(bN,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:a.jsx(M8,{})})]})]})}function I8(){const{user:e}=Ae(),[t,n]=v.useState([]),[s,r]=v.useState({}),[i,o]=v.useState(""),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[h,f]=v.useState(null),[m,p]=v.useState(!0),[x,b]=v.useState({show:!1,title:""}),[w,y]=v.useState({name:"",contactName:"",email:"",phone:"",address:"",type:"other"});v.useEffect(()=>{g()},[]);const g=async()=>{try{console.log("Fetching customers from service...");const N=await ly();if(N&&Array.isArray(N)){console.log(`Received ${N.length} customers from service`),n(N);const D={};for(const M of N){console.log(`Fetching contacts for customer: ${M.id} - ${M.name}`);const L=await O2(M.id);D[M.id]=L}r(D),p(!1)}else console.error("Invalid customer data format:",N),_("Error fetching customers: Invalid data format","error"),p(!1)}catch(N){console.error("Error fetching customers:",N),_("Error fetching customers","error"),p(!1)}},S=async N=>{if(N.preventDefault(),!w.name||!w.email||!w.phone){_("Please fill in all required fields","error");return}try{if(h){const D=await I2(h.id,w);D&&n(M=>M.map(L=>L.id===h.id?D:L)),_("Customer updated successfully","success")}else{const D=await cy(w);n(M=>[...M,D]),_("Customer added successfully","success")}c(!1),k()}catch{_("Error saving customer","error")}},j=async()=>{if(h)try{await R2(h.id);const N=s[h.id]||[];for(const D of N)await L2(D.id);n(D=>D.filter(M=>M.id!==h.id)),d(!1),f(null),_("Customer deleted successfully","success")}catch{_("Error deleting customer","error")}},k=()=>{y({name:"",contactName:"",email:"",phone:"",address:"",type:"other"}),f(null)},_=(N,D="success")=>{b({show:!0,title:N,variant:D}),setTimeout(()=>b({show:!1,title:""}),3e3)},E=t.filter(N=>N.name.toLowerCase().includes(i.toLowerCase())||N.email.toLowerCase().includes(i.toLowerCase()));return!e||e.role!=="admin"&&e.role!=="sales_agent"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex-1 max-w-md relative",children:[a.jsx(Dr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(ge,{placeholder:"Search customers...",value:i,onChange:N=>o(N.target.value),className:"pl-10"})]}),a.jsx(U,{onClick:()=>{k(),c(!0)},leftIcon:a.jsx(ss,{size:16}),children:"Add Customer"})]}),a.jsx(te,{children:a.jsx(le,{children:m?a.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):E.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(N=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name}),a.jsx("div",{className:"text-sm text-gray-500",children:N.contactName||"N/A"})]}),a.jsx(xl,{variant:"outline",className:"text-xs",children:N.id})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"flex items-center text-gray-900",children:[a.jsx(NN,{className:"h-4 w-4 mr-2 flex-shrink-0"}),N.email]}),a.jsxs("div",{className:"flex items-center text-gray-500 mt-1",children:[a.jsx(CN,{className:"h-4 w-4 mr-2 flex-shrink-0"}),N.phone]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[a.jsx(zl,{className:"h-4 w-4 mr-2 flex-shrink-0"}),N.name||"N/A"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(th,{className:"h-4 w-4 mr-2 flex-shrink-0"}),N.address]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{f(N),y({name:N.name,email:N.email,phone:N.phone,address:N.address,contactName:N.contactName||"",type:N.type}),c(!0)},title:"Edit Customer",children:a.jsx(Eo,{className:"h-4 w-4"})}),a.jsx(U,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{f(N),d(!0)},title:"Delete Customer",children:a.jsx(ko,{className:"h-4 w-4"})})]})})]},N.id))})]})})})}),a.jsx(dt,{isOpen:l,onClose:()=>{c(!1),k()},title:h?"Edit Customer":"Add New Customer",size:"lg",children:a.jsxs("form",{onSubmit:S,className:"space-y-6",children:[a.jsx(ge,{label:"Customer Name",value:w.name,onChange:N=>y(D=>({...D,name:N.target.value})),required:!0}),"          ",a.jsx(ge,{label:"Contact Name",value:w.contactName,onChange:N=>y(D=>({...D,contactName:N.target.value})),required:!0}),a.jsx(ge,{label:"Customer Type",value:w.type,onChange:N=>y(D=>({...D,type:N.target.value})),required:!0}),a.jsx(ge,{label:"Email",type:"email",value:w.email,onChange:N=>y(D=>({...D,email:N.target.value})),required:!0}),a.jsx(ge,{label:"Phone",value:w.phone,onChange:N=>y(D=>({...D,phone:N.target.value})),required:!0}),a.jsx(ge,{label:"Address",value:w.address,onChange:N=>y(D=>({...D,address:N.target.value})),required:!0}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{type:"button",variant:"outline",onClick:()=>{c(!1),k()},children:"Cancel"}),a.jsx(U,{type:"submit",children:h?"Update Customer":"Add Customer"})]})]})}),a.jsx(dt,{isOpen:u,onClose:()=>{d(!1),f(null)},title:"Delete Customer",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(U,{variant:"outline",onClick:()=>{d(!1),f(null)},children:"Cancel"}),a.jsx(U,{variant:"destructive",onClick:j,children:"Delete"})]})]})}),x.show&&a.jsx(ot,{title:x.title,variant:x.variant,isVisible:x.show,onClose:()=>b({show:!1,title:""})})]})}function It(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var R8=typeof Symbol=="function"&&Symbol.observable||"@@observable",t1=R8,sm=()=>Math.random().toString(36).substring(7).split("").join("."),O8={INIT:`@@redux/INIT${sm()}`,REPLACE:`@@redux/REPLACE${sm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sm()}`},n1=O8;function L8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function K2(e,t,n){if(typeof e!="function")throw new Error(It(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(It(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(It(1));return n(K2)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((b,w)=>{o.set(w,b)}))}function d(){if(c)throw new Error(It(3));return r}function h(b){if(typeof b!="function")throw new Error(It(4));if(c)throw new Error(It(5));let w=!0;u();const y=l++;return o.set(y,b),function(){if(w){if(c)throw new Error(It(6));w=!1,u(),o.delete(y),i=null}}}function f(b){if(!L8(b))throw new Error(It(7));if(typeof b.type>"u")throw new Error(It(8));if(typeof b.type!="string")throw new Error(It(17));if(c)throw new Error(It(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=o).forEach(y=>{y()}),b}function m(b){if(typeof b!="function")throw new Error(It(10));s=b,f({type:n1.REPLACE})}function p(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(It(11));function y(){const S=w;S.next&&S.next(d())}return y(),{unsubscribe:b(y)}},[t1](){return this}}}return f({type:n1.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[t1]:p}}function s1(e,t){return function(...n){return t(e.apply(this,n))}}function r1(e,t){if(typeof e=="function")return s1(e,t);if(typeof e!="object"||e===null)throw new Error(It(16));const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=s1(r,t))}return n}function X2(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function F8(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(It(15))};const o={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=X2(...l)(r.dispatch),{...r,dispatch:i}}}var $8={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=v;function B8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var z8=typeof Object.is=="function"?Object.is:B8,V8=rc.useSyncExternalStore,U8=rc.useRef,W8=rc.useEffect,H8=rc.useMemo,q8=rc.useDebugValue;$8.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=U8(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=H8(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&o.hasValue){var p=o.value;if(r(p,m))return h=p}return h=m}if(p=h,z8(d,m))return p;var x=s(m);return r!==void 0&&r(p,x)?(d=m,p):(d=m,h=x)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=V8(e,i[0],i[1]);return W8(function(){o.hasValue=!0,o.value=l},[l]),q8(l),l};var G8=v.version.startsWith("19"),Y8=Symbol.for(G8?"react.transitional.element":"react.element"),Q8=Symbol.for("react.portal"),K8=Symbol.for("react.fragment"),X8=Symbol.for("react.strict_mode"),J8=Symbol.for("react.profiler"),Z8=Symbol.for("react.consumer"),eW=Symbol.for("react.context"),J2=Symbol.for("react.forward_ref"),tW=Symbol.for("react.suspense"),nW=Symbol.for("react.suspense_list"),fy=Symbol.for("react.memo"),sW=Symbol.for("react.lazy"),rW=J2,iW=fy;function oW(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Y8:switch(e=e.type,e){case K8:case J8:case X8:case tW:case nW:return e;default:switch(e=e&&e.$$typeof,e){case eW:case J2:case sW:case fy:return e;case Z8:return e;default:return t}}case Q8:return t}}}function aW(e){return oW(e)===fy}function lW(e,t,n,s,{areStatesEqual:r,areOwnPropsEqual:i,areStatePropsEqual:o}){let l=!1,c,u,d,h,f;function m(y,g){return c=y,u=g,d=e(c,u),h=t(s,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function x(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function b(){const y=e(c,u),g=!o(y,d);return d=y,g&&(f=n(d,h,u)),f}function w(y,g){const S=!i(g,u),j=!r(y,c,g,u);return c=y,u=g,S&&j?p():S?x():j?b():f}return function(g,S){return l?w(g,S):m(g,S)}}function cW(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...r}){const i=t(e,r),o=n(e,r),l=s(e,r);return lW(i,o,l,e,r)}function uW(e,t){const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=(...i)=>t(r(...i)))}return n}function Xp(e){return function(n){const s=e(n);function r(){return s}return r.dependsOnOwnProps=!1,r}}function i1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Z2(e,t){return function(s,{displayName:r}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=i1(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=i1(u),u=i(l,c)),u},i}}function my(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function dW(e){return e&&typeof e=="object"?Xp(t=>uW(e,t)):e?typeof e=="function"?Z2(e):my(e,"mapDispatchToProps"):Xp(t=>({dispatch:t}))}function hW(e){return e?typeof e=="function"?Z2(e):my(e,"mapStateToProps"):Xp(()=>({}))}function fW(e,t,n){return{...n,...e,...t}}function mW(e){return function(n,{displayName:s,areMergedPropsEqual:r}){let i=!1,o;return function(c,u,d){const h=e(c,u,d);return i?r(h,o)||(o=h):(i=!0,o=h),o}}}function pW(e){return e?typeof e=="function"?mW(e):my(e,"mergeProps"):()=>fW}function gW(e){e()}function xW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gW(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var o1={notify(){},get:()=>[]};function ek(e,t){let n,s=o1,r=0,i=!1;function o(x){d();const b=s.subscribe(x);let w=!1;return()=>{w||(w=!0,b(),h())}}function l(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){r++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=xW())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=o1)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>s};return p}var yW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vW=yW(),bW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wW=bW(),SW=()=>vW||wW?v.useLayoutEffect:v.useEffect,kd=SW();function a1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function rm(e,t){if(a1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!a1(e[n[r]],t[n[r]]))return!1;return!0}var jW={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},NW={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},CW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},EW={[rW]:CW,[iW]:tk};function l1(e){return aW(e)?tk:EW[e.$$typeof]||jW}var kW=Object.defineProperty,_W=Object.getOwnPropertyNames,c1=Object.getOwnPropertySymbols,DW=Object.getOwnPropertyDescriptor,TW=Object.getPrototypeOf,u1=Object.prototype;function Jp(e,t){if(typeof t!="string"){if(u1){const i=TW(t);i&&i!==u1&&Jp(e,i)}let n=_W(t);c1&&(n=n.concat(c1(t)));const s=l1(e),r=l1(t);for(let i=0;i<n.length;++i){const o=n[i];if(!NW[o]&&!(r&&r[o])&&!(s&&s[o])){const l=DW(t,o);try{kW(e,o,l)}catch{}}}}return e}var im=Symbol.for("react-redux-context"),om=typeof globalThis<"u"?globalThis:{};function PW(){if(!v.createContext)return{};const e=om[im]??(om[im]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var nk=PW(),MW=[null,null];function AW(e,t,n){kd(()=>e(...t),n)}function IW(e,t,n,s,r,i){e.current=s,n.current=!1,r.current&&(r.current=null,i())}function RW(e,t,n,s,r,i,o,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const x=t.getState();let b,w;try{b=s(x,r.current)}catch(y){w=y,f=y}w||(f=null),b===i.current?o.current||u():(i.current=b,c.current=b,o.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function OW(e,t){return e===t}function LW(e,t,n,{pure:s,areStatesEqual:r=OW,areOwnPropsEqual:i=rm,areStatePropsEqual:o=rm,areMergedPropsEqual:l=rm,forwardRef:c=!1,context:u=nk}={}){const d=u,h=hW(e),f=dW(t),m=pW(n),p=!!e;return b=>{const w=b.displayName||b.name||"Component",y=`Connect(${w})`,g={shouldHandleStateChanges:p,displayName:y,wrappedComponentName:w,WrappedComponent:b,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:r,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:l};function S(_){const[E,N,D]=v.useMemo(()=>{const{reactReduxForwardedRef:J,...X}=_;return[_.context,J,X]},[_]),M=v.useMemo(()=>{let J=d;return E!=null&&E.Consumer,J},[E,d]),L=v.useContext(M),z=!!_.store&&!!_.store.getState&&!!_.store.dispatch,H=!!L&&!!L.store,B=z?_.store:L.store,A=H?L.getServerState:B.getState,R=v.useMemo(()=>cW(B.dispatch,g),[B]),[T,I]=v.useMemo(()=>{if(!p)return MW;const J=ek(B,z?void 0:L.subscription),X=J.notifyNestedSubs.bind(J);return[J,X]},[B,z,L]),O=v.useMemo(()=>z?L:{...L,subscription:T},[z,L,T]),V=v.useRef(void 0),Y=v.useRef(D),ce=v.useRef(void 0),ne=v.useRef(!1),ee=v.useRef(!1),W=v.useRef(void 0);kd(()=>(ee.current=!0,()=>{ee.current=!1}),[]);const C=v.useMemo(()=>()=>ce.current&&D===Y.current?ce.current:R(B.getState(),D),[B,D]),P=v.useMemo(()=>X=>T?RW(p,B,T,R,Y,V,ne,ee,ce,I,X):()=>{},[T]);AW(IW,[Y,V,ne,D,ce,I]);let F;try{F=v.useSyncExternalStore(P,C,A?()=>R(A(),D):C)}catch(J){throw W.current&&(J.message+=`
The error may be correlated with this previous error:
${W.current.stack}

`),J}kd(()=>{W.current=void 0,ce.current=void 0,V.current=F});const $=v.useMemo(()=>v.createElement(b,{...F,ref:N}),[N,b,F]);return v.useMemo(()=>p?v.createElement(M.Provider,{value:O},$):$,[M,$,O])}const k=v.memo(S);if(k.WrappedComponent=b,k.displayName=S.displayName=y,c){const E=v.forwardRef(function(D,M){return v.createElement(k,{...D,reactReduxForwardedRef:M})});return E.displayName=y,E.WrappedComponent=b,Jp(E,b)}return Jp(k,b)}}var sk=LW;function FW(e){const{children:t,context:n,serverState:s,store:r}=e,i=v.useMemo(()=>{const c=ek(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=v.useMemo(()=>r.getState(),[r]);kd(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||nk;return v.createElement(l.Provider,{value:i},t)}var $W=FW,BW="Invariant failed";function zW(e,t){throw new Error(BW)}var On=function(t){var n=t.top,s=t.right,r=t.bottom,i=t.left,o=s-i,l=r-n,c={top:n,right:s,bottom:r,left:i,width:o,height:l,x:i,y:n,center:{x:(s+i)/2,y:(r+n)/2}};return c},py=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},d1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},VW=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},am={top:0,right:0,bottom:0,left:0},gy=function(t){var n=t.borderBox,s=t.margin,r=s===void 0?am:s,i=t.border,o=i===void 0?am:i,l=t.padding,c=l===void 0?am:l,u=On(py(n,r)),d=On(d1(n,o)),h=On(d1(d,c));return{marginBox:u,borderBox:On(n),paddingBox:d,contentBox:h,margin:r,border:o,padding:c}},mn=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var r=Number(n);return isNaN(r)&&zW(),r},UW=function(){return{x:window.pageXOffset,y:window.pageYOffset}},_d=function(t,n){var s=t.borderBox,r=t.border,i=t.margin,o=t.padding,l=VW(s,n);return gy({borderBox:l,border:r,margin:i,padding:o})},Dd=function(t,n){return n===void 0&&(n=UW()),_d(t,n)},rk=function(t,n){var s={top:mn(n.marginTop),right:mn(n.marginRight),bottom:mn(n.marginBottom),left:mn(n.marginLeft)},r={top:mn(n.paddingTop),right:mn(n.paddingRight),bottom:mn(n.paddingBottom),left:mn(n.paddingLeft)},i={top:mn(n.borderTopWidth),right:mn(n.borderRightWidth),bottom:mn(n.borderBottomWidth),left:mn(n.borderLeftWidth)};return gy({borderBox:t,margin:s,padding:r,border:i})},ik=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return rk(n,s)},kl=function(t){var n=[],s=null,r=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return r.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},r};function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Td.apply(null,arguments)}function ok(e,t){}ok.bind(null,"warn");ok.bind(null,"error");function xr(){}function WW(e,t){return{...e,...t}}function wn(e,t,n){const s=t.map(r=>{const i=WW(n,r.options);return e.addEventListener(r.eventName,r.fn,i),function(){e.removeEventListener(r.eventName,r.fn,i)}});return function(){s.forEach(i=>{i()})}}const HW="Invariant failed";class Pd extends Error{}Pd.prototype.toString=function(){return this.message};function K(e,t){throw new Pd(HW)}class qW extends re.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=xr,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof Pd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=wn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Pd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const GW=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Md=e=>e+1,YW=e=>`
  You have lifted an item in position ${Md(e.source.index)}
`,ak=(e,t)=>{const n=e.droppableId===t.droppableId,s=Md(e.index),r=Md(t.index);return n?`
      You have moved the item from position ${s}
      to position ${r}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${r}
  `},lk=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,QW=e=>{const t=e.destination;if(t)return ak(e.source,t);const n=e.combine;return n?lk(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},h1=e=>`
  The item has returned to its starting position
  of ${Md(e.index)}
`,KW=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${h1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${ak(e.source,t)}
    `:n?`
      You have dropped the item.
      ${lk(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${h1(e.source)}
  `},Cu={dragHandleUsageInstructions:GW,onDragStart:YW,onDragUpdate:QW,onDragEnd:KW};function XW(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function ck(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!XW(e[n],t[n]))return!1;return!0}function Ne(e,t){const n=v.useState(()=>({inputs:t,result:e()}))[0],s=v.useRef(!0),r=v.useRef(n),o=s.current||!!(t&&r.current.inputs&&ck(t,r.current.inputs))?r.current:{inputs:t,result:e()};return v.useEffect(()=>{s.current=!1,r.current=o},[o]),o.result}function fe(e,t){return Ne(()=>e,t)}const pt={x:0,y:0},yt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),nn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),yr=(e,t)=>e.x===t.x&&e.y===t.y,Oo=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),pi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},_l=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),f1=(e,t)=>Math.min(...t.map(n=>_l(e,n))),uk=e=>t=>({x:e(t.x),y:e(t.y)});var JW=(e,t)=>{const n=On({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const ic=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),m1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],ZW={top:0,right:0,bottom:0,left:0},eH=(e,t)=>t?ic(e,t.scroll.diff.displacement):e,tH=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,nH=(e,t)=>t&&t.shouldClipSubject?JW(t.pageMarginBox,e):On(e);var yo=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const r=eH(e.marginBox,s),i=tH(r,n,t),o=nH(i,s);return{page:e,withPlaceholder:t,active:o}},xy=(e,t)=>{e.frame||K();const n=e.frame,s=nn(t,n.scroll.initial),r=Oo(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:r},max:n.scroll.max}},o=yo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function mt(e,t=ck){let n=null;function s(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;const i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return s.clear=function(){n=null},s}const dk=mt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),hk=mt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Nh=mt(e=>Object.values(e)),sH=mt(e=>Object.values(e));var Lo=mt((e,t)=>sH(t).filter(s=>e===s.descriptor.droppableId).sort((s,r)=>s.descriptor.index-r.descriptor.index));function yy(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Ch(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Eh=mt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),rH=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:r})=>{if(!n.isCombineEnabled||!yy(r))return null;function o(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...r,at:p}}const l=r.displaced.all,c=l.length?l[0]:null;if(e)return c?o(c):null;const u=Eh(t,s);if(!c){if(!u.length)return null;const m=u[u.length-1];return o(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&K();const h=d-1;if(h<0)return null;const f=u[h];return o(f.descriptor.id)},Fo=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const fk={point:pt,value:0},Dl={invisible:{},visible:{},all:[]},iH={displaced:Dl,displacedBy:fk,at:null};var jn=(e,t)=>n=>e<=n&&n<=t,mk=e=>{const t=jn(e.top,e.bottom),n=jn(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),o=n(s.left)||n(s.right);if(i&&o)return!0;const c=s.top<e.top&&s.bottom>e.bottom,u=s.left<e.left&&s.right>e.right;return c&&u?!0:c&&o||u&&i}},oH=e=>{const t=jn(e.top,e.bottom),n=jn(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const vy={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},pk={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var aH=e=>t=>{const n=jn(t.top,t.bottom),s=jn(t.left,t.right);return r=>e===vy?n(r.top)&&n(r.bottom):s(r.left)&&s(r.right)};const lH=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:pt;return ic(e,n)},cH=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,uH=(e,t,n)=>n(t)(e),by=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:r})=>{const i=s?lH(e,t):e;return cH(i,t,r)&&uH(i,n,r)},dH=e=>by({...e,isVisibleThroughFrameFn:mk}),gk=e=>by({...e,isVisibleThroughFrameFn:oH}),hH=e=>by({...e,isVisibleThroughFrameFn:aH(e.destination.axis)}),fH=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:r}=t;if(s[e])return!1;const i=r[e];return i?i.shouldAnimate:!0};function mH(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return On(py(n,s))}function Tl({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:r,last:i}){return e.reduce(function(l,c){const u=mH(c,n),d=c.descriptor.id;if(l.all.push(d),!dH({target:u,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=fH(d,i,r),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function pH(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function p1({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const r=pH(e,{inHomeList:t});return{displaced:Dl,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:r}}}}function Ad({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:r,last:i,index:o,forceShouldAnimate:l}){const c=Fo(e,n);if(o==null)return p1({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const u=t.find(p=>p.descriptor.index===o);if(!u)return p1({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const d=Eh(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:Tl({afterDragging:f,destination:n,displacedBy:r,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Nr(e,t){return!!t.effected[e]}var gH=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:r})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return Nr(i,r)?e?l:l-1:e?l+1:l},xH=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const r=s.index,i=e?r+1:r-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<o||i>c?null:i},yH=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:r,insideDestination:i,previousImpact:o,viewport:l,afterCritical:c})=>{const u=o.at;if(u||K(),u.type==="REORDER"){const h=xH({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:Ad({draggable:n,insideDestination:i,destination:r,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})}const d=gH({isMovingForward:e,destination:r,displaced:o.displaced,draggables:s,combine:u.combine,afterCritical:c});return d==null?null:Ad({draggable:n,insideDestination:i,destination:r,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:d})},vH=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const r=!!(e.visible[n]||e.invisible[n]);return Nr(n,t)?r?pt:Oo(s.point):r?s.point:pt},bH=({afterCritical:e,impact:t,draggables:n})=>{const s=Ch(t);s||K();const r=s.draggableId,i=n[r].page.borderBox.center,o=vH({displaced:t.displaced,afterCritical:e,combineWith:r,displacedBy:t.displacedBy});return yt(i,o)};const xk=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,wH=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,wy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,g1=({axis:e,moveRelativeTo:t,isMoving:n})=>pi(e.line,t.marginBox[e.end]+xk(e,n),wy(e,t.marginBox,n)),x1=({axis:e,moveRelativeTo:t,isMoving:n})=>pi(e.line,t.marginBox[e.start]-wH(e,n),wy(e,t.marginBox,n)),SH=({axis:e,moveInto:t,isMoving:n})=>pi(e.line,t.contentBox[e.start]+xk(e,n),wy(e,t.contentBox,n));var jH=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:r})=>{const i=Lo(s.descriptor.id,n),o=t.page,l=s.axis;if(!i.length)return SH({axis:l,moveInto:s.page,isMoving:o});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(Nr(d,r))return x1({axis:l,moveRelativeTo:f.page,isMoving:o});const m=_d(f.page,u.point);return x1({axis:l,moveRelativeTo:m,isMoving:o})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Nr(h.descriptor.id,r)){const f=_d(h.page,Oo(r.displacedBy.point));return g1({axis:l,moveRelativeTo:f,isMoving:o})}return g1({axis:l,moveRelativeTo:h.page,isMoving:o})},Zp=(e,t)=>{const n=e.frame;return n?yt(t,n.scroll.diff.displacement):t};const NH=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:r})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?jH({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:r}):bH({impact:e,draggables:s,afterCritical:r})};var kh=e=>{const t=NH(e),n=e.droppable;return n?Zp(n,t):t},yk=(e,t)=>{const n=nn(t,e.scroll.initial),s=Oo(n);return{frame:On({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function y1(e,t){return e.map(n=>t[n])}function CH(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var EH=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:r})=>{const i=yk(t,yt(t.scroll.current,r)),o=n.frame?xy(n,yt(n.frame.scroll.current,r)):n,l=e.displaced,c=Tl({afterDragging:y1(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=Tl({afterDragging:y1(l.all,s),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const x=CH(p,f);if(x){h[p]=x;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},kH=(e,t)=>yt(e.scroll.diff.displacement,t),Sy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=kH(n,e),r=nn(s,t.page.borderBox.center);return yt(t.client.borderBox.center,r)},vk=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:r,onlyOnMainAxis:i=!1})=>{const o=nn(n,e.page.borderBox.center),c={target:ic(e.page.borderBox,o),destination:t,withDroppableDisplacement:r,viewport:s};return i?hH(c):gk(c)},_H=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:r,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=Lo(n.descriptor.id,s),d=Fo(t,n),h=rH({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:r})||yH({isMovingForward:e,isInHomeList:d,draggable:t,draggables:s,destination:n,insideDestination:u,previousImpact:r,viewport:i,afterCritical:c});if(!h)return null;const f=kh({impact:h,draggable:t,droppable:n,draggables:s,afterCritical:c});if(vk({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Sy({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=nn(f,o),x=EH({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:p});return{clientSelection:l,impact:x,scrollJumpRequest:p}};const At=e=>{const t=e.subject.active;return t||K(),t};var DH=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:r})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,l=jn(i[o.start],i[o.end]),c=Nh(s).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>mk(r.frame)(At(d))).filter(d=>{const h=At(d);return e?i[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<i[o.crossAxisStart]}).filter(d=>{const h=At(d),f=jn(h[o.start],h[o.end]);return l(h[o.start])||l(h[o.end])||f(i[o.start])||f(i[o.end])}).sort((d,h)=>{const f=At(d)[o.crossAxisStart],m=At(h)[o.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>At(d)[o.crossAxisStart]===At(f[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>jn(At(d)[o.start],At(d)[o.end])(t[o.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>At(d)[o.start]-At(h)[o.start])[0]:c.sort((d,h)=>{const f=f1(t,m1(At(d))),m=f1(t,m1(At(h)));return f!==m?f-m:At(d)[o.start]-At(h)[o.start]})[0]};const v1=(e,t)=>{const n=e.page.borderBox.center;return Nr(e.descriptor.id,t)?nn(n,t.displacedBy.point):n},TH=(e,t)=>{const n=e.page.borderBox;return Nr(e.descriptor.id,t)?ic(n,Oo(t.displacedBy.point)):n};var PH=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:r})=>s.filter(o=>gk({target:TH(o,r),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const c=_l(e,Zp(n,v1(o,r))),u=_l(e,Zp(n,v1(l,r)));return c<u?-1:u<c?1:o.descriptor.index-l.descriptor.index})[0]||null,oc=mt(function(t,n){const s=n[t.line];return{value:s,point:pi(t.line,s)}});const MH=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return pi(s.line,t[s.line]);const r=e.subject.page.contentBox[s.size],c=Lo(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[s.size],0)+t[s.line]-r;return c<=0?null:pi(s.line,c)},bk=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),wk=(e,t,n)=>{const s=e.frame;Fo(t,e)&&K(),e.subject.withPlaceholder&&K();const r=oc(e.axis,t.displaceBy).point,i=MH(e,r,n),o={placeholderSize:r,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const d=yo({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?yt(s.scroll.max,i):s.scroll.max,c=bk(s,l),u=yo({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},AH=e=>{const t=e.subject.withPlaceholder;t||K();const n=e.frame;if(!n){const o=yo({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const s=t.oldFrameMaxScroll;s||K();const r=bk(n,s),i=yo({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null});return{...e,subject:i,frame:r}};var IH=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:r,destination:i,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:Dl,displacedBy:fk,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=kh({impact:h,draggable:s,droppable:i,draggables:r,afterCritical:l}),m=Fo(s,i)?i:wk(i,s,r);return vk({draggable:s,destination:m,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?h:h+1})(),d=oc(i.axis,s.displaceBy);return Ad({draggable:s,insideDestination:n,destination:i,viewport:o,displacedBy:d,last:Dl,index:u})},RH=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:r,droppables:i,viewport:o,afterCritical:l})=>{const c=DH({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:o});if(!c)return null;const u=Lo(c.descriptor.id,r),d=PH({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:u,afterCritical:l}),h=IH({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:r,moveRelativeTo:d,insideDestination:u,viewport:o,afterCritical:l});if(!h)return null;const f=kh({impact:h,draggable:n,droppable:c,draggables:r,afterCritical:l});return{clientSelection:Sy({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null}},rn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const OH=(e,t)=>{const n=rn(e);return n?t[n]:null};var LH=({state:e,type:t})=>{const n=OH(e.impact,e.dimensions.droppables),s=!!n,r=e.dimensions.droppables[e.critical.droppable.id],i=n||r,o=i.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?_H({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):RH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Gr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Sk(e){const t=jn(e.top,e.bottom),n=jn(e.left,e.right);return function(r){return t(r.y)&&n(r.x)}}function FH(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function $H({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,r=n.map(i=>{const o=i.axis,l=pi(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:_l(s,l)}}).sort((i,o)=>o.distance-i.distance);return r[0]?r[0].id:null}function BH({pageBorderBox:e,draggable:t,droppables:n}){const s=Nh(n).filter(r=>{if(!r.isEnabled)return!1;const i=r.subject.active;if(!i||!FH(e,i))return!1;if(Sk(i)(e.center))return!0;const o=r.axis,l=i.center[o.crossAxisLine],c=e[o.crossAxisStart],u=e[o.crossAxisEnd],d=jn(i[o.crossAxisStart],i[o.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return s.length?s.length===1?s[0].descriptor.id:$H({pageBorderBox:e,draggable:t,candidates:s}):null}const jk=(e,t)=>On(ic(e,t));var zH=(e,t)=>{const n=e.frame;return n?jk(t,n.scroll.diff.value):t};function Nk({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function VH({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var UH=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:r,viewport:i,afterCritical:o})=>{const l=n.axis,c=oc(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=Eh(t,s).find(x=>{const b=x.descriptor.id,w=x.page.borderBox.center[l.line],y=Nr(b,o),g=Nk({displaced:r,id:b});return y?g?h<=w:d<w-u:g?h<=w+u:d<w})||null,p=VH({draggable:t,closest:m,inHomeList:Fo(t,n)});return Ad({draggable:t,insideDestination:s,destination:n,viewport:i,last:r,displacedBy:c,index:p})};const WH=4;var HH=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const o=s.axis,l=oc(s.axis,e.displaceBy),c=l.value,u=t[o.start],d=t[o.end],f=Eh(e,r).find(p=>{const x=p.descriptor.id,b=p.page.borderBox,y=b[o.size]/WH,g=Nr(x,i),S=Nk({displaced:n.displaced,id:x});return g?S?d>b[o.start]+y&&d<b[o.end]-y:u>b[o.start]-c+y&&u<b[o.end]-c-y:S?d>b[o.start]+c+y&&d<b[o.end]+c-y:u>b[o.start]+y&&u<b[o.end]-y});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:s.descriptor.id}}}:null},Ck=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:r,viewport:i,afterCritical:o})=>{const l=jk(t.page.borderBox,e),c=BH({pageBorderBox:l,draggable:t,droppables:s});if(!c)return iH;const u=s[c],d=Lo(u.descriptor.id,n),h=zH(u,l);return HH({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:r,destination:u,insideDestination:d,afterCritical:o})||UH({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:r.displaced,viewport:i,afterCritical:o})},jy=(e,t)=>({...e,[t.descriptor.id]:t});const qH=({previousImpact:e,impact:t,droppables:n})=>{const s=rn(e),r=rn(t);if(!s||s===r)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const o=AH(i);return jy(n,o)};var GH=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:r})=>{const i=qH({previousImpact:s,impact:r,droppables:n}),o=rn(r);if(!o)return i;const l=n[o];if(Fo(e,l)||l.subject.withPlaceholder)return i;const c=wk(l,e,t);return jy(i,c)},Wa=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:r,scrollJumpRequest:i})=>{const o=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=nn(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:yt(e.initial.client.borderBoxCenter,u)},h={selection:yt(d.selection,o.scroll.current),borderBoxCenter:yt(d.borderBoxCenter,o.scroll.current),offset:yt(d.offset,o.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:f};const m=l.draggables[e.critical.draggable.id],p=r||Ck({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),x=GH({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:x},impact:p,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function YH(e,t){return e.map(n=>t[n])}var Ek=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:r})=>{const i=e.displaced,o=YH(i.all,n),l=Tl({afterDragging:o,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:r,last:i});return{...e,displaced:l}},kk=({impact:e,draggable:t,droppable:n,draggables:s,viewport:r,afterCritical:i})=>{const o=kh({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return Sy({pageBorderBoxCenter:o,draggable:t,viewport:r})},_k=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&K();const s=e.impact,r=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:l}=i,c=o[e.critical.draggable.id],u=rn(s);u||K();const d=l[u],h=Ek({impact:s,viewport:r,destination:d,draggables:o}),f=kk({impact:h,draggable:c,droppable:d,draggables:o,viewport:r,afterCritical:e.afterCritical});return Wa({impact:h,clientSelection:f,state:e,dimensions:i,viewport:r})},QH=e=>({index:e.index,droppableId:e.droppableId}),Dk=({draggable:e,home:t,draggables:n,viewport:s})=>{const r=oc(t.axis,e.displaceBy),i=Lo(t.descriptor.id,n),o=i.indexOf(e);o===-1&&K();const l=i.slice(o+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:r,effected:c};return{impact:{displaced:Tl({afterDragging:l,destination:t,displacedBy:r,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:QH(e.descriptor)}},afterCritical:u}},KH=(e,t)=>({draggables:e.draggables,droppables:jy(e.droppables,t)}),XH=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=_d(e.client,t),r=Dd(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:r}},JH=e=>{const t=e.frame;return t||K(),t},ZH=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(r=>{const i=r.descriptor.droppableId,o=t[i],c=JH(o).scroll.diff.value,u=yt(s,c);return XH({draggable:r,offset:u,initialWindowScroll:n.scroll.initial})})},e7=({state:e,published:t})=>{const n=t.modified.map(w=>{const y=e.dimensions.droppables[w.droppableId];return xy(y,w.scroll)}),s={...e.dimensions.droppables,...dk(n)},r=hk(ZH({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...r};t.removals.forEach(w=>{delete i[w]});const o={droppables:s,draggables:i},l=rn(e.impact),c=l?o.droppables[l]:null,u=o.draggables[e.critical.draggable.id],d=o.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=Dk({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=Ck({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),x={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:o,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const eg=e=>e.movementMode==="SNAP",lm=(e,t,n)=>{const s=KH(e.dimensions,t);return!eg(e)||n?Wa({state:e,dimensions:s}):_k({state:e,dimensions:s})};function cm(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const b1={phase:"IDLE",completed:null,shouldFlush:!1};var t7=(e=b1,t)=>{if(t.type==="FLUSH")return{...b1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&K();const{critical:n,clientSelection:s,viewport:r,dimensions:i,movementMode:o}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:s,borderBoxCenter:l.client.borderBox.center,offset:pt},d={client:u,page:{selection:yt(u.selection,r.scroll.initial),borderBoxCenter:yt(u.selection,r.scroll.initial),offset:yt(u.selection,r.scroll.diff.value)}},h=Nh(i.droppables).every(x=>!x.isFixedOnPage),{impact:f,afterCritical:m}=Dk({draggable:l,home:c,draggables:i.draggables,viewport:r});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&K(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||K(),e7({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Gr(e)||K();const{client:n}=t.payload;return yr(n,e.current.client.selection)?e:Wa({state:e,clientSelection:n,impact:eg(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return cm(e);Gr(e)||K();const{id:n,newScroll:s}=t.payload,r=e.dimensions.droppables[n];if(!r)return e;const i=xy(r,s);return lm(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gr(e)||K();const{id:n,isEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||K(),r.isEnabled===s&&K();const i={...r,isEnabled:s};return lm(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gr(e)||K();const{id:n,isCombineEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||K(),r.isCombineEnabled===s&&K();const i={...r,isCombineEnabled:s};return lm(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Gr(e)||K(),e.isWindowScrollAllowed||K();const n=t.payload.newScroll;if(yr(e.viewport.scroll.current,n))return cm(e);const s=yk(e.viewport,n);return eg(e)?_k({state:e,viewport:s}):Wa({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Gr(e))return e;const n=t.payload.maxScroll;if(yr(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&K();const n=LH({state:e,type:t.type});return n?Wa({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&K(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:r}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||K(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:r,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function De(e,t){return e instanceof Object&&"type"in e&&e.type===t}const n7=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),s7=e=>({type:"LIFT",payload:e}),r7=e=>({type:"INITIAL_PUBLISH",payload:e}),i7=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),o7=()=>({type:"COLLECTION_STARTING",payload:null}),a7=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),l7=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),c7=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Tk=e=>({type:"MOVE",payload:e}),u7=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),d7=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),h7=()=>({type:"MOVE_UP",payload:null}),f7=()=>({type:"MOVE_DOWN",payload:null}),m7=()=>({type:"MOVE_RIGHT",payload:null}),p7=()=>({type:"MOVE_LEFT",payload:null}),Ny=()=>({type:"FLUSH",payload:null}),g7=e=>({type:"DROP_ANIMATE",payload:e}),Cy=e=>({type:"DROP_COMPLETE",payload:e}),Pk=e=>({type:"DROP",payload:e}),x7=e=>({type:"DROP_PENDING",payload:e}),Mk=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var y7=e=>({getState:t,dispatch:n})=>s=>r=>{if(!De(r,"LIFT")){s(r);return}const{id:i,clientSelection:o,movementMode:l}=r.payload,c=t();c.phase==="DROP_ANIMATING"&&n(Cy({completed:c.completed})),t().phase!=="IDLE"&&K(),n(Ny()),n(n7({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(r7({critical:h,dimensions:f,clientSelection:o,movementMode:l,viewport:m}))},v7=e=>()=>t=>n=>{De(n,"INITIAL_PUBLISH")&&e.dragging(),De(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(De(n,"FLUSH")||De(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Ey={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Pl={opacity:{drop:0,combining:.7},scale:{drop:.75}},Ak={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fr=`${Ak.outOfTheWay}s ${Ey.outOfTheWay}`,Ha={fluid:`opacity ${Fr}`,snap:`transform ${Fr}, opacity ${Fr}`,drop:e=>{const t=`${e}s ${Ey.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fr}`,placeholder:`height ${Fr}, width ${Fr}, margin ${Fr}`},w1=e=>yr(e,pt)?void 0:`translate(${e.x}px, ${e.y}px)`,tg={moveTo:w1,drop:(e,t)=>{const n=w1(e);if(n)return t?`${n} scale(${Pl.scale.drop})`:n}},{minDropTime:ng,maxDropTime:Ik}=Ak,b7=Ik-ng,S1=1500,w7=.6;var S7=({current:e,destination:t,reason:n})=>{const s=_l(e,t);if(s<=0)return ng;if(s>=S1)return Ik;const r=s/S1,i=ng+b7*r,o=n==="CANCEL"?i*w7:i;return Number(o.toFixed(2))},j7=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:r})=>{const{draggables:i,droppables:o}=n,l=rn(e),c=l?o[l]:null,u=o[t.descriptor.droppableId],d=kk({impact:e,draggable:t,draggables:i,afterCritical:r,droppable:c||u,viewport:s});return nn(d,t.client.borderBox.center)},N7=({draggables:e,reason:t,lastImpact:n,home:s,viewport:r,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:Ek({draggables:e,impact:i,destination:s,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Dl},didDropInsideDroppable:!0};const C7=({getState:e,dispatch:t})=>n=>s=>{if(!De(s,"DROP")){n(s);return}const r=e(),i=s.payload.reason;if(r.phase==="COLLECTING"){t(x7({reason:i}));return}if(r.phase==="IDLE")return;r.phase==="DROP_PENDING"&&r.isWaiting&&K(),r.phase==="DRAGGING"||r.phase==="DROP_PENDING"||K();const l=r.critical,c=r.dimensions,u=c.draggables[r.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=N7({reason:i,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),f=h?yy(d):null,m=h?Ch(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:r.movementMode,destination:f,combine:m},b=j7({impact:d,draggable:u,dimensions:c,viewport:r.viewport,afterCritical:r.afterCritical}),w={critical:r.critical,afterCritical:r.afterCritical,result:x,impact:d};if(!(!yr(r.current.client.offset,b)||!!x.combine)){t(Cy({completed:w}));return}const g=S7({current:r.current.client.offset,destination:b,reason:i});t(g7({newHomeClientOffset:b,dropDuration:g,completed:w}))};var Rk=()=>({x:window.pageXOffset,y:window.pageYOffset});function E7(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function k7({onWindowScroll:e}){function t(){e(Rk())}const n=kl(t),s=E7(n);let r=xr;function i(){return r!==xr}function o(){i()&&K(),r=wn(window,[s])}function l(){i()||K(),n.cancel(),r(),r=xr}return{start:o,stop:l,isActive:i}}const _7=e=>De(e,"DROP_COMPLETE")||De(e,"DROP_ANIMATE")||De(e,"FLUSH"),D7=e=>{const t=k7({onWindowScroll:n=>{e.dispatch(u7({newScroll:n}))}});return n=>s=>{!t.isActive()&&De(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&_7(s)&&t.stop(),n(s)}};var T7=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),r=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return r.wasCalled=()=>t,r},P7=()=>{const e=[],t=r=>{const i=e.findIndex(l=>l.timerId===r);i===-1&&K();const[o]=e.splice(i,1);o.callback()};return{add:r=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:r};e.push(o)},flush:()=>{if(!e.length)return;const r=[...e];e.length=0,r.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const M7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,A7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,I7=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},ca=(e,t)=>{t()},eu=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function um(e,t,n,s){if(!e){n(s(t));return}const r=T7(n);e(t,{announce:r}),r.wasCalled()||n(s(t))}var R7=(e,t)=>{const n=P7();let s=null;const r=(h,f)=>{s&&K(),ca("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{s&&K(),ca("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(eu(h,f))})},o=(h,f)=>{s&&K();const m=eu(h,f);s={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{ca("onDragStart",()=>um(e().onDragStart,m,t,Cu.onDragStart))})},l=(h,f)=>{const m=yy(f),p=Ch(f);s||K();const x=!I7(h,s.lastCritical);x&&(s.lastCritical=h);const b=!M7(s.lastLocation,m);b&&(s.lastLocation=m);const w=!A7(s.lastCombine,p);if(w&&(s.lastCombine=p),!x&&!b&&!w)return;const y={...eu(h,s.mode),combine:p,destination:m};n.add(()=>{ca("onDragUpdate",()=>um(e().onDragUpdate,y,t,Cu.onDragUpdate))})},c=()=>{s||K(),n.flush()},u=h=>{s||K(),s=null,ca("onDragEnd",()=>um(e().onDragEnd,h,t,Cu.onDragEnd))};return{beforeCapture:r,beforeStart:i,start:o,update:l,flush:c,drop:u,abort:()=>{if(!s)return;const h={...eu(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},O7=(e,t)=>{const n=R7(e,t);return s=>r=>i=>{if(De(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(De(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),r(i),n.start(l,i.payload.movementMode);return}if(De(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),r(i),n.drop(l);return}if(r(i),De(i,"FLUSH")){n.abort();return}const o=s.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const L7=e=>t=>n=>{if(!De(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&K(),e.dispatch(Cy({completed:s.completed}))},F7=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return r=>i=>{if((De(i,"FLUSH")||De(i,"DROP_COMPLETE")||De(i,"DROP_ANIMATION_FINISHED"))&&s(),r(i),!De(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Mk())}};n=requestAnimationFrame(()=>{n=null,t=wn(window,[o])})}};var $7=e=>()=>t=>n=>{(De(n,"DROP_COMPLETE")||De(n,"FLUSH")||De(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},B7=e=>{let t=!1;return()=>n=>s=>{if(De(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(De(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(De(s,"DROP_COMPLETE")){t=!1;const r=s.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const z7=e=>De(e,"DROP_COMPLETE")||De(e,"DROP_ANIMATE")||De(e,"FLUSH");var V7=e=>t=>n=>s=>{if(z7(s)){e.stop(),n(s);return}if(De(s,"INITIAL_PUBLISH")){n(s);const r=t.getState();r.phase!=="DRAGGING"&&K(),e.start(r);return}n(s),e.scroll(t.getState())};const U7=e=>t=>n=>{if(t(n),!De(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(Pk({reason:s.reason})))},W7=X2;var H7=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:r,autoScroller:i})=>K2(t7,W7(F8(v7(n),$7(e),y7(e),C7,L7,F7,U7,V7(i),D7,B7(t),O7(s,r))));const dm=()=>({additions:{},removals:{},modified:{}});function q7({registry:e,callbacks:t}){let n=dm(),s=null;const r=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(pt)).sort((p,x)=>p.descriptor.index-x.descriptor.index),f=Object.keys(d).map(p=>{const b=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:b}}),m={additions:h,removals:Object.keys(u),modified:f};n=dm(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],r()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],r()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=dm())}}}var Ok=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const r=nn({x:t,y:e},{x:s,y:n});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},Lk=()=>{const e=document.documentElement;return e||K(),e},Fk=()=>{const e=Lk();return Ok({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},G7=()=>{const e=Rk(),t=Fk(),n=e.y,s=e.x,r=Lk(),i=r.clientWidth,o=r.clientHeight,l=s+i,c=n+o;return{frame:On({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:pt,displacement:pt}}}},Y7=({critical:e,scrollOptions:t,registry:n})=>{const s=G7(),r=s.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(r,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(r));return{dimensions:{draggables:hk(l),droppables:dk(o)},critical:e,viewport:s}};function j1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Q7=(e,t)=>{let n=null;const s=q7({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=(f,m)=>{e.droppable.exists(f)||K(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||K(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},o=(f,m)=>{n&&(e.droppable.exists(f)||K(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;s.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||K();const m=n.critical.draggable;f.type==="ADDITION"&&j1(e,m,f.value)&&s.add(f.value),f.type==="REMOVAL"&&j1(e,m,f.value)&&s.remove(f.value)};return{updateDroppableIsEnabled:r,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:f=>{n&&K();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),x={draggable:m.descriptor,droppable:p.descriptor},b=e.subscribe(u);return n={critical:x,unsubscribe:b},Y7({critical:x,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},$k=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",K7=e=>{window.scrollBy(e.x,e.y)};const X7=mt(e=>Nh(e).filter(t=>!(!t.isEnabled||!t.frame))),J7=(e,t)=>X7(t).find(s=>(s.frame||K(),Sk(s.frame.pageMarginBox)(e)))||null;var Z7=({center:e,destination:t,droppables:n})=>{if(t){const r=n[t];return r.frame?r:null}return J7(e,n)};const Ml={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var eq=(e,t,n=()=>Ml)=>{const s=n(),r=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:r,maxScrollValueAt:i}},Bk=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},ky=1,tq=(e,t,n=()=>Ml)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return ky;const i=1-Bk({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=s.maxPixelScroll*s.ease(i);return Math.ceil(o)},nq=(e,t,n)=>{const s=n(),r=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,o=t,l=i,u=Date.now()-o;if(u>=i)return e;if(u<r)return ky;const d=Bk({startOfRange:r,endOfRange:l,current:u}),h=e*s.ease(d);return Math.ceil(h)},N1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:r})=>{const i=tq(e,t,r);return i===0?0:s?Math.max(nq(i,n,r),ky):i},C1=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const o=eq(e,s,i);return t[s.end]<t[s.start]?N1({distanceToEdge:t[s.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i}):-1*N1({distanceToEdge:t[s.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})},sq=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,r=t.width>e.width;return!r&&!s?n:r&&s?null:{x:r?0:n.x,y:s?0:n.y}};const rq=uk(e=>e===0?0:e);var zk=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const o={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=C1({container:t,distanceToEdges:o,dragStartTime:e,axis:vy,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),c=C1({container:t,distanceToEdges:o,dragStartTime:e,axis:pk,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),u=rq({x:c,y:l});if(yr(u,pt))return null;const d=sq({container:t,subject:n,proposedScroll:u});return d?yr(d,pt)?null:d:null};const iq=uk(e=>e===0?0:e>0?1:-1),_y=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const r=yt(t,s),i={x:e(r.x,n.x),y:e(r.y,n.y)};return yr(i,pt)?null:i}})(),Vk=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},r=iq(n),i=_y({max:s,current:t,change:r});return!i||r.x!==0&&i.x===0||r.y!==0&&i.y===0},Dy=(e,t)=>Vk({current:e.scroll.current,max:e.scroll.max,change:t}),oq=(e,t)=>{if(!Dy(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return _y({current:s,max:n,change:t})},Ty=(e,t)=>{const n=e.frame;return n?Vk({current:n.scroll.current,max:n.scroll.max,change:t}):!1},aq=(e,t)=>{const n=e.frame;return!n||!Ty(e,t)?null:_y({current:n.scroll.current,max:n.scroll.max,change:t})};var lq=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const o=zk({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return o&&Dy(e,o)?o:null},cq=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const l=zk({dragStartTime:s,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return l&&Ty(e,l)?l:null},E1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:r,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=lq({dragStartTime:t,viewport:h,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){s(f);return}}const u=Z7({center:o,destination:rn(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=cq({dragStartTime:t,droppable:u,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&r(u.descriptor.id,d)},uq=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Ml})=>{const s=kl(e),r=kl(t);let i=null;const o=u=>{i||K();const{shouldUseTimeDampening:d,dragStartTime:h}=i;E1({state:u,scrollWindow:s,scrollDroppable:r,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&K();const d=Date.now();let h=!1;const f=()=>{h=!0};E1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&o(u)},stop:()=>{i&&(s.cancel(),r.cancel(),i=null)},scroll:o}},dq=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const u=yt(l.current.client.selection,c);e({client:u})},r=(l,c)=>{if(!Ty(l,c))return c;const u=aq(l,c);if(!u)return t(l.descriptor.id,c),null;const d=nn(c,u);return t(l.descriptor.id,d),nn(c,d)},i=(l,c,u)=>{if(!l||!Dy(c,u))return u;const d=oq(c,u);if(!d)return n(u),null;const h=nn(u,d);return n(h),nn(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=rn(l.impact);u||K();const d=r(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&s(l,f)}},hq=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const r=uq({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=dq({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){r.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:r.start,stop:r.stop}};const vo="data-rfd",bo=(()=>{const e=`${vo}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),sg=(()=>{const e=`${vo}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),fq=(()=>{const e=`${vo}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),k1={contextId:`${vo}-scroll-container-context-id`},mq=e=>t=>`[${t}="${e}"]`,ua=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),pq="pointer-events: none;";var gq=e=>{const t=mq(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(bo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:pq,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${Ha.outOfTheWay};
    `;return{selector:t(sg.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),r={selector:t(fq.contextId),styles:{always:"overflow-anchor: none;"}},o=[s,n,r,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ua(o,"always"),resting:ua(o,"resting"),dragging:ua(o,"dragging"),dropAnimating:ua(o,"dropAnimating"),userCancel:ua(o,"userCancel")}};const on=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?v.useLayoutEffect:v.useEffect,hm=()=>{const e=document.querySelector("head");return e||K(),e},_1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function xq(e,t){const n=Ne(()=>gq(e),[e]),s=v.useRef(null),r=v.useRef(null),i=fe(mt(h=>{const f=r.current;f||K(),f.textContent=h}),[]),o=fe(h=>{const f=s.current;f||K(),f.textContent=h},[]);on(()=>{!s.current&&!r.current||K();const h=_1(t),f=_1(t);return s.current=h,r.current=f,h.setAttribute(`${vo}-always`,e),f.setAttribute(`${vo}-dynamic`,e),hm().appendChild(h),hm().appendChild(f),o(n.always),i(n.resting),()=>{const m=p=>{const x=p.current;x||K(),hm().removeChild(x),p.current=null};m(s),m(r)}},[t,o,i,n.always,n.resting,e]);const l=fe(()=>i(n.dragging),[i,n.dragging]),c=fe(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=fe(()=>{r.current&&i(n.resting)},[i,n.resting]);return Ne(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function Uk(e,t){return Array.from(e.querySelectorAll(t))}var Wk=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function _h(e){return e instanceof Wk(e).HTMLElement}function yq(e,t){const n=`[${bo.contextId}="${e}"]`,s=Uk(document,n);if(!s.length)return null;const r=s.find(i=>i.getAttribute(bo.draggableId)===t);return!r||!_h(r)?null:r}function vq(e){const t=v.useRef({}),n=v.useRef(null),s=v.useRef(null),r=v.useRef(!1),i=fe(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const b=t.current;b[f]!==p&&delete b[f]}},[]),o=fe(function(f){const m=yq(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=fe(function(f,m){n.current===f&&(n.current=m)},[]),c=fe(function(){s.current||r.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const f=n.current;f&&o(f)}))},[o]),u=fe(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(bo.draggableId)===f&&(n.current=f)},[]);return on(()=>(r.current=!0,function(){r.current=!1;const f=s.current;f&&cancelAnimationFrame(f)}),[]),Ne(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function bq(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function s(h){t.length&&t.forEach(f=>f(h))}function r(h){return e.draggables[h]||null}function i(h){const f=r(h);return f||K(),f}const o={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=r(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:r,exists:h=>!!r(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||K(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:n,clean:d}}function wq(){const e=Ne(bq,[]);return v.useEffect(()=>function(){e.clean()},[e]),e}var Py=re.createContext(null),Id=()=>{const e=document.body;return e||K(),e};const Sq={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},jq=e=>`rfd-announcement-${e}`;function Nq(e){const t=Ne(()=>jq(e),[e]),n=v.useRef(null);return v.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Td(i.style,Sq),Id().appendChild(i),function(){setTimeout(function(){const c=Id();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),fe(r=>{const i=n.current;if(i){i.textContent=r;return}},[])}const Cq={separator:"::"};function My(e,t=Cq){const n=re.useId();return Ne(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function Eq({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function kq({contextId:e,text:t}){const n=My("hidden-text",{separator:"-"}),s=Ne(()=>Eq({contextId:e,uniqueId:n}),[n,e]);return v.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",Id().appendChild(i),function(){const l=Id();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var Dh=re.createContext(null);function Hk(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),t}function _q(){let e=null;function t(){return!!e}function n(o){return o===e}function s(o){e&&K();const l={abandon:o};return e=l,l}function r(){e||K(),e=null}function i(){e&&(e.abandon(),r())}return{isClaimed:t,isActive:n,claim:s,release:r,tryAbandon:i}}function Al(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Dq=9,Tq=13,Ay=27,qk=32,Pq=33,Mq=34,Aq=35,Iq=36,Rq=37,Oq=38,Lq=39,Fq=40,$q={[Tq]:!0,[Dq]:!0};var Gk=e=>{$q[e.keyCode]&&e.preventDefault()};const Th=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),Yk=0,D1=5;function Bq(e,t){return Math.abs(t.x-e.x)>=D1||Math.abs(t.y-e.y)>=D1}const T1={type:"IDLE"};function zq({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:r=>{const{button:i,clientX:o,clientY:l}=r;if(i!==Yk)return;const c={x:o,y:l},u=n();if(u.type==="DRAGGING"){r.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&K();const d=u.point;if(!Bq(d,c))return;r.preventDefault();const h=u.actions.fluidLift(c);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:r=>{n().type==="DRAGGING"&&r.preventDefault(),e()}},{eventName:"keydown",fn:r=>{if(n().type==="PENDING"){e();return}if(r.keyCode===Ay){r.preventDefault(),e();return}Gk(r)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:r=>{const i=n();if(i.type==="IDLE"&&K(),i.actions.shouldRespectForcePress()){e();return}r.preventDefault()}},{eventName:Th,fn:e}]}function Vq(e){const t=v.useRef(T1),n=v.useRef(xr),s=Ne(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==Yk||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,o,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),r=Ne(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=fe(function(){const h={passive:!1,capture:!0};n.current=wn(window,[r,s],h)},[r,s]),o=fe(()=>{t.current.type!=="IDLE"&&(t.current=T1,n.current(),i())},[i]),l=fe(()=>{const d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),c=fe(function(){const h={capture:!0,passive:!1},f=zq({cancel:l,completed:o,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=wn(window,f,h)},[l,o]),u=fe(function(h,f){t.current.type!=="IDLE"&&K(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);on(function(){return i(),function(){n.current()}},[i])}function Uq(){}const Wq={[Mq]:!0,[Pq]:!0,[Iq]:!0,[Aq]:!0};function Hq(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:r=>{if(r.keyCode===Ay){r.preventDefault(),n();return}if(r.keyCode===qk){r.preventDefault(),s();return}if(r.keyCode===Fq){r.preventDefault(),e.moveDown();return}if(r.keyCode===Oq){r.preventDefault(),e.moveUp();return}if(r.keyCode===Lq){r.preventDefault(),e.moveRight();return}if(r.keyCode===Rq){r.preventDefault(),e.moveLeft();return}if(Wq[r.keyCode]){r.preventDefault();return}Gk(r)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Th,fn:n}]}function qq(e){const t=v.useRef(Uq),n=Ne(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==qk)return;const o=e.findClosestDraggableId(i);if(!o)return;const l=e.tryGetLock(o,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||K(),c=!1,t.current(),s()}t.current=wn(window,Hq(u,d),{capture:!0,passive:!1})}}),[e]),s=fe(function(){const i={passive:!1,capture:!0};t.current=wn(window,[n],i)},[n]);on(function(){return s(),function(){t.current()}},[s])}const fm={type:"IDLE"},Gq=120,Yq=.15;function Qq({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Ay&&n.preventDefault(),e()}},{eventName:Th,fn:e}]}function Kq({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}r.hasMoved=!0;const{clientX:i,clientY:o}=s.touches[0],l={x:i,y:o};s.preventDefault(),r.actions.move(l)}},{eventName:"touchend",fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}s.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const r=n();r.type==="IDLE"&&K();const i=s.touches[0];if(!i||!(i.force>=Yq))return;const l=r.actions.shouldRespectForcePress();if(r.type==="PENDING"){l&&e();return}if(l){if(r.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:Th,fn:e}]}function Xq(e){const t=v.useRef(fm),n=v.useRef(xr),s=fe(function(){return t.current},[]),r=fe(function(m){t.current=m},[]),i=Ne(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const x=e.tryGetLock(p,l,{sourceEvent:m});if(!x)return;const b=m.touches[0],{clientX:w,clientY:y}=b,g={x:w,y};n.current(),h(x,g)}}),[e]),o=fe(function(){const m={capture:!0,passive:!1};n.current=wn(window,[i],m)},[i]),l=fe(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),r(fm),n.current(),o())},[o,r]),c=fe(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=fe(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:s},x=wn(window,Kq(p),m),b=wn(window,Qq(p),m);n.current=function(){x(),b()}},[c,s,l]),d=fe(function(){const m=s();m.type!=="PENDING"&&K();const p=m.actions.fluidLift(m.point);r({type:"DRAGGING",actions:p,hasMoved:!1})},[s,r]),h=fe(function(m,p){s().type!=="IDLE"&&K();const x=setTimeout(d,Gq);r({type:"PENDING",point:p,actions:m,longPressTimerId:x}),u()},[u,s,r,d]);on(function(){return o(),function(){n.current();const p=s();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),r(fm))}},[s,o,r]),on(function(){return wn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Jq=["input","button","textarea","select","option","optgroup","video","audio"];function Qk(e,t){if(t==null)return!1;if(Jq.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:Qk(e,t.parentElement)}function Zq(e,t){const n=t.target;return _h(n)?Qk(e,n):!1}var e9=e=>On(e.getBoundingClientRect()).center;function t9(e){return e instanceof Wk(e).Element}const n9=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function Kk(e,t){return e==null?null:e[n9](t)?e:Kk(e.parentElement,t)}function s9(e,t){return e.closest?e.closest(t):Kk(e,t)}function r9(e){return`[${bo.contextId}="${e}"]`}function i9(e,t){const n=t.target;if(!t9(n))return null;const s=r9(e),r=s9(n,s);return!r||!_h(r)?null:r}function o9(e,t){const n=i9(e,t);return n?n.getAttribute(bo.draggableId):null}function a9(e,t){const n=`[${sg.contextId}="${e}"]`,r=Uk(document,n).find(i=>i.getAttribute(sg.id)===t);return!r||!_h(r)?null:r}function l9(e){e.preventDefault()}function tu({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function Xk({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const r=n.draggable.findById(s);return!(!r||!r.options.isEnabled||!$k(t.getState(),s))}function c9({lockAPI:e,contextId:t,store:n,registry:s,draggableId:r,forceSensorStop:i,sourceEvent:o}){if(!Xk({lockAPI:e,store:n,registry:s,draggableId:r}))return null;const c=s.draggable.getById(r),u=a9(t,c.descriptor.id);if(!u||o&&!c.options.canDragInteractiveElements&&Zq(u,o))return null;const d=e.claim(i||xr);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(j,k){tu({expected:j,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(k())}const x=p.bind(null,"DRAGGING");function b(j){function k(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(k(),K()),n.dispatch(s7(j.liftActionArgs)),h="DRAGGING";function _(E,N={shouldBlockNextClick:!1}){if(j.cleanup(),N.shouldBlockNextClick){const D=wn(window,[{eventName:"click",fn:l9,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(D)}k(),n.dispatch(Pk({reason:E}))}return{isActive:()=>tu({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:E=>_("DROP",E),cancel:E=>_("CANCEL",E),...j.actions}}function w(j){const k=kl(E=>{x(()=>Tk({client:E}))});return{...b({liftActionArgs:{id:r,clientSelection:j,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function y(){const j={moveUp:()=>x(h7),moveRight:()=>x(m7),moveDown:()=>x(f7),moveLeft:()=>x(p7)};return b({liftActionArgs:{id:r,clientSelection:e9(u),movementMode:"SNAP"},cleanup:xr,actions:j})}function g(){tu({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>tu({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:w,snapLift:y,abort:g}}const u9=[Vq,qq,Xq];function d9({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:r}){const i=[...r?u9:[],...s||[]],o=v.useState(()=>_q())[0],l=fe(function(b,w){Al(b)&&!Al(w)&&o.tryAbandon()},[o]);on(function(){let b=t.getState();return t.subscribe(()=>{const y=t.getState();l(b,y),b=y})},[o,t,l]),on(()=>o.tryAbandon,[o.tryAbandon]);const c=fe(x=>Xk({lockAPI:o,registry:n,store:t,draggableId:x}),[o,n,t]),u=fe((x,b,w)=>c9({lockAPI:o,registry:n,contextId:e,store:t,draggableId:x,forceSensorStop:b||null,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null}),[e,o,n,t]),d=fe(x=>o9(e,x),[e]),h=fe(x=>{const b=n.draggable.findById(x);return b?b.options:null},[n.draggable]),f=fe(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Ny()))},[o,t]),m=fe(()=>o.isClaimed(),[o]),p=Ne(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let x=0;x<i.length;x++)i[x](p)}const h9=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};$l.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),f9=e=>({...Ml,...e.autoScrollerOptions,durationDampening:{...Ml.durationDampening,...e.autoScrollerOptions}});function da(e){return e.current||K(),e.current}function m9(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:r,dragHandleUsageInstructions:i}=e,o=v.useRef(null),l=Hk(e),c=fe(()=>h9(l.current),[l]),u=fe(()=>f9(l.current),[l]),d=Nq(t),h=kq({contextId:t,text:i}),f=xq(t,r),m=fe(D=>{da(o).dispatch(D)},[]),p=Ne(()=>r1({publishWhileDragging:i7,updateDroppableScroll:a7,updateDroppableIsEnabled:l7,updateDroppableIsCombineEnabled:c7,collectionStarting:o7},m),[m]),x=wq(),b=Ne(()=>Q7(x,p),[x,p]),w=Ne(()=>hq({scrollWindow:K7,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u,...r1({move:Tk},m)}),[b.scrollDroppable,m,u]),y=vq(t),g=Ne(()=>H7({announce:d,autoScroller:w,dimensionMarshal:b,focusMarshal:y,getResponders:c,styleMarshal:f}),[d,w,b,y,c,f]);o.current=g;const S=fe(()=>{const D=da(o);D.getState().phase!=="IDLE"&&D.dispatch(Ny())},[]),j=fe(()=>{const D=da(o).getState();return D.phase==="DROP_ANIMATING"?!0:D.phase==="IDLE"?!1:D.isDragging},[]),k=Ne(()=>({isDragging:j,tryAbort:S}),[j,S]);n(k);const _=fe(D=>$k(da(o).getState(),D),[]),E=fe(()=>Gr(da(o).getState()),[]),N=Ne(()=>({marshal:b,focus:y,contextId:t,canLift:_,isMovementAllowed:E,dragHandleUsageInstructionsId:h,registry:x}),[t,b,h,y,_,E,x]);return d9({contextId:t,store:g,registry:x,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),v.useEffect(()=>S,[S]),re.createElement(Dh.Provider,{value:N},re.createElement($W,{context:Py,store:g},e.children))}function p9(){return re.useId()}function g9(e){const t=p9(),n=e.dragHandleUsageInstructions||Cu.dragHandleUsageInstructions;return re.createElement(qW,null,s=>re.createElement(m9,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const P1={dragging:5e3,dropAnimating:4500},x9=(e,t)=>t?Ha.drop(t.duration):e?Ha.snap:Ha.fluid,y9=(e,t)=>{if(e)return t?Pl.opacity.drop:Pl.opacity.combining},v9=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function b9(e){const n=e.dimension.client,{offset:s,combineWith:r,dropping:i}=e,o=!!r,l=v9(e),c=!!i,u=c?tg.drop(s,o):tg.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:x9(l,i),transform:u,opacity:y9(o,c),zIndex:c?P1.dropAnimating:P1.dragging,pointerEvents:"none"}}function w9(e){return{transform:tg.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function S9(e){return e.type==="DRAGGING"?b9(e):w9(e)}function j9(e,t,n=pt){const s=window.getComputedStyle(t),r=t.getBoundingClientRect(),i=rk(r,s),o=Dd(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:o}}function N9(e){const t=My("draggable"),{descriptor:n,registry:s,getDraggableRef:r,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}=e,c=Ne(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}),[i,l,o]),u=fe(m=>{const p=r();return p||K(),j9(n,p,m)},[n,r]),d=Ne(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=v.useRef(d),f=v.useRef(!0);on(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),on(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,s.draggable.update(d,m)},[d,s.draggable])}var Iy=re.createContext(null);function Rd(e){const t=v.useContext(e);return t||K(),t}function C9(e){e.preventDefault()}const E9=e=>{const t=v.useRef(null),n=fe((k=null)=>{t.current=k},[]),s=fe(()=>t.current,[]),{contextId:r,dragHandleUsageInstructionsId:i,registry:o}=Rd(Dh),{type:l,droppableId:c}=Rd(Iy),u=Ne(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:x,mapped:b,dropAnimationFinished:w}=e;if(!x){const k=Ne(()=>({descriptor:u,registry:o,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,o,s,p,m,f]);N9(k)}const y=Ne(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":r,draggable:!1,onDragStart:C9}:null,[r,i,h,f]),g=fe(k=>{b.type==="DRAGGING"&&b.dropping&&k.propertyName==="transform"&&$l.flushSync(w)},[w,b]),S=Ne(()=>{const k=S9(b),_=b.type==="DRAGGING"&&b.dropping?g:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":r,"data-rfd-draggable-id":h,style:k,onTransitionEnd:_},dragHandleProps:y}},[r,y,h,b,g,n]),j=Ne(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return re.createElement(re.Fragment,null,d(S,b.snapshot,j))};var Jk=(e,t)=>e===t,Zk=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const k9=e=>e.combine?e.combine.draggableId:null,_9=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function D9(){const e=mt((r,i)=>({x:r,y:i})),t=mt((r,i,o=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:r,draggingOver:o,combineWith:l,combineTargetFor:null})),n=mt((r,i,o,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:r,dimension:o,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(r,i)=>{if(Al(r)){if(r.critical.draggable.id!==i.draggableId)return null;const o=r.current.client.offset,l=r.dimensions.draggables[i.draggableId],c=rn(r.impact),u=_9(r.impact),d=r.forceShouldAnimate;return n(e(o.x,o.y),r.movementMode,l,i.isClone,c,u,d)}if(r.phase==="DROP_ANIMATING"){const o=r.completed;if(o.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=r.dimensions.draggables[i.draggableId],u=o.result,d=u.mode,h=Zk(u),f=k9(u),p={duration:r.dropDuration,curve:Ey.drop,moveTo:r.newHomeClientOffset,opacity:f?Pl.opacity.drop:null,scale:f?Pl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function e_(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const T9={mapped:{type:"SECONDARY",offset:pt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:e_(null)}};function P9(){const e=mt((o,l)=>({x:o,y:l})),t=mt(e_),n=mt((o,l=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=o=>o?n(pt,o,!0):null,r=(o,l,c,u)=>{const d=c.displaced.visible[o],h=!!(u.inVirtualList&&u.effected[o]),f=Ch(c),m=f&&f.draggableId===o?l:null;if(!d){if(!h)return s(m);if(c.displaced.invisible[o])return null;const b=Oo(u.displacedBy.point),w=e(b.x,b.y);return n(w,m,!0)}if(h)return s(m);const p=c.displacedBy.point,x=e(p.x,p.y);return n(x,m,d.shouldAnimate)};return(o,l)=>{if(Al(o))return o.critical.draggable.id===l.draggableId?null:r(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===l.draggableId?null:r(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const M9=()=>{const e=D9(),t=P9();return(s,r)=>e(s,r)||t(s,r)||T9},A9={dropAnimationFinished:Mk},I9=sk(M9,A9,null,{context:Py,areStatePropsEqual:Jk})(E9);function t_(e){return Rd(Iy).isUsingCloneFor===e.draggableId&&!e.isClone?null:re.createElement(I9,e)}function R9(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return re.createElement(t_,Td({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const n_=e=>t=>e===t,O9=n_("scroll"),L9=n_("auto"),M1=(e,t)=>t(e.overflowX)||t(e.overflowY),F9=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return M1(n,O9)||M1(n,L9)},$9=()=>!1,s_=e=>e==null?null:e===document.body?$9()?e:null:e===document.documentElement?null:F9(e)?e:s_(e.parentElement);var rg=e=>({x:e.scrollLeft,y:e.scrollTop});const r_=e=>e?window.getComputedStyle(e).position==="fixed"?!0:r_(e.parentElement):!1;var B9=e=>{const t=s_(e),n=r_(e);return{closestScrollable:t,isFixedOnPage:n}},z9=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:r,client:i,page:o,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=Ok({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:pt,displacement:pt}}}})(),u=r==="vertical"?vy:pk,d=yo({page:o,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:u,isEnabled:t,client:i,page:o,frame:c,subject:d}};const V9=(e,t)=>{const n=ik(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,r=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,o=r+t.scrollWidth,c=py({top:s,right:o,bottom:i,left:r},n.border);return gy({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var U9=({ref:e,descriptor:t,env:n,windowScroll:s,direction:r,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:l})=>{const c=n.closestScrollable,u=V9(e,c),d=Dd(u,s),h=(()=>{if(!c)return null;const m=ik(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:Dd(m,s),scroll:rg(c),scrollSize:p,shouldClipSubject:l}})();return z9({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:r,client:u,page:d,closest:h})};const W9={passive:!1},H9={passive:!0};var A1=e=>e.shouldPublishImmediately?W9:H9;const nu=e=>e&&e.env.closestScrollable||null;function q9(e){const t=v.useRef(null),n=Rd(Dh),s=My("droppable"),{registry:r,marshal:i}=n,o=Hk(e),l=Ne(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=v.useRef(l),u=Ne(()=>mt((S,j)=>{t.current||K();const k={x:S,y:j};i.updateDroppableScroll(l.id,k)}),[l.id,i]),d=fe(()=>{const S=t.current;return!S||!S.env.closestScrollable?pt:rg(S.env.closestScrollable)},[]),h=fe(()=>{const S=d();u(S.x,S.y)},[d,u]),f=Ne(()=>kl(h),[h]),m=fe(()=>{const S=t.current,j=nu(S);if(S&&j||K(),S.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=fe((S,j)=>{t.current&&K();const k=o.current,_=k.getDroppableRef();_||K();const E=B9(_),N={ref:_,descriptor:l,env:E,scrollOptions:j};t.current=N;const D=U9({ref:_,descriptor:l,env:E,windowScroll:S,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),M=E.closestScrollable;return M&&(M.setAttribute(k1.contextId,n.contextId),M.addEventListener("scroll",m,A1(N.scrollOptions))),D},[n.contextId,l,m,o]),x=fe(()=>{const S=t.current,j=nu(S);return S&&j||K(),rg(j)},[]),b=fe(()=>{const S=t.current;S||K();const j=nu(S);t.current=null,j&&(f.cancel(),j.removeAttribute(k1.contextId),j.removeEventListener("scroll",m,A1(S.scrollOptions)))},[m,f]),w=fe(S=>{const j=t.current;j||K();const k=nu(j);k||K(),k.scrollTop+=S.y,k.scrollLeft+=S.x},[]),y=Ne(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:x,dragStopped:b,scroll:w}),[b,p,x,w]),g=Ne(()=>({uniqueId:s,descriptor:l,callbacks:y}),[y,l,s]);on(()=>(c.current=g.descriptor,r.droppable.register(g),()=>{t.current&&b(),r.droppable.unregister(g)}),[y,l,b,g,i,r.droppable]),on(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),on(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function mm(){}const I1={width:0,height:0,margin:ZW},G9=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?I1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Y9=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=G9({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ha.placeholder:null}},Q9=e=>{const t=v.useRef(null),n=fe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:r,onClose:i,contextId:o}=e,[l,c]=v.useState(e.animate==="open");v.useEffect(()=>l?s!=="open"?(n(),c(!1),mm):t.current?mm:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):mm,[s,l,n]);const u=fe(h=>{h.propertyName==="height"&&(r(),s==="close"&&i())},[s,i,r]),d=Y9({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return re.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})};var K9=re.memo(Q9);class X9 extends re.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const J9=e=>{const t=v.useContext(Dh);t||K();const{contextId:n,isMovementAllowed:s}=t,r=v.useRef(null),i=v.useRef(null),{children:o,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:x,updateViewportMaxScroll:b,getContainerForClone:w}=e,y=fe(()=>r.current,[]),g=fe((M=null)=>{r.current=M},[]);fe(()=>i.current,[]);const S=fe((M=null)=>{i.current=M},[]),j=fe(()=>{s()&&b({maxScroll:Fk()})},[s,b]);q9({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:y});const k=Ne(()=>re.createElement(X9,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:M,data:L,animate:z})=>re.createElement(K9,{placeholder:L,onClose:M,innerRef:S,animate:z,contextId:n,onTransitionEnd:j})),[n,j,e.placeholder,e.shouldAnimatePlaceholder,S]),_=Ne(()=>({innerRef:g,placeholder:k,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,k,g]),E=x?x.dragging.draggableId:null,N=Ne(()=>({droppableId:l,type:c,isUsingCloneFor:E}),[l,E,c]);function D(){if(!x)return null;const{dragging:M,render:L}=x,z=re.createElement(t_,{draggableId:M.draggableId,index:M.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(H,B)=>L(H,B,M));return FT.createPortal(z,w())}return re.createElement(Iy.Provider,{value:N},o(_,p),D())};function Z9(){return document.body||K(),document.body}const R1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Z9},i_=e=>{let t={...e},n;for(n in R1)e[n]===void 0&&(t={...t,[n]:R1[n]});return t},pm=(e,t)=>e===t.droppable.type,O1=(e,t)=>t.draggables[e.draggable.id],eG=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=mt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=mt((i,o,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:p}}if(!o)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,o)=>{const l=i_(o),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(Al(i)){const f=i.critical;if(!pm(u,f))return t;const m=O1(f,i.dimensions),p=rn(i.impact)===c;return s(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!pm(u,f.critical))return t;const m=O1(f.critical,i.dimensions);return s(c,d,Zk(f.result)===c,rn(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!pm(u,f.critical))return t;const m=rn(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),x=f.critical.droppable.id===c;return m?p?e:t:x?e:t}return t}},tG={updateViewportMaxScroll:d7},nG=sk(eG,tG,(e,t,n)=>({...i_(n),...e,...t}),{context:Py,areStatePropsEqual:Jk})(J9),gm=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function sG(){const{user:e}=Ae(),[t,n]=v.useState([]),[s,r]=v.useState(!0),[i,o]=v.useState(!1),[l,c]=v.useState(""),[u,d]=v.useState(null),[h,f]=v.useState({show:!1,title:""}),m=Qt();v.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0),d(null);const E=await gh();!E||E.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${E.length} deals`),n(E),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(E){console.error("Error fetching deals:",E),d(E instanceof Error?E:new Error("Unknown error fetching deals"));let N="Please check your network connection and ensure the server is running.";E instanceof Error&&(N+=` Error details: ${E.message}`),b("Error fetching deals","error",N),n([])}finally{r(!1)}},x=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},b=(E,N="success",D)=>{f({show:!0,title:E,variant:N,description:D}),setTimeout(()=>f({show:!1,title:""}),5e3)},w=async E=>{var T,I;if(o(!1),console.log("Drag end event:",E),!E.destination){console.log("No destination provided in drag result");return}if(E.source.droppableId===E.destination.droppableId&&E.source.index===E.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:N,destination:D,source:M}=E,L=D.droppableId,z=M.droppableId;console.log(`Moving deal ${N} from ${z} to ${L}`);const H=`Moving deal to ${((T=gm.find(O=>O.id===L))==null?void 0:T.label)||L}...`;b(H,"warning");const B=[...t];if(!t.find(O=>O.id===N)){console.error(`Deal with ID ${N} not found`),b("Error updating deal","error","Could not find the deal in the current view");return}const R=t.map(O=>O.id===N?{...O,stage:L}:O);n(R);try{console.log(`Calling API to update deal ${N} to stage ${L}`);const O=await d2(N,L);if(O){console.log("Deal updated successfully:",O),n(ce=>ce.map(ne=>ne.id===N?O:ne));const V=((I=gm.find(ce=>ce.id===L))==null?void 0:I.label)||L,Y=O.title||"Deal";b(`Deal moved to ${V}`,"success",`"${Y}" has been successfully moved to the ${V} stage.`),L==="won"&&g(O)}else console.error("Server returned null for updated deal"),n(B),b("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(O){console.error("Error updating deal stage:",O),n(B);const V=O instanceof Error?`Error: ${O.message}`:"An unknown error occurred while updating the deal";b("Error updating deal stage","error",V)}},y=()=>{o(!0),h.show&&f({show:!1,title:""})},g=E=>{b("Schedule a job for this deal","success",`You've won the deal with ${E.customer.name}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${E.id}&action=schedule&customerName=${encodeURIComponent(E.customer.name)}`)},1500)},S=t.filter(E=>{var M;const N=E.title||"",D=((M=E.customer)==null?void 0:M.name)||"";return N.toLowerCase().includes(l.toLowerCase())||D.toLowerCase().includes(l.toLowerCase())}),j=E=>S.filter(N=>N.stage===E),k=E=>j(E).reduce((N,D)=>N+D.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const _=({deal:E,provided:N,snapshot:D})=>{var M,L;return a.jsxs("div",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,style:{...N.draggableProps.style,opacity:D.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${D.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:E.title||`Deal for ${((M=E.customer)==null?void 0:M.name)||"Customer"}`}),a.jsx("div",{className:"flex space-x-1",children:a.jsx(U,{variant:"ghost",size:"icon-sm",className:"h-6 w-6",children:a.jsx(lA,{className:"h-3 w-3"})})})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[a.jsx(zl,{className:"h-3 w-3 mr-1"}),a.jsx("span",{className:"line-clamp-1",children:((L=E.customer)==null?void 0:L.name)||"Unknown Customer"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"font-medium text-xs",children:be(E.value)}),a.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[E.probability||50,"%"]})]})]})};return a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&a.jsx(ot,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:p,disabled:s,className:"flex items-center gap-1",children:[a.jsx(Be,{className:`w-4 h-4 ${s?"animate-spin":""}`}),s?"Loading...":"Refresh"]}),a.jsxs("div",{className:"relative flex-grow",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Dr,{className:"w-4 h-4 text-gray-500"})}),a.jsx(Ce,{type:"text",placeholder:"Search deals...",value:l,onChange:E=>c(E.target.value),className:"pl-10 w-full"})]})]})]}),u&&!s&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx(Bl,{className:"h-5 w-5 text-red-500 mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{children:u.message})}),a.jsxs("div",{className:"mt-4",children:[a.jsx(U,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),a.jsx(U,{onClick:x,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),s?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Be,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):a.jsx(g9,{onDragEnd:w,onDragStart:y,children:a.jsx("div",{className:"overflow-x-auto pb-6",children:a.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:gm.map(E=>a.jsxs("div",{className:`rounded-lg ${E.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[a.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:E.label}),a.jsx(xl,{variant:"outline",className:"text-xs",children:be(k(E.id))})]}),a.jsx(nG,{droppableId:E.id,children:N=>a.jsxs("div",{ref:N.innerRef,...N.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[j(E.id).map((D,M)=>a.jsx(R9,{draggableId:D.id,index:M,isDragDisabled:i&&D.stage!==E.id,children:(L,z)=>a.jsx(_,{deal:D,provided:L,snapshot:z})},D.id)),N.placeholder,j(E.id).length===0&&!i&&a.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},E.id))})})})]})}const rG=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function iG(){const{id:e}=rx(),t=Qt(),{user:n}=Ae(),[s,r]=v.useState(null),[i,o]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState([]),[h,f]=v.useState(!1),[m,p]=v.useState({show:!1,title:""});v.useEffect(()=>{e&&x()},[e]),v.useEffect(()=>{s!=null&&s.leadId&&b(s.leadId)},[s]);const x=async()=>{try{o(!0);const g=await El(e);if(!g){y("Deal not found","error"),t("/deals");return}r(g)}catch(g){console.error("Error fetching deal:",g),y("Error fetching deal details","error")}finally{o(!1)}},b=async g=>{try{f(!0);const S=await yd(g);c(S);const j=[];S.forEach(k=>{if(k.selectedMachines&&k.selectedMachines.length>0)k.selectedMachines.forEach(_=>{j.some(E=>E.id===_.id)||j.push(_)});else if(k.selectedEquipment&&k.selectedEquipment.id){const _={id:k.selectedEquipment.id,machineType:k.machineType,equipmentId:k.selectedEquipment.equipmentId,name:k.selectedEquipment.name,baseRates:k.selectedEquipment.baseRates,baseRate:k.selectedEquipment.baseRates[k.orderType],runningCostPerKm:k.runningCostPerKm,quantity:1};j.some(E=>E.id===_.id)||j.push(_)}}),d(j)}catch(S){console.error("Error fetching deal equipment:",S)}finally{f(!1)}},w=async g=>{if(s)try{const S=await d2(s.id,g);S&&(r(S),y(`Deal stage updated to ${g}`,"success"))}catch(S){console.error("Error updating deal stage:",S),y("Error updating deal stage","error")}},y=(g,S="success")=>{p({show:!0,title:g,variant:S}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(Be,{className:"h-8 w-8 animate-spin text-primary-600"})}):s?a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsxs(U,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[a.jsx(ox,{size:16,className:"sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),a.jsx("div",{className:"sm:hidden",children:a.jsx(te,{children:a.jsx(le,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Value"}),a.jsx("div",{className:"text-base font-semibold text-gray-900",children:be(s.value)})]}),a.jsx(U,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${s.id}`),children:"Create Quotation"})]})})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[a.jsxs(te,{children:[a.jsx(de,{className:"p-4 sm:p-6",children:a.jsx(he,{children:"Deal Information"})}),a.jsxs(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:s.title}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),a.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:be(s.value)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),a.jsx("div",{className:"mt-1",children:a.jsx(je,{value:s.stage,onChange:g=>w(g),options:rG,className:"w-full sm:w-[200px] text-sm"})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),a.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),a.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.expectedCloseDate).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),a.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[s.probability,"%"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),a.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:s.assignedTo})]})]})]})]}),a.jsxs(te,{children:[a.jsx(de,{className:"p-4 sm:p-6",children:a.jsx(he,{children:"Notes"})}),a.jsx(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:a.jsx("p",{className:"text-sm text-gray-600",children:s.notes||"No notes available."})})]})]}),a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs(te,{children:[a.jsx(de,{className:"p-4 sm:p-6",children:a.jsx(he,{children:"Customer Information"})}),a.jsxs(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_N,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm sm:text-base",children:s.customer.name}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:s.customer.designation})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-gray-600 break-words",children:s.customer.company})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(NN,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.customer.email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(CN,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-gray-600",children:s.customer.phone})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(th,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-gray-600",children:s.customer.address})]})]})]}),"          ",a.jsxs(te,{className:"mb-4",children:[a.jsx(de,{className:"p-4 sm:p-6",children:a.jsxs(he,{className:"flex items-center",children:[a.jsx(cA,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),a.jsx(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?a.jsx("div",{className:"flex justify-center items-center py-4",children:a.jsx(Be,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?a.jsx("div",{className:"space-y-2",children:u.map(g=>a.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm",children:g.name}),a.jsx("p",{className:"text-xs text-gray-500",children:g.machineType})]}),a.jsx("div",{className:"text-sm text-right",children:a.jsxs("span",{className:"font-medium",children:["Qty: ",g.quantity]})})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[a.jsxs("div",{children:["Base Rate: ",be(g.baseRate)]}),a.jsxs("div",{children:["Cost/Km: ",be(g.runningCostPerKm)]})]})]},g.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),a.jsxs(te,{className:"hidden sm:block",children:[a.jsx(de,{className:"p-4 sm:p-6",children:a.jsx(he,{children:"Actions"})}),a.jsx(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:a.jsx(U,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${s.id}`),children:"Create Quotation"})})]})]})]}),m.show&&a.jsx(ot,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const xm=e=>"text"in e&&"level"in e,ym=e=>"text"in e&&!("level"in e),ha=e=>"rows"in e,oG=e=>"items"in e,fa=e=>"url"in e;function aG(){return[{key:"company_name",category:"Company"},{key:"company_address",category:"Company"},{key:"company_email",category:"Company"},{key:"company_phone",category:"Company"},{key:"customer_name",category:"Customer"},{key:"customer_email",category:"Customer"},{key:"customer_phone",category:"Customer"},{key:"quotation_number",category:"Quotation"},{key:"quotation_date",category:"Quotation"},{key:"quotation_valid_until",category:"Quotation"},{key:"quotation_total",category:"Quotation"}]}function L1(e){switch(e){case"header":return{text:"New Header",level:2,align:"left"};case"text":return{text:"New text block",align:"left"};case"table":return{rows:[{cells:[{content:"Header 1",header:!0},{content:"Header 2",header:!0}]},{cells:[{content:"Cell 1"},{content:"Cell 2"}]}],styles:{borders:!0,striped:!1}};case"list":return{items:["Item 1","Item 2"],type:"unordered"};case"image":return{url:"",alt:"",align:"center"};case"divider":return{text:""};default:return{text:"",align:"left"}}}function o_({template:e,onChange:t}){const[n,s]=v.useState(()=>{if(e.content)try{const S=new DOMParser().parseFromString(e.content,"text/html");return Array.from(S.body.children).map((j,k)=>{const _=j.tagName.toLowerCase()==="img"?"image":j.tagName.toLowerCase()==="h1"||j.tagName.toLowerCase()==="h2"||j.tagName.toLowerCase()==="h3"?"header":j.tagName.toLowerCase()==="table"?"table":j.tagName.toLowerCase()==="ul"||j.tagName.toLowerCase()==="ol"?"list":"text";return{id:`${_}-${k}`,type:_,content:L1(_)}})}catch(g){return console.error("Error parsing template content:",g),[]}return[]}),[r,i]=v.useState(null),o=v.useRef(null),[l,c]=v.useState(null),[u,d]=v.useState(null),h=v.useRef(null),[f,m]=v.useState(null);v.useEffect(()=>{const g=j=>{if(l&&r){const k=n.find(z=>z.id===r);if(!k||!fa(k.content))return;let _=l.origWidth,E=l.origHeight,N=l.origX,D=l.origY;const M=j.clientX-l.startX,L=j.clientY-l.startY;switch(l.direction){case"se":_=Math.max(30,l.origWidth+M),E=Math.max(30,l.origHeight+L);break;case"sw":_=Math.max(30,l.origWidth-M),E=Math.max(30,l.origHeight+L),N=l.origX+M;break;case"ne":_=Math.max(30,l.origWidth+M),E=Math.max(30,l.origHeight-L),D=l.origY+L;break;case"nw":_=Math.max(30,l.origWidth-M),E=Math.max(30,l.origHeight-L),N=l.origX+M,D=l.origY+L;break}x(r,{...k.content,width:`${_}px`,height:`${E}px`,x:N,y:D})}else if(u&&r){const k=n.find(N=>N.id===r);if(!k||!fa(k.content))return;const _=j.clientX-u.startX,E=j.clientY-u.startY;x(r,{...k.content,x:u.origX+_,y:u.origY+E})}},S=()=>{c(null),d(null)};return(l||u)&&(document.addEventListener("mousemove",g),document.addEventListener("mouseup",S)),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",S)}},[l,u,r,n]),v.useEffect(()=>{l||u?(document.body.style.cursor=l?"nwse-resize":"move",document.body.style.userSelect="none"):(document.body.style.cursor="",document.body.style.userSelect="")},[l,u]);const p=g=>{const S={id:`${g}-${Date.now()}`,type:g,content:L1(g)};s([...n,S]),i(S.id)},x=(g,S)=>{s(n.map(j=>j.id===g?{...j,content:S}:j))},b=async(g,S)=>{try{const j=new FileReader;j.onload=k=>{var N;const _=(N=k.target)==null?void 0:N.result,E=n.find(D=>D.id===S);E&&fa(E.content)&&x(S,{...E.content,url:_})},j.readAsDataURL(g)}catch(j){console.error("Error uploading image:",j)}},w=g=>{switch(g.type){case"header":return xm(g.content)?a.jsxs("div",{style:{textAlign:g.content.align},children:[g.content.level===1&&a.jsx("h1",{className:"text-3xl font-bold",children:g.content.text}),g.content.level===2&&a.jsx("h2",{className:"text-2xl font-semibold",children:g.content.text}),g.content.level===3&&a.jsx("h3",{className:"text-xl font-medium",children:g.content.text})]}):null;case"table":return ha(g.content)?a.jsx("table",{className:"w-full border-collapse",children:a.jsx("tbody",{children:g.content.rows.map((S,j)=>a.jsx("tr",{children:S.cells.map((k,_)=>a.jsx("td",{className:`border p-2 ${k.header?"font-semibold bg-gray-50":""}`,children:k.content},_))},j))})}):null;case"text":{if(!ym(g.content))return null;const S=g.content.x??100,j=g.content.y??200,k=g.content.width?parseInt(g.content.width):250,_=g.content.height?parseInt(g.content.height):40,E=f===g.id;return a.jsxs("div",{className:`absolute group border-2 ${r===g.id?"border-blue-400":"border-transparent"} bg-white`,style:{left:S,top:j,width:k,height:_,zIndex:r===g.id?10:1,cursor:u?"move":"pointer",display:"flex",alignItems:"center",justifyContent:g.content.align||"left",pointerEvents:"auto"},onMouseDown:N=>{!E&&r===g.id&&d({startX:N.clientX,startY:N.clientY,origX:S,origY:j})},onClick:N=>{N.stopPropagation(),i(g.id)},onDoubleClick:()=>m(g.id),children:[E?a.jsx("input",{autoFocus:!0,className:"w-full h-full border-none outline-none bg-transparent text-base",value:g.content.text,onChange:N=>x(g.id,{...g.content,text:N.target.value}),onBlur:()=>m(null),onKeyDown:N=>{N.key==="Enter"&&m(null)},style:{pointerEvents:"auto"}}):a.jsx("span",{className:"w-full h-full px-2 text-base select-none",style:{textAlign:g.content.align||"left",whiteSpace:"pre-wrap",wordBreak:"break-word",pointerEvents:"none"},children:g.content.text||"Double-click to edit text"}),r===g.id&&a.jsx(a.Fragment,{children:["nw","ne","sw","se"].map(N=>a.jsx("div",{className:`absolute w-3 h-3 bg-blue-500 rounded-full cursor-nwse-resize ${N==="nw"?"left-0 top-0 -translate-x-1/2 -translate-y-1/2":N==="ne"?"right-0 top-0 translate-x-1/2 -translate-y-1/2":N==="sw"?"left-0 bottom-0 -translate-x-1/2 translate-y-1/2":"right-0 bottom-0 translate-x-1/2 translate-y-1/2"}`,onMouseDown:D=>{D.stopPropagation(),c({direction:N,startX:D.clientX,startY:D.clientY,origWidth:k,origHeight:_,origX:S,origY:j})}},N))})]})}case"image":{if(!fa(g.content))return null;const S=g.content.x??100,j=g.content.y??100,k=g.content.width?parseInt(g.content.width):200,_=g.content.height?parseInt(g.content.height):120;return a.jsxs("div",{className:`absolute group border-2 ${r===g.id?"border-blue-400":"border-transparent"}`,style:{left:S,top:j,width:k,height:_,zIndex:r===g.id?10:1,cursor:u?"move":"pointer"},onMouseDown:E=>{r===g.id&&E.target===E.currentTarget&&d({startX:E.clientX,startY:E.clientY,origX:S,origY:j})},onClick:E=>{E.stopPropagation(),i(g.id)},children:[a.jsx("img",{ref:r===g.id?h:null,src:g.content.url,alt:g.content.alt,style:{width:"100%",height:"100%",objectFit:"contain",display:"block",pointerEvents:"none"},draggable:!1}),r===g.id&&a.jsx(a.Fragment,{children:["nw","ne","sw","se"].map(E=>a.jsx("div",{className:`absolute w-3 h-3 bg-blue-500 rounded-full cursor-nwse-resize ${E==="nw"?"left-0 top-0 -translate-x-1/2 -translate-y-1/2":E==="ne"?"right-0 top-0 translate-x-1/2 -translate-y-1/2":E==="sw"?"left-0 bottom-0 -translate-x-1/2 translate-y-1/2":"right-0 bottom-0 translate-x-1/2 translate-y-1/2"}`,onMouseDown:N=>{N.stopPropagation(),c({direction:E,startX:N.clientX,startY:N.clientY,origWidth:k,origHeight:_,origX:S,origY:j})}},E))})]})}default:return null}},y=g=>{if(!g)return null;switch(g.type){case"header":return xm(g.content)?a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ce,{label:"Text",value:g.content.text,onChange:S=>x(g.id,{...g.content,text:S.target.value})}),a.jsx(je,{label:"Level",value:g.content.level.toString(),options:[{value:"1",label:"Heading 1 (Large)"},{value:"2",label:"Heading 2 (Medium)"},{value:"3",label:"Heading 3 (Small)"}],onChange:S=>x(g.id,{...g.content,level:parseInt(S,10)})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),a.jsx(U,{variant:g.content.align==="left"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"left"}),children:a.jsx(Cc,{className:"h-4 w-4"})}),a.jsx(U,{variant:g.content.align==="center"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"center"}),children:a.jsx(af,{className:"h-4 w-4"})}),a.jsx(U,{variant:g.content.align==="right"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"right"}),children:a.jsx(lf,{className:"h-4 w-4"})})]})]}):null;case"text":return ym(g.content)?a.jsxs("div",{className:"space-y-4",children:[a.jsx(Vn,{label:"Text",value:g.content.text,onChange:S=>x(g.id,{...g.content,text:S.target.value})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),a.jsx(U,{variant:g.content.align==="left"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"left"}),children:a.jsx(Cc,{className:"h-4 w-4"})}),a.jsx(U,{variant:g.content.align==="center"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"center"}),children:a.jsx(af,{className:"h-4 w-4"})}),a.jsx(U,{variant:g.content.align==="right"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"right"}),children:a.jsx(lf,{className:"h-4 w-4"})})]})]}):null;case"table":return ha(g.content)?a.jsxs("div",{className:"space-y-4",children:[g.content.rows.map((S,j)=>a.jsxs("div",{className:"flex gap-2",children:[S.cells.map((k,_)=>a.jsx(Ce,{value:k.content,onChange:E=>{if(!ha(g.content))return;const N=[...g.content.rows];N[j].cells[_].content=E.target.value,x(g.id,{...g.content,rows:N})}},_)),a.jsx(U,{variant:"outline",onClick:()=>{if(!ha(g.content))return;const k=[...g.content.rows];k[j].cells.push({content:""}),x(g.id,{...g.content,rows:k})},children:a.jsx(ss,{className:"h-4 w-4"})})]},j)),a.jsx(U,{variant:"outline",onClick:()=>{if(!ha(g.content))return;const S=[...g.content.rows];S.push({cells:[{content:""}]}),x(g.id,{...g.content,rows:S})},children:"Add Row"})]}):null;case"list":return oG(g.content)?a.jsx("div",{className:"space-y-4"}):null;case"image":return fa(g.content)?a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:o,onChange:S=>{var k;const j=(k=S.target.files)==null?void 0:k[0];j&&b(j,g.id)}}),a.jsxs(U,{variant:"outline",onClick:()=>{var S;return(S=o.current)==null?void 0:S.click()},className:"w-full",children:[a.jsx(kN,{className:"w-4 h-4 mr-2"}),"Upload Image"]}),a.jsx(Ce,{label:"Image URL",value:g.content.url,onChange:S=>x(g.id,{...g.content,url:S.target.value}),placeholder:"Enter image URL or upload an image"}),a.jsx(Ce,{label:"Alt Text",value:g.content.alt,onChange:S=>x(g.id,{...g.content,alt:S.target.value}),placeholder:"Enter image description"}),a.jsx(Ce,{label:"Width",value:g.content.width||"",onChange:S=>x(g.id,{...g.content,width:S.target.value}),placeholder:"e.g., 100%, 300px"}),a.jsx(Ce,{label:"Height",value:g.content.height||"",onChange:S=>x(g.id,{...g.content,height:S.target.value}),placeholder:"e.g., 100%, 300px"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),a.jsx(U,{variant:g.content.align==="left"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"left"}),children:a.jsx(Cc,{className:"h-4 w-4"})}),a.jsx(U,{variant:g.content.align==="center"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"center"}),children:a.jsx(af,{className:"h-4 w-4"})}),a.jsx(U,{variant:g.content.align==="right"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"right"}),children:a.jsx(lf,{className:"h-4 w-4"})})]})]}):null;default:return null}};return a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsxs("div",{className:"col-span-5 space-y-4",children:[a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Add Elements"})}),a.jsx(le,{children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>p("header"),className:"flex items-center gap-2",children:[a.jsx(mA,{className:"h-4 w-4"}),"Header"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>p("text"),className:"flex items-center gap-2",children:[a.jsx(Cc,{className:"h-4 w-4"}),"Text"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>p("table"),className:"flex items-center gap-2",children:[a.jsx(fA,{className:"h-4 w-4"}),"Table"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>p("list"),className:"flex items-center gap-2",children:[a.jsx(rA,{className:"h-4 w-4"}),"List"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:()=>p("image"),className:"flex items-center gap-2",children:[a.jsx(SN,{className:"h-4 w-4"}),"Image"]})]})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Properties"})}),a.jsx(le,{children:r?y(n.find(g=>g.id===r)):a.jsx("p",{className:"text-gray-500 text-sm",children:"Select an element to edit its properties"})})]}),a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Available Placeholders"})}),a.jsx(le,{children:a.jsx("div",{className:"grid grid-cols-2 gap-2",children:aG().map(g=>a.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>{if(r){const S=n.find(j=>j.id===r);S&&(xm(S.content)||ym(S.content))&&x(S.id,{...S.content,text:`{{${g.key}}}`})}},children:`{{${g.key}}}`},g.key))})})]})]}),a.jsx("div",{className:"col-span-7",children:a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Template Preview"})}),a.jsx(le,{children:a.jsx("div",{className:"min-h-[600px] p-6 border rounded-lg relative",style:{position:"relative"},children:n.map((g,S)=>w(g))})})]})})]})}const lG={company_name:"ASP Cranes",company_address:"123 Industrial Park, Mumbai, India",company_phone:"+91 98765 43210",company_email:"info@aspcranes.com",company_gst:"GST123456789",customer_name:"John Smith",customer_designation:"Project Manager",customer_company:"ABC Construction Ltd.",customer_address:"456 Construction Site, Delhi, India",customer_phone:"+91 98765 12345",customer_email:"john@abcconstruction.com",quotation_number:"QT-2024-001",valid_until:"2024-04-30",quotation_date:"2024-03-31",order_type:"Rental",equipment_name:"Mobile Crane - 50T",project_duration:"30 days",working_hours:"8 hours per day",shift_type:"Single Shift",base_rate:"25,000 per day",subtotal:"750,000",gst_amount:"135,000",total_amount:"885,000",payment_terms:"50% advance, 50% within 30 days",validity_period:"30 days"};function cG({isOpen:e,onClose:t,template:n}){if(!e)return null;if(!n||!n.content)return a.jsx(dt,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:a.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-500",children:[a.jsx(Be,{className:"w-8 h-8 animate-spin mb-4"}),a.jsx("p",{children:"Loading template..."})]})});try{const s=Object.entries(lG).reduce((r,[i,o])=>{const l=new RegExp(`{{${i}}}`,"g");return r.replace(l,o)},n.content);return a.jsx(dt,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:a.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s}})})}catch(s){return console.error("Error rendering template preview:",s),a.jsx(dt,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:a.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-red-500",children:[a.jsx("p",{children:"Error rendering template preview"}),a.jsx("p",{className:"text-sm mt-2",children:"Please check the template content for any issues."})]})})}}function uG({template:e,onEdit:t,onDelete:n,onPreview:s,onSetDefault:r}){return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex items-center",children:[a.jsx(En,{className:"h-5 w-5 text-gray-700 mr-3"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 flex-1",children:e.name})]}),a.jsxs("div",{className:"p-4 flex-1",children:[e.description&&a.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-3",children:e.description}),e.isDefault&&a.jsx("span",{className:"inline-block bg-blue-50 text-blue-700 text-xs font-medium px-2.5 py-0.5 rounded-md",children:"Default Template"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex flex-wrap gap-2",children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:t,className:"flex items-center",children:[a.jsx(Eo,{className:"h-4 w-4 mr-1.5"}),"Edit"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:s,className:"flex items-center",children:[a.jsx(wN,{className:"h-4 w-4 mr-1.5"}),"Preview"]}),!e.isDefault&&a.jsxs(a.Fragment,{children:[a.jsxs(U,{variant:"outline",size:"sm",onClick:r,className:"flex items-center",children:[a.jsx(eA,{className:"h-4 w-4 mr-1.5"}),"Set Default"]}),a.jsxs(U,{variant:"outline",size:"sm",onClick:n,className:"flex items-center text-red-500 hover:text-red-700 hover:border-red-300",children:[a.jsx(ko,{className:"h-4 w-4 mr-1.5"}),"Delete"]})]})]})]})}function a_(){const[e,t]=v.useState(null);return{toast:e,showToast:r=>{t(r),r.duration!==0&&setTimeout(()=>{t(null)},r.duration||3e3)},hideToast:()=>{t(null)}}}const F1={id:"default",name:"Default Quotation Template",description:"Standard quotation template with company branding and placeholders",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
    <div style="text-align: center; margin-bottom: 15px;">
      <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
      <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
      <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
    </div>

    <table style="width: 100%; margin-bottom: 15px; font-size: 13px;">
      <tr>
        <td style="width: 50%; vertical-align: top;">
          <strong style="color: #42526E;">From:</strong><br>
          <strong>{{company_name}}</strong><br>
          {{company_address}}<br>
          Phone: {{company_phone}}<br>
          Email: {{company_email}}<br>
          GST: {{company_gst}}
        </td>
        <td style="width: 50%; vertical-align: top;">
          <strong style="color: #42526E;">To:</strong><br>
          <strong>{{customer_name}}</strong><br>
          {{customer_designation}}<br>
          {{customer_company}}<br>
          {{customer_address}}<br>
          Phone: {{customer_phone}}<br>
          Email: {{customer_email}}
        </td>
      </tr>
    </table>

    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 13px;">
      <tr>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Quotation ID:</strong> {{quotation_number}}</td>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Valid Until:</strong> {{valid_until}}</td>
      </tr>
      <tr>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Date:</strong> {{quotation_date}}</td>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Order Type:</strong> {{order_type}}</td>
      </tr>
    </table>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Equipment & Project Details</strong>
      <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA; width: 160px;"><strong>Equipment</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{equipment_name}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Duration</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{project_duration}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Working Hours</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{working_hours}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Shift Type</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{shift_type}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Base Rate</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{base_rate}}</td>
        </tr>
      </table>
    </div>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Pricing Summary</strong>
      <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">Subtotal</td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; text-align: right; width: 160px;">{{subtotal}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;">GST (18%)</td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA; text-align: right;">{{gst_amount}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #0052CC; background: #0052CC; color: white; font-weight: 600;">Total Amount</td>
          <td style="padding: 6px 10px; border: 1px solid #0052CC; background: #0052CC; color: white; text-align: right; font-weight: 600;">{{total_amount}}</td>
        </tr>
      </table>
    </div>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Terms & Conditions</strong>
      <ol style="margin: 0; padding-left: 20px; font-size: 13px; color: #42526E;">
        <li style="margin-bottom: 2px;">Payment Terms: {{payment_terms}}</li>
        <li style="margin-bottom: 2px;">GST @18% will be charged extra as applicable</li>
        <li style="margin-bottom: 2px;">Mobilization charges will be billed extra based on distance</li>
        <li style="margin-bottom: 2px;">Working hours: Standard 8-hour shift. Additional hours will be charged extra</li>
        <li style="margin-bottom: 2px;">Operator & fuel will be provided by ASP Cranes</li>
        <li style="margin-bottom: 2px;">Client to provide necessary permissions & clearances</li>
        <li style="margin-bottom: 2px;">Rate validity: {{validity_period}}</li>
        <li style="margin-bottom: 2px;">Insurance coverage as per standard terms</li>
      </ol>
    </div>

    <div style="text-align: center; margin-top: 20px; color: #42526E; font-size: 13px;">
      <p style="margin: 0 0 2px 0;"><strong>Thank you for your business!</strong></p>
      <p style="margin: 0;">For any queries, please contact us at {{company_phone}} or email at {{company_email}}</p>
    </div>
  </div>`,isDefault:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};function dG(){const{user:e,isAuthenticated:t}=Ae(),n=Qt(),{showToast:s}=a_(),[r,i]=v.useState([]),[o,l]=v.useState(!1),[c,u]=v.useState(!1),[d,h]=v.useState("new"),[f,m]=v.useState(!0),[p,x]=v.useState(null),[b,w]=v.useState({show:!1,title:""}),[y,g]=v.useState(!1),[S,j]=v.useState(!1),[k,_]=v.useState({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1}),[E,N]=v.useState(null);v.useEffect(()=>{if(!t||!e){n("/login");return}if(e.role!=="admin"&&e.role!=="sales_agent"){n("/dashboard");return}D()},[t,e,n]);const D=async()=>{try{m(!0),x(null);const T=await dy();i(T)}catch(T){console.error("Error loading templates:",T),x("Failed to load templates"),s({title:"Error",message:"Failed to load templates",type:"error"})}finally{m(!1)}},M=()=>{n("/templates/new")},L=T=>{n(`/templates/edit/${T.id}`)},z=T=>{N(T),u(!0)},H=async T=>{try{await Q2(T),s({title:"Success",message:"Template deleted successfully",type:"success"}),D()}catch(I){console.error("Error deleting template:",I),s({title:"Error",message:"Failed to delete template",type:"error"})}},B=async T=>{T.preventDefault(),m(!0);try{if(k.id)await ai(k.id,{...k,updatedAt:new Date().toISOString()}),w({show:!0,title:"Template updated successfully",variant:"success"});else{const I=new Date().toISOString(),O={...k,id:`template-${Date.now()}`,createdAt:I,updatedAt:I};await hy(O),w({show:!0,title:"Template created successfully",variant:"success"})}A(),D()}catch(I){console.error("Error saving template:",I),w({show:!0,title:"Failed to save template",variant:"error"})}finally{m(!1)}},A=()=>{g(!1),l(!1),_({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1}),j(!1)},R=async T=>{try{const I=r.find(O=>O.id===T);I&&(await Promise.all(r.filter(O=>O.isDefault).map(O=>ai(O.id,{...O,isDefault:!1}))),await ai(T,{...I,isDefault:!0}),s({title:"Success",message:"Default template updated successfully",type:"success"}),D())}catch(I){console.error("Error setting default template:",I),s({title:"Error",message:"Failed to set default template",type:"error"})}};return f?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(Be,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[a.jsx("div",{className:"text-red-500",children:p}),a.jsx(U,{onClick:D,children:"Retry"})]}):!t||!e||e.role!=="admin"&&e.role!=="sales_agent"?null:r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[a.jsx("div",{className:"text-gray-500",children:"No templates found"}),a.jsx(U,{onClick:M,children:"Create Template"})]}):a.jsxs("div",{className:"container px-4 sm:px-6 py-6 sm:py-8 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Templates"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage quotation templates for your business"})]}),a.jsxs(U,{onClick:()=>{g(!0),h("new"),_({id:"",name:"",description:"",content:F1.content,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1})},className:"w-full sm:w-auto flex items-center gap-2",children:[a.jsx(ss,{className:"w-4 h-4"}),"Create Template"]})]}),f?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(Be,{className:"w-10 h-10 text-primary-500 animate-spin"})}):p?a.jsx(te,{children:a.jsxs(le,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(En,{className:"w-12 h-12 text-red-500 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load templates"}),a.jsx("p",{className:"text-gray-500 mb-4 text-center",children:"There was an error loading your templates."}),a.jsx(U,{onClick:D,children:"Try Again"})]})}):r.length===0?a.jsx(te,{children:a.jsxs(le,{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(En,{className:"w-12 h-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),a.jsx("p",{className:"text-gray-500 mb-4 text-center",children:"Create your first quotation template to get started."}),a.jsxs(U,{onClick:()=>{g(!0),h("new"),_({id:"",name:"",description:"",content:F1.content,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1})},children:[a.jsx(ss,{className:"w-4 h-4 mr-2"}),"Create Template"]})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(T=>a.jsx(uG,{template:T,onEdit:()=>L(T),onDelete:()=>H(T.id),onPreview:()=>z(T),onSetDefault:()=>R(T.id)},T.id))}),a.jsx(dt,{isOpen:y||o,onClose:A,title:o?"Edit Template":"Create Template",size:"full",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ce,{label:"Template Name",value:k.name,onChange:T=>_({...k,name:T.target.value})}),a.jsxs("div",{className:"flex gap-2 sm:gap-4 mb-4",children:[a.jsx(U,{variant:S?"default":"outline",onClick:()=>j(!0),size:"sm",className:"flex-1 sm:flex-none",children:"Visual Editor"}),a.jsx(U,{variant:S?"outline":"default",onClick:()=>j(!1),size:"sm",className:"flex-1 sm:flex-none",children:"HTML Editor"})]}),S?a.jsx(o_,{template:k,onChange:T=>_(T)}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(Vn,{label:"HTML Content",value:k.content,onChange:T=>_({...k,content:T.target.value}),rows:20}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["Use double curly braces for placeholders, e.g. ","{{customer_name}}"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 mt-6",children:[a.jsx(U,{variant:"outline",onClick:A,className:"w-full sm:w-auto",children:"Cancel"}),a.jsx(U,{onClick:B,disabled:f,className:"w-full sm:w-auto",children:f?"Saving...":"Save Template"})]})]})}),a.jsx(cG,{isOpen:c,onClose:()=>u(!1),template:E}),b.show&&a.jsx(ot,{title:b.title,variant:b.variant,isVisible:b.show,onClose:()=>w({show:!1,title:""})})]})}function hG(){const e=Qt(),{id:t}=rx(),{showToast:n}=a_(),[s,r]=v.useState(!1),[i,o]=v.useState({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"",isDefault:!1});v.useEffect(()=>{t&&l(t)},[t]);const l=async u=>{try{const d=await Y2(u);d&&o(d)}catch(d){console.error("Error loading template:",d),n({title:"Error",message:"Failed to load template",type:"error"}),e("/templates")}},c=async()=>{r(!0);try{if(i.id)await ai(i.id,{...i,updatedAt:new Date().toISOString()}),n({title:"Success",message:"Template updated successfully",type:"success"});else{const u={...i,id:`template-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await hy(u),n({title:"Success",message:"Template created successfully",type:"success"})}e("/templates")}catch(u){console.error("Error saving template:",u),n({title:"Error",message:"Failed to save template",type:"error"})}finally{r(!1)}};return a.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(U,{variant:"ghost",onClick:()=>e("/templates"),children:[a.jsx(ox,{className:"h-4 w-4 mr-2"}),"Back to Templates"]}),a.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Template":"Create Template"})]}),a.jsxs(U,{onClick:c,disabled:s,children:[a.jsx(yi,{className:"h-4 w-4 mr-2"}),s?"Saving...":"Save Template"]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsx("div",{className:"col-span-12",children:a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Template Details"})}),a.jsx(le,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ce,{label:"Template Name",value:i.name,onChange:u=>o({...i,name:u.target.value}),placeholder:"Enter template name"}),a.jsx(Ce,{label:"Description",value:i.description||"",onChange:u=>o({...i,description:u.target.value}),placeholder:"Enter template description"})]})})]})}),a.jsx("div",{className:"col-span-12",children:a.jsxs(te,{children:[a.jsx(de,{children:a.jsx(he,{children:"Template Editor"})}),a.jsx(le,{children:a.jsx(o_,{template:i,onChange:u=>o(u)})})]})})]})]})}const fG=async()=>{typeof window<"u"?console.log("Browser environment detected, using API for authentication"):await ns(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])};(async function(){console.log("Initializing bcrypt..."),await fG(),console.log("Bcrypt initialized")})();const mG="560d29644771b5a0ef1d3dcdfc7c44e93bf29e037b77f8c23b94257887219eb815d751d4f6703423b1463dc0a0c33bf365ecc7b16518c65d74e6342435e12978";async function pG(e){try{const t=TM(e,mG);if(typeof window<"u"){const{authApi:s}=await ns(async()=>{const{authApi:i}=await import("./apiClient-OXv-SloA.js");return{authApi:i}},[]);return(await s.verifyToken(e)).user}const n=await Re.oneOrNone("SELECT * FROM users WHERE uid = $1",[t.userId]);return n?{id:n.uid,name:n.display_name||n.email.split("@")[0],email:n.email,role:n.role}:null}catch(t){return console.error("Token verification error:",t),null}}const l_=async()=>{try{const e=localStorage.getItem("jwt-token");return e?await pG(e):null}catch{return localStorage.removeItem("jwt-token"),null}},gG=({children:e})=>{const{isAuthenticated:t,user:n,setUser:s}=Ae();return v.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await l_();i&&s(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,s]),a.jsx(a.Fragment,{children:e})};function Nt({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:s,isAuthenticated:r,setUser:i}=Ae(),[o,l]=v.useState(!0);return v.useEffect(()=>{(async()=>{try{const u=await l_();u?(!s||s.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[s,i]),o?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(` Protected Route Check - Authenticated: ${r}, User: ${(s==null?void 0:s.id)||"none"}`),!r||!s?(console.log(` Route protection failed - redirecting to ${t}`),a.jsx(yn,{to:t,replace:!0})):n&&!n.includes(s.role)?(console.log(` Role protection failed - user has ${s.role} but needs one of [${n.join(",")}]`),a.jsx(yn,{to:"/dashboard",replace:!0})):(console.log(" Route protection passed - rendering protected content"),e?a.jsx(a.Fragment,{children:e}):a.jsx(aN,{})))}function xG(){const{user:e,isAuthenticated:t}=Ae();if(!t||!e)return a.jsx(yn,{to:"/login",replace:!0});switch(e.role){case"admin":return a.jsx(G6,{});case"sales_agent":return a.jsx(sB,{});case"operations_manager":return a.jsx(rB,{});case"operator":return a.jsx(oB,{});default:return a.jsx(yn,{to:"/login",replace:!0})}}function yG(){if(window.location.pathname==="/"||window.location.pathname==="")return a.jsx(yn,{to:"/login",replace:!0});const t=a.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),a.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return a.jsx(v.Suspense,{fallback:t,children:a.jsxs(DP,{children:[a.jsx(Ve,{path:"/blank-check.html",element:a.jsx(yn,{to:"/blank-check.html",replace:!0})}),a.jsx(Ve,{path:"/api-test.html",element:a.jsx(yn,{to:"/api-test.html",replace:!0})}),a.jsx(Ve,{path:"/login",element:a.jsx(wA,{})}),a.jsx(Ve,{element:a.jsx(Nt,{}),children:a.jsxs(Ve,{path:"/",element:a.jsx(HL,{}),children:[a.jsx(Ve,{index:!0,element:a.jsx(yn,{to:"/dashboard",replace:!0})}),a.jsx(Ve,{path:"dashboard",element:a.jsx(xG,{})}),a.jsx(Ve,{path:"admin/users",element:a.jsx(Nt,{allowedRoles:["admin"],children:a.jsx(N8,{})})}),a.jsx(Ve,{path:"admin/config",element:a.jsx(Nt,{allowedRoles:["admin"],children:a.jsx(A8,{})})}),a.jsx(Ve,{path:"admin/equipment",element:a.jsx(Nt,{allowedRoles:["admin","operations_manager"],children:a.jsx(l8,{})})}),a.jsx(Ve,{path:"admin/services",element:a.jsx(Nt,{allowedRoles:["admin","operations_manager"],children:a.jsx(g8,{})})}),a.jsx(Ve,{path:"admin/quotation-templates",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent"],children:a.jsx(dG,{})})}),a.jsx(Ve,{path:"admin/quotation-templates/edit/:id",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent"],children:a.jsx(hG,{})})}),a.jsx(Ve,{path:"leads",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(yV,{})})}),a.jsx(Ve,{path:"customers",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(I8,{})})}),a.jsx(Ve,{path:"deals",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(sG,{})})}),a.jsx(Ve,{path:"deals/:id",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(iG,{})})}),a.jsx(Ve,{path:"quotations",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(TV,{})})}),a.jsx(Ve,{path:"quotations/create",element:a.jsx(Nt,{allowedRoles:["admin","sales_agent"],children:a.jsx($V,{})})}),a.jsx(Ve,{path:"jobs",element:a.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:a.jsx(XU,{})})}),a.jsx(Ve,{path:"site-assessments",element:a.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:a.jsx(s8,{})})}),a.jsx(Ve,{path:"job-summary",element:a.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:a.jsx(i8,{})})}),a.jsx(Ve,{path:"*",element:a.jsx(yn,{to:"/dashboard",replace:!0})})]})})]})})}function vG(){return a.jsx(LP,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(gG,{children:a.jsx(UP,{children:a.jsx(yG,{})})})})}const bG=async()=>{try{await OM(),console.log(" Auth store hydrated successfully")}catch(n){console.warn(" Auth store hydration failed:",n)}const e=document.getElementById("root");if(!e){console.error(" Failed to find root element");return}Xj(e).render(a.jsx(v.StrictMode,{children:a.jsx(v.Suspense,{fallback:a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),children:a.jsx(vG,{})})})),console.log(" Application rendered successfully")};bG().catch(e=>{console.error(" Application initialization error:",e)});export{C6 as p};
