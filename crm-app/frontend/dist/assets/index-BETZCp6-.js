var hD=Object.defineProperty;var fD=(e,t,n)=>t in e?hD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ue=(e,t,n)=>fD(e,typeof t!="symbol"?t+"":t,n);function mD(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Kp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N1={exports:{}},jd={},S1={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pl=Symbol.for("react.element"),pD=Symbol.for("react.portal"),gD=Symbol.for("react.fragment"),xD=Symbol.for("react.strict_mode"),yD=Symbol.for("react.profiler"),vD=Symbol.for("react.provider"),bD=Symbol.for("react.context"),wD=Symbol.for("react.forward_ref"),jD=Symbol.for("react.suspense"),ND=Symbol.for("react.memo"),SD=Symbol.for("react.lazy"),Cy=Symbol.iterator;function CD(e){return e===null||typeof e!="object"?null:(e=Cy&&e[Cy]||e["@@iterator"],typeof e=="function"?e:null)}var C1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k1=Object.assign,E1={};function ya(e,t,n){this.props=e,this.context=t,this.refs=E1,this.updater=n||C1}ya.prototype.isReactComponent={};ya.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ya.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D1(){}D1.prototype=ya.prototype;function Xp(e,t,n){this.props=e,this.context=t,this.refs=E1,this.updater=n||C1}var Jp=Xp.prototype=new D1;Jp.constructor=Xp;k1(Jp,ya.prototype);Jp.isPureReactComponent=!0;var ky=Array.isArray,T1=Object.prototype.hasOwnProperty,Zp={current:null},P1={key:!0,ref:!0,__self:!0,__source:!0};function _1(e,t,n){var s,r={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)T1.call(t,s)&&!P1.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Pl,type:e,key:i,ref:a,props:r,_owner:Zp.current}}function kD(e,t){return{$$typeof:Pl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pl}function ED(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ey=/\/+/g;function yh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ED(""+e.key):t.toString(36)}function Wc(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Pl:case pD:a=!0}}if(a)return a=e,r=r(a),e=s===""?"."+yh(a,0):s,ky(r)?(n="",e!=null&&(n=e.replace(Ey,"$&/")+"/"),Wc(r,t,n,"",function(u){return u})):r!=null&&(eg(r)&&(r=kD(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ey,"$&/")+"/")+e)),t.push(r)),1;if(a=0,s=s===""?".":s+":",ky(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+yh(i,l);a+=Wc(i,t,n,c,r)}else if(c=CD(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+yh(i,l++),a+=Wc(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Xl(e,t,n){if(e==null)return e;var s=[],r=0;return Wc(e,s,"","",function(i){return t.call(n,i,r++)}),s}function DD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $t={current:null},Hc={transition:null},TD={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Hc,ReactCurrentOwner:Zp};function M1(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Xl,forEach:function(e,t,n){Xl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xl(e,function(){t++}),t},toArray:function(e){return Xl(e,function(t){return t})||[]},only:function(e){if(!eg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=ya;we.Fragment=gD;we.Profiler=yD;we.PureComponent=Xp;we.StrictMode=xD;we.Suspense=jD;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;we.act=M1;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=k1({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Zp.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T1.call(t,c)&&!P1.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Pl,type:e.type,key:r,ref:i,props:s,_owner:a}};we.createContext=function(e){return e={$$typeof:bD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vD,_context:e},e.Consumer=e};we.createElement=_1;we.createFactory=function(e){var t=_1.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:wD,render:e}};we.isValidElement=eg;we.lazy=function(e){return{$$typeof:SD,_payload:{_status:-1,_result:e},_init:DD}};we.memo=function(e,t){return{$$typeof:ND,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=Hc.transition;Hc.transition={};try{e()}finally{Hc.transition=t}};we.unstable_act=M1;we.useCallback=function(e,t){return $t.current.useCallback(e,t)};we.useContext=function(e){return $t.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return $t.current.useDeferredValue(e)};we.useEffect=function(e,t){return $t.current.useEffect(e,t)};we.useId=function(){return $t.current.useId()};we.useImperativeHandle=function(e,t,n){return $t.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return $t.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return $t.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return $t.current.useMemo(e,t)};we.useReducer=function(e,t,n){return $t.current.useReducer(e,t,n)};we.useRef=function(e){return $t.current.useRef(e)};we.useState=function(e){return $t.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return $t.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return $t.current.useTransition()};we.version="18.3.1";S1.exports=we;var y=S1.exports;const ne=Kp(y),ta=mD({__proto__:null,default:ne},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=y,_D=Symbol.for("react.element"),MD=Symbol.for("react.fragment"),AD=Object.prototype.hasOwnProperty,RD=PD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ID={key:!0,ref:!0,__self:!0,__source:!0};function A1(e,t,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)AD.call(t,s)&&!ID.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:_D,type:e,key:i,ref:a,props:r,_owner:RD.current}}jd.Fragment=MD;jd.jsx=A1;jd.jsxs=A1;N1.exports=jd;var o=N1.exports,R1={exports:{}},un={},I1={exports:{}},O1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,R){var H=T.length;T.push(R);e:for(;0<H;){var G=H-1>>>1,Z=T[G];if(0<r(Z,R))T[G]=R,T[H]=Z,H=G;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var R=T[0],H=T.pop();if(H!==R){T[0]=H;e:for(var G=0,Z=T.length,ie=Z>>>1;G<ie;){var ce=2*(G+1)-1,O=T[ce],V=ce+1,D=T[V];if(0>r(O,H))V<Z&&0>r(D,O)?(T[G]=D,T[V]=H,G=V):(T[G]=O,T[ce]=H,G=ce);else if(V<Z&&0>r(D,H))T[G]=D,T[V]=H,G=V;else break e}}return R}function r(T,R){var H=T.sortIndex-R.sortIndex;return H!==0?H:T.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var R=n(u);R!==null;){if(R.callback===null)s(u);else if(R.startTime<=T)s(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=n(u)}}function j(T){if(x=!1,g(T),!p)if(n(c)!==null)p=!0,q(S);else{var R=n(u);R!==null&&I(j,R.startTime-T)}}function S(T,R){p=!1,x&&(x=!1,w(C),C=-1),m=!0;var H=f;try{for(g(R),h=n(c);h!==null&&(!(h.expirationTime>R)||T&&!L());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var Z=G(h.expirationTime<=R);R=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&s(c),g(R)}else s(c);h=n(c)}if(h!==null)var ie=!0;else{var ce=n(u);ce!==null&&I(j,ce.startTime-R),ie=!1}return ie}finally{h=null,f=H,m=!1}}var k=!1,N=null,C=-1,E=5,P=-1;function L(){return!(e.unstable_now()-P<E)}function F(){if(N!==null){var T=e.unstable_now();P=T;var R=!0;try{R=N(!0,T)}finally{R?$():(k=!1,N=null)}}else k=!1}var $;if(typeof v=="function")$=function(){v(F)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,B=A.port2;A.port1.onmessage=F,$=function(){B.postMessage(null)}}else $=function(){b(F,0)};function q(T){N=T,k||(k=!0,$())}function I(T,R){C=b(function(){T(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,q(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var H=f;f=R;try{return T()}finally{f=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var H=f;f=T;try{return R()}finally{f=H}},e.unstable_scheduleCallback=function(T,R,H){var G=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,T){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=H+Z,T={id:d++,callback:R,priorityLevel:T,startTime:H,expirationTime:Z,sortIndex:-1},H>G?(T.sortIndex=H,t(u,T),n(c)===null&&T===n(u)&&(x?(w(C),C=-1):x=!0,I(j,H-G))):(T.sortIndex=Z,t(c,T),p||m||(p=!0,q(S))),T},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(T){var R=f;return function(){var H=f;f=R;try{return T.apply(this,arguments)}finally{f=H}}}})(O1);I1.exports=O1;var OD=I1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD=y,on=OD;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L1=new Set,Uo={};function fi(e,t){na(e,t),na(e+"Capture",t)}function na(e,t){for(Uo[e]=t,e=0;e<t.length;e++)L1.add(t[e])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=Object.prototype.hasOwnProperty,FD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dy={},Ty={};function $D(e){return im.call(Ty,e)?!0:im.call(Dy,e)?!1:FD.test(e)?Ty[e]=!0:(Dy[e]=!0,!1)}function zD(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function BD(e,t,n,s){if(t===null||typeof t>"u"||zD(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zt(e,t,n,s,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jt[e]=new zt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jt[t]=new zt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jt[e]=new zt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jt[e]=new zt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jt[e]=new zt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jt[e]=new zt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jt[e]=new zt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jt[e]=new zt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jt[e]=new zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tg=/[\-:]([a-z])/g;function ng(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tg,ng);jt[t]=new zt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tg,ng);jt[t]=new zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tg,ng);jt[t]=new zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jt[e]=new zt(e,1,!1,e.toLowerCase(),null,!1,!1)});jt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jt[e]=new zt(e,1,!1,e.toLowerCase(),null,!0,!0)});function sg(e,t,n,s){var r=jt.hasOwnProperty(t)?jt[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(BD(t,n,r,s)&&(n=null),s||r===null?$D(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Ts=LD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),am=Symbol.for("react.profiler"),F1=Symbol.for("react.provider"),$1=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),lm=Symbol.for("react.suspense_list"),ag=Symbol.for("react.memo"),Bs=Symbol.for("react.lazy"),z1=Symbol.for("react.offscreen"),Py=Symbol.iterator;function Fa(e){return e===null||typeof e!="object"?null:(e=Py&&e[Py]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Object.assign,vh;function ho(e){if(vh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vh=t&&t[1]||""}return`
`+vh+e}var bh=!1;function wh(e,t){if(!e||bh)return"";bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{bh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ho(e):""}function VD(e){switch(e.tag){case 5:return ho(e.type);case 16:return ho("Lazy");case 13:return ho("Suspense");case 19:return ho("SuspenseList");case 0:case 2:case 15:return e=wh(e.type,!1),e;case 11:return e=wh(e.type.render,!1),e;case 1:return e=wh(e.type,!0),e;default:return""}}function cm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _i:return"Fragment";case Pi:return"Portal";case am:return"Profiler";case rg:return"StrictMode";case om:return"Suspense";case lm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $1:return(e.displayName||"Context")+".Consumer";case F1:return(e._context.displayName||"Context")+".Provider";case ig:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ag:return t=e.displayName||null,t!==null?t:cm(e.type)||"Memo";case Bs:t=e._payload,e=e._init;try{return cm(e(t))}catch{}}return null}function UD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(t);case 8:return t===rg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function WD(e){var t=B1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zl(e){e._valueTracker||(e._valueTracker=WD(e))}function V1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=B1(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function um(e,t){var n=t.checked;return Qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _y(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=gr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U1(e,t){t=t.checked,t!=null&&sg(e,"checked",t,!1)}function dm(e,t){U1(e,t);var n=gr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hm(e,t.type,n):t.hasOwnProperty("defaultValue")&&hm(e,t.type,gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function My(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hm(e,t,n){(t!=="number"||fu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fo=Array.isArray;function qi(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+gr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function fm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ay(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(fo(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gr(n)}}function W1(e,t){var n=gr(t.value),s=gr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Ry(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function H1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?H1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ec,q1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ec.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HD=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(e){HD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),So[t]=So[e]})});function G1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||So.hasOwnProperty(e)&&So[e]?(""+t).trim():t+"px"}function Y1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=G1(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var qD=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pm(e,t){if(t){if(qD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function gm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function og(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ym=null,Gi=null,Yi=null;function Iy(e){if(e=Al(e)){if(typeof ym!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Ed(t),ym(e.stateNode,e.type,t))}}function Q1(e){Gi?Yi?Yi.push(e):Yi=[e]:Gi=e}function K1(){if(Gi){var e=Gi,t=Yi;if(Yi=Gi=null,Iy(e),t)for(e=0;e<t.length;e++)Iy(t[e])}}function X1(e,t){return e(t)}function J1(){}var jh=!1;function Z1(e,t,n){if(jh)return e(t,n);jh=!0;try{return X1(e,t,n)}finally{jh=!1,(Gi!==null||Yi!==null)&&(J1(),K1())}}function Ho(e,t){var n=e.stateNode;if(n===null)return null;var s=Ed(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var vm=!1;if(Ss)try{var $a={};Object.defineProperty($a,"passive",{get:function(){vm=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{vm=!1}function GD(e,t,n,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Co=!1,mu=null,pu=!1,bm=null,YD={onError:function(e){Co=!0,mu=e}};function QD(e,t,n,s,r,i,a,l,c){Co=!1,mu=null,GD.apply(YD,arguments)}function KD(e,t,n,s,r,i,a,l,c){if(QD.apply(this,arguments),Co){if(Co){var u=mu;Co=!1,mu=null}else throw Error(K(198));pu||(pu=!0,bm=u)}}function mi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ej(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Oy(e){if(mi(e)!==e)throw Error(K(188))}function XD(e){var t=e.alternate;if(!t){if(t=mi(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Oy(r),e;if(i===s)return Oy(r),t;i=i.sibling}throw Error(K(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==s)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function tj(e){return e=XD(e),e!==null?nj(e):null}function nj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nj(e);if(t!==null)return t;e=e.sibling}return null}var sj=on.unstable_scheduleCallback,Ly=on.unstable_cancelCallback,JD=on.unstable_shouldYield,ZD=on.unstable_requestPaint,Je=on.unstable_now,eT=on.unstable_getCurrentPriorityLevel,lg=on.unstable_ImmediatePriority,rj=on.unstable_UserBlockingPriority,gu=on.unstable_NormalPriority,tT=on.unstable_LowPriority,ij=on.unstable_IdlePriority,Nd=null,Zn=null;function nT(e){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Nd,e,void 0,(e.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:iT,sT=Math.log,rT=Math.LN2;function iT(e){return e>>>=0,e===0?32:31-(sT(e)/rT|0)|0}var tc=64,nc=4194304;function mo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=mo(l):(i&=a,i!==0&&(s=mo(i)))}else a=n&~r,a!==0?s=mo(a):i!==0&&(s=mo(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Fn(t),r=1<<n,s|=e[n],t&=~r;return s}function aT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oT(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Fn(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=aT(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function wm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aj(){var e=tc;return tc<<=1,!(tc&4194240)&&(tc=64),e}function Nh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _l(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fn(t),e[t]=n}function lT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Fn(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function cg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Fn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var Ae=0;function oj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lj,ug,cj,uj,dj,jm=!1,sc=[],nr=null,sr=null,rr=null,qo=new Map,Go=new Map,Ws=[],cT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fy(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":qo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(t.pointerId)}}function za(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Al(t),t!==null&&ug(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function uT(e,t,n,s,r){switch(t){case"focusin":return nr=za(nr,e,t,n,s,r),!0;case"dragenter":return sr=za(sr,e,t,n,s,r),!0;case"mouseover":return rr=za(rr,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return qo.set(i,za(qo.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Go.set(i,za(Go.get(i)||null,e,t,n,s,r)),!0}return!1}function hj(e){var t=Hr(e.target);if(t!==null){var n=mi(t);if(n!==null){if(t=n.tag,t===13){if(t=ej(n),t!==null){e.blockedOn=t,dj(e.priority,function(){cj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);xm=s,n.target.dispatchEvent(s),xm=null}else return t=Al(n),t!==null&&ug(t),e.blockedOn=n,!1;t.shift()}return!0}function $y(e,t,n){qc(e)&&n.delete(t)}function dT(){jm=!1,nr!==null&&qc(nr)&&(nr=null),sr!==null&&qc(sr)&&(sr=null),rr!==null&&qc(rr)&&(rr=null),qo.forEach($y),Go.forEach($y)}function Ba(e,t){e.blockedOn===t&&(e.blockedOn=null,jm||(jm=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,dT)))}function Yo(e){function t(r){return Ba(r,e)}if(0<sc.length){Ba(sc[0],e);for(var n=1;n<sc.length;n++){var s=sc[n];s.blockedOn===e&&(s.blockedOn=null)}}for(nr!==null&&Ba(nr,e),sr!==null&&Ba(sr,e),rr!==null&&Ba(rr,e),qo.forEach(t),Go.forEach(t),n=0;n<Ws.length;n++)s=Ws[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)hj(n),n.blockedOn===null&&Ws.shift()}var Qi=Ts.ReactCurrentBatchConfig,yu=!0;function hT(e,t,n,s){var r=Ae,i=Qi.transition;Qi.transition=null;try{Ae=1,dg(e,t,n,s)}finally{Ae=r,Qi.transition=i}}function fT(e,t,n,s){var r=Ae,i=Qi.transition;Qi.transition=null;try{Ae=4,dg(e,t,n,s)}finally{Ae=r,Qi.transition=i}}function dg(e,t,n,s){if(yu){var r=Nm(e,t,n,s);if(r===null)Ah(e,t,s,vu,n),Fy(e,s);else if(uT(r,e,t,n,s))s.stopPropagation();else if(Fy(e,s),t&4&&-1<cT.indexOf(e)){for(;r!==null;){var i=Al(r);if(i!==null&&lj(i),i=Nm(e,t,n,s),i===null&&Ah(e,t,s,vu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Ah(e,t,s,null,n)}}var vu=null;function Nm(e,t,n,s){if(vu=null,e=og(s),e=Hr(e),e!==null)if(t=mi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ej(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vu=e,null}function fj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eT()){case lg:return 1;case rj:return 4;case gu:case tT:return 16;case ij:return 536870912;default:return 16}default:return 16}}var Ys=null,hg=null,Gc=null;function mj(){if(Gc)return Gc;var e,t=hg,n=t.length,s,r="value"in Ys?Ys.value:Ys.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(s=1;s<=a&&t[n-s]===r[i-s];s++);return Gc=r.slice(e,1<s?1-s:void 0)}function Yc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rc(){return!0}function zy(){return!1}function dn(e){function t(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rc:zy,this.isPropagationStopped=zy,this}return Qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rc)},persist:function(){},isPersistent:rc}),t}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=dn(va),Ml=Qe({},va,{view:0,detail:0}),mT=dn(Ml),Sh,Ch,Va,Sd=Qe({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Va&&(Va&&e.type==="mousemove"?(Sh=e.screenX-Va.screenX,Ch=e.screenY-Va.screenY):Ch=Sh=0,Va=e),Sh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),By=dn(Sd),pT=Qe({},Sd,{dataTransfer:0}),gT=dn(pT),xT=Qe({},Ml,{relatedTarget:0}),kh=dn(xT),yT=Qe({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),vT=dn(yT),bT=Qe({},va,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wT=dn(bT),jT=Qe({},va,{data:0}),Vy=dn(jT),NT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ST={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CT[e])?!!t[e]:!1}function mg(){return kT}var ET=Qe({},Ml,{key:function(e){if(e.key){var t=NT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ST[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mg,charCode:function(e){return e.type==="keypress"?Yc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),DT=dn(ET),TT=Qe({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uy=dn(TT),PT=Qe({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mg}),_T=dn(PT),MT=Qe({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=dn(MT),RT=Qe({},Sd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IT=dn(RT),OT=[9,13,27,32],pg=Ss&&"CompositionEvent"in window,ko=null;Ss&&"documentMode"in document&&(ko=document.documentMode);var LT=Ss&&"TextEvent"in window&&!ko,pj=Ss&&(!pg||ko&&8<ko&&11>=ko),Wy=" ",Hy=!1;function gj(e,t){switch(e){case"keyup":return OT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mi=!1;function FT(e,t){switch(e){case"compositionend":return xj(t);case"keypress":return t.which!==32?null:(Hy=!0,Wy);case"textInput":return e=t.data,e===Wy&&Hy?null:e;default:return null}}function $T(e,t){if(Mi)return e==="compositionend"||!pg&&gj(e,t)?(e=mj(),Gc=hg=Ys=null,Mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pj&&t.locale!=="ko"?null:t.data;default:return null}}var zT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zT[e.type]:t==="textarea"}function yj(e,t,n,s){Q1(s),t=bu(t,"onChange"),0<t.length&&(n=new fg("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Eo=null,Qo=null;function BT(e){Tj(e,0)}function Cd(e){var t=Ii(e);if(V1(t))return e}function VT(e,t){if(e==="change")return t}var vj=!1;if(Ss){var Eh;if(Ss){var Dh="oninput"in document;if(!Dh){var Gy=document.createElement("div");Gy.setAttribute("oninput","return;"),Dh=typeof Gy.oninput=="function"}Eh=Dh}else Eh=!1;vj=Eh&&(!document.documentMode||9<document.documentMode)}function Yy(){Eo&&(Eo.detachEvent("onpropertychange",bj),Qo=Eo=null)}function bj(e){if(e.propertyName==="value"&&Cd(Qo)){var t=[];yj(t,Qo,e,og(e)),Z1(BT,t)}}function UT(e,t,n){e==="focusin"?(Yy(),Eo=t,Qo=n,Eo.attachEvent("onpropertychange",bj)):e==="focusout"&&Yy()}function WT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cd(Qo)}function HT(e,t){if(e==="click")return Cd(t)}function qT(e,t){if(e==="input"||e==="change")return Cd(t)}function GT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bn=typeof Object.is=="function"?Object.is:GT;function Ko(e,t){if(Bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!im.call(t,r)||!Bn(e[r],t[r]))return!1}return!0}function Qy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ky(e,t){var n=Qy(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qy(n)}}function wj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jj(){for(var e=window,t=fu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fu(e.document)}return t}function gg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function YT(e){var t=jj(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wj(n.ownerDocument.documentElement,n)){if(s!==null&&gg(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=Ky(n,i);var a=Ky(n,s);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var QT=Ss&&"documentMode"in document&&11>=document.documentMode,Ai=null,Sm=null,Do=null,Cm=!1;function Xy(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cm||Ai==null||Ai!==fu(s)||(s=Ai,"selectionStart"in s&&gg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Do&&Ko(Do,s)||(Do=s,s=bu(Sm,"onSelect"),0<s.length&&(t=new fg("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ai)))}function ic(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ri={animationend:ic("Animation","AnimationEnd"),animationiteration:ic("Animation","AnimationIteration"),animationstart:ic("Animation","AnimationStart"),transitionend:ic("Transition","TransitionEnd")},Th={},Nj={};Ss&&(Nj=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function kd(e){if(Th[e])return Th[e];if(!Ri[e])return e;var t=Ri[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Nj)return Th[e]=t[n];return e}var Sj=kd("animationend"),Cj=kd("animationiteration"),kj=kd("animationstart"),Ej=kd("transitionend"),Dj=new Map,Jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Dj.set(e,t),fi(t,[e])}for(var Ph=0;Ph<Jy.length;Ph++){var _h=Jy[Ph],KT=_h.toLowerCase(),XT=_h[0].toUpperCase()+_h.slice(1);jr(KT,"on"+XT)}jr(Sj,"onAnimationEnd");jr(Cj,"onAnimationIteration");jr(kj,"onAnimationStart");jr("dblclick","onDoubleClick");jr("focusin","onFocus");jr("focusout","onBlur");jr(Ej,"onTransitionEnd");na("onMouseEnter",["mouseout","mouseover"]);na("onMouseLeave",["mouseout","mouseover"]);na("onPointerEnter",["pointerout","pointerover"]);na("onPointerLeave",["pointerout","pointerover"]);fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function Zy(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,KD(s,t,void 0,e),e.currentTarget=null}function Tj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Zy(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Zy(r,l,u),i=c}}}if(pu)throw e=bm,pu=!1,bm=null,e}function Oe(e,t){var n=t[Pm];n===void 0&&(n=t[Pm]=new Set);var s=e+"__bubble";n.has(s)||(Pj(t,e,2,!1),n.add(s))}function Mh(e,t,n){var s=0;t&&(s|=4),Pj(n,e,s,t)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Xo(e){if(!e[ac]){e[ac]=!0,L1.forEach(function(n){n!=="selectionchange"&&(JT.has(n)||Mh(n,!1,e),Mh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ac]||(t[ac]=!0,Mh("selectionchange",!1,t))}}function Pj(e,t,n,s){switch(fj(t)){case 1:var r=hT;break;case 4:r=fT;break;default:r=dg}n=r.bind(null,t,n,e),r=void 0,!vm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ah(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Hr(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}Z1(function(){var u=i,d=og(n),h=[];e:{var f=Dj.get(e);if(f!==void 0){var m=fg,p=e;switch(e){case"keypress":if(Yc(n)===0)break e;case"keydown":case"keyup":m=DT;break;case"focusin":p="focus",m=kh;break;case"focusout":p="blur",m=kh;break;case"beforeblur":case"afterblur":m=kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=By;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_T;break;case Sj:case Cj:case kj:m=vT;break;case Ej:m=AT;break;case"scroll":m=mT;break;case"wheel":m=IT;break;case"copy":case"cut":case"paste":m=wT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Uy}var x=(t&4)!==0,b=!x&&e==="scroll",w=x?f!==null?f+"Capture":null:f;x=[];for(var v=u,g;v!==null;){g=v;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,w!==null&&(j=Ho(v,w),j!=null&&x.push(Jo(v,j,g)))),b)break;v=v.return}0<x.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==xm&&(p=n.relatedTarget||n.fromElement)&&(Hr(p)||p[Cs]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Hr(p):null,p!==null&&(b=mi(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(x=By,j="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(x=Uy,j="onPointerLeave",w="onPointerEnter",v="pointer"),b=m==null?f:Ii(m),g=p==null?f:Ii(p),f=new x(j,v+"leave",m,n,d),f.target=b,f.relatedTarget=g,j=null,Hr(d)===u&&(x=new x(w,v+"enter",p,n,d),x.target=g,x.relatedTarget=b,j=x),b=j,m&&p)t:{for(x=m,w=p,v=0,g=x;g;g=Si(g))v++;for(g=0,j=w;j;j=Si(j))g++;for(;0<v-g;)x=Si(x),v--;for(;0<g-v;)w=Si(w),g--;for(;v--;){if(x===w||w!==null&&x===w.alternate)break t;x=Si(x),w=Si(w)}x=null}else x=null;m!==null&&e0(h,f,m,x,!1),p!==null&&b!==null&&e0(h,b,p,x,!0)}}e:{if(f=u?Ii(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=VT;else if(qy(f))if(vj)S=qT;else{S=WT;var k=UT}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=HT);if(S&&(S=S(e,u))){yj(h,S,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&hm(f,"number",f.value)}switch(k=u?Ii(u):window,e){case"focusin":(qy(k)||k.contentEditable==="true")&&(Ai=k,Sm=u,Do=null);break;case"focusout":Do=Sm=Ai=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,Xy(h,n,d);break;case"selectionchange":if(QT)break;case"keydown":case"keyup":Xy(h,n,d)}var N;if(pg)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mi?gj(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(pj&&n.locale!=="ko"&&(Mi||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mi&&(N=mj()):(Ys=d,hg="value"in Ys?Ys.value:Ys.textContent,Mi=!0)),k=bu(u,C),0<k.length&&(C=new Vy(C,e,null,n,d),h.push({event:C,listeners:k}),N?C.data=N:(N=xj(n),N!==null&&(C.data=N)))),(N=LT?FT(e,n):$T(e,n))&&(u=bu(u,"onBeforeInput"),0<u.length&&(d=new Vy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}Tj(h,t)})}function Jo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bu(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ho(e,n),i!=null&&s.unshift(Jo(e,i,r)),i=Ho(e,t),i!=null&&s.push(Jo(e,i,r))),e=e.return}return s}function Si(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function e0(e,t,n,s,r){for(var i=t._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Ho(n,i),c!=null&&a.unshift(Jo(n,c,l))):r||(c=Ho(n,i),c!=null&&a.push(Jo(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ZT=/\r\n?/g,eP=/\u0000|\uFFFD/g;function t0(e){return(typeof e=="string"?e:""+e).replace(ZT,`
`).replace(eP,"")}function oc(e,t,n){if(t=t0(t),t0(e)!==t&&n)throw Error(K(425))}function wu(){}var km=null,Em=null;function Dm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,tP=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,nP=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(e){return n0.resolve(null).then(e).catch(sP)}:Tm;function sP(e){setTimeout(function(){throw e})}function Rh(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),Yo(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Yo(t)}function ir(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function s0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ba=Math.random().toString(36).slice(2),Jn="__reactFiber$"+ba,Zo="__reactProps$"+ba,Cs="__reactContainer$"+ba,Pm="__reactEvents$"+ba,rP="__reactListeners$"+ba,iP="__reactHandles$"+ba;function Hr(e){var t=e[Jn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cs]||n[Jn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=s0(e);e!==null;){if(n=e[Jn])return n;e=s0(e)}return t}e=n,n=e.parentNode}return null}function Al(e){return e=e[Jn]||e[Cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ii(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Ed(e){return e[Zo]||null}var _m=[],Oi=-1;function Nr(e){return{current:e}}function $e(e){0>Oi||(e.current=_m[Oi],_m[Oi]=null,Oi--)}function Re(e,t){Oi++,_m[Oi]=e.current,e.current=t}var xr={},_t=Nr(xr),Ht=Nr(!1),ri=xr;function sa(e,t){var n=e.type.contextTypes;if(!n)return xr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function qt(e){return e=e.childContextTypes,e!=null}function ju(){$e(Ht),$e(_t)}function r0(e,t,n){if(_t.current!==xr)throw Error(K(168));Re(_t,t),Re(Ht,n)}function _j(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(K(108,UD(e)||"Unknown",r));return Qe({},n,s)}function Nu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xr,ri=_t.current,Re(_t,e),Re(Ht,Ht.current),!0}function i0(e,t,n){var s=e.stateNode;if(!s)throw Error(K(169));n?(e=_j(e,t,ri),s.__reactInternalMemoizedMergedChildContext=e,$e(Ht),$e(_t),Re(_t,e)):$e(Ht),Re(Ht,n)}var hs=null,Dd=!1,Ih=!1;function Mj(e){hs===null?hs=[e]:hs.push(e)}function aP(e){Dd=!0,Mj(e)}function Sr(){if(!Ih&&hs!==null){Ih=!0;var e=0,t=Ae;try{var n=hs;for(Ae=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}hs=null,Dd=!1}catch(r){throw hs!==null&&(hs=hs.slice(e+1)),sj(lg,Sr),r}finally{Ae=t,Ih=!1}}return null}var Li=[],Fi=0,Su=null,Cu=0,xn=[],yn=0,ii=null,ms=1,ps="";function Rr(e,t){Li[Fi++]=Cu,Li[Fi++]=Su,Su=e,Cu=t}function Aj(e,t,n){xn[yn++]=ms,xn[yn++]=ps,xn[yn++]=ii,ii=e;var s=ms;e=ps;var r=32-Fn(s)-1;s&=~(1<<r),n+=1;var i=32-Fn(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,ms=1<<32-Fn(t)+r|n<<r|s,ps=i+e}else ms=1<<i|n<<r|s,ps=e}function xg(e){e.return!==null&&(Rr(e,1),Aj(e,1,0))}function yg(e){for(;e===Su;)Su=Li[--Fi],Li[Fi]=null,Cu=Li[--Fi],Li[Fi]=null;for(;e===ii;)ii=xn[--yn],xn[yn]=null,ps=xn[--yn],xn[yn]=null,ms=xn[--yn],xn[yn]=null}var nn=null,en=null,Ve=!1,Rn=null;function Rj(e,t){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function a0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nn=e,en=ir(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nn=e,en=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ii!==null?{id:ms,overflow:ps}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nn=e,en=null,!0):!1;default:return!1}}function Mm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Am(e){if(Ve){var t=en;if(t){var n=t;if(!a0(e,t)){if(Mm(e))throw Error(K(418));t=ir(n.nextSibling);var s=nn;t&&a0(e,t)?Rj(s,n):(e.flags=e.flags&-4097|2,Ve=!1,nn=e)}}else{if(Mm(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ve=!1,nn=e}}}function o0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nn=e}function lc(e){if(e!==nn)return!1;if(!Ve)return o0(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dm(e.type,e.memoizedProps)),t&&(t=en)){if(Mm(e))throw Ij(),Error(K(418));for(;t;)Rj(e,t),t=ir(t.nextSibling)}if(o0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){en=ir(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}en=null}}else en=nn?ir(e.stateNode.nextSibling):null;return!0}function Ij(){for(var e=en;e;)e=ir(e.nextSibling)}function ra(){en=nn=null,Ve=!1}function vg(e){Rn===null?Rn=[e]:Rn.push(e)}var oP=Ts.ReactCurrentBatchConfig;function Ua(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var s=n.stateNode}if(!s)throw Error(K(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function cc(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function l0(e){var t=e._init;return t(e._payload)}function Oj(e){function t(w,v){if(e){var g=w.deletions;g===null?(w.deletions=[v],w.flags|=16):g.push(v)}}function n(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function s(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function r(w,v){return w=cr(w,v),w.index=0,w.sibling=null,w}function i(w,v,g){return w.index=g,e?(g=w.alternate,g!==null?(g=g.index,g<v?(w.flags|=2,v):g):(w.flags|=2,v)):(w.flags|=1048576,v)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,v,g,j){return v===null||v.tag!==6?(v=Vh(g,w.mode,j),v.return=w,v):(v=r(v,g),v.return=w,v)}function c(w,v,g,j){var S=g.type;return S===_i?d(w,v,g.props.children,j,g.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Bs&&l0(S)===v.type)?(j=r(v,g.props),j.ref=Ua(w,v,g),j.return=w,j):(j=tu(g.type,g.key,g.props,null,w.mode,j),j.ref=Ua(w,v,g),j.return=w,j)}function u(w,v,g,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==g.containerInfo||v.stateNode.implementation!==g.implementation?(v=Uh(g,w.mode,j),v.return=w,v):(v=r(v,g.children||[]),v.return=w,v)}function d(w,v,g,j,S){return v===null||v.tag!==7?(v=Jr(g,w.mode,j,S),v.return=w,v):(v=r(v,g),v.return=w,v)}function h(w,v,g){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Vh(""+v,w.mode,g),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jl:return g=tu(v.type,v.key,v.props,null,w.mode,g),g.ref=Ua(w,null,v),g.return=w,g;case Pi:return v=Uh(v,w.mode,g),v.return=w,v;case Bs:var j=v._init;return h(w,j(v._payload),g)}if(fo(v)||Fa(v))return v=Jr(v,w.mode,g,null),v.return=w,v;cc(w,v)}return null}function f(w,v,g,j){var S=v!==null?v.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:l(w,v,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Jl:return g.key===S?c(w,v,g,j):null;case Pi:return g.key===S?u(w,v,g,j):null;case Bs:return S=g._init,f(w,v,S(g._payload),j)}if(fo(g)||Fa(g))return S!==null?null:d(w,v,g,j,null);cc(w,g)}return null}function m(w,v,g,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(g)||null,l(v,w,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Jl:return w=w.get(j.key===null?g:j.key)||null,c(v,w,j,S);case Pi:return w=w.get(j.key===null?g:j.key)||null,u(v,w,j,S);case Bs:var k=j._init;return m(w,v,g,k(j._payload),S)}if(fo(j)||Fa(j))return w=w.get(g)||null,d(v,w,j,S,null);cc(v,j)}return null}function p(w,v,g,j){for(var S=null,k=null,N=v,C=v=0,E=null;N!==null&&C<g.length;C++){N.index>C?(E=N,N=null):E=N.sibling;var P=f(w,N,g[C],j);if(P===null){N===null&&(N=E);break}e&&N&&P.alternate===null&&t(w,N),v=i(P,v,C),k===null?S=P:k.sibling=P,k=P,N=E}if(C===g.length)return n(w,N),Ve&&Rr(w,C),S;if(N===null){for(;C<g.length;C++)N=h(w,g[C],j),N!==null&&(v=i(N,v,C),k===null?S=N:k.sibling=N,k=N);return Ve&&Rr(w,C),S}for(N=s(w,N);C<g.length;C++)E=m(N,w,C,g[C],j),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?C:E.key),v=i(E,v,C),k===null?S=E:k.sibling=E,k=E);return e&&N.forEach(function(L){return t(w,L)}),Ve&&Rr(w,C),S}function x(w,v,g,j){var S=Fa(g);if(typeof S!="function")throw Error(K(150));if(g=S.call(g),g==null)throw Error(K(151));for(var k=S=null,N=v,C=v=0,E=null,P=g.next();N!==null&&!P.done;C++,P=g.next()){N.index>C?(E=N,N=null):E=N.sibling;var L=f(w,N,P.value,j);if(L===null){N===null&&(N=E);break}e&&N&&L.alternate===null&&t(w,N),v=i(L,v,C),k===null?S=L:k.sibling=L,k=L,N=E}if(P.done)return n(w,N),Ve&&Rr(w,C),S;if(N===null){for(;!P.done;C++,P=g.next())P=h(w,P.value,j),P!==null&&(v=i(P,v,C),k===null?S=P:k.sibling=P,k=P);return Ve&&Rr(w,C),S}for(N=s(w,N);!P.done;C++,P=g.next())P=m(N,w,C,P.value,j),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?C:P.key),v=i(P,v,C),k===null?S=P:k.sibling=P,k=P);return e&&N.forEach(function(F){return t(w,F)}),Ve&&Rr(w,C),S}function b(w,v,g,j){if(typeof g=="object"&&g!==null&&g.type===_i&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Jl:e:{for(var S=g.key,k=v;k!==null;){if(k.key===S){if(S=g.type,S===_i){if(k.tag===7){n(w,k.sibling),v=r(k,g.props.children),v.return=w,w=v;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Bs&&l0(S)===k.type){n(w,k.sibling),v=r(k,g.props),v.ref=Ua(w,k,g),v.return=w,w=v;break e}n(w,k);break}else t(w,k);k=k.sibling}g.type===_i?(v=Jr(g.props.children,w.mode,j,g.key),v.return=w,w=v):(j=tu(g.type,g.key,g.props,null,w.mode,j),j.ref=Ua(w,v,g),j.return=w,w=j)}return a(w);case Pi:e:{for(k=g.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===g.containerInfo&&v.stateNode.implementation===g.implementation){n(w,v.sibling),v=r(v,g.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else t(w,v);v=v.sibling}v=Uh(g,w.mode,j),v.return=w,w=v}return a(w);case Bs:return k=g._init,b(w,v,k(g._payload),j)}if(fo(g))return p(w,v,g,j);if(Fa(g))return x(w,v,g,j);cc(w,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,v!==null&&v.tag===6?(n(w,v.sibling),v=r(v,g),v.return=w,w=v):(n(w,v),v=Vh(g,w.mode,j),v.return=w,w=v),a(w)):n(w,v)}return b}var ia=Oj(!0),Lj=Oj(!1),ku=Nr(null),Eu=null,$i=null,bg=null;function wg(){bg=$i=Eu=null}function jg(e){var t=ku.current;$e(ku),e._currentValue=t}function Rm(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ki(e,t){Eu=e,bg=$i=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wt=!0),e.firstContext=null)}function Cn(e){var t=e._currentValue;if(bg!==e)if(e={context:e,memoizedValue:t,next:null},$i===null){if(Eu===null)throw Error(K(308));$i=e,Eu.dependencies={lanes:0,firstContext:e}}else $i=$i.next=e;return t}var qr=null;function Ng(e){qr===null?qr=[e]:qr.push(e)}function Fj(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,Ng(t)):(n.next=r.next,r.next=n),t.interleaved=n,ks(e,s)}function ks(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vs=!1;function Sg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $j(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ar(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ce&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,ks(e,n)}return r=s.interleaved,r===null?(t.next=t,Ng(s)):(t.next=r.next,r.next=t),s.interleaved=t,ks(e,n)}function Qc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,cg(e,n)}}function c0(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Du(e,t,n,s){var r=e.updateQueue;Vs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(f=t,m=n,x.tag){case 1:if(p=x.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=x.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Qe({},h,f);break e;case 2:Vs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);oi|=a,e.lanes=a,e.memoizedState=h}}function u0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(K(191,r));r.call(s)}}}var Rl={},es=Nr(Rl),el=Nr(Rl),tl=Nr(Rl);function Gr(e){if(e===Rl)throw Error(K(174));return e}function Cg(e,t){switch(Re(tl,t),Re(el,e),Re(es,Rl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mm(t,e)}$e(es),Re(es,t)}function aa(){$e(es),$e(el),$e(tl)}function zj(e){Gr(tl.current);var t=Gr(es.current),n=mm(t,e.type);t!==n&&(Re(el,e),Re(es,n))}function kg(e){el.current===e&&($e(es),$e(el))}var He=Nr(0);function Tu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oh=[];function Eg(){for(var e=0;e<Oh.length;e++)Oh[e]._workInProgressVersionPrimary=null;Oh.length=0}var Kc=Ts.ReactCurrentDispatcher,Lh=Ts.ReactCurrentBatchConfig,ai=0,Ye=null,ut=null,mt=null,Pu=!1,To=!1,nl=0,lP=0;function Nt(){throw Error(K(321))}function Dg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bn(e[n],t[n]))return!1;return!0}function Tg(e,t,n,s,r,i){if(ai=i,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kc.current=e===null||e.memoizedState===null?hP:fP,e=n(s,r),To){i=0;do{if(To=!1,nl=0,25<=i)throw Error(K(301));i+=1,mt=ut=null,t.updateQueue=null,Kc.current=mP,e=n(s,r)}while(To)}if(Kc.current=_u,t=ut!==null&&ut.next!==null,ai=0,mt=ut=Ye=null,Pu=!1,t)throw Error(K(300));return e}function Pg(){var e=nl!==0;return nl=0,e}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=e:mt=mt.next=e,mt}function kn(){if(ut===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=mt===null?Ye.memoizedState:mt.next;if(t!==null)mt=t,ut=e;else{if(e===null)throw Error(K(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},mt===null?Ye.memoizedState=mt=e:mt=mt.next=e}return mt}function sl(e,t){return typeof t=="function"?t(e):t}function Fh(e){var t=kn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var s=ut,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ai&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,Ye.lanes|=d,oi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,Bn(s,t.memoizedState)||(Wt=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Ye.lanes|=i,oi|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $h(e){var t=kn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);Bn(i,t.memoizedState)||(Wt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Bj(){}function Vj(e,t){var n=Ye,s=kn(),r=t(),i=!Bn(s.memoizedState,r);if(i&&(s.memoizedState=r,Wt=!0),s=s.queue,_g(Hj.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,rl(9,Wj.bind(null,n,s,r,t),void 0,null),pt===null)throw Error(K(349));ai&30||Uj(n,t,r)}return r}function Uj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wj(e,t,n,s){t.value=n,t.getSnapshot=s,qj(t)&&Gj(e)}function Hj(e,t,n){return n(function(){qj(t)&&Gj(e)})}function qj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bn(e,n)}catch{return!0}}function Gj(e){var t=ks(e,1);t!==null&&$n(t,e,1,-1)}function d0(e){var t=Qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:e},t.queue=e,e=e.dispatch=dP.bind(null,Ye,e),[t.memoizedState,e]}function rl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Yj(){return kn().memoizedState}function Xc(e,t,n,s){var r=Qn();Ye.flags|=e,r.memoizedState=rl(1|t,n,void 0,s===void 0?null:s)}function Td(e,t,n,s){var r=kn();s=s===void 0?null:s;var i=void 0;if(ut!==null){var a=ut.memoizedState;if(i=a.destroy,s!==null&&Dg(s,a.deps)){r.memoizedState=rl(t,n,i,s);return}}Ye.flags|=e,r.memoizedState=rl(1|t,n,i,s)}function h0(e,t){return Xc(8390656,8,e,t)}function _g(e,t){return Td(2048,8,e,t)}function Qj(e,t){return Td(4,2,e,t)}function Kj(e,t){return Td(4,4,e,t)}function Xj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jj(e,t,n){return n=n!=null?n.concat([e]):null,Td(4,4,Xj.bind(null,t,e),n)}function Mg(){}function Zj(e,t){var n=kn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Dg(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function eN(e,t){var n=kn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Dg(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function tN(e,t,n){return ai&21?(Bn(n,t)||(n=aj(),Ye.lanes|=n,oi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wt=!0),e.memoizedState=n)}function cP(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var s=Lh.transition;Lh.transition={};try{e(!1),t()}finally{Ae=n,Lh.transition=s}}function nN(){return kn().memoizedState}function uP(e,t,n){var s=lr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},sN(e))rN(t,n);else if(n=Fj(e,t,n,s),n!==null){var r=Ft();$n(n,e,s,r),iN(n,t,s)}}function dP(e,t,n){var s=lr(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(sN(e))rN(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,Bn(l,a)){var c=t.interleaved;c===null?(r.next=r,Ng(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Fj(e,t,r,s),n!==null&&(r=Ft(),$n(n,e,s,r),iN(n,t,s))}}function sN(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function rN(e,t){To=Pu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function iN(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,cg(e,n)}}var _u={readContext:Cn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},hP={readContext:Cn,useCallback:function(e,t){return Qn().memoizedState=[e,t===void 0?null:t],e},useContext:Cn,useEffect:h0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Xc(4194308,4,Xj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xc(4,2,e,t)},useMemo:function(e,t){var n=Qn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Qn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=uP.bind(null,Ye,e),[s.memoizedState,e]},useRef:function(e){var t=Qn();return e={current:e},t.memoizedState=e},useState:d0,useDebugValue:Mg,useDeferredValue:function(e){return Qn().memoizedState=e},useTransition:function(){var e=d0(!1),t=e[0];return e=cP.bind(null,e[1]),Qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ye,r=Qn();if(Ve){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),pt===null)throw Error(K(349));ai&30||Uj(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,h0(Hj.bind(null,s,i,e),[e]),s.flags|=2048,rl(9,Wj.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Qn(),t=pt.identifierPrefix;if(Ve){var n=ps,s=ms;n=(s&~(1<<32-Fn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=nl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fP={readContext:Cn,useCallback:Zj,useContext:Cn,useEffect:_g,useImperativeHandle:Jj,useInsertionEffect:Qj,useLayoutEffect:Kj,useMemo:eN,useReducer:Fh,useRef:Yj,useState:function(){return Fh(sl)},useDebugValue:Mg,useDeferredValue:function(e){var t=kn();return tN(t,ut.memoizedState,e)},useTransition:function(){var e=Fh(sl)[0],t=kn().memoizedState;return[e,t]},useMutableSource:Bj,useSyncExternalStore:Vj,useId:nN,unstable_isNewReconciler:!1},mP={readContext:Cn,useCallback:Zj,useContext:Cn,useEffect:_g,useImperativeHandle:Jj,useInsertionEffect:Qj,useLayoutEffect:Kj,useMemo:eN,useReducer:$h,useRef:Yj,useState:function(){return $h(sl)},useDebugValue:Mg,useDeferredValue:function(e){var t=kn();return ut===null?t.memoizedState=e:tN(t,ut.memoizedState,e)},useTransition:function(){var e=$h(sl)[0],t=kn().memoizedState;return[e,t]},useMutableSource:Bj,useSyncExternalStore:Vj,useId:nN,unstable_isNewReconciler:!1};function Mn(e,t){if(e&&e.defaultProps){t=Qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Im(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pd={isMounted:function(e){return(e=e._reactInternals)?mi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ft(),r=lr(e),i=vs(s,r);i.payload=t,n!=null&&(i.callback=n),t=ar(e,i,r),t!==null&&($n(t,e,r,s),Qc(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ft(),r=lr(e),i=vs(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ar(e,i,r),t!==null&&($n(t,e,r,s),Qc(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ft(),s=lr(e),r=vs(n,s);r.tag=2,t!=null&&(r.callback=t),t=ar(e,r,s),t!==null&&($n(t,e,s,n),Qc(t,e,s))}};function f0(e,t,n,s,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ko(n,s)||!Ko(r,i):!0}function aN(e,t,n){var s=!1,r=xr,i=t.contextType;return typeof i=="object"&&i!==null?i=Cn(i):(r=qt(t)?ri:_t.current,s=t.contextTypes,i=(s=s!=null)?sa(e,r):xr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pd,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function m0(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Pd.enqueueReplaceState(t,t.state,null)}function Om(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Sg(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Cn(i):(i=qt(t)?ri:_t.current,r.context=sa(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Im(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Pd.enqueueReplaceState(r,r.state,null),Du(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function oa(e,t){try{var n="",s=t;do n+=VD(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function zh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pP=typeof WeakMap=="function"?WeakMap:Map;function oN(e,t,n){n=vs(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Au||(Au=!0,Gm=s),Lm(e,t)},n}function lN(e,t,n){n=vs(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){Lm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lm(e,t),typeof s!="function"&&(or===null?or=new Set([this]):or.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function p0(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new pP;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=TP.bind(null,e,t,n),t.then(e,e))}function g0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function x0(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vs(-1,1),t.tag=2,ar(n,t,1))),n.lanes|=1),e)}var gP=Ts.ReactCurrentOwner,Wt=!1;function Ot(e,t,n,s){t.child=e===null?Lj(t,null,n,s):ia(t,e.child,n,s)}function y0(e,t,n,s,r){n=n.render;var i=t.ref;return Ki(t,r),s=Tg(e,t,n,s,i,r),n=Pg(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Es(e,t,r)):(Ve&&n&&xg(t),t.flags|=1,Ot(e,t,s,r),t.child)}function v0(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!zg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,cN(e,t,i,s,r)):(e=tu(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(a,s)&&e.ref===t.ref)return Es(e,t,r)}return t.flags|=1,e=cr(i,s),e.ref=t.ref,e.return=t,t.child=e}function cN(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(Ko(i,s)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(Wt=!0);else return t.lanes=e.lanes,Es(e,t,r)}return Fm(e,t,n,s,r)}function uN(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Bi,Xt),Xt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(Bi,Xt),Xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Re(Bi,Xt),Xt|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Re(Bi,Xt),Xt|=s;return Ot(e,t,r,n),t.child}function dN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fm(e,t,n,s,r){var i=qt(n)?ri:_t.current;return i=sa(t,i),Ki(t,r),n=Tg(e,t,n,s,i,r),s=Pg(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Es(e,t,r)):(Ve&&s&&xg(t),t.flags|=1,Ot(e,t,n,r),t.child)}function b0(e,t,n,s,r){if(qt(n)){var i=!0;Nu(t)}else i=!1;if(Ki(t,r),t.stateNode===null)Jc(e,t),aN(t,n,s),Om(t,n,s,r),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Cn(u):(u=qt(n)?ri:_t.current,u=sa(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&m0(t,a,s,u),Vs=!1;var f=t.memoizedState;a.state=f,Du(t,s,a,r),c=t.memoizedState,l!==s||f!==c||Ht.current||Vs?(typeof d=="function"&&(Im(t,n,d,s),c=t.memoizedState),(l=Vs||f0(t,n,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,$j(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Mn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Cn(c):(c=qt(n)?ri:_t.current,c=sa(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&m0(t,a,s,c),Vs=!1,f=t.memoizedState,a.state=f,Du(t,s,a,r);var p=t.memoizedState;l!==h||f!==p||Ht.current||Vs?(typeof m=="function"&&(Im(t,n,m,s),p=t.memoizedState),(u=Vs||f0(t,n,u,s,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return $m(e,t,n,s,i,r)}function $m(e,t,n,s,r,i){dN(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return r&&i0(t,n,!1),Es(e,t,i);s=t.stateNode,gP.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=ia(t,e.child,null,i),t.child=ia(t,null,l,i)):Ot(e,t,l,i),t.memoizedState=s.state,r&&i0(t,n,!0),t.child}function hN(e){var t=e.stateNode;t.pendingContext?r0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r0(e,t.context,!1),Cg(e,t.containerInfo)}function w0(e,t,n,s,r){return ra(),vg(r),t.flags|=256,Ot(e,t,n,s),t.child}var zm={dehydrated:null,treeContext:null,retryLane:0};function Bm(e){return{baseLanes:e,cachePool:null,transitions:null}}function fN(e,t,n){var s=t.pendingProps,r=He.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Re(He,r&1),e===null)return Am(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ad(a,s,0,null),e=Jr(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Bm(n),t.memoizedState=zm,e):Ag(t,a));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return xP(e,t,a,s,l,r,n);if(i){i=s.fallback,a=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=cr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=cr(l,i):(i=Jr(i,a,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?Bm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=zm,s}return i=e.child,e=i.sibling,s=cr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ag(e,t){return t=Ad({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function uc(e,t,n,s){return s!==null&&vg(s),ia(t,e.child,null,n),e=Ag(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xP(e,t,n,s,r,i,a){if(n)return t.flags&256?(t.flags&=-257,s=zh(Error(K(422))),uc(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Ad({mode:"visible",children:s.children},r,0,null),i=Jr(i,r,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&ia(t,e.child,null,a),t.child.memoizedState=Bm(a),t.memoizedState=zm,i);if(!(t.mode&1))return uc(e,t,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(K(419)),s=zh(i,s,void 0),uc(e,t,a,s)}if(l=(a&e.childLanes)!==0,Wt||l){if(s=pt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ks(e,r),$n(s,e,r,-1))}return $g(),s=zh(Error(K(421))),uc(e,t,a,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=PP.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,en=ir(r.nextSibling),nn=t,Ve=!0,Rn=null,e!==null&&(xn[yn++]=ms,xn[yn++]=ps,xn[yn++]=ii,ms=e.id,ps=e.overflow,ii=t),t=Ag(t,s.children),t.flags|=4096,t)}function j0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Rm(e.return,t,n)}function Bh(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function mN(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Ot(e,t,s.children,n),s=He.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&j0(e,n,t);else if(e.tag===19)j0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Re(He,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Tu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Bh(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Tu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Bh(t,!0,n,null,i);break;case"together":Bh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Es(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yP(e,t,n){switch(t.tag){case 3:hN(t),ra();break;case 5:zj(t);break;case 1:qt(t.type)&&Nu(t);break;case 4:Cg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Re(ku,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Re(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?fN(e,t,n):(Re(He,He.current&1),e=Es(e,t,n),e!==null?e.sibling:null);Re(He,He.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return mN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Re(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,uN(e,t,n)}return Es(e,t,n)}var pN,Vm,gN,xN;pN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vm=function(){};gN=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Gr(es.current);var i=null;switch(n){case"input":r=um(e,r),s=um(e,s),i=[];break;case"select":r=Qe({},r,{value:void 0}),s=Qe({},s,{value:void 0}),i=[];break;case"textarea":r=fm(e,r),s=fm(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=wu)}pm(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Oe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};xN=function(e,t,n,s){n!==s&&(t.flags|=4)};function Wa(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function vP(e,t,n){var s=t.pendingProps;switch(yg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return qt(t.type)&&ju(),St(t),null;case 3:return s=t.stateNode,aa(),$e(Ht),$e(_t),Eg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(lc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rn!==null&&(Km(Rn),Rn=null))),Vm(e,t),St(t),null;case 5:kg(t);var r=Gr(tl.current);if(n=t.type,e!==null&&t.stateNode!=null)gN(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(K(166));return St(t),null}if(e=Gr(es.current),lc(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[Jn]=t,s[Zo]=i,e=(t.mode&1)!==0,n){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(r=0;r<po.length;r++)Oe(po[r],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":_y(s,i),Oe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Oe("invalid",s);break;case"textarea":Ay(s,i),Oe("invalid",s)}pm(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&oc(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&oc(s.textContent,l,e),r=["children",""+l]):Uo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Oe("scroll",s)}switch(n){case"input":Zl(s),My(s,i,!0);break;case"textarea":Zl(s),Ry(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=wu)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=H1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=a.createElement(n,{is:s.is}):(e=a.createElement(n),n==="select"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,n),e[Jn]=t,e[Zo]=s,pN(e,t,!1,!1),t.stateNode=e;e:{switch(a=gm(n,s),n){case"dialog":Oe("cancel",e),Oe("close",e),r=s;break;case"iframe":case"object":case"embed":Oe("load",e),r=s;break;case"video":case"audio":for(r=0;r<po.length;r++)Oe(po[r],e);r=s;break;case"source":Oe("error",e),r=s;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),r=s;break;case"details":Oe("toggle",e),r=s;break;case"input":_y(e,s),r=um(e,s),Oe("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=Qe({},s,{value:void 0}),Oe("invalid",e);break;case"textarea":Ay(e,s),r=fm(e,s),Oe("invalid",e);break;default:r=s}pm(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Y1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&q1(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wo(e,c):typeof c=="number"&&Wo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Oe("scroll",e):c!=null&&sg(e,i,c,a))}switch(n){case"input":Zl(e),My(e,s,!1);break;case"textarea":Zl(e),Ry(e);break;case"option":s.value!=null&&e.setAttribute("value",""+gr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?qi(e,!!s.multiple,i,!1):s.defaultValue!=null&&qi(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=wu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)xN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(K(166));if(n=Gr(tl.current),Gr(es.current),lc(t)){if(s=t.stateNode,n=t.memoizedProps,s[Jn]=t,(i=s.nodeValue!==n)&&(e=nn,e!==null))switch(e.tag){case 3:oc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oc(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Jn]=t,t.stateNode=s}return St(t),null;case 13:if($e(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&en!==null&&t.mode&1&&!(t.flags&128))Ij(),ra(),t.flags|=98560,i=!1;else if(i=lc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Jn]=t}else ra(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),i=!1}else Rn!==null&&(Km(Rn),Rn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?dt===0&&(dt=3):$g())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return aa(),Vm(e,t),e===null&&Xo(t.stateNode.containerInfo),St(t),null;case 10:return jg(t.type._context),St(t),null;case 17:return qt(t.type)&&ju(),St(t),null;case 19:if($e(He),i=t.memoizedState,i===null)return St(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)Wa(i,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Tu(e),a!==null){for(t.flags|=128,Wa(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(He,He.current&1|2),t.child}e=e.sibling}i.tail!==null&&Je()>la&&(t.flags|=128,s=!0,Wa(i,!1),t.lanes=4194304)}else{if(!s)if(e=Tu(a),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Wa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ve)return St(t),null}else 2*Je()-i.renderingStartTime>la&&n!==1073741824&&(t.flags|=128,s=!0,Wa(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=He.current,Re(He,s?n&1|2:n&1),t):(St(t),null);case 22:case 23:return Fg(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Xt&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function bP(e,t){switch(yg(t),t.tag){case 1:return qt(t.type)&&ju(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(),$e(Ht),$e(_t),Eg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kg(t),null;case 13:if($e(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));ra()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(He),null;case 4:return aa(),null;case 10:return jg(t.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var dc=!1,Et=!1,wP=typeof WeakSet=="function"?WeakSet:Set,oe=null;function zi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Xe(e,t,s)}else n.current=null}function Um(e,t,n){try{n()}catch(s){Xe(e,t,s)}}var N0=!1;function jP(e,t){if(km=yu,e=jj(),gg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(l=a+r),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===i&&++d===s&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Em={focusedElem:e,selectionRange:n},yu=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var x=p.memoizedProps,b=p.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?x:Mn(t.type,x),b);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(j){Xe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return p=N0,N0=!1,p}function Po(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&Um(t,n,i)}r=r.next}while(r!==s)}}function _d(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Wm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yN(e){var t=e.alternate;t!==null&&(e.alternate=null,yN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jn],delete t[Zo],delete t[Pm],delete t[rP],delete t[iP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vN(e){return e.tag===5||e.tag===3||e.tag===4}function S0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wu));else if(s!==4&&(e=e.child,e!==null))for(Hm(e,t,n),e=e.sibling;e!==null;)Hm(e,t,n),e=e.sibling}function qm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(qm(e,t,n),e=e.sibling;e!==null;)qm(e,t,n),e=e.sibling}var vt=null,An=!1;function Rs(e,t,n){for(n=n.child;n!==null;)bN(e,t,n),n=n.sibling}function bN(e,t,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Nd,n)}catch{}switch(n.tag){case 5:Et||zi(n,t);case 6:var s=vt,r=An;vt=null,Rs(e,t,n),vt=s,An=r,vt!==null&&(An?(e=vt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(An?(e=vt,n=n.stateNode,e.nodeType===8?Rh(e.parentNode,n):e.nodeType===1&&Rh(e,n),Yo(e)):Rh(vt,n.stateNode));break;case 4:s=vt,r=An,vt=n.stateNode.containerInfo,An=!0,Rs(e,t,n),vt=s,An=r;break;case 0:case 11:case 14:case 15:if(!Et&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Um(n,t,a),r=r.next}while(r!==s)}Rs(e,t,n);break;case 1:if(!Et&&(zi(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Xe(n,t,l)}Rs(e,t,n);break;case 21:Rs(e,t,n);break;case 22:n.mode&1?(Et=(s=Et)||n.memoizedState!==null,Rs(e,t,n),Et=s):Rs(e,t,n);break;default:Rs(e,t,n)}}function C0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wP),t.forEach(function(s){var r=_P.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function _n(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,An=!1;break e;case 3:vt=l.stateNode.containerInfo,An=!0;break e;case 4:vt=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(vt===null)throw Error(K(160));bN(i,a,r),vt=null,An=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Xe(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wN(t,e),t=t.sibling}function wN(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),qn(e),s&4){try{Po(3,e,e.return),_d(3,e)}catch(x){Xe(e,e.return,x)}try{Po(5,e,e.return)}catch(x){Xe(e,e.return,x)}}break;case 1:_n(t,e),qn(e),s&512&&n!==null&&zi(n,n.return);break;case 5:if(_n(t,e),qn(e),s&512&&n!==null&&zi(n,n.return),e.flags&32){var r=e.stateNode;try{Wo(r,"")}catch(x){Xe(e,e.return,x)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&U1(r,i),gm(l,a);var u=gm(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Y1(r,h):d==="dangerouslySetInnerHTML"?q1(r,h):d==="children"?Wo(r,h):sg(r,d,h,u)}switch(l){case"input":dm(r,i);break;case"textarea":W1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?qi(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?qi(r,!!i.multiple,i.defaultValue,!0):qi(r,!!i.multiple,i.multiple?[]:"",!1))}r[Zo]=i}catch(x){Xe(e,e.return,x)}}break;case 6:if(_n(t,e),qn(e),s&4){if(e.stateNode===null)throw Error(K(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(x){Xe(e,e.return,x)}}break;case 3:if(_n(t,e),qn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Yo(t.containerInfo)}catch(x){Xe(e,e.return,x)}break;case 4:_n(t,e),qn(e);break;case 13:_n(t,e),qn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Og=Je())),s&4&&C0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Et=(u=Et)||d,_n(t,e),Et=u):_n(t,e),qn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Po(4,f,f.return);break;case 1:zi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(x){Xe(s,n,x)}}break;case 5:zi(f,f.return);break;case 22:if(f.memoizedState!==null){E0(h);continue}}m!==null?(m.return=f,oe=m):E0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=G1("display",a))}catch(x){Xe(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Xe(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_n(t,e),qn(e),s&4&&C0(e);break;case 21:break;default:_n(t,e),qn(e)}}function qn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vN(n)){var s=n;break e}n=n.return}throw Error(K(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Wo(r,""),s.flags&=-33);var i=S0(e);qm(e,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=S0(e);Hm(e,l,a);break;default:throw Error(K(161))}}catch(c){Xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NP(e,t,n){oe=e,jN(e)}function jN(e,t,n){for(var s=(e.mode&1)!==0;oe!==null;){var r=oe,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||dc;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Et;l=dc;var u=Et;if(dc=a,(Et=c)&&!u)for(oe=r;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?D0(r):c!==null?(c.return=a,oe=c):D0(r);for(;i!==null;)oe=i,jN(i),i=i.sibling;oe=r,dc=l,Et=u}k0(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,oe=i):k0(e)}}function k0(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||_d(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Et)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Mn(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&u0(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}u0(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Yo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Et||t.flags&512&&Wm(t)}catch(f){Xe(t,t.return,f)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function E0(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function D0(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_d(4,t)}catch(c){Xe(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){Xe(t,r,c)}}var i=t.return;try{Wm(t)}catch(c){Xe(t,i,c)}break;case 5:var a=t.return;try{Wm(t)}catch(c){Xe(t,a,c)}}}catch(c){Xe(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var SP=Math.ceil,Mu=Ts.ReactCurrentDispatcher,Rg=Ts.ReactCurrentOwner,Nn=Ts.ReactCurrentBatchConfig,Ce=0,pt=null,st=null,wt=0,Xt=0,Bi=Nr(0),dt=0,il=null,oi=0,Md=0,Ig=0,_o=null,Vt=null,Og=0,la=1/0,us=null,Au=!1,Gm=null,or=null,hc=!1,Qs=null,Ru=0,Mo=0,Ym=null,Zc=-1,eu=0;function Ft(){return Ce&6?Je():Zc!==-1?Zc:Zc=Je()}function lr(e){return e.mode&1?Ce&2&&wt!==0?wt&-wt:oP.transition!==null?(eu===0&&(eu=aj()),eu):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:fj(e.type)),e):1}function $n(e,t,n,s){if(50<Mo)throw Mo=0,Ym=null,Error(K(185));_l(e,n,s),(!(Ce&2)||e!==pt)&&(e===pt&&(!(Ce&2)&&(Md|=n),dt===4&&Hs(e,wt)),Gt(e,s),n===1&&Ce===0&&!(t.mode&1)&&(la=Je()+500,Dd&&Sr()))}function Gt(e,t){var n=e.callbackNode;oT(e,t);var s=xu(e,e===pt?wt:0);if(s===0)n!==null&&Ly(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Ly(n),t===1)e.tag===0?aP(T0.bind(null,e)):Mj(T0.bind(null,e)),nP(function(){!(Ce&6)&&Sr()}),n=null;else{switch(oj(s)){case 1:n=lg;break;case 4:n=rj;break;case 16:n=gu;break;case 536870912:n=ij;break;default:n=gu}n=PN(n,NN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function NN(e,t){if(Zc=-1,eu=0,Ce&6)throw Error(K(327));var n=e.callbackNode;if(Xi()&&e.callbackNode!==n)return null;var s=xu(e,e===pt?wt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Iu(e,s);else{t=s;var r=Ce;Ce|=2;var i=CN();(pt!==e||wt!==t)&&(us=null,la=Je()+500,Xr(e,t));do try{EP();break}catch(l){SN(e,l)}while(!0);wg(),Mu.current=i,Ce=r,st!==null?t=0:(pt=null,wt=0,t=dt)}if(t!==0){if(t===2&&(r=wm(e),r!==0&&(s=r,t=Qm(e,r))),t===1)throw n=il,Xr(e,0),Hs(e,s),Gt(e,Je()),n;if(t===6)Hs(e,s);else{if(r=e.current.alternate,!(s&30)&&!CP(r)&&(t=Iu(e,s),t===2&&(i=wm(e),i!==0&&(s=i,t=Qm(e,i))),t===1))throw n=il,Xr(e,0),Hs(e,s),Gt(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(K(345));case 2:Ir(e,Vt,us);break;case 3:if(Hs(e,s),(s&130023424)===s&&(t=Og+500-Je(),10<t)){if(xu(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Ft(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Tm(Ir.bind(null,e,Vt,us),t);break}Ir(e,Vt,us);break;case 4:if(Hs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var a=31-Fn(s);i=1<<a,a=t[a],a>r&&(r=a),s&=~i}if(s=r,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*SP(s/1960))-s,10<s){e.timeoutHandle=Tm(Ir.bind(null,e,Vt,us),s);break}Ir(e,Vt,us);break;case 5:Ir(e,Vt,us);break;default:throw Error(K(329))}}}return Gt(e,Je()),e.callbackNode===n?NN.bind(null,e):null}function Qm(e,t){var n=_o;return e.current.memoizedState.isDehydrated&&(Xr(e,t).flags|=256),e=Iu(e,t),e!==2&&(t=Vt,Vt=n,t!==null&&Km(t)),e}function Km(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function CP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Bn(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hs(e,t){for(t&=~Ig,t&=~Md,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fn(t),s=1<<n;e[n]=-1,t&=~s}}function T0(e){if(Ce&6)throw Error(K(327));Xi();var t=xu(e,0);if(!(t&1))return Gt(e,Je()),null;var n=Iu(e,t);if(e.tag!==0&&n===2){var s=wm(e);s!==0&&(t=s,n=Qm(e,s))}if(n===1)throw n=il,Xr(e,0),Hs(e,t),Gt(e,Je()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ir(e,Vt,us),Gt(e,Je()),null}function Lg(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(la=Je()+500,Dd&&Sr())}}function li(e){Qs!==null&&Qs.tag===0&&!(Ce&6)&&Xi();var t=Ce;Ce|=1;var n=Nn.transition,s=Ae;try{if(Nn.transition=null,Ae=1,e)return e()}finally{Ae=s,Nn.transition=n,Ce=t,!(Ce&6)&&Sr()}}function Fg(){Xt=Bi.current,$e(Bi)}function Xr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tP(n)),st!==null)for(n=st.return;n!==null;){var s=n;switch(yg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ju();break;case 3:aa(),$e(Ht),$e(_t),Eg();break;case 5:kg(s);break;case 4:aa();break;case 13:$e(He);break;case 19:$e(He);break;case 10:jg(s.type._context);break;case 22:case 23:Fg()}n=n.return}if(pt=e,st=e=cr(e.current,null),wt=Xt=t,dt=0,il=null,Ig=Md=oi=0,Vt=_o=null,qr!==null){for(t=0;t<qr.length;t++)if(n=qr[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}qr=null}return e}function SN(e,t){do{var n=st;try{if(wg(),Kc.current=_u,Pu){for(var s=Ye.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Pu=!1}if(ai=0,mt=ut=Ye=null,To=!1,nl=0,Rg.current=null,n===null||n.return===null){dt=1,il=t,st=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=wt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=g0(a);if(m!==null){m.flags&=-257,x0(m,a,l,i,t),m.mode&1&&p0(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var x=new Set;x.add(c),t.updateQueue=x}else p.add(c);break e}else{if(!(t&1)){p0(i,u,t),$g();break e}c=Error(K(426))}}else if(Ve&&l.mode&1){var b=g0(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),x0(b,a,l,i,t),vg(oa(c,l));break e}}i=c=oa(c,l),dt!==4&&(dt=2),_o===null?_o=[i]:_o.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=oN(i,c,t);c0(i,w);break e;case 1:l=c;var v=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(or===null||!or.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=lN(i,l,t);c0(i,j);break e}}i=i.return}while(i!==null)}EN(n)}catch(S){t=S,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function CN(){var e=Mu.current;return Mu.current=_u,e===null?_u:e}function $g(){(dt===0||dt===3||dt===2)&&(dt=4),pt===null||!(oi&268435455)&&!(Md&268435455)||Hs(pt,wt)}function Iu(e,t){var n=Ce;Ce|=2;var s=CN();(pt!==e||wt!==t)&&(us=null,Xr(e,t));do try{kP();break}catch(r){SN(e,r)}while(!0);if(wg(),Ce=n,Mu.current=s,st!==null)throw Error(K(261));return pt=null,wt=0,dt}function kP(){for(;st!==null;)kN(st)}function EP(){for(;st!==null&&!JD();)kN(st)}function kN(e){var t=TN(e.alternate,e,Xt);e.memoizedProps=e.pendingProps,t===null?EN(e):st=t,Rg.current=null}function EN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bP(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,st=null;return}}else if(n=vP(n,t,Xt),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);dt===0&&(dt=5)}function Ir(e,t,n){var s=Ae,r=Nn.transition;try{Nn.transition=null,Ae=1,DP(e,t,n,s)}finally{Nn.transition=r,Ae=s}return null}function DP(e,t,n,s){do Xi();while(Qs!==null);if(Ce&6)throw Error(K(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(lT(e,i),e===pt&&(st=pt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hc||(hc=!0,PN(gu,function(){return Xi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nn.transition,Nn.transition=null;var a=Ae;Ae=1;var l=Ce;Ce|=4,Rg.current=null,jP(e,n),wN(n,e),YT(Em),yu=!!km,Em=km=null,e.current=n,NP(n),ZD(),Ce=l,Ae=a,Nn.transition=i}else e.current=n;if(hc&&(hc=!1,Qs=e,Ru=r),i=e.pendingLanes,i===0&&(or=null),nT(n.stateNode),Gt(e,Je()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Au)throw Au=!1,e=Gm,Gm=null,e;return Ru&1&&e.tag!==0&&Xi(),i=e.pendingLanes,i&1?e===Ym?Mo++:(Mo=0,Ym=e):Mo=0,Sr(),null}function Xi(){if(Qs!==null){var e=oj(Ru),t=Nn.transition,n=Ae;try{if(Nn.transition=null,Ae=16>e?16:e,Qs===null)var s=!1;else{if(e=Qs,Qs=null,Ru=0,Ce&6)throw Error(K(331));var r=Ce;for(Ce|=4,oe=e.current;oe!==null;){var i=oe,a=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:Po(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,m=d.return;if(yN(d),d===u){oe=null;break}if(f!==null){f.return=m,oe=f;break}oe=m}}}var p=i.alternate;if(p!==null){var x=p.child;if(x!==null){p.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}oe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,oe=a;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Po(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,oe=w;break e}oe=i.return}}var v=e.current;for(oe=v;oe!==null;){a=oe;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,oe=g;else e:for(a=v;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_d(9,l)}}catch(S){Xe(l,l.return,S)}if(l===a){oe=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,oe=j;break e}oe=l.return}}if(Ce=r,Sr(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Nd,e)}catch{}s=!0}return s}finally{Ae=n,Nn.transition=t}}return!1}function P0(e,t,n){t=oa(n,t),t=oN(e,t,1),e=ar(e,t,1),t=Ft(),e!==null&&(_l(e,1,t),Gt(e,t))}function Xe(e,t,n){if(e.tag===3)P0(e,e,n);else for(;t!==null;){if(t.tag===3){P0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(or===null||!or.has(s))){e=oa(n,e),e=lN(t,e,1),t=ar(t,e,1),e=Ft(),t!==null&&(_l(t,1,e),Gt(t,e));break}}t=t.return}}function TP(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ft(),e.pingedLanes|=e.suspendedLanes&n,pt===e&&(wt&n)===n&&(dt===4||dt===3&&(wt&130023424)===wt&&500>Je()-Og?Xr(e,0):Ig|=n),Gt(e,t)}function DN(e,t){t===0&&(e.mode&1?(t=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):t=1);var n=Ft();e=ks(e,t),e!==null&&(_l(e,t,n),Gt(e,n))}function PP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),DN(e,n)}function _P(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(K(314))}s!==null&&s.delete(t),DN(e,n)}var TN;TN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Wt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wt=!1,yP(e,t,n);Wt=!!(e.flags&131072)}else Wt=!1,Ve&&t.flags&1048576&&Aj(t,Cu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Jc(e,t),e=t.pendingProps;var r=sa(t,_t.current);Ki(t,n),r=Tg(null,t,s,e,r,n);var i=Pg();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(s)?(i=!0,Nu(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Sg(t),r.updater=Pd,t.stateNode=r,r._reactInternals=t,Om(t,s,e,n),t=$m(null,t,s,!0,i,n)):(t.tag=0,Ve&&i&&xg(t),Ot(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Jc(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=AP(s),e=Mn(s,e),r){case 0:t=Fm(null,t,s,e,n);break e;case 1:t=b0(null,t,s,e,n);break e;case 11:t=y0(null,t,s,e,n);break e;case 14:t=v0(null,t,s,Mn(s.type,e),n);break e}throw Error(K(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),Fm(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),b0(e,t,s,r,n);case 3:e:{if(hN(t),e===null)throw Error(K(387));s=t.pendingProps,i=t.memoizedState,r=i.element,$j(e,t),Du(t,s,null,n);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=oa(Error(K(423)),t),t=w0(e,t,s,n,r);break e}else if(s!==r){r=oa(Error(K(424)),t),t=w0(e,t,s,n,r);break e}else for(en=ir(t.stateNode.containerInfo.firstChild),nn=t,Ve=!0,Rn=null,n=Lj(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ra(),s===r){t=Es(e,t,n);break e}Ot(e,t,s,n)}t=t.child}return t;case 5:return zj(t),e===null&&Am(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,Dm(s,r)?a=null:i!==null&&Dm(s,i)&&(t.flags|=32),dN(e,t),Ot(e,t,a,n),t.child;case 6:return e===null&&Am(t),null;case 13:return fN(e,t,n);case 4:return Cg(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ia(t,null,s,n):Ot(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),y0(e,t,s,r,n);case 7:return Ot(e,t,t.pendingProps,n),t.child;case 8:return Ot(e,t,t.pendingProps.children,n),t.child;case 12:return Ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,Re(ku,s._currentValue),s._currentValue=a,i!==null)if(Bn(i.value,a)){if(i.children===r.children&&!Ht.current){t=Es(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=vs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Rm(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(K(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Rm(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ot(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ki(t,n),r=Cn(r),s=s(r),t.flags|=1,Ot(e,t,s,n),t.child;case 14:return s=t.type,r=Mn(s,t.pendingProps),r=Mn(s.type,r),v0(e,t,s,r,n);case 15:return cN(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Mn(s,r),Jc(e,t),t.tag=1,qt(s)?(e=!0,Nu(t)):e=!1,Ki(t,n),aN(t,s,r),Om(t,s,r,n),$m(null,t,s,!0,e,n);case 19:return mN(e,t,n);case 22:return uN(e,t,n)}throw Error(K(156,t.tag))};function PN(e,t){return sj(e,t)}function MP(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,t,n,s){return new MP(e,t,n,s)}function zg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AP(e){if(typeof e=="function")return zg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ig)return 11;if(e===ag)return 14}return 2}function cr(e,t){var n=e.alternate;return n===null?(n=vn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function tu(e,t,n,s,r,i){var a=2;if(s=e,typeof e=="function")zg(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case _i:return Jr(n.children,r,i,t);case rg:a=8,r|=8;break;case am:return e=vn(12,n,t,r|2),e.elementType=am,e.lanes=i,e;case om:return e=vn(13,n,t,r),e.elementType=om,e.lanes=i,e;case lm:return e=vn(19,n,t,r),e.elementType=lm,e.lanes=i,e;case z1:return Ad(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F1:a=10;break e;case $1:a=9;break e;case ig:a=11;break e;case ag:a=14;break e;case Bs:a=16,s=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=vn(a,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function Jr(e,t,n,s){return e=vn(7,e,s,t),e.lanes=n,e}function Ad(e,t,n,s){return e=vn(22,e,s,t),e.elementType=z1,e.lanes=n,e.stateNode={isHidden:!1},e}function Vh(e,t,n){return e=vn(6,e,null,t),e.lanes=n,e}function Uh(e,t,n){return t=vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function RP(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bg(e,t,n,s,r,i,a,l,c){return e=new RP(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sg(i),e}function IP(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function _N(e){if(!e)return xr;e=e._reactInternals;e:{if(mi(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(qt(n))return _j(e,n,t)}return t}function MN(e,t,n,s,r,i,a,l,c){return e=Bg(n,s,!0,e,r,i,a,l,c),e.context=_N(null),n=e.current,s=Ft(),r=lr(n),i=vs(s,r),i.callback=t??null,ar(n,i,r),e.current.lanes=r,_l(e,r,s),Gt(e,s),e}function Rd(e,t,n,s){var r=t.current,i=Ft(),a=lr(r);return n=_N(n),t.context===null?t.context=n:t.pendingContext=n,t=vs(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ar(r,t,a),e!==null&&($n(e,r,a,i),Qc(e,r,a)),a}function Ou(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vg(e,t){_0(e,t),(e=e.alternate)&&_0(e,t)}function OP(){return null}var AN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ug(e){this._internalRoot=e}Id.prototype.render=Ug.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Rd(e,t,null,null)};Id.prototype.unmount=Ug.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;li(function(){Rd(null,e,null,null)}),t[Cs]=null}};function Id(e){this._internalRoot=e}Id.prototype.unstable_scheduleHydration=function(e){if(e){var t=uj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ws.length&&t!==0&&t<Ws[n].priority;n++);Ws.splice(n,0,e),n===0&&hj(e)}};function Wg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function M0(){}function LP(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Ou(a);i.call(u)}}var a=MN(t,s,e,0,null,!1,!1,"",M0);return e._reactRootContainer=a,e[Cs]=a.current,Xo(e.nodeType===8?e.parentNode:e),li(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=Ou(c);l.call(u)}}var c=Bg(e,0,!1,null,null,!1,!1,"",M0);return e._reactRootContainer=c,e[Cs]=c.current,Xo(e.nodeType===8?e.parentNode:e),li(function(){Rd(t,c,n,s)}),c}function Ld(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=Ou(a);l.call(c)}}Rd(t,a,e,r)}else a=LP(n,t,e,r,s);return Ou(a)}lj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mo(t.pendingLanes);n!==0&&(cg(t,n|1),Gt(t,Je()),!(Ce&6)&&(la=Je()+500,Sr()))}break;case 13:li(function(){var s=ks(e,1);if(s!==null){var r=Ft();$n(s,e,1,r)}}),Vg(e,1)}};ug=function(e){if(e.tag===13){var t=ks(e,134217728);if(t!==null){var n=Ft();$n(t,e,134217728,n)}Vg(e,134217728)}};cj=function(e){if(e.tag===13){var t=lr(e),n=ks(e,t);if(n!==null){var s=Ft();$n(n,e,t,s)}Vg(e,t)}};uj=function(){return Ae};dj=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};ym=function(e,t,n){switch(t){case"input":if(dm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=Ed(s);if(!r)throw Error(K(90));V1(s),dm(s,r)}}}break;case"textarea":W1(e,n);break;case"select":t=n.value,t!=null&&qi(e,!!n.multiple,t,!1)}};X1=Lg;J1=li;var FP={usingClientEntryPoint:!1,Events:[Al,Ii,Ed,Q1,K1,Lg]},Ha={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$P={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tj(e),e===null?null:e.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||OP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Nd=fc.inject($P),Zn=fc}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FP;un.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(t))throw Error(K(200));return IP(e,t,null,n)};un.createRoot=function(e,t){if(!Wg(e))throw Error(K(299));var n=!1,s="",r=AN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Bg(e,1,!1,null,null,n,!1,s,r),e[Cs]=t.current,Xo(e.nodeType===8?e.parentNode:e),new Ug(t)};un.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=tj(t),e=e===null?null:e.stateNode,e};un.flushSync=function(e){return li(e)};un.hydrate=function(e,t,n){if(!Od(t))throw Error(K(200));return Ld(null,e,t,!0,n)};un.hydrateRoot=function(e,t,n){if(!Wg(e))throw Error(K(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=AN;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=MN(t,null,e,1,n??null,r,!1,i,a),e[Cs]=t.current,Xo(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Id(t)};un.render=function(e,t,n){if(!Od(t))throw Error(K(200));return Ld(null,e,t,!1,n)};un.unmountComponentAtNode=function(e){if(!Od(e))throw Error(K(40));return e._reactRootContainer?(li(function(){Ld(null,null,e,!1,function(){e._reactRootContainer=null,e[Cs]=null})}),!0):!1};un.unstable_batchedUpdates=Lg;un.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Od(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Ld(e,t,n,!1,s)};un.version="18.3.1-next-f1338f8080-20240426";function RN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RN)}catch(e){console.error(e)}}RN(),R1.exports=un;var Il=R1.exports;const zP=Kp(Il);var IN,A0=Il;IN=A0.createRoot,A0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},al.apply(this,arguments)}var Ks;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ks||(Ks={}));const R0="popstate";function BP(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:a,hash:l}=s.location;return Xm("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Lu(r)}return UP(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ON(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VP(){return Math.random().toString(36).substr(2,8)}function I0(e,t){return{usr:e.state,key:e.key,idx:t}}function Xm(e,t,n,s){return n===void 0&&(n=null),al({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wa(t):t,{state:n,key:t&&t.key||s||VP()})}function Lu(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function wa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function UP(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=Ks.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(al({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Ks.Pop;let b=d(),w=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:w})}function f(b,w){l=Ks.Push;let v=Xm(x.location,b,w);u=d()+1;let g=I0(v,u),j=x.createHref(v);try{a.pushState(g,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(j)}i&&c&&c({action:l,location:x.location,delta:1})}function m(b,w){l=Ks.Replace;let v=Xm(x.location,b,w);u=d();let g=I0(v,u),j=x.createHref(v);a.replaceState(g,"",j),i&&c&&c({action:l,location:x.location,delta:0})}function p(b){let w=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof b=="string"?b:Lu(b);return v=v.replace(/ $/,"%20"),tt(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let x={get action(){return l},get location(){return e(r,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(R0,h),c=b,()=>{r.removeEventListener(R0,h),c=null}},createHref(b){return t(r,b)},createURL:p,encodeLocation(b){let w=p(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(b){return a.go(b)}};return x}var O0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(O0||(O0={}));function WP(e,t,n){return n===void 0&&(n="/"),HP(e,t,n)}function HP(e,t,n,s){let r=typeof t=="string"?wa(t):t,i=Hg(r.pathname||"/",n);if(i==null)return null;let a=LN(e);qP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=r_(i);l=t_(a[c],u)}return l}function LN(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(tt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=ur([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),LN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:ZP(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of FN(i.path))r(i,a,c)}),t}function FN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=FN(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function qP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:e_(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const GP=/^:[\w-]+$/,YP=3,QP=2,KP=1,XP=10,JP=-2,L0=e=>e==="*";function ZP(e,t){let n=e.split("/"),s=n.length;return n.some(L0)&&(s+=JP),t&&(s+=QP),n.filter(r=>!L0(r)).reduce((r,i)=>r+(GP.test(i)?YP:i===""?KP:XP),s)}function e_(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function t_(e,t,n){let{routesMeta:s}=e,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=n_({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:ur([i,h.pathname]),pathnameBase:l_(ur([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ur([i,h.pathnameBase]))}return a}function n_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=s_(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let x=l[h]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function s_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ON(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function r_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ON(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Hg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function i_(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?wa(e):e;return{pathname:n?n.startsWith("/")?n:a_(n,t):t,search:c_(s),hash:u_(r)}}function a_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Wh(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function qg(e,t){let n=o_(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Gg(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=wa(e):(r=al({},e),tt(!r.pathname||!r.pathname.includes("?"),Wh("?","pathname","search",r)),tt(!r.pathname||!r.pathname.includes("#"),Wh("#","pathname","hash",r)),tt(!r.search||!r.search.includes("#"),Wh("#","search","hash",r)));let i=e===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=i_(r,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ur=e=>e.join("/").replace(/\/\/+/g,"/"),l_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),c_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,u_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function d_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $N=["post","put","patch","delete"];new Set($N);const h_=["get",...$N];new Set(h_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ol.apply(this,arguments)}const Yg=y.createContext(null),f_=y.createContext(null),Cr=y.createContext(null),Fd=y.createContext(null),is=y.createContext({outlet:null,matches:[],isDataRoute:!1}),zN=y.createContext(null);function m_(e,t){let{relative:n}=t===void 0?{}:t;ja()||tt(!1);let{basename:s,navigator:r}=y.useContext(Cr),{hash:i,pathname:a,search:l}=VN(e,{relative:n}),c=a;return s!=="/"&&(c=a==="/"?s:ur([s,a])),r.createHref({pathname:c,search:l,hash:i})}function ja(){return y.useContext(Fd)!=null}function Ps(){return ja()||tt(!1),y.useContext(Fd).location}function BN(e){y.useContext(Cr).static||y.useLayoutEffect(e)}function Qt(){let{isDataRoute:e}=y.useContext(is);return e?T_():p_()}function p_(){ja()||tt(!1);let e=y.useContext(Yg),{basename:t,future:n,navigator:s}=y.useContext(Cr),{matches:r}=y.useContext(is),{pathname:i}=Ps(),a=JSON.stringify(qg(r,n.v7_relativeSplatPath)),l=y.useRef(!1);return BN(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=Gg(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ur([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,a,i,e])}const g_=y.createContext(null);function x_(e){let t=y.useContext(is).outlet;return t&&y.createElement(g_.Provider,{value:e},t)}function Qg(){let{matches:e}=y.useContext(is),t=e[e.length-1];return t?t.params:{}}function VN(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=y.useContext(Cr),{matches:r}=y.useContext(is),{pathname:i}=Ps(),a=JSON.stringify(qg(r,s.v7_relativeSplatPath));return y.useMemo(()=>Gg(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function y_(e,t){return v_(e,t)}function v_(e,t,n,s){ja()||tt(!1);let{navigator:r}=y.useContext(Cr),{matches:i}=y.useContext(is),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Ps(),d;if(t){var h;let b=typeof t=="string"?wa(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||tt(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=WP(e,{pathname:m}),x=S_(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:ur([c,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ur([c,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,s);return t&&x?y.createElement(Fd.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ks.Pop}},x):x}function b_(){let e=D_(),t=d_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:r},n):null,null)}const w_=y.createElement(b_,null);class j_ extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(is.Provider,{value:this.props.routeContext},y.createElement(zN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N_(e){let{routeContext:t,match:n,children:s}=e,r=y.useContext(Yg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(is.Provider,{value:t},s)}function S_(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||tt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,p=!1,x=null,b=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||w_,c&&(u<0&&f===0?(P_("route-fallback"),p=!0,b=null):u===f&&(p=!0,b=h.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,f+1)),v=()=>{let g;return m?g=x:p?g=b:h.route.Component?g=y.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=d,y.createElement(N_,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:g})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(j_,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var UN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(UN||{}),WN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(WN||{});function C_(e){let t=y.useContext(Yg);return t||tt(!1),t}function k_(e){let t=y.useContext(f_);return t||tt(!1),t}function E_(e){let t=y.useContext(is);return t||tt(!1),t}function HN(e){let t=E_(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function D_(){var e;let t=y.useContext(zN),n=k_(),s=HN();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function T_(){let{router:e}=C_(UN.UseNavigateStable),t=HN(WN.UseNavigateStable),n=y.useRef(!1);return BN(()=>{n.current=!0}),y.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,ol({fromRouteId:t},i)))},[e,t])}const F0={};function P_(e,t,n){F0[e]||(F0[e]=!0)}function __(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function In(e){let{to:t,replace:n,state:s,relative:r}=e;ja()||tt(!1);let{future:i,static:a}=y.useContext(Cr),{matches:l}=y.useContext(is),{pathname:c}=Ps(),u=Qt(),d=Gg(t,qg(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return y.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function qN(e){return x_(e.context)}function Le(e){tt(!1)}function M_(e){let{basename:t="/",children:n=null,location:s,navigationType:r=Ks.Pop,navigator:i,static:a=!1,future:l}=e;ja()&&tt(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:a,future:ol({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=wa(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=s,x=y.useMemo(()=>{let b=Hg(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:p},navigationType:r}},[c,d,h,f,m,p,r]);return x==null?null:y.createElement(Cr.Provider,{value:u},y.createElement(Fd.Provider,{children:n,value:x}))}function A_(e){let{children:t,location:n}=e;return y_(Jm(t),n)}new Promise(()=>{});function Jm(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(s,r)=>{if(!y.isValidElement(s))return;let i=[...t,r];if(s.type===y.Fragment){n.push.apply(n,Jm(s.props.children,i));return}s.type!==Le&&tt(!1),!s.props.index||!s.props.children||tt(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Jm(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zm.apply(this,arguments)}function R_(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function I_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O_(e,t){return e.button===0&&(!t||t==="_self")&&!I_(e)}function ep(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function L_(e,t){let n=ep(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}const F_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$_="6";try{window.__reactRouterVersion=$_}catch{}const z_="startTransition",$0=ta[z_];function B_(e){let{basename:t,children:n,future:s,window:r}=e,i=y.useRef();i.current==null&&(i.current=BP({window:r,v5Compat:!0}));let a=i.current,[l,c]=y.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},d=y.useCallback(h=>{u&&$0?$0(()=>c(h)):c(h)},[c,u]);return y.useLayoutEffect(()=>a.listen(d),[a,d]),y.useEffect(()=>__(s),[s]),y.createElement(M_,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const V_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=y.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=R_(t,F_),{basename:m}=y.useContext(Cr),p,x=!1;if(typeof u=="string"&&U_.test(u)&&(p=u,V_))try{let g=new URL(window.location.href),j=u.startsWith("//")?new URL(g.protocol+u):new URL(u),S=Hg(j.pathname,m);j.origin===g.origin&&S!=null?u=S+j.search+j.hash:x=!0}catch{}let b=m_(u,{relative:r}),w=W_(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function v(g){s&&s(g),g.defaultPrevented||w(g)}return y.createElement("a",Zm({},f,{href:p||b,onClick:x||i?s:v,ref:n,target:c}))});var z0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(z0||(z0={}));var B0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(B0||(B0={}));function W_(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Qt(),u=Ps(),d=VN(e,{relative:a});return y.useCallback(h=>{if(O_(h,n)){h.preventDefault();let f=s!==void 0?s:Lu(u)===Lu(d);c(e,{replace:f,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,s,r,n,e,i,a,l])}function H_(e){let t=y.useRef(ep(e)),n=y.useRef(!1),s=Ps(),r=y.useMemo(()=>L_(s.search,n.current?null:t.current),[s.search]),i=Qt(),a=y.useCallback((l,c)=>{const u=ep(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,a]}class q_ extends y.Component{constructor(n){super(n);ue(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});ue(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?o.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:o.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),o.jsxs("div",{className:"flex flex-col space-y-3",children:[o.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),o.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function G_({children:e}){return o.jsx(q_,{children:e})}const Y_={},V0=e=>{let t;const n=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Y_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},Q_=e=>e?V0(e):V0;var GN={exports:{}},YN={},QN={exports:{}},KN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=y;function K_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var X_=typeof Object.is=="function"?Object.is:K_,J_=ca.useState,Z_=ca.useEffect,eM=ca.useLayoutEffect,tM=ca.useDebugValue;function nM(e,t){var n=t(),s=J_({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return eM(function(){r.value=n,r.getSnapshot=t,Hh(r)&&i({inst:r})},[e,n,t]),Z_(function(){return Hh(r)&&i({inst:r}),e(function(){Hh(r)&&i({inst:r})})},[e]),tM(n),n}function Hh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!X_(e,n)}catch{return!0}}function sM(e,t){return t()}var rM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sM:nM;KN.useSyncExternalStore=ca.useSyncExternalStore!==void 0?ca.useSyncExternalStore:rM;QN.exports=KN;var iM=QN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d=y,aM=iM;function oM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lM=typeof Object.is=="function"?Object.is:oM,cM=aM.useSyncExternalStore,uM=$d.useRef,dM=$d.useEffect,hM=$d.useMemo,fM=$d.useDebugValue;YN.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=uM(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=hM(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,lM(d,m))return p;var x=s(m);return r!==void 0&&r(p,x)?(d=m,p):(d=m,h=x)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=cM(e,i[0],i[1]);return dM(function(){a.hasValue=!0,a.value=l},[l]),fM(l),l};GN.exports=YN;var mM=GN.exports;const pM=Kp(mM),XN={},{useDebugValue:gM}=ne,{useSyncExternalStoreWithSelector:xM}=pM;let U0=!1;const yM=e=>e;function vM(e,t=yM,n){(XN?"production":void 0)!=="production"&&n&&!U0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),U0=!0);const s=xM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gM(s),s}const W0=e=>{(XN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Q_(e):e,n=(s,r)=>vM(t,s,r);return Object.assign(n,t),n},JN=e=>e?W0(e):W0,re=async()=>null,ot=async()=>[],tp=async()=>({success:!0}),np=async()=>({success:!1,error:"Service disabled in production"}),bn=()=>{},bM=bn,wM=bn,jM=bn,NM=bn,SM=bn,CM=bn,kM=()=>!1,EM=bn,ZN=np,eS=tp,Kg=re,DM=re,TM=re,PM=re,_M=re,tS=re,Zr=re,Xg=re,Jg=ot,nS=re,sS=re,MM=re,rS=re,iS=re,Na=ot,AM=re,sp=re,rp=re,RM=re,aS=re,IM=re,oS=re,zd=ot,OM=re,lS=ot,Zg=re,ex=ot,Ol=ot,LM=re,cS=re,tx=re,nx=ot,uS=re,dS=ot,hS=re,FM=re,fS=re,mS=re,$M=ot,zM=re,pS=re,Fu=ot,BM=re,VM=re,UM=re,gS=re,sx=ot,WM=re,$u=re,rx=ot,ip=ot,HM=re,qM=re,GM=re,YM=re,QM=re,ap=re,xS=re,KM=re,yS=re,vS=re,bS=ot,wS=re,XM=re,JM=re,ZM=bn,jS=ot,eA=re,tA=re,nA=re,NS=ot,SS=re,sA=re,rA=re,CS=ot,kS=re,ES=re,DS=re,TS=re,iA=re,ll=(e,t)=>(t==null?void 0:t.content)||"",PS=()=>[],nu=()=>({}),aA=e=>`$${e||0}`,oA=e=>e?new Date(e).toLocaleDateString():"",lA=()=>!0,cA=()=>!0,_S=e=>e||{},MS=e=>(e==null?void 0:e.id)||"",Ji={get:re,post:re,put:re,delete:re,create:re,update:re,list:ot},uA={},dA={},hA={},fA={},mA={},pA={},gA={},xA={},yA={},vA={},bA={},wA={},Or={signIn:np,signOutUser:tp,getCurrentUser:re,create:re,read:re,update:re,delete:re,list:ot,createDevToken:bn,initAuthDebug:bn,logAuthState:bn,noop:bn,asyncNull:re,asyncEmptyArray:ot,asyncSuccess:tp,asyncError:np},H0=Object.freeze(Object.defineProperty({__proto__:null,Activity:uA,Customer:mA,Deal:gA,Equipment:xA,Job:fA,Lead:hA,Notification:wA,Quotation:pA,Service:vA,SiteAssessment:bA,Template:yA,User:dA,checkAuthStatus:SM,checkForDevTokens:kM,cleanupDevArtifacts:CM,createActivity:eA,createCustomer:tx,createDeal:gS,createDevToken:bM,createEquipment:qM,createJob:oS,createLead:iS,createNotification:XM,createQuotation:mS,createService:kS,createSiteAssessment:SS,createTemplate:Xg,createUser:PM,debugAuth:NM,default:Or,deleteActivity:nA,deleteContact:hS,deleteCustomer:uS,deleteDeal:WM,deleteEquipment:GM,deleteJob:OM,deleteLead:AM,deleteNotification:JM,deleteQuotation:zM,deleteService:DS,deleteSiteAssessment:rA,deleteTemplate:nS,deleteUser:_M,extractDataFromApiResponse:_S,formatCurrency:aA,formatDate:oA,getAllEquipment:ex,getAllOperators:Ol,getAvailablePlaceholders:PS,getConfig:YM,getContactsByCustomer:dS,getCurrentUser:Kg,getCustomer:LM,getCustomerIdentifier:MS,getCustomers:nx,getDeal:BM,getDealById:$u,getDeals:sx,getDefaultTemplateConfig:xS,getEquipment:rx,getEquipmentByCategory:ip,getEquipmentById:Zg,getHeaders:nu,getJob:RM,getJobById:aS,getJobs:zd,getJobsByOperator:lS,getLead:MM,getLeads:Na,getQuotation:FM,getQuotationById:pS,getQuotationConfig:ap,getQuotations:$M,getQuotationsForLead:Fu,getRecentActivities:jS,getResourceRatesConfig:yS,getServices:CS,getSiteAssessments:NS,getTemplate:tS,getTemplateById:sS,getTemplates:Jg,getUserById:DM,getUserNotifications:bS,initAuthDebug:wM,jobApiClient:Ji,logAuthState:jM,markNotificationAsRead:wS,mergeQuotationWithTemplate:ll,mergeTemplate:iA,monitorOperation:ZM,removeDevTokens:EM,signIn:ZN,signOutUser:eS,toggleServiceStatus:TS,updateActivity:tA,updateConfig:QM,updateCustomer:cS,updateDeal:VM,updateDealStage:UM,updateDefaultTemplateConfig:KM,updateEquipment:HM,updateJob:IM,updateLead:rS,updateLeadAssignment:rp,updateLeadStatus:sp,updateQuotation:fS,updateQuotationConfig:vS,updateService:ES,updateSiteAssessment:sA,updateTemplate:Zr,updateUser:TM,validateEmail:lA,validatePhone:cA},Symbol.toStringTag,{value:"Module"})),jA=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},NA=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")},ze=JN()(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const s=await ZN(t,n);if(console.log(" Login successful - User data received:",JSON.stringify(s,null,2)),console.log(" User role check:",s==null?void 0:s.role),!s||!s.role)throw console.error(" User object missing or role undefined:",s),new Error("Invalid user data - role missing");if(!["admin","sales_agent","operations_manager","operator","support"].includes(s.role))throw console.error(" Invalid user role:",s.role),new Error(`Invalid user role: ${s.role}`);console.log(" User role validation passed:",s.role);const r=localStorage.getItem("jwt-token")||"";e({user:s,token:r,isAuthenticated:!0,error:null}),jA(s,r),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(s){throw e({error:s.message}),s}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await eS(),e({user:null,token:null,isAuthenticated:!1,error:null}),NA(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const n=y.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>y.createElement("svg",{ref:d,...SA,width:r,height:r,stroke:s,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${CA(e)}`,l].join(" "),...u},[...t.map(([h,f])=>y.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=te("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=te("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=te("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=te("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=te("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=te("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=te("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=te("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=te("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=te("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=te("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=te("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=te("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=te("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function rR(){var v,g;const[e,t]=y.useState(""),[n,s]=y.useState(""),[r,i]=y.useState(!1),[a,l]=y.useState(null),[c,u]=y.useState("loading"),{login:d,error:h,isAuthenticated:f,user:m}=ze();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),y.useEffect(()=>{console.log("LoginForm mounted");const j="http://localhost:3001/api";fetch(`${j}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(S=>(console.log("API health check response:",S.status),u(S.ok?"available":"error"),S.text())).then(S=>{console.log("API health check data:",S)}).catch(S=>{console.error("API health check failed:",S),u("error"),l(`API connection error: ${S.message}. Make sure the API server is running at ${j}`)}),console.log("Environment variables check:",{apiUrl:"http://localhost:3001/api",dbHost:"not set"})},[]);const p=Qt(),x=Ps(),b=((g=(v=x.state)==null?void 0:v.from)==null?void 0:g.pathname)||"/dashboard";y.useEffect(()=>{console.log(" LoginForm useEffect - Authentication check:",{isAuthenticated:f,user:m==null?void 0:m.name}),f&&m&&(console.log(" User is authenticated, navigating to:",b),p(b,{replace:!0}))},[f,m,p,b]),y.useEffect(()=>{x.pathname==="/login"&&localStorage.removeItem("jwt-token")},[x.pathname]);const w=async j=>{if(j.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log(" Login attempt for:",e);try{const S="http://localhost:3001/api";try{const k=await fetch(`${S}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok)throw console.error("API health check failed before login attempt:",await k.text()),u("error"),new Error(`API server is not responding correctly. Status: ${k.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(k){throw console.error("Failed to connect to API:",k),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}console.log(" Calling auth store login..."),await d(e,n),console.log(" Login attempt successful, auth state should be updated"),setTimeout(()=>{var N,C;const k=ze.getState();console.log(" Current auth state after login:",{isAuthenticated:k.isAuthenticated,user:(N=k.user)==null?void 0:N.name,userRole:(C=k.user)==null?void 0:C.role,token:k.token?"Present":"Missing",fullUser:k.user}),k.isAuthenticated&&k.user?(console.log(" Forcing navigation to dashboard..."),console.log(" User object before navigation:",JSON.stringify(k.user,null,2)),p("/dashboard",{replace:!0})):console.log(" Auth state not updated properly, user may need to refresh")},500)}catch(S){console.error("Login error:",S),S instanceof Error&&(S.message.includes("<!DOCTYPE")||S.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://localhost:3001/api.`):(S.message.includes("NetworkError")||S.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),s("")}finally{i(!1)}};if(a)return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),o.jsx("p",{className:"text-gray-700 mb-4",children:a}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",o.jsx("br",{}),"API URL: ","http://localhost:3001/api"]}),o.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[o.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Make sure the API server is running"}),o.jsx("li",{children:"Check your .env file configuration"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsx("li",{children:"Check browser console for network errors"})]})]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsx("div",{children:o.jsx("input",{id:"email",name:"email",type:"email",value:e,onChange:j=>t(j.target.value),required:!0,autoComplete:"email",placeholder:"Email address",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})}),o.jsx("div",{children:o.jsx("input",{id:"password",name:"password",type:"password",value:n,onChange:j=>s(j.target.value),required:!0,autoComplete:"current-password",placeholder:"Password",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})})]}),o.jsx("div",{className:"flex justify-end text-xs mt-1",children:o.jsxs("a",{href:"#",className:"text-blue-700 hover:underline",children:["Forget password ",o.jsx("span",{className:"font-bold",children:"Click here"})]})}),o.jsx("button",{type:"submit",disabled:r,className:"w-full h-12 bg-black text-white rounded-md text-lg font-semibold mt-2 transition-colors duration-150 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-50",children:r?"Logging in...":"Login Now"}),h&&o.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[o.jsx(pi,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:h})]})]})}catch(j){return console.error("Error rendering login form:",j),l(`Error rendering login form: ${j instanceof Error?j.message:String(j)}`),null}}function iR({error:e,resetError:t}){return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:o.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),o.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),o.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:o.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),o.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class aR extends y.Component{constructor(n){super(n);ue(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?o.jsx(iR,{error:this.state.error,resetError:this.resetError}):this.props.children}}function oR(){const{isAuthenticated:e}=ze();return e?o.jsx(In,{to:"/dashboard"}):o.jsxs("div",{className:"h-screen overflow-hidden flex flex-col lg:flex-row bg-[#F2EEE7]",children:[o.jsxs("div",{className:"relative flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-[#385197] to-[#404040] text-white px-8 py-12 overflow-hidden",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M0 800 Q400 400 800 800",stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M0 600 Q400 200 800 600",stroke:"white",strokeWidth:"1.5"}),o.jsx("path",{d:"M0 400 Q400 0 800 400",stroke:"white",strokeWidth:"1"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-start max-w-lg w-full",children:[o.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight flex items-center gap-2",children:[o.jsx("span",{className:"text-white drop-shadow-lg",children:"Hello,"}),o.jsx("span",{className:"text-[#FFCC3F] drop-shadow-[0_2px_8px_rgba(255,204,63,0.7)]",children:"ASP Cranes!"}),o.jsx("span",{className:"inline-block text-5xl ml-2 align-middle",children:""})]}),o.jsx("p",{className:"text-xl md:text-2xl font-bold mb-8 text-white drop-shadow-lg tracking-wide",children:"The all-in-one platform to supercharge your heavy equipment rental business."}),o.jsxs("p",{className:"text-xs opacity-60 mt-12",children:[" ",new Date().getFullYear()," ASP Cranes. All rights reserved."]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center items-center bg-[#F2EEE7] px-6",children:o.jsxs("div",{className:"w-full max-w-md mx-auto relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/10 backdrop-blur-xl border border-[#CAC0B0]/60 shadow-2xl",style:{zIndex:1}}),o.jsxs("div",{className:"relative z-10 p-10 flex flex-col",children:[o.jsxs("h2",{className:"text-2xl font-bold text-[#404040] mb-2 flex items-center gap-2",children:["Welcome Back! ",o.jsx("span",{className:"text-[#FFCC3F]",children:""})]}),o.jsxs("p",{className:"text-[#385197] mb-6 text-sm",children:["Don't have an account? ",o.jsx("a",{href:"#",className:"text-[#FFCC3F] font-medium hover:underline",children:"Create a new account now"}),".",o.jsx("br",{}),"It's FREE! Takes less than a minute."]}),o.jsx(rR,{})]}),o.jsxs("svg",{className:"absolute -top-8 -right-8 w-32 h-32 opacity-30",viewBox:"0 0 100 100",fill:"none",children:[o.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"#FFCC3F",strokeWidth:"2"}),o.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#385197",strokeWidth:"1"})]}),o.jsx("svg",{className:"absolute -bottom-8 -left-8 w-24 h-24 opacity-20",viewBox:"0 0 100 100",fill:"none",children:o.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"20",stroke:"#404040",strokeWidth:"2"})})]})})]})}function lR(){return y.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://localhost:3001/api")},[]),o.jsx(aR,{children:o.jsx(oR,{})})}const HS=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Hd=y.createContext({}),qd=y.createContext(null),Gd=typeof document<"u",lx=Gd?y.useLayoutEffect:y.useEffect,qS=y.createContext({strict:!1}),cx=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),cR="framerAppearId",GS="data-"+cx(cR);function uR(e,t,n,s){const{visualElement:r}=y.useContext(Hd),i=y.useContext(qS),a=y.useContext(qd),l=y.useContext(HS).reducedMotion,c=y.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;y.useInsertionEffect(()=>{u&&u.update(n,a)});const d=y.useRef(!!(n[GS]&&!window.HandoffComplete));return lx(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Vi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function dR(e,t,n){return y.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Vi(n)&&(n.current=s))},[t])}function hl(e){return typeof e=="string"||Array.isArray(e)}function Yd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const ux=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dx=["initial",...ux];function Qd(e){return Yd(e.animate)||dx.some(t=>hl(e[t]))}function YS(e){return!!(Qd(e)||e.variants)}function hR(e,t){if(Qd(e)){const{initial:n,animate:s}=e;return{initial:n===!1||hl(n)?n:void 0,animate:hl(s)?s:void 0}}return e.inherit!==!1?t:{}}function fR(e){const{initial:t,animate:n}=hR(e,y.useContext(Hd));return y.useMemo(()=>({initial:t,animate:n}),[Q0(t),Q0(n)])}function Q0(e){return Array.isArray(e)?e.join(" "):e}const K0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},fl={};for(const e in K0)fl[e]={isEnabled:t=>K0[e].some(n=>!!t[n])};function mR(e){for(const t in e)fl[t]={...fl[t],...e[t]}}const hx=y.createContext({}),QS=y.createContext({}),pR=Symbol.for("motionComponentSymbol");function gR({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){e&&mR(e);function i(l,c){let u;const d={...y.useContext(HS),...l,layoutId:xR(l)},{isStatic:h}=d,f=fR(l),m=s(l,h);if(!h&&Gd){f.visualElement=uR(r,m,d,t);const p=y.useContext(QS),x=y.useContext(qS).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,x,e,p))}return y.createElement(Hd.Provider,{value:f},u&&f.visualElement?y.createElement(u,{visualElement:f.visualElement,...d}):null,n(r,l,dR(m,f.visualElement,c),m,h,f.visualElement))}const a=y.forwardRef(i);return a[pR]=r,a}function xR({layoutId:e}){const t=y.useContext(hx).id;return t&&e!==void 0?t+"-"+e:e}function yR(e){function t(s,r={}){return gR(e(s,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const vR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fx(e){return typeof e!="string"||e.includes("-")?!1:!!(vR.indexOf(e)>-1||/[A-Z]/.test(e))}const zu={};function bR(e){Object.assign(zu,e)}const Fl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yi=new Set(Fl);function KS(e,{layout:t,layoutId:n}){return yi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!zu[e]||e==="opacity")}const Yt=e=>!!(e&&e.getVelocity),wR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jR=Fl.length;function NR(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,r){let i="";for(let a=0;a<jR;a++){const l=Fl[a];if(e[l]!==void 0){const c=wR[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,s?"":i):n&&s&&(i="none"),i}const XS=e=>t=>typeof t=="string"&&t.startsWith(e),JS=XS("--"),cp=XS("var(--"),SR=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,CR=(e,t)=>t&&typeof e=="number"?t.transform(e):e,yr=(e,t,n)=>Math.min(Math.max(n,e),t),vi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ao={...vi,transform:e=>yr(0,1,e)},pc={...vi,default:1},Ro=e=>Math.round(e*1e5)/1e5,Kd=/(-)?([\d]*\.?[\d])+/g,ZS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,kR=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $l(e){return typeof e=="string"}const zl=e=>({test:t=>$l(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zs=zl("deg"),ts=zl("%"),xe=zl("px"),ER=zl("vh"),DR=zl("vw"),X0={...ts,parse:e=>ts.parse(e)/100,transform:e=>ts.transform(e*100)},J0={...vi,transform:Math.round},eC={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,size:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,rotate:zs,rotateX:zs,rotateY:zs,rotateZ:zs,scale:pc,scaleX:pc,scaleY:pc,scaleZ:pc,skew:zs,skewX:zs,skewY:zs,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:Ao,originX:X0,originY:X0,originZ:xe,zIndex:J0,fillOpacity:Ao,strokeOpacity:Ao,numOctaves:J0};function mx(e,t,n,s){const{style:r,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(JS(h)){i[h]=f;continue}const m=eC[h],p=CR(f,m);if(yi.has(h)){if(c=!0,a[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):r[h]=p}if(t.transform||(c||s?r.transform=NR(e.transform,n,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;r.transformOrigin=`${h} ${f} ${m}`}}const px=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tC(e,t,n){for(const s in t)!Yt(t[s])&&!KS(s,n)&&(e[s]=t[s])}function TR({transformTemplate:e},t,n){return y.useMemo(()=>{const s=px();return mx(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function PR(e,t,n){const s=e.style||{},r={};return tC(r,s,e),Object.assign(r,TR(e,t,n)),e.transformValues?e.transformValues(r):r}function _R(e,t,n){const s={},r=PR(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const MR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||MR.has(e)}let nC=e=>!Bu(e);function AR(e){e&&(nC=t=>t.startsWith("on")?!Bu(t):e(t))}try{AR(require("@emotion/is-prop-valid").default)}catch{}function RR(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(nC(r)||n===!0&&Bu(r)||!t&&!Bu(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function Z0(e,t,n){return typeof e=="string"?e:xe.transform(t+n*e)}function IR(e,t,n){const s=Z0(t,e.x,e.width),r=Z0(n,e.y,e.height);return`${s} ${r}`}const OR={offset:"stroke-dashoffset",array:"stroke-dasharray"},LR={offset:"strokeDashoffset",array:"strokeDasharray"};function FR(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?OR:LR;e[i.offset]=xe.transform(-s);const a=xe.transform(t),l=xe.transform(n);e[i.array]=`${a} ${l}`}function gx(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(mx(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:x}=e;m.transform&&(x&&(p.transform=m.transform),delete m.transform),x&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=IR(x,r!==void 0?r:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),a!==void 0&&FR(m,a,l,c,!1)}const sC=()=>({...px(),attrs:{}}),xx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function $R(e,t,n,s){const r=y.useMemo(()=>{const i=sC();return gx(i,t,{enableHardwareAcceleration:!1},xx(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};tC(i,e.style,e),r.style={...i,...r.style}}return r}function zR(e=!1){return(n,s,r,{latestValues:i},a)=>{const c=(fx(n)?$R:_R)(s,i,a,n),d={...RR(s,typeof n=="string",e),...c,ref:r},{children:h}=s,f=y.useMemo(()=>Yt(h)?h.get():h,[h]);return y.createElement(n,{...d,children:f})}}function rC(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const iC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aC(e,t,n,s){rC(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(iC.has(r)?r:cx(r),t.attrs[r])}function yx(e,t){const{style:n}=e,s={};for(const r in n)(Yt(n[r])||t.style&&Yt(t.style[r])||KS(r,e))&&(s[r]=n[r]);return s}function oC(e,t){const n=yx(e,t);for(const s in e)if(Yt(e[s])||Yt(t[s])){const r=Fl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=e[s]}return n}function vx(e,t,n,s={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),t}function lC(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const Vu=e=>Array.isArray(e),BR=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),VR=e=>Vu(e)?e[e.length-1]||0:e;function su(e){const t=Yt(e)?e.get():e;return BR(t)?t.toValue():t}function UR({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,r,i){const a={latestValues:WR(s,r,i,e),renderState:t()};return n&&(a.mount=l=>n(s,l,a)),a}const cC=e=>(t,n)=>{const s=y.useContext(Hd),r=y.useContext(qd),i=()=>UR(e,t,s,r);return n?i():lC(i)};function WR(e,t,n,s){const r={},i=s(e,{});for(const f in i)r[f]=su(i[f]);let{initial:a,animate:l}=e;const c=Qd(e),u=YS(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Yd(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=vx(e,m);if(!p)return;const{transitionEnd:x,transition:b,...w}=p;for(const v in w){let g=w[v];if(Array.isArray(g)){const j=d?g.length-1:0;g=g[j]}g!==null&&(r[v]=g)}for(const v in x)r[v]=x[v]}),r}const Ze=e=>e;class ev{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function HR(e){let t=new ev,n=new ev,s=0,r=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?t:n;return u&&a.add(c),f.add(c)&&h&&r&&(s=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}r=!1,i&&(i=!1,l.process(c))}};return l}const gc=["prepare","read","update","preRender","render","postRender"],qR=40;function GR(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=gc.reduce((h,f)=>(h[f]=HR(()=>n=!0),h),{}),a=h=>i[h].process(r),l=()=>{const h=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,qR),1),r.timestamp=h,r.isProcessing=!0,gc.forEach(a),r.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,r.isProcessing||e(l)};return{schedule:gc.reduce((h,f)=>{const m=i[f];return h[f]=(p,x=!1,b=!1)=>(n||c(),m.schedule(p,x,b)),h},{}),cancel:h=>gc.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:Ie,cancel:Ds,state:Ct,steps:Yh}=GR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),YR={useVisualState:cC({scrapeMotionValuesFromProps:oC,createRenderState:sC,onMount:(e,t,{renderState:n,latestValues:s})=>{Ie.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ie.render(()=>{gx(n,s,{enableHardwareAcceleration:!1},xx(t.tagName),e.transformTemplate),aC(t,n)})}})},QR={useVisualState:cC({scrapeMotionValuesFromProps:yx,createRenderState:px})};function KR(e,{forwardMotionProps:t=!1},n,s){return{...fx(e)?YR:QR,preloadedFeatures:n,useRender:zR(t),createVisualElement:s,Component:e}}function gs(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const uC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Xd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const XR=e=>t=>uC(t)&&e(t,Xd(t));function bs(e,t,n,s){return gs(e,t,XR(n),s)}const JR=(e,t)=>n=>t(e(n)),hr=(...e)=>e.reduce(JR);function dC(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const tv=dC("dragHorizontal"),nv=dC("dragVertical");function hC(e){let t=!1;if(e==="y")t=nv();else if(e==="x")t=tv();else{const n=tv(),s=nv();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function fC(){const e=hC(!0);return e?(e(),!1):!0}class kr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function sv(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),r=(i,a)=>{if(i.pointerType==="touch"||fC())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&Ie.update(()=>l[s](i,a))};return bs(e.current,n,r,{passive:!e.getProps()[s]})}class ZR extends kr{mount(){this.unmount=hr(sv(this.node,!0),sv(this.node,!1))}unmount(){}}class eI extends kr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hr(gs(this.node.current,"focus",()=>this.onFocus()),gs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mC=(e,t)=>t?e===t?!0:mC(e,t.parentElement):!1;function Qh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Xd(n))}class tI extends kr{constructor(){super(...arguments),this.removeStartListeners=Ze,this.removeEndListeners=Ze,this.removeAccessibleListeners=Ze,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=bs(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Ie.update(()=>{!h&&!mC(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),a=bs(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=hr(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Qh("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Ie.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=gs(this.node.current,"keyup",a),Qh("down",(l,c)=>{this.startPress(l,c)})},n=gs(this.node.current,"keydown",t),s=()=>{this.isPressing&&Qh("cancel",(i,a)=>this.cancelPress(i,a))},r=gs(this.node.current,"blur",s);this.removeAccessibleListeners=hr(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Ie.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fC()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Ie.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=bs(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=gs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=hr(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const up=new WeakMap,Kh=new WeakMap,nI=e=>{const t=up.get(e.target);t&&t(e)},sI=e=>{e.forEach(nI)};function rI({root:e,...t}){const n=e||document;Kh.has(n)||Kh.set(n,{});const s=Kh.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(sI,{root:e,...t})),s[r]}function iI(e,t,n){const s=rI(t);return up.set(e,n),s.observe(e),()=>{up.delete(e),s.unobserve(e)}}const aI={some:0,all:1};class oI extends kr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:aI[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return iI(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(lI(t,n))&&this.startObserver()}unmount(){}}function lI({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const cI={inView:{Feature:oI},tap:{Feature:tI},focus:{Feature:eI},hover:{Feature:ZR}};function pC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function uI(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function dI(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function Jd(e,t,n){const s=e.getProps();return vx(s,t,n!==void 0?n:s.custom,uI(e),dI(e))}let bx=Ze;const ei=e=>e*1e3,ws=e=>e/1e3,hI={current:!1},gC=e=>Array.isArray(e)&&typeof e[0]=="number";function xC(e){return!!(!e||typeof e=="string"&&yC[e]||gC(e)||Array.isArray(e)&&e.every(xC))}const go=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,yC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:go([0,.65,.55,1]),circOut:go([.55,0,1,.45]),backIn:go([.31,.01,.66,-.59]),backOut:go([.33,1.53,.69,.99])};function vC(e){if(e)return gC(e)?go(e):Array.isArray(e)?e.map(vC):yC[e]}function fI(e,t,n,{delay:s=0,duration:r,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=vC(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function mI(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const bC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,pI=1e-7,gI=12;function xI(e,t,n,s,r){let i,a,l=0;do a=t+(n-t)/2,i=bC(a,s,r)-e,i>0?n=a:t=a;while(Math.abs(i)>pI&&++l<gI);return a}function Bl(e,t,n,s){if(e===t&&n===s)return Ze;const r=i=>xI(i,0,1,e,n);return i=>i===0||i===1?i:bC(r(i),t,s)}const yI=Bl(.42,0,1,1),vI=Bl(0,0,.58,1),wC=Bl(.42,0,.58,1),bI=e=>Array.isArray(e)&&typeof e[0]!="number",jC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,NC=e=>t=>1-e(1-t),wx=e=>1-Math.sin(Math.acos(e)),SC=NC(wx),wI=jC(wx),CC=Bl(.33,1.53,.69,.99),jx=NC(CC),jI=jC(jx),NI=e=>(e*=2)<1?.5*jx(e):.5*(2-Math.pow(2,-10*(e-1))),SI={linear:Ze,easeIn:yI,easeInOut:wC,easeOut:vI,circIn:wx,circInOut:wI,circOut:SC,backIn:jx,backInOut:jI,backOut:CC,anticipate:NI},rv=e=>{if(Array.isArray(e)){bx(e.length===4);const[t,n,s,r]=e;return Bl(t,n,s,r)}else if(typeof e=="string")return SI[e];return e},Nx=(e,t)=>n=>!!($l(n)&&kR.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),kC=(e,t,n)=>s=>{if(!$l(s))return s;const[r,i,a,l]=s.match(Kd);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},CI=e=>yr(0,255,e),Xh={...vi,transform:e=>Math.round(CI(e))},Yr={test:Nx("rgb","red"),parse:kC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Xh.transform(e)+", "+Xh.transform(t)+", "+Xh.transform(n)+", "+Ro(Ao.transform(s))+")"};function kI(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const dp={test:Nx("#"),parse:kI,transform:Yr.transform},Ui={test:Nx("hsl","hue"),parse:kC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+ts.transform(Ro(t))+", "+ts.transform(Ro(n))+", "+Ro(Ao.transform(s))+")"},It={test:e=>Yr.test(e)||dp.test(e)||Ui.test(e),parse:e=>Yr.test(e)?Yr.parse(e):Ui.test(e)?Ui.parse(e):dp.parse(e),transform:e=>$l(e)?e:e.hasOwnProperty("red")?Yr.transform(e):Ui.transform(e)},qe=(e,t,n)=>-n*e+n*t+e;function Jh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function EI({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,i=0,a=0;if(!t)r=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=Jh(c,l,e+1/3),i=Jh(c,l,e),a=Jh(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}const Zh=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},DI=[dp,Yr,Ui],TI=e=>DI.find(t=>t.test(e));function iv(e){const t=TI(e);let n=t.parse(e);return t===Ui&&(n=EI(n)),n}const EC=(e,t)=>{const n=iv(e),s=iv(t),r={...n};return i=>(r.red=Zh(n.red,s.red,i),r.green=Zh(n.green,s.green,i),r.blue=Zh(n.blue,s.blue,i),r.alpha=qe(n.alpha,s.alpha,i),Yr.transform(r))};function PI(e){var t,n;return isNaN(e)&&$l(e)&&(((t=e.match(Kd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(ZS))===null||n===void 0?void 0:n.length)||0)>0}const DC={regex:SR,countKey:"Vars",token:"${v}",parse:Ze},TC={regex:ZS,countKey:"Colors",token:"${c}",parse:It.parse},PC={regex:Kd,countKey:"Numbers",token:"${n}",parse:vi.parse};function ef(e,{regex:t,countKey:n,token:s,parse:r}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...i.map(r)))}function Uu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ef(n,DC),ef(n,TC),ef(n,PC),n}function _C(e){return Uu(e).values}function MC(e){const{values:t,numColors:n,numVars:s,tokenised:r}=Uu(e),i=t.length;return a=>{let l=r;for(let c=0;c<i;c++)c<s?l=l.replace(DC.token,a[c]):c<s+n?l=l.replace(TC.token,It.transform(a[c])):l=l.replace(PC.token,Ro(a[c]));return l}}const _I=e=>typeof e=="number"?0:e;function MI(e){const t=_C(e);return MC(e)(t.map(_I))}const vr={test:PI,parse:_C,createTransformer:MC,getAnimatableNone:MI},AC=(e,t)=>n=>`${n>0?t:e}`;function RC(e,t){return typeof e=="number"?n=>qe(e,t,n):It.test(e)?EC(e,t):e.startsWith("var(")?AC(e,t):OC(e,t)}const IC=(e,t)=>{const n=[...e],s=n.length,r=e.map((i,a)=>RC(i,t[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}},AI=(e,t)=>{const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=RC(e[r],t[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}},OC=(e,t)=>{const n=vr.createTransformer(t),s=Uu(e),r=Uu(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?hr(IC(s.values,r.values),n):AC(e,t)},ml=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},av=(e,t)=>n=>qe(e,t,n);function RI(e){return typeof e=="number"?av:typeof e=="string"?It.test(e)?EC:OC:Array.isArray(e)?IC:typeof e=="object"?AI:av}function II(e,t,n){const s=[],r=n||RI(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=r(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Ze:t;l=hr(c,l)}s.push(l)}return s}function LC(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(bx(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=II(t,s,r),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=ml(e[d],e[d+1],u);return a[d](h)};return n?u=>c(yr(e[0],e[i-1],u)):c}function OI(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=ml(0,t,s);e.push(qe(n,1,r))}}function LI(e){const t=[0];return OI(t,e.length-1),t}function FI(e,t){return e.map(n=>n*t)}function $I(e,t){return e.map(()=>t||wC).splice(0,e.length-1)}function Wu({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=bI(s)?s.map(rv):rv(s),i={done:!1,value:t[0]},a=FI(n&&n.length===t.length?n:LI(t),e),l=LC(a,t,{ease:Array.isArray(r)?r:$I(t,r)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function FC(e,t){return t?e*(1e3/t):0}const zI=5;function $C(e,t,n){const s=Math.max(t-zI,0);return FC(n-e(s),t-s)}const tf=.001,BI=.01,VI=10,UI=.05,WI=1;function HI({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let r,i,a=1-t;a=yr(UI,WI,a),e=yr(BI,VI,ws(e)),a<1?(r=u=>{const d=u*a,h=d*e,f=d-n,m=hp(u,a),p=Math.exp(-h);return tf-f/m*p},i=u=>{const h=u*a*e,f=h*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-h),x=hp(Math.pow(u,2),a);return(-r(u)+tf>0?-1:1)*((f-m)*p)/x}):(r=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-tf+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=GI(r,i,l);if(e=ei(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:e}}}const qI=12;function GI(e,t,n){let s=n;for(let r=1;r<qI;r++)s=s-e(s)/t(s);return s}function hp(e,t){return e*Math.sqrt(1-t*t)}const YI=["duration","bounce"],QI=["stiffness","damping","mass"];function ov(e,t){return t.some(n=>e[n]!==void 0)}function KI(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ov(e,QI)&&ov(e,YI)){const n=HI(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function zC({keyframes:e,restDelta:t,restSpeed:n,...s}){const r=e[0],i=e[e.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=KI({...s,velocity:-ws(s.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),x=i-r,b=ws(Math.sqrt(l/u)),w=Math.abs(x)<5;n||(n=w?.01:2),t||(t=w?.005:.5);let v;if(p<1){const g=hp(b,p);v=j=>{const S=Math.exp(-p*b*j);return i-S*((m+p*b*x)/g*Math.sin(g*j)+x*Math.cos(g*j))}}else if(p===1)v=g=>i-Math.exp(-b*g)*(x+(m+b*x)*g);else{const g=b*Math.sqrt(p*p-1);v=j=>{const S=Math.exp(-p*b*j),k=Math.min(g*j,300);return i-S*((m+p*b*x)*Math.sinh(k)+g*x*Math.cosh(k))/g}}return{calculatedDuration:f&&d||null,next:g=>{const j=v(g);if(f)a.done=g>=d;else{let S=m;g!==0&&(p<1?S=$C(v,g,j):S=0);const k=Math.abs(S)<=n,N=Math.abs(i-j)<=t;a.done=k&&N}return a.value=a.done?i:j,a}}}function lv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let x=n*t;const b=h+x,w=a===void 0?b:a(b);w!==b&&(x=w-h);const v=C=>-x*Math.exp(-C/s),g=C=>w+v(C),j=C=>{const E=v(C),P=g(C);f.done=Math.abs(E)<=u,f.value=f.done?w:P};let S,k;const N=C=>{m(f.value)&&(S=C,k=zC({keyframes:[f.value,p(f.value)],velocity:$C(g,C,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:C=>{let E=!1;return!k&&S===void 0&&(E=!0,j(C),N(C)),S!==void 0&&C>S?k.next(C-S):(!E&&j(C),f)}}}const XI=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ie.update(t,!0),stop:()=>Ds(t),now:()=>Ct.isProcessing?Ct.timestamp:performance.now()}},cv=2e4;function uv(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<cv;)t+=n,s=e.next(t);return t>=cv?1/0:t}const JI={decay:lv,inertia:lv,tween:Wu,keyframes:Wu,spring:zC};function Hu({autoplay:e=!0,delay:t=0,driver:n=XI,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,x,b;const w=()=>{b=new Promise(G=>{x=G})};w();let v;const g=JI[r]||Wu;let j;g!==Wu&&typeof s[0]!="number"&&(j=LC([0,100],s,{clamp:!1}),s=[0,100]);const S=g({...f,keyframes:s});let k;l==="mirror"&&(k=g({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let N="idle",C=null,E=null,P=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=uv(S));const{calculatedDuration:L}=S;let F=1/0,$=1/0;L!==null&&(F=L+a,$=F*(i+1)-a);let A=0;const B=G=>{if(E===null)return;m>0&&(E=Math.min(E,G)),m<0&&(E=Math.min(G-$/m,E)),C!==null?A=C:A=Math.round(G-E)*m;const Z=A-t*(m>=0?1:-1),ie=m>=0?Z<0:Z>$;A=Math.max(Z,0),N==="finished"&&C===null&&(A=$);let ce=A,O=S;if(i){const U=Math.min(A,$)/F;let X=Math.floor(U),_=U%1;!_&&U>=1&&(_=1),_===1&&X--,X=Math.min(X,i+1),!!(X%2)&&(l==="reverse"?(_=1-_,a&&(_-=a/F)):l==="mirror"&&(O=k)),ce=yr(0,1,_)*F}const V=ie?{done:!1,value:s[0]}:O.next(ce);j&&(V.value=j(V.value));let{done:D}=V;!ie&&L!==null&&(D=m>=0?A>=$:A<=0);const z=C===null&&(N==="finished"||N==="running"&&D);return h&&h(V.value),z&&T(),V},q=()=>{v&&v.stop(),v=void 0},I=()=>{N="idle",q(),x(),w(),E=P=null},T=()=>{N="finished",d&&d(),q(),x()},R=()=>{if(p)return;v||(v=n(B));const G=v.now();c&&c(),C!==null?E=G-C:(!E||N==="finished")&&(E=G),N==="finished"&&w(),P=E,C=null,N="running",v.start()};e&&R();const H={then(G,Z){return b.then(G,Z)},get time(){return ws(A)},set time(G){G=ei(G),A=G,C!==null||!v||m===0?C=G:E=v.now()-G/m},get duration(){const G=S.calculatedDuration===null?uv(S):S.calculatedDuration;return ws(G)},get speed(){return m},set speed(G){G===m||!v||(m=G,H.time=ws(A))},get state(){return N},play:R,pause:()=>{N="paused",C=A},stop:()=>{p=!0,N!=="idle"&&(N="idle",u&&u(),I())},cancel:()=>{P!==null&&B(P),I()},complete:()=>{N="finished"},sample:G=>(E=0,B(G))};return H}function ZI(e){let t;return()=>(t===void 0&&(t=e()),t)}const e4=ZI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),t4=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xc=10,n4=2e4,s4=(e,t)=>t.type==="spring"||e==="backgroundColor"||!xC(t.ease);function r4(e,t,{onUpdate:n,onComplete:s,...r}){if(!(e4()&&t4.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(g=>{l=g})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=r;if(s4(t,r)){const g=Hu({...r,repeat:0,delay:0});let j={done:!1,value:h[0]};const S=[];let k=0;for(;!j.done&&k<n4;)j=g.sample(k),S.push(j.value),k+=xc;p=void 0,h=S,f=k-xc,m="linear"}const x=fI(e.owner.current,t,h,{...r,duration:f,ease:m,times:p}),b=()=>{u=!1,x.cancel()},w=()=>{u=!0,Ie.update(b),l(),d()};return x.onfinish=()=>{u||(e.set(mI(h,r)),s&&s(),w())},{then(g,j){return c.then(g,j)},attachTimeline(g){return x.timeline=g,x.onfinish=null,Ze},get time(){return ws(x.currentTime||0)},set time(g){x.currentTime=ei(g)},get speed(){return x.playbackRate},set speed(g){x.playbackRate=g},get duration(){return ws(f)},play:()=>{a||(x.play(),Ds(b))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:g}=x;if(g){const j=Hu({...r,autoplay:!1});e.setWithVelocity(j.sample(g-xc).value,j.sample(g).value,xc)}w()},complete:()=>{u||x.finish()},cancel:w}}function i4({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const r=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Ze,pause:Ze,stop:Ze,then:i=>(i(),Promise.resolve()),cancel:Ze,complete:Ze});return t?Hu({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const a4={type:"spring",stiffness:500,damping:25,restSpeed:10},o4=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),l4={type:"keyframes",duration:.8},c4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},u4=(e,{keyframes:t})=>t.length>2?l4:yi.has(e)?e.startsWith("scale")?o4(t[1]):a4:c4,fp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vr.test(t)||t==="0")&&!t.startsWith("url(")),d4=new Set(["brightness","contrast","saturate","opacity"]);function h4(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(Kd)||[];if(!s)return e;const r=n.replace(s,"");let i=d4.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const f4=/([a-z-]*)\(.*?\)/g,mp={...vr,getAnimatableNone:e=>{const t=e.match(f4);return t?t.map(h4).join(" "):e}},m4={...eC,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:mp,WebkitFilter:mp},Sx=e=>m4[e];function BC(e,t){let n=Sx(e);return n!==mp&&(n=vr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const VC=e=>/^0[^.\s]+$/.test(e);function p4(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||VC(e)}function g4(e,t,n,s){const r=fp(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),p4(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=BC(t,l)}return i}function x4({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Cx(e,t){return e[t]||e.default||e}const y4={skipAnimations:!1},kx=(e,t,n,s={})=>r=>{const i=Cx(s,e)||{},a=i.delay||s.delay||0;let{elapsed:l=0}=s;l=l-ei(a);const c=g4(t,e,n,i),u=c[0],d=c[c.length-1],h=fp(e,u),f=fp(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(x4(i)||(m={...m,...u4(e,m)}),m.duration&&(m.duration=ei(m.duration)),m.repeatDelay&&(m.repeatDelay=ei(m.repeatDelay)),!h||!f||hI.current||i.type===!1||y4.skipAnimations)return i4(m);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=r4(t,e,m);if(p)return p}return Hu(m)};function qu(e){return!!(Yt(e)&&e.add)}const UC=e=>/^\-?\d*\.?\d+$/.test(e);function Ex(e,t){e.indexOf(t)===-1&&e.push(t)}function Dx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Tx{constructor(){this.subscriptions=[]}add(t){return Ex(this.subscriptions,t),()=>Dx(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const v4=e=>!isNaN(parseFloat(e));class b4{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:a}=Ct;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Ie.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ie.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=v4(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Tx);const s=this.events[t].add(n);return t==="change"?()=>{s(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?FC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ua(e,t){return new b4(e,t)}const WC=e=>t=>t.test(e),w4={test:e=>e==="auto",parse:e=>e},HC=[vi,xe,ts,zs,DR,ER,w4],qa=e=>HC.find(WC(e)),j4=[...HC,It,vr],N4=e=>j4.find(WC(e));function S4(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ua(n))}function C4(e,t){const n=Jd(e,t);let{transitionEnd:s={},transition:r={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...s};for(const a in i){const l=VR(i[a]);S4(e,a,l)}}function k4(e,t,n){var s,r;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(UC(d)||VC(d))?d=parseFloat(d):!N4(d)&&vr.test(u)&&(d=BC(c,u)),e.addValue(c,ua(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function E4(e,t){return t?(t[e]||t.default||t).from:void 0}function D4(e,t,n){const s={};for(const r in e){const i=E4(r,t);if(i!==void 0)s[r]=i;else{const a=n.getValue(r);a&&(s[r]=a.get())}}return s}function T4({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function P4(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function qC(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(i=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&T4(d,h))continue;const p={delay:n,elapsed:0,...Cx(i||{},h)};if(window.HandoffAppearAnimations){const w=e.getProps()[GS];if(w){const v=window.HandoffAppearAnimations(w,h,f,Ie);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let x=!p.isHandoff&&!P4(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(x=!1),f.animation&&(x=!1),x)continue;f.start(kx(h,f,m,e.shouldReduceMotion&&yi.has(h)?{type:!1}:p));const b=f.animation;qu(c)&&(c.add(h),b.then(()=>c.remove(h))),u.push(b)}return a&&Promise.all(u).then(()=>{a&&C4(e,a)}),u}function pp(e,t,n={}){const s=Jd(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(qC(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return _4(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function _4(e,t,n=0,s=0,r=1,i){const a=[],l=(e.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(M4).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(pp(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function M4(e,t){return e.sortNodePosition(t)}function A4(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(i=>pp(e,i,n));s=Promise.all(r)}else if(typeof t=="string")s=pp(e,t,n);else{const r=typeof t=="function"?Jd(e,t,n.custom):t;s=Promise.all(qC(e,r,n))}return s.then(()=>e.notify("AnimationComplete",t))}const R4=[...ux].reverse(),I4=ux.length;function O4(e){return t=>Promise.all(t.map(({animation:n,options:s})=>A4(e,n,s)))}function L4(e){let t=O4(e);const n=$4();let s=!0;const r=(c,u)=>{const d=Jd(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},x=1/0;for(let w=0;w<I4;w++){const v=R4[w],g=n[v],j=d[v]!==void 0?d[v]:h[v],S=hl(j),k=v===u?g.isActive:null;k===!1&&(x=w);let N=j===h[v]&&j!==d[v]&&S;if(N&&s&&e.manuallyAnimateOnMount&&(N=!1),g.protectedKeys={...p},!g.isActive&&k===null||!j&&!g.prevProp||Yd(j)||typeof j=="boolean")continue;let E=F4(g.prevProp,j)||v===u&&g.isActive&&!N&&S||w>x&&S,P=!1;const L=Array.isArray(j)?j:[j];let F=L.reduce(r,{});k===!1&&(F={});const{prevResolvedValues:$={}}=g,A={...$,...F},B=q=>{E=!0,m.has(q)&&(P=!0,m.delete(q)),g.needsAnimating[q]=!0};for(const q in A){const I=F[q],T=$[q];if(p.hasOwnProperty(q))continue;let R=!1;Vu(I)&&Vu(T)?R=!pC(I,T):R=I!==T,R?I!==void 0?B(q):m.add(q):I!==void 0&&m.has(q)?B(q):g.protectedKeys[q]=!0}g.prevProp=j,g.prevResolvedValues=F,g.isActive&&(p={...p,...F}),s&&e.blockInitialAnimation&&(E=!1),E&&(!N||P)&&f.push(...L.map(q=>({animation:q,options:{type:v,...c}})))}if(m.size){const w={};m.forEach(v=>{const g=e.getBaseTarget(v);g!==void 0&&(w[v]=g)}),f.push({animation:w})}let b=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(b=!1),s=!1,b?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function F4(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!pC(t,e):!1}function Dr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $4(){return{animate:Dr(!0),whileInView:Dr(),whileHover:Dr(),whileTap:Dr(),whileDrag:Dr(),whileFocus:Dr(),exit:Dr()}}class z4 extends kr{constructor(t){super(t),t.animationState||(t.animationState=L4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let B4=0;class V4 extends kr{constructor(){super(...arguments),this.id=B4++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const U4={animation:{Feature:z4},exit:{Feature:V4}},dv=(e,t)=>Math.abs(e-t);function W4(e,t){const n=dv(e.x,t.x),s=dv(e.y,t.y);return Math.sqrt(n**2+s**2)}class GC{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=sf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=W4(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:x}=Ct;this.history.push({...p,timestamp:x});const{onStart:b,onMove:w}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=nf(f,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=sf(h.type==="pointercancel"?this.lastMoveEventInfo:nf(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,b),p&&p(h,b)},!uC(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=Xd(t),l=nf(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ct;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,sf(l,this.history)),this.removeListeners=hr(bs(this.contextWindow,"pointermove",this.handlePointerMove),bs(this.contextWindow,"pointerup",this.handlePointerUp),bs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ds(this.updatePoint)}}function nf(e,t){return t?{point:t(e.point)}:e}function hv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sf({point:e},t){return{point:e,delta:hv(e,YC(t)),offset:hv(e,H4(t)),velocity:q4(t,.1)}}function H4(e){return e[0]}function YC(e){return e[e.length-1]}function q4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=YC(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>ei(t)));)n--;if(!s)return{x:0,y:0};const i=ws(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function cn(e){return e.max-e.min}function gp(e,t=0,n=.01){return Math.abs(e-t)<=n}function fv(e,t,n,s=.5){e.origin=s,e.originPoint=qe(t.min,t.max,e.origin),e.scale=cn(n)/cn(t),(gp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=qe(n.min,n.max,e.origin)-e.originPoint,(gp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Io(e,t,n,s){fv(e.x,t.x,n.x,s?s.originX:void 0),fv(e.y,t.y,n.y,s?s.originY:void 0)}function mv(e,t,n){e.min=n.min+t.min,e.max=e.min+cn(t)}function G4(e,t,n){mv(e.x,t.x,n.x),mv(e.y,t.y,n.y)}function pv(e,t,n){e.min=t.min-n.min,e.max=e.min+cn(t)}function Oo(e,t,n){pv(e.x,t.x,n.x),pv(e.y,t.y,n.y)}function Y4(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?qe(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?qe(n,e,s.max):Math.min(e,n)),e}function gv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Q4(e,{top:t,left:n,bottom:s,right:r}){return{x:gv(e.x,n,r),y:gv(e.y,t,s)}}function xv(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function K4(e,t){return{x:xv(e.x,t.x),y:xv(e.y,t.y)}}function X4(e,t){let n=.5;const s=cn(e),r=cn(t);return r>s?n=ml(t.min,t.max-s,e.min):s>r&&(n=ml(e.min,e.max-r,t.min)),yr(0,1,n)}function J4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const xp=.35;function Z4(e=xp){return e===!1?e=0:e===!0&&(e=xp),{x:yv(e,"left","right"),y:yv(e,"top","bottom")}}function yv(e,t,n){return{min:vv(e,t),max:vv(e,n)}}function vv(e,t){return typeof e=="number"?e:e[t]||0}const bv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wi=()=>({x:bv(),y:bv()}),wv=()=>({min:0,max:0}),nt=()=>({x:wv(),y:wv()});function gn(e){return[e("x"),e("y")]}function QC({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function eO({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function tO(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function rf(e){return e===void 0||e===1}function yp({scale:e,scaleX:t,scaleY:n}){return!rf(e)||!rf(t)||!rf(n)}function Lr(e){return yp(e)||KC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function KC(e){return jv(e.x)||jv(e.y)}function jv(e){return e&&e!=="0%"}function Gu(e,t,n){const s=e-n,r=t*s;return n+r}function Nv(e,t,n,s,r){return r!==void 0&&(e=Gu(e,r,s)),Gu(e,n,s)+t}function vp(e,t=0,n=1,s,r){e.min=Nv(e.min,t,n,s,r),e.max=Nv(e.max,t,n,s,r)}function XC(e,{x:t,y:n}){vp(e.x,t.translate,t.scale,t.originPoint),vp(e.y,n.translate,n.scale,n.originPoint)}function nO(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let i,a;for(let l=0;l<r;l++){i=n[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Hi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,XC(e,a)),s&&Lr(i.latestValues)&&Hi(e,i.latestValues))}t.x=Sv(t.x),t.y=Sv(t.y)}function Sv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Us(e,t){e.min=e.min+t,e.max=e.max+t}function Cv(e,t,[n,s,r]){const i=t[r]!==void 0?t[r]:.5,a=qe(e.min,e.max,i);vp(e,t[n],t[s],a,t.scale)}const sO=["x","scaleX","originX"],rO=["y","scaleY","originY"];function Hi(e,t){Cv(e.x,t,sO),Cv(e.y,t,rO)}function JC(e,t){return QC(tO(e.getBoundingClientRect(),t))}function iO(e,t,n){const s=JC(e,n),{scroll:r}=t;return r&&(Us(s.x,r.offset.x),Us(s.y,r.offset.y)),s}const ZC=({current:e})=>e?e.ownerDocument.defaultView:null,aO=new WeakMap;class oO{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xd(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hC(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(b=>{let w=this.getAxisMotionValue(b).get()||0;if(ts.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const g=v.layout.layoutBox[b];g&&(w=cn(g)*(parseFloat(w)/100))}}this.originPoint[b]=w}),p&&Ie.update(()=>p(d,h),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:x}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=h;if(m&&this.currentDirection===null){this.currentDirection=lO(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),x&&x(d,h)},l=(d,h)=>this.stop(d,h),c=()=>gn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new GC(t,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:ZC(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Ie.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!yc(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=Y4(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Vi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Q4(r.layoutBox,n):this.constraints=!1,this.elastic=Z4(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=J4(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Vi(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=iO(s,r.root,this.visualElement.getTransformPagePoint());let a=K4(r.layout.layoutBox,i);if(n){const l=n(eO(a));this.hasMutatedConstraints=!!l,l&&(a=QC(l))}return a}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=gn(d=>{if(!yc(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,p={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(kx(t,s,0,n))}stopAnimation(){gn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){gn(n=>{const{drag:s}=this.getProps();if(!yc(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n];i.set(t[n]-qe(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Vi(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gn(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();r[a]=X4({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),gn(a=>{if(!yc(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(qe(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;aO.set(this.visualElement,this);const t=this.visualElement.current,n=bs(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Vi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const a=gs(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(gn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=xp,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function yc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function lO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class cO extends kr{constructor(t){super(t),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new oO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const kv=e=>(t,n)=>{e&&Ie.update(()=>e(t,n))};class uO extends kr{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(t){this.session=new GC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:kv(t),onStart:kv(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&Ie.update(()=>r(i,a))}}}mount(){this.removePointerDownListener=bs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function dO(){const e=y.useContext(qd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=y.useId();return y.useEffect(()=>s(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const ru={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ev(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ga={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xe.test(e))e=parseFloat(e);else return e;const n=Ev(e,t.target.x),s=Ev(e,t.target.y);return`${n}% ${s}%`}},hO={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=vr.parse(e);if(r.length>5)return s;const i=vr.createTransformer(e),a=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+a]/=l,r[1+a]/=c;const u=qe(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class fO extends ne.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=t;bR(mO),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ru.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Ie.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function e2(e){const[t,n]=dO(),s=y.useContext(hx);return ne.createElement(fO,{...e,layoutGroup:s,switchLayoutGroup:y.useContext(QS),isPresent:t,safeToRemove:n})}const mO={borderRadius:{...Ga,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ga,borderTopRightRadius:Ga,borderBottomLeftRadius:Ga,borderBottomRightRadius:Ga,boxShadow:hO},t2=["TopLeft","TopRight","BottomLeft","BottomRight"],pO=t2.length,Dv=e=>typeof e=="string"?parseFloat(e):e,Tv=e=>typeof e=="number"||xe.test(e);function gO(e,t,n,s,r,i){r?(e.opacity=qe(0,n.opacity!==void 0?n.opacity:1,xO(s)),e.opacityExit=qe(t.opacity!==void 0?t.opacity:1,0,yO(s))):i&&(e.opacity=qe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let a=0;a<pO;a++){const l=`border${t2[a]}Radius`;let c=Pv(t,l),u=Pv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Tv(c)===Tv(u)?(e[l]=Math.max(qe(Dv(c),Dv(u),s),0),(ts.test(u)||ts.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=qe(t.rotate||0,n.rotate||0,s))}function Pv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const xO=n2(0,.5,SC),yO=n2(.5,.95,Ze);function n2(e,t,n){return s=>s<e?0:s>t?1:n(ml(e,t,s))}function _v(e,t){e.min=t.min,e.max=t.max}function fn(e,t){_v(e.x,t.x),_v(e.y,t.y)}function Mv(e,t,n,s,r){return e-=t,e=Gu(e,1/n,s),r!==void 0&&(e=Gu(e,1/r,s)),e}function vO(e,t=0,n=1,s=.5,r,i=e,a=e){if(ts.test(t)&&(t=parseFloat(t),t=qe(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=qe(i.min,i.max,s);e===i&&(l-=t),e.min=Mv(e.min,t,n,l,r),e.max=Mv(e.max,t,n,l,r)}function Av(e,t,[n,s,r],i,a){vO(e,t[n],t[s],t[r],t.scale,i,a)}const bO=["x","scaleX","originX"],wO=["y","scaleY","originY"];function Rv(e,t,n,s){Av(e.x,t,bO,n?n.x:void 0,s?s.x:void 0),Av(e.y,t,wO,n?n.y:void 0,s?s.y:void 0)}function Iv(e){return e.translate===0&&e.scale===1}function s2(e){return Iv(e.x)&&Iv(e.y)}function jO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function r2(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Ov(e){return cn(e.x)/cn(e.y)}class NO{constructor(){this.members=[]}add(t){Ex(this.members,t),t.scheduleRender()}remove(t){if(Dx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Lv(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const SO=(e,t)=>e.depth-t.depth;class CO{constructor(){this.children=[],this.isDirty=!1}add(t){Ex(this.children,t),this.isDirty=!0}remove(t){Dx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(SO),this.isDirty=!1,this.children.forEach(t)}}function kO(e,t){const n=performance.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(Ds(s),e(i-t))};return Ie.read(s,!0),()=>Ds(s)}function EO(e){window.MotionDebug&&window.MotionDebug.record(e)}function DO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function TO(e,t,n){const s=Yt(e)?e:ua(e);return s.start(kx("",s,t,n)),s.animation}const Fv=["","X","Y","Z"],PO={visibility:"hidden"},$v=1e3;let _O=0;const Fr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function i2({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},l=t==null?void 0:t()){this.id=_O++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fr.totalNodes=Fr.resolvedTargetDeltas=Fr.recalculatedProjection=0,this.nodes.forEach(RO),this.nodes.forEach($O),this.nodes.forEach(zO),this.nodes.forEach(IO),EO(Fr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new CO)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Tx),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=DO(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=kO(f,250),ru.hasAnimatedSinceResize&&(ru.hasAnimatedSinceResize=!1,this.nodes.forEach(Bv))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||HO,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=d.getProps(),v=!this.targetLayout||!r2(this.targetLayout,p)||m,g=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,g);const j={...Cx(x,"layout"),onPlay:b,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else f||Bv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zv);return}this.isUpdating||this.nodes.forEach(LO),this.isUpdating=!1,this.nodes.forEach(FO),this.nodes.forEach(MO),this.nodes.forEach(AO),this.clearAllSnapshots();const l=performance.now();Ct.delta=yr(0,1e3/60,l-Ct.timestamp),Ct.timestamp=l,Ct.isProcessing=!0,Yh.update.process(Ct),Yh.preRender.process(Ct),Yh.render.process(Ct),Ct.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(OO),this.sharedNodes.forEach(VO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!s2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||Lr(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),qO(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return nt();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Us(l.x,c.offset.x),Us(l.y,c.offset.y)),l}removeElementScroll(a){const l=nt();fn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){fn(l,a);const{scroll:f}=this.root;f&&(Us(l.x,-f.offset.x),Us(l.y,-f.offset.y))}Us(l.x,d.offset.x),Us(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=nt();fn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Hi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Lr(d.latestValues)&&Hi(c,d.latestValues)}return Lr(this.latestValues)&&Hi(c,this.latestValues),c}removeTransform(a){const l=nt();fn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Lr(u.latestValues))continue;yp(u.latestValues)&&u.updateSnapshot();const d=nt(),h=u.measurePageBox();fn(d,h),Rv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Lr(this.latestValues)&&Rv(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ct.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ct.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Oo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fn(this.target,this.layout.layoutBox),XC(this.target,this.targetDelta)):fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Oo(this.relativeTargetOrigin,this.target,m.target),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||yp(this.parent.latestValues)||KC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ct.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;fn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;nO(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=Wi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Wi(),this.projectionDeltaWithTransform=Wi());const x=this.projectionTransform;Io(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Lv(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Fr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=nt(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,x=m!==p,b=this.getStack(),w=!b||b.members.length<=1,v=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(WO));this.animationProgress=0;let g;this.mixTargetDelta=j=>{const S=j/1e3;Vv(h.x,a.x,S),Vv(h.y,a.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oo(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UO(this.relativeTarget,this.relativeTargetOrigin,f,S),g&&jO(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=nt()),fn(g,this.relativeTarget)),x&&(this.animationValues=d,gO(d,u,this.latestValues,S,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{ru.hasAnimatedSinceResize=!0,this.currentAnimation=TO(0,$v,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($v),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&a2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||nt();const h=cn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=cn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}fn(l,c),Hi(l,d),Io(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new NO),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Fv.length;d++){const h="rotate"+Fv[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PO;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=su(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=su(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Lr(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Lv(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in zu){if(f[x]===void 0)continue;const{correct:b,applyTo:w}=zu[x],v=u.transform==="none"?f[x]:b(f[x],h);if(w){const g=w.length;for(let j=0;j<g;j++)u[w[j]]=v}else u[x]=v}return this.options.layoutId&&(u.pointerEvents=h===this?su(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(zv),this.root.sharedNodes.clear()}}}function MO(e){e.updateLayout()}function AO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?gn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=cn(f);f.min=s[h].min,f.max=f.min+m}):a2(i,n.layoutBox,s)&&gn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=cn(s[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Wi();Io(l,s,n.layoutBox);const c=Wi();a?Io(c,e.applyTransform(r,!0),n.measuredBox):Io(c,s,n.layoutBox);const u=!s2(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=nt();Oo(p,n.layoutBox,f.layoutBox);const x=nt();Oo(x,s,m.layoutBox),r2(p,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function RO(e){Fr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function IO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function OO(e){e.clearSnapshot()}function zv(e){e.clearMeasurements()}function LO(e){e.isLayoutDirty=!1}function FO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Bv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $O(e){e.resolveTargetDelta()}function zO(e){e.calcProjection()}function BO(e){e.resetRotation()}function VO(e){e.removeLeadSnapshot()}function Vv(e,t,n){e.translate=qe(t.translate,0,n),e.scale=qe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Uv(e,t,n,s){e.min=qe(t.min,n.min,s),e.max=qe(t.max,n.max,s)}function UO(e,t,n,s){Uv(e.x,t.x,n.x,s),Uv(e.y,t.y,n.y,s)}function WO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const HO={duration:.45,ease:[.4,0,.1,1]},Wv=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Hv=Wv("applewebkit/")&&!Wv("chrome/")?Math.round:Ze;function qv(e){e.min=Hv(e.min),e.max=Hv(e.max)}function qO(e){qv(e.x),qv(e.y)}function a2(e,t,n){return e==="position"||e==="preserve-aspect"&&!gp(Ov(t),Ov(n),.2)}const GO=i2({attachResizeListener:(e,t)=>gs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),af={current:void 0},o2=i2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!af.current){const e=new GO({});e.mount(window),e.setOptions({layoutScroll:!0}),af.current=e}return af.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),YO={pan:{Feature:uO},drag:{Feature:cO,ProjectionNode:o2,MeasureLayout:e2}},QO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function KO(e){const t=QO.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function bp(e,t,n=1){const[s,r]=KO(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const a=i.trim();return UC(a)?parseFloat(a):a}else return cp(r)?bp(r,t,n+1):r}function XO(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const i=r.get();if(!cp(i))return;const a=bp(i,s);a&&r.set(a)});for(const r in t){const i=t[r];if(!cp(i))continue;const a=bp(i,s);a&&(t[r]=a,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:t,transitionEnd:n}}const JO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),l2=e=>JO.has(e),ZO=e=>Object.keys(e).some(l2),Gv=e=>e===vi||e===xe,Yv=(e,t)=>parseFloat(e.split(", ")[t]),Qv=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return Yv(r[1],t);{const i=s.match(/^matrix\((.+)\)$/);return i?Yv(i[1],e):0}},e5=new Set(["x","y","z"]),t5=Fl.filter(e=>!e5.has(e));function n5(e){const t=[];return t5.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const da={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Qv(4,13),y:Qv(5,14)};da.translateX=da.x;da.translateY=da.y;const s5=(e,t,n)=>{const s=t.measureViewportBox(),r=t.current,i=getComputedStyle(r),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=da[u](s,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=da[u](c,i)}),e},r5=(e,t,n={},s={})=>{t={...t},s={...s};const r=Object.keys(t).filter(l2);let i=[],a=!1;const l=[];if(r.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=qa(d);const f=t[c];let m;if(Vu(f)){const p=f.length,x=f[0]===null?1:0;d=f[x],h=qa(d);for(let b=x;b<p&&f[b]!==null;b++)m?bx(qa(f[b])===m):m=qa(f[b])}else m=qa(f);if(h!==m)if(Gv(h)&&Gv(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===xe&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(a||(i=n5(e),a=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=s5(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Gd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function i5(e,t,n,s){return ZO(t)?r5(e,t,n,s):{target:t,transitionEnd:s}}const a5=(e,t,n,s)=>{const r=XO(e,t,s);return t=r.target,s=r.transitionEnd,i5(e,t,n,s)},wp={current:null},c2={current:!1};function o5(){if(c2.current=!0,!!Gd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>wp.current=e.matches;e.addListener(t),t()}else wp.current=!1}function l5(e,t,n){const{willChange:s}=t;for(const r in t){const i=t[r],a=n[r];if(Yt(i))e.addValue(r,i),qu(s)&&s.add(r);else if(Yt(a))e.addValue(r,ua(i,{owner:e})),qu(s)&&s.remove(r);else if(a!==i)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(r);e.addValue(r,ua(l!==void 0?l:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Kv=new WeakMap,u2=Object.keys(fl),c5=u2.length,Xv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],u5=dx.length;class d5{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ie.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Qd(n),this.isVariantNode=YS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&Yt(f)&&(f.set(l[h],!1),qu(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Kv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),c2.current||o5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:wp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Kv.delete(this.current),this.projection&&this.projection.unmount(),Ds(this.notifyUpdate),Ds(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=yi.has(t),r=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ie.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,r,i){let a,l;for(let c=0;c<c5;c++){const u=u2[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=fl[u];f&&(a=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Vi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Xv.length;s++){const r=Xv[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=l5(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<u5;s++){const r=dx[s],i=this.props[r];(hl(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=ua(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=vx(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Yt(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Tx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class d2 extends d5{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:r},i){let a=D4(s,t||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),a&&(a=r(a))),i){k4(this,s,a);const l=a5(this,s,a,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function h5(e){return window.getComputedStyle(e)}class f5 extends d2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(yi.has(n)){const s=Sx(n);return s&&s.default||0}else{const s=h5(t),r=(JS(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return JC(t,n)}build(t,n,s,r){mx(t,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return yx(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Yt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,r){rC(t,n,s,r)}}class m5 extends d2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(yi.has(n)){const s=Sx(n);return s&&s.default||0}return n=iC.has(n)?n:cx(n),t.getAttribute(n)}measureInstanceViewportBox(){return nt()}scrapeMotionValuesFromProps(t,n){return oC(t,n)}build(t,n,s,r){gx(t,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,s,r){aC(t,n,s,r)}mount(t){this.isSVGTag=xx(t.tagName),super.mount(t)}}const p5=(e,t)=>fx(e)?new m5(t,{enableHardwareAcceleration:!1}):new f5(t,{enableHardwareAcceleration:!0}),g5={layout:{ProjectionNode:o2,MeasureLayout:e2}},x5={...U4,...cI,...YO,...g5},qs=yR((e,t)=>KR(e,t,x5,p5));function h2(){const e=y.useRef(!1);return lx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function y5(){const e=h2(),[t,n]=y.useState(0),s=y.useCallback(()=>{e.current&&n(t+1)},[t]);return[y.useCallback(()=>Ie.postRender(s),[s]),t]}class v5 extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function b5({children:e,isPresent:t}){const n=y.useId(),s=y.useRef(null),r=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=r.current;if(t||!s.current||!i||!a)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),y.createElement(v5,{isPresent:t,childRef:s,sizeRef:r},y.cloneElement(e,{ref:s}))}const of=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const l=lC(w5),c=y.useId(),u=y.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return y.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),y.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),a==="popLayout"&&(e=y.createElement(b5,{isPresent:n},e)),y.createElement(qd.Provider,{value:u},e)};function w5(){return new Map}function j5(e){return y.useEffect(()=>()=>e(),[])}const $r=e=>e.key||"";function N5(e,t){e.forEach(n=>{const s=$r(n);t.set(s,n)})}function S5(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const Px=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=y.useContext(hx).forceRender||y5()[0],c=h2(),u=S5(e);let d=u;const h=y.useRef(new Map).current,f=y.useRef(d),m=y.useRef(new Map).current,p=y.useRef(!0);if(lx(()=>{p.current=!1,N5(u,m),f.current=d}),j5(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return y.createElement(y.Fragment,null,d.map(v=>y.createElement(of,{key:$r(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},v)));d=[...d];const x=f.current.map($r),b=u.map($r),w=x.length;for(let v=0;v<w;v++){const g=x[v];b.indexOf(g)===-1&&!h.has(g)&&h.set(g,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((v,g)=>{if(b.indexOf(g)!==-1)return;const j=m.get(g);if(!j)return;const S=x.indexOf(g);let k=v;if(!k){const N=()=>{h.delete(g);const C=Array.from(m.keys()).filter(E=>!b.includes(E));if(C.forEach(E=>m.delete(E)),f.current=u.filter(E=>{const P=$r(E);return P===g||C.includes(P)}),!h.size){if(c.current===!1)return;l(),s&&s()}};k=y.createElement(of,{key:$r(j),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:i,mode:a},j),h.set(g,k)}d.splice(S,0,k)}),d=d.map(v=>{const g=v.key;return h.has(g)?v:y.createElement(of,{key:$r(v),isPresent:!0,presenceAffectsLayout:i,mode:a},v)}),y.createElement(y.Fragment,null,h.size?d:d.map(v=>y.cloneElement(v)))},C5="/assets/asp-logo-Cq2CSw-i.jpg",k5="/crane-icon.svg",E5=[{label:"Dashboard",icon:o.jsx(BA,{size:18}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:o.jsx(OA,{size:18}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:o.jsx(zA,{size:18}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:o.jsx(IS,{size:18}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:o.jsx(Ll,{size:18}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:o.jsx(ss,{size:18}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:o.jsx(FS,{size:18}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:o.jsx(RS,{size:18}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:o.jsx(zn,{size:18}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:o.jsx(ul,{size:18}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:o.jsx(ln,{size:18}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:o.jsx(WA,{size:18}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Templates",icon:o.jsx(ln,{size:18}),href:"/admin/quotation-templates",roles:["admin","sales_agent"]}];function D5({isMobileOpen:e=!1,onMobileClose:t,isCollapsed:n,onCollapseToggle:s}){const{user:r}=ze(),i=Ps(),[a,l]=y.useState(!1),c=n!==void 0,u=c?n:a;if(y.useEffect(()=>{const b=()=>{window.innerWidth<1024&&l(!0)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),!r)return null;const d=E5.filter(b=>b.roles.includes(r.role)),h=(b,w)=>w?i.pathname===b:b==="/dashboard"&&i.pathname==="/"?!0:i.pathname.startsWith(b),f=()=>{c&&s?s(!u):l(b=>!b)},m=o.jsx(Px,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(qs.div,{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),o.jsx(qs.aside,{className:"fixed inset-y-0 left-0 z-50 w-72 max-w-[85%] bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-2xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},role:"navigation","aria-label":"Mobile navigation",children:x(!1)})]})}),p=o.jsx("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${u?"w-16":"w-72"} bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-xl`,role:"navigation","aria-label":"Main navigation",children:x(u)});return o.jsxs(o.Fragment,{children:[m,p]});function x(b){return o.jsxs("div",{className:"flex flex-col h-full text-white",children:[o.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-white/10",children:[o.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors duration-200 focus:outline-none","aria-label":b?"Expand sidebar":"Collapse sidebar",children:o.jsx(BS,{className:"h-6 w-6 text-white"})}),o.jsxs(Xn,{to:"/dashboard",className:"flex items-center group","aria-label":"Go to dashboard",children:[o.jsx("img",{src:C5,alt:"ASP Cranes",className:`object-contain transition-all duration-300 group-hover:scale-105 ${b?"h-8 w-8":"h-10 w-auto"}`,onError:w=>{w.currentTarget.src=k5,w.currentTarget.onerror=null}}),!b&&o.jsx(qs.span,{className:"ml-3 text-xl font-bold bg-gradient-to-r from-white to-brand-gold bg-clip-text text-transparent",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"ASP CRM"})]})]}),o.jsx("nav",{className:"flex-1 py-6",role:"navigation",children:o.jsx("ul",{className:"space-y-1 px-3",role:"list",children:d.map(w=>{const v=h(w.href,w.end);return o.jsx("li",{role:"listitem",children:o.jsxs(Xn,{to:w.href,className:`group flex items-center rounded-lg transition-all duration-200 ${b?"justify-center p-3":"p-3"} ${v?"bg-brand-gold text-brand-blue font-semibold shadow-lg scale-105":"text-white/90 hover:bg-white/10 hover:text-white hover:scale-[1.02]"}`,onClick:t,"aria-current":v?"page":void 0,children:[o.jsx("span",{className:`flex-shrink-0 transition-transform group-hover:scale-110 ${v?"text-brand-blue":""}`,children:w.icon}),!b&&o.jsx(qs.span,{className:"ml-3 text-sm font-medium",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05},children:w.label}),b&&o.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50 whitespace-nowrap",children:[w.label,o.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},w.href)})})}),o.jsx("div",{className:"p-4 border-t border-white/10",children:o.jsxs("div",{className:`flex items-center ${b?"justify-center":"space-x-3"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:(r==null?void 0:r.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(r==null?void 0:r.name)||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-brand-gold/50 hover:border-brand-gold transition-colors"})}),!b&&r&&o.jsxs(qs.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[o.jsx("p",{className:"text-sm font-semibold text-white truncate",children:r.name||"User"}),o.jsx("p",{className:"text-xs text-white/70 truncate capitalize",children:r.role?r.role.replace("_"," "):"User"}),o.jsxs("button",{onClick:()=>{t&&t();const w=new CustomEvent("sidebar-logout");document.dispatchEvent(w)},className:"mt-2 flex items-center text-xs text-white/80 hover:text-brand-gold px-2 py-1 rounded-md hover:bg-white/10 transition-all duration-200","aria-label":"Logout",children:[o.jsx($S,{className:"h-3 w-3 mr-2"}),"Logout"]})]})]})})]})}}function f2(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=f2(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function m2(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=f2(e))&&(s&&(s+=" "),s+=t);return s}const Jv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Zv=m2,Ca=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Zv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=Jv(d)||Jv(h);return r[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[x,b]=p;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...u,h,f]:u},[]);return Zv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},T5=Ca("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function ha({className:e,variant:t,size:n,...s}){return o.jsx("div",{className:T5({variant:t,size:n,className:e}),...s})}const p2=y.memo(({notification:e,onClick:t})=>o.jsx("button",{onClick:()=>t(e),className:`w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors ${e.read?"":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-brand-blue"}`,"aria-describedby":`notification-${e.id}`,children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${e.read?"bg-gray-300":"bg-brand-blue"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),e.message&&o.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt||Date.now()).toLocaleDateString()})]})]})}));p2.displayName="NotificationItem";const P5=y.memo(function({onMobileMenuClick:t}){const{user:n,logout:s}=ze(),r=Qt(),[i,a]=y.useState([]),[l,c]=y.useState(!1),[u,d]=y.useState(!1);y.useEffect(()=>{n&&h()},[n]),y.useEffect(()=>{const x=b=>{b.target.closest("[data-dropdown]")||(c(!1),d(!1))};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const h=async()=>{if(n)try{const x=await bS(n.id);a(x)}catch(x){console.error("Failed to fetch notifications:",x)}},f=async()=>{try{await s(),r("/login")}catch(x){console.error("Logout error:",x),r("/login")}},m=async x=>{if(!x.read)try{await wS(x.id),await h()}catch(b){console.error("Failed to mark notification as read:",b)}x.link&&r(x.link),c(!1)},p=i.filter(x=>!x.read).length;return o.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm border-b border-gray-200/60 h-16 flex items-center justify-between px-4 lg:px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[t&&o.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Toggle navigation menu",children:o.jsx(BS,{className:"h-5 w-5 text-gray-700"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-brand-blue to-brand-blue/80 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:"ASP CRM"}),o.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Crane Management System"})]})]})]}),o.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(_s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search projects, customers, equipment...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all","aria-label":"Search"})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Quick settings",children:o.jsx(ul,{className:"h-5 w-5 text-gray-600"})}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":`Notifications ${p>0?`(${p} unread)`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[o.jsx(q0,{className:"h-5 w-5 text-gray-600"}),p>0&&o.jsx(ha,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center animate-pulse",children:p>99?"99+":p})]}),l&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[p," unread"]})]})}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(q0,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):o.jsx("div",{className:"p-2 space-y-1",children:i.map(x=>o.jsx(p2,{notification:x,onClick:m},x.id))})}),i.length>0&&o.jsx("div",{className:"p-3 border-t border-gray-100",children:o.jsx("button",{className:"w-full text-sm text-brand-blue hover:text-brand-blue/80 font-medium",children:"View all notifications"})})]})]}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"User menu","aria-expanded":u,"aria-haspopup":"true",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-200 hover:border-brand-blue/30 transition-colors"}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-400 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"hidden sm:block text-left",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 leading-tight",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 capitalize leading-tight",children:n!=null&&n.role?n.role.replace("_"," "):"User"})]})]}),u&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-3 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-10 w-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:(n==null?void 0:n.email)||"user@example.com"})]})]})}),o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(dl,{className:"h-4 w-4 mr-3 text-gray-400"}),"View Profile"]}),o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(ul,{className:"h-4 w-4 mr-3 text-gray-400"}),"Account Settings"]})]}),o.jsx("div",{className:"border-t border-gray-100 py-2",children:o.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[o.jsx($S,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]})]})]})]})}),_5=y.memo(function({requiredRole:t,children:n}){const{isAuthenticated:s,user:r,logout:i}=ze(),a=Qt(),[l,c]=y.useState(!1),[u,d]=y.useState(!1),[h,f]=y.useState(!1),m=y.useRef(!1);if(y.useEffect(()=>{const x=()=>{i().then(()=>{a("/login")}).catch(b=>{console.error("Logout error:",b),a("/login")})};return document.addEventListener("sidebar-logout",x),()=>{document.removeEventListener("sidebar-logout",x)}},[i,a]),y.useEffect(()=>{m.current},[a,s,r,t]),y.useEffect(()=>{const x=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),l)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-brand-gold rounded-full animate-spin",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Application"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please wait..."})]})});if(!s)return o.jsx(In,{to:"/login"});if(t&&(r==null?void 0:r.role)!==t)return o.jsx(In,{to:"/dashboard"});const p=()=>{d(!u)};return o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 overflow-hidden",children:[o.jsx(D5,{isMobileOpen:u,onMobileClose:()=>d(!1),isCollapsed:h,onCollapseToggle:f}),o.jsxs("div",{className:`flex flex-col flex-1 overflow-hidden transition-all duration-300 ${h?"lg:ml-16":"lg:ml-72"}`,children:[o.jsx(P5,{onMobileMenuClick:p}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-transparent",children:o.jsx("div",{className:"min-h-full",children:n||o.jsx(qN,{})})})]})]})}),Se=e=>isNaN(e)||e==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),M5=Ca("relative bg-white/80 backdrop-blur-sm border border-gray-200/60 transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5",{variants:{variant:{default:"rounded-xl shadow-sm",bordered:"rounded-xl border-2",flat:"rounded-lg",glass:"rounded-xl bg-white/60 backdrop-blur-md border-white/20 shadow-xl",gradient:"rounded-xl bg-gradient-to-br from-white to-gray-50/50 shadow-md"},padding:{none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-5",lg:"p-5 sm:p-6",xl:"p-6 sm:p-8"},size:{default:"",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"w-full"}},defaultVariants:{variant:"default",padding:"md",size:"default"}}),ee=y.memo(ne.forwardRef(({className:e="",variant:t,padding:n,size:s,as:r="div",children:i,hover:a=!0,loading:l=!1,...c},u)=>{const d=M5({variant:t,padding:n,size:s}),h=a?"hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5":"",f=l?"animate-pulse":"";return o.jsxs(r,{className:`${d} ${h} ${f} ${e}`,ref:u,role:r==="div"?"article":void 0,...c,children:[l&&o.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin"})}),i]})}));ee.displayName="Card";const fe=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pb-4 border-b border-gray-200/60 ${e}`,...n,children:t})));fe.displayName="CardHeader";const me=y.memo(ne.forwardRef(({className:e="",gradient:t=!1,level:n=2,children:s,...r},i)=>{const a=`h${n}`,l=t?"bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent":"";return o.jsx(a,{ref:i,className:`text-lg font-semibold text-gray-900 leading-tight ${l} ${e}`,...r,children:s})}));me.displayName="CardTitle";const A5=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("p",{ref:s,className:`text-sm text-gray-600 leading-relaxed ${e}`,...n,children:t})));A5.displayName="CardDescription";const se=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 ${e}`,...n,children:t})));se.displayName="CardContent";const R5=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 mt-4 border-t border-gray-200/60 ${e}`,...n,children:t})));R5.displayName="CardFooter";const I5=Ca("group relative overflow-hidden",{variants:{variant:{default:"bg-white/90 backdrop-blur-sm",primary:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",secondary:"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200",accent:"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",warning:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200",error:"bg-gradient-to-br from-red-50 to-rose-50 border-red-200",glass:"bg-white/60 backdrop-blur-md border-white/20"},size:{sm:"min-h-[100px]",default:"min-h-[120px]",lg:"min-h-[140px]"}},defaultVariants:{variant:"default",size:"default"}}),Lt=y.memo(ne.forwardRef(({className:e="",variant:t,size:n,title:s,value:r,icon:i,trend:a,subtitle:l,footer:c,loading:u=!1,gradient:d=!1,...h},f)=>{const p={primary:"bg-gradient-to-br from-blue-500 to-indigo-600",secondary:"bg-gradient-to-br from-gray-500 to-slate-600",accent:"bg-gradient-to-br from-amber-500 to-yellow-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-orange-500 to-red-600",error:"bg-gradient-to-br from-red-500 to-rose-600",glass:"bg-gradient-to-br from-brand-blue to-brand-blue/80",default:"bg-gradient-to-br from-brand-blue to-brand-blue/80"}[t||"default"],x=()=>a?a.value>0?o.jsx(lp,{className:"w-3 h-3"}):a.value<0?o.jsx(ZA,{className:"w-3 h-3"}):o.jsx(HA,{className:"w-3 h-3"}):null,b=()=>a?a.isPositive?"text-green-600":"text-red-600":"";return o.jsxs(ee,{ref:f,className:`${I5({variant:t,size:n})} ${e}`,variant:d?"gradient":"default",padding:"lg",hover:!u,loading:u,...h,children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-full transform translate-x-8 -translate-y-8 group-hover:scale-110 transition-transform duration-300"}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1 leading-tight",children:s}),l&&o.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:l})]}),i&&o.jsx("div",{className:`p-2.5 rounded-xl ${p} shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300`,children:o.jsx("div",{className:"text-white w-5 h-5 flex items-center justify-center",children:i})})]}),o.jsx("div",{className:"flex-1 flex items-center",children:o.jsx("div",{className:"text-2xl font-bold text-gray-900 group-hover:text-brand-blue transition-colors duration-300",children:u?o.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}):r})}),a&&o.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[o.jsxs("div",{className:`flex items-center space-x-1 ${b()}`,children:[x(),o.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.value),"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),c&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/60",children:c})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-blue/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})}));Lt.displayName="StatCard";const O5=y.memo(()=>o.jsxs(ee,{className:"min-h-[120px] animate-pulse",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"})]}),o.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}));O5.displayName="StatCardSkeleton";const L5=e=>{switch(e){case"lead":return o.jsx(dl,{className:"h-4 w-4"});case"deal":return o.jsx(FA,{className:"h-4 w-4"});case"job":return o.jsx(ln,{className:"h-4 w-4"});case"equipment":return o.jsx(sn,{className:"h-4 w-4"});case"user":return o.jsx(dl,{className:"h-4 w-4"});default:return o.jsx(pi,{className:"h-4 w-4"})}},F5=e=>{switch(e){case"success":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"info":default:return"text-blue-600 bg-blue-50"}},$5=e=>{const n=new Date().getTime()-e.getTime(),s=Math.floor(n/(1e3*60)),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s}m ago`:r<24?`${r}h ago`:i<7?`${i}d ago`:e.toLocaleDateString()},z5=[{id:"1",type:"lead",title:"New lead created",description:"John Doe submitted a crane rental inquiry",timestamp:new Date(Date.now()-1e3*60*15),status:"info",user:"System"},{id:"2",type:"deal",title:"Deal closed",description:"Construction project deal worth 2,50,000 closed successfully",timestamp:new Date(Date.now()-1e3*60*60*2),status:"success",user:"Sales Agent"},{id:"3",type:"job",title:"Job scheduled",description:"Crane deployment for Site A scheduled for tomorrow",timestamp:new Date(Date.now()-1e3*60*60*4),status:"info",user:"Operations Manager"},{id:"4",type:"equipment",title:"Maintenance alert",description:"Crane CR-001 requires scheduled maintenance",timestamp:new Date(Date.now()-1e3*60*60*6),status:"warning",user:"System"},{id:"5",type:"user",title:"New user registered",description:"New operator account created for Mike Johnson",timestamp:new Date(Date.now()-1e3*60*60*24),status:"info",user:"Admin"}];function B5({activities:e,className:t}){const[n,s]=y.useState([]),[r,i]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{if(e)s(e);else{const l=await jS(5);s(l)}}catch(l){console.error("Error fetching activities:",l),s(z5)}finally{i(!1)}})()},[e]),r?o.jsxs(ee,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(On,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),o.jsx("p",{children:"Loading activities..."})]})})]}):o.jsxs(ee,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(On,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(pi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"No recent activities"})]}):n.map(a=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${F5(a.status)}`,children:L5(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:$5(a.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),a.user&&o.jsx("div",{className:"flex items-center mt-2",children:o.jsx(ha,{variant:"secondary",className:"text-xs",children:a.user})})]})]},a.id))}),n.length>0&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all activities "})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vl(e){return e+.5|0}const Js=(e,t,n)=>Math.max(Math.min(e,n),t);function xo(e){return Js(Vl(e*2.55),0,255)}function fr(e){return Js(Vl(e*255),0,255)}function fs(e){return Js(Vl(e/2.55)/100,0,1)}function eb(e){return Js(Vl(e*100),0,100)}const mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jp=[..."0123456789ABCDEF"],V5=e=>jp[e&15],U5=e=>jp[(e&240)>>4]+jp[e&15],vc=e=>(e&240)>>4===(e&15),W5=e=>vc(e.r)&&vc(e.g)&&vc(e.b)&&vc(e.a);function H5(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&mn[e[1]]*17,g:255&mn[e[2]]*17,b:255&mn[e[3]]*17,a:t===5?mn[e[4]]*17:255}:(t===7||t===9)&&(n={r:mn[e[1]]<<4|mn[e[2]],g:mn[e[3]]<<4|mn[e[4]],b:mn[e[5]]<<4|mn[e[6]],a:t===9?mn[e[7]]<<4|mn[e[8]]:255})),n}const q5=(e,t)=>e<255?t(e):"";function G5(e){var t=W5(e)?V5:U5;return e?"#"+t(e.r)+t(e.g)+t(e.b)+q5(e.a,t):void 0}const Y5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function g2(e,t,n){const s=t*Math.min(n,1-n),r=(i,a=(i+e/30)%12)=>n-s*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function Q5(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function K5(e,t,n){const s=g2(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function X5(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function _x(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),a=Math.min(n,s,r),l=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=l>.5?d/(2-i-a):d/(i+a),c=X5(n,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function Mx(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(fr)}function Ax(e,t,n){return Mx(g2,e,t,n)}function J5(e,t,n){return Mx(K5,e,t,n)}function Z5(e,t,n){return Mx(Q5,e,t,n)}function x2(e){return(e%360+360)%360}function eL(e){const t=Y5.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?xo(+t[5]):fr(+t[5]));const r=x2(+t[2]),i=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?s=J5(r,i,a):t[1]==="hsv"?s=Z5(r,i,a):s=Ax(r,i,a),{r:s[0],g:s[1],b:s[2],a:n}}function tL(e,t){var n=_x(e);n[0]=x2(n[0]+t),n=Ax(n),e.r=n[0],e.g=n[1],e.b=n[2]}function nL(e){if(!e)return;const t=_x(e),n=t[0],s=eb(t[1]),r=eb(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${fs(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const tb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sL(){const e={},t=Object.keys(nb),n=Object.keys(tb);let s,r,i,a,l;for(s=0;s<t.length;s++){for(a=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,tb[i]);i=parseInt(nb[a],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let bc;function rL(e){bc||(bc=sL(),bc.transparent=[0,0,0,0]);const t=bc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const iL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function aL(e){const t=iL.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const a=+t[7];n=t[8]?xo(a):Js(a*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?xo(s):Js(s,0,255)),r=255&(t[4]?xo(r):Js(r,0,255)),i=255&(t[6]?xo(i):Js(i,0,255)),{r:s,g:r,b:i,a:n}}}function oL(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const lf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ci=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function lL(e,t,n){const s=Ci(fs(e.r)),r=Ci(fs(e.g)),i=Ci(fs(e.b));return{r:fr(lf(s+n*(Ci(fs(t.r))-s))),g:fr(lf(r+n*(Ci(fs(t.g))-r))),b:fr(lf(i+n*(Ci(fs(t.b))-i))),a:e.a+n*(t.a-e.a)}}function wc(e,t,n){if(e){let s=_x(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Ax(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function y2(e,t){return e&&Object.assign(t||{},e)}function sb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=fr(e[3]))):(t=y2(e,{r:0,g:0,b:0,a:1}),t.a=fr(t.a)),t}function cL(e){return e.charAt(0)==="r"?aL(e):eL(e)}class pl{constructor(t){if(t instanceof pl)return t;const n=typeof t;let s;n==="object"?s=sb(t):n==="string"&&(s=H5(t)||rL(t)||cL(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=y2(this._rgb);return t&&(t.a=fs(t.a)),t}set rgb(t){this._rgb=sb(t)}rgbString(){return this._valid?oL(this._rgb):void 0}hexString(){return this._valid?G5(this._rgb):void 0}hslString(){return this._valid?nL(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=a*s.a+(1-a)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=lL(this._rgb,t._rgb,n)),this}clone(){return new pl(this.rgb)}alpha(t){return this._rgb.a=fr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Vl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return wc(this._rgb,2,t),this}darken(t){return wc(this._rgb,2,-t),this}saturate(t){return wc(this._rgb,1,t),this}desaturate(t){return wc(this._rgb,1,-t),this}rotate(t){return tL(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function as(){}const uL=(()=>{let e=0;return()=>e++})();function De(e){return e==null}function rt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function je(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Mt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Gn(e,t){return Mt(e)?e:t}function ye(e,t){return typeof e>"u"?t:e}const dL=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,v2=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Fe(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function _e(e,t,n,s){let r,i,a;if(rt(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(je(e))for(a=Object.keys(e),i=a.length,r=0;r<i;r++)t.call(n,e[a[r]],a[r])}function Yu(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Qu(e){if(rt(e))return e.map(Qu);if(je(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Qu(e[n[r]]);return t}return e}function b2(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function hL(e,t,n,s){if(!b2(e))return;const r=t[e],i=n[e];je(r)&&je(i)?gl(r,i,s):t[e]=Qu(i)}function gl(e,t,n){const s=rt(t)?t:[t],r=s.length;if(!je(e))return e;n=n||{};const i=n.merger||hL;let a;for(let l=0;l<r;++l){if(a=s[l],!je(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],e,a,n)}return e}function Lo(e,t){return gl(e,t,{merger:fL})}function fL(e,t,n){if(!b2(e))return;const s=t[e],r=n[e];je(s)&&je(r)?Lo(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Qu(r))}const rb={"":e=>e,x:e=>e.x,y:e=>e.y};function mL(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function pL(e){const t=mL(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function ci(e,t){return(rb[t]||(rb[t]=pL(t)))(e)}function Rx(e){return e.charAt(0).toUpperCase()+e.slice(1)}const xl=e=>typeof e<"u",br=e=>typeof e=="function",ib=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function gL(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Me=Math.PI,Ge=2*Me,xL=Ge+Me,Ku=Number.POSITIVE_INFINITY,yL=Me/180,ht=Me/2,Tr=Me/4,ab=Me*2/3,w2=Math.log10,ns=Math.sign;function Fo(e,t,n){return Math.abs(e-t)<n}function ob(e){const t=Math.round(e);e=Fo(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(w2(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function vL(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function bL(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function yl(e){return!bL(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function wL(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function jL(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function xs(e){return e*(Me/180)}function NL(e){return e*(180/Me)}function lb(e){if(!Mt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function j2(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Me&&(i+=Ge),{angle:i,distance:r}}function Np(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function SL(e,t){return(e-t+xL)%Ge-Me}function Jt(e){return(e%Ge+Ge)%Ge}function vl(e,t,n,s){const r=Jt(e),i=Jt(t),a=Jt(n),l=Jt(i-r),c=Jt(a-r),u=Jt(r-i),d=Jt(r-a);return r===i||r===a||s&&i===a||l>c&&u<d}function Dt(e,t,n){return Math.max(t,Math.min(n,e))}function CL(e){return Dt(e,-32768,32767)}function ys(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function Ix(e,t,n){n=n||(a=>e[a]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Qr=(e,t,n,s)=>Ix(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),kL=(e,t,n)=>Ix(e,n,s=>e[s][t]>=n);function EL(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const N2=["push","pop","shift","splice","unshift"];function DL(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),N2.forEach(n=>{const s="_onData"+Rx(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const a=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),a}})})}function cb(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(N2.forEach(i=>{delete e[i]}),delete e._chartjs)}function S2(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const C2=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function k2(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,C2.call(window,()=>{s=!1,e.apply(t,n)}))}}function TL(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Ox=e=>e==="start"?"left":e==="end"?"right":"center",kt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,PL=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function _L(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:a,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:h,max:f,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(r=Math.min(Qr(c,d,h).lo,n?s:Qr(t,d,a.getPixelForValue(h)).lo),u){const x=c.slice(0,r+1).reverse().findIndex(b=>!De(b[l.axis]));r-=Math.max(0,x)}r=Dt(r,0,s-1)}if(p){let x=Math.max(Qr(c,a.axis,f,!0).hi+1,n?0:Qr(t,d,a.getPixelForValue(f),!0).hi+1);if(u){const b=c.slice(x-1).findIndex(w=>!De(w[l.axis]));x+=Math.max(0,b)}i=Dt(x,r,s)-r}else i=s-r}return{start:r,count:i}}function ML(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const jc=e=>e===0||e===1,ub=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ge/n)),db=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ge/n)+1,$o={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ht)+1,easeOutSine:e=>Math.sin(e*ht),easeInOutSine:e=>-.5*(Math.cos(Me*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>jc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>jc(e)?e:ub(e,.075,.3),easeOutElastic:e=>jc(e)?e:db(e,.075,.3),easeInOutElastic(e){return jc(e)?e:e<.5?.5*ub(e*2,.1125,.45):.5+.5*db(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-$o.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?$o.easeInBounce(e*2)*.5:$o.easeOutBounce(e*2-1)*.5+.5};function Lx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function hb(e){return Lx(e)?e:new pl(e)}function cf(e){return Lx(e)?e:new pl(e).saturate(.5).darken(.1).hexString()}const AL=["x","y","borderWidth","radius","tension"],RL=["color","borderColor","backgroundColor"];function IL(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:RL},numbers:{type:"number",properties:AL}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function OL(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fb=new Map;function LL(e,t){t=t||{};const n=e+JSON.stringify(t);let s=fb.get(n);return s||(s=new Intl.NumberFormat(e,t),fb.set(n,s)),s}function Fx(e,t,n){return LL(t,n).format(e)}const FL={values(e){return rt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=$L(e,n)}const a=w2(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Fx(e,s,c)}};function $L(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var E2={formatters:FL};function zL(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:E2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ui=Object.create(null),Sp=Object.create(null);function zo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function uf(e,t,n){return typeof t=="string"?gl(zo(e,t),n):gl(zo(e,""),t)}class BL{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>cf(r.backgroundColor),this.hoverBorderColor=(s,r)=>cf(r.borderColor),this.hoverColor=(s,r)=>cf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return uf(this,t,n)}get(t){return zo(this,t)}describe(t,n){return uf(Sp,t,n)}override(t,n){return uf(ui,t,n)}route(t,n,s,r){const i=zo(this,t),a=zo(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[r];return je(c)?Object.assign({},u,c):ye(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var et=new BL({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[IL,OL,zL]);function VL(e){return!e||De(e.size)||De(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function mb(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Pr(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function pb(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Cp(e,t,n,s){D2(e,t,n,s,null)}function D2(e,t,n,s,r){let i,a,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,x=t.radius;let b=(p||0)*yL;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(x)||x<=0)){switch(e.beginPath(),m){default:r?e.ellipse(n,s,r/2,x,0,0,Ge):e.arc(n,s,x,0,Ge),e.closePath();break;case"triangle":d=r?r/2:x,e.moveTo(n+Math.sin(b)*d,s-Math.cos(b)*x),b+=ab,e.lineTo(n+Math.sin(b)*d,s-Math.cos(b)*x),b+=ab,e.lineTo(n+Math.sin(b)*d,s-Math.cos(b)*x),e.closePath();break;case"rectRounded":u=x*.516,c=x-u,a=Math.cos(b+Tr)*c,h=Math.cos(b+Tr)*(r?r/2-u:c),l=Math.sin(b+Tr)*c,f=Math.sin(b+Tr)*(r?r/2-u:c),e.arc(n-h,s-l,u,b-Me,b-ht),e.arc(n+f,s-a,u,b-ht,b),e.arc(n+h,s+l,u,b,b+ht),e.arc(n-f,s+a,u,b+ht,b+Me),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*x,d=r?r/2:c,e.rect(n-d,s-c,2*d,2*c);break}b+=Tr;case"rectRot":h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+f,s-a),e.lineTo(n+h,s+l),e.lineTo(n-f,s+a),e.closePath();break;case"crossRot":b+=Tr;case"cross":h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"star":h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a),b+=Tr,h=Math.cos(b)*(r?r/2:x),a=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"line":a=r?r/2:Math.cos(b)*x,l=Math.sin(b)*x,e.moveTo(n-a,s-l),e.lineTo(n+a,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(r?r/2:x),s+Math.sin(b)*x);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function bl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Zd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function eh(e){e.restore()}function UL(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function WL(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function HL(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),De(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function qL(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),a=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function GL(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function wl(e,t,n,s,r,i={}){const a=rt(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,HL(e,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&GL(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),De(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,s,i.maxWidth)),e.fillText(u,n,s,i.maxWidth),qL(e,n,s,u,i),s+=Number(r.lineHeight);e.restore()}function Xu(e,t){const{x:n,y:s,w:r,h:i,radius:a}=t;e.arc(n+a.topLeft,s+a.topLeft,a.topLeft,1.5*Me,Me,!0),e.lineTo(n,s+i-a.bottomLeft),e.arc(n+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,Me,ht,!0),e.lineTo(n+r-a.bottomRight,s+i),e.arc(n+r-a.bottomRight,s+i-a.bottomRight,a.bottomRight,ht,0,!0),e.lineTo(n+r,s+a.topRight),e.arc(n+r-a.topRight,s+a.topRight,a.topRight,0,-ht,!0),e.lineTo(n+a.topLeft,s)}const YL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,QL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function KL(e,t){const n=(""+e).match(YL);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const XL=e=>+e||0;function $x(e,t){const n={},s=je(t),r=s?Object.keys(t):t,i=je(e)?s?a=>ye(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of r)n[a]=XL(i(a));return n}function T2(e){return $x(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Zi(e){return $x(e,["topLeft","topRight","bottomLeft","bottomRight"])}function En(e){const t=T2(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Tt(e,t){e=e||{},t=t||et.font;let n=ye(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=ye(e.style,t.style);s&&!(""+s).match(QL)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:ye(e.family,t.family),lineHeight:KL(ye(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:ye(e.weight,t.weight),string:""};return r.string=VL(r),r}function Nc(e,t,n,s){let r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&a!==void 0)return a}function JL(e,t,n){const{min:s,max:r}=e,i=v2(t,(r-s)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(s,-Math.abs(i)),max:a(r,i)}}function bi(e,t){return Object.assign(Object.create(e),t)}function zx(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=A2("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>zx([l,...e],t,i,s)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return _2(l,c,()=>a3(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return xb(l).includes(c)},ownKeys(l){return xb(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function fa(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:P2(e,s),setContext:i=>fa(e,i,n,s),override:i=>fa(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete e[a],!0},get(i,a,l){return _2(i,a,()=>e3(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(i,a,l){return e[a]=l,delete i[a],!0}})}function P2(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:br(n)?n:()=>n,isIndexable:br(s)?s:()=>s}}const ZL=(e,t)=>e?e+Rx(t):t,Bx=(e,t)=>je(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function _2(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function e3(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:a}=e;let l=s[t];return br(l)&&a.isScriptable(t)&&(l=t3(t,l,e,n)),rt(l)&&l.length&&(l=n3(t,l,e,a.isIndexable)),Bx(t,l)&&(l=fa(l,r,i&&i[t],a)),l}function t3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,a||s);return l.delete(e),Bx(e,c)&&(c=Vx(r._scopes,r,e,c)),c}function n3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(je(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Vx(u,r,e,d);t.push(fa(h,i,a&&a[e],l))}}return t}function M2(e,t,n){return br(e)?e(t,n):e}const s3=(e,t)=>e===!0?t:typeof e=="string"?ci(t,e):void 0;function r3(e,t,n,s,r){for(const i of t){const a=s3(n,i);if(a){e.add(a);const l=M2(a._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(a===!1&&typeof s<"u"&&n!==s)return null}return!1}function Vx(e,t,n,s){const r=t._rootScopes,i=M2(t._fallback,n,s),a=[...e,...r],l=new Set;l.add(s);let c=gb(l,a,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=gb(l,a,i,c,s),c===null)?!1:zx(Array.from(l),[""],r,i,()=>i3(t,n,s))}function gb(e,t,n,s,r){for(;n;)n=r3(e,t,n,s,r);return n}function i3(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return rt(r)&&je(n)?n:r||{}}function a3(e,t,n,s){let r;for(const i of t)if(r=A2(ZL(i,e),n),typeof r<"u")return Bx(e,r)?Vx(n,s,e,r):r}function A2(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function xb(e){let t=e._keys;return t||(t=e._keys=o3(e._scopes)),t}function o3(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const l3=Number.EPSILON||1e-14,ma=(e,t)=>t<e.length&&!e[t].skip&&e[t],R2=e=>e==="x"?"y":"x";function c3(e,t,n,s){const r=e.skip?t:e,i=t,a=n.skip?t:n,l=Np(i,r),c=Np(a,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=s*u,f=s*d;return{previous:{x:i.x-h*(a.x-r.x),y:i.y-h*(a.y-r.y)},next:{x:i.x+f*(a.x-r.x),y:i.y+f*(a.y-r.y)}}}function u3(e,t,n){const s=e.length;let r,i,a,l,c,u=ma(e,0);for(let d=0;d<s-1;++d)if(c=u,u=ma(e,d+1),!(!c||!u)){if(Fo(t[d],0,l3)){n[d]=n[d+1]=0;continue}r=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),n[d]=r*a*t[d],n[d+1]=i*a*t[d])}}function d3(e,t,n="x"){const s=R2(n),r=e.length;let i,a,l,c=ma(e,0);for(let u=0;u<r;++u){if(a=l,l=c,c=ma(e,u+1),!l)continue;const d=l[n],h=l[s];a&&(i=(d-a[n])/3,l[`cp1${n}`]=d-i,l[`cp1${s}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${s}`]=h+i*t[u])}}function h3(e,t="x"){const n=R2(t),s=e.length,r=Array(s).fill(0),i=Array(s);let a,l,c,u=ma(e,0);for(a=0;a<s;++a)if(l=c,c=u,u=ma(e,a+1),!!c){if(u){const d=u[t]-c[t];r[a]=d!==0?(u[n]-c[n])/d:0}i[a]=l?u?ns(r[a-1])!==ns(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}u3(e,r,i),d3(e,i,t)}function Sc(e,t,n){return Math.max(Math.min(e,n),t)}function f3(e,t){let n,s,r,i,a,l=bl(e[0],t);for(n=0,s=e.length;n<s;++n)a=i,i=l,l=n<s-1&&bl(e[n+1],t),i&&(r=e[n],a&&(r.cp1x=Sc(r.cp1x,t.left,t.right),r.cp1y=Sc(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Sc(r.cp2x,t.left,t.right),r.cp2y=Sc(r.cp2y,t.top,t.bottom)))}function m3(e,t,n,s,r){let i,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")h3(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)l=e[i],c=c3(u,l,e[Math.min(i+1,a-(s?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&f3(e,n)}function Ux(){return typeof window<"u"&&typeof document<"u"}function Wx(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ju(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const th=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function p3(e,t){return th(e).getPropertyValue(t)}const g3=["top","right","bottom","left"];function ti(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=g3[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const x3=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function y3(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let a=!1,l,c;if(x3(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function zr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=th(n),i=r.boxSizing==="border-box",a=ti(r,"padding"),l=ti(r,"border","width"),{x:c,y:u,box:d}=y3(e,n),h=a.left+(d&&l.left),f=a.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function v3(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&Wx(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const a=i.getBoundingClientRect(),l=th(i),c=ti(l,"border","width"),u=ti(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,s=Ju(l.maxWidth,i,"clientWidth"),r=Ju(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Ku,maxHeight:r||Ku}}const Cc=e=>Math.round(e*10)/10;function b3(e,t,n,s){const r=th(e),i=ti(r,"margin"),a=Ju(r.maxWidth,e,"clientWidth")||Ku,l=Ju(r.maxHeight,e,"clientHeight")||Ku,c=v3(e,t,n);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=ti(r,"border","width"),m=ti(r,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Cc(Math.min(u,a,c.maxWidth)),d=Cc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Cc(u/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=Cc(Math.floor(d*s))),{width:u,height:d}}function yb(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||a.height!==r||a.width!==i?(e.currentDevicePixelRatio=s,a.height=r,a.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const w3=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Ux()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function vb(e,t){const n=p3(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Br(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function j3(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function N3(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Br(e,r,n),l=Br(r,i,n),c=Br(i,t,n),u=Br(a,l,n),d=Br(l,c,n);return Br(u,d,n)}const S3=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},C3=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ea(e,t,n){return e?S3(t,n):C3()}function I2(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function O2(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function L2(e){return e==="angle"?{between:vl,compare:SL,normalize:Jt}:{between:ys,compare:(t,n)=>t-n,normalize:t=>t}}function bb({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function k3(e,t,n){const{property:s,start:r,end:i}=n,{between:a,normalize:l}=L2(s),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&a(l(t[u%c][s]),r,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function F2(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,a=t.length,{compare:l,between:c,normalize:u}=L2(s),{start:d,end:h,loop:f,style:m}=k3(e,t,n),p=[];let x=!1,b=null,w,v,g;const j=()=>c(r,g,w)&&l(r,g)!==0,S=()=>l(i,w)===0||c(i,g,w),k=()=>x||j(),N=()=>!x||S();for(let C=d,E=d;C<=h;++C)v=t[C%a],!v.skip&&(w=u(v[s]),w!==g&&(x=c(w,r,i),b===null&&k()&&(b=l(w,r)===0?C:E),b!==null&&N()&&(p.push(bb({start:b,end:C,loop:f,count:a,style:m})),b=null),E=C,g=w));return b!==null&&p.push(bb({start:b,end:h,loop:f,count:a,style:m})),p}function $2(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=F2(s[r],e.points,t);i.length&&n.push(...i)}return n}function E3(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function D3(e,t,n,s){const r=e.length,i=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&i.push({start:t%r,end:a%r,loop:s}),i}function T3(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:a,end:l}=E3(n,r,i,s);if(s===!0)return wb(e,[{start:a,end:l,loop:i}],n,t);const c=l<a?l+r:l,u=!!e._fullLoop&&a===0&&l===r-1;return wb(e,D3(n,a,c,u),n,t)}function wb(e,t,n,s){return!s||!s.setContext||!n?t:P3(e,t,n,s)}function P3(e,t,n,s){const r=e._chart.getContext(),i=jb(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,x,b,w){const v=l?-1:1;if(p!==x){for(p+=c;n[p%c].skip;)p-=v;for(;n[x%c].skip;)x+=v;p%c!==x%c&&(u.push({start:p%c,end:x%c,loop:b,style:w}),d=w,h=x%c)}}for(const p of t){h=l?h:p.start;let x=n[h%c],b;for(f=h+1;f<=p.end;f++){const w=n[f%c];b=jb(s.setContext(bi(r,{type:"segment",p0:x,p1:w,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),_3(b,d)&&m(h,f-1,p.loop,d),x=w,d=b}h<f-1&&m(h,f-1,p.loop,d)}return u}function jb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function _3(e,t){if(!t)return!1;const n=[],s=function(r,i){return Lx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function kc(e,t,n){return e.options.clip?e[n]:t[n]}function M3(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:kc(n,t,"left"),right:kc(n,t,"right"),top:kc(s,t,"top"),bottom:kc(s,t,"bottom")}:t}function z2(e,t){const n=t._clip;if(n.disabled)return!1;const s=M3(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class A3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],a=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(s-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=C2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[a]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ls=new A3;const Nb="transparent",R3={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=hb(e||Nb),r=s.valid&&hb(t||Nb);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class I3{constructor(t,n,s,r){const i=n[s];r=Nc([t.to,r,i,t.from]);const a=Nc([t.from,i,r]);this._active=!0,this._fn=t.fn||R3[t.type||typeof a],this._easing=$o[t.easing]||$o.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,a=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Nc([t.to,n,r,t.from]),this._from=Nc([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class B2{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!je(t))return;const n=Object.keys(et.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!je(i))return;const a={};for(const l of n)a[l]=i[l];(rt(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,a)})})}_animateOptions(t,n){const s=n.options,r=L3(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&O3(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new I3(f,t,u,d),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return ls.add(this._chart,s),!0}}function O3(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function L3(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Sb(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function F3(e,t,n){if(n===!1)return!1;const s=Sb(e,n),r=Sb(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function $3(e){let t,n,s,r;return je(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function V2(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Cb(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===n){if(d=!0,s.all)continue;break}u=e.values[c],Mt(u)&&(i||t===0||ns(t)===ns(u))&&(t+=u)}return!d&&!s.all?0:t}function z3(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[r]:d,[i]:e[d]};return l}function df(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function B3(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function V3(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function U3(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function kb(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function Eb(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:l}=s,c=i.axis,u=a.axis,d=B3(i,a,s),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:x,[u]:b}=p,w=p._stacks||(p._stacks={});f=w[u]=U3(r,d,x),f[l]=b,f._top=kb(f,a,!0,s.type),f._bottom=kb(f,a,!1,s.type);const v=f._visualValues||(f._visualValues={});v[l]=b}}function hf(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function W3(e,t){return bi(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function H3(e,t,n){return bi(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ya(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const ff=e=>e==="reset"||e==="none",Db=(e,t)=>t?e:Object.assign({},e),q3=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:V2(n,!0),values:null};class ni{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=df(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ya(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=ye(s.xAxisID,hf(t,"x")),a=n.yAxisID=ye(s.yAxisID,hf(t,"y")),l=n.rAxisID=ye(s.rAxisID,hf(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,i,a,l),d=n.vAxisID=r(c,a,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&cb(this._data,this),t._stacked&&Ya(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(je(n)){const r=this._cachedMeta;this._data=z3(n,r)}else if(s!==n){if(s){cb(s,this);const r=this._cachedMeta;Ya(r),r._parsed=[]}n&&Object.isExtensible(n)&&DL(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=df(n.vScale,n),n.stack!==s.stack&&(r=!0,Ya(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(Eb(this,n._parsed),n._stacked=df(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:a}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{rt(r[t])?f=this.parseArrayData(s,r,t,n):je(r[t])?f=this.parseObjectData(s,r,t,n):f=this.parsePrimitiveData(s,r,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);s._sorted=c}a&&Eb(this,f)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:a}=t,l=i.axis,c=a.axis,u=i.getLabels(),d=i===a,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+s,h[f]={[l]:d||i.parse(u[p],p),[c]:a.parse(n[p],p)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:a}=t,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:i.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,m;for(d=0,h=r;d<h;++d)f=d+s,m=n[f],u[d]={x:i.parse(ci(m,l),f),y:a.parse(ci(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,a=n[t.axis],l={keys:V2(r,!0),values:n._stacks[t.axis]._visualValues};return Cb(l,a,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let a=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,a=Cb(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,a=r.length,l=this._getOtherScale(t),c=q3(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=V3(l);let f,m;function p(){m=r[f];const x=m[l.axis];return!Mt(m[t.axis])||d>x||h<x}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,a;for(r=0,i=n.length;r<i;++r)a=n[r][t.axis],Mt(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=$3(ye(this.options.clip,F3(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,i))}for(d=0;d<a.length;++d)a[d].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];i=a.$context||(a.$context=H3(this.getContext(),t,a)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=W3(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,a=t+"-"+n,l=i[a],c=this.enableOptionSharing&&xl(s);if(l)return Db(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(et.elements[t]),p=()=>this.getContext(s,r,n),x=u.resolveNamedOptions(f,m,p,h);return x.$shared&&(x.$shared=c,i[a]=Object.freeze(Db(x,c))),x}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,l=i[a];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,s,n))}const u=new B2(r,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||ff(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),a=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:a}}updateElement(t,n,s,r){ff(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!ff(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=n.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(i),l=t;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&Ya(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ue(ni,"defaults",{}),ue(ni,"datasetElementType",null),ue(ni,"dataElementType",null);function G3(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=S2(s.sort((r,i)=>r-i))}return e._cache.$bar}function Y3(e){const t=e.iScale,n=G3(t,e.type);let s=t._length,r,i,a,l;const c=()=>{a===32767||a===-32768||(xl(l)&&(s=Math.min(s,Math.abs(a-l)||s)),l=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),c();return s}function Q3(e,t,n,s){const r=n.barThickness;let i,a;return De(r)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=r*s,a=1),{chunk:i/s,ratio:a,start:t.pixels[e]-i/2}}function K3(e,t,n,s){const r=t.pixels,i=r[e];let a=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;a===null&&(a=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-a);const u=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/s,ratio:n.barPercentage,start:u}}function X3(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),a=Math.min(r,i),l=Math.max(r,i);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:a,max:l}}function U2(e,t,n,s){return rt(e)?X3(e,t,n,s):t[n.axis]=n.parse(e,s),t}function Tb(e,t,n,s){const r=e.iScale,i=e.vScale,a=r.getLabels(),l=r===i,c=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=t[u],h={},h[r.axis]=l||r.parse(a[u],u),c.push(U2(f,h,i,u));return c}function mf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function J3(e,t,n){return e!==0?ns(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Z3(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function eF(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:d}=Z3(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[Pb(d,a,l,c)]=!0,r=u)),i[Pb(r,a,l,c)]=!0,e.borderSkipped=i}function Pb(e,t,n,s){return s?(e=tF(e,t,n),e=_b(e,n,t)):e=_b(e,t,n),e}function tF(e,t,n){return e===t?n:e===n?t:e}function _b(e,t,n){return e==="start"?t:e==="end"?n:e}function nF(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class iu extends ni{parsePrimitiveData(t,n,s,r){return Tb(t,n,s,r)}parseArrayData(t,n,s,r){return Tb(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[];let f,m,p,x;for(f=s,m=s+r;f<m;++f)x=n[f],p={},p[i.axis]=i.parse(ci(x,u),f),h.push(U2(ci(x,d),p,a,f));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),a=i._custom,l=mf(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let m=n;m<n+s;m++){const p=this.getParsed(m),x=i||De(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,d),w=(p._stacks||{})[l.axis],v={horizontal:u,base:x.base,enableBorderRadius:!w||mf(p._custom)||a===w._top||a===w._bottom,x:u?x.head:b.center,y:u?b.center:x.head,height:u?b.size:Math.abs(x.size),width:u?Math.abs(x.size):b.size};f&&(v.options=h||this.resolveDataElementOptions(m,t[m].active?"active":r));const g=v.options||t[m].options;eF(v,g,w,a),nF(v,g,d.ratio),this.updateElement(t[m],m,v,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{const h=d._parsed.find(m=>m[s.axis]===c),f=h&&h[d.vScale.axis];if(De(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||a.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[ye(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,a;for(i=0,a=n.data.length;i<a;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||Y3(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=mf(u);let h=c[n.axis],f=0,m=s?this.applyStack(n,c,s):h,p,x;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&ns(h)!==ns(u.barEnd)&&(f=0),f+=h);const b=!De(i)&&!d?i:f;let w=n.getPixelForValue(b);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=w,x=p-w,Math.abs(x)<a){x=J3(x,n,l)*a,h===l&&(w-=x/2);const v=n.getPixelForDecimal(0),g=n.getPixelForDecimal(1),j=Math.min(v,g),S=Math.max(v,g);w=Math.max(Math.min(w,S),j),p=w+x,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(w))}if(w===n.getPixelForValue(l)){const v=ns(x)*n.getLineWidthForValue(l)/2;w+=v,x-=v}return{size:x,base:w,head:p,center:p+x/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,a=ye(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?K3(t,n,r,d*u):Q3(t,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ye(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}ue(iu,"id","bar"),ue(iu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ue(iu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function sF(e,t,n){let s=1,r=1,i=0,a=0;if(t<Ge){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(g,j,S)=>vl(g,l,c,!0)?1:Math.max(j,j*n,S,S*n),p=(g,j,S)=>vl(g,l,c,!0)?-1:Math.min(j,j*n,S,S*n),x=m(0,u,h),b=m(ht,d,f),w=p(Me,u,h),v=p(Me+ht,d,f);s=(x-w)/2,r=(b-v)/2,i=-(x+w)/2,a=-(b+v)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:a}}class yo extends ni{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(je(s[t])){const{key:c="value"}=this._parsing;i=u=>+ci(s[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)r._parsed[a]=i(a)}}_getRotation(){return xs(this.options.rotation-90)}_getCircumference(){return xs(this.options.circumference)}_getRotationExtents(){let t=Ge,n=-Ge;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),a=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(dL(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:x}=sF(h,d,c),b=(s.width-a)/f,w=(s.height-a)/m,v=Math.max(Math.min(b,w)/2,0),g=v2(this.options.radius,v),j=Math.max(g*c,0),S=(g-j)/this._getVisibleDatasetWeightTotal();this.offsetX=p*g,this.offsetY=x*g,r.total=this.calculateTotal(),this.outerRadius=g-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Ge)}updateElements(t,n,s,r){const i=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:x,includeOptions:b}=this._getSharedOptions(n,r);let w=this._getRotation(),v;for(v=0;v<n;++v)w+=this._circumference(v,i);for(v=n;v<n+s;++v){const g=this._circumference(v,i),j=t[v],S={x:d+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+g,circumference:g,outerRadius:p,innerRadius:m};b&&(S.options=x||this.resolveDataElementOptions(v,j.active?"active":r)),w+=g,this.updateElement(j,v,S,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ge*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Fx(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,a,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),t=a.data,l=a.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(ye(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ue(yo,"id","doughnut"),ue(yo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ue(yo,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ue(yo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=t.legend.options;return n.labels.map((i,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class au extends ni{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=_L(n,r,a);this._drawStart=l,this._drawCount=c,ML(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),f=a.axis,m=l.axis,{spanGaps:p,segment:x}=this.options,b=yl(p)?p:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||r==="none",v=n+s,g=t.length;let j=n>0&&this.getParsed(n-1);for(let S=0;S<g;++S){const k=t[S],N=w?k:{};if(S<n||S>=v){N.skip=!0;continue}const C=this.getParsed(S),E=De(C[m]),P=N[f]=a.getPixelForValue(C[f],S),L=N[m]=i||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[m],S);N.skip=isNaN(P)||isNaN(L)||E,N.stop=S>0&&Math.abs(C[f]-j[f])>b,x&&(N.parsed=C,N.raw=u.data[S]),h&&(N.options=d||this.resolveDataElementOptions(S,k.active?"active":r)),w||this.updateElement(k,S,N,r),j=C}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ue(au,"id","line"),ue(au,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ue(au,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function _r(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Hx{constructor(t){ue(this,"options");this.options=t||{}}static override(t){Object.assign(Hx.prototype,t)}init(){}formats(){return _r()}parse(){return _r()}format(){return _r()}add(){return _r()}diff(){return _r()}startOf(){return _r()}endOf(){return _r()}}var rF={_date:Hx};function iF(e,t,n,s){const{controller:r,data:i,_sorted:a}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&i.length){const u=l._reversePixels?kL:Qr;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(x=>!De(x[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(x=>!De(x[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function nh(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=iF(i[l],t,a,r);for(let m=h;m<=f;++m){const p=d[m];p.skip||s(p,u,m)}}}function aF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,a=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function pf(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||nh(e,n,t,function(l,c,u){!r&&!bl(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function oF(e,t,n,s){let r=[];function i(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],s),{angle:h}=j2(a,{x:t.x,y:t.y});vl(h,u,d)&&r.push({element:a,datasetIndex:l,index:c})}return nh(e,n,t,i),r}function lF(e,t,n,s,r,i){let a=[];const l=aF(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,r);if(s&&!m)return;const p=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(p))&&!m)return;const b=l(t,p);b<c?(a=[{element:d,datasetIndex:h,index:f}],c=b):b===c&&a.push({element:d,datasetIndex:h,index:f})}return nh(e,n,t,u),a}function gf(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?oF(e,t,n,r):lF(e,t,n,s,r,i)}function Mb(e,t,n,s,r){const i=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return nh(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var cF={modes:{index(e,t,n,s){const r=zr(t,e),i=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?pf(e,r,i,s,a):gf(e,r,i,!1,s,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,s){const r=zr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?pf(e,r,i,s,a):gf(e,r,i,!1,s,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,s){const r=zr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return pf(e,r,i,s,a)},nearest(e,t,n,s){const r=zr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return gf(e,r,i,n.intersect,s,a)},x(e,t,n,s){const r=zr(t,e);return Mb(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=zr(t,e);return Mb(e,r,"y",n.intersect,s)}}};const W2=["left","top","right","bottom"];function Qa(e,t){return e.filter(n=>n.pos===t)}function Ab(e,t){return e.filter(n=>W2.indexOf(n.pos)===-1&&n.box.axis===t)}function Ka(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function uF(e){const t=[];let n,s,r,i,a,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:a,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:l});return t}function dF(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!W2.includes(r))continue;const a=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}function hF(e,t){const n=dF(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,a,l;for(i=0,a=e.length;i<a;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return n}function fF(e){const t=uF(e),n=Ka(t.filter(u=>u.box.fullSize),!0),s=Ka(Qa(t,"left"),!0),r=Ka(Qa(t,"right")),i=Ka(Qa(t,"top"),!0),a=Ka(Qa(t,"bottom")),l=Ab(t,"x"),c=Ab(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:Qa(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(a).concat(l)}}function Rb(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function H2(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function mF(e,t,n,s){const{pos:r,box:i}=n,a=e.maxPadding;if(!je(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&H2(a,i.getPadding());const l=Math.max(0,t.outerWidth-Rb(a,e,"left","right")),c=Math.max(0,t.outerHeight-Rb(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function pF(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function gF(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{i[a]=Math.max(t[a],n[a])}),i}return s(e?["left","right"]:["top","bottom"])}function vo(e,t,n,s){const r=[];let i,a,l,c,u,d;for(i=0,a=e.length,u=0;i<a;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,gF(l.horizontal,t));const{same:h,other:f}=mF(t,n,l,s);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&vo(r,t,n,s)||d}function Ec(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Ib(e,t,n,s){const r=n.padding;let{x:i,y:a}=t;for(const l of e){const c=l.box,u=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;xl(u.start)&&(a=u.start),c.fullSize?Ec(c,r.left,a,n.outerWidth-r.right-r.left,f):Ec(c,t.left+u.placed,a,h,f),u.start=a,u.placed+=h,a=c.bottom}else{const h=t.h*d,f=u.size||c.width;xl(u.start)&&(i=u.start),c.fullSize?Ec(c,i,r.top,f,n.outerHeight-r.bottom-r.top):Ec(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=a}var wn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=En(e.options.layout.padding),i=Math.max(t-r.width,0),a=Math.max(n-r.height,0),l=fF(e.boxes),c=l.vertical,u=l.horizontal;_e(e.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=c.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},r);H2(f,En(s));const m=Object.assign({maxPadding:f,w:i,h:a,x:r.left,y:r.top},r),p=hF(c.concat(u),h);vo(l.fullSize,m,h,p),vo(c,m,h,p),vo(u,m,h,p)&&vo(c,m,h,p),pF(m),Ib(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Ib(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},_e(l.chartArea,x=>{const b=x.box;Object.assign(b,e.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class q2{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class xF extends q2{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ou="$chartjs",yF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ob=e=>e===null||e==="";function vF(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[ou]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ob(r)){const i=vb(e,"width");i!==void 0&&(e.width=i)}if(Ob(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=vb(e,"height");i!==void 0&&(e.height=i)}return e}const G2=w3?{passive:!0}:!1;function bF(e,t,n){e&&e.addEventListener(t,n,G2)}function wF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,G2)}function jF(e,t){const n=yF[e.type]||e.type,{x:s,y:r}=zr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Zu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function NF(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Zu(l.addedNodes,s),a=a&&!Zu(l.removedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function SF(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Zu(l.removedNodes,s),a=a&&!Zu(l.addedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const jl=new Map;let Lb=0;function Y2(){const e=window.devicePixelRatio;e!==Lb&&(Lb=e,jl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function CF(e,t){jl.size||window.addEventListener("resize",Y2),jl.set(e,t)}function kF(e){jl.delete(e),jl.size||window.removeEventListener("resize",Y2)}function EF(e,t,n){const s=e.canvas,r=s&&Wx(s);if(!r)return;const i=k2((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(r),CF(e,i),a}function xf(e,t,n){n&&n.disconnect(),t==="resize"&&kF(e)}function DF(e,t,n){const s=e.canvas,r=k2(i=>{e.ctx!==null&&n(jF(i,e))},e);return bF(s,t,r),r}class TF extends q2{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(vF(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[ou])return!1;const s=n[ou].initial;["height","width"].forEach(i=>{const a=s[i];De(a)?n.removeAttribute(i):n.setAttribute(i,a)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[ou],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),a={attach:NF,detach:SF,resize:EF}[n]||DF;r[n]=a(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:xf,detach:xf,resize:xf}[n]||wF)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return b3(t,n,s,r)}isAttached(t){const n=t&&Wx(t);return!!(n&&n.isConnected)}}function PF(e){return!Ux()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?xF:TF}var Uc;let Ms=(Uc=class{constructor(){ue(this,"x");ue(this,"y");ue(this,"active",!1);ue(this,"options");ue(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return yl(this.x)&&yl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},ue(Uc,"defaults",{}),ue(Uc,"defaultRoutes"),Uc);function _F(e,t){const n=e.options.ticks,s=MF(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?RF(t):[],a=i.length,l=i[0],c=i[a-1],u=[];if(a>r)return IF(t,u,i,a/r),u;const d=AF(i,t,r);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(Dc(t,u,d,De(m)?0:l-m,l),h=0,f=a-1;h<f;h++)Dc(t,u,d,i[h],i[h+1]);return Dc(t,u,d,c,De(m)?t.length:c+m),u}return Dc(t,u,d),u}function MF(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function AF(e,t,n){const s=OF(e),r=t.length/n;if(!s)return Math.max(r,1);const i=vL(s);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>r)return c}return Math.max(r,1)}function RF(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function IF(e,t,n,s){let r=0,i=n[0],a;for(s=Math.ceil(s),a=0;a<e.length;a++)a===i&&(t.push(e[a]),r++,i=n[r*s])}function Dc(e,t,n,s,r){const i=ye(s,0),a=Math.min(ye(r,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function OF(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const LF=e=>e==="left"?"right":e==="right"?"left":e,Fb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,$b=(e,t)=>Math.min(t||e,e);function zb(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function FF(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(c-i,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>a+l)))return c}function $F(e,t){_e(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Xa(e){return e.drawTicks?e.tickLength:0}function Bb(e,t){if(!e.display)return 0;const n=Tt(e.font,t),s=En(e.padding);return(rt(e.text)?e.text.length:1)*n.lineHeight+s.height}function zF(e,t){return bi(e,{scale:t,type:"scale"})}function BF(e,t,n){return bi(e,{tick:n,index:t,type:"tick"})}function VF(e,t,n){let s=Ox(e);return(n&&t!=="right"||!n&&t==="right")&&(s=LF(s)),s}function UF(e,t,n,s){const{top:r,left:i,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const x=a-r,b=l-i;if(e.isHorizontal()){if(m=kt(s,i,l),je(n)){const w=Object.keys(n)[0],v=n[w];p=d[w].getPixelForValue(v)+x-t}else n==="center"?p=(u.bottom+u.top)/2+x-t:p=Fb(e,n,t);f=l-i}else{if(je(n)){const w=Object.keys(n)[0],v=n[w];m=d[w].getPixelForValue(v)-b+t}else n==="center"?m=(u.left+u.right)/2-b+t:m=Fb(e,n,t);p=kt(s,a,r),h=n==="left"?-ht:ht}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class ka extends Ms{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=Gn(t,Number.POSITIVE_INFINITY),n=Gn(n,Number.NEGATIVE_INFINITY),s=Gn(s,Number.POSITIVE_INFINITY),r=Gn(r,Number.NEGATIVE_INFINITY),{min:Gn(t,s),max:Gn(n,r),minDefined:Mt(t),maxDefined:Mt(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),a;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,a.min)),i||(s=Math.max(s,a.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Gn(n,Gn(s,n)),max:Gn(s,Gn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fe(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=JL(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?zb(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=_F(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fe(this.options.afterUpdate,[this])}beforeSetDimensions(){Fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Fe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=Fe(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){Fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=$b(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let a=r,l,c,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=Dt(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(t.offset?.5:1)),c=this.maxHeight-Xa(t.grid)-n.padding-Bb(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),a=NL(Math.min(Math.asin(Dt((d.highest.height+6)/l,-1,1)),Math.asin(Dt(c/u,-1,1))-Math.asin(Dt(f/u,-1,1)))),a=Math.max(r,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){Fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Bb(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=Xa(i)+c):(t.height=this.maxHeight,t.width=Xa(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,p=xs(this.labelRotation),x=Math.cos(p),b=Math.sin(p);if(l){const w=s.mirror?0:b*h.width+x*f.height;t.height=Math.min(this.maxHeight,t.height+w+m)}else{const w=s.mirror?0:x*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+w+m)}this._calculatePadding(u,d,b,x)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=r*t.width,m=s*n.height):(f=s*t.height,m=r*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)De(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=zb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(n/$b(n,s));let u=0,d=0,h,f,m,p,x,b,w,v,g,j,S;for(h=0;h<n;h+=c){if(p=t[h].label,x=this._resolveTickFontOptions(h),r.font=b=x.string,w=i[b]=i[b]||{data:{},gc:[]},v=x.lineHeight,g=j=0,!De(p)&&!rt(p))g=mb(r,w.data,w.gc,g,p),j=v;else if(rt(p))for(f=0,m=p.length;f<m;++f)S=p[f],!De(S)&&!rt(S)&&(g=mb(r,w.data,w.gc,g,S),j+=v);a.push(g),l.push(j),u=Math.max(g,u),d=Math.max(j,d)}$F(i,n);const k=a.indexOf(u),N=l.indexOf(d),C=E=>({width:a[E]||0,height:l[E]||0});return{first:C(0),last:C(n-1),widest:C(k),highest:C(N),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return CL(this._alignToPixels?Pr(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=BF(this.getContext(),t,s))}return this.$context||(this.$context=zF(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=xs(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:a,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Xa(i),m=[],p=l.setContext(this.getContext()),x=p.display?p.width:0,b=x/2,w=function(q){return Pr(s,q,x)};let v,g,j,S,k,N,C,E,P,L,F,$;if(a==="top")v=w(this.bottom),N=this.bottom-f,E=v-b,L=w(t.top)+b,$=t.bottom;else if(a==="bottom")v=w(this.top),L=t.top,$=w(t.bottom)-b,N=v+b,E=this.top+f;else if(a==="left")v=w(this.right),k=this.right-f,C=v-b,P=w(t.left)+b,F=t.right;else if(a==="right")v=w(this.left),P=t.left,F=w(t.right)-b,k=v+b,C=this.left+f;else if(n==="x"){if(a==="center")v=w((t.top+t.bottom)/2+.5);else if(je(a)){const q=Object.keys(a)[0],I=a[q];v=w(this.chart.scales[q].getPixelForValue(I))}L=t.top,$=t.bottom,N=v+b,E=N+f}else if(n==="y"){if(a==="center")v=w((t.left+t.right)/2);else if(je(a)){const q=Object.keys(a)[0],I=a[q];v=w(this.chart.scales[q].getPixelForValue(I))}k=v-b,C=k-f,P=t.left,F=t.right}const A=ye(r.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/A));for(g=0;g<h;g+=B){const q=this.getContext(g),I=i.setContext(q),T=l.setContext(q),R=I.lineWidth,H=I.color,G=T.dash||[],Z=T.dashOffset,ie=I.tickWidth,ce=I.tickColor,O=I.tickBorderDash||[],V=I.tickBorderDashOffset;j=FF(this,g,c),j!==void 0&&(S=Pr(s,j,R),u?k=C=P=F=S:N=E=L=$=S,m.push({tx1:k,ty1:N,tx2:C,ty2:E,x1:P,y1:L,x2:F,y2:$,width:R,color:H,borderDash:G,borderDashOffset:Z,tickWidth:ie,tickColor:ce,tickBorderDash:O,tickBorderDashOffset:V}))}return this._ticksLength=h,this._borderValue=v,m}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=Xa(s.grid),m=f+d,p=h?-d:m,x=-xs(this.labelRotation),b=[];let w,v,g,j,S,k,N,C,E,P,L,F,$="middle";if(r==="top")k=this.bottom-p,N=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+p,N=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);N=B.textAlign,S=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);N=B.textAlign,S=B.x}else if(n==="x"){if(r==="center")k=(t.top+t.bottom)/2+m;else if(je(r)){const B=Object.keys(r)[0],q=r[B];k=this.chart.scales[B].getPixelForValue(q)+m}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")S=(t.left+t.right)/2-m;else if(je(r)){const B=Object.keys(r)[0],q=r[B];S=this.chart.scales[B].getPixelForValue(q)}N=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const A=this._getLabelSizes();for(w=0,v=l.length;w<v;++w){g=l[w],j=g.label;const B=i.setContext(this.getContext(w));C=this.getPixelForTick(w)+i.labelOffset,E=this._resolveTickFontOptions(w),P=E.lineHeight,L=rt(j)?j.length:1;const q=L/2,I=B.color,T=B.textStrokeColor,R=B.textStrokeWidth;let H=N;a?(S=C,N==="inner"&&(w===v-1?H=this.options.reverse?"left":"right":w===0?H=this.options.reverse?"right":"left":H="center"),r==="top"?u==="near"||x!==0?F=-L*P+P/2:u==="center"?F=-A.highest.height/2-q*P+P:F=-A.highest.height+P/2:u==="near"||x!==0?F=P/2:u==="center"?F=A.highest.height/2-q*P:F=A.highest.height-L*P,h&&(F*=-1),x!==0&&!B.showLabelBackdrop&&(S+=P/2*Math.sin(x))):(k=C,F=(1-L)*P/2);let G;if(B.showLabelBackdrop){const Z=En(B.backdropPadding),ie=A.heights[w],ce=A.widths[w];let O=F-Z.top,V=0-Z.left;switch($){case"middle":O-=ie/2;break;case"bottom":O-=ie;break}switch(N){case"center":V-=ce/2;break;case"right":V-=ce;break;case"inner":w===v-1?V-=ce:w>0&&(V-=ce/2);break}G={left:V,top:O,width:ce+Z.width,height:ie+Z.height,color:B.backdropColor}}b.push({label:j,font:E,textOffset:F,options:{rotation:x,color:I,strokeColor:T,strokeWidth:R,textAlign:H,textBaseline:$,translation:[S,k],backdrop:G}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-xs(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,a=this._getLabelSizes(),l=t+i,c=a.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,a;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,a=r.length;i<a;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),a=s.display?i.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Pr(t,this.left,a)-a/2,d=Pr(t,this.right,l)+l/2,h=f=c):(h=Pr(t,this.top,a)-a/2,f=Pr(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Zd(s,r);const i=this.getLabelItems(t);for(const a of i){const l=a.options,c=a.font,u=a.label,d=a.textOffset;wl(s,u,0,d,c,l)}r&&eh(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Tt(s.font),a=En(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||je(n)?(c+=a.bottom,rt(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=UF(this,c,n,l);wl(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:VF(l,n,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=ye(t.grid&&t.grid.z,-1),r=ye(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ka.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,a;for(i=0,a=n.length;i<a;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Tt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Tc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;qF(n)&&(s=this.register(n));const r=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,WF(t,a,s),this.override&&et.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in et[r]&&(delete et[r][s],this.override&&delete ui[s])}}function WF(e,t,n){const s=gl(Object.create(null),[n?et.get(n):{},et.get(t),e.defaults]);et.set(t,s),e.defaultRoutes&&HF(t,e.defaultRoutes),e.descriptors&&et.describe(t,e.descriptors)}function HF(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");et.route(i,r,c,l)})}function qF(e){return"id"in e&&"defaults"in e}class GF{constructor(){this.controllers=new Tc(ni,"datasets",!0),this.elements=new Tc(Ms,"elements"),this.plugins=new Tc(Object,"plugins"),this.scales=new Tc(ka,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):_e(r,a=>{const l=s||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,s){const r=Rx(t);Fe(s["before"+r],[],s),n[t](s),Fe(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var Kn=new GF;class YF{constructor(){this._init=[]}notify(t,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,s,r){r=r||{};for(const i of t){const a=i.plugin,l=a[s],c=[n,r,i.options];if(Fe(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){De(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=ye(s.options&&s.options.plugins,{}),i=QF(s);return r===!1&&!n?[]:XF(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function QF(e){const t={},n=[],s=Object.keys(Kn.plugins.items);for(let i=0;i<s.length;i++)n.push(Kn.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const a=r[i];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function KF(e,t){return!t&&e===!1?null:e===!0?{}:e}function XF(e,{plugins:t,localIds:n},s,r){const i=[],a=e.getContext();for(const l of t){const c=l.id,u=KF(s[c],r);u!==null&&i.push({plugin:l,options:JF(e.config,{plugin:l,local:n[c]},u,a)})}return i}function JF(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(s,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kp(e,t){const n=et.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ZF(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function e6(e,t){return e===t?"_index_":"_value_"}function Vb(e){if(e==="x"||e==="y"||e==="r")return e}function t6(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Ep(e,...t){if(Vb(e))return e;for(const n of t){const s=n.axis||t6(n.position)||e.length>1&&Vb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ub(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function n6(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Ub(e,"x",n[0])||Ub(e,"y",n[0])}return{}}function s6(e,t){const n=ui[e.type]||{scales:{}},s=t.scales||{},r=kp(e.type,t),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!je(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Ep(a,l,n6(a,e),et.scales[l.type]),u=e6(c,r),d=n.scales||{};i[a]=Lo(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||kp(l,t),d=(ui[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=ZF(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Lo(i[m],[{axis:f},s[m],d[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];Lo(l,[et.scales[l.type],et.scale])}),i}function Q2(e){const t=e.options||(e.options={});t.plugins=ye(t.plugins,{}),t.scales=s6(e,t)}function K2(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function r6(e){return e=e||{},e.data=K2(e.data),Q2(e),e}const Wb=new Map,X2=new Set;function Pc(e,t){let n=Wb.get(e);return n||(n=t(),Wb.set(e,n),X2.add(n)),n}const Ja=(e,t,n)=>{const s=ci(t,n);s!==void 0&&e.add(s)};let i6=class{constructor(t){this._config=r6(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=K2(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Q2(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Pc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Pc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Pc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Pc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,a=this._cachedScopes(t,s),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>Ja(c,t,h))),d.forEach(h=>Ja(c,r,h)),d.forEach(h=>Ja(c,ui[i]||{},h)),d.forEach(h=>Ja(c,et,h)),d.forEach(h=>Ja(c,Sp,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),X2.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,ui[n]||{},et.datasets[n]||{},{type:n},et,Sp]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=Hb(this._resolverCache,t,r);let c=a;if(o6(a,n)){i.$shared=!1,s=br(s)?s():s;const u=this.createResolver(t,s,l);c=fa(a,s,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,s=[""],r){const{resolver:i}=Hb(this._resolverCache,t,s);return je(n)?fa(i,n,void 0,r):i}};function Hb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:zx(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const a6=e=>je(e)&&Object.getOwnPropertyNames(e).some(t=>br(e[t]));function o6(e,t){const{isScriptable:n,isIndexable:s}=P2(e);for(const r of t){const i=n(r),a=s(r),l=(a||i)&&e[r];if(i&&(br(l)||a6(l))||a&&rt(l))return!0}return!1}var l6="4.5.0";const c6=["top","bottom","left","right","chartArea"];function qb(e,t){return e==="top"||e==="bottom"||c6.indexOf(e)===-1&&t==="x"}function Gb(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Yb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Fe(n&&n.onComplete,[e],t)}function u6(e){const t=e.chart,n=t.options.animation;Fe(n&&n.onProgress,[e],t)}function J2(e){return Ux()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const lu={},Qb=e=>{const t=J2(e);return Object.values(lu).filter(n=>n.canvas===t).pop()};function d6(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const a=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=a)}}}function h6(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var Fs;let Ea=(Fs=class{static register(...t){Kn.add(...t),Kb()}static unregister(...t){Kn.remove(...t),Kb()}constructor(t,n){const s=this.config=new i6(n),r=J2(t),i=Qb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||PF(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=uL(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=TL(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],lu[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ls.listen(this,"complete",Yb),ls.listen(this,"progress",u6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return De(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pb(this.canvas,this.ctx),this}stop(){return ls.stop(this),this}resize(t,n){ls.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,yb(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Fe(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};_e(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const l=n[a],c=Ep(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),_e(i,a=>{const l=a.options,c=l.id,u=Ep(c,l),d=ye(l.type,a.dtype);(l.position===void 0||qb(l.position,u)!==qb(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{const f=Kn.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),_e(r,(a,l)=>{a||delete s[l]}),_e(s,a=>{wn.configure(this,a,a.options),wn.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Gb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let a=this.getDatasetMeta(s);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=i.indexAxis||kp(l,this.options),a.order=i.order||0,a.index=s,a.label=""+i.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=Kn.getController(l),{datasetElementType:u,dataElementType:d}=et.datasets[l];Object.assign(c,{dataElementType:Kn.getElement(d),datasetElementType:u&&Kn.getElement(u)}),a.controller=new c(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){_e(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),r||_e(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Gb("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){_e(this.scales,t=>{wn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!ib(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const a=s==="_removeElements"?-i:i;d6(t,r,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!ib(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;wn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],_e(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,br(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ls.has(this)?this.attached&&!ls.running(this)&&ls.start(this):(this.draw(),Yb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=z2(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Zd(n,r),t.controller.draw(),r&&eh(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return bl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=cF.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=bi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,r);xl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ls.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),pb(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete lu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,a)=>{n.addEventListener(this,i,a),t[i]=a},r=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};_e(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){_e(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},_e(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,a,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Yu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=i(n,t),l=s?t:i(t,n);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,a=n,l=this._getActiveElements(t,r,s,a),c=gL(t),u=h6(t,this._lastEvent,s,c);s&&(this._lastEvent=null,Fe(i.onHover,[t,l,this],this),c&&Fe(i.onClick,[t,l,this],this));const d=!Yu(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},ue(Fs,"defaults",et),ue(Fs,"instances",lu),ue(Fs,"overrides",ui),ue(Fs,"registry",Kn),ue(Fs,"version",l6),ue(Fs,"getChart",Qb),Fs);function Kb(){return _e(Ea.instances,e=>e._plugins.invalidate())}function f6(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:a,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/a,Jt(s-n));if(e.beginPath(),e.arc(r,i,a-u/2,s+h/2,n-h/2),l>0){const f=Math.min(u/l,Jt(s-n));e.arc(r,i,l+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,a*Jt(s-n));if(d==="round")e.arc(r,i,f,n-Me/2,s+Me/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Me/2)+r,x=-m*Math.sin(n+Me/2)+i,b=m*Math.cos(s+Me/2)+r,w=m*Math.sin(s+Me/2)+i;e.lineTo(p,x),e.lineTo(b,w)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function m6(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:a,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,a,l,s-u,n+u),c>r?(u=r/c,e.arc(i,a,c,n+u,s-u,!0)):e.arc(i,a,r,n+ht,s-ht),e.closePath(),e.clip()}function p6(e){return $x(e,["outerStart","outerEnd","innerStart","innerEnd"])}function g6(e,t,n,s){const r=p6(e.options.borderRadius),i=(n-t)/2,a=Math.min(i,s*t/2),l=c=>{const u=(n-Math.min(i,c))*s/2;return Dt(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Dt(r.innerStart,0,a),innerEnd:Dt(r.innerEnd,0,a)}}function ki(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function ed(e,t,n,s,r,i){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let m=0;const p=r-c;if(s){const B=d>0?d-s:0,q=h>0?h-s:0,I=(B+q)/2,T=I!==0?p*I/(I+s):p;m=(p-T)/2}const x=Math.max(.001,p*h-n/Me)/h,b=(p-x)/2,w=c+b+m,v=r-b-m,{outerStart:g,outerEnd:j,innerStart:S,innerEnd:k}=g6(t,f,h,v-w),N=h-g,C=h-j,E=w+g/N,P=v-j/C,L=f+S,F=f+k,$=w+S/L,A=v-k/F;if(e.beginPath(),i){const B=(E+P)/2;if(e.arc(a,l,h,E,B),e.arc(a,l,h,B,P),j>0){const R=ki(C,P,a,l);e.arc(R.x,R.y,j,P,v+ht)}const q=ki(F,v,a,l);if(e.lineTo(q.x,q.y),k>0){const R=ki(F,A,a,l);e.arc(R.x,R.y,k,v+ht,A+Math.PI)}const I=(v-k/f+(w+S/f))/2;if(e.arc(a,l,f,v-k/f,I,!0),e.arc(a,l,f,I,w+S/f,!0),S>0){const R=ki(L,$,a,l);e.arc(R.x,R.y,S,$+Math.PI,w-ht)}const T=ki(N,w,a,l);if(e.lineTo(T.x,T.y),g>0){const R=ki(N,E,a,l);e.arc(R.x,R.y,g,w-ht,E)}}else{e.moveTo(a,l);const B=Math.cos(E)*h+a,q=Math.sin(E)*h+l;e.lineTo(B,q);const I=Math.cos(P)*h+a,T=Math.sin(P)*h+l;e.lineTo(I,T)}e.closePath()}function x6(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l}=t;let c=t.endAngle;if(i){ed(e,t,n,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=a+(l%Ge||Ge))}return ed(e,t,n,s,c,r),e.fill(),c}function y6(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let x=t.endAngle;if(i){ed(e,t,n,s,x,r);for(let b=0;b<i;++b)e.stroke();isNaN(l)||(x=a+(l%Ge||Ge))}p&&m6(e,t,x),c.selfJoin&&x-a>=Me&&m===0&&d!=="miter"&&f6(e,t,x),i||(ed(e,t,n,s,x,r),e.stroke())}class bo extends Ms{constructor(n){super();ue(this,"circumference");ue(this,"endAngle");ue(this,"fullCircles");ue(this,"innerRadius");ue(this,"outerRadius");ue(this,"pixelMargin");ue(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:a,distance:l}=j2(i,{x:n,y:s}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,p=ye(f,u-c),x=vl(a,c,u)&&c!==u,b=p>=Ge||x,w=ys(l,d+m,h+m);return b&&w}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+a)/2,f=(l+c+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,a=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Ge?Math.floor(r/Ge):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Me,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,x6(n,this,d,a,l),y6(n,this,d,a,l),n.restore()}}ue(bo,"id","arc"),ue(bo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ue(bo,"defaultRoutes",{backgroundColor:"backgroundColor"}),ue(bo,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Z2(e,t,n=t){e.lineCap=ye(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ye(n.borderDash,t.borderDash)),e.lineDashOffset=ye(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ye(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ye(n.borderWidth,t.borderWidth),e.strokeStyle=ye(n.borderColor,t.borderColor)}function v6(e,t,n){e.lineTo(n.x,n.y)}function b6(e){return e.stepped?UL:e.tension||e.cubicInterpolationMode==="monotone"?WL:v6}function ek(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:a,end:l}=t,c=Math.max(r,a),u=Math.min(i,l),d=r<a&&i<a||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function w6(e,t,n,s){const{points:r,options:i}=t,{count:a,start:l,loop:c,ilen:u}=ek(r,n,s),d=b6(i);let{move:h=!0,reverse:f}=s||{},m,p,x;for(m=0;m<=u;++m)p=r[(l+(f?u-m:m))%a],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,x,p,f,i.stepped),x=p);return c&&(p=r[(l+(f?u:0))%a],d(e,x,p,f,i.stepped)),!!c}function j6(e,t,n,s){const r=t.points,{count:i,start:a,ilen:l}=ek(r,n,s),{move:c=!0,reverse:u}=s||{};let d=0,h=0,f,m,p,x,b,w;const v=j=>(a+(u?l-j:j))%i,g=()=>{x!==b&&(e.lineTo(d,b),e.lineTo(d,x),e.lineTo(d,w))};for(c&&(m=r[v(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[v(f)],m.skip)continue;const j=m.x,S=m.y,k=j|0;k===p?(S<x?x=S:S>b&&(b=S),d=(h*d+j)/++h):(g(),e.lineTo(j,S),p=k,h=0,x=b=S),w=S}g()}function Dp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?j6:w6}function N6(e){return e.stepped?j3:e.tension||e.cubicInterpolationMode==="monotone"?N3:Br}function S6(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),Z2(e,t.options),e.stroke(r)}function C6(e,t,n,s){const{segments:r,options:i}=t,a=Dp(t);for(const l of r)Z2(e,i,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const k6=typeof Path2D=="function";function E6(e,t,n,s){k6&&!t.options.segment?S6(e,t,n,s):C6(e,t,n,s)}class Zs extends Ms{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;m3(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=T3(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,a=$2(this,{property:n,start:r,end:r});if(!a.length)return;const l=[],c=N6(s);let u,d;for(u=0,d=a.length;u<d;++u){const{start:h,end:f}=a[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const x=Math.abs((r-m[n])/(p[n]-m[n])),b=c(m,p,x,s.stepped);b[n]=t[n],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,n,s){return Dp(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=Dp(this);let a=this._loop;n=n||0,s=s||this.points.length-n;for(const l of r)a&=i(t,this,l,{start:n,end:n+s-1});return!!a}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),E6(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ue(Zs,"id","line"),ue(Zs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ue(Zs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ue(Zs,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Xb(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class cu extends Ms{constructor(n){super();ue(this,"parsed");ue(this,"skip");ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(n-a,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return Xb(this,n,"x",s)}inYRange(n,s){return Xb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!bl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Cp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ue(cu,"id","point"),ue(cu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ue(cu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function tk(e,t){const{x:n,y:s,base:r,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=a/2,l=Math.min(n,r),c=Math.max(n,r),u=s-h,d=s+h):(h=i/2,l=n-h,c=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function er(e,t,n,s){return e?0:Dt(t,n,s)}function D6(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=T2(s);return{t:er(r.top,i.top,0,n),r:er(r.right,i.right,0,t),b:er(r.bottom,i.bottom,0,n),l:er(r.left,i.left,0,t)}}function T6(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Zi(r),a=Math.min(t,n),l=e.borderSkipped,c=s||je(r);return{topLeft:er(!c||l.top||l.left,i.topLeft,0,a),topRight:er(!c||l.top||l.right,i.topRight,0,a),bottomLeft:er(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:er(!c||l.bottom||l.right,i.bottomRight,0,a)}}function P6(e){const t=tk(e),n=t.right-t.left,s=t.bottom-t.top,r=D6(e,n/2,s/2),i=T6(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function yf(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&tk(e,s);return l&&(r||ys(t,l.left,l.right))&&(i||ys(n,l.top,l.bottom))}function _6(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function M6(e,t){e.rect(t.x,t.y,t.w,t.h)}function vf(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+a,radius:e.radius}}class uu extends Ms{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:a}=P6(this),l=_6(a.radius)?Xu:M6;t.save(),(a.w!==i.w||a.h!==i.h)&&(t.beginPath(),l(t,vf(a,n,i)),t.clip(),l(t,vf(i,-n,a)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,vf(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return yf(this,t,n,s)}inXRange(t,n){return yf(this,t,null,n)}inYRange(t,n){return yf(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ue(uu,"id","bar"),ue(uu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ue(uu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function A6(e,t,n){const s=e.segments,r=e.points,i=t.points,a=[];for(const l of s){let{start:c,end:u}=l;u=sh(c,u,r);const d=Tp(n,r[c],r[u],l.loop);if(!t.segments){a.push({source:l,target:d,start:r[c],end:r[u]});continue}const h=$2(t,d);for(const f of h){const m=Tp(n,i[f.start],i[f.end],f.loop),p=F2(l,r,m);for(const x of p)a.push({source:x,target:f,start:{[n]:Jb(d,m,"start",Math.max)},end:{[n]:Jb(d,m,"end",Math.min)}})}}return a}function Tp(e,t,n,s){if(s)return;let r=t[e],i=n[e];return e==="angle"&&(r=Jt(r),i=Jt(i)),{property:e,start:r,end:i}}function R6(e,t){const{x:n=null,y:s=null}=e||{},r=t.points,i=[];return t.segments.forEach(({start:a,end:l})=>{l=sh(a,l,r);const c=r[a],u=r[l];s!==null?(i.push({x:c.x,y:s}),i.push({x:u.x,y:s})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function sh(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Jb(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function nk(e,t){let n=[],s=!1;return rt(e)?(s=!0,n=e):n=R6(e,t),n.length?new Zs({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function Zb(e){return e&&e.fill!==!1}function I6(e,t,n){let r=e[t].fill;const i=[t];let a;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Mt(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function O6(e,t,n){const s=z6(e);if(je(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return Mt(r)&&Math.floor(r)===r?L6(s[0],t,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function L6(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function F6(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:je(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function $6(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:je(e)?s=e.value:s=t.getBaseValue(),s}function z6(e){const t=e.options,n=t.fill;let s=ye(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function B6(e){const{scale:t,index:n,line:s}=e,r=[],i=s.segments,a=s.points,l=V6(t,n);l.push(nk({x:null,y:t.bottom},s));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)U6(r,a[d],l)}return new Zs({points:r,options:{}})}function V6(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function U6(e,t,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:a,last:l,point:c}=W6(i,t,"x");if(!(!c||a&&l)){if(a)s.unshift(c);else if(e.push(c),!l)break}}e.push(...s)}function W6(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const r=s[n],i=e.segments,a=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=a[d.start][n],f=a[d.end][n];if(ys(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:s}}class sk{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:r,y:i,radius:a}=this;return n=n||{start:0,end:Ge},t.arc(r,i,a,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:r}=this,i=t.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function H6(e){const{chart:t,fill:n,line:s}=e;if(Mt(n))return q6(t,n);if(n==="stack")return B6(e);if(n==="shape")return!0;const r=G6(e);return r instanceof sk?r:nk(r,s)}function q6(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function G6(e){return(e.scale||{}).getPointPositionForValue?Q6(e):Y6(e)}function Y6(e){const{scale:t={},fill:n}=e,s=F6(n,t);if(Mt(s)){const r=t.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function Q6(e){const{scale:t,fill:n}=e,s=t.options,r=t.getLabels().length,i=s.reverse?t.max:t.min,a=$6(n,t,i),l=[];if(s.grid.circular){const c=t.getPointPositionForValue(0,i);return new sk({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,a));return l}function bf(e,t,n){const s=H6(t),{chart:r,index:i,line:a,scale:l,axis:c}=t,u=a.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=r.getDatasetMeta(i),x=z2(r,p);s&&a.points.length&&(Zd(e,n),K6(e,{line:a,target:s,above:f,below:m,area:n,scale:l,axis:c,clip:x}),eh(e))}function K6(e,t){const{line:n,target:s,above:r,below:i,area:a,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==r&&(u==="x"?(ew(e,s,a.top),wf(e,{line:n,target:s,color:r,scale:l,property:u,clip:c}),e.restore(),e.save(),ew(e,s,a.bottom)):u==="y"&&(tw(e,s,a.left),wf(e,{line:n,target:s,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),tw(e,s,a.right),d=r)),wf(e,{line:n,target:s,color:d,scale:l,property:u,clip:c}),e.restore()}function ew(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[sh(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function tw(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[sh(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function wf(e,t){const{line:n,target:s,property:r,color:i,scale:a,clip:l}=t,c=A6(n,s,r);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=s!==!0;e.save(),e.fillStyle=m,X6(e,a,l,p&&Tp(r,h,f)),e.beginPath();const x=!!n.pathSegment(e,u);let b;if(p){x?e.closePath():nw(e,s,f,r);const w=!!s.pathSegment(e,d,{move:x,reverse:!0});b=x&&w,b||nw(e,s,h,r)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function X6(e,t,n,s){const r=t.chart.chartArea,{property:i,start:a,end:l}=s||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=a,u=r.top,d=l,h=r.bottom):(c=r.left,u=a,d=r.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function nw(e,t,n,s){const r=t.interpolate(n,s);r&&e.lineTo(r.x,r.y)}var qx={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,r=[];let i,a,l,c;for(a=0;a<s;++a)i=e.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof Zs&&(c={visible:e.isDatasetVisible(a),index:a,fill:O6(l,a,s),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(a=0;a<s;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=I6(r,a,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),s&&l.fill&&bf(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;Zb(i)&&bf(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!Zb(s)||n.drawTime!=="beforeDatasetDraw"||bf(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const sw=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},J6=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class rw extends Ms{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Fe(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Tt(s.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=sw(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,x)=>{const b=s+n/2+i.measureText(p.text).width;(x===0||u[u.length-1]+b+2*l>a)&&(h+=d,u[u.length-(x>0?0:1)]=0,m+=d,f++),c[x]={left:0,top:m,row:f,width:b,height:r},u[u.length-1]+=b+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let h=l,f=0,m=0,p=0,x=0;return this.legendItems.forEach((b,w)=>{const{itemWidth:v,itemHeight:g}=Z6(s,n,i,b,r);w>0&&m+g+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,x++,f=m=0),c[w]={left:p,top:m,col:x,width:v,height:g},f=Math.max(f,v),m+=g+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,a=ea(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=kt(s,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=kt(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+r}else{let l=0,c=kt(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=kt(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Zd(t,this),this._draw(),eh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:a}=t,l=et.color,c=ea(t.rtl,this.left,this.width),u=Tt(a.font),{padding:d}=a,h=u.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:x,itemHeight:b}=sw(a,h),w=function(k,N,C){if(isNaN(p)||p<=0||isNaN(x)||x<0)return;r.save();const E=ye(C.lineWidth,1);if(r.fillStyle=ye(C.fillStyle,l),r.lineCap=ye(C.lineCap,"butt"),r.lineDashOffset=ye(C.lineDashOffset,0),r.lineJoin=ye(C.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=ye(C.strokeStyle,l),r.setLineDash(ye(C.lineDash,[])),a.usePointStyle){const P={radius:x*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},L=c.xPlus(k,p/2),F=N+f;D2(r,P,L,F,a.pointStyleWidth&&p)}else{const P=N+Math.max((h-x)/2,0),L=c.leftForLtr(k,p),F=Zi(C.borderRadius);r.beginPath(),Object.values(F).some($=>$!==0)?Xu(r,{x:L,y:P,w:p,h:x,radius:F}):r.rect(L,P,p,x),r.fill(),E!==0&&r.stroke()}r.restore()},v=function(k,N,C){wl(r,C.text,k,N+b/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},g=this.isHorizontal(),j=this._computeTitleHeight();g?m={x:kt(i,this.left+d,this.right-s[0]),y:this.top+d+j,line:0}:m={x:this.left+d,y:kt(i,this.top+j+d,this.bottom-n[0].height),line:0},I2(this.ctx,t.textDirection);const S=b+d;this.legendItems.forEach((k,N)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const C=r.measureText(k.text).width,E=c.textAlign(k.textAlign||(k.textAlign=a.textAlign)),P=p+f+C;let L=m.x,F=m.y;c.setWidth(this.width),g?N>0&&L+P+d>this.right&&(F=m.y+=S,m.line++,L=m.x=kt(i,this.left+d,this.right-s[m.line])):N>0&&F+S>this.bottom&&(L=m.x=L+n[m.line].width+d,m.line++,F=m.y=kt(i,this.top+j+d,this.bottom-n[m.line].height));const $=c.x(L);if(w($,F,k),L=PL(E,L+p+f,g?L+P:this.right,t.rtl),v(c.x(L),F,k),g)m.x+=P+d;else if(typeof k.text!="string"){const A=u.lineHeight;m.y+=rk(k,A)+d}else m.y+=S}),O2(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Tt(n.font),r=En(n.padding);if(!n.display)return;const i=ea(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=s.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=kt(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);d=u+kt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=kt(l,h,h+f);a.textAlign=i.textAlign(Ox(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=s.string,wl(a,n.text,m,d,s)}_computeTitleHeight(){const t=this.options.title,n=Tt(t.font),s=En(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(ys(t,this.left,this.right)&&ys(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],ys(t,r.left,r.left+r.width)&&ys(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!n$(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=J6(r,s);r&&!i&&Fe(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&Fe(n.onHover,[t,s,this],this)}else s&&Fe(n.onClick,[t,s,this],this)}}function Z6(e,t,n,s,r){const i=e$(s,e,t,n),a=t$(r,s,t.lineHeight);return{itemWidth:i,itemHeight:a}}function e$(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,a)=>i.length>a.length?i:a)),t+n.size/2+s.measureText(r).width}function t$(e,t,n){let s=e;return typeof t.text!="string"&&(s=rk(t,n)),s}function rk(e,t){const n=e.text?e.text.length:0;return t*n}function n$(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Gx={id:"legend",_element:rw,start(e,t,n){const s=e.legend=new rw({ctx:e.ctx,options:n,chart:e});wn.configure(e,s,n),wn.addBox(e,s)},stop(e){wn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;wn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=En(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ik extends Ms{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=rt(s.text)?s.text.length:1;this._padding=En(s.padding);const i=r*Tt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:a}=this,l=a.align;let c=0,u,d,h;return this.isHorizontal()?(d=kt(l,s,i),h=n+t,u=i-s):(a.position==="left"?(d=s+t,h=kt(l,r,n),c=Me*-.5):(d=i-t,h=kt(l,n,r),c=Me*.5),u=r-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Tt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);wl(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:Ox(n.align),textBaseline:"middle",translation:[a,l]})}}function s$(e,t){const n=new ik({ctx:e.ctx,options:t,chart:e});wn.configure(e,n,t),wn.addBox(e,n),e.titleBlock=n}var ak={id:"title",_element:ik,start(e,t,n){s$(e,n)},stop(e){const t=e.titleBlock;wn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;wn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wo={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=e.length;i<a;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Np(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function Yn(e,t){return t&&(rt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function cs(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function r$(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:a,value:l}=i.getLabelAndValue(r);return{chart:e,label:a,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function iw(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:a,boxHeight:l}=t,c=Tt(t.bodyFont),u=Tt(t.titleFont),d=Tt(t.footerFont),h=i.length,f=r.length,m=s.length,p=En(t.padding);let x=p.height,b=0,w=s.reduce((j,S)=>j+S.before.length+S.lines.length+S.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,h&&(x+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),w){const j=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=m*j+(w-m)*c.lineHeight+(w-1)*t.bodySpacing}f&&(x+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let v=0;const g=function(j){b=Math.max(b,n.measureText(j).width+v)};return n.save(),n.font=u.string,_e(e.title,g),n.font=c.string,_e(e.beforeBody.concat(e.afterBody),g),v=t.displayColors?a+2+t.boxPadding:0,_e(s,j=>{_e(j.before,g),_e(j.lines,g),_e(j.after,g)}),v=0,n.font=d.string,_e(e.footer,g),n.restore(),b+=p.width,{width:b,height:x}}function i$(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function a$(e,t,n,s){const{x:r,width:i}=s,a=n.caretSize+n.caretPadding;if(e==="left"&&r+i+a>t.width||e==="right"&&r-i-a<0)return!0}function o$(e,t,n,s){const{x:r,width:i}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=a-i/2&&(u="right"),a$(u,e,t,n)&&(u="center"),u}function aw(e,t,n){const s=n.yAlign||t.yAlign||i$(e,n);return{xAlign:n.xAlign||t.xAlign||o$(e,t,n,s),yAlign:s}}function l$(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function c$(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function ow(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=Zi(a);let p=l$(t,l);const x=c$(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Dt(p,0,s.width-t.width),y:Dt(x,0,s.height-t.height)}}function _c(e,t,n){const s=En(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function lw(e){return Yn([],cs(e))}function u$(e,t,n){return bi(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function cw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const ok={beforeTitle:as,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:as,beforeBody:as,beforeLabel:as,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return De(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:as,afterBody:as,beforeFooter:as,footer:as,afterFooter:as};function Bt(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?ok[t].call(n,s):r}class Pp extends Ms{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new B2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=u$(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=Bt(s,"beforeTitle",this,t),i=Bt(s,"title",this,t),a=Bt(s,"afterTitle",this,t);let l=[];return l=Yn(l,cs(r)),l=Yn(l,cs(i)),l=Yn(l,cs(a)),l}getBeforeBody(t,n){return lw(Bt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return _e(t,i=>{const a={before:[],lines:[],after:[]},l=cw(s,i);Yn(a.before,cs(Bt(l,"beforeLabel",this,i))),Yn(a.lines,Bt(l,"label",this,i)),Yn(a.after,cs(Bt(l,"afterLabel",this,i))),r.push(a)}),r}getAfterBody(t,n){return lw(Bt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=Bt(s,"beforeFooter",this,t),i=Bt(s,"footer",this,t),a=Bt(s,"afterFooter",this,t);let l=[];return l=Yn(l,cs(r)),l=Yn(l,cs(i)),l=Yn(l,cs(a)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(r$(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,s))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,s))),_e(l,d=>{const h=cw(t.callbacks,d);r.push(Bt(h,"labelColor",this,d)),i.push(Bt(h,"labelPointStyle",this,d)),a.push(Bt(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=wo[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=iw(this,s),u=Object.assign({},l,c),d=aw(this.chart,s,u),h=ow(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Zi(l),{x:f,y:m}=t,{width:p,height:x}=n;let b,w,v,g,j,S;return i==="center"?(j=m+x/2,r==="left"?(b=f,w=b-a,g=j+a,S=j-a):(b=f+p,w=b+a,g=j-a,S=j+a),v=b):(r==="left"?w=f+Math.max(c,d)+a:r==="right"?w=f+p-Math.max(u,h)-a:w=this.caretX,i==="top"?(g=m,j=g-a,b=w-a,v=w+a):(g=m+x,j=g+a,b=w+a,v=w-a),S=g),{x1:b,x2:w,x3:v,y1:g,y2:j,y3:S}}drawTitle(t,n,s){const r=this.title,i=r.length;let a,l,c;if(i){const u=ea(s.rtl,this.x,this.width);for(t.x=_c(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",a=Tt(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=a.string,c=0;c<i;++c)n.fillText(r[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=Tt(i.bodyFont),h=_c(this,"left",i),f=r.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const x={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,u)+u/2,w=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Cp(t,x,b,w),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Cp(t,x,b,w)}else{t.lineWidth=je(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const x=r.leftForLtr(f,u),b=r.leftForLtr(r.xPlus(f,1),u-2),w=Zi(a.borderRadius);Object.values(w).some(v=>v!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Xu(t,{x,y:p,w:u,h:c,radius:w}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Xu(t,{x:b,y:p+1,w:u-2,h:c-2,radius:w}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(x,p,u,c),t.strokeRect(x,p,u,c),t.fillStyle=a.backgroundColor,t.fillRect(b,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=Tt(s.bodyFont);let f=h.lineHeight,m=0;const p=ea(s.rtl,this.x,this.width),x=function(C){n.fillText(C,p.x(t.x+m),t.y+f/2),t.y+=f+i},b=p.textAlign(a);let w,v,g,j,S,k,N;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,t.x=_c(this,b,s),n.fillStyle=s.bodyColor,_e(this.beforeBody,x),m=l&&b!=="right"?a==="center"?u/2+d:u+2+d:0,j=0,k=r.length;j<k;++j){for(w=r[j],v=this.labelTextColors[j],n.fillStyle=v,_e(w.before,x),g=w.lines,l&&g.length&&(this._drawColorBox(n,t,j,p,s),f=Math.max(h.lineHeight,c)),S=0,N=g.length;S<N;++S)x(g[S]),f=h.lineHeight;_e(w.after,x)}m=0,f=h.lineHeight,_e(this.afterBody,x),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let a,l;if(i){const c=ea(s.rtl,this.x,this.width);for(t.x=_c(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",a=Tt(s.footerFont),n.fillStyle=s.footerColor,n.font=a.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=Zi(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),a==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),a==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const a=wo[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=iw(this,t),c=Object.assign({},a,this._size),u=aw(n,t,c),d=ow(t,c,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=En(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),I2(t,n.textDirection),i.y+=a.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),O2(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Yu(s,r),a=this._positionChanged(r,n);(i||a)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(t,i,n,s),l=this._positionChanged(a,t),c=n||!Yu(a,i)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,a=wo[i.position].call(this,t,n);return a!==!1&&(s!==a.x||r!==a.y)}}ue(Pp,"positioners",wo);var Yx={id:"tooltip",_element:Pp,positioners:wo,afterInit(e,t,n){n&&(e.tooltip=new Pp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ok},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const d$=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function h$(e,t,n,s){const r=e.indexOf(t);if(r===-1)return d$(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const f$=(e,t)=>e===null?null:Dt(Math.round(e),0,t);function uw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class td extends ka{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(De(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:h$(s,t,ye(n,t),this._addedLabels),f$(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=t;a<=n;a++)r.push({value:a});return r}getLabelForValue(t){return uw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ue(td,"id","category"),ue(td,"defaults",{ticks:{callback:uw}});function m$(e,t){const n=[],{bounds:r,step:i,min:a,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:x,max:b}=t,w=!De(a),v=!De(l),g=!De(u),j=(b-x)/(h+1);let S=ob((b-x)/p/m)*m,k,N,C,E;if(S<1e-14&&!w&&!v)return[{value:x},{value:b}];E=Math.ceil(b/S)-Math.floor(x/S),E>p&&(S=ob(E*S/p/m)*m),De(c)||(k=Math.pow(10,c),S=Math.ceil(S*k)/k),r==="ticks"?(N=Math.floor(x/S)*S,C=Math.ceil(b/S)*S):(N=x,C=b),w&&v&&i&&wL((l-a)/i,S/1e3)?(E=Math.round(Math.min((l-a)/S,d)),S=(l-a)/E,N=a,C=l):g?(N=w?a:N,C=v?l:C,E=u-1,S=(C-N)/E):(E=(C-N)/S,Fo(E,Math.round(E),S/1e3)?E=Math.round(E):E=Math.ceil(E));const P=Math.max(lb(S),lb(N));k=Math.pow(10,De(c)?P:c),N=Math.round(N*k)/k,C=Math.round(C*k)/k;let L=0;for(w&&(f&&N!==a?(n.push({value:a}),N<a&&L++,Fo(Math.round((N+L*S)*k)/k,a,dw(a,j,e))&&L++):N<a&&L++);L<E;++L){const F=Math.round((N+L*S)*k)/k;if(v&&F>l)break;n.push({value:F})}return v&&f&&C!==l?n.length&&Fo(n[n.length-1].value,l,dw(l,j,e))?n[n.length-1].value=l:n.push({value:l}):(!v||C===l)&&n.push({value:C}),n}function dw(e,t,{horizontal:n,minRotation:s}){const r=xs(s),i=(n?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+e).length;return Math.min(t/i,a)}class p$ extends ka{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return De(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const a=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=ns(r),u=ns(i);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||a(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=m$(r,i);return t.bounds==="ticks"&&jL(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Fx(t,this.chart.options.locale,this.options.ticks.format)}}class nd extends p${determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Mt(t)?t:0,this.max=Mt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=xs(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ue(nd,"id","linear"),ue(nd,"defaults",{ticks:{callback:E2.formatters.numeric}});const rh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ut=Object.keys(rh);function hw(e,t){return e-t}function fw(e,t){if(De(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let a=t;return typeof s=="function"&&(a=s(a)),Mt(a)||(a=typeof s=="string"?n.parse(a,s):n.parse(a)),a===null?null:(r&&(a=r==="week"&&(yl(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,r)),+a)}function mw(e,t,n,s){const r=Ut.length;for(let i=Ut.indexOf(e);i<r-1;++i){const a=rh[Ut[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=s)return Ut[i]}return Ut[r-1]}function g$(e,t,n,s,r){for(let i=Ut.length-1;i>=Ut.indexOf(n);i--){const a=Ut[i];if(rh[a].common&&e._adapter.diff(r,s,a)>=t-1)return a}return Ut[n?Ut.indexOf(n):0]}function x$(e){for(let t=Ut.indexOf(e)+1,n=Ut.length;t<n;++t)if(rh[Ut[t]].common)return Ut[t]}function pw(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=Ix(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function y$(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),a=t[t.length-1].value;let l,c;for(l=i;l<=a;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function gw(e,t,n){const s=[],r={},i=t.length;let a,l;for(a=0;a<i;++a)l=t[a],r[l]=a,s.push({value:l,major:!1});return i===0||!n?s:y$(e,s,r,n)}class sd extends ka{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new rF._date(t.adapters.date);r.init(n),Lo(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:fw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Mt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Mt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=this.max,l=EL(r,i,a);return this._unit=n.unit||(s.autoSkip?mw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):g$(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:x$(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),gw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Dt(n,0,a),s=Dt(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,a=i.unit||mw(i.minUnit,n,s,this._getLabelCapacity(n)),l=ye(r.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=yl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(s,n,a)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+a);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+t.add(f,l,a),m++)pw(d,f,p);return(f===s||r.bounds==="ticks"||m===1)&&pw(d,f,p),Object.keys(d).sort(hw).map(x=>+x)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,a=n||r[i];return this._adapter.format(t,a)}_tickFormatFunction(t,n,s,r){const i=this.options,a=i.ticks.callback;if(a)return Fe(a,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=s[n],m=u&&h&&f&&f.major;return this._adapter.format(t,r||(m?h:d))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=xs(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*a,h:s*a+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,gw(this,[t],this._majorUnit),r),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(fw(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return S2(t.sort(hw))}}ue(sd,"id","time"),ue(sd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Mc(e,t,n){let s=0,r=e.length-1,i,a,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Qr(e,"pos",t)),{pos:i,time:l}=e[s],{pos:a,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Qr(e,"time",t)),{time:i,pos:l}=e[s],{time:a,pos:c}=e[r]);const u=a-i;return u?l+(c-l)*(t-i)/u:l}class xw extends sd{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Mc(n,this.min),this._tableRange=Mc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(a=0,l=r.length;a<l;++a)d=r[a+1],c=r[a-1],u=r[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Mc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Mc(this._table,s*this._tableRange+this._minPos,!0)}}ue(xw,"id","timeseries"),ue(xw,"defaults",sd.defaults);const lk="label";function yw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function v$(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function ck(e,t){e.labels=t}function uk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lk;const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(a=>a[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function b$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lk;const n={labels:[],datasets:[]};return ck(n,e.labels),uk(n,e.datasets,t),n}function w$(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=y.useRef(null),p=y.useRef(null),x=()=>{m.current&&(p.current=new Ea(m.current,{type:a,data:b$(l,i),options:c&&{...c},plugins:u}),yw(t,p.current))},b=()=>{yw(t,null),p.current&&(p.current.destroy(),p.current=null)};return y.useEffect(()=>{!r&&p.current&&c&&v$(p.current,c)},[r,c]),y.useEffect(()=>{!r&&p.current&&ck(p.current.config.data,l.labels)},[r,l.labels]),y.useEffect(()=>{!r&&p.current&&l.datasets&&uk(p.current.config.data,l.datasets,i)},[r,l.datasets]),y.useEffect(()=>{p.current&&(r?(b(),setTimeout(x)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),y.useEffect(()=>{p.current&&(b(),setTimeout(x))},[a]),y.useEffect(()=>(x(),()=>b()),[]),ne.createElement("canvas",{ref:m,role:"img",height:n,width:s,...f},d)}const j$=y.forwardRef(w$);function Qx(e,t){return Ea.register(t),y.forwardRef((n,s)=>ne.createElement(j$,{...n,ref:s,type:e}))}const N$=Qx("line",au),S$=Qx("bar",iu),C$=Qx("doughnut",yo);Ea.register(td,nd,uu,ak,Yx,Gx,qx);function dk({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(S$,{data:e,options:r})})}Ea.register(td,nd,cu,Zs,ak,Yx,Gx,qx);function k$({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(N$,{data:e,options:r})})}Ea.register(bo,Yx,Gx,qx);function E$({data:e,options:t,height:n=250}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const a=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${a}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(C$,{data:e,options:r})})}const D$=y.memo(k$),T$=y.memo(dk),P$=y.memo(E$);function jf(){const{user:e,isAuthenticated:t}=ze(),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState(0),[c,u]=y.useState(0),[d,h]=y.useState(!0),[f,m]=y.useState([]),[p,x]=y.useState([]),[b,w]=y.useState(null);y.useEffect(()=>{(async()=>{if(!t||!e){console.log(" Skipping data fetch - user not authenticated"),h(!1);return}try{console.log(" AdminDashboard: Starting data fetch..."),w(null);const[C,E,P,L,F]=await Promise.all([Na().catch(R=>(console.error("Leads error:",R),[])),zd().catch(R=>(console.error("Jobs error:",R),[])),rx().catch(R=>(console.error("Equipment error:",R),[])),Ol().catch(R=>(console.error("Operators error:",R),[])),sx().catch(R=>(console.error("Deals error:",R),[]))]),$=R=>Array.isArray(R)?R:R&&typeof R=="object"&&R.data&&Array.isArray(R.data)||R&&typeof R=="object"&&R.success&&Array.isArray(R.data)?R.data:[],A=$(C),B=$(E),q=$(P),I=$(L),T=$(F);s(A),i(B),l(q.length),u(I.length),m(q),x(T)}catch(C){console.error(" Error fetching dashboard data:",C),w(`Failed to load dashboard data: ${(C==null?void 0:C.message)||C}`)}finally{h(!1)}})()},[t,e]);const v=y.useMemo(()=>{try{if(Array.isArray(p)&&p.length>0)return p.filter(N=>N&&N.stage==="won").reduce((N,C)=>N+(C.value||0),0)}catch(N){console.error("Error calculating revenue:",N)}return 0},[p]),g=y.useMemo(()=>Array.isArray(r)?r.filter(N=>N.status==="in_progress"||N.status==="scheduled").length/(a||1)*100:0,[r,a]),j=y.useMemo(()=>({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[15e4,2e5,18e4,22e4,25e4,v>0?v:3e5],backgroundColor:"rgba(56, 81, 159, 0.1)",borderColor:"#38519F",pointBackgroundColor:"#FFCC3F",pointBorderColor:"#38519F",pointHoverBackgroundColor:"#38519F",pointHoverBorderColor:"#FFCC3F",borderWidth:3,tension:.4,fill:!0}]}),[v]),S=y.useMemo(()=>({labels:["Available","In Use","Maintenance"],datasets:[{data:[Array.isArray(f)?f.filter(N=>N.status==="available").length:0,Array.isArray(f)?f.filter(N=>N.status==="in_use").length:0,Array.isArray(f)?f.filter(N=>N.status==="maintenance").length:0],backgroundColor:["#22C55E","#38519F","#FFCC3F"],borderColor:["#16A34A","#38519F","#FFCC3F"],borderWidth:2,hoverBorderWidth:4}]}),[f]),k=y.useMemo(()=>({labels:["Scheduled","In Progress","Completed","Cancelled"],datasets:[{label:"Jobs by Status",data:[Array.isArray(r)?r.filter(N=>N.status==="scheduled").length:0,Array.isArray(r)?r.filter(N=>N.status==="in_progress").length:0,Array.isArray(r)?r.filter(N=>N.status==="completed").length:0,Array.isArray(r)?r.filter(N=>N.status==="cancelled").length:0],backgroundColor:["rgba(56, 81, 159, 0.8)","rgba(34, 197, 94, 0.8)","rgba(64, 64, 64, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#38519F","#22C55E","#404040","#EF4444"],borderWidth:2,borderRadius:8}]}),[r]);return d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-20 w-20 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 h-20 w-20 border-4 border-transparent border-t-brand-gold rounded-full animate-spin animate-reverse",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Dashboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fetching your data..."})]})]})}):b?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(ee,{variant:"bordered",className:"max-w-md bg-red-50 border-red-200",children:o.jsxs(se,{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(sR,{className:"w-8 h-8 text-red-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),o.jsx("p",{className:"text-red-600 mb-6",children:b}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20",children:o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin"]}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your business today."})]}),o.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Last updated"}),o.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleTimeString()})]})})]})}),o.jsxs("section",{className:"grid gap-6 auto-fit-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},role:"region","aria-label":"Key Performance Indicators",children:[o.jsx(Lt,{title:"Total Revenue",value:Se(v),icon:o.jsx(Bd,{className:"h-5 w-5"}),variant:"primary",trend:{value:12.5,isPositive:!0},loading:d}),o.jsx(Lt,{title:"Equipment Fleet",value:a,subtitle:"Active units",icon:o.jsx(sn,{className:"h-5 w-5"}),variant:"success",trend:{value:8.2,isPositive:!0},loading:d}),o.jsx(Lt,{title:"Active Jobs",value:r.length,subtitle:"In progress",icon:o.jsx(kA,{className:"h-5 w-5"}),variant:"warning",trend:{value:3.1,isPositive:!1},loading:d}),o.jsx(Lt,{title:"Operators",value:c,subtitle:"Available staff",icon:o.jsx(zn,{className:"h-5 w-5"}),variant:"accent",trend:{value:5.7,isPositive:!0},loading:d})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",role:"region","aria-label":"Analytics Charts",children:[o.jsxs(ee,{variant:"glass",className:"col-span-1",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(KA,{className:"h-4 w-4 text-green-600"})}),o.jsx(me,{className:"text-lg",children:"Equipment Status"})]})}),o.jsx(se,{children:o.jsx("div",{className:"h-64",children:o.jsx(P$,{data:S,height:240})})})]}),o.jsxs(ee,{variant:"glass",className:"col-span-1",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(lp,{className:"h-4 w-4 text-blue-600"})}),o.jsx(me,{className:"text-lg",children:"Monthly Revenue"})]})}),o.jsx(se,{children:o.jsx("div",{className:"h-64",children:o.jsx(D$,{data:j,height:240})})})]}),o.jsxs(ee,{variant:"glass",className:"col-span-1",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(AS,{className:"h-4 w-4 text-purple-600"})}),o.jsx(me,{className:"text-lg",children:"Jobs by Status"})]})}),o.jsx(se,{children:o.jsx("div",{className:"h-64",children:o.jsx(T$,{data:k,height:240})})})]})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx(B5,{className:"h-full"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{variant:"gradient",className:"h-fit",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-blue/10 rounded-lg",children:o.jsx(sn,{className:"h-4 w-4 text-brand-blue"})}),o.jsx(me,{className:"text-lg",children:"Equipment Summary"})]})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Available Equipment:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(f)?f.filter(N=>N.status==="available").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"In Use:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Array.isArray(f)?f.filter(N=>N.status==="in_use").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Under Maintenance:"}),o.jsx("span",{className:"text-sm font-semibold text-orange-600",children:Array.isArray(f)?f.filter(N=>N.status==="maintenance").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Utilization Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[a>0?Math.round(g):0,"%"]})]})})]})})]}),o.jsxs(ee,{variant:"gradient",className:"h-fit",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-gold/10 rounded-lg",children:o.jsx(lp,{className:"h-4 w-4 text-brand-gold"})}),o.jsx(me,{className:"text-lg",children:"Business Overview"})]})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:n.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Active Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Won Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.filter(N=>N.stage==="won").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[n.length>0?Math.round((Array.isArray(p)?p.length:0)/n.length*100):0,"%"]})]})})]})})]})]})]})]})})}const Kx="-",_$=e=>{const t=A$(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(Kx);return l[0]===""&&l.length!==1&&l.shift(),hk(l,t)||M$(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},hk=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?hk(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(Kx);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},vw=/^\[(.+)\]$/,M$=e=>{if(vw.test(e)){const t=vw.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},A$=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)_p(n[r],s,r,t);return s},_p=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:bw(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(R$(r)){_p(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{_p(a,bw(t,i),n,s)})})},bw=(e,t)=>{let n=e;return t.split(Kx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},R$=e=>e.isThemeGetter,I$=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},Mp="!",Ap=":",O$=Ap.length,L$=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let a=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let x=r[p];if(a===0&&l===0){if(x===Ap){i.push(r.slice(c,p)),c=p+O$;continue}if(x==="/"){u=p;continue}}x==="["?a++:x==="]"?a--:x==="("?l++:x===")"&&l--}const d=i.length===0?r:r.substring(c),h=F$(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const r=t+Ap,i=s;s=a=>a.startsWith(r)?i(a.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},F$=e=>e.endsWith(Mp)?e.substring(0,e.length-1):e.startsWith(Mp)?e.substring(1):e,$$=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(a=>{a[0]==="["||t[a]?(r.push(...i.sort(),a),i=[]):i.push(a)}),r.push(...i.sort()),r}},z$=e=>({cache:I$(e.cacheSize),parseClassName:L$(e),sortModifiers:$$(e),..._$(e)}),B$=/\s+/,V$=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,a=[],l=e.trim().split(B$);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:x}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let b=!!x,w=s(b?p.substring(0,x):p);if(!w){if(!b){c=d+(c.length>0?" "+c:c);continue}if(w=s(p),!w){c=d+(c.length>0?" "+c:c);continue}b=!1}const v=i(f).join(":"),g=m?v+Mp:v,j=g+w;if(a.includes(j))continue;a.push(j);const S=r(w,b);for(let k=0;k<S.length;++k){const N=S[k];a.push(g+N)}c=d+(c.length>0?" "+c:c)}return c};function U$(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=fk(t))&&(s&&(s+=" "),s+=n);return s}const fk=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=fk(e[s]))&&(n&&(n+=" "),n+=t);return n};function W$(e,...t){let n,s,r,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=z$(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=V$(c,n);return r(c,d),d}return function(){return i(U$.apply(null,arguments))}}const ct=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},mk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,pk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,H$=/^\d+\/\d+$/,q$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Y$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Q$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,K$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ei=e=>H$.test(e),ve=e=>!!e&&!Number.isNaN(Number(e)),Is=e=>!!e&&Number.isInteger(Number(e)),Nf=e=>e.endsWith("%")&&ve(e.slice(0,-1)),os=e=>q$.test(e),X$=()=>!0,J$=e=>G$.test(e)&&!Y$.test(e),gk=()=>!1,Z$=e=>Q$.test(e),ez=e=>K$.test(e),tz=e=>!de(e)&&!he(e),nz=e=>Da(e,vk,gk),de=e=>mk.test(e),Mr=e=>Da(e,bk,J$),Sf=e=>Da(e,oz,ve),ww=e=>Da(e,xk,gk),sz=e=>Da(e,yk,ez),Ac=e=>Da(e,wk,Z$),he=e=>pk.test(e),Za=e=>Ta(e,bk),rz=e=>Ta(e,lz),jw=e=>Ta(e,xk),iz=e=>Ta(e,vk),az=e=>Ta(e,yk),Rc=e=>Ta(e,wk,!0),Da=(e,t,n)=>{const s=mk.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Ta=(e,t,n=!1)=>{const s=pk.exec(e);return s?s[1]?t(s[1]):n:!1},xk=e=>e==="position"||e==="percentage",yk=e=>e==="image"||e==="url",vk=e=>e==="length"||e==="size"||e==="bg-size",bk=e=>e==="length",oz=e=>e==="number",lz=e=>e==="family-name",wk=e=>e==="shadow",cz=()=>{const e=ct("color"),t=ct("font"),n=ct("text"),s=ct("font-weight"),r=ct("tracking"),i=ct("leading"),a=ct("breakpoint"),l=ct("container"),c=ct("spacing"),u=ct("radius"),d=ct("shadow"),h=ct("inset-shadow"),f=ct("text-shadow"),m=ct("drop-shadow"),p=ct("blur"),x=ct("perspective"),b=ct("aspect"),w=ct("ease"),v=ct("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...j(),he,de],k=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],C=()=>[he,de,c],E=()=>[Ei,"full","auto",...C()],P=()=>[Is,"none","subgrid",he,de],L=()=>["auto",{span:["full",Is,he,de]},Is,he,de],F=()=>[Is,"auto",he,de],$=()=>["auto","min","max","fr",he,de],A=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...C()],I=()=>[Ei,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],T=()=>[e,he,de],R=()=>[...j(),jw,ww,{position:[he,de]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",iz,nz,{size:[he,de]}],Z=()=>[Nf,Za,Mr],ie=()=>["","none","full",u,he,de],ce=()=>["",ve,Za,Mr],O=()=>["solid","dashed","dotted","double"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>[ve,Nf,jw,ww],z=()=>["","none",p,he,de],U=()=>["none",ve,he,de],X=()=>["none",ve,he,de],_=()=>[ve,he,de],M=()=>[Ei,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[os],breakpoint:[os],color:[X$],container:[os],"drop-shadow":[os],ease:["in","out","in-out"],font:[tz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[os],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[os],shadow:[os],spacing:["px",ve],text:[os],"text-shadow":[os],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ei,de,he,b]}],container:["container"],columns:[{columns:[ve,de,he,l]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Is,"auto",he,de]}],basis:[{basis:[Ei,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ve,Ei,"auto","initial","none",de]}],grow:[{grow:["",ve,he,de]}],shrink:[{shrink:["",ve,he,de]}],order:[{order:[Is,"first","last","none",he,de]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...A(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...A()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[l,"screen",...I()]}],"min-w":[{"min-w":[l,"screen","none",...I()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,Za,Mr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,he,Sf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Nf,de]}],"font-family":[{font:[rz,de,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,he,de]}],"line-clamp":[{"line-clamp":[ve,"none",he,Sf]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",he,de]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",he,de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:[ve,"from-font","auto",he,Mr]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[ve,"auto",he,de]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he,de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he,de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Is,he,de],radial:["",he,de],conic:[Is,he,de]},az,sz]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...O(),"hidden","none"]}],"divide-style":[{divide:[...O(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...O(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ve,he,de]}],"outline-w":[{outline:["",ve,Za,Mr]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,Rc,Ac]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",h,Rc,Ac]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[ve,Mr]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",f,Rc,Ac]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[ve,he,de]}],"mix-blend":[{"mix-blend":[...V(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":V()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ve]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[he,de]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[ve]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",he,de]}],filter:[{filter:["","none",he,de]}],blur:[{blur:z()}],brightness:[{brightness:[ve,he,de]}],contrast:[{contrast:[ve,he,de]}],"drop-shadow":[{"drop-shadow":["","none",m,Rc,Ac]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",ve,he,de]}],"hue-rotate":[{"hue-rotate":[ve,he,de]}],invert:[{invert:["",ve,he,de]}],saturate:[{saturate:[ve,he,de]}],sepia:[{sepia:["",ve,he,de]}],"backdrop-filter":[{"backdrop-filter":["","none",he,de]}],"backdrop-blur":[{"backdrop-blur":z()}],"backdrop-brightness":[{"backdrop-brightness":[ve,he,de]}],"backdrop-contrast":[{"backdrop-contrast":[ve,he,de]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ve,he,de]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ve,he,de]}],"backdrop-invert":[{"backdrop-invert":["",ve,he,de]}],"backdrop-opacity":[{"backdrop-opacity":[ve,he,de]}],"backdrop-saturate":[{"backdrop-saturate":[ve,he,de]}],"backdrop-sepia":[{"backdrop-sepia":["",ve,he,de]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",he,de]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ve,"initial",he,de]}],ease:[{ease:["linear","initial",w,he,de]}],delay:[{delay:[ve,he,de]}],animate:[{animate:["none",v,he,de]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,he,de]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:U()}],"rotate-x":[{"rotate-x":U()}],"rotate-y":[{"rotate-y":U()}],"rotate-z":[{"rotate-z":U()}],scale:[{scale:X()}],"scale-x":[{"scale-x":X()}],"scale-y":[{"scale-y":X()}],"scale-z":[{"scale-z":X()}],"scale-3d":["scale-3d"],skew:[{skew:_()}],"skew-x":[{"skew-x":_()}],"skew-y":[{"skew-y":_()}],transform:[{transform:[he,de,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:M()}],"translate-x":[{"translate-x":M()}],"translate-y":[{"translate-y":M()}],"translate-z":[{"translate-z":M()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he,de]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he,de]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[ve,Za,Mr,Sf]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},uz=W$(cz);function dz(...e){return uz(m2(e))}function Ul({status:e,className:t}){const n=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("span",{className:dz("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}const hz=Ca("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function fz({stages:e,height:t=250}){const n=Math.max(...e.map(r=>r.value)),s=e.reduce((r,i)=>r+i.value,0);return o.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((r,i)=>{const a=n===0?40:Math.max(40,Math.min(100,r.value/n*100)),l=s===0?0:Math.round(r.value/s*100),c=i===0?"first":i===e.length-1?"last":"middle";return o.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${a}%`},children:[o.jsx("div",{className:hz({position:c}),style:{backgroundColor:r.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:o.jsx("span",{className:"text-white text-xs font-medium",children:r.value})}),o.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[o.jsx("span",{className:"font-medium text-gray-800",children:r.label}),o.jsxs("span",{children:[l,"%"]})]})]},r.label)})})}function mz(){const[e,t]=y.useState([]),[n,s]=y.useState([]),[r,i]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const x=await Na(),w=(g=>Array.isArray(g)?g:g&&typeof g=="object"&&g.data&&Array.isArray(g.data)||g&&typeof g=="object"&&g.success&&Array.isArray(g.data)?g.data:[])(x);t(w);const v=w.filter(g=>g.status==="converted");if(v.length>0){const g=v[0],j=await Fu(g.id);s(j)}}catch(x){console.error("Error fetching dashboard data:",x),t([]),s([])}finally{i(!1)}})()},[]);const a=Array.isArray(e)?e.filter(p=>p.status==="new").length:0,l=Array.isArray(e)?e.filter(p=>p.status==="in_process").length:0,c=Array.isArray(e)?e.filter(p=>p.status==="qualified").length:0,u=Array.isArray(e)?e.filter(p=>p.status==="converted").length:0,d=Array.isArray(n)?n.reduce((p,x)=>p+x.totalRent,0):0,h=Array.isArray(e)?[...e].sort((p,x)=>new Date(x.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5):[],f=[{label:"New",value:a,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return r?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Lt,{title:"New Leads",value:a,icon:o.jsx(G0,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Lt,{title:"In Process",value:l,icon:o.jsx(zn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Lt,{title:"Qualified Leads",value:c,icon:o.jsx(G0,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Lt,{title:"Quotation Value",value:Se(d),icon:o.jsx(Bd,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Lead Conversion Funnel"})}),o.jsx(se,{className:"flex justify-center",children:o.jsx(fz,{stages:f,height:250})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Weekly Lead Generation"})}),o.jsx(se,{children:o.jsx(dk,{data:m,height:250})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(me,{children:"Recent Leads"}),o.jsx(Xn,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),o.jsx(se,{children:h.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Ul,{status:p.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ee,{className:"h-full",children:[o.jsx(fe,{children:o.jsx(me,{children:"Upcoming Tasks"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(IS,{className:"h-5 w-5 text-primary-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(TA,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(AS,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}const pz=Ca("inline-flex items-center justify-center font-medium transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden",{variants:{variant:{default:"bg-gradient-to-r from-brand-blue to-brand-blue/90 text-white shadow-lg hover:shadow-xl hover:shadow-brand-blue/25 hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:scale-[1.02] focus:ring-red-500/30 active:scale-[0.98]",outline:"border-2 border-brand-blue text-brand-blue bg-transparent hover:bg-brand-blue hover:text-white hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:shadow-md hover:from-gray-200 hover:to-gray-300 hover:scale-[1.02] focus:ring-gray-400/30 active:scale-[0.98]",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-400/30 hover:scale-[1.02] active:scale-[0.98]",link:"text-brand-blue underline-offset-4 hover:underline hover:text-brand-blue/80 focus:ring-brand-blue/30",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:shadow-green-500/25 hover:scale-[1.02] focus:ring-green-500/30 active:scale-[0.98]",warning:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:shadow-amber-500/25 hover:scale-[1.02] focus:ring-amber-500/30 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-blue via-purple-600 to-brand-blue text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 hover:scale-[1.02] focus:ring-purple-500/30 active:scale-[0.98]",accent:"bg-gradient-to-r from-brand-gold via-brand-gold to-brand-gold/95 text-brand-dark shadow-xl hover:shadow-2xl hover:shadow-brand-gold/40 hover:scale-[1.05] hover:from-brand-gold/90 hover:to-brand-gold hover:brightness-110 focus:ring-brand-gold/50 active:scale-[0.98] font-semibold transform"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-lg",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-6 text-base rounded-xl",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-xs":"h-7 w-7 rounded-md","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),W=y.memo(ne.forwardRef(({className:e="",variant:t,size:n,leftIcon:s,rightIcon:r,isLoading:i=!1,loadingText:a,fullWidth:l=!1,disabled:c,children:u,asChild:d=!1,...h},f)=>{const m=pz({variant:t,size:n}),p=l?"w-full":"",x=c||i,b=o.jsxs(o.Fragment,{children:[(t==="default"||t==="gradient")&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 ease-in-out"}),i?o.jsxs(o.Fragment,{children:[o.jsx(UA,{className:"w-4 h-4 animate-spin mr-2"}),a||"Loading..."]}):o.jsxs(o.Fragment,{children:[s&&o.jsx("span",{className:"mr-2 flex-shrink-0",children:s}),u,r&&o.jsx("span",{className:"ml-2 flex-shrink-0",children:r})]})]});return d?o.jsx("span",{className:`${m} ${p} ${e}`,children:b}):o.jsx("button",{className:`${m} ${p} ${e}`,ref:f,disabled:x,"aria-busy":i,...h,children:b})}));W.displayName="Button";const gz=y.memo(ne.forwardRef(({icon:e,className:t="",size:n="icon",...s},r)=>o.jsx(W,{ref:r,size:n,className:t,...s,children:e})));gz.displayName="IconButton";const xz=y.memo(({children:e,className:t="",orientation:n="horizontal",size:s="default"})=>{const r=n==="horizontal"?"flex-row":"flex-col",i={sm:"space-x-2 space-y-0",default:"space-x-3 space-y-0",lg:"space-x-4 space-y-0"}[s];return o.jsx("div",{className:`flex ${r} ${i} ${t}`,role:"group",children:e})});xz.displayName="ButtonGroup";function yz(){const[e,t]=y.useState([]),[n,s]=y.useState([]),[r,i]=y.useState(0),[a,l]=y.useState(0),[c,u]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const[f,m,p,x]=await Promise.all([Na(),zd(),ex(),Ol()]);t(f),s(m),i(p.length),l(x.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return n.filter(h=>h.status==="completed").length,c?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Lt,{title:"Scheduled Jobs",value:d,icon:o.jsx(ss,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Lt,{title:"Equipment",value:r,icon:o.jsx(sn,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),o.jsx(Lt,{title:"Operators",value:a,icon:o.jsx(zn,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(me,{children:"Recent Won Leads"}),o.jsx(Xn,{to:"/jobs",children:o.jsx(W,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),o.jsx(se,{children:e.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(W,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ee,{className:"h-full",children:[o.jsx(fe,{children:o.jsx(me,{children:"Quick Actions"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(Xn,{to:"/config/equipment",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(sn,{size:16}),children:"Manage Equipment"})}),o.jsx(Xn,{to:"/config/operators",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(zn,{size:16}),children:"Manage Operators"})}),o.jsx(Xn,{to:"/jobs",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(ss,{size:16}),children:"View Job Calendar"})}),o.jsx(Xn,{to:"/feedback",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(dr,{size:16}),children:"Review Completed Jobs"})}),o.jsx(Xn,{to:"/config",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(RS,{size:16}),children:"System Configuration"})}),o.jsx(Xn,{to:"/config/maintenance",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(ox,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Recent Job Activity"})}),o.jsx(se,{children:n.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.startDate).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Ul,{status:h.status})})]},h.id))})]})})})]})]})}const vz=Ca("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function lt({className:e,variant:t,title:n,description:s,onClose:r,duration:i=5e3,isVisible:a=!0,...l}){const[c,u]=y.useState(a);y.useEffect(()=>{u(a)},[a]),y.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),r==null||r()},i);return()=>clearTimeout(f)}},[c,i,r]);const d=()=>{u(!1),r==null||r()},h=()=>{switch(t){case"success":return o.jsx(dr,{className:"h-5 w-5 text-success-500"});case"error":return o.jsx(Ud,{className:"h-5 w-5 text-error-500"});case"warning":return o.jsx(pi,{className:"h-5 w-5 text-warning-500"});case"info":return o.jsx(Xs,{className:"h-5 w-5 text-primary-500"});default:return null}};return o.jsx(Px,{children:c&&o.jsx(qs.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:`pointer-events-auto ${vz({variant:t,className:e})}`,...l,children:o.jsxs("div",{className:"flex items-start",children:[t&&o.jsx("div",{className:"flex-shrink-0",children:h()}),o.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[o.jsx("p",{className:"text-sm font-medium",children:n}),s&&o.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:s})]}),o.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:o.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Wd,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function bz(){const{user:e}=ze(),[t,n]=y.useState([]),[s,r]=y.useState({}),[i,a]=y.useState(!0),[l,c]=y.useState({show:!1,title:""});y.useEffect(()=>{(async()=>{if(e)try{const x=await lS(e.id);n(x);const b={};for(const w of x)if(!b[w.equipmentId]){const v=await Zg(w.equipmentId);v&&(b[w.equipmentId]=v)}r(b)}catch(x){console.error("Error fetching operator data:",x)}finally{a(!1)}})()},[e]);const u=(p,x)=>{var b;n(w=>w.map(v=>v.id===p?{...v,status:x==="accept"?"accepted":x==="reject"?"rejected":"completed"}:v)),c({show:!0,title:x==="accept"?"Job Accepted":x==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(b=t.find(w=>w.id===p))==null?void 0:b.customerName} has been ${x}ed.`,variant:x==="reject"?"warning":"success"}),setTimeout(()=>{c(w=>({...w,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,x)=>new Date(p.startDate).getTime()-new Date(x.startDate).getTime());return i?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(Lt,{title:"Scheduled Jobs",value:d,icon:o.jsx(ss,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Lt,{title:"Accepted Jobs",value:h,icon:o.jsx(dr,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Lt,{title:"Completed Jobs",value:f,icon:o.jsx(On,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Upcoming Jobs"})}),o.jsx(se,{children:m.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):o.jsx("div",{className:"space-y-4",children:m.map(p=>{var x;return o.jsx(ee,{variant:"bordered",className:"overflow-hidden",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),o.jsx(Ul,{status:p.status})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(sn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:((x=s[p.equipmentId])==null?void 0:x.name)||"Equipment"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Vd,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:p.location})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(ss,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(On,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),o.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&o.jsxs(o.Fragment,{children:[o.jsx(W,{variant:"success",size:"sm",leftIcon:o.jsx(dr,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),o.jsx(W,{variant:"destructive",size:"sm",leftIcon:o.jsx(Ud,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&o.jsx(W,{variant:"secondary",size:"sm",leftIcon:o.jsx(dr,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Equipment Assignment"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[Object.values(s).map(p=>o.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[o.jsx(sn,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(s).length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Operator Information"})}),o.jsxs(se,{children:[o.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[o.jsx("div",{className:"mr-4",children:o.jsx(IA,{className:"h-16 w-16 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),o.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),o.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&o.jsx(lt,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function Ee({label:e,error:t,className:n="",leftIcon:s,rightIcon:r,name:i,id:a,...l}){var d;const c={...l},u=i||a||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return o.jsxs("div",{className:"space-y-1.5",children:[e&&o.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[s&&o.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s}),o.jsx("input",{name:u,id:a||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-[#222] placeholder:text-[#888]
            text-base
            py-2 px-3 border border-[#CAC0B0] bg-white
            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${s?"pl-8 sm:pl-10":""}
            ${r?"pr-8 sm:pr-10":""}
            ${n}
          `,style:{color:"#222",WebkitTextFillColor:"#222",background:"#fff",borderColor:"#CAC0B0",fontWeight:600,letterSpacing:"0.08em"},placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),r&&o.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r})]}),t&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}function pe({label:e,helperText:t,error:n,fullWidth:s=!0,className:r="",type:i="text",id:a,name:l,...c}){const u=a||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return o.jsxs("div",{className:`${s?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&o.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx(Ee,{id:u,name:l||u,type:i,className:`${s?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${r}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&o.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function be({options:e,value:t,onChange:n,label:s,error:r,leftIcon:i,className:a="",...l}){return o.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[s&&o.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[s,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[i&&o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",o.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${r?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${a}
          `,...l,children:e.map(c=>o.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:o.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:r})]})}function Dn({label:e,error:t,helperText:n,className:s="",...r}){const i=r.id||`textarea-${r.name||Math.random().toString(36).substring(2,9)}`;return o.jsxs("div",{className:"space-y-2",children:[e&&o.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${r.required?"text-blue-700":"text-green-700"}`,children:[e,r.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!r.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${r.required?"bg-blue-50 border-blue-200 focus:bg-white":r.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${s}`,placeholder:r.placeholder?`${r.placeholder}${r.required?" *":""}`:"",...r}),t&&o.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}Dn.displayName="TextArea";var wz=Object.defineProperty,jz=(e,t,n)=>t in e?wz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cf=(e,t,n)=>(jz(e,typeof t!="symbol"?t+"":t,n),n);let Nz=class{constructor(){Cf(this,"current",this.detect()),Cf(this,"handoffState","pending"),Cf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},js=new Nz,Tn=(e,t)=>{js.isServer?y.useEffect(e,t):y.useLayoutEffect(e,t)};function Ns(e){let t=y.useRef(e);return Tn(()=>{t.current=e},[e]),t}let We=function(e){let t=Ns(e);return ne.useCallback((...n)=>t.current(...n),[t])};function ih(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function wi(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return ih(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=wi();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function Xx(){let[e]=y.useState(wi);return y.useEffect(()=>()=>e.dispose(),[e]),e}function Sz(){let e=typeof document>"u";return"useSyncExternalStore"in ta?(t=>t.useSyncExternalStore)(ta)(()=>()=>{},()=>!1,()=>!e):!1}function Pa(){let e=Sz(),[t,n]=y.useState(js.isHandoffComplete);return t&&js.isHandoffComplete===!1&&n(!1),y.useEffect(()=>{t!==!0&&n(!0)},[t]),y.useEffect(()=>js.handoff(),[]),e?!1:t}var Nw;let _a=(Nw=ne.useId)!=null?Nw:function(){let e=Pa(),[t,n]=ne.useState(e?()=>js.nextId():null);return Tn(()=>{t===null&&n(js.nextId())},[t]),t!=null?""+t:void 0};function Pt(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Pt),s}function jk(e){return js.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Rp=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Wr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Wr||{}),Nk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Nk||{}),Cz=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Cz||{});function kz(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Rp)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Sk=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Sk||{});function Ez(e,t=0){var n;return e===((n=jk(e))==null?void 0:n.body)?!1:Pt(t,{0(){return e.matches(Rp)},1(){let s=e;for(;s!==null;){if(s.matches(Rp))return!0;s=s.parentElement}return!1}})}var Dz=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Dz||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function si(e){e==null||e.focus({preventScroll:!0})}let Tz=["textarea","input"].join(",");function Pz(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Tz))!=null?n:!1}function _z(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function du(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?_z(e):e:kz(e);r.length>0&&a.length>1&&(a=a.filter(m=>!r.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(s))-1;if(t&4)return Math.max(0,a.indexOf(s))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=a.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=a[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&Pz(f)&&f.select(),2}function Ck(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Mz(){return/Android/gi.test(window.navigator.userAgent)}function Az(){return Ck()||Mz()}function Ic(e,t,n){let s=Ns(t);y.useEffect(()=>{function r(i){s.current(i)}return document.addEventListener(e,r,n),()=>document.removeEventListener(e,r,n)},[e,n])}function kk(e,t,n){let s=Ns(t);y.useEffect(()=>{function r(i){s.current(i)}return window.addEventListener(e,r,n),()=>window.removeEventListener(e,r,n)},[e,n])}function Rz(e,t,n=!0){let s=y.useRef(!1);y.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function r(a,l){if(!s.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||a.composed&&a.composedPath().includes(h))return}return!Ez(c,Sk.Loose)&&c.tabIndex!==-1&&a.preventDefault(),t(a,c)}let i=y.useRef(null);Ic("pointerdown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Ic("mousedown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Ic("click",a=>{Az()||i.current&&(r(a,()=>i.current),i.current=null)},!0),Ic("touchend",a=>r(a,()=>a.target instanceof HTMLElement?a.target:null),!0),kk("blur",a=>r(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Wl(...e){return y.useMemo(()=>jk(...e),[...e])}let Ek=Symbol();function Iz(e,t=!0){return Object.assign(e,{[Ek]:t})}function Un(...e){let t=y.useRef(e);y.useEffect(()=>{t.current=e},[e]);let n=We(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||(s==null?void 0:s[Ek]))?void 0:n}function Jx(e,t){let n=y.useRef([]),s=We(e);y.useEffect(()=>{let r=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let l=s(t,r);return n.current=t,l}},[s,...t])}function rd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var id=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(id||{}),tr=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(tr||{});function Pn({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:a,mergeRefs:l}){l=l??Oz;let c=Dk(t,e);if(i)return Oc(c,n,s,a,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Oc(h,n,s,a,l)}if(u&1){let{unmount:d=!0,...h}=c;return Pt(d?0:1,{0(){return null},1(){return Oc({...h,hidden:!0,style:{display:"none"}},n,s,a,l)}})}return Oc(c,n,s,a,l)}function Oc(e,t={},n,s,r){let{as:i=n,children:a,refName:l="ref",...c}=kf(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,x]of Object.entries(t))typeof x=="boolean"&&(f=!0),x===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===y.Fragment&&Object.keys(Sw(c)).length>0){if(!y.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...x)=>rd(f==null?void 0:f.className(...x),c.className):rd(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return y.cloneElement(d,Object.assign({},Dk(d.props,Sw(kf(c,["ref"]))),h,u,{ref:r(d.ref,u.ref)},p))}return y.createElement(i,Object.assign({},kf(c,["ref"]),i!==y.Fragment&&u,i!==y.Fragment&&h),d)}function Oz(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Dk(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](r,...i){let a=n[s];for(let l of a){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function hn(e){var t;return Object.assign(y.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Sw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function kf(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let Lz="div";var ad=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ad||{});function Fz(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Pn({ourProps:i,theirProps:r,slot:{},defaultTag:Lz,name:"Hidden"})}let Ip=hn(Fz),Zx=y.createContext(null);Zx.displayName="OpenClosedContext";var Zt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Zt||{});function ey(){return y.useContext(Zx)}function $z({value:e,children:t}){return ne.createElement(Zx.Provider,{value:e},t)}function zz(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Gs=[];zz(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Gs[0]!==t.target&&(Gs.unshift(t.target),Gs=Gs.filter(n=>n!=null&&n.isConnected),Gs.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Bz(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&Vz(n)?!1:s}function Vz(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Tk=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Tk||{});function Pk(e,t,n,s){let r=Ns(n);y.useEffect(()=>{e=e??window;function i(a){r.current(a)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function Hl(){let e=y.useRef(!1);return Tn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function _k(e){let t=We(e),n=y.useRef(!1);y.useEffect(()=>(n.current=!1,()=>{n.current=!0,ih(()=>{n.current&&t()})}),[t])}var jo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(jo||{});function Uz(){let e=y.useRef(0);return kk("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Mk(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Wz="div";var Ak=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Ak||{});function Hz(e,t){let n=y.useRef(null),s=Un(n,t),{initialFocus:r,containers:i,features:a=30,...l}=e;Pa()||(a=1);let c=Wl(n);Yz({ownerDocument:c},!!(a&16));let u=Qz({ownerDocument:c,container:n,initialFocus:r},!!(a&2));Kz({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(a&8));let d=Uz(),h=We(x=>{let b=n.current;b&&(w=>w())(()=>{Pt(d.current,{[jo.Forwards]:()=>{du(b,Wr.First,{skipElements:[x.relatedTarget]})},[jo.Backwards]:()=>{du(b,Wr.Last,{skipElements:[x.relatedTarget]})}})})}),f=Xx(),m=y.useRef(!1),p={ref:s,onKeyDown(x){x.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(x){let b=Mk(i);n.current instanceof HTMLElement&&b.add(n.current);let w=x.relatedTarget;w instanceof HTMLElement&&w.dataset.headlessuiFocusGuard!=="true"&&(Rk(b,w)||(m.current?du(n.current,Pt(d.current,{[jo.Forwards]:()=>Wr.Next,[jo.Backwards]:()=>Wr.Previous})|Wr.WrapAround,{relativeTo:x.target}):x.target instanceof HTMLElement&&si(x.target)))}};return ne.createElement(ne.Fragment,null,!!(a&4)&&ne.createElement(Ip,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:ad.Focusable}),Pn({ourProps:p,theirProps:l,defaultTag:Wz,name:"FocusTrap"}),!!(a&4)&&ne.createElement(Ip,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:ad.Focusable}))}let qz=hn(Hz),eo=Object.assign(qz,{features:Ak});function Gz(e=!0){let t=y.useRef(Gs.slice());return Jx(([n],[s])=>{s===!0&&n===!1&&ih(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Gs.slice())},[e,Gs,t]),We(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function Yz({ownerDocument:e},t){let n=Gz(t);Jx(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&si(n())},[t]),_k(()=>{t&&si(n())})}function Qz({ownerDocument:e,container:t,initialFocus:n},s){let r=y.useRef(null),i=Hl();return Jx(()=>{if(!s)return;let a=t.current;a&&ih(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){r.current=l;return}}else if(a.contains(l)){r.current=l;return}n!=null&&n.current?si(n.current):du(a,Wr.First)===Nk.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.current=e==null?void 0:e.activeElement})},[s]),r}function Kz({ownerDocument:e,container:t,containers:n,previousActiveElement:s},r){let i=Hl();Pk(e==null?void 0:e.defaultView,"focus",a=>{if(!r||!i.current)return;let l=Mk(n);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?Rk(l,u)?(s.current=u,si(u)):(a.preventDefault(),a.stopPropagation(),si(c)):si(s.current)},!0)}function Rk(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Ik=y.createContext(!1);function Xz(){return y.useContext(Ik)}function Op(e){return ne.createElement(Ik.Provider,{value:e.force},e.children)}function Jz(e){let t=Xz(),n=y.useContext(Ok),s=Wl(e),[r,i]=y.useState(()=>{if(!t&&n!==null||js.isServer)return null;let a=s==null?void 0:s.getElementById("headlessui-portal-root");if(a)return a;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return y.useEffect(()=>{r!==null&&(s!=null&&s.body.contains(r)||s==null||s.body.appendChild(r))},[r,s]),y.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let Zz=y.Fragment;function eB(e,t){let n=e,s=y.useRef(null),r=Un(Iz(d=>{s.current=d}),t),i=Wl(s),a=Jz(s),[l]=y.useState(()=>{var d;return js.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=y.useContext(Lp),u=Pa();return Tn(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Tn(()=>{if(l&&c)return c.register(l)},[c,l]),_k(()=>{var d;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a)))}),u?!a||!l?null:Il.createPortal(Pn({ourProps:{ref:r},theirProps:n,defaultTag:Zz,name:"Portal"}),l):null}let tB=y.Fragment,Ok=y.createContext(null);function nB(e,t){let{target:n,...s}=e,r={ref:Un(t)};return ne.createElement(Ok.Provider,{value:n},Pn({ourProps:r,theirProps:s,defaultTag:tB,name:"Popover.Group"}))}let Lp=y.createContext(null);function sB(){let e=y.useContext(Lp),t=y.useRef([]),n=We(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=We(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),r=y.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,y.useMemo(()=>function({children:i}){return ne.createElement(Lp.Provider,{value:r},i)},[r])]}let rB=hn(eB),iB=hn(nB),Fp=Object.assign(rB,{Group:iB});function aB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const oB=typeof Object.is=="function"?Object.is:aB,{useState:lB,useEffect:cB,useLayoutEffect:uB,useDebugValue:dB}=ta;function hB(e,t,n){const s=t(),[{inst:r},i]=lB({inst:{value:s,getSnapshot:t}});return uB(()=>{r.value=s,r.getSnapshot=t,Ef(r)&&i({inst:r})},[e,s,t]),cB(()=>(Ef(r)&&i({inst:r}),e(()=>{Ef(r)&&i({inst:r})})),[e]),dB(s),s}function Ef(e){const t=e.getSnapshot,n=e.value;try{const s=t();return!oB(n,s)}catch{return!0}}function fB(e,t,n){return t()}const mB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pB=!mB,gB=pB?fB:hB,xB="useSyncExternalStore"in ta?(e=>e.useSyncExternalStore)(ta):gB;function yB(e){return xB(e.subscribe,e.getSnapshot,e.getSnapshot)}function vB(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let a=t[r].call(n,...i);a&&(n=a,s.forEach(l=>l()))}}}function bB(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,r=s.clientWidth-s.offsetWidth,i=e-r;n.style(s,"paddingRight",`${i}px`)}}}function wB(){return Ck()?{before({doc:e,d:t,meta:n}){function s(r){return n.containers.flatMap(i=>i()).some(i=>i.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=wi();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!s(d)&&(a=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function jB(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function NB(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Kr=vB(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:wi(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:NB(n)},r=[wB(),bB(),jB()];r.forEach(({before:i})=>i==null?void 0:i(s)),r.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Kr.subscribe(()=>{let e=Kr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&Kr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Kr.dispatch("TEARDOWN",n)}});function SB(e,t,n){let s=yB(Kr),r=e?s.get(e):void 0,i=r?r.count>0:!1;return Tn(()=>{if(!(!e||!t))return Kr.dispatch("PUSH",e,n),()=>Kr.dispatch("POP",e,n)},[t,e]),i}let Df=new Map,to=new Map;function Cw(e,t=!0){Tn(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function r(){var a;if(!s)return;let l=(a=to.get(s))!=null?a:1;if(l===1?to.delete(s):to.set(s,l-1),l!==1)return;let c=Df.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,Df.delete(s))}let i=(n=to.get(s))!=null?n:0;return to.set(s,i+1),i!==0||(Df.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),r},[e,t])}function CB({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let r=y.useRef((s=n==null?void 0:n.current)!=null?s:null),i=Wl(r),a=We(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(r.current)||h.contains((u=(c=r.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:a,contains:We(l=>a().some(c=>c.contains(l))),mainTreeNodeRef:r,MainTreeNode:y.useMemo(()=>function(){return n!=null?null:ne.createElement(Ip,{features:ad.Hidden,ref:r})},[r,n])}}let ty=y.createContext(()=>{});ty.displayName="StackContext";var $p=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))($p||{});function kB(){return y.useContext(ty)}function EB({children:e,onUpdate:t,type:n,element:s,enabled:r}){let i=kB(),a=We((...l)=>{t==null||t(...l),i(...l)});return Tn(()=>{let l=r===void 0||r===!0;return l&&a(0,n,s),()=>{l&&a(1,n,s)}},[a,n,s,r]),ne.createElement(ty.Provider,{value:a},e)}let Lk=y.createContext(null);function Fk(){let e=y.useContext(Lk);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Fk),t}return e}function DB(){let[e,t]=y.useState([]);return[e.length>0?e.join(" "):void 0,y.useMemo(()=>function(n){let s=We(i=>(t(a=>[...a,i]),()=>t(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=y.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return ne.createElement(Lk.Provider,{value:r},n.children)},[t])]}let TB="p";function PB(e,t){let n=_a(),{id:s=`headlessui-description-${n}`,...r}=e,i=Fk(),a=Un(t);Tn(()=>i.register(s),[s,i.register]);let l={ref:a,...i.props,id:s};return Pn({ourProps:l,theirProps:r,slot:i.slot||{},defaultTag:TB,name:i.name||"Description"})}let _B=hn(PB),MB=Object.assign(_B,{});var AB=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(AB||{}),RB=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(RB||{});let IB={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},od=y.createContext(null);od.displayName="DialogContext";function ql(e){let t=y.useContext(od);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ql),n}return t}function OB(e,t,n=()=>[document.body]){SB(e,t,s=>{var r;return{containers:[...(r=s.containers)!=null?r:[],n]}})}function LB(e,t){return Pt(t.type,IB,e,t)}let FB="div",$B=id.RenderStrategy|id.Static;function zB(e,t){let n=_a(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:a,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=y.useState(0),f=y.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=ey();r===void 0&&m!==null&&(r=(m&Zt.Open)===Zt.Open);let p=y.useRef(null),x=Un(p,t),b=Wl(p),w=e.hasOwnProperty("open")||m!==null,v=e.hasOwnProperty("onClose");if(!w&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!w)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof r!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let g=r?0:1,[j,S]=y.useReducer(LB,{titleId:null,descriptionId:null,panelRef:y.createRef()}),k=We(()=>i(!1)),N=We(_=>S({type:0,id:_})),C=Pa()?c?!1:g===0:!1,E=d>1,P=y.useContext(od)!==null,[L,F]=sB(),$={get current(){var _;return(_=j.panelRef.current)!=null?_:p.current}},{resolveContainers:A,mainTreeNodeRef:B,MainTreeNode:q}=CB({portals:L,defaultContainers:[$]}),I=E?"parent":"leaf",T=m!==null?(m&Zt.Closing)===Zt.Closing:!1,R=P||T?!1:C,H=y.useCallback(()=>{var _,M;return(M=Array.from((_=b==null?void 0:b.querySelectorAll("body > *"))!=null?_:[]).find(Q=>Q.id==="headlessui-portal-root"?!1:Q.contains(B.current)&&Q instanceof HTMLElement))!=null?M:null},[B]);Cw(H,R);let G=E?!0:C,Z=y.useCallback(()=>{var _,M;return(M=Array.from((_=b==null?void 0:b.querySelectorAll("[data-headlessui-portal]"))!=null?_:[]).find(Q=>Q.contains(B.current)&&Q instanceof HTMLElement))!=null?M:null},[B]);Cw(Z,G),Rz(A,_=>{_.preventDefault(),k()},!(!C||E));let ce=!(E||g!==0);Pk(b==null?void 0:b.defaultView,"keydown",_=>{ce&&(_.defaultPrevented||_.key===Tk.Escape&&(_.preventDefault(),_.stopPropagation(),k()))}),OB(b,!(T||g!==0||P),A),y.useEffect(()=>{if(g!==0||!p.current)return;let _=new ResizeObserver(M=>{for(let Q of M){let ae=Q.target.getBoundingClientRect();ae.x===0&&ae.y===0&&ae.width===0&&ae.height===0&&k()}});return _.observe(p.current),()=>_.disconnect()},[g,p,k]);let[V,D]=DB(),z=y.useMemo(()=>[{dialogState:g,close:k,setTitleId:N},j],[g,j,k,N]),U=y.useMemo(()=>({open:g===0}),[g]),X={ref:x,id:s,role:l,"aria-modal":g===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":V};return ne.createElement(EB,{type:"Dialog",enabled:g===0,element:p,onUpdate:We((_,M)=>{M==="Dialog"&&Pt(_,{[$p.Add]:()=>h(Q=>Q+1),[$p.Remove]:()=>h(Q=>Q-1)})})},ne.createElement(Op,{force:!0},ne.createElement(Fp,null,ne.createElement(od.Provider,{value:z},ne.createElement(Fp.Group,{target:p},ne.createElement(Op,{force:!1},ne.createElement(D,{slot:U,name:"Dialog.Description"},ne.createElement(eo,{initialFocus:a,containers:A,features:C?Pt(I,{parent:eo.features.RestoreFocus,leaf:eo.features.All&~eo.features.FocusLock}):eo.features.None},ne.createElement(F,null,Pn({ourProps:X,theirProps:u,slot:U,defaultTag:FB,features:$B,visible:g===0,name:"Dialog"}))))))))),ne.createElement(q,null))}let BB="div";function VB(e,t){let n=_a(),{id:s=`headlessui-dialog-overlay-${n}`,...r}=e,[{dialogState:i,close:a}]=ql("Dialog.Overlay"),l=Un(t),c=We(d=>{if(d.target===d.currentTarget){if(Bz(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),a()}}),u=y.useMemo(()=>({open:i===0}),[i]);return Pn({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:r,slot:u,defaultTag:BB,name:"Dialog.Overlay"})}let UB="div";function WB(e,t){let n=_a(),{id:s=`headlessui-dialog-backdrop-${n}`,...r}=e,[{dialogState:i},a]=ql("Dialog.Backdrop"),l=Un(t);y.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let c=y.useMemo(()=>({open:i===0}),[i]);return ne.createElement(Op,{force:!0},ne.createElement(Fp,null,Pn({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:r,slot:c,defaultTag:UB,name:"Dialog.Backdrop"})))}let HB="div";function qB(e,t){let n=_a(),{id:s=`headlessui-dialog-panel-${n}`,...r}=e,[{dialogState:i},a]=ql("Dialog.Panel"),l=Un(t,a.panelRef),c=y.useMemo(()=>({open:i===0}),[i]),u=We(d=>{d.stopPropagation()});return Pn({ourProps:{ref:l,id:s,onClick:u},theirProps:r,slot:c,defaultTag:HB,name:"Dialog.Panel"})}let GB="h2";function YB(e,t){let n=_a(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:a}]=ql("Dialog.Title"),l=Un(t);y.useEffect(()=>(a(s),()=>a(null)),[s,a]);let c=y.useMemo(()=>({open:i===0}),[i]);return Pn({ourProps:{ref:l,id:s},theirProps:r,slot:c,defaultTag:GB,name:"Dialog.Title"})}let QB=hn(zB),KB=hn(WB),XB=hn(qB),JB=hn(VB),ZB=hn(YB),Lc=Object.assign(QB,{Backdrop:KB,Panel:XB,Overlay:JB,Title:ZB,Description:MB});function eV(e=0){let[t,n]=y.useState(e),s=Hl(),r=y.useCallback(c=>{s.current&&n(u=>u|c)},[t,s]),i=y.useCallback(c=>!!(t&c),[t]),a=y.useCallback(c=>{s.current&&n(u=>u&~c)},[n,s]),l=y.useCallback(c=>{s.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:r,hasFlag:i,removeFlag:a,toggleFlag:l}}function tV(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Tf(e,...t){e&&t.length>0&&e.classList.add(...t)}function Pf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function nV(e,t){let n=wi();if(!e)return n.dispose;let{transitionDuration:s,transitionDelay:r}=getComputedStyle(e),[i,a]=[s,r].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+a;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function sV(e,t,n,s){let r=n?"enter":"leave",i=wi(),a=s!==void 0?tV(s):()=>{};r==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=Pt(r,{enter:()=>t.enter,leave:()=>t.leave}),c=Pt(r,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=Pt(r,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Pf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Tf(e,...t.base,...l,...u),i.nextFrame(()=>{Pf(e,...t.base,...l,...u),Tf(e,...t.base,...l,...c),nV(e,()=>(Pf(e,...t.base,...l),Tf(e,...t.base,...t.entered),a()))}),i.dispose}function rV({immediate:e,container:t,direction:n,classes:s,onStart:r,onStop:i}){let a=Hl(),l=Xx(),c=Ns(n);Tn(()=>{e&&(c.current="enter")},[e]),Tn(()=>{let u=wi();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&a.current)return u.dispose(),r.current(c.current),u.add(sV(d,s.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function Os(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let ah=y.createContext(null);ah.displayName="TransitionContext";var iV=(e=>(e.Visible="visible",e.Hidden="hidden",e))(iV||{});function aV(){let e=y.useContext(ah);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function oV(){let e=y.useContext(oh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oh=y.createContext(null);oh.displayName="NestingContext";function lh(e){return"children"in e?lh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function $k(e,t){let n=Ns(e),s=y.useRef([]),r=Hl(),i=Xx(),a=We((m,p=tr.Hidden)=>{let x=s.current.findIndex(({el:b})=>b===m);x!==-1&&(Pt(p,{[tr.Unmount](){s.current.splice(x,1)},[tr.Hidden](){s.current[x].state="hidden"}}),i.microTask(()=>{var b;!lh(s)&&r.current&&((b=n.current)==null||b.call(n))}))}),l=We(m=>{let p=s.current.find(({el:x})=>x===m);return p?p.state!=="visible"&&(p.state="visible"):s.current.push({el:m,state:"visible"}),()=>a(m,tr.Unmount)}),c=y.useRef([]),u=y.useRef(Promise.resolve()),d=y.useRef({enter:[],leave:[],idle:[]}),h=We((m,p,x)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([b])=>b!==m)),t==null||t.chains.current[p].push([m,new Promise(b=>{c.current.push(b)})]),t==null||t.chains.current[p].push([m,new Promise(b=>{Promise.all(d.current[p].map(([w,v])=>v)).then(()=>b())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>x(p)):x(p)}),f=We((m,p,x)=>{Promise.all(d.current[p].splice(0).map(([b,w])=>w)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>x(p))});return y.useMemo(()=>({children:s,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d}),[l,a,s,h,f,d,u])}function lV(){}let cV=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function kw(e){var t;let n={};for(let s of cV)n[s]=(t=e[s])!=null?t:lV;return n}function uV(e){let t=y.useRef(kw(e));return y.useEffect(()=>{t.current=kw(e)},[e]),t}let dV="div",zk=id.RenderStrategy;function hV(e,t){var n,s;let{beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...x}=e,b=y.useRef(null),w=Un(b,t),v=(n=x.unmount)==null||n?tr.Unmount:tr.Hidden,{show:g,appear:j,initial:S}=aV(),[k,N]=y.useState(g?"visible":"hidden"),C=oV(),{register:E,unregister:P}=C;y.useEffect(()=>E(b),[E,b]),y.useEffect(()=>{if(v===tr.Hidden&&b.current){if(g&&k!=="visible"){N("visible");return}return Pt(k,{hidden:()=>P(b),visible:()=>E(b)})}},[k,b,E,P,g,v]);let L=Ns({base:Os(x.className),enter:Os(c),enterFrom:Os(u),enterTo:Os(d),entered:Os(h),leave:Os(f),leaveFrom:Os(m),leaveTo:Os(p)}),F=uV({beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l}),$=Pa();y.useEffect(()=>{if($&&k==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,k,$]);let A=S&&!j,B=j&&g&&S,q=!$||A?"idle":g?"enter":"leave",I=eV(0),T=We(ce=>Pt(ce,{enter:()=>{I.addFlag(Zt.Opening),F.current.beforeEnter()},leave:()=>{I.addFlag(Zt.Closing),F.current.beforeLeave()},idle:()=>{}})),R=We(ce=>Pt(ce,{enter:()=>{I.removeFlag(Zt.Opening),F.current.afterEnter()},leave:()=>{I.removeFlag(Zt.Closing),F.current.afterLeave()},idle:()=>{}})),H=$k(()=>{N("hidden"),P(b)},C),G=y.useRef(!1);rV({immediate:B,container:b,classes:L,direction:q,onStart:Ns(ce=>{G.current=!0,H.onStart(b,ce,T)}),onStop:Ns(ce=>{G.current=!1,H.onStop(b,ce,R),ce==="leave"&&!lh(H)&&(N("hidden"),P(b))})});let Z=x,ie={ref:w};return B?Z={...Z,className:rd(x.className,...L.current.enter,...L.current.enterFrom)}:G.current&&(Z.className=rd(x.className,(s=b.current)==null?void 0:s.className),Z.className===""&&delete Z.className),ne.createElement(oh.Provider,{value:H},ne.createElement($z,{value:Pt(k,{visible:Zt.Open,hidden:Zt.Closed})|I.flags},Pn({ourProps:ie,theirProps:Z,defaultTag:dV,features:zk,visible:k==="visible",name:"Transition.Child"})))}function fV(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,a=y.useRef(null),l=Un(a,t);Pa();let c=ey();if(n===void 0&&c!==null&&(n=(c&Zt.Open)===Zt.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=y.useState(n?"visible":"hidden"),h=$k(()=>{d("hidden")}),[f,m]=y.useState(!0),p=y.useRef([n]);Tn(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let x=y.useMemo(()=>({show:n,appear:s,initial:f}),[n,s,f]);y.useEffect(()=>{if(n)d("visible");else if(!lh(h))d("hidden");else{let g=a.current;if(!g)return;let j=g.getBoundingClientRect();j.x===0&&j.y===0&&j.width===0&&j.height===0&&d("hidden")}},[n,h]);let b={unmount:r},w=We(()=>{var g;f&&m(!1),(g=e.beforeEnter)==null||g.call(e)}),v=We(()=>{var g;f&&m(!1),(g=e.beforeLeave)==null||g.call(e)});return ne.createElement(oh.Provider,{value:h},ne.createElement(ah.Provider,{value:x},Pn({ourProps:{...b,as:y.Fragment,children:ne.createElement(Bk,{ref:l,...b,...i,beforeEnter:w,beforeLeave:v})},theirProps:{},defaultTag:y.Fragment,features:zk,visible:u==="visible",name:"Transition"})))}function mV(e,t){let n=y.useContext(ah)!==null,s=ey()!==null;return ne.createElement(ne.Fragment,null,!n&&s?ne.createElement(zp,{ref:t,...e}):ne.createElement(Bk,{ref:t,...e}))}let zp=hn(fV),Bk=hn(hV),pV=hn(mV),_f=Object.assign(zp,{Child:pV,Root:zp});const gV={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function it({isOpen:e,onClose:t,title:n,description:s,children:r,size:i="md"}){return o.jsx(_f,{show:e,as:y.Fragment,children:o.jsxs(Lc,{as:"div",className:"relative z-50",onClose:t,children:[o.jsx(_f.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),o.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:o.jsx(_f.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:o.jsxs(Lc.Panel,{className:`w-full ${gV[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[o.jsxs("div",{children:[n&&o.jsx(Lc.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),s&&o.jsx(Lc.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:s})]}),o.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Wd,{className:"h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:r})]})})})})]})})}function xV({isOpen:e,onClose:t,onSelect:n,initialCustomerData:s}){const[r,i]=y.useState("select"),[a,l]=y.useState([]),[c,u]=y.useState(""),[d,h]=y.useState(!0),[f,m]=y.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""});y.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{const v=await nx();l(v),h(!1)}catch(v){console.error("Error fetching customers:",v)}},x=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const v=await tx({...f,name:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A"});console.log("Created new customer:",v),n(v)}catch(v){console.error("Error creating customer:",v),alert("Error creating customer")}},b=v=>{console.log("Selected existing customer:",v),n(v)},w=a.filter(v=>{var g;return v.name.toLowerCase().includes(c.toLowerCase())||v.email.toLowerCase().includes(c.toLowerCase())||((g=v.customerId)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))});return o.jsx(it,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(W,{variant:r==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),o.jsx(W,{variant:r==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),r==="select"?o.jsxs(o.Fragment,{children:["            ",o.jsxs("div",{className:"relative mb-2",children:[o.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),o.jsx(pe,{placeholder:"Search customers...",value:c,onChange:v=>u(v.target.value),className:"pl-10"}),c&&o.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),o.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?o.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):w.length===0?o.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):w.map(v=>o.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>b(v),children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"font-medium text-sm sm:text-base",children:v.name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[v.companyName&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:v.companyName}),v.designation&&v.companyName&&o.jsx("div",{className:"hidden sm:inline-block text-gray-400",children:""}),v.designation&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-600",children:v.designation})]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500 truncate",children:v.email}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500 mt-0.5",children:v.customerId})]})},v.id))})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(pe,{label:"Customer Name",value:f.name,onChange:v=>m(g=>({...g,name:v.target.value})),placeholder:"Enter customer name",required:!0}),o.jsx(pe,{label:"Company Name",value:f.companyName,onChange:v=>m(g=>({...g,companyName:v.target.value})),placeholder:"Enter company name",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(pe,{label:"Designation",value:f.designation,onChange:v=>m(g=>({...g,designation:v.target.value})),placeholder:"Enter designation",required:!0}),o.jsx(pe,{label:"Email",type:"email",value:f.email,onChange:v=>m(g=>({...g,email:v.target.value})),placeholder:"Enter email address",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(pe,{label:"Phone",value:f.phone,onChange:v=>m(g=>({...g,phone:v.target.value})),placeholder:"Enter phone number",required:!0}),o.jsx(pe,{label:"Address",value:f.address,onChange:v=>m(g=>({...g,address:v.target.value})),placeholder:"Enter address",required:!0})]}),"            ",o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[o.jsx(W,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(W,{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function ld(){return o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx(Xs,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",o.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[o.jsx(Xs,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",o.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const yV=({data:e,dataType:t,className:n})=>{const[s,r]=y.useState(!1);return y.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),a=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});r(i||a)},[e]),s?o.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),o.jsxs("p",{children:["You are currently viewing ",o.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",o.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsx("li",{children:"Check that the API server is running"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),o.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[o.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},Ew=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],vV=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],bV=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function wV(){const{user:e}=ze(),t=Qt(),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState([]),[c,u]=y.useState(""),[d,h]=y.useState("all"),[f,m]=y.useState(!0),[p,x]=y.useState(!1),[b,w]=y.useState(!1),[v,g]=y.useState(!1),[j,S]=y.useState(null),[k,N]=y.useState({show:!1,title:""}),C=new Date().toISOString().split("T")[0],[E,P]=y.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[L,F]=y.useState(0),[$,A]=y.useState(null),[B,q]=y.useState(!1),[I,T]=y.useState({fullName:"",companyName:"",phoneNumber:"",email:"",serviceNeeded:"",siteLocation:"",startDate:"",rentalDays:1,shiftTiming:"",status:"new",source:"",designation:"",notes:""});y.useEffect(()=>{R(),H()},[]),y.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),G()},[n,c,d]),y.useEffect(()=>{if(v&&j){const _=new Date().toISOString().split("T")[0];T({fullName:j.customerName||"",companyName:j.companyName||"",phoneNumber:j.phone||"",email:j.email||"",serviceNeeded:j.serviceNeeded||"",siteLocation:j.siteLocation||"",startDate:j.startDate||_,rentalDays:j.rentalDays||1,shiftTiming:j.shiftTiming||"",status:j.status||"new",source:j.source||"",designation:j.designation||"",notes:j.notes||""})}},[v,j]);const R=async()=>{try{console.log("Fetching leads from API...");const _=await Na(),M=_S(_);console.log(" Debug leads response:",{originalResponse:_,extractedData:M,isArray:Array.isArray(M),length:Array.isArray(M)?M.length:"not array",firstLead:M.length>0?MS(M[0]):"none"}),console.log("Leads data received:",M),s(M||[]),m(!1)}catch(_){console.error("Error fetching leads:",_),U("Error fetching leads","error"),s([]),m(!1)}},H=async()=>{try{console.log("Fetching sales agents from API...");const _=await fetch("http://localhost:3001/api/auth/sales-agents",{headers:{"Content-Type":"application/json","X-Bypass-Auth":"development-only-123"}});if(_.ok){const M=await _.json();console.log("Sales agents fetched:",M),i(M)}else console.error("Failed to fetch sales agents:",_.status),i([{id:"u_sal_386065nosk",name:"John Sales"},{id:"usr_test001",name:"Test User"}])}catch(_){console.error("Error fetching sales agents:",_),i([{id:"u_sal_386065nosk",name:"John Sales"},{id:"usr_test001",name:"Test User"}])}},G=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads. Current filters:`,{searchTerm:c,statusFilter:d});let _=[...n];c&&(_=_.filter(M=>{var Q,ae,Y,le;return((Q=M==null?void 0:M.customerName)==null?void 0:Q.toLowerCase().includes(c.toLowerCase()))||!1||((ae=M==null?void 0:M.companyName)==null?void 0:ae.toLowerCase().includes(c.toLowerCase()))||!1||((Y=M==null?void 0:M.email)==null?void 0:Y.toLowerCase().includes(c.toLowerCase()))||!1||((le=M==null?void 0:M.phone)==null?void 0:le.includes(c))||!1}),console.log(`After search filter: ${_.length} leads`)),d!=="all"?(_=_.filter(M=>(M==null?void 0:M.status)===d),console.log(`After status filter (${d}): ${_.length} leads`)):(_=_.filter(M=>(M==null?void 0:M.status)!=="converted"),console.log(`After excluding converted leads: ${_.length} leads`)),console.log(`Final filtered leads: ${_.length} leads match criteria`),l(_)},Z=async _=>{var ae;if(_.preventDefault(),!E.fullName||!E.phoneNumber||!E.email||!E.machineryType||!E.location||!E.startDate||!E.rentalDays){U("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)){U("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(E.phoneNumber)){U("Please enter a valid phone number","error");return}try{const Y=(e==null?void 0:e.role)==="sales_agent"?e.id:E.assignedTo,le=(e==null?void 0:e.role)==="sales_agent"?e.name:((ae=r.find(ft=>ft.id===E.assignedTo))==null?void 0:ae.name)||"",ke={customerName:E.fullName,companyName:E.companyName,email:E.email,phone:E.phoneNumber,serviceNeeded:E.machineryType,siteLocation:E.location,startDate:E.startDate,rentalDays:parseInt(E.rentalDays),shiftTiming:E.shiftTiming,status:"new",notes:E.notes,designation:E.designation,...Y&&Y.trim()!==""?{assignedTo:Y,assignedToName:le}:{}};console.log("Creating lead with data:",ke);const Be=await iS(ke);s(ft=>[...ft,Be]),x(!1),z(),U("Lead created successfully","success")}catch(Y){console.error("Error creating lead:",Y),U("Error creating lead","error")}},ie=async(_,M)=>{try{const Q=await sp(_,M);Q&&(s(ae=>ae.map(Y=>Y.id===_?Q:Y)),U("Lead status updated","success"))}catch(Q){console.error("Error updating lead status:",Q),U("Error updating lead status","error")}},ce=async _=>{console.log("Selected customer:",_),A(_),w(!1),setTimeout(()=>{q(!0)},100)},O=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:j,selectedCustomer:$,dealValue:L}),!j){U("No lead selected","error");return}if(!$){U("No customer selected","error");return}const _=await gS({title:`Deal for ${$.name}`,description:`Deal created from lead for ${$.name}${$.companyName?` (${$.companyName})`:""}`,leadId:j.id,customerId:$.id,stage:"qualification",value:L,expectedCloseDate:new Date().toISOString(),customer:{name:$.name,email:$.email||j.email,phone:$.phone||j.phone,company:$.companyName||"",address:$.address||"",designation:$.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:j.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",_),await sp(j.id,"converted"),s(M=>M.map(Q=>Q.id===j.id?{...Q,status:"converted"}:Q)),U("Lead converted to deal successfully","success"),q(!1),w(!1),S(null),A(null),F(0),t("/deals")}catch(_){console.error("Error converting lead to deal:",_),U("Error converting lead to deal","error")}finally{m(!1)}},V=async _=>{if(_.status!=="qualified"){U("Only qualified leads can be converted to deals","warning");return}S(_),w(!0)},D=async(_,M)=>{try{if(M===""){console.log("Unassigning lead",_);const Y=await rp(_,"","Unassigned");Y&&(s(le=>le.map(ke=>ke.id===_?Y:ke)),U("Lead unassigned successfully","success"));return}const Q=r.find(Y=>Y.id===M);if(!Q){U("Selected sales agent not found","error");return}const ae=await rp(_,M,Q.name);ae&&(s(Y=>Y.map(le=>le.id===_?ae:le)),U("Lead assignment updated","success"))}catch(Q){console.error("Error updating lead assignment:",Q),U("Error updating lead assignment","error")}},z=()=>{P({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},U=(_,M="success")=>{N({show:!0,title:_,variant:M}),setTimeout(()=>N({show:!1,title:""}),3e3)},X=async _=>{if(_.preventDefault(),!I.fullName||!I.phoneNumber||!I.email||!I.serviceNeeded||!I.siteLocation||!I.startDate||!I.rentalDays||I.rentalDays<1){U("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)){U("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(I.phoneNumber)){U("Please enter a valid phone number","error");return}try{const ae=await rS(j.id,{customerName:I.fullName,companyName:I.companyName,email:I.email,phone:I.phoneNumber,serviceNeeded:I.serviceNeeded,siteLocation:I.siteLocation,startDate:I.startDate,rentalDays:I.rentalDays,shiftTiming:I.shiftTiming,status:I.status,source:I.source,designation:I.designation,notes:I.notes});console.log("Update response:",ae),ae?s(Y=>{const le=Y.map(ke=>ke.id===j.id?ae:ke);return console.log("Updated leads array:",le),le}):(console.log("No updated lead returned, refetching all leads"),await R()),g(!1),S(null),U("Lead updated successfully","success")}catch(ae){console.error("Error updating lead:",ae),U("Error updating lead","error")}};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(yV,{data:n,dataType:"leads"}),o.jsxs(ee,{children:[o.jsxs(fe,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4",children:[o.jsx(me,{className:"text-xl font-semibold text-gray-900",children:"Leads Pipeline"}),o.jsx(W,{onClick:()=>x(!0),className:"whitespace-nowrap self-start sm:self-auto",leftIcon:o.jsx(rs,{className:"h-4 w-4"}),variant:"accent",children:"Add Lead"})]}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4 p-4 bg-gradient-to-r from-gray-50/80 to-gray-100/50 rounded-xl border border-gray-200/60 shadow-sm relative z-10",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx(_s,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),o.jsx(Ee,{type:"text",placeholder:"Search leads...",value:c,onChange:_=>u(_.target.value),className:"w-full bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 min-w-0 text-gray-900 placeholder:text-gray-500"})]}),o.jsx("div",{className:"relative z-20 w-full sm:w-[180px] flex-shrink-0",children:o.jsx(be,{value:d,onChange:_=>h(_),options:[{value:"all",label:"All Status"},...Ew],className:"w-full bg-white border-gray-200"})})]})]}),o.jsx(se,{children:f?o.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):a.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):o.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200/60 bg-white shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assigned To"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(_=>o.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/30 transition-all duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.customerName||"Unknown Customer"}),_.companyName&&o.jsx("div",{className:"text-sm text-gray-500",children:_.companyName}),!_.customerName&&!_.companyName&&_.id&&o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",_.id.substring(0,8),"..."]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.serviceNeeded||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.siteLocation||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(be,{value:_.status,onChange:M=>ie(_.id,M),options:Ew,className:"min-w-[130px]"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?o.jsx(be,{value:_.assignedTo||"",onChange:M=>D(_.id,M),options:[{value:"",label:"Unassigned"},...r.map(M=>({value:M.id,label:M.name}))],className:"min-w-[160px]"}):o.jsx("div",{className:"text-sm text-gray-900",children:!_.assignedTo||_.assignedTo===""?"Unassigned":_.assignedToName||"Unassigned"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{S(_),g(!0)},leftIcon:o.jsx(gi,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Edit"}),_.status==="qualified"&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>V(_),leftIcon:o.jsx(EA,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Convert to Deal"})]})})]},_.id))})]})})})]}),o.jsx(it,{isOpen:p,onClose:()=>{x(!1),z()},title:"Create New Lead",size:"lg",children:o.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[o.jsx(ld,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(pe,{label:"Full Name",value:E.fullName,onChange:_=>P(M=>({...M,fullName:_.target.value})),required:!0}),o.jsx(pe,{label:"Company Name",value:E.companyName,onChange:_=>P(M=>({...M,companyName:_.target.value})),helperText:"Optional"}),o.jsx(pe,{label:"Phone Number",type:"tel",value:E.phoneNumber,onChange:_=>P(M=>({...M,phoneNumber:_.target.value})),required:!0}),o.jsx(pe,{label:"Email Address",type:"email",value:E.email,onChange:_=>P(M=>({...M,email:_.target.value})),required:!0}),o.jsx(be,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...vV],value:E.machineryType,onChange:_=>P(M=>({...M,machineryType:_})),required:!0}),o.jsx(pe,{label:"Site Location",value:E.location,onChange:_=>P(M=>({...M,location:_.target.value})),required:!0}),o.jsx(pe,{label:"Start Date",type:"date",value:E.startDate,min:C,onChange:_=>P(M=>({...M,startDate:_.target.value})),required:!0}),o.jsx(pe,{label:"Number of Rental Days",type:"number",min:"1",value:E.rentalDays,onChange:_=>{const M=Math.max(1,parseInt(_.target.value)||1);P(Q=>({...Q,rentalDays:M.toString()}))},required:!0}),o.jsx(be,{label:"Shift Timing",options:bV,value:E.shiftTiming,onChange:_=>P(M=>({...M,shiftTiming:_})),required:!0}),o.jsx(pe,{label:"Designation",value:E.designation,onChange:_=>P(M=>({...M,designation:_.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&o.jsx(be,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...r.map(_=>({value:_.id,label:_.name}))],value:E.assignedTo,onChange:_=>P(M=>({...M,assignedTo:_})),required:!0})]}),o.jsx(Dn,{label:"Additional Notes",value:E.notes,onChange:_=>P(M=>({...M,notes:_.target.value})),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{x(!1),z()},children:"Cancel"}),"            ",o.jsx(W,{type:"submit",variant:"accent",children:"Create Lead"})]})]})}),o.jsx(xV,{isOpen:b,onClose:()=>{w(!1),S(null),A(null),F(0)},onSelect:ce,initialCustomerData:j?{name:j.customerName,email:j.email,phone:j.phone,companyName:j.companyName,designation:j.designation}:void 0}),o.jsx(it,{isOpen:B,onClose:()=>{q(!1),S(null),A(null),F(0)},title:"Enter Deal Value",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(pe,{label:"Deal Value",type:"number",value:L===0?"":L,onChange:_=>{const M=_.target.value;F(M===""?0:Number(M))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{q(!1),S(null),A(null),F(0)},children:"Cancel"}),o.jsx(W,{onClick:O,variant:"accent",children:"Create Deal"})]})]})}),o.jsx(it,{isOpen:v,onClose:()=>{g(!1),S(null)},title:"Edit Lead Details",size:"lg",children:j&&o.jsxs("form",{onSubmit:X,className:"space-y-6",children:[o.jsx(ld,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(pe,{label:"Full Name",value:I.fullName,onChange:_=>T(M=>({...M,fullName:_.target.value})),required:!0}),o.jsx(pe,{label:"Company Name",value:I.companyName,onChange:_=>T(M=>({...M,companyName:_.target.value})),helperText:"Optional"}),o.jsx(pe,{label:"Phone Number",type:"tel",value:I.phoneNumber,onChange:_=>T(M=>({...M,phoneNumber:_.target.value})),required:!0}),o.jsx(pe,{label:"Email Address",type:"email",value:I.email,onChange:_=>T(M=>({...M,email:_.target.value})),required:!0}),o.jsx(pe,{label:"Service Needed",value:I.serviceNeeded,onChange:_=>T(M=>({...M,serviceNeeded:_.target.value})),required:!0}),o.jsx(pe,{label:"Site Location",value:I.siteLocation,onChange:_=>T(M=>({...M,siteLocation:_.target.value})),required:!0}),o.jsx(pe,{label:"Start Date",type:"date",value:I.startDate,onChange:_=>T(M=>({...M,startDate:_.target.value})),required:!0}),o.jsx(pe,{label:"Rental Days",type:"number",min:"1",value:I.rentalDays.toString(),onChange:_=>T(M=>({...M,rentalDays:parseInt(_.target.value)||1})),required:!0}),o.jsx(pe,{label:"Shift Timing",value:I.shiftTiming,onChange:_=>T(M=>({...M,shiftTiming:_.target.value})),placeholder:"e.g., Day Shift, Night Shift"}),o.jsx(be,{label:"Status",value:I.status,onChange:_=>T(M=>({...M,status:_})),options:[{label:"New",value:"new"},{label:"In Process",value:"in_process"},{label:"Qualified",value:"qualified"},{label:"Unqualified",value:"unqualified"},{label:"Lost",value:"lost"},{label:"Converted",value:"converted"}],required:!0}),o.jsx(be,{label:"Source",value:I.source,onChange:_=>T(M=>({...M,source:_})),options:[{label:"Select Source",value:""},{label:"Website",value:"website"},{label:"Referral",value:"referral"},{label:"Direct",value:"direct"},{label:"Social Media",value:"social"},{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Other",value:"other"}]})]}),o.jsx("div",{children:o.jsx(pe,{label:"Designation",value:I.designation,onChange:_=>T(M=>({...M,designation:_.target.value})),placeholder:"Job title or role"})}),o.jsx("div",{children:o.jsx(Dn,{label:"Notes",value:I.notes,onChange:_=>T(M=>({...M,notes:_.target.value})),placeholder:"Additional notes or comments...",rows:3})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{g(!1),S(null)},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:"Save Changes"})]})]})}),k.show&&o.jsx(lt,{title:k.title,variant:k.variant,isVisible:k.show,onClose:()=>N({show:!1,title:""})})]})}const jV="modulepreload",NV=function(e){return"/"+e},Dw={},cd=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=NV(c),c in Dw)return;Dw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":jV,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},SV={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1},{id:"sample-equipment-2",machineType:"mobile_crane",equipmentId:"crane-002",name:"100T Mobile Crane",baseRates:{micro:8e3,small:7500,monthly:7e3,yearly:6500},baseRate:7e3,runningCostPerKm:150,quantity:2}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",workingCost:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile_crane",otherFactors:["rigger","area","customer_reputation"],dealType:"credit",sundayWorking:"no"};function CV({template:e,quotation:t,onDownloadPDF:n,onSendEmail:s,className:r=""}){const[i,a]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState({show:!1,title:""});y.useEffect(()=>{if(!e){c("Template is required");return}if(!e.content){c("Template content is required");return}c(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t)},[e,t]);const h=t||SV,f=(w,v="success")=>{d({show:!0,title:w,variant:v}),setTimeout(()=>d({show:!1,title:""}),3e3)};let m="";try{e&&e.content?(m=ll(h,e),console.log("Generated merged content:",m?m.substring(0,100)+"...":"empty")):(console.warn("Cannot merge template - missing template or content"),m='<div style="padding: 20px;">Template content could not be loaded</div>')}catch(w){console.error("Error merging template:",w),c("Failed to merge template with quotation data"),m='<div style="padding: 20px; color: red;">Error generating preview</div>'}const x=PS().reduce((w,v)=>(w[v.category]||(w[v.category]=[]),w[v.category].push(v),w),{}),b=()=>{if(!m){f("No content to copy","error");return}navigator.clipboard.writeText(m).then(()=>{f("Content copied to clipboard","success")}).catch(()=>{f("Failed to copy content","error")})};return l?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[o.jsx("strong",{children:"Error:"})," ",l]})}):o.jsxs("div",{className:`space-y-4 sm:space-y-6 ${r}`,children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[o.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),o.jsxs(ee,{children:[o.jsx(fe,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o.jsx(ln,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsxs(W,{variant:"outline",size:"xs",onClick:()=>a(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(Xs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),o.jsx(W,{variant:"outline",size:"xs",onClick:b,disabled:!m,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&o.jsx(se,{className:"px-3 sm:px-6",children:o.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&o.jsxs(ee,{children:[o.jsx(fe,{className:"p-3 sm:p-6",children:o.jsx(me,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),o.jsxs(se,{className:"p-3 sm:p-6",children:[o.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(x).map(([w,v])=>o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:w}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:v.map(g=>o.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:g.description,onClick:()=>{navigator.clipboard.writeText(`{{${g.key}}}`),f(`Copied {{${g.key}}}`,"success")},children:`{{${g.key}}}`},g.key))})]},w))}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsx(me,{className:"text-base sm:text-lg",children:"Quotation Preview"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n&&o.jsxs(W,{variant:"outline",size:"xs",onClick:n,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(ax,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),s&&o.jsxs(W,{variant:"outline",size:"xs",onClick:s,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(cl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),o.jsxs(se,{className:"p-3 sm:p-6",children:[l?o.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[o.jsxs("p",{className:"font-medium",children:["Error: ",l]}),o.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,m?o.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:m}}):o.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[o.jsx(Ue,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),o.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}),e&&!e.content&&o.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[o.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),o.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]}),u.show&&o.jsx(lt,{title:u.title,variant:u.variant,isVisible:u.show,onClose:()=>d({show:!1,title:""})})]})}let Mf=null;const di=()=>{if(Mf!==null)return Mf;const e={viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return Mf=n,n},Vk=()=>!di(),kV=(e=!1)=>{const t={"Content-Type":"application/json"},n=localStorage.getItem("jwt-token");return n&&(t.Authorization=`Bearer ${n}`),t},EV=e=>{di()&&e()},DV=(e,...t)=>{Vk()&&console.log(`[DEBUG] ${e}`,...t)},Bp=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},No=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},TV=()=>{if(di()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){No("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),Bp("Removed development authentication token from storage")}catch(t){No("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(No("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Bp("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&No("SECURITY RISK: Development flags found in production build!")}},PV=()=>{if(di()){TV(),console.log("%c PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{Promise.all([cd(()=>import("./devLogin-u0kKCG1j.js"),[]).catch(()=>null),cd(()=>import("./authDebug-C4VhRWrV.js"),[]).catch(()=>null)]).then(e=>{e.some(n=>n!==null)&&No("SECURITY RISK: Development modules found in production build!")})}catch{}try{if(typeof window<"u"&&di()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};EV(()=>{PV()});const Gl=(e=!1)=>{di()&&e&&(Bp("Attempted to use development bypass headers in production - request denied"),e=!1);const n=kV(e);if(di()&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),Vk()){const s=!!n.Authorization;DV(`API headers prepared: Auth token ${s?"present":"missing"}${e?", dev bypass enabled":""}`)}return n};async function _V(){const t=await fetch("http://localhost:3001/api/quotations",{method:"GET",headers:Gl(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quotations");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function MV(e){const n=await fetch(`http://localhost:3001/api/quotations?leadId=${encodeURIComponent(e)}`,{method:"GET",headers:Gl(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotations");return await n.json()}async function Uk(){const t=await fetch("http://localhost:3001/api/deals",{method:"GET",headers:Gl(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch deals");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function Wk(e){const n=await fetch(`http://localhost:3001/api/deals/${e}`,{method:"GET",headers:Gl(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch deal by ID");return n.json()}async function Hk(e,t){const s=await fetch(`http://localhost:3001/api/deals/${e}/stage`,{method:"PATCH",headers:{...Gl(),"Content-Type":"application/json"},body:JSON.stringify({stage:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update deal stage");const r=await s.json();return r.data||r}const AV=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function RV(){const{user:e}=ze(),t=Qt(),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState([]),[c,u]=y.useState(""),[d,h]=y.useState("all"),[f,m]=y.useState(!0),[p,x]=y.useState(null),[b,w]=y.useState(null),[v,g]=y.useState(null),[j,S]=y.useState(!1),[k,N]=y.useState(!1),[C,E]=y.useState(""),[P,L]=y.useState(!1),[F,$]=y.useState(!1),[A,B]=y.useState({show:!1,title:""}),[q,I]=y.useState(null);y.useEffect(()=>{T()},[]),y.useEffect(()=>{H()},[n,c,d]);const T=async()=>{try{m(!0),x(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:D}=await cd(async()=>{const{getCustomers:ae}=await Promise.resolve().then(()=>H0);return{getCustomers:ae}},void 0),[z,U,X]=await Promise.all([_V(),Uk(),D()]);console.log("QuotationManagement: Fetched quotations:",(z==null?void 0:z.length)||0),console.log("QuotationManagement: Fetched deals:",(U==null?void 0:U.length)||0),console.log("QuotationManagement: Fetched customers:",(X==null?void 0:X.length)||0);const _=new Map;X.forEach(ae=>{_.set(ae.id,ae)}),z.length>0&&console.log("Sample quotation data:",{id:z[0].id,customerId:z[0].customerId,customerName:z[0].customerName,customerContact:z[0].customerContact,selectedEquipment:z[0].selectedEquipment}),X.length>0&&console.log("Sample customer data:",{id:X[0].id,name:X[0].name});const M=z.map(ae=>{const Y={...ae},le=_.get(ae.customerId);return le?(console.log(`Found matching customer for quotation ${ae.id}: ${le.name}`),Y.customerName=Y.customerName||le.name,Y.customerContact=Y.customerContact||{},Y.customerContact.name||(Y.customerContact.name=le.contactName),Y.customerContact.company||(Y.customerContact.company=le.name),Y.customerContact.email||(Y.customerContact.email=le.email),Y.customerContact.phone||(Y.customerContact.phone=le.phone),Y.customerContact.address||(Y.customerContact.address=le.address)):console.log(`No matching customer found for quotation ${ae.id} with customerId ${ae.customerId}`),Y.customerName=Y.customerName||"Unknown Customer",Y.customerContact=Y.customerContact||{},Y.customerContact.name=Y.customerContact.name||"Contact Not Available",Y.customerContact.company=Y.customerContact.company||"No Company",Y});s(M);const Q=U.filter(ae=>ae.stage==="qualification"||ae.stage==="proposal");i(Q),await R()}catch(D){console.error("Error fetching data:",D),x("Failed to load quotations. Please try again."),G("Error fetching data","error")}finally{m(!1)}},R=async()=>{try{const D=await xS();if(D.defaultTemplateId){const U=await sS(D.defaultTemplateId);if(U){console.log("Loaded template from config:",U),g(U);return}}try{const X=await(await cd(()=>Promise.resolve().then(()=>H0),void 0)).getTemplates();if(X&&X.length>0){const _=X.find(M=>M.isDefault)||X[0];console.log("Loaded template from templateService:",_),g(_);return}}catch(U){console.error("Error loading templates from service:",U)}const z={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),g(z)}catch(D){console.error("Error loading default template:",D);const z={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};g(z)}},H=()=>{let D=[...n];c&&(D=D.filter(z=>{var U,X,_;return(((U=z.customerContact)==null?void 0:U.name)||z.customerName||"").toLowerCase().includes(c.toLowerCase())||(((X=z.customerContact)==null?void 0:X.company)||"").toLowerCase().includes(c.toLowerCase())||(z.machineType||"").toLowerCase().includes(c.toLowerCase())||z.selectedMachines&&z.selectedMachines.some(M=>(M.name||"").toLowerCase().includes(c.toLowerCase()))||(((_=z.selectedEquipment)==null?void 0:_.name)||"").toLowerCase().includes(c.toLowerCase())})),d!=="all"&&(D=D.filter(z=>z.status===d)),l(D)},G=(D,z="success",U)=>{B({show:!0,title:D,description:U,variant:z}),setTimeout(()=>{B({show:!1,title:""})},5e3)},Z=()=>{if(!C){G("Please select a deal","warning");return}t(`/quotations/create?dealId=${C}`),E("")},ie=async D=>{try{if(I(D.id),console.log("Editing quotation:",D),!D.leadId){G("Invalid quotation data","error","Missing lead ID");return}if(!await Wk(D.leadId)){G("Associated deal not found","error","The deal associated with this quotation no longer exists");return}console.log("Navigating to:",`/quotations/create?dealId=${D.leadId}&quotationId=${D.id}`),t(`/quotations/create?dealId=${D.leadId}&quotationId=${D.id}`)}catch(z){console.error("Error preparing quotation edit:",z),G("Error preparing quotation edit","error")}finally{I(null)}},ce=async D=>{var z;try{if(L(!0),!v){G("No default template configured","warning","Please set a default template in Configuration settings.");return}const U=ll(D,v),X=window.open("","_blank");if(!X){G("Popup blocked","error","Please allow popups to download PDF.");return}X.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((z=D.customerContact)==null?void 0:z.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${U}
        </body>
        </html>
      `),await new Promise(_=>setTimeout(_,1e3)),X.document.close(),X.print(),X.close(),G("PDF generated successfully","success")}catch(U){console.error("Error generating PDF:",U),G("Failed to generate PDF","error")}finally{L(!1)}},O=async D=>{var z,U,X;try{if($(!0),!v){G("No default template configured","warning","Please set a default template in Configuration settings.");return}const _=ll(D,v);let M="Equipment";D.selectedMachines&&D.selectedMachines.length>1?M=`${D.selectedMachines.length} machines (${D.selectedMachines.map(Be=>Be.name).join(", ")})`:D.selectedMachines&&D.selectedMachines.length===1?M=D.selectedMachines[0].name:(z=D.selectedEquipment)!=null&&z.name?M=D.selectedEquipment.name:D.machineType&&(M=D.machineType);const Q=`Quotation from ASP Cranes - ${D.id.slice(0,8).toUpperCase()}`,ae=((U=D.customerContact)==null?void 0:U.name)||D.customerName||"Customer",Y=((X=D.customerContact)==null?void 0:X.email)||"",le=`Dear ${ae},

Please find your quotation details for ${M} below:

${_}

Best regards,
ASP Cranes Team`,ke=`mailto:${Y}?subject=${encodeURIComponent(Q)}&body=${encodeURIComponent(le)}`;window.open(ke),G("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(_){console.error("Error sending to customer:",_),G("Error preparing email","error")}finally{$(!1)}},V=y.useMemo(()=>r.length===0?[{value:"",label:"No deals available"}]:r.map(D=>{var z,U;return{value:D.id,label:`${((z=D.customer)==null?void 0:z.name)||"Unnamed"} - ${((U=D.customer)==null?void 0:U.company)||"No Company"} (${Se(D.value)})`}}),[r]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",o.jsx(W,{onClick:()=>N(!0),className:"w-full sm:w-auto",leftIcon:o.jsx(rs,{className:"w-4 h-4"}),variant:"accent",children:"Create New Quotation"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ee,{placeholder:"Search by customer, company or equipment...",value:c,onChange:D=>u(D.target.value),leftIcon:o.jsx(_s,{className:"w-4 h-4"}),disabled:f})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsx(be,{options:AV,value:d,onChange:h,leftIcon:o.jsx($A,{className:"w-4 h-4"}),disabled:f})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Quotation History"})}),o.jsx(se,{className:"px-0 sm:px-6",children:f?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(Ue,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"text-center py-8 text-red-500",children:[o.jsx(Wd,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),o.jsx("p",{className:"text-lg font-medium",children:p}),o.jsx(W,{variant:"outline",size:"sm",onClick:T,className:"mt-4",children:"Try Again"})]}):a.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(ln,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),o.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(D=>{var z,U,X,_;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-start flex-col",children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((z=D.customerContact)==null?void 0:z.name)||D.customerName||"Customer"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((U=D.customerContact)==null?void 0:U.company)||D.customerName||"No Company"}),o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",D.customerId?D.customerId.substring(0,8):"None"]}),o.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:D.selectedMachines&&D.selectedMachines.length>0?D.selectedMachines.length===1?D.selectedMachines[0].name:`${D.selectedMachines.length} machines`:((X=D.selectedEquipment)==null?void 0:X.name)||D.machineType||"No equipment data"}),o.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:Se(D.totalRent)})]})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:D.selectedMachines&&D.selectedMachines.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:D.selectedMachines.map(M=>M.name).join(", ")}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[D.selectedMachines.length," machine",D.selectedMachines.length>1?"s":""]})]}):(_=D.selectedEquipment)!=null&&_.name?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:D.selectedEquipment.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment"})]}):D.machineType?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:D.machineType}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment Type"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Type not specified"})]})}),o.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[o.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[D.numberOfDays," days"]}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[D.workingHours," hrs/day"]})]}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:Se(D.totalRent)}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsx(Ul,{status:D.status})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>ie(D),title:"Edit Quotation",disabled:f||q===D.id,children:q===D.id?o.jsx(Ue,{size:14,className:"animate-spin"}):o.jsx(gi,{size:14})}),o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>{w(D),S(!0)},title:"Preview Quotation",disabled:!v||f,children:o.jsx(LS,{size:14})}),o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>ce(D),disabled:P||!v||f,title:"Download PDF",children:P?o.jsx(Ue,{size:14,className:"animate-spin"}):o.jsx(ax,{size:14})}),o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>O(D),disabled:F||!v||f,title:"Send to Customer",children:F?o.jsx(Ue,{size:14,className:"animate-spin"}):o.jsx(cl,{size:14})})]})})]},D.id)})})]})})})]}),o.jsx(it,{isOpen:k,onClose:()=>{N(!1),E("")},title:"Create New Quotation",size:"lg",children:o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",o.jsx(be,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...V.filter(D=>D.value!=="")],value:C,onChange:E,label:"Available Deals",disabled:f,required:!0}),C&&o.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const D=r.find(z=>z.id===C);return D?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),o.jsx("p",{className:"text-blue-800",children:D.customer.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),o.jsx("p",{className:"text-blue-800",children:D.customer.company})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),o.jsx("p",{className:"text-blue-800",children:Se(D.value)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),o.jsx("p",{className:"text-blue-800 capitalize",children:D.stage})]})]})]}):null})()})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[o.jsx(W,{variant:"outline",onClick:()=>{N(!1),E("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),o.jsxs(W,{onClick:Z,disabled:!C||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",variant:"accent",children:[f?o.jsx(Ue,{className:"w-4 h-4 animate-spin"}):o.jsx(rs,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),o.jsx(it,{isOpen:j,onClose:()=>S(!1),title:"Quotation Preview",size:"full",children:b&&v&&o.jsx(CV,{quotation:b,template:v,onDownloadPDF:()=>ce(b),onSendEmail:()=>O(b)})}),A.show&&o.jsx(lt,{title:A.title,variant:A.variant,isVisible:A.show,onClose:()=>B({show:!1,title:""})})]})})}const Tw={micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:30},yearly:{minDays:31,maxDays:366}},IV=JN(e=>({orderTypeLimits:Tw,isLoading:!1,error:null,fetchConfig:async()=>{try{e({isLoading:!0,error:null});const t=await ap();t&&t.orderTypeLimits?e({orderTypeLimits:t.orderTypeLimits}):(console.log("Using default quotation config limits"),e({orderTypeLimits:Tw}))}catch(t){console.error("Error fetching quotation config:",t),e({error:"Failed to fetch quotation configuration"})}finally{e({isLoading:!1})}},updateConfig:async t=>{try{e({isLoading:!0,error:null}),e({orderTypeLimits:t}),await vS({orderTypeLimits:t})}catch(n){console.error("Error updating quotation config:",n),e({error:"Failed to update quotation configuration"});const s=await ap();s!=null&&s.orderTypeLimits&&e({orderTypeLimits:s.orderTypeLimits})}finally{e({isLoading:!1})}}})),OV=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],LV=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],FV=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],$V=[{value:"day",label:"Day"},{value:"night",label:"Night"}],zV=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],Fc=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],BV=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],VV=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],$c=[{value:"incident1",label:"Incident 1 - 5,000",amount:5e3},{value:"incident2",label:"Incident 2 - 10,000",amount:1e4},{value:"incident3",label:"Incident 3 - 15,000",amount:15e3}],Af=4e4,Rf=12e3;function UV(){const{user:e}=ze(),t=Qt(),[n]=H_(),s=n.get("dealId")||"",r=n.get("quotationId"),{orderTypeLimits:i,fetchConfig:a}=IV(),[l,c]=y.useState(null),[u,d]=y.useState([]),[h,f]=y.useState(!0),[m,p]=y.useState(!1),[x,b]=y.useState(0),[w,v]=y.useState({foodRate:0,accommodationRate:0,transportRate:0}),[g,j]=y.useState({duration:!0,orderType:!0,machineSelection:!0,workingHours:!0,accommodation:!0,mobDemob:!0,additional:!0}),[S,k]=y.useState({show:!1,title:""}),[N,C]=y.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:Fc[0].value,sundayWorking:"no"}),[E,P]=y.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});y.useEffect(()=>{L()},[s,r]),y.useEffect(()=>{$()},[N,x]),y.useEffect(()=>{N.workingHours!==void 0&&$()},[N.workingHours]),y.useEffect(()=>{var O;if(N.orderType&&((O=N.selectedEquipment)!=null&&O.id)&&u.length>0){const V=u.find(D=>D.id===N.selectedEquipment.id);if(V!=null&&V.baseRates){const D=V.baseRates[N.orderType];b(D)}}N.selectedMachines.length>0&&u.length>0&&C(V=>({...V,selectedMachines:V.selectedMachines.map(D=>{const z=u.find(U=>U.id===D.id);return z!=null&&z.baseRates?{...D,baseRate:z.baseRates[N.orderType]||D.baseRate}:D})}))},[N.orderType,u.length]),y.useEffect(()=>{N.machineType?(async()=>{try{const V=await ip(N.machineType);d(V)}catch(V){console.error("Error fetching equipment:",V)}})():d([])},[N.machineType]),y.useEffect(()=>{if(N.selectedEquipment&&u.length>0){const O=u.find(V=>V.id===N.selectedEquipment.id);if(O!=null&&O.baseRates){const V=O.baseRates[N.orderType];b(V),C(D=>({...D,baseRate:V,runningCostPerKm:O.runningCostPerKm||0}))}}},[N.orderType,N.selectedEquipment,u]);const L=async()=>{var O,V,D,z;try{if(f(!0),console.log("Fetching data with dealId:",s,"quotationId:",r),!s){T("Deal ID not found","error"),t("/quotations");return}const U=await $u(s);if(console.log("Fetched deal data:",U),!U){T("Deal not found","error"),t("/quotations");return}c(U);const X=await rx();console.log("Fetched equipment data:",X);const _=await yS();if(console.log("Fetched resource rates:",_),v(_),r){console.log("Fetching existing quotation:",r);const M=await pS(r);if(console.log("Fetched quotation data:",M),M){C(Y=>({...Y,machineType:M.machineType||""})),await new Promise(Y=>setTimeout(Y,100));const Q=await ip(M.machineType);d(Q),await new Promise(Y=>setTimeout(Y,100));let ae=[];if(M.selectedMachines&&M.selectedMachines.length>0)ae=M.selectedMachines.map(Y=>{var ke;const le=Q.find(Be=>Be.id===Y.id);return{...Y,machineType:Y.machineType||M.machineType||"",name:(le==null?void 0:le.name)||Y.name||"Unknown Equipment",baseRates:(le==null?void 0:le.baseRates)||Y.baseRates,baseRate:((ke=le==null?void 0:le.baseRates)==null?void 0:ke[M.orderType])||Y.baseRate||0,quantity:Y.quantity||1}}),console.log("Loaded machines from selectedMachines:",ae);else if(M.selectedEquipment){const Y=Q.find(le=>le.id===M.selectedEquipment.id);ae=[{id:M.selectedEquipment.id,machineType:M.machineType||"",equipmentId:M.selectedEquipment.equipmentId,name:(Y==null?void 0:Y.name)||M.selectedEquipment.name||"Unknown Equipment",baseRates:(Y==null?void 0:Y.baseRates)||M.selectedEquipment.baseRates,baseRate:((O=Y==null?void 0:Y.baseRates)==null?void 0:O[M.orderType])||((D=(V=M.selectedEquipment)==null?void 0:V.baseRates)==null?void 0:D[M.orderType])||0,runningCostPerKm:M.runningCostPerKm||0,quantity:1}],console.log("Created machine from selectedEquipment:",ae)}if(C({machineType:M.machineType||"",selectedEquipment:M.selectedEquipment||{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:ae,orderType:M.orderType||"micro",numberOfDays:M.numberOfDays||0,workingHours:M.workingHours||8,foodResources:M.foodResources||0,accomResources:M.accomResources||0,siteDistance:M.siteDistance||0,usage:M.usage||"normal",riskFactor:M.riskFactor||"low",extraCharge:M.extraCharge||0,incidentalCharges:M.incidentalCharges||[],otherFactorsCharge:M.otherFactorsCharge||0,billing:M.billing||"gst",includeGst:M.includeGst??!0,shift:M.shift||"single",dayNight:M.dayNight||"day",mobDemob:M.mobDemob||0,mobRelaxation:M.mobRelaxation||0,runningCostPerKm:M.runningCostPerKm||0,version:M.version||1,createdBy:M.createdBy||(e==null?void 0:e.id)||"",status:M.status||"draft",otherFactors:M.otherFactors||[],dealType:M.dealType,sundayWorking:M.sundayWorking}),ae.length>0){const Y=ae[0];b(Y.baseRate),console.log("Setting selected equipment base rate to:",Y.baseRate)}else if((z=M.selectedEquipment)!=null&&z.baseRates){const Y=M.selectedEquipment.baseRates[M.orderType];b(Y),console.log("Setting selected equipment base rate from baseRates:",Y)}console.log("Form data updated with quotation data")}else{T("Quotation not found","error"),t("/quotations");return}}await a(),console.log("Quotation config fetched")}catch(U){console.error("Error fetching data:",U),T("Error fetching data","error")}finally{f(!1)}},F=O=>O<=0?"micro":O>=i.yearly.minDays?"yearly":O>=i.monthly.minDays?"monthly":O>=i.small.minDays?"small":"micro",$=()=>{console.log("Calculating quotation with working hours:",N.workingHours);const O=N.selectedMachines.length>0,V=x;if(!N.numberOfDays||!O&&!V){P({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const D=Number(N.numberOfDays),z=D>25,U=z?26:D,X=A(U),_=N.shift==="double"?2:1;let M=0;const Q=N.workingHours===0?8:Number(N.workingHours)||8;O?N.selectedMachines.forEach(Kt=>{const Ni=Kt.baseRate,Oa=Kt.quantity;let La=0;z?La=Ni/26/Q*Q*U*_*Oa:La=Ni*Q*U*_*Oa,M+=La}):z?M=V/26/Q*Q*U*_:M=V*Q*U*_;const ae=N.usage==="heavy"?.1:.05;let Y=0;O?N.selectedMachines.forEach(Kt=>{Y+=Kt.baseRate*Kt.quantity*ae}):Y=V*ae;let le;if(z)le=Number(N.foodResources)*w.foodRate+Number(N.accomResources)*w.accommodationRate;else{const Kt=w.foodRate/26,Ni=w.accommodationRate/26;le=(Number(N.foodResources)*Kt+Number(N.accomResources)*Ni)*U}const ke=B();let Be=0;const ft=N.riskFactor==="high"?.15:N.riskFactor==="medium"?.1:.05;O?N.selectedMachines.forEach(Kt=>{Be+=Kt.baseRate*Kt.quantity*ft}):Be=V*ft;const As=N.incidentalCharges.reduce((Kt,Ni)=>{const Oa=$c.find(La=>La.value===Ni);return Kt+(Oa?Oa.amount:0)},0);let Wn=0;N.otherFactors.includes("rigger")&&(Wn+=Af),N.otherFactors.includes("helper")&&(Wn+=Rf);const Hn=Number(N.extraCharge)+As+Wn,ji=M+le+ke+Be+Y+Hn,Sy=N.includeGst?ji*.18:0,dD=ji+Sy;P({baseRate:V,totalHours:z?0:X,workingCost:M,mobDemobCost:ke,foodAccomCost:le,usageLoadFactor:Y,extraCharges:Hn,riskAdjustment:Be,gstAmount:Sy,totalAmount:dD})},A=O=>{const V=N.workingHours===0?8:Number(N.workingHours)||8,D=N.shift==="double"?2:1;return V*O*D},B=()=>{const O=Number(N.siteDistance),V=Number(N.mobDemob)||0,D=Number(N.mobRelaxation)||0;if(N.selectedMachines.length>0){let z=0;return N.selectedMachines.forEach(U=>{let X=U.runningCostPerKm||0;if(X===0){const ae=u.find(Y=>Y.id===U.id);ae&&(X=ae.runningCostPerKm||0)}const _=O*X*2*U.quantity,M=_*D/100,Q=_-M+V*U.quantity;z+=Q}),z}else{const z=u.find(Q=>Q.id===N.selectedEquipment.id),U=(z==null?void 0:z.runningCostPerKm)||0,X=O*U*2,_=X*D/100;return X-_+V}},q=O=>{j(V=>({...V,[O]:!V[O]}))},I=async O=>{var V,D,z;if(O.preventDefault(),!l){T("Deal not found","error");return}if(N.selectedMachines.length===0&&!N.selectedEquipment.id){T("Please select at least one machine","error");return}if(N.numberOfDays<=0){T("Please enter valid number of days","error");return}try{p(!0),console.log("Current calculations:",E);const U={...N,dealId:l.id,leadId:l.leadId,customerId:l.customerId,customerName:l.customer.name,customerContact:{name:l.customer.name,email:l.customer.email,phone:l.customer.phone,company:l.customer.company,address:l.customer.address,designation:l.customer.designation},selectedEquipment:N.selectedEquipment,selectedMachines:N.selectedMachines,totalRent:E.totalAmount,baseRate:E.baseRate,workingCost:E.workingCost,mobDemobCost:E.mobDemobCost,foodAccomCost:E.foodAccomCost,usageLoadFactor:E.usageLoadFactor,extraCharges:E.extraCharges,riskAdjustment:E.riskAdjustment,gstAmount:E.gstAmount,sundayWorking:N.sundayWorking||"no"};console.log("Submitting quotation data:",U);let X;r?(X=await fS(r,{...U,version:N.version+1}),T("Quotation updated successfully","success")):(console.log(" Creating quotation with data:",{...U,selectedMachines:((V=U.selectedMachines)==null?void 0:V.map(_=>({id:_.id,name:_.name,quantity:_.quantity,baseRate:_.baseRate})))||[]}),X=await mS(U),T("Quotation created successfully","success")),console.log("Saved quotation:",X),t("/quotations")}catch(U){console.error(" Error saving quotation:",U),console.error(" Error details:",{message:U==null?void 0:U.message,response:((D=U==null?void 0:U.response)==null?void 0:D.data)||(U==null?void 0:U.response),status:(z=U==null?void 0:U.response)==null?void 0:z.status}),T("Error saving quotation","error")}finally{p(!1)}},T=(O,V="success",D)=>{k({show:!0,title:O,variant:V,description:D}),setTimeout(()=>k({show:!1,title:""}),3e3)},R=O=>{const V=u.find(D=>D.id===O);if(V&&V.baseRates){const D=V.baseRates[N.orderType];b(D),C(z=>({...z,selectedEquipment:{id:V.id,equipmentId:V.equipmentId,name:V.name,baseRates:V.baseRates},runningCostPerKm:V.runningCostPerKm||0}))}},H=O=>{C(V=>({...V,machineType:O,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}}})),b(0)},G=()=>{var z;if(!N.machineType||!N.selectedEquipment.id){T("Please select a machine type and equipment first","warning");return}if(N.selectedMachines.some(U=>U.id===N.selectedEquipment.id)){ie(N.selectedEquipment.id,1);return}const V=u.find(U=>U.id===N.selectedEquipment.id);if(!V){T("Selected equipment not found","error");return}const D={id:V.id,machineType:N.machineType,equipmentId:V.equipmentId,name:V.name,baseRates:V.baseRates||{},baseRate:((z=V.baseRates)==null?void 0:z[N.orderType])||0,runningCostPerKm:V.runningCostPerKm||0,quantity:1};C(U=>({...U,selectedMachines:[...U.selectedMachines,D]})),C(U=>({...U,machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},baseRate:0})),b(0)},Z=O=>{C(V=>({...V,selectedMachines:V.selectedMachines.filter(D=>D.id!==O)}))},ie=(O,V)=>{C(D=>({...D,selectedMachines:D.selectedMachines.map(z=>{if(z.id===O){const U=Math.max(1,z.quantity+V);return{...z,quantity:U}}return z})}))},ce=(O,V)=>{C(D=>({...D,selectedMachines:D.selectedMachines.map(z=>z.id===O?{...z,baseRate:V}:z)}))};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):h?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):l?o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsx("style",{children:`
          /* Remove number input spinners */
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:o.jsx(ix,{size:16}),className:"self-start",children:"Back"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:r?"Edit Quotation":"Create Quotation"}),o.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",l.customer.name," - ",l.title]})]})]})}),o.jsxs("div",{className:"max-w-full md:max-w-7xl mx-auto px-2 sm:px-4",children:[o.jsxs(ee,{className:"mb-4 sm:mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(zn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),o.jsx(me,{className:"text-base sm:text-lg font-medium",children:"Customer Information"})]})}),o.jsx(se,{children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Customer Name"}),o.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.name})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Company"}),o.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.company})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Designation"}),o.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.designation||"N/A"})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Email"}),o.jsx("div",{className:"text-sm sm:text-base font-medium break-all",children:l.customer.email})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Phone"}),o.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.phone})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Address"}),o.jsx("div",{className:"text-sm sm:text-base font-medium",children:l.customer.address})]})]})})]}),o.jsxs("form",{onSubmit:I,children:[o.jsx(ld,{}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"col-span-7 space-y-6",children:[o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("duration"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ss,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Duration"})]}),g.duration?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.duration&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(pe,{type:"number",label:"Number of Days",value:N.numberOfDays||"",onChange:O=>{const V=O.target.value===""?0:Number(O.target.value),D=F(V);console.log(`Days: ${V}, Order Type: ${D}`),C(z=>{const U=V>0&&D!==z.orderType;let X=[...z.selectedMachines];return U&&(X=z.selectedMachines.map(_=>{var M;return{..._,baseRate:((M=_.baseRates)==null?void 0:M[D])||_.baseRate}})),{...z,numberOfDays:V,orderType:V>0?D:z.orderType,selectedMachines:X}})},required:!0,min:"1",placeholder:"Enter number of days"}),N.numberOfDays>0&&x>0&&o.jsxs("div",{className:"mt-2 space-y-1",children:[N.orderType!=="monthly"?o.jsxs("div",{className:"text-sm text-gray-600",children:["Daily Rate: ",Se(x*(N.workingHours===0?8:Number(N.workingHours)||8)),"/day"]}):o.jsxs("div",{className:"text-sm text-gray-600",children:["Monthly Rate: ",Se(x),"/month"]}),o.jsx("div",{className:"text-sm font-medium text-primary-600",children:Number(N.numberOfDays)>=i.yearly.minDays?"Yearly rate":Number(N.numberOfDays)>=i.monthly.minDays?"Monthly rate":Number(N.numberOfDays)>=i.small.minDays?"Small order rate":"Micro order rate"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("orderType"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ln,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Order Type"})]}),g.orderType?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.orderType&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(be,{label:"Order Type",options:OV,value:N.orderType,onChange:O=>{Number(N.numberOfDays)===0&&C(V=>({...V,orderType:O}))},disabled:Number(N.numberOfDays)>0}),Number(N.numberOfDays)>0?o.jsx("div",{className:"mt-2 text-sm text-amber-600",children:Number(N.numberOfDays)>=i.yearly.minDays?"Order type is set to Yearly as duration exceeds "+(i.yearly.minDays-1)+" days":Number(N.numberOfDays)>=i.monthly.minDays?"Order type is set to Monthly as duration exceeds "+(i.monthly.minDays-1)+" days":Number(N.numberOfDays)>=i.small.minDays?"Order type is set to Small as duration is between "+i.small.minDays+"-"+i.small.maxDays+" days":"Order type is set to Micro as duration is "+i.micro.maxDays+" days or less"}):o.jsxs("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[o.jsx(Xs,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Order type will be automatically set based on the number of days"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("machineSelection"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(sn,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx(me,{className:"text-lg font-medium",children:"Machine Selection"}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:["You can add multiple machines to this quotation",o.jsxs("span",{className:"ml-1 cursor-help text-gray-400 hover:text-gray-600 relative group",children:[o.jsx(Xs,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden group-hover:block absolute left-full ml-2 top-0 bg-gray-800 text-white text-xs rounded p-2 w-48",children:"Add different types of machines or multiple units of the same machine using the Add Machine button"})]})]})]})]}),g.machineSelection?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.machineSelection&&o.jsxs(se,{className:"pt-4 space-y-4",children:[N.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",N.selectedMachines.length,")"]}),o.jsx("span",{className:"text-xs text-gray-500 mb-2",children:"You can edit the base rate and quantity for each machine"})]}),o.jsx("div",{className:"space-y-3 bg-gray-50 p-3 rounded-md border border-gray-200",children:N.selectedMachines.map(O=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("div",{className:"font-semibold",children:O.name}),o.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["ID: ",O.equipmentId]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-gray-50 p-2 rounded-md border border-gray-100",children:[o.jsx("label",{className:"text-xs font-medium text-gray-700",children:"Base Rate:"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-sm",value:O.baseRate,onChange:V=>{const D=Number(V.target.value);isNaN(D)||ce(O.id,D)}}),o.jsx("span",{className:"text-xs text-gray-500",children:N.orderType==="monthly"?"/month":"/hr"})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-3",children:[o.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-error-500 transition-colors duration-150",onClick:()=>Z(O.id),title:"Remove machine",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Quantity"}),o.jsxs("div",{className:"flex items-center border rounded-md overflow-hidden",children:[o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>ie(O.id,-1),disabled:O.quantity<=1,children:"-"}),o.jsx("span",{className:"px-3 py-1 font-medium",children:O.quantity}),o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>ie(O.id,1),children:"+"})]})]})]})]},O.id))})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Add Machine"}),o.jsx(be,{label:"Machine Type",options:LV,value:N.machineType,onChange:O=>{H(O)}}),N.machineType&&o.jsx("div",{className:"mt-3",children:o.jsx(be,{label:"Select Equipment",options:[{value:"",label:"Select equipment..."},...u.map(O=>{var V;return{value:O.id,label:`${O.equipmentId} - ${O.name} (${Se(((V=O.baseRates)==null?void 0:V[N.orderType])||0)}${N.orderType==="monthly"?"/month":"/hr"})`}})],value:N.selectedEquipment.id,onChange:O=>{R(O)}})}),!u.length&&N.machineType&&o.jsx("div",{className:"text-sm text-amber-600 mt-2",children:"No available equipment found for this machine type"}),o.jsxs("div",{className:"mt-4",children:[o.jsx(W,{type:"button",variant:"default",onClick:G,leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),disabled:!N.machineType||!N.selectedEquipment.id,className:"w-full",size:"default",children:N.selectedMachines.length===0?"Add Machine to Quotation":"Add Another Machine"}),N.selectedMachines.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 text-center mt-2",children:["You have added ",N.selectedMachines.length," machine",N.selectedMachines.length>1?"s":""," to this quotation"]})]})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("workingHours"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(On,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Working Hours"})]}),g.workingHours?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.workingHours&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(be,{label:"Shift",options:FV,value:N.shift,onChange:O=>{C(V=>({...V,shift:O}))}}),o.jsxs("div",{children:[o.jsx(pe,{type:"number",label:"Number of Hours",value:N.workingHours===0?"":N.workingHours,onChange:O=>{const V=O.target.value;if(V==="")C(D=>({...D,workingHours:0}));else if(/^\d+$/.test(V)){const D=parseInt(V,10);D>=1&&D<=24&&C(z=>({...z,workingHours:D}))}},required:!0,min:"1",max:"24",placeholder:"Enter hours (default: 8)",step:"1",autoComplete:"off"}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(On,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Standard single shift duration is 8 hours"})]})]}),o.jsx(be,{label:"Day/Night",options:$V,value:N.dayNight,onChange:O=>C(V=>({...V,dayNight:O}))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"sundayWorking",checked:N.sundayWorking==="yes",onChange:O=>C(V=>({...V,sundayWorking:O.target.checked?"yes":"no"})),className:"rounded border-gray-300"}),o.jsx("label",{htmlFor:"sundayWorking",className:"text-sm",children:"Sunday Working"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("accommodation"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ll,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Accommodation"})]}),g.accommodation?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.accommodation&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx(pe,{type:"number",label:"Number of Resources",value:N.foodResources||"",onChange:O=>C(V=>({...V,foodResources:O.target.value===""?0:Number(O.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: 2500/month per resource"})]}),o.jsxs("div",{children:[o.jsx(pe,{type:"number",label:"Number of Resources",value:N.accomResources||"",onChange:O=>C(V=>({...V,accomResources:O.target.value===""?0:Number(O.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: 4000/month per resource"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("mobDemob"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(sn,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Mob - Demob"})]}),g.mobDemob?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.mobDemob&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx("div",{children:o.jsx(pe,{type:"number",label:"Distance to Site (km)",value:N.siteDistance||"",onChange:O=>C(V=>({...V,siteDistance:O.target.value===""?0:Number(O.target.value)})),placeholder:"Enter distance in kilometers"})}),o.jsx("div",{children:o.jsx(pe,{type:"number",label:"Trailer Cost",value:N.mobDemob||"",onChange:O=>C(V=>({...V,mobDemob:O.target.value===""?0:Number(O.target.value)})),placeholder:"Enter additional trailer charges"})}),o.jsxs("div",{children:[o.jsx(pe,{type:"number",label:"Mob Relaxation",value:N.mobRelaxation||"",onChange:O=>C(V=>({...V,mobRelaxation:O.target.value===""?0:Number(O.target.value)})),placeholder:"Enter relaxation value (X%)"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Enter percentage value for discount on distance cost"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>q("additional"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ul,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Additional Parameters"})]}),g.additional?o.jsx(Er,{className:"h-5 w-5 text-gray-400"}):o.jsx($s,{className:"h-5 w-5 text-gray-400"})]})}),g.additional&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(be,{label:"Usage",options:zV,value:N.usage,onChange:O=>C(V=>({...V,usage:O}))}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(op,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Usage rates: Normal - 5% of base rate | Heavy - 10% of base rate"})]}),o.jsx(be,{label:"Deal Type",options:Fc,value:N.dealType||Fc[0].value,onChange:O=>C(V=>({...V,dealType:O||Fc[0].value}))}),o.jsx(pe,{type:"number",label:"Extra Commercial Charges",value:N.extraCharge||"",onChange:O=>C(V=>({...V,extraCharge:O.target.value===""?0:Number(O.target.value)})),placeholder:"Enter extra charges"}),o.jsx(be,{label:"Risk Factor",options:BV,value:N.riskFactor,onChange:O=>C(V=>({...V,riskFactor:O}))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Incidental Charges"}),o.jsx("div",{className:"space-y-2",children:$c.map(O=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:N.incidentalCharges.includes(O.value),onChange:V=>{C(D=>({...D,incidentalCharges:V.target.checked?[...D.incidentalCharges,O.value]:D.incidentalCharges.filter(z=>z!==O.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:O.label})]},O.value))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Other Factors"}),o.jsx("div",{className:"space-y-2",children:VV.map(O=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:N.otherFactors.includes(O.value),onChange:V=>{C(D=>({...D,otherFactors:V.target.checked?[...D.otherFactors,O.value]:D.otherFactors.filter(z=>z!==O.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[O.label,O.value==="rigger"&&" (40,000)",O.value==="helper"&&" (12,000)"]})]},O.value))})]})]})]})]}),o.jsxs("div",{className:"col-span-5 space-y-6 sticky top-6",children:[o.jsxs(ee,{className:"shadow-lg border-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80",children:[o.jsx(fe,{className:"border-b border-gray-100 pb-6",children:o.jsxs(me,{className:"text-xl font-semibold flex items-center gap-2",children:[o.jsx(DA,{className:"w-5 h-5 text-primary-500"}),"Quotation Summary"]})}),o.jsxs(se,{children:[x>0&&!N.selectedMachines.length&&o.jsxs("div",{className:"mb-6 p-4 bg-primary-50/50 rounded-xl border border-primary-100",children:[o.jsx("div",{className:"text-sm font-medium text-primary-900 mb-2",children:"Equipment Details"}),o.jsxs("div",{className:"text-2xl font-bold text-primary-700",children:["",Se(x).replace("",""),o.jsx("span",{className:"text-base font-medium text-primary-600 ml-1",children:N.orderType==="monthly"?"/month":"/hr"})]}),o.jsxs("div",{className:"text-sm text-primary-600 mt-1",children:[N.orderType.charAt(0).toUpperCase()+N.orderType.slice(1)," Rate"]}),N.orderType==="monthly"&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{children:"Hourly Rate: "}),o.jsxs("span",{className:"font-medium ml-1",children:["",Se(x/26/(parseFloat(N.workingHours.toString())||8)).replace("",""),"/hr"]})]})}),N.numberOfDays&&o.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Total Days:"}),o.jsx("span",{className:"font-medium",children:Number(N.numberOfDays)>25?"26 (Monthly)":N.numberOfDays})]}),N.orderType!=="monthly"&&o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Hours per Day:"}),o.jsx("span",{className:"font-medium",children:N.workingHours===0?8:N.workingHours||8})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:"Order Type:"}),o.jsx("span",{className:"font-medium",children:N.orderType.charAt(0).toUpperCase()+N.orderType.slice(1)})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[N.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",N.selectedMachines.length,")"]}),o.jsxs("div",{className:"space-y-2 bg-primary-50 p-3 rounded-md border border-primary-100",children:[N.selectedMachines.map(O=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:O.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[O.quantity," unit",O.quantity>1?"s":"","  ",Se(O.baseRate),N.orderType==="monthly"?"/month":"/hr"]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"font-semibold text-primary-700",children:[Se(O.baseRate*O.quantity),o.jsx("span",{className:"text-xs ml-1",children:N.orderType==="monthly"?"/month":"/hr"})]})})]},O.id)),o.jsxs("div",{className:"flex justify-between items-center p-2 mt-2 border-t border-primary-200",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total machines value"}),o.jsxs("div",{className:"font-semibold text-primary-700",children:[Se(N.selectedMachines.reduce((O,V)=>O+V.baseRate*V.quantity,0)),o.jsx("span",{className:"text-xs ml-1",children:N.orderType==="monthly"?"/month":"/hr"})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(On,{className:"w-4 h-4 text-primary-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Working Cost"})]}),o.jsx("span",{className:"font-semibold",children:Se(E.workingCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?E.workingCost/E.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zn,{className:"w-4 h-4 text-success-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Food & Accommodation"})]}),o.jsx("span",{className:"font-semibold",children:Se(E.foodAccomCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-success-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?E.foodAccomCost/E.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sn,{className:"w-4 h-4 text-warning-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Mob/Demob Cost"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(Xs,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Cost calculated for each machine based on distance, running cost per km, and trailer cost."})]})]}),o.jsx("span",{className:"font-semibold",children:Se(E.mobDemobCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-warning-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?E.mobDemobCost/E.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(op,{className:"w-4 h-4 text-error-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Risk & Usage"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(Xs,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Risk factor (5-15%) and usage load (5-10%) calculated for each machine based on its base rate and quantity."})]})]}),o.jsx("span",{className:"font-semibold",children:Se(E.riskAdjustment+E.usageLoadFactor)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-error-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?(E.riskAdjustment+E.usageLoadFactor)/E.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bd,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Extra Commercial Charges"})]}),o.jsx("span",{className:"font-semibold",children:Se(Number(N.extraCharge))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?Number(N.extraCharge)/E.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pi,{className:"w-4 h-4 text-indigo-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Incidental Charges"})]}),o.jsx("span",{className:"font-semibold",children:Se(N.incidentalCharges.reduce((O,V)=>{const D=$c.find(z=>z.value===V);return O+(D?D.amount:0)},0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?N.incidentalCharges.reduce((O,V)=>{const D=$c.find(z=>z.value===V);return O+(D?D.amount:0)},0)/E.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zn,{className:"w-4 h-4 text-cyan-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Other Factors"})]}),o.jsx("span",{className:"font-semibold",children:Se((N.otherFactors.includes("rigger")?Af:0)+(N.otherFactors.includes("helper")?Rf:0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-cyan-500 rounded-full transition-all duration-300",style:{width:`${E.totalAmount>0?((N.otherFactors.includes("rigger")?Af:0)+(N.otherFactors.includes("helper")?Rf:0))/E.totalAmount*100:.5}%`}})})]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{className:"font-medium",children:Se(E.totalAmount-E.gstAmount)})]}),N.includeGst&&o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"GST (18%)"}),o.jsx("span",{className:"font-medium",children:Se(E.gstAmount)})]}),o.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[o.jsx("span",{className:"text-lg font-semibold",children:"Total Amount"}),o.jsx("span",{className:"text-2xl font-bold text-primary-600",children:Se(E.totalAmount)})]})]})}),o.jsx("div",{className:"mt-6",children:o.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:N.includeGst,onChange:O=>C(V=>({...V,includeGst:O.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),o.jsx("div",{className:"text-sm text-gray-500",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1 order-2 sm:order-1",size:"default",children:"Cancel"}),o.jsxs("div",{className:"sm:flex-1 order-1 sm:order-2",children:[o.jsx(W,{type:"submit",disabled:m||N.selectedMachines.length===0&&!N.selectedEquipment.id,className:"w-full bg-primary-600 hover:bg-primary-700",leftIcon:m?o.jsx(On,{className:"animate-spin"}):o.jsx(xi,{}),size:"default",variant:"accent",children:m?"Saving...":r?"Update Quotation":"Create Quotation"}),N.selectedMachines.length===0&&!N.selectedEquipment.id&&o.jsx("div",{className:"mt-1 text-xs text-center text-amber-600",children:"Please add at least one machine"})]})]})]})]})]})]}),S.show&&o.jsx(lt,{title:S.title,description:S.description,variant:S.variant,isVisible:S.show,onClose:()=>k({show:!1,title:""})})]}):o.jsx("div",{className:"p-4 text-center text-gray-500",children:"Deal not found."})}function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function Vn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ke(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function at(e){Ke(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ud(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Pw(e,t){Ke(2,arguments);var n=at(e),s=Vn(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function qk(e,t){Ke(2,arguments);var n=at(e).getTime(),s=Vn(t);return new Date(n+s)}var WV=36e5;function Gk(e,t){Ke(2,arguments);var n=Vn(t);return qk(e,n*WV)}var HV={};function Ma(){return HV}function qV(e,t){var n,s,r,i,a,l,c,u;Ke(1,arguments);var d=Ma(),h=Vn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=at(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function GV(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function _w(e){Ke(1,arguments);var t=at(e);return t.setHours(0,0,0,0),t}function YV(e,t){Ke(2,arguments);var n=_w(e),s=_w(t);return n.getTime()===s.getTime()}function QV(e){return Ke(1,arguments),e instanceof Date||ud(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function KV(e){if(Ke(1,arguments),!QV(e)&&typeof e!="number")return!1;var t=at(e);return!isNaN(Number(t))}function XV(e,t){var n;Ke(1,arguments);var s=e||{},r=at(s.start),i=at(s.end),a=i.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var l=[],c=r;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=a;)l.push(at(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function JV(e,t){var n,s,r,i,a,l,c,u;Ke(1,arguments);var d=Ma(),h=Vn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=at(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function ZV(e,t){Ke(2,arguments);var n=Vn(t);return qk(e,-n)}var e8=864e5;function t8(e){Ke(1,arguments);var t=at(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),r=n-s;return Math.floor(r/e8)+1}function dd(e){Ke(1,arguments);var t=1,n=at(e),s=n.getUTCDay(),r=(s<t?7:0)+s-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function Yk(e){Ke(1,arguments);var t=at(e),n=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var r=dd(s),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=dd(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function n8(e){Ke(1,arguments);var t=Yk(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var s=dd(n);return s}var s8=6048e5;function r8(e){Ke(1,arguments);var t=at(e),n=dd(t).getTime()-n8(t).getTime();return Math.round(n/s8)+1}function hd(e,t){var n,s,r,i,a,l,c,u;Ke(1,arguments);var d=Ma(),h=Vn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=at(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Qk(e,t){var n,s,r,i,a,l,c,u;Ke(1,arguments);var d=at(e),h=d.getUTCFullYear(),f=Ma(),m=Vn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var x=hd(p,t),b=new Date(0);b.setUTCFullYear(h,0,m),b.setUTCHours(0,0,0,0);var w=hd(b,t);return d.getTime()>=x.getTime()?h+1:d.getTime()>=w.getTime()?h:h-1}function i8(e,t){var n,s,r,i,a,l,c,u;Ke(1,arguments);var d=Ma(),h=Vn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=Qk(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=hd(m,t);return p}var a8=6048e5;function o8(e,t){Ke(1,arguments);var n=at(e),s=hd(n,t).getTime()-i8(n,t).getTime();return Math.round(s/a8)+1}function Pe(e,t){for(var n=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return n+s}var Ls={y:function(t,n){var s=t.getUTCFullYear(),r=s>0?s:1-s;return Pe(n==="yy"?r%100:r,n.length)},M:function(t,n){var s=t.getUTCMonth();return n==="M"?String(s+1):Pe(s+1,2)},d:function(t,n){return Pe(t.getUTCDate(),n.length)},a:function(t,n){var s=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,n){return Pe(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Pe(t.getUTCHours(),n.length)},m:function(t,n){return Pe(t.getUTCMinutes(),n.length)},s:function(t,n){return Pe(t.getUTCSeconds(),n.length)},S:function(t,n){var s=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,s-3));return Pe(i,n.length)}},Di={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},l8={G:function(t,n,s){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return Ls.y(t,n)},Y:function(t,n,s,r){var i=Qk(t,r),a=i>0?i:1-i;if(n==="YY"){var l=a%100;return Pe(l,2)}return n==="Yo"?s.ordinalNumber(a,{unit:"year"}):Pe(a,n.length)},R:function(t,n){var s=Yk(t);return Pe(s,n.length)},u:function(t,n){var s=t.getUTCFullYear();return Pe(s,n.length)},Q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Pe(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Pe(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,s){var r=t.getUTCMonth();switch(n){case"M":case"MM":return Ls.M(t,n);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,s){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Pe(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,s,r){var i=o8(t,r);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):Pe(i,n.length)},I:function(t,n,s){var r=r8(t);return n==="Io"?s.ordinalNumber(r,{unit:"week"}):Pe(r,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ls.d(t,n)},D:function(t,n,s){var r=t8(t);return n==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Pe(r,n.length)},E:function(t,n,s){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Pe(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Pe(a,n.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Pe(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,s){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){var r=t.getUTCHours(),i;switch(r===12?i=Di.noon:r===0?i=Di.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){var r=t.getUTCHours(),i;switch(r>=17?i=Di.evening:r>=12?i=Di.afternoon:r>=4?i=Di.morning:i=Di.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Ls.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ls.H(t,n)},K:function(t,n,s){var r=t.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Pe(r,n.length)},k:function(t,n,s){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?s.ordinalNumber(r,{unit:"hour"}):Pe(r,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ls.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ls.s(t,n)},S:function(t,n){return Ls.S(t,n)},X:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Aw(a);case"XXXX":case"XX":return Vr(a);case"XXXXX":case"XXX":default:return Vr(a,":")}},x:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Aw(a);case"xxxx":case"xx":return Vr(a);case"xxxxx":case"xxx":default:return Vr(a,":")}},O:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Mw(a,":");case"OOOO":default:return"GMT"+Vr(a,":")}},z:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Mw(a,":");case"zzzz":default:return"GMT"+Vr(a,":")}},t:function(t,n,s,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return Pe(a,n.length)},T:function(t,n,s,r){var i=r._originalDate||t,a=i.getTime();return Pe(a,n.length)}};function Mw(e,t){var n=e>0?"-":"+",s=Math.abs(e),r=Math.floor(s/60),i=s%60;if(i===0)return n+String(r);var a=t;return n+String(r)+a+Pe(i,2)}function Aw(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Pe(Math.abs(e)/60,2)}return Vr(e,t)}function Vr(e,t){var n=t||"",s=e>0?"-":"+",r=Math.abs(e),i=Pe(Math.floor(r/60),2),a=Pe(r%60,2);return s+i+n+a}var Rw=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Kk=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},c8=function(t,n){var s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return Rw(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Rw(r,n)).replace("{{time}}",Kk(i,n))},u8={p:Kk,P:c8},d8=["D","DD"],h8=["YY","YYYY"];function f8(e){return d8.indexOf(e)!==-1}function m8(e){return h8.indexOf(e)!==-1}function Iw(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var p8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},g8=function(t,n,s){var r,i=p8[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function If(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,s=e.formats[n]||e.formats[e.defaultWidth];return s}}var x8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},y8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},v8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},b8={date:If({formats:x8,defaultWidth:"full"}),time:If({formats:y8,defaultWidth:"full"}),dateTime:If({formats:v8,defaultWidth:"full"})},w8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},j8=function(t,n,s,r){return w8[t]};function no(e){return function(t,n){var s=n!=null&&n.context?String(n.context):"standalone",r;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var N8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},S8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},C8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},k8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},E8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},D8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},T8=function(t,n){var s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},P8={ordinalNumber:T8,era:no({values:N8,defaultWidth:"wide"}),quarter:no({values:S8,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:no({values:C8,defaultWidth:"wide"}),day:no({values:k8,defaultWidth:"wide"}),dayPeriod:no({values:E8,defaultWidth:"wide",formattingValues:D8,defaultFormattingWidth:"wide"})};function so(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var a=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?M8(l,function(h){return h.test(a)}):_8(l,function(h){return h.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function _8(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function M8(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function A8(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var r=s[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(r.length);return{value:a,rest:l}}}var R8=/^(\d+)(th|st|nd|rd)?/i,I8=/\d+/i,O8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},L8={any:[/^b/i,/^(a|c)/i]},F8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$8={any:[/1/i,/2/i,/3/i,/4/i]},z8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},B8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},V8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},U8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},W8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},H8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q8={ordinalNumber:A8({matchPattern:R8,parsePattern:I8,valueCallback:function(t){return parseInt(t,10)}}),era:so({matchPatterns:O8,defaultMatchWidth:"wide",parsePatterns:L8,defaultParseWidth:"any"}),quarter:so({matchPatterns:F8,defaultMatchWidth:"wide",parsePatterns:$8,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:so({matchPatterns:z8,defaultMatchWidth:"wide",parsePatterns:B8,defaultParseWidth:"any"}),day:so({matchPatterns:V8,defaultMatchWidth:"wide",parsePatterns:U8,defaultParseWidth:"any"}),dayPeriod:so({matchPatterns:W8,defaultMatchWidth:"any",parsePatterns:H8,defaultParseWidth:"any"})},G8={code:"en-US",formatDistance:g8,formatLong:b8,formatRelative:j8,localize:P8,match:q8,options:{weekStartsOn:0,firstWeekContainsDate:1}},Y8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Q8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K8=/^'([^]*?)'?$/,X8=/''/g,J8=/[a-zA-Z]/;function ds(e,t,n){var s,r,i,a,l,c,u,d,h,f,m,p,x,b;Ke(2,arguments);var w=String(t),v=Ma(),g=(s=(r=void 0)!==null&&r!==void 0?r:v.locale)!==null&&s!==void 0?s:G8,j=Vn((i=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:v.firstWeekContainsDate)!==null&&a!==void 0?a:(u=v.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Vn((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:v.weekStartsOn)!==null&&f!==void 0?f:(x=v.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&h!==void 0?h:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!g.localize)throw new RangeError("locale must contain localize property");if(!g.formatLong)throw new RangeError("locale must contain formatLong property");var k=at(e);if(!KV(k))throw new RangeError("Invalid time value");var N=GV(k),C=ZV(k,N),E={firstWeekContainsDate:j,weekStartsOn:S,locale:g,_originalDate:k},P=w.match(Q8).map(function(L){var F=L[0];if(F==="p"||F==="P"){var $=u8[F];return $(L,g.formatLong)}return L}).join("").match(Y8).map(function(L){if(L==="''")return"'";var F=L[0];if(F==="'")return Z8(L);var $=l8[F];if($)return m8(L)&&Iw(L,t,String(e)),f8(L)&&Iw(L,t,String(e)),$(C,L,g.localize,E);if(F.match(J8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return L}).join("");return P}function Z8(e){var t=e.match(K8);return t?t[1].replace(X8,"'"):e}function eU(e,t){Ke(2,arguments);var n=at(e).getTime(),s=at(t.start).getTime(),r=at(t.end).getTime();if(!(s<=r))throw new RangeError("Invalid interval");return n>=s&&n<=r}const Ow=Array.from({length:15},(e,t)=>Gk(new Date().setHours(6,0,0,0),t));function tU(){const{user:e}=ze(),[t,n]=y.useState("week"),[s,r]=y.useState(new Date),[i,a]=y.useState([]),[l,c]=y.useState([]),[u,d]=y.useState([]),[h,f]=y.useState([]),[m,p]=y.useState(!0),[x,b]=y.useState(!1),[w,v]=y.useState(null),[g,j]=y.useState(null),[S,k]=y.useState(null),[N,C]=y.useState([]),[E,P]=y.useState(!1),L=Ps(),F=Qt(),[$,A]=y.useState({show:!1,title:""}),[B,q]=y.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),[I,T]=y.useState("");y.useEffect(()=>{R();const D=new URLSearchParams(L.search),z=D.get("dealId"),U=D.get("action"),X=D.get("customerName");if(z&&U==="schedule"){if(j(z),X){const _=decodeURIComponent(X);k(_),A({show:!0,title:`Deal won with ${_}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}H(z),F("/jobs",{replace:!0})}},[L]),y.useEffect(()=>{B.operatorId&&B.startDate&&B.endDate&&(O().some(U=>U.id===B.operatorId)||q(U=>({...U,operatorId:""})))},[B.startDate,B.endDate,i]);const R=async()=>{try{const[D,z,U,X,_]=await Promise.all([zd(),ex(),Ol(),Na(),sx()]);a(D),c(z),d(U);const Q=_.filter(Y=>Y.stage==="won").map(Y=>Y.leadId),ae=X.filter(Y=>Y.status==="converted"&&Q.includes(Y.id));if(f(ae),g)try{const Y=await $u(g);if(Y){q(Be=>{var ft;return{...Be,leadId:Y.leadId||"",location:((ft=Y.customer)==null?void 0:ft.address)||"",notes:Y.description||""}});const le=new Date,ke=new Date;ke.setDate(le.getDate()+7),q(Be=>({...Be,startDate:le.toISOString().slice(0,16),endDate:ke.toISOString().slice(0,16)}))}}catch(Y){console.error("Error fetching deal data:",Y)}}catch(D){console.error("Error fetching data:",D),ie("Error fetching data","error")}finally{p(!1)}},H=async D=>{var z,U,X,_,M;try{const Q=await $u(D);if(Q){const ae=new Date,Y=new Date;Y.setDate(ae.getDate()+7);const le=ae.toISOString().slice(0,16),ke=Y.toISOString().slice(0,16);j(D),(z=Q.customer)!=null&&z.name&&k(Q.customer.name),P(!0);try{const Be=await Fu(Q.leadId);if(Be&&Be.length>0){const ft=[];Be.forEach(As=>{if(As.selectedEquipment&&As.selectedEquipment.equipmentId){const Wn=l.find(Hn=>Hn.id===As.selectedEquipment.equipmentId);Wn&&!ft.some(Hn=>Hn.id===Wn.id)&&ft.push(Wn)}As.selectedMachines&&As.selectedMachines.length>0&&As.selectedMachines.forEach(Wn=>{if(Wn.equipmentId){const Hn=l.find(ji=>ji.id===Wn.equipmentId);Hn&&!ft.some(ji=>ji.id===Hn.id)&&ft.push(Hn)}})}),C(ft),ft.length>0?q({leadId:Q.leadId,equipmentId:ft[0].id,operatorId:"",startDate:le,endDate:ke,location:((U=Q.customer)==null?void 0:U.address)||"",notes:Q.description||""}):q({leadId:Q.leadId,equipmentId:"",operatorId:"",startDate:le,endDate:ke,location:((X=Q.customer)==null?void 0:X.address)||"",notes:Q.description||""})}else q({leadId:Q.leadId,equipmentId:"",operatorId:"",startDate:le,endDate:ke,location:((_=Q.customer)==null?void 0:_.address)||"",notes:Q.description||""})}catch(Be){console.error("Error fetching quotations:",Be),q({leadId:Q.leadId,equipmentId:"",operatorId:"",startDate:le,endDate:ke,location:((M=Q.customer)==null?void 0:M.address)||"",notes:Q.description||""})}finally{P(!1)}b(!0)}else ie("Deal not found","error")}catch(Q){console.error("Error fetching deal:",Q),ie("Error fetching deal","error")}},G=async()=>{try{if(!B.leadId||!B.equipmentId||!B.operatorId||!B.startDate||!B.endDate||!B.location){ie("Please fill in all required fields","error");return}let D="";const z=h.find(U=>U.id===B.leadId);if(z)D=z.customerName;else if(S)D=S;else{ie("Customer information is missing","error");return}await oS({title:"Scheduled Job",leadId:B.leadId,customerId:(z==null?void 0:z.customerId)||"",customerName:D,equipmentIds:[B.equipmentId],operatorIds:[B.operatorId],scheduledStartDate:B.startDate,scheduledEndDate:B.endDate,location:B.location,status:"scheduled",notes:B.notes,dealId:g||void 0,createdBy:(e==null?void 0:e.id)||""}),await R(),b(!1),Z(),j(null),k(null),ie("Job scheduled successfully","success")}catch(D){console.error("Error creating job:",D),ie("Error creating job","error")}},Z=()=>{q({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),C([])},ie=(D,z="success")=>{A({show:!0,title:D,variant:z}),setTimeout(()=>A({show:!1,title:""}),3e3)},ce=(D,z,U,X)=>i.filter(M=>{const Q=new Date(M.scheduledStartDate),ae=new Date(M.scheduledEndDate),Y=new Date(U),le=new Date(X);return(M.equipmentIds.includes(D)||M.operatorIds.includes(z))&&M.status!=="completed"&&M.status!=="cancelled"&&(Y>=Q&&Y<ae||le>Q&&le<=ae||Y<=Q&&le>=ae)}),O=()=>{if(!B.startDate||!B.endDate)return u;const D=new Date(B.startDate),z=new Date(B.endDate);return u.filter(U=>i.filter(_=>{const M=new Date(_.scheduledStartDate),Q=new Date(_.scheduledEndDate);return _.operatorIds.includes(U.id)&&_.status!=="completed"&&_.status!=="cancelled"&&(D>=M&&D<Q||z>M&&z<=Q||D<=M&&z>=Q)}).length===0)},V=()=>{const D=qV(s,{weekStartsOn:1}),z=JV(s,{weekStartsOn:1}),U=XV({start:D,end:z});return o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[o.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[o.jsx("div",{className:"h-12"}),Ow.map((X,_)=>o.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-900",children:ds(X,"h:mm a")},_))]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[U.map((X,_)=>o.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-gray-900",children:ds(X,"EEE")}),o.jsx("div",{className:"text-xs text-gray-700",children:ds(X,"MMM d")})]})},_)),Ow.map((X,_)=>o.jsx(ne.Fragment,{children:U.map((M,Q)=>{const ae=new Date(M.setHours(X.getHours(),X.getMinutes())),Y=i.filter(le=>{const ke=new Date(le.scheduledStartDate),Be=new Date(le.scheduledEndDate);return(!I||le.operatorIds.includes(I))&&YV(ae,ke)&&eU(ae,{start:ke,end:Be})});return o.jsx("div",{className:`border-b border-r border-gray-100 relative ${_===0?"border-t":""} ${Q===0?"border-l":""}`,style:{minHeight:`${Math.max(80,Y.length*44+8)}px`},onClick:()=>{b(!0),q(le=>({...le,startDate:ae.toISOString().slice(0,16),endDate:Gk(ae,2).toISOString().slice(0,16)}))},children:Y.map((le,ke)=>o.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:`${4+ke*44}px`,minHeight:"40px",zIndex:10+ke,right:ke>0?`${ke*8}px`:"4px"},onClick:Be=>{Be.stopPropagation(),v(le)},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-sm truncate",children:le.customerName}),o.jsx(Ul,{status:le.status,className:"ml-2"})]}),o.jsxs("div",{className:"text-xs text-black mt-1",children:[ds(new Date(le.scheduledStartDate),"h:mm a")," - ",ds(new Date(le.scheduledEndDate),"h:mm a")]})]},le.id))},`${_}-${Q}`)})},_))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-900",children:"Loading job scheduling data..."})]}):o.jsxs("div",{className:"space-y-6 font-sans",children:[o.jsxs("div",{className:"flex flex-wrap items-center mb-2 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>r(D=>Pw(D,-7)),children:o.jsx(AA,{className:"h-4 w-4"})}),o.jsx("h2",{className:"text-lg font-semibold font-sans",children:ds(s,"MMMM yyyy")}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>r(D=>Pw(D,7)),children:o.jsx(RA,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end min-w-0",children:[o.jsx(be,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:D=>n(D),className:"w-24 min-w-0"}),o.jsx(be,{label:"Operator",options:[{value:"",label:"All Operators"},...u.map(D=>({value:D.id,label:D.name}))],value:I,onChange:T,className:"w-32 min-w-0"}),o.jsx(W,{size:"lg",className:"ml-2 font-bold px-6 py-2",onClick:()=>{h.length===0?A({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):b(!0)},leftIcon:o.jsx(rs,{size:20}),children:"New Job"})]})]}),o.jsx(ee,{children:o.jsxs(se,{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Schedule"})}),m?o.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-sans",children:"No Won Deals Yet"}),o.jsx("p",{className:"text-gray-700 font-sans",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):V()]})}),o.jsxs(it,{isOpen:x,onClose:()=>{b(!1),Z()},title:g?`Schedule Job for Won Deal: ${S||""}`:"Schedule Job for Won Deal",size:"lg",children:[o.jsxs("div",{className:"space-y-6",children:[g&&o.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[o.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),o.jsxs("p",{className:"text-green-700",children:[o.jsx("span",{className:"font-medium",children:"Customer:"})," ",S||"Unknown customer"]}),o.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),o.jsx(be,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...Array.isArray(h)?h.map(D=>({value:D.id,label:`${D.customerName} - Won Deal`})):[]],value:B.leadId,onChange:D=>{q(z=>({...z,leadId:D})),D?(async()=>{P(!0);try{const U=await Fu(D);if(U&&U.length>0){const X=[];U.forEach(_=>{if(_.selectedEquipment&&_.selectedEquipment.equipmentId){const M=l.find(Q=>Q.id===_.selectedEquipment.equipmentId);M&&!X.some(Q=>Q.id===M.id)&&X.push(M)}_.selectedMachines&&_.selectedMachines.length>0&&_.selectedMachines.forEach(M=>{if(M.equipmentId){const Q=l.find(ae=>ae.id===M.equipmentId);Q&&!X.some(ae=>ae.id===Q.id)&&X.push(Q)}})}),C(X),X.length>0&&q(_=>({..._,equipmentId:X[0].id}))}}catch(U){console.error("Error loading equipment for lead:",U)}finally{P(!1)}})():(C([]),q(z=>({...z,equipmentId:""})))},required:!0,className:"text-black"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(be,{label:"Equipment",options:N.length>0&&g?[{value:"",label:"-- Select deal-specific equipment --"},...Array.isArray(N)?N.map(D=>({value:D.id,label:`${D.name} (From Deal)`})):[]]:[{value:"",label:"-- Select equipment --"},...Array.isArray(l)?l.map(D=>({value:D.id,label:D.name})):[]],value:B.equipmentId,onChange:D=>q(z=>({...z,equipmentId:D})),required:!0,className:"text-black"}),E?o.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):N.length>0?o.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[N.length," equipment item",N.length!==1?"s":""," from deal quotation",N.length!==1?"s":""]}):B.leadId?o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),o.jsx(be,{label:"Operator",options:[{value:"",label:"-- Select operator --"},...O().map(D=>({value:D.id,label:D.name}))],value:B.operatorId,onChange:D=>q(z=>({...z,operatorId:D})),required:!0,className:"text-black"}),B.startDate&&B.endDate&&o.jsx("p",{className:"mt-1 text-xs text-gray-600",children:(()=>{const D=O(),z=u.length,U=z-D.length;return U===0?`All ${z} operators are available`:D.length===0?"No operators available for this time slot":`${D.length} of ${z} operators available (${U} busy)`})()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Ee,{type:"datetime-local",label:"Start Date & Time",value:B.startDate,onChange:D=>q(z=>({...z,startDate:D.target.value})),required:!0,className:"text-black"}),o.jsx(Ee,{type:"datetime-local",label:"End Date & Time",value:B.endDate,onChange:D=>q(z=>({...z,endDate:D.target.value})),required:!0,className:"text-black"})]}),o.jsx(Ee,{label:"Location",value:B.location,onChange:D=>q(z=>({...z,location:D.target.value})),required:!0,className:"text-black"}),o.jsx(Dn,{label:"Notes",value:B.notes,onChange:D=>q(z=>({...z,notes:D.target.value})),rows:4,className:"text-black"}),B.equipmentId&&B.operatorId&&B.startDate&&B.endDate&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[o.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const D=ce(B.equipmentId,B.operatorId,B.startDate,B.endDate);return D.length>0?o.jsxs("div",{className:"text-error-600",children:[o.jsx("p",{children:"Conflicts found:"}),o.jsx("ul",{className:"list-disc list-inside text-sm",children:D.map(z=>o.jsxs("li",{children:[z.customerName," - ",ds(new Date(z.scheduledStartDate),"MMM d, h:mm a")]},z.id))})]}):o.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(W,{variant:"outline",onClick:()=>{b(!1),Z()},children:"Cancel"}),o.jsx(W,{onClick:G,variant:"accent",children:"Schedule Job"})]})]}),o.jsx(it,{isOpen:!!w,onClose:()=>v(null),title:"Job Details",size:"lg",children:w&&o.jsx(nU,{selectedJob:w})}),$.show&&o.jsx(lt,{title:$.title,description:$.description,variant:$.variant,isVisible:$.show,duration:3e3,onClose:()=>A({show:!1,title:""})})]})}function nU({selectedJob:e}){const[t,n]=ne.useState(""),[s,r]=ne.useState("");return ne.useEffect(()=>{async function i(){try{const a=await Ji.getJobEquipment(e.id);if(!a||a.length===0){n("No equipment assigned");return}const l=[];for(const c of a){const u=await Zg(c.equipment_id);u&&u.name&&l.push(u.name)}n(l.length>0?l.join(", "):"No equipment assigned")}catch(a){console.error("Error fetching equipment names:",a),n("Error loading equipment")}}i()},[e.id]),ne.useEffect(()=>{async function i(){try{const a=await Ji.getJobOperators(e.id);if(!a||a.length===0){r("No operator assigned");return}const l=[];for(const c of a){const d=(await Ol()).find(h=>h.id===c.operator_id);d&&d.name&&l.push(d.name)}r(l.length>0?l.join(", "):"No operator assigned")}catch(a){console.error("Error fetching operator names:",a),r("Error loading operators")}}i()},[e.id]),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Customer"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.customerName,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Status"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.status,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Equipment"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:t,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Operator"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:s,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Start Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:ds(new Date(e.scheduledStartDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"End Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:ds(new Date(e.scheduledEndDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Location"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.location,disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Notes"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.notes||"No notes",disabled:!0,readOnly:!0})]})]})})}function sU(){const[e,t]=y.useState([]),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState(!0),[c,u]=y.useState(null);y.useEffect(()=>{d()},[]);const d=async()=>{try{l(!0),u(null);const[h,f,m]=await Promise.all([Ji.getAllJobs(),Ji.getAllEquipment(),Ji.getAllOperators()]);t(h),s(f),i(m)}catch(h){u(h instanceof Error?h.message:"An error occurred"),console.error("Error loading data:",h)}finally{l(!1)}};return a?o.jsx("div",{className:"p-4",children:"Loading job data..."}):c?o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",c]}),o.jsx(W,{onClick:d,children:"Try Again"})]}):o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Job Scheduling System"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Jobs"}),o.jsx("p",{className:"text-2xl font-bold",children:e.length})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Equipment"}),o.jsx("p",{className:"text-2xl font-bold",children:n.length})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Operators"}),o.jsx("p",{className:"text-2xl font-bold",children:r.length})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Recent Jobs"}),e.length===0?o.jsx("p",{className:"text-gray-500",children:"No jobs found."}):o.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.title}),o.jsx("p",{className:"text-sm text-gray-600",children:h.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:h.location})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="in_progress"?"bg-blue-100 text-blue-800":h.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status})]},h.id))})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Equipment"}),n.length===0?o.jsx("p",{className:"text-gray-500",children:"No equipment found."}):o.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.type})]}),o.jsxs("p",{className:"text-sm font-medium",children:["$",h.baseRate,"/day"]})]},h.id))})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Operators"}),r.length===0?o.jsx("p",{className:"text-gray-500",children:"No operators found."}):o.jsx("div",{className:"space-y-2",children:r.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.specialization})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.availability==="available"?"bg-green-100 text-green-800":h.availability==="assigned"?"bg-blue-100 text-blue-800":h.availability==="on_leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.availability||"available"})]},h.id))})]})})]})]})}function rU(){const[e,t]=y.useState("loading"),[n,s]=y.useState("");y.useEffect(()=>{r()},[]);const r=async()=>{try{t("loading"),s("");const i=await fetch("http://localhost:3001/api/health");i.ok?t("success"):(t("error"),s(`API returned status ${i.status}`))}catch(i){t("error"),s(i instanceof Error?i.message:"Unknown error")}};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Job Scheduling System Test"}),o.jsx("p",{className:"text-gray-600",children:"Testing the complete job scheduling implementation"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(ee,{children:o.jsx(se,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"API Connection Status"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[e==="loading"&&"Testing API connection...",e==="success"&&"API connection successful",e==="error"&&`API connection failed: ${n}`]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${e==="loading"?"bg-yellow-500":e==="success"?"bg-green-500":"bg-red-500"}`}),o.jsx(W,{onClick:r,size:"sm",children:"Test Again"})]})]})})})}),e==="success"&&o.jsx(sU,{}),e==="error"&&o.jsx(ee,{children:o.jsx(se,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"Connection Error"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Please make sure the backend server is running on port 3001"}),o.jsx(W,{onClick:r,children:"Retry Connection"})]})})})]})}const iU=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function aU(){const{user:e}=ze(),[t,n]=y.useState(""),[s,r]=y.useState(""),[i,a]=y.useState(""),[l,c]=y.useState(""),[u,d]=y.useState([]),[h,f]=y.useState([]),[m,p]=y.useState(""),[x,b]=y.useState(!1),[w,v]=y.useState(null),[g,j]=y.useState([]),[S,k]=y.useState(!0),[N,C]=y.useState({show:!1,title:""}),E=y.useRef(null);y.useEffect(()=>{(async()=>{try{const H=await NS();j(H),k(!1)}catch(H){console.error("Error fetching site assessments:",H),I("Error loading site assessments","error"),k(!1)}})()},[]);const P=R=>{const Z=Array.from(R.target.files||[]).filter(ie=>{const ce=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(ie.type),O=ie.size<=10*1024*1024;return!ce||!O?(I("Invalid file",`${ie.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(ie=>({id:Math.random().toString(36).substring(2,9),file:ie,preview:URL.createObjectURL(ie),annotations:[]}));d(ie=>[...ie,...Z])},L=R=>{R.preventDefault();const H=Array.from(R.dataTransfer.files),G=E.current;if(G){const Z=new DataTransfer;H.forEach(ce=>Z.items.add(ce)),G.files=Z.files;const ie=new Event("change",{bubbles:!0});G.dispatchEvent(ie)}},F=R=>{R.preventDefault()},$=R=>{d(H=>{const G=H.filter(Z=>Z.id!==R);return H.forEach(Z=>{Z.id===R&&URL.revokeObjectURL(Z.preview)}),G})},A=R=>{f(H=>H.find(Z=>Z.id===R.id)?H.filter(Z=>Z.id!==R.id):[...H,{...R}])},B=(R,H)=>{f(G=>G.map(Z=>Z.id===R?{...Z,notes:H}:Z))},q=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){I("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(R=>setTimeout(R,1e3)),I("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{I("Error sending link","Please try again later","error")}},I=(R,H,G="success")=>{C({show:!0,title:R,description:H,variant:G}),setTimeout(()=>C({show:!1,title:""}),3e3)},T=async()=>{if(!e){I("Error","You need to be logged in to submit a site assessment","error");return}if(!t){I("Missing title","Please provide a title for the site assessment","warning");return}if(!i){I("Missing location","Please provide the site location","warning");return}if(u.length===0){I("Missing files","Please upload at least one site photo or video","warning");return}try{const R=u.filter(O=>O.file.type.startsWith("image/")).map(O=>`mock-url-${O.id}`),H=u.filter(O=>O.file.type.startsWith("video/")).map(O=>`mock-url-${O.id}`),G=h.map(O=>O.id),Z=h.filter(O=>O.notes).map(O=>`${O.label}: ${O.notes}`).join(`
`),ie={title:t,description:s,customerId:l||"unknown",location:i,constraints:G,notes:Z,images:R,videos:H,createdBy:e.id},ce=await SS(ie);j(O=>[...O,ce]),n(""),r(""),c(""),a(""),d([]),f([]),p(""),I("Site assessment submitted successfully",void 0,"success")}catch(R){console.error("Error submitting site assessment:",R),I("Error submitting assessment","Please try again later","error")}};return ne.useEffect(()=>()=>{u.forEach(R=>{URL.revokeObjectURL(R.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Upload Media"})}),o.jsxs(se,{children:[o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:L,onDragOver:F,children:[o.jsx("input",{ref:E,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:P}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(WS,{className:"h-12 w-12 text-gray-400"})}),o.jsxs("div",{children:[o.jsx(W,{variant:"outline",onClick:()=>{var R;return(R=E.current)==null?void 0:R.click()},children:"Choose Files"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&o.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(R=>o.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[R.file.type.startsWith("image/")?o.jsx("img",{src:R.preview,alt:"Preview",className:"w-full h-32 object-cover"}):o.jsx("video",{src:R.preview,className:"w-full h-32 object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[R.file.type.startsWith("image/")&&o.jsx(W,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{v(R),b(!0)},children:o.jsx(Y0,{size:16})}),o.jsx(W,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>$(R.id),children:o.jsx(Sa,{size:16})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:R.file.name})]},R.id))})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Site Constraints"})}),o.jsx(se,{children:o.jsx("div",{className:"space-y-4",children:iU.map(R=>{var H;return o.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(G=>G.id===R.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(G=>G.id===R.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>A(R),children:h.some(G=>G.id===R.id)&&o.jsx(MA,{className:"text-white h-4 w-4"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"font-medium text-gray-900",children:R.label}),R.description&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:R.description}),h.some(G=>G.id===R.id)&&o.jsx(Dn,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((H=h.find(G=>G.id===R.id))==null?void 0:H.notes)||"",onChange:G=>B(R.id,G.target.value),rows:2})]})]})},R.id)})})})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Remote Site Assessment"})}),o.jsx(se,{children:o.jsxs("div",{className:"max-w-md",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ee,{type:"tel",placeholder:"Enter phone number",value:m,onChange:R=>p(R.target.value)}),o.jsx(W,{onClick:q,leftIcon:o.jsx(cl,{size:16}),children:"Send Link"})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Site Details"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx(Ee,{value:t,onChange:R=>n(R.target.value),placeholder:"Site assessment title",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),o.jsx(Ee,{value:l,onChange:R=>c(R.target.value),placeholder:"Enter customer ID if available"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),o.jsx(Ee,{value:i,onChange:R=>a(R.target.value),placeholder:"Enter site address/location",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx(Dn,{value:s,onChange:R=>r(R.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsxs(W,{onClick:T,className:"flex items-center gap-2",children:[o.jsx(cl,{size:16}),"Submit Assessment"]})}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Assessment Summary"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(R=>o.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[R.file.type.startsWith("image/")?o.jsx(PA,{size:14}):o.jsx(Y0,{size:14}),o.jsx("span",{className:"truncate max-w-[200px]",children:R.file.name})]},R.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?o.jsx("div",{className:"space-y-3",children:h.map(R=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[o.jsx(US,{size:14}),R.label]}),R.notes&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:R.notes})]},R.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),o.jsx(Px,{children:x&&w&&o.jsx(qs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:o.jsxs(qs.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{b(!1),v(null)},children:o.jsx(Wd,{size:20})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:w.preview,alt:"Annotation",className:"max-w-full h-auto"})}),o.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{b(!1),v(null)},children:"Cancel"}),o.jsx(W,{onClick:()=>{b(!1),v(null),I("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),N.show&&o.jsx(lt,{title:N.title,description:N.description,variant:N.variant,isVisible:N.show,onClose:()=>C({show:!1,title:""})})]})}const oU=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function lU(){const{id:e}=Qg(),{user:t}=ze(),[n,s]=y.useState(null),[r,i]=y.useState(!0),[a,l]=y.useState(oU),[c,u]=y.useState(""),[d,h]=y.useState(!1),[f,m]=y.useState(""),[p,x]=y.useState(""),[b,w]=y.useState(!1),[v,g]=y.useState(null),[j,S]=y.useState({show:!1,title:""});y.useEffect(()=>{e&&k()},[e]);const k=async()=>{try{const F=await aS(e);s(F),g({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch(F){console.error("Error fetching job details:",F),L("Error fetching job details","error")}finally{i(!1)}},N=F=>{l($=>$.map(A=>A.id===F?{...A,checked:!A.checked}:A))},C=async()=>{try{await new Promise(F=>setTimeout(F,1e3)),L("Feedback request sent successfully","success")}catch{L("Error sending feedback request","error")}},E=async()=>{if(!f||!p){L("Please fill in all discount request fields","error");return}try{await new Promise(F=>setTimeout(F,1e3)),L("Discount request submitted for approval","success")}catch{L("Error submitting discount request","error")}},P=()=>{L("Summary downloaded successfully","success")},L=(F,$="success")=>{S({show:!0,title:F,variant:$}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):r?o.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),o.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),o.jsx(W,{variant:"outline",leftIcon:o.jsx(ax,{size:16}),onClick:P,children:"Download Summary"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Job Details"})}),o.jsx(se,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),o.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(Vd,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:n.location})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(sn,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(dl,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Mike Operator"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),o.jsxs("div",{className:"mt-1 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:new Date(n.startDate).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(On,{className:"h-5 w-5 text-gray-400"}),o.jsxs("span",{children:[new Date(n.startDate).toLocaleTimeString()," - ",new Date(n.endDate).toLocaleTimeString()]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Safety Observations"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(F=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${F.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>N(F.id),children:F.checked&&o.jsx(dr,{className:"text-white h-4 w-4"})}),o.jsx("span",{className:"text-gray-700",children:F.label})]},F.id))}),o.jsx(Dn,{label:"Safety Notes",value:c,onChange:F=>u(F.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(me,{children:"Customer Feedback"}),o.jsx(W,{variant:"outline",leftIcon:o.jsx(cl,{size:16}),onClick:C,children:"Request Feedback"})]})}),o.jsx(se,{children:v?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex",children:[1,2,3,4,5].map(F=>o.jsx("svg",{className:`h-5 w-5 ${F<=v.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},F))}),o.jsx("span",{className:"text-lg font-medium",children:v.rating})]}),o.jsx("p",{className:"text-gray-600",children:v.comments}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(v.submittedAt).toLocaleDateString()]})]}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Discount Request"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"requestDiscount",checked:d,onChange:F=>h(F.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&o.jsxs("div",{className:"space-y-4",children:[o.jsx(Dn,{label:"Reason for Discount",value:f,onChange:F=>m(F.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),o.jsx("div",{className:"w-48",children:o.jsx(Ee,{type:"number",label:"Discount Percentage",value:p,onChange:F=>x(F.target.value),min:"0",max:"100",placeholder:"Enter %"})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(W,{onClick:E,children:"Submit for Approval"})})]})]})})]}),j.show&&o.jsx(lt,{title:j.title,variant:j.variant,isVisible:j.show,onClose:()=>S({show:!1,title:""})})]}):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const Of="http://localhost:3001/api",cU=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},ro=async(e,t={})=>{var n,s;try{console.log(` API Call: ${t.method||"GET"} ${Of}${e}`);let r="";try{r=cU()}catch(c){throw c}const i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers||{}},a=await fetch(`${Of}${e}`,{...t,headers:i});if(console.log(` API Response: ${a.status} ${a.statusText} for ${e}`),e==="/quotations"){const c=a.clone();try{const u=await c.json();if(console.log(` Quotations API Response Data (${e}):`,u),u&&u.length>0){console.log(" First quotation details:",{id:u[0].id,customerName:u[0].customerName,customerId:u[0].customerId,customerContact:JSON.stringify(u[0].customerContact).substring(0,100),selectedEquipment:u[0].selectedEquipment?`${u[0].selectedEquipment.name||"Unnamed"} (${u[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const d=u[0].selectedEquipment&&u[0].selectedEquipment.name,h=u[0].selectedMachines&&Array.isArray(u[0].selectedMachines)&&u[0].selectedMachines.length>0;console.log(" Equipment data check:",{hasEquipment:!!d,hasMachines:!!h,machineCount:h?u[0].selectedMachines.length:0,firstMachine:h?u[0].selectedMachines[0].name:"N/A"});const f=!!u[0].customerId,m=!!u[0].customerName,p=u[0].customerContact&&typeof u[0].customerContact=="object"&&Object.keys(u[0].customerContact).length>0;console.log(" Customer data check:",{hasCustomerId:f,hasCustomerName:m,hasCustomerContact:p,customerType:p?typeof u[0].customerContact:"N/A"})}}catch(u){console.error("Error parsing response data:",u)}}if(!a.ok){let c=`API Error: ${a.status} ${a.statusText}`;const u=a.headers.get("content-type");console.error(`API Error: ${a.status} ${a.statusText} for ${Of}${e}`),console.error("Response Headers:",{"content-type":u,"content-length":a.headers.get("content-length")});try{if(u&&u.includes("application/json")){const d=await a.json();if(c=d.error||c,d.details&&(c+=` - ${d.details}`),console.error("API Error JSON:",d),a.status===401)throw console.warn(" Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((s=t.headers)==null?void 0:s["X-Bypass-Auth"])||"Not present"},environment:"production",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const d=await a.text();d&&(console.error("API Error Text:",d.substring(0,300)),c+=` - ${d.substring(0,100)}`)}}catch(d){console.error("Error parsing API error response:",d),c+=" (Error response could not be parsed)"}throw new Error(`${c} (${e})`)}const l=await a.json();return l&&typeof l=="object"&&"success"in l&&"data"in l?l.data:l}catch(r){throw console.error(`API call failed: ${e}`,r),r}},ch={get:e=>ro(e,{method:"GET"}),post:(e,t)=>ro(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>ro(e,{method:"PUT",body:JSON.stringify(t)}),patch:(e,t)=>ro(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>ro(e,{method:"DELETE"})},uU=async()=>{try{return await ch.get("/equipment")}catch(e){return console.error("Failed to fetch equipment:",e),[]}},dU=async e=>{try{return await ch.post("/equipment",e)}catch(t){throw console.error("Failed to create equipment:",t),new Error(t.message||"Failed to create equipment")}},hU=async(e,t)=>{try{return await ch.put(`/equipment/${e}`,t)}catch(n){return console.error(`Failed to update equipment ${e}:`,n),null}},fU=async e=>{try{return await ch.delete(`/equipment/${e}`),!0}catch(t){return console.error(`Failed to delete equipment ${e}:`,t),!1}},Lf=e=>{var t,n,s,r;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((s=e.baseRates)==null?void 0:s.monthly)||0,yearly:((r=e.baseRates)==null?void 0:r.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},Ff=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],$f=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],mU=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function pU(){const{user:e}=ze(),[t,n]=y.useState([]),[s,r]=y.useState([]),[i,a]=y.useState(""),[l,c]=y.useState("all"),[u,d]=y.useState("all"),[h,f]=y.useState(!0),[m,p]=y.useState(!1),[x,b]=y.useState(!1),[w,v]=y.useState(null),[g,j]=y.useState({show:!1,title:""}),[S,k]=y.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"});y.useEffect(()=>{N()},[]),y.useEffect(()=>{C()},[t,i,l,u]);const N=async()=>{try{let A=await uU();A=A.map(Lf),n(A),console.log("Successfully connected to equipment API"),f(!1)}catch(A){console.error("Error fetching equipment:",A),$("Error fetching equipment","error"),f(!1)}},C=()=>{let A=[...t];i&&(A=A.filter(B=>B.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(A=A.filter(B=>B.status===l)),u!=="all"&&(A=A.filter(B=>B.category===u)),r(A)},E=()=>{if(!S.name||!S.manufacturingDate||!S.registrationDate||!S.maxLiftingCapacity||!S.unladenWeight||!S.runningCostPerKm||!S.baseRates.micro||!S.baseRates.small||!S.baseRates.monthly||!S.baseRates.yearly)return $("Please fill in all required fields","error"),!1;const A=/^\d{4}-\d{2}$/;return!A.test(S.manufacturingDate)||!A.test(S.registrationDate)?($("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(S.maxLiftingCapacity))||isNaN(Number(S.unladenWeight))||isNaN(Number(S.runningCostPerKm))||isNaN(Number(S.baseRates.micro))||isNaN(Number(S.baseRates.small))||isNaN(Number(S.baseRates.monthly))||isNaN(Number(S.baseRates.yearly))?($("Please enter valid numbers for numeric fields","error"),!1):!0},P=async A=>{if(A.preventDefault(),!!E())try{const B={...S,equipmentId:(w==null?void 0:w.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(S.maxLiftingCapacity),unladenWeight:Number(S.unladenWeight),baseRates:{micro:Number(S.baseRates.micro),small:Number(S.baseRates.small),monthly:Number(S.baseRates.monthly),yearly:Number(S.baseRates.yearly)},runningCost:Number(S.runningCostPerKm),runningCostPerKm:Number(S.runningCostPerKm)};if(console.log("Form submission data:",B),w){console.log(`Updating equipment ${w.id}`,B);let q=await hU(w.id,B);q?(console.log("Update successful:",q),q=Lf(q),n(I=>I.map(T=>T.id===w.id?q:T)),$("Equipment updated successfully","success")):$("Failed to update equipment","error")}else{console.log("Creating new equipment",B);let q=await dU(B);q=Lf(q),console.log("Creation successful:",q),n(I=>[...I,q]),$("Equipment added successfully","success")}setTimeout(()=>{N()},500),p(!1),F()}catch(B){console.error("Error saving equipment:",B),$("Error saving equipment","error")}},L=async()=>{if(w)try{await fU(w.id),n(A=>A.filter(B=>B.id!==w.id)),b(!1),v(null),$("Equipment deleted successfully","success")}catch{$("Error deleting equipment","error")}},F=()=>{k({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),v(null)},$=(A,B="success")=>{j({show:!0,title:A,variant:B}),setTimeout(()=>j({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(pe,{placeholder:"Search equipment...",value:i,onChange:A=>a(A.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(be,{value:u,onChange:A=>d(A),options:[{value:"all",label:"All Categories"},...$f],className:"w-full sm:w-48"}),o.jsx(be,{value:l,onChange:A=>c(A),options:[{value:"all",label:"All Status"},...Ff],className:"w-full sm:w-48"})]})]}),o.jsx(W,{onClick:()=>{F(),p(!0)},leftIcon:o.jsx(rs,{className:"w-4 h-4"}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Equipment"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Equipment Inventory"})}),o.jsx(se,{children:h?o.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sm:px-6",children:"Rates"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(A=>{var B,q;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:A.name}),o.jsx("div",{className:"text-sm text-gray-500",children:A.equipmentId}),A.description&&o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:A.description})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(ha,{variant:"secondary",className:"w-full justify-center",children:(B=$f.find(I=>I.value===A.category))==null?void 0:B.label}),o.jsx(ha,{variant:A.status==="available"?"success":A.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(q=Ff.find(I=>I.value===A.status))==null?void 0:q.label})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"text-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Mfg: ",A.manufacturingDate||"N/A"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nR,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:A.maxLiftingCapacity?`${A.maxLiftingCapacity} tons max lift`:"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:A.unladenWeight?`${A.unladenWeight} tons unladen`:"N/A"})]}),A.registrationDate&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Reg: ",A.registrationDate]})]})]})}),o.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:o.jsxs("div",{className:"text-sm",children:["                          ",o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),o.jsx("div",{className:"space-y-2.5",children:mU.map(I=>o.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[o.jsx("span",{className:"text-gray-600",children:I.label}),o.jsxs("div",{className:"flex items-baseline gap-1.5",children:[o.jsx("span",{className:"text-gray-400 text-sm",children:""}),o.jsx("span",{className:"text-gray-900 font-medium",children:A.baseRates&&A.baseRates[I.value]!==void 0?Se(A.baseRates[I.value]):"N/A"}),o.jsx("span",{className:"text-gray-500 text-sm",children:I.value==="monthly"||I.value==="yearly"?o.jsxs("div",{children:["per",o.jsx("br",{}),"month"]}):"per hour"})]})]},I.value))})]}),"                            ",o.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[o.jsx(sn,{className:"h-4 w-4"}),o.jsx("span",{children:"Running:"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-gray-400",children:""}),o.jsx("span",{className:"text-gray-900",children:A.runningCostPerKm!==void 0?Se(A.runningCostPerKm):"N/A"}),o.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{v(A),k({name:A.name||"",category:A.category||"mobile_crane",manufacturingDate:A.manufacturingDate||"",registrationDate:A.registrationDate||"",maxLiftingCapacity:A.maxLiftingCapacity!==void 0?String(A.maxLiftingCapacity):"",unladenWeight:A.unladenWeight!==void 0?String(A.unladenWeight):"",baseRates:{micro:A.baseRates&&A.baseRates.micro!==void 0?String(A.baseRates.micro):"",small:A.baseRates&&A.baseRates.small!==void 0?String(A.baseRates.small):"",monthly:A.baseRates&&A.baseRates.monthly!==void 0?String(A.baseRates.monthly):"",yearly:A.baseRates&&A.baseRates.yearly!==void 0?String(A.baseRates.yearly):""},runningCostPerKm:A.runningCostPerKm!==void 0?String(A.runningCostPerKm):"",description:A.description||"",status:A.status||"available"}),p(!0)},children:o.jsx(gi,{className:"h-4 w-4"})}),o.jsx(W,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{v(A),b(!0)},children:o.jsx(Sa,{className:"h-4 w-4"})})]})})]},A.id)})})]})})})]}),o.jsx(it,{title:w?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),F()},size:"lg",children:o.jsxs("form",{onSubmit:P,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(pe,{label:"Name",value:S.name,onChange:A=>k({...S,name:A.target.value}),required:!0}),o.jsx(pe,{label:"Max Lifting Capacity (tons)",type:"number",value:S.maxLiftingCapacity,onChange:A=>k({...S,maxLiftingCapacity:A.target.value}),required:!0}),o.jsx(be,{label:"Category",value:S.category,onChange:A=>k({...S,category:A}),options:$f,className:"w-full"}),o.jsx(pe,{label:"Unladen Weight (tons)",type:"number",value:S.unladenWeight,onChange:A=>k({...S,unladenWeight:A.target.value}),required:!0}),o.jsx(pe,{label:"Manufacturing Date (YYYY-MM)",value:S.manufacturingDate,onChange:A=>k({...S,manufacturingDate:A.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(pe,{label:"Running Cost (/km)",type:"number",value:S.runningCostPerKm,onChange:A=>k({...S,runningCostPerKm:A.target.value}),required:!0}),o.jsx(pe,{label:"Registration Date (YYYY-MM)",value:S.registrationDate,onChange:A=>k({...S,registrationDate:A.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(be,{label:"Status",value:S.status,onChange:A=>k({...S,status:A}),options:Ff,className:"w-full"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(pe,{label:"Micro Rate ( per hour)",type:"number",value:S.baseRates.micro,onChange:A=>k({...S,baseRates:{...S.baseRates,micro:A.target.value}}),required:!0}),o.jsx(pe,{label:"Small Rate ( per hour)",type:"number",value:S.baseRates.small,onChange:A=>k({...S,baseRates:{...S.baseRates,small:A.target.value}}),required:!0}),o.jsx(pe,{label:"Monthly Rate ( per month)",type:"number",value:S.baseRates.monthly,onChange:A=>k({...S,baseRates:{...S.baseRates,monthly:A.target.value}}),required:!0}),o.jsx(pe,{label:"Yearly Rate ( per month)",type:"number",value:S.baseRates.yearly,onChange:A=>k({...S,baseRates:{...S.baseRates,yearly:A.target.value}}),required:!0})]})]}),o.jsx(Dn,{label:"Description",value:S.description,onChange:A=>k({...S,description:A.target.value}),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{p(!1),F()},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:w?"Update Equipment":"Add Equipment"})]})]})}),o.jsx(it,{title:"Delete Equipment",isOpen:x,onClose:()=>{b(!1),v(null)},children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this equipment? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{b(!1),v(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:L,children:"Delete Equipment"})]})]})}),o.jsx(lt,{title:g.title,variant:g.variant,isVisible:g.show,onClose:()=>j({show:!1,title:""})})]})}const zf=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],gU=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function xU(){const{user:e}=ze(),[t,n]=y.useState([]),[s,r]=y.useState([]),[i,a]=y.useState(""),[l,c]=y.useState("all"),[u,d]=y.useState("all"),[h,f]=y.useState(!1),[m,p]=y.useState(!1),[x,b]=y.useState(null),[w,v]=y.useState(!0),[g,j]=y.useState({show:!1,title:""}),S=($,A="success",B)=>{j({show:!0,title:$,variant:A,description:B}),setTimeout(()=>j({show:!1,title:""}),3e3)},[k,N]=y.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});y.useEffect(()=>{(async()=>{try{v(!0);const A=await CS();n(A),v(!1)}catch(A){console.error("Error fetching services:",A),S("Error fetching services","error"),v(!1)}})()},[]),y.useEffect(()=>{C()},[t,i,l,u]);const C=()=>{let $=[...t];i&&($=$.filter(A=>A.name.toLowerCase().includes(i.toLowerCase())||A.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&($=$.filter(A=>A.type===l)),u!=="all"&&($=$.filter(A=>u==="active"?A.isActive:!A.isActive)),r($)},E=async $=>{if($.preventDefault(),!k.name||!k.type||!k.baseRate||!k.unit){S("Please fill in all required fields","error");return}try{const A={name:k.name,type:k.type,baseRate:parseFloat(k.baseRate),unit:k.unit,description:k.description,isActive:k.isActive};if(x){const B=await ES(x.id,A);n(q=>q.map(I=>I.id===x.id?B:I)),S("Service updated successfully","success")}else{const B=await kS(A);n(q=>[...q,B]),S("Service added successfully","success")}f(!1),L()}catch{S("Error saving service","error")}},P=async()=>{if(x)try{await DS(x.id),n($=>$.filter(A=>A.id!==x.id)),p(!1),b(null),S("Service deleted successfully","success")}catch($){console.error("Error deleting service:",$),S("Error deleting service","error")}},L=()=>{N({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),b(null)},F=async $=>{try{const A=await TS($.id);n(B=>B.map(q=>q.id===$.id?A:q)),S(`Service ${$.isActive?"deactivated":"activated"}`,"success")}catch(A){console.error("Error toggling service status:",A),S("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(pe,{placeholder:"Search services...",value:i,onChange:$=>a($.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(be,{options:[{value:"all",label:"All Types"},...zf],value:l,onChange:c,className:"w-40"}),o.jsx(be,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:$=>d($),className:"w-40"})]})]}),o.jsx(W,{onClick:()=>{L(),f(!0)},leftIcon:o.jsx(rs,{size:16}),children:"Add Service"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Services Catalog"})}),"        ",o.jsx(se,{children:w?o.jsx("div",{className:"text-center py-4",children:"Loading services..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map($=>{var A;return o.jsx(ee,{variant:"bordered",className:"h-full",children:o.jsxs(se,{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:$.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(US,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-500",children:(A=zf.find(B=>B.value===$.type))==null?void 0:A.label})]})]}),o.jsx(W,{variant:$.isActive?"default":"ghost",size:"sm",onClick:()=>F($),children:$.isActive?o.jsx(dr,{className:"h-4 w-4"}):o.jsx(Ud,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:$.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[o.jsx(Bd,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:Se($.baseRate)})]}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(On,{className:"h-4 w-4"}),o.jsxs("span",{children:["Per ",$.unit]})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{b($),N({name:$.name,type:$.type,baseRate:$.baseRate.toString(),unit:$.unit,description:$.description||"",isActive:$.isActive}),f(!0)},children:o.jsx(gi,{className:"h-4 w-4"})}),o.jsx(W,{variant:"destructive",size:"sm",onClick:()=>{b($),p(!0)},children:o.jsx(Sa,{className:"h-4 w-4"})})]})]})},$.id)})})})]}),o.jsx(it,{isOpen:h,onClose:()=>{f(!1),L()},title:x?"Edit Service":"Add New Service",size:"lg",children:o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsx(pe,{label:"Service Name",value:k.name,onChange:$=>N(A=>({...A,name:$.target.value})),required:!0}),o.jsx(be,{label:"Service Type",options:zf,value:k.type,onChange:$=>N(A=>({...A,type:$})),required:!0}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(pe,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:k.baseRate,onChange:$=>N(A=>({...A,baseRate:$.target.value})),required:!0}),o.jsx(be,{label:"Rate Unit",options:gU,value:k.unit,onChange:$=>N(A=>({...A,unit:$})),required:!0})]}),o.jsx(Dn,{label:"Description",value:k.description,onChange:$=>N(A=>({...A,description:$.target.value})),rows:3}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:$=>N(A=>({...A,isActive:$.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{f(!1),L()},children:"Cancel"}),o.jsx(W,{type:"submit",children:x?"Update Service":"Add Service"})]})]})}),o.jsx(it,{isOpen:m,onClose:()=>{p(!1),b(null)},title:"Delete Service",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{p(!1),b(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:P,children:"Delete"})]})]})}),g.show&&o.jsx(lt,{title:g.title,variant:g.variant,isVisible:g.show,onClose:()=>j({show:!1,title:""})})]})}const Bf=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],yU=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],io=10,Vf=e=>{const t=e.split("").reduce((a,l)=>a+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],s=t%n.length,r=n[s];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${r}&color=fff&size=128`};function vU(){const{user:e}=ze(),[t,n]=y.useState([]),[s,r]=y.useState([]),[i,a]=y.useState(1),[l,c]=y.useState(""),[u,d]=y.useState("all"),[h,f]=y.useState("all"),[m,p]=y.useState(!0),[x,b]=y.useState(!1),[w,v]=y.useState(!1),[g,j]=y.useState(null),[S,k]=y.useState({show:!1,title:""}),[N,C]=y.useState({name:"",email:"",password:"",role:"operator",status:"active"});y.useEffect(()=>{(async()=>{try{if(p(!0),!Or.isAuthenticated()){P("Authentication Required","You need to log in to view users","warning"),p(!1);return}try{const H=(await Or.getUsers()).users.map(G=>({id:G.id,name:G.name,email:G.email,role:G.role,status:G.status==="active"?"active":"inactive"}));n(H),r(H)}catch(T){console.error("Error fetching users:",T),T.message&&T.message.includes("Authentication required")?P("Authentication Error","You need to log in to view users","error"):P("Error loading users",T.message||"Please try again later","error");const R=[{id:"1",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"2",name:"Sales Agent",email:"sales@example.com",role:"sales_agent",status:"active"}];n(R),r(R)}}finally{p(!1)}})()},[]),y.useEffect(()=>{E()},[t,l,u,h]);const E=()=>{let I=[...t];if(l){const T=l.toLowerCase();I=I.filter(R=>R.name.toLowerCase().includes(T)||R.email.toLowerCase().includes(T))}u!=="all"&&(I=I.filter(T=>T.role===u)),h!=="all"&&(I=I.filter(T=>T.status===h)),r(I),a(1)},P=(I,T,R="success")=>{k({show:!0,title:I,description:T,variant:R}),setTimeout(()=>k({show:!1,title:""}),3e3)},L=async I=>{const T=I.status==="active"?"inactive":"active";try{await Or.updateUser(I.id,{}),n(R=>R.map(H=>H.id===I.id?{...H,status:T}:H)),P(`User ${I.status==="active"?"deactivated":"activated"}`,"success")}catch(R){console.error("Error toggling user status:",R),P("Error updating user status","error")}},F=async I=>{if(I.preventDefault(),!N.name||!N.email||!N.role){P("Please fill in all required fields","error");return}if(!g&&!N.password){P("Password is required for new users","error");return}try{if(g){const T={...g,name:N.name,email:N.email,role:N.role,status:N.status};await Or.updateUser(g.id,{name:N.name,email:N.email,role:N.role}),n(R=>R.map(H=>H.id===g.id?T:H)),P("User updated successfully","success")}else try{const T=await Or.createUser({email:N.email,password:N.password,name:N.name,role:N.role}),R={id:T.user.id,name:T.user.name,email:T.user.email,role:T.user.role,status:N.status,avatar:Vf(N.name)};n(H=>[...H,R]),P("User added successfully","success")}catch(T){P(`Error creating user account: ${T.message||"Unknown error"}`,"error");return}b(!1),A()}catch(T){P(`Error saving user: ${T.message||"Unknown error"}`,"error")}},$=async()=>{if(g)try{await Or.deleteUser(g.id),n(I=>I.filter(T=>T.id!==g.id)),v(!1),j(null),P("User deleted successfully","success")}catch(I){console.error("Error deleting user:",I),P("Error deleting user","error")}},A=()=>{C({name:"",email:"",password:"",role:"operator",status:"active"}),j(null)},B=Math.ceil(s.length/io),q=s.slice((i-1)*io,i*io);return!e||e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(pe,{placeholder:"Search users...",value:l,onChange:I=>c(I.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(be,{options:[{value:"all",label:"All Roles"},...Bf],value:u,onChange:I=>d(I),className:"w-full sm:w-40"}),o.jsx(be,{options:[{value:"all",label:"All Status"},...yU],value:h,onChange:I=>f(I),className:"w-full sm:w-40"})]})]}),o.jsx(W,{onClick:()=>{A(),b(!0)},leftIcon:o.jsx(tR,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add User"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"User Management"})}),o.jsx(se,{children:m?o.jsx("div",{className:"text-center py-4",children:"Loading users..."}):q.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(I=>{var T;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:I.avatar||Vf(I.name),alt:I.name,className:"h-10 w-10 rounded-full object-cover",onError:R=>{const H=R.target;H.onerror=null,H.src=Vf(I.name)}}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium text-gray-900",children:I.name}),o.jsx("div",{className:"text-sm text-gray-500",children:I.email})]})]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(T=Bf.find(R=>R.value===I.role))==null?void 0:T.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:I.status==="active"?"Active":"Inactive"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>L(I),children:I.status==="active"?o.jsx(Ud,{size:16}):o.jsx(dr,{size:16})}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{j(I),C({name:I.name,email:I.email,password:"",role:I.role,status:I.status}),b(!0)},children:o.jsx(gi,{size:16})}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{j(I),v(!0)},children:o.jsx(Sa,{size:16})})]})})]},I.id)})})]})}),B>1&&o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*io+1," to"," ",Math.min(i*io,s.length)," of"," ",s.length," users"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>a(I=>Math.max(1,I-1)),disabled:i===1,children:"Previous"}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>a(I=>Math.min(B,I+1)),disabled:i===B,children:"Next"})]})]})]})})]}),"      ",o.jsx(it,{isOpen:x,onClose:()=>{b(!1),A()},title:g?"Edit User":"Add New User",size:"lg",children:o.jsxs("form",{onSubmit:F,className:"space-y-6",children:[o.jsx(ld,{}),o.jsx(pe,{label:"Full Name",value:N.name,onChange:I=>C(T=>({...T,name:I.target.value})),required:!0}),"          ",o.jsx(pe,{label:"Email Address",type:"email",value:N.email,onChange:I=>C(T=>({...T,email:I.target.value})),required:!0}),o.jsx(pe,{label:"Password",type:"password",value:N.password||"",onChange:I=>C(T=>({...T,password:I.target.value})),required:!g,placeholder:g?"Leave blank to keep current password":""}),o.jsx(be,{label:"Role",options:Bf,value:N.role,onChange:I=>C(T=>({...T,role:I})),required:!0}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:N.status==="active",onChange:I=>C(T=>({...T,status:I.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{b(!1),A()},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:g?"Update User":"Add User"})]})]})}),"      ",o.jsx(it,{isOpen:w,onClose:()=>{v(!1),j(null)},title:"Delete User",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[o.jsx(pi,{className:"h-5 w-5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{v(!1),j(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:$,children:"Delete User"})]})]})}),S.show&&o.jsx(lt,{title:S.title,variant:S.variant,isVisible:S.show,onClose:()=>k({show:!1,title:""})})]})}function Ti({children:e,title:t,defaultExpanded:n=!1,icon:s,className:r="",onToggle:i}){const[a,l]=y.useState(n),c=()=>{const u=!a;l(u),i==null||i(u)};return o.jsxs(ee,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${r}`,children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[s&&o.jsx("div",{className:"text-gray-500 flex-shrink-0",children:s}),o.jsx(me,{className:"text-base sm:text-lg font-medium",children:t})]}),o.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${a?"rotate-180":""}`,children:o.jsx($s,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),o.jsx("div",{className:`transition-all duration-300 overflow-hidden ${a?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:o.jsx(se,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}const Lw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},uh=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("authToken");return t&&(e.Authorization=`Bearer ${t}`),e},bU=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:uh()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||Lw}catch(e){return console.error("Error fetching quotation config:",e),Lw}},wU=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:uh(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.message||"Failed to update quotation config")}return(await t.json()).data}catch(t){throw console.error("Error updating quotation config:",t),t}},Xk=async e=>{try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:uh()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},Jk=async(e,t)=>{try{const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:uh(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||`Failed to update ${e} config`)}return(await n.json()).data}catch(n){throw console.error(`Error updating ${e} config:`,n),n}},jU=async()=>Xk("resourceRates"),NU=async e=>Jk("resourceRates",e),SU=async()=>Xk("additionalParams"),CU=async e=>Jk("additionalParams",e);function kU(){const[e,t]=y.useState(!0),[n,s]=y.useState(!1),[r,i]=y.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[a,l]=y.useState({show:!1,title:""});y.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await bU();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const x of f){const b=r[x];if(b.minDays<=p){u(`${x.charAt(0).toUpperCase()+x.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(b.maxDays<=b.minDays){u(`${x.charAt(0).toUpperCase()+x.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=b.maxDays}if(!m)return;await wU({orderTypeLimits:r}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{s(!1)}},h=(f,m,p)=>{const x=parseInt(p)||0;i(b=>({...b,[f]:{...b[f],[m]:x}}))};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(Ue,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>o.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ee,{type:"number",label:"Minimum Days",value:r[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),o.jsx("div",{children:o.jsx(Ee,{type:"number",label:"Maximum Days",value:r[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:r[f].minDays+1})})]})]},f))}),o.jsx("div",{className:"flex justify-end",children:o.jsx(W,{onClick:d,disabled:n,leftIcon:n?o.jsx(Ue,{className:"animate-spin"}):o.jsx(xi,{}),children:n?"Saving...":"Save Changes"})}),a.show&&o.jsx(lt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function EU(){const[e,t]=y.useState(!0),[n,s]=y.useState(!1),[r,i]=y.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[a,l]=y.useState({show:!1,title:""});y.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await jU();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(s(!0),r.foodRatePerMonth<=0||r.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await NU(r),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{s(!1)}};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(Ue,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(zn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),o.jsx(Ee,{type:"number",value:r.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["",(r.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(zn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),o.jsx(Ee,{type:"number",value:r.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["",(r.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(W,{onClick:d,disabled:n,leftIcon:n?o.jsx(Ue,{className:"animate-spin"}):o.jsx(xi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(lt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function DU(){const[e,t]=y.useState(!0),[n,s]=y.useState(!1),[r,i]=y.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[a,l]=y.useState({show:!1,title:""});y.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await SU(),m={...r,...f,usageFactors:{...r.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0),await CU(r),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{s(!1)}};if(e)return o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(Ue,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:x=!1})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),o.jsxs("div",{className:"relative mt-1",children:[!x&&o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),o.jsx(Ee,{type:"number",value:f,onChange:b=>m(Number(b.target.value)),className:x?"pr-8":"pl-7",min:"0"}),x&&o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx(QA,{className:"h-4 w-4 text-gray-400"})})]})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ox,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Usage Rates"})]})}),"          ",o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Normal Usage Factor",value:r.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Usage Factor",value:r.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"Heavy Usage Factor",value:r.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(op,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Risk Factors"})]})}),o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Low Risk",value:r.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Risk",value:r.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"High Risk",value:r.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(On,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Shift Factors"})]})}),o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Single Shift",value:r.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),o.jsx(h,{label:"Double Shift",value:r.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qA,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Day/Night Factors"})]})}),o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Day Factor",value:r.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),o.jsx(h,{label:"Night Factor",value:r.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(W,{onClick:d,disabled:n,leftIcon:n?o.jsx(Ue,{className:"animate-spin"}):o.jsx(xi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(lt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}const TU={createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};function PU({onSave:e}){var w,v;const[t,n]=y.useState([]),[s,r]=y.useState(""),[i,a]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState(!1),[h,f]=y.useState({show:!1,title:""});y.useEffect(()=>{m()},[]),y.useEffect(()=>{if(s){const g=t.find(j=>j.id===s);a(g||null)}else a(null)},[s,t]);const m=async()=>{try{c(!0);const g=await Jg();n(g);const j=g.find(S=>S.isDefault);j&&r(j.id)}catch(g){console.error("Error loading templates and config:",g),p("Error loading configuration","error")}finally{c(!1)}},p=(g,j="success")=>{f({show:!0,title:g,variant:j}),setTimeout(()=>f({show:!1,title:""}),3e3)},x=async()=>{try{d(!0);const g=t.find(j=>j.isDefault);if(g&&g.id!==s&&await Zr(g.id,{isDefault:!1}),s){const j=t.find(S=>S.id===s);j&&await Zr(j.id,{isDefault:!0})}await m(),p("Default template configuration saved successfully"),e==null||e()}catch(g){console.error("Error saving default template config:",g),p("Error saving configuration","error")}finally{d(!1)}},b=[{value:"",label:"No default template selected"},...t.map(g=>({value:g.id,label:g.name}))];return l?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx(Ue,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Default Quotation Template"})]})}),o.jsxs(se,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),o.jsx(be,{options:b,value:s,onChange:r,className:"w-full max-w-md"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),s&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ln,{className:"h-5 w-5 text-blue-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),o.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(w=t.find(g=>g.id===s))==null?void 0:w.name}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(v=t.find(g=>g.id===s))==null?void 0:v.description})]})]})}),t.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ue,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),o.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(W,{onClick:x,disabled:u||t.length===0,leftIcon:u?o.jsx(Ue,{className:"animate-spin"}):o.jsx(xi,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Preview"})}),o.jsx(se,{children:o.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:o.jsx("div",{dangerouslySetInnerHTML:{__html:ll(TU,i)}})})})]}),h.show&&o.jsx(lt,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const _U=()=>{const[e,t]=y.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,s]=y.useState(!0),[r,i]=y.useState(!1),[a,l]=y.useState(!1),[c,u]=y.useState("untested"),[d,h]=y.useState({show:!1,title:""}),f=(w,v="success")=>{h({show:!0,title:w,variant:v}),setTimeout(()=>h({show:!1,title:""}),v==="success"?5e3:3e3)};y.useEffect(()=>{m()},[]);const m=async()=>{s(!0);try{const w=await fetch("/api/dbconfig",{method:"GET",headers:nu()});if(!w.ok)throw new Error("Failed to fetch database configuration");const v=await w.json();v.success&&v.data&&t({host:v.data.host||"localhost",port:v.data.port||5432,database:v.data.database||"asp_crm",user:v.data.user||"postgres",password:"",ssl:v.data.ssl||!1})}catch(w){console.error("Failed to fetch database config:",w),f("Failed to load database configuration","error")}finally{s(!1)}},p=w=>{const{name:v,value:g,type:j,checked:S}=w.target;t(k=>({...k,[v]:j==="checkbox"?S:j==="number"?parseInt(g)||0:g}))},x=async()=>{l(!0);try{const w=await fetch("/api/dbconfig",{method:"PUT",headers:nu(),body:JSON.stringify(e)}),v=await w.json();if(w.ok&&v.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(v.message||"Unknown error")}catch(w){console.error("Failed to save database config:",w),f(`Failed to save database configuration: ${w instanceof Error?w.message:"Unknown error"}`,"error")}finally{l(!1)}},b=async()=>{var w,v;i(!0),u("untested");try{const g=await fetch("/api/dbconfig/test",{method:"POST",headers:nu(),body:JSON.stringify(e)}),j=await g.json();g.ok&&j.success?(u("success"),f(`Connection successful! PostgreSQL ${((v=(w=j.data)==null?void 0:w.version)==null?void 0:v.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${j.message||"Unknown error"}`,"error"))}catch(g){console.error("Connection test error:",g),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?o.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),o.jsx(Ee,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:o.jsx(XA,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),o.jsx(Ee,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),o.jsx(Ee,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:o.jsx(OS,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx(Ee,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),o.jsx(Ee,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsx("input",{type:"checkbox",id:"ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),o.jsx("label",{htmlFor:"ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsx(W,{variant:"outline",onClick:b,disabled:r,leftIcon:r?o.jsx(Ue,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?o.jsx(_A,{className:"h-4 w-4 text-green-500"}):void 0,children:r?"Testing...":"Test Connection"}),o.jsx(W,{onClick:x,disabled:a,leftIcon:a?o.jsx(Ue,{className:"h-4 w-4 animate-spin"}):o.jsx(xi,{className:"h-4 w-4"}),children:a?"Saving...":"Save Configuration"})]}),d.show&&o.jsx(lt,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function MU(){const{user:e}=ze();return!e||e.role!=="admin"&&e.role!=="operations_manager"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),o.jsx(ul,{className:"h-6 w-6 text-gray-400"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ti,{icon:o.jsx(ln,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:o.jsx(PU,{})}),o.jsx(Ti,{icon:o.jsx(ss,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:o.jsx(kU,{})}),o.jsx(Ti,{icon:o.jsx(ln,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:o.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),o.jsx(Ti,{icon:o.jsx(zn,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:o.jsx(EU,{})}),o.jsx(Ti,{icon:o.jsx(ox,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:o.jsx(DU,{})}),o.jsx(Ti,{icon:o.jsx(OS,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:o.jsx(_U,{})})]})]})}function AU(){const{user:e}=ze(),[t,n]=y.useState([]),[s,r]=y.useState({}),[i,a]=y.useState(""),[l,c]=y.useState(!1),[u,d]=y.useState(!1),[h,f]=y.useState(null),[m,p]=y.useState(!0),[x,b]=y.useState({show:!1,title:""}),[w,v]=y.useState({name:"",contactName:"",email:"",phone:"",address:"",type:"other"});y.useEffect(()=>{g()},[]);const g=async()=>{try{console.log("Fetching customers from service...");const E=await nx();if(E&&Array.isArray(E)){console.log(`Received ${E.length} customers from service`),n(E);const P={};for(const L of E){console.log(`Fetching contacts for customer: ${L.id} - ${L.name}`);const F=await dS(L.id);P[L.id]=F}r(P),p(!1)}else console.error("Invalid customer data format:",E),N("Error fetching customers: Invalid data format","error"),p(!1)}catch(E){console.error("Error fetching customers:",E),N("Error fetching customers","error"),p(!1)}},j=async E=>{if(E.preventDefault(),!w.name||!w.email||!w.phone){N("Please fill in all required fields","error");return}try{if(h){const P=await cS(h.id,w);P&&n(L=>L.map(F=>F.id===h.id?P:F)),N("Customer updated successfully","success")}else{const P=await tx(w);n(L=>[...L,P]),N("Customer added successfully","success")}c(!1),k()}catch{N("Error saving customer","error")}},S=async()=>{if(h)try{await uS(h.id);const E=s[h.id]||[];for(const P of E)await hS(P.id);n(P=>P.filter(L=>L.id!==h.id)),d(!1),f(null),N("Customer deleted successfully","success")}catch{N("Error deleting customer","error")}},k=()=>{v({name:"",contactName:"",email:"",phone:"",address:"",type:"other"}),f(null)},N=(E,P="success")=>{b({show:!0,title:E,variant:P}),setTimeout(()=>b({show:!1,title:""}),3e3)},C=t.filter(E=>E.name.toLowerCase().includes(i.toLowerCase())||E.email.toLowerCase().includes(i.toLowerCase()));return!e||e.role!=="admin"&&e.role!=="sales_agent"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 max-w-md relative",children:[o.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(pe,{placeholder:"Search customers...",value:i,onChange:E=>a(E.target.value),className:"pl-10 w-full"})]}),o.jsx(W,{onClick:()=>{k(),c(!0)},leftIcon:o.jsx(rs,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Customer"})]}),o.jsx(ee,{children:o.jsx(se,{children:m?o.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):C.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(E=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),o.jsx("div",{className:"text-sm text-gray-500",children:E.contactName||"N/A"})]}),o.jsx(ha,{variant:"outline",className:"text-xs",children:E.id})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm",children:[o.jsxs("div",{className:"flex items-center text-gray-900",children:[o.jsx(zS,{className:"h-4 w-4 mr-2 flex-shrink-0"}),E.email]}),o.jsxs("div",{className:"flex items-center text-gray-500 mt-1",children:[o.jsx(VS,{className:"h-4 w-4 mr-2 flex-shrink-0"}),E.phone]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[o.jsx(Ll,{className:"h-4 w-4 mr-2 flex-shrink-0"}),E.name||"N/A"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Vd,{className:"h-4 w-4 mr-2 flex-shrink-0"}),E.address]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{f(E),v({name:E.name,email:E.email,phone:E.phone,address:E.address,contactName:E.contactName||"",type:E.type}),c(!0)},title:"Edit Customer",children:o.jsx(gi,{className:"h-4 w-4"})}),o.jsx(W,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{f(E),d(!0)},title:"Delete Customer",children:o.jsx(Sa,{className:"h-4 w-4"})})]})})]},E.id))})]})})})}),o.jsx(it,{isOpen:l,onClose:()=>{c(!1),k()},title:h?"Edit Customer":"Add New Customer",size:"lg",children:o.jsxs("form",{onSubmit:j,className:"space-y-6",children:[o.jsx(pe,{label:"Customer Name",value:w.name,onChange:E=>v(P=>({...P,name:E.target.value})),required:!0}),"          ",o.jsx(pe,{label:"Contact Name",value:w.contactName,onChange:E=>v(P=>({...P,contactName:E.target.value})),required:!0}),o.jsx(pe,{label:"Customer Type",value:w.type,onChange:E=>v(P=>({...P,type:E.target.value})),required:!0}),o.jsx(pe,{label:"Email",type:"email",value:w.email,onChange:E=>v(P=>({...P,email:E.target.value})),required:!0}),o.jsx(pe,{label:"Phone",value:w.phone,onChange:E=>v(P=>({...P,phone:E.target.value})),required:!0}),o.jsx(pe,{label:"Address",value:w.address,onChange:E=>v(P=>({...P,address:E.target.value})),required:!0}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{c(!1),k()},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:h?"Update Customer":"Add Customer"})]})]})}),o.jsx(it,{isOpen:u,onClose:()=>{d(!1),f(null)},title:"Delete Customer",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{d(!1),f(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:S,children:"Delete"})]})]})}),x.show&&o.jsx(lt,{title:x.title,variant:x.variant,isVisible:x.show,onClose:()=>b({show:!1,title:""})})]})}function Rt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var RU=typeof Symbol=="function"&&Symbol.observable||"@@observable",Fw=RU,$w=()=>Math.random().toString(36).substring(7).split("").join("."),IU={INIT:`@@redux/INIT${$w()}`,REPLACE:`@@redux/REPLACE${$w()}`},zw=IU;function OU(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Zk(e,t,n){if(typeof e!="function")throw new Error(Rt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Rt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Rt(1));return n(Zk)(e,t)}let s=e,r=t,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((b,w)=>{a.set(w,b)}))}function d(){if(c)throw new Error(Rt(3));return r}function h(b){if(typeof b!="function")throw new Error(Rt(4));if(c)throw new Error(Rt(5));let w=!0;u();const v=l++;return a.set(v,b),function(){if(w){if(c)throw new Error(Rt(6));w=!1,u(),a.delete(v),i=null}}}function f(b){if(!OU(b))throw new Error(Rt(7));if(typeof b.type>"u")throw new Error(Rt(8));if(typeof b.type!="string")throw new Error(Rt(17));if(c)throw new Error(Rt(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=a).forEach(v=>{v()}),b}function m(b){if(typeof b!="function")throw new Error(Rt(10));s=b,f({type:zw.REPLACE})}function p(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(Rt(11));function v(){const j=w;j.next&&j.next(d())}return v(),{unsubscribe:b(v)}},[Fw](){return this}}}return f({type:zw.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[Fw]:p}}function Bw(e,t){return function(...n){return t(e.apply(this,n))}}function Vw(e,t){if(typeof e=="function")return Bw(e,t);if(typeof e!="object"||e===null)throw new Error(Rt(16));const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=Bw(r,t))}return n}function eE(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function LU(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(Rt(15))};const a={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(a));return i=eE(...l)(r.dispatch),{...r,dispatch:i}}}var FU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=y;function $U(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zU=typeof Object.is=="function"?Object.is:$U,BU=Yl.useSyncExternalStore,VU=Yl.useRef,UU=Yl.useEffect,WU=Yl.useMemo,HU=Yl.useDebugValue;FU.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=VU(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=WU(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,zU(d,m))return p;var x=s(m);return r!==void 0&&r(p,x)?(d=m,p):(d=m,h=x)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=BU(e,i[0],i[1]);return UU(function(){a.hasValue=!0,a.value=l},[l]),HU(l),l};var qU=y.version.startsWith("19"),GU=Symbol.for(qU?"react.transitional.element":"react.element"),YU=Symbol.for("react.portal"),QU=Symbol.for("react.fragment"),KU=Symbol.for("react.strict_mode"),XU=Symbol.for("react.profiler"),JU=Symbol.for("react.consumer"),ZU=Symbol.for("react.context"),tE=Symbol.for("react.forward_ref"),eW=Symbol.for("react.suspense"),tW=Symbol.for("react.suspense_list"),ny=Symbol.for("react.memo"),nW=Symbol.for("react.lazy"),sW=tE,rW=ny;function iW(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case GU:switch(e=e.type,e){case QU:case XU:case KU:case eW:case tW:return e;default:switch(e=e&&e.$$typeof,e){case ZU:case tE:case nW:case ny:return e;case JU:return e;default:return t}}case YU:return t}}}function aW(e){return iW(e)===ny}function oW(e,t,n,s,{areStatesEqual:r,areOwnPropsEqual:i,areStatePropsEqual:a}){let l=!1,c,u,d,h,f;function m(v,g){return c=v,u=g,d=e(c,u),h=t(s,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function x(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function b(){const v=e(c,u),g=!a(v,d);return d=v,g&&(f=n(d,h,u)),f}function w(v,g){const j=!i(g,u),S=!r(v,c,g,u);return c=v,u=g,j&&S?p():j?x():S?b():f}return function(g,j){return l?w(g,j):m(g,j)}}function lW(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...r}){const i=t(e,r),a=n(e,r),l=s(e,r);return oW(i,a,l,e,r)}function cW(e,t){const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=(...i)=>t(r(...i)))}return n}function Vp(e){return function(n){const s=e(n);function r(){return s}return r.dependsOnOwnProps=!1,r}}function Uw(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function nE(e,t){return function(s,{displayName:r}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=Uw(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=Uw(u),u=i(l,c)),u},i}}function sy(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function uW(e){return e&&typeof e=="object"?Vp(t=>cW(e,t)):e?typeof e=="function"?nE(e):sy(e,"mapDispatchToProps"):Vp(t=>({dispatch:t}))}function dW(e){return e?typeof e=="function"?nE(e):sy(e,"mapStateToProps"):Vp(()=>({}))}function hW(e,t,n){return{...n,...e,...t}}function fW(e){return function(n,{displayName:s,areMergedPropsEqual:r}){let i=!1,a;return function(c,u,d){const h=e(c,u,d);return i?r(h,a)||(a=h):(i=!0,a=h),a}}}function mW(e){return e?typeof e=="function"?fW(e):sy(e,"mergeProps"):()=>hW}function pW(e){e()}function gW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){pW(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var Ww={notify(){},get:()=>[]};function sE(e,t){let n,s=Ww,r=0,i=!1;function a(x){d();const b=s.subscribe(x);let w=!1;return()=>{w||(w=!0,b(),h())}}function l(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){r++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=gW())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=Ww)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>s};return p}var xW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yW=xW(),vW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",bW=vW(),wW=()=>yW||bW?y.useLayoutEffect:y.useEffect,fd=wW();function Hw(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Uf(e,t){if(Hw(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Hw(e[n[r]],t[n[r]]))return!1;return!0}var jW={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},NW={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},SW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},CW={[sW]:SW,[rW]:rE};function qw(e){return aW(e)?rE:CW[e.$$typeof]||jW}var kW=Object.defineProperty,EW=Object.getOwnPropertyNames,Gw=Object.getOwnPropertySymbols,DW=Object.getOwnPropertyDescriptor,TW=Object.getPrototypeOf,Yw=Object.prototype;function Up(e,t){if(typeof t!="string"){if(Yw){const i=TW(t);i&&i!==Yw&&Up(e,i)}let n=EW(t);Gw&&(n=n.concat(Gw(t)));const s=qw(e),r=qw(t);for(let i=0;i<n.length;++i){const a=n[i];if(!NW[a]&&!(r&&r[a])&&!(s&&s[a])){const l=DW(t,a);try{kW(e,a,l)}catch{}}}}return e}var Wf=Symbol.for("react-redux-context"),Hf=typeof globalThis<"u"?globalThis:{};function PW(){if(!y.createContext)return{};const e=Hf[Wf]??(Hf[Wf]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var iE=PW(),_W=[null,null];function MW(e,t,n){fd(()=>e(...t),n)}function AW(e,t,n,s,r,i){e.current=s,n.current=!1,r.current&&(r.current=null,i())}function RW(e,t,n,s,r,i,a,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const x=t.getState();let b,w;try{b=s(x,r.current)}catch(v){w=v,f=v}w||(f=null),b===i.current?a.current||u():(i.current=b,c.current=b,a.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function IW(e,t){return e===t}function OW(e,t,n,{pure:s,areStatesEqual:r=IW,areOwnPropsEqual:i=Uf,areStatePropsEqual:a=Uf,areMergedPropsEqual:l=Uf,forwardRef:c=!1,context:u=iE}={}){const d=u,h=dW(e),f=uW(t),m=mW(n),p=!!e;return b=>{const w=b.displayName||b.name||"Component",v=`Connect(${w})`,g={shouldHandleStateChanges:p,displayName:v,wrappedComponentName:w,WrappedComponent:b,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:r,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:l};function j(N){const[C,E,P]=y.useMemo(()=>{const{reactReduxForwardedRef:M,...Q}=N;return[N.context,M,Q]},[N]),L=y.useMemo(()=>{let M=d;return C!=null&&C.Consumer,M},[C,d]),F=y.useContext(L),$=!!N.store&&!!N.store.getState&&!!N.store.dispatch,A=!!F&&!!F.store,B=$?N.store:F.store,q=A?F.getServerState:B.getState,I=y.useMemo(()=>lW(B.dispatch,g),[B]),[T,R]=y.useMemo(()=>{if(!p)return _W;const M=sE(B,$?void 0:F.subscription),Q=M.notifyNestedSubs.bind(M);return[M,Q]},[B,$,F]),H=y.useMemo(()=>$?F:{...F,subscription:T},[$,F,T]),G=y.useRef(void 0),Z=y.useRef(P),ie=y.useRef(void 0),ce=y.useRef(!1),O=y.useRef(!1),V=y.useRef(void 0);fd(()=>(O.current=!0,()=>{O.current=!1}),[]);const D=y.useMemo(()=>()=>ie.current&&P===Z.current?ie.current:I(B.getState(),P),[B,P]),z=y.useMemo(()=>Q=>T?RW(p,B,T,I,Z,G,ce,O,ie,R,Q):()=>{},[T]);MW(AW,[Z,G,ce,P,ie,R]);let U;try{U=y.useSyncExternalStore(z,D,q?()=>I(q(),P):D)}catch(M){throw V.current&&(M.message+=`
The error may be correlated with this previous error:
${V.current.stack}

`),M}fd(()=>{V.current=void 0,ie.current=void 0,G.current=U});const X=y.useMemo(()=>y.createElement(b,{...U,ref:E}),[E,b,U]);return y.useMemo(()=>p?y.createElement(L.Provider,{value:H},X):X,[L,X,H])}const k=y.memo(j);if(k.WrappedComponent=b,k.displayName=j.displayName=v,c){const C=y.forwardRef(function(P,L){return y.createElement(k,{...P,reactReduxForwardedRef:L})});return C.displayName=v,C.WrappedComponent=b,Up(C,b)}return Up(k,b)}}var aE=OW;function LW(e){const{children:t,context:n,serverState:s,store:r}=e,i=y.useMemo(()=>{const c=sE(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),a=y.useMemo(()=>r.getState(),[r]);fd(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=n||iE;return y.createElement(l.Provider,{value:i},t)}var FW=LW,$W="Invariant failed";function zW(e,t){throw new Error($W)}var Ln=function(t){var n=t.top,s=t.right,r=t.bottom,i=t.left,a=s-i,l=r-n,c={top:n,right:s,bottom:r,left:i,width:a,height:l,x:i,y:n,center:{x:(s+i)/2,y:(r+n)/2}};return c},ry=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Qw=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},BW=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},qf={top:0,right:0,bottom:0,left:0},iy=function(t){var n=t.borderBox,s=t.margin,r=s===void 0?qf:s,i=t.border,a=i===void 0?qf:i,l=t.padding,c=l===void 0?qf:l,u=Ln(ry(n,r)),d=Ln(Qw(n,a)),h=Ln(Qw(d,c));return{marginBox:u,borderBox:Ln(n),paddingBox:d,contentBox:h,margin:r,border:a,padding:c}},pn=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var r=Number(n);return isNaN(r)&&zW(),r},VW=function(){return{x:window.pageXOffset,y:window.pageYOffset}},md=function(t,n){var s=t.borderBox,r=t.border,i=t.margin,a=t.padding,l=BW(s,n);return iy({borderBox:l,border:r,margin:i,padding:a})},pd=function(t,n){return n===void 0&&(n=VW()),md(t,n)},oE=function(t,n){var s={top:pn(n.marginTop),right:pn(n.marginRight),bottom:pn(n.marginBottom),left:pn(n.marginLeft)},r={top:pn(n.paddingTop),right:pn(n.paddingRight),bottom:pn(n.paddingBottom),left:pn(n.paddingLeft)},i={top:pn(n.borderTopWidth),right:pn(n.borderRightWidth),bottom:pn(n.borderBottomWidth),left:pn(n.borderLeftWidth)};return iy({borderBox:t,margin:s,padding:r,border:i})},lE=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return oE(n,s)},Nl=function(t){var n=[],s=null,r=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return r.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},r};function gd(){return gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gd.apply(null,arguments)}function cE(e,t){}cE.bind(null,"warn");cE.bind(null,"error");function mr(){}function UW(e,t){return{...e,...t}}function jn(e,t,n){const s=t.map(r=>{const i=UW(n,r.options);return e.addEventListener(r.eventName,r.fn,i),function(){e.removeEventListener(r.eventName,r.fn,i)}});return function(){s.forEach(i=>{i()})}}const WW="Invariant failed";class xd extends Error{}xd.prototype.toString=function(){return this.message};function J(e,t){throw new xd(WW)}class HW extends ne.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=mr,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof xd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=jn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof xd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const qW=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,yd=e=>e+1,GW=e=>`
  You have lifted an item in position ${yd(e.source.index)}
`,uE=(e,t)=>{const n=e.droppableId===t.droppableId,s=yd(e.index),r=yd(t.index);return n?`
      You have moved the item from position ${s}
      to position ${r}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${r}
  `},dE=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,YW=e=>{const t=e.destination;if(t)return uE(e.source,t);const n=e.combine;return n?dE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Kw=e=>`
  The item has returned to its starting position
  of ${yd(e.index)}
`,QW=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Kw(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${uE(e.source,t)}
    `:n?`
      You have dropped the item.
      ${dE(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Kw(e.source)}
  `},hu={dragHandleUsageInstructions:qW,onDragStart:GW,onDragUpdate:YW,onDragEnd:QW};function KW(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function hE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!KW(e[n],t[n]))return!1;return!0}function Ne(e,t){const n=y.useState(()=>({inputs:t,result:e()}))[0],s=y.useRef(!0),r=y.useRef(n),a=s.current||!!(t&&r.current.inputs&&hE(t,r.current.inputs))?r.current:{inputs:t,result:e()};return y.useEffect(()=>{s.current=!1,r.current=a},[a]),a.result}function ge(e,t){return Ne(()=>e,t)}const xt={x:0,y:0},bt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),tn=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),pr=(e,t)=>e.x===t.x&&e.y===t.y,Aa=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),hi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Sl=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Xw=(e,t)=>Math.min(...t.map(n=>Sl(e,n))),fE=e=>t=>({x:e(t.x),y:e(t.y)});var XW=(e,t)=>{const n=Ln({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Ql=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Jw=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],JW={top:0,right:0,bottom:0,left:0},ZW=(e,t)=>t?Ql(e,t.scroll.diff.displacement):e,eH=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,tH=(e,t)=>t&&t.shouldClipSubject?XW(t.pageMarginBox,e):Ln(e);var pa=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const r=ZW(e.marginBox,s),i=eH(r,n,t),a=tH(i,s);return{page:e,withPlaceholder:t,active:a}},ay=(e,t)=>{e.frame||J();const n=e.frame,s=tn(t,n.scroll.initial),r=Aa(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:r},max:n.scroll.max}},a=pa({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:a}};function gt(e,t=hE){let n=null;function s(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;const i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return s.clear=function(){n=null},s}const mE=gt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),pE=gt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),dh=gt(e=>Object.values(e)),nH=gt(e=>Object.values(e));var Ra=gt((e,t)=>nH(t).filter(s=>e===s.descriptor.droppableId).sort((s,r)=>s.descriptor.index-r.descriptor.index));function oy(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function hh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var fh=gt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),sH=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:r})=>{if(!n.isCombineEnabled||!oy(r))return null;function a(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...r,at:p}}const l=r.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=fh(t,s);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&J();const h=d-1;if(h<0)return null;const f=u[h];return a(f.descriptor.id)},Ia=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const gE={point:xt,value:0},Cl={invisible:{},visible:{},all:[]},rH={displaced:Cl,displacedBy:gE,at:null};var Sn=(e,t)=>n=>e<=n&&n<=t,xE=e=>{const t=Sn(e.top,e.bottom),n=Sn(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),a=n(s.left)||n(s.right);if(i&&a)return!0;const c=s.top<e.top&&s.bottom>e.bottom,u=s.left<e.left&&s.right>e.right;return c&&u?!0:c&&a||u&&i}},iH=e=>{const t=Sn(e.top,e.bottom),n=Sn(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const ly={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},yE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var aH=e=>t=>{const n=Sn(t.top,t.bottom),s=Sn(t.left,t.right);return r=>e===ly?n(r.top)&&n(r.bottom):s(r.left)&&s(r.right)};const oH=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:xt;return Ql(e,n)},lH=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,cH=(e,t,n)=>n(t)(e),cy=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:r})=>{const i=s?oH(e,t):e;return lH(i,t,r)&&cH(i,n,r)},uH=e=>cy({...e,isVisibleThroughFrameFn:xE}),vE=e=>cy({...e,isVisibleThroughFrameFn:iH}),dH=e=>cy({...e,isVisibleThroughFrameFn:aH(e.destination.axis)}),hH=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:r}=t;if(s[e])return!1;const i=r[e];return i?i.shouldAnimate:!0};function fH(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ln(ry(n,s))}function kl({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:r,last:i}){return e.reduce(function(l,c){const u=fH(c,n),d=c.descriptor.id;if(l.all.push(d),!uH({target:u,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=hH(d,i,r),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function mH(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Zw({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const r=mH(e,{inHomeList:t});return{displaced:Cl,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:r}}}}function vd({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:r,last:i,index:a,forceShouldAnimate:l}){const c=Ia(e,n);if(a==null)return Zw({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const u=t.find(p=>p.descriptor.index===a);if(!u)return Zw({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const d=fh(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:kl({afterDragging:f,destination:n,displacedBy:r,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function wr(e,t){return!!t.effected[e]}var pH=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:r})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return wr(i,r)?e?l:l-1:e?l+1:l},gH=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const r=s.index,i=e?r+1:r-1,a=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<a||i>c?null:i},xH=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:r,insideDestination:i,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||J(),u.type==="REORDER"){const h=gH({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:vd({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})}const d=pH({isMovingForward:e,destination:r,displaced:a.displaced,draggables:s,combine:u.combine,afterCritical:c});return d==null?null:vd({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})},yH=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const r=!!(e.visible[n]||e.invisible[n]);return wr(n,t)?r?xt:Aa(s.point):r?s.point:xt},vH=({afterCritical:e,impact:t,draggables:n})=>{const s=hh(t);s||J();const r=s.draggableId,i=n[r].page.borderBox.center,a=yH({displaced:t.displaced,afterCritical:e,combineWith:r,displacedBy:t.displacedBy});return bt(i,a)};const bE=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,bH=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,uy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,e1=({axis:e,moveRelativeTo:t,isMoving:n})=>hi(e.line,t.marginBox[e.end]+bE(e,n),uy(e,t.marginBox,n)),t1=({axis:e,moveRelativeTo:t,isMoving:n})=>hi(e.line,t.marginBox[e.start]-bH(e,n),uy(e,t.marginBox,n)),wH=({axis:e,moveInto:t,isMoving:n})=>hi(e.line,t.contentBox[e.start]+bE(e,n),uy(e,t.contentBox,n));var jH=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:r})=>{const i=Ra(s.descriptor.id,n),a=t.page,l=s.axis;if(!i.length)return wH({axis:l,moveInto:s.page,isMoving:a});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(wr(d,r))return t1({axis:l,moveRelativeTo:f.page,isMoving:a});const m=md(f.page,u.point);return t1({axis:l,moveRelativeTo:m,isMoving:a})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return a.borderBox.center;if(wr(h.descriptor.id,r)){const f=md(h.page,Aa(r.displacedBy.point));return e1({axis:l,moveRelativeTo:f,isMoving:a})}return e1({axis:l,moveRelativeTo:h.page,isMoving:a})},Wp=(e,t)=>{const n=e.frame;return n?bt(t,n.scroll.diff.displacement):t};const NH=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:r})=>{const i=t.page.borderBox.center,a=e.at;return!n||!a?i:a.type==="REORDER"?jH({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:r}):vH({impact:e,draggables:s,afterCritical:r})};var mh=e=>{const t=NH(e),n=e.droppable;return n?Wp(n,t):t},wE=(e,t)=>{const n=tn(t,e.scroll.initial),s=Aa(n);return{frame:Ln({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function n1(e,t){return e.map(n=>t[n])}function SH(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var CH=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:r})=>{const i=wE(t,bt(t.scroll.current,r)),a=n.frame?ay(n,bt(n.frame.scroll.current,r)):n,l=e.displaced,c=kl({afterDragging:n1(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=kl({afterDragging:n1(l.all,s),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const x=SH(p,f);if(x){h[p]=x;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},kH=(e,t)=>bt(e.scroll.diff.displacement,t),dy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=kH(n,e),r=tn(s,t.page.borderBox.center);return bt(t.client.borderBox.center,r)},jE=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:r,onlyOnMainAxis:i=!1})=>{const a=tn(n,e.page.borderBox.center),c={target:Ql(e.page.borderBox,a),destination:t,withDroppableDisplacement:r,viewport:s};return i?dH(c):vE(c)},EH=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:r,viewport:i,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=Ra(n.descriptor.id,s),d=Ia(t,n),h=sH({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:r})||xH({isMovingForward:e,isInHomeList:d,draggable:t,draggables:s,destination:n,insideDestination:u,previousImpact:r,viewport:i,afterCritical:c});if(!h)return null;const f=mh({impact:h,draggable:t,droppable:n,draggables:s,afterCritical:c});if(jE({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:dy({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=tn(f,a),x=CH({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:p});return{clientSelection:l,impact:x,scrollJumpRequest:p}};const At=e=>{const t=e.subject.active;return t||J(),t};var DH=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:r})=>{const i=n.subject.active;if(!i)return null;const a=n.axis,l=Sn(i[a.start],i[a.end]),c=dh(s).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>xE(r.frame)(At(d))).filter(d=>{const h=At(d);return e?i[a.crossAxisEnd]<h[a.crossAxisEnd]:h[a.crossAxisStart]<i[a.crossAxisStart]}).filter(d=>{const h=At(d),f=Sn(h[a.start],h[a.end]);return l(h[a.start])||l(h[a.end])||f(i[a.start])||f(i[a.end])}).sort((d,h)=>{const f=At(d)[a.crossAxisStart],m=At(h)[a.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>At(d)[a.crossAxisStart]===At(f[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>Sn(At(d)[a.start],At(d)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>At(d)[a.start]-At(h)[a.start])[0]:c.sort((d,h)=>{const f=Xw(t,Jw(At(d))),m=Xw(t,Jw(At(h)));return f!==m?f-m:At(d)[a.start]-At(h)[a.start]})[0]};const s1=(e,t)=>{const n=e.page.borderBox.center;return wr(e.descriptor.id,t)?tn(n,t.displacedBy.point):n},TH=(e,t)=>{const n=e.page.borderBox;return wr(e.descriptor.id,t)?Ql(n,Aa(t.displacedBy.point)):n};var PH=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:r})=>s.filter(a=>vE({target:TH(a,r),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=Sl(e,Wp(n,s1(a,r))),u=Sl(e,Wp(n,s1(l,r)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Kl=gt(function(t,n){const s=n[t.line];return{value:s,point:hi(t.line,s)}});const _H=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return hi(s.line,t[s.line]);const r=e.subject.page.contentBox[s.size],c=Ra(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[s.size],0)+t[s.line]-r;return c<=0?null:hi(s.line,c)},NE=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),SE=(e,t,n)=>{const s=e.frame;Ia(t,e)&&J(),e.subject.withPlaceholder&&J();const r=Kl(e.axis,t.displaceBy).point,i=_H(e,r,n),a={placeholderSize:r,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const d=pa({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?bt(s.scroll.max,i):s.scroll.max,c=NE(s,l),u=pa({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},MH=e=>{const t=e.subject.withPlaceholder;t||J();const n=e.frame;if(!n){const a=pa({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const s=t.oldFrameMaxScroll;s||J();const r=NE(n,s),i=pa({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null});return{...e,subject:i,frame:r}};var AH=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:r,destination:i,viewport:a,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:Cl,displacedBy:gE,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=mh({impact:h,draggable:s,droppable:i,draggables:r,afterCritical:l}),m=Ia(s,i)?i:SE(i,s,r);return jE({draggable:s,destination:m,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?h:h+1})(),d=Kl(i.axis,s.displaceBy);return vd({draggable:s,insideDestination:n,destination:i,viewport:a,displacedBy:d,last:Cl,index:u})},RH=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:r,droppables:i,viewport:a,afterCritical:l})=>{const c=DH({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:a});if(!c)return null;const u=Ra(c.descriptor.id,r),d=PH({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=AH({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:r,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;const f=mh({impact:h,draggable:n,droppable:c,draggables:r,afterCritical:l});return{clientSelection:dy({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null}},rn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const IH=(e,t)=>{const n=rn(e);return n?t[n]:null};var OH=({state:e,type:t})=>{const n=IH(e.impact,e.dimensions.droppables),s=!!n,r=e.dimensions.droppables[e.critical.droppable.id],i=n||r,a=i.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?EH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):RH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Ur(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function CE(e){const t=Sn(e.top,e.bottom),n=Sn(e.left,e.right);return function(r){return t(r.y)&&n(r.x)}}function LH(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function FH({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,r=n.map(i=>{const a=i.axis,l=hi(i.axis.line,e.center[a.line],i.page.borderBox.center[a.crossAxisLine]);return{id:i.descriptor.id,distance:Sl(s,l)}}).sort((i,a)=>a.distance-i.distance);return r[0]?r[0].id:null}function $H({pageBorderBox:e,draggable:t,droppables:n}){const s=dh(n).filter(r=>{if(!r.isEnabled)return!1;const i=r.subject.active;if(!i||!LH(e,i))return!1;if(CE(i)(e.center))return!0;const a=r.axis,l=i.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],d=Sn(i[a.crossAxisStart],i[a.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return s.length?s.length===1?s[0].descriptor.id:FH({pageBorderBox:e,draggable:t,candidates:s}):null}const kE=(e,t)=>Ln(Ql(e,t));var zH=(e,t)=>{const n=e.frame;return n?kE(t,n.scroll.diff.value):t};function EE({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function BH({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var VH=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:r,viewport:i,afterCritical:a})=>{const l=n.axis,c=Kl(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=fh(t,s).find(x=>{const b=x.descriptor.id,w=x.page.borderBox.center[l.line],v=wr(b,a),g=EE({displaced:r,id:b});return v?g?h<=w:d<w-u:g?h<=w+u:d<w})||null,p=BH({draggable:t,closest:m,inHomeList:Ia(t,n)});return vd({draggable:t,insideDestination:s,destination:n,viewport:i,last:r,displacedBy:c,index:p})};const UH=4;var WH=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const a=s.axis,l=Kl(s.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=fh(e,r).find(p=>{const x=p.descriptor.id,b=p.page.borderBox,v=b[a.size]/UH,g=wr(x,i),j=EE({displaced:n.displaced,id:x});return g?j?d>b[a.start]+v&&d<b[a.end]-v:u>b[a.start]-c+v&&u<b[a.end]-c-v:j?d>b[a.start]+c+v&&d<b[a.end]+c-v:u>b[a.start]+v&&u<b[a.end]-v});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:s.descriptor.id}}}:null},DE=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:r,viewport:i,afterCritical:a})=>{const l=kE(t.page.borderBox,e),c=$H({pageBorderBox:l,draggable:t,droppables:s});if(!c)return rH;const u=s[c],d=Ra(u.descriptor.id,n),h=zH(u,l);return WH({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:r,destination:u,insideDestination:d,afterCritical:a})||VH({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:r.displaced,viewport:i,afterCritical:a})},hy=(e,t)=>({...e,[t.descriptor.id]:t});const HH=({previousImpact:e,impact:t,droppables:n})=>{const s=rn(e),r=rn(t);if(!s||s===r)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const a=MH(i);return hy(n,a)};var qH=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:r})=>{const i=HH({previousImpact:s,impact:r,droppables:n}),a=rn(r);if(!a)return i;const l=n[a];if(Ia(e,l)||l.subject.withPlaceholder)return i;const c=SE(l,e,t);return hy(i,c)},Bo=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:r,scrollJumpRequest:i})=>{const a=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=tn(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:bt(e.initial.client.borderBoxCenter,u)},h={selection:bt(d.selection,a.scroll.current),borderBoxCenter:bt(d.borderBoxCenter,a.scroll.current),offset:bt(d.offset,a.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:f};const m=l.draggables[e.critical.draggable.id],p=r||DE({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),x=qH({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:x},impact:p,viewport:a,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function GH(e,t){return e.map(n=>t[n])}var TE=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:r})=>{const i=e.displaced,a=GH(i.all,n),l=kl({afterDragging:a,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:r,last:i});return{...e,displaced:l}},PE=({impact:e,draggable:t,droppable:n,draggables:s,viewport:r,afterCritical:i})=>{const a=mh({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return dy({pageBorderBoxCenter:a,draggable:t,viewport:r})},_E=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&J();const s=e.impact,r=n||e.viewport,i=t||e.dimensions,{draggables:a,droppables:l}=i,c=a[e.critical.draggable.id],u=rn(s);u||J();const d=l[u],h=TE({impact:s,viewport:r,destination:d,draggables:a}),f=PE({impact:h,draggable:c,droppable:d,draggables:a,viewport:r,afterCritical:e.afterCritical});return Bo({impact:h,clientSelection:f,state:e,dimensions:i,viewport:r})},YH=e=>({index:e.index,droppableId:e.droppableId}),ME=({draggable:e,home:t,draggables:n,viewport:s})=>{const r=Kl(t.axis,e.displaceBy),i=Ra(t.descriptor.id,n),a=i.indexOf(e);a===-1&&J();const l=i.slice(a+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:r,effected:c};return{impact:{displaced:kl({afterDragging:l,destination:t,displacedBy:r,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:YH(e.descriptor)}},afterCritical:u}},QH=(e,t)=>({draggables:e.draggables,droppables:hy(e.droppables,t)}),KH=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=md(e.client,t),r=pd(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:r}},XH=e=>{const t=e.frame;return t||J(),t},JH=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(r=>{const i=r.descriptor.droppableId,a=t[i],c=XH(a).scroll.diff.value,u=bt(s,c);return KH({draggable:r,offset:u,initialWindowScroll:n.scroll.initial})})},ZH=({state:e,published:t})=>{const n=t.modified.map(w=>{const v=e.dimensions.droppables[w.droppableId];return ay(v,w.scroll)}),s={...e.dimensions.droppables,...mE(n)},r=pE(JH({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...r};t.removals.forEach(w=>{delete i[w]});const a={droppables:s,draggables:i},l=rn(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],d=a.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=ME({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=DE({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),x={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Hp=e=>e.movementMode==="SNAP",Gf=(e,t,n)=>{const s=QH(e.dimensions,t);return!Hp(e)||n?Bo({state:e,dimensions:s}):_E({state:e,dimensions:s})};function Yf(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const r1={phase:"IDLE",completed:null,shouldFlush:!1};var e7=(e=r1,t)=>{if(t.type==="FLUSH")return{...r1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&J();const{critical:n,clientSelection:s,viewport:r,dimensions:i,movementMode:a}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:s,borderBoxCenter:l.client.borderBox.center,offset:xt},d={client:u,page:{selection:bt(u.selection,r.scroll.initial),borderBoxCenter:bt(u.selection,r.scroll.initial),offset:bt(u.selection,r.scroll.diff.value)}},h=dh(i.droppables).every(x=>!x.isFixedOnPage),{impact:f,afterCritical:m}=ME({draggable:l,home:c,draggables:i.draggables,viewport:r});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&J(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||J(),ZH({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Ur(e)||J();const{client:n}=t.payload;return pr(n,e.current.client.selection)?e:Bo({state:e,clientSelection:n,impact:Hp(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Yf(e);Ur(e)||J();const{id:n,newScroll:s}=t.payload,r=e.dimensions.droppables[n];if(!r)return e;const i=ay(r,s);return Gf(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ur(e)||J();const{id:n,isEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||J(),r.isEnabled===s&&J();const i={...r,isEnabled:s};return Gf(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ur(e)||J();const{id:n,isCombineEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||J(),r.isCombineEnabled===s&&J();const i={...r,isCombineEnabled:s};return Gf(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Ur(e)||J(),e.isWindowScrollAllowed||J();const n=t.payload.newScroll;if(pr(e.viewport.scroll.current,n))return Yf(e);const s=wE(e.viewport,n);return Hp(e)?_E({state:e,viewport:s}):Bo({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ur(e))return e;const n=t.payload.maxScroll;if(pr(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&J();const n=OH({state:e,type:t.type});return n?Bo({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&J(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:r}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||J(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:r,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Te(e,t){return e instanceof Object&&"type"in e&&e.type===t}const t7=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),n7=e=>({type:"LIFT",payload:e}),s7=e=>({type:"INITIAL_PUBLISH",payload:e}),r7=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),i7=()=>({type:"COLLECTION_STARTING",payload:null}),a7=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),o7=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),l7=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),AE=e=>({type:"MOVE",payload:e}),c7=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),u7=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),d7=()=>({type:"MOVE_UP",payload:null}),h7=()=>({type:"MOVE_DOWN",payload:null}),f7=()=>({type:"MOVE_RIGHT",payload:null}),m7=()=>({type:"MOVE_LEFT",payload:null}),fy=()=>({type:"FLUSH",payload:null}),p7=e=>({type:"DROP_ANIMATE",payload:e}),my=e=>({type:"DROP_COMPLETE",payload:e}),RE=e=>({type:"DROP",payload:e}),g7=e=>({type:"DROP_PENDING",payload:e}),IE=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var x7=e=>({getState:t,dispatch:n})=>s=>r=>{if(!Te(r,"LIFT")){s(r);return}const{id:i,clientSelection:a,movementMode:l}=r.payload,c=t();c.phase==="DROP_ANIMATING"&&n(my({completed:c.completed})),t().phase!=="IDLE"&&J(),n(fy()),n(t7({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(s7({critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:m}))},y7=e=>()=>t=>n=>{Te(n,"INITIAL_PUBLISH")&&e.dragging(),Te(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Te(n,"FLUSH")||Te(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const py={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},El={opacity:{drop:0,combining:.7},scale:{drop:.75}},OE={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ar=`${OE.outOfTheWay}s ${py.outOfTheWay}`,Vo={fluid:`opacity ${Ar}`,snap:`transform ${Ar}, opacity ${Ar}`,drop:e=>{const t=`${e}s ${py.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Ar}`,placeholder:`height ${Ar}, width ${Ar}, margin ${Ar}`},i1=e=>pr(e,xt)?void 0:`translate(${e.x}px, ${e.y}px)`,qp={moveTo:i1,drop:(e,t)=>{const n=i1(e);if(n)return t?`${n} scale(${El.scale.drop})`:n}},{minDropTime:Gp,maxDropTime:LE}=OE,v7=LE-Gp,a1=1500,b7=.6;var w7=({current:e,destination:t,reason:n})=>{const s=Sl(e,t);if(s<=0)return Gp;if(s>=a1)return LE;const r=s/a1,i=Gp+v7*r,a=n==="CANCEL"?i*b7:i;return Number(a.toFixed(2))},j7=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:r})=>{const{draggables:i,droppables:a}=n,l=rn(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],d=PE({impact:e,draggable:t,draggables:i,afterCritical:r,droppable:c||u,viewport:s});return tn(d,t.client.borderBox.center)},N7=({draggables:e,reason:t,lastImpact:n,home:s,viewport:r,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:TE({draggables:e,impact:i,destination:s,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Cl},didDropInsideDroppable:!0};const S7=({getState:e,dispatch:t})=>n=>s=>{if(!Te(s,"DROP")){n(s);return}const r=e(),i=s.payload.reason;if(r.phase==="COLLECTING"){t(g7({reason:i}));return}if(r.phase==="IDLE")return;r.phase==="DROP_PENDING"&&r.isWaiting&&J(),r.phase==="DRAGGING"||r.phase==="DROP_PENDING"||J();const l=r.critical,c=r.dimensions,u=c.draggables[r.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=N7({reason:i,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),f=h?oy(d):null,m=h?hh(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:r.movementMode,destination:f,combine:m},b=j7({impact:d,draggable:u,dimensions:c,viewport:r.viewport,afterCritical:r.afterCritical}),w={critical:r.critical,afterCritical:r.afterCritical,result:x,impact:d};if(!(!pr(r.current.client.offset,b)||!!x.combine)){t(my({completed:w}));return}const g=w7({current:r.current.client.offset,destination:b,reason:i});t(p7({newHomeClientOffset:b,dropDuration:g,completed:w}))};var FE=()=>({x:window.pageXOffset,y:window.pageYOffset});function C7(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function k7({onWindowScroll:e}){function t(){e(FE())}const n=Nl(t),s=C7(n);let r=mr;function i(){return r!==mr}function a(){i()&&J(),r=jn(window,[s])}function l(){i()||J(),n.cancel(),r(),r=mr}return{start:a,stop:l,isActive:i}}const E7=e=>Te(e,"DROP_COMPLETE")||Te(e,"DROP_ANIMATE")||Te(e,"FLUSH"),D7=e=>{const t=k7({onWindowScroll:n=>{e.dispatch(c7({newScroll:n}))}});return n=>s=>{!t.isActive()&&Te(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&E7(s)&&t.stop(),n(s)}};var T7=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),r=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return r.wasCalled=()=>t,r},P7=()=>{const e=[],t=r=>{const i=e.findIndex(l=>l.timerId===r);i===-1&&J();const[a]=e.splice(i,1);a.callback()};return{add:r=>{const i=setTimeout(()=>t(i)),a={timerId:i,callback:r};e.push(a)},flush:()=>{if(!e.length)return;const r=[...e];e.length=0,r.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const _7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,M7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,A7=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},ao=(e,t)=>{t()},zc=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Qf(e,t,n,s){if(!e){n(s(t));return}const r=T7(n);e(t,{announce:r}),r.wasCalled()||n(s(t))}var R7=(e,t)=>{const n=P7();let s=null;const r=(h,f)=>{s&&J(),ao("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{s&&J(),ao("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(zc(h,f))})},a=(h,f)=>{s&&J();const m=zc(h,f);s={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{ao("onDragStart",()=>Qf(e().onDragStart,m,t,hu.onDragStart))})},l=(h,f)=>{const m=oy(f),p=hh(f);s||J();const x=!A7(h,s.lastCritical);x&&(s.lastCritical=h);const b=!_7(s.lastLocation,m);b&&(s.lastLocation=m);const w=!M7(s.lastCombine,p);if(w&&(s.lastCombine=p),!x&&!b&&!w)return;const v={...zc(h,s.mode),combine:p,destination:m};n.add(()=>{ao("onDragUpdate",()=>Qf(e().onDragUpdate,v,t,hu.onDragUpdate))})},c=()=>{s||J(),n.flush()},u=h=>{s||J(),s=null,ao("onDragEnd",()=>Qf(e().onDragEnd,h,t,hu.onDragEnd))};return{beforeCapture:r,beforeStart:i,start:a,update:l,flush:c,drop:u,abort:()=>{if(!s)return;const h={...zc(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},I7=(e,t)=>{const n=R7(e,t);return s=>r=>i=>{if(Te(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Te(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),r(i),n.start(l,i.payload.movementMode);return}if(Te(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),r(i),n.drop(l);return}if(r(i),Te(i,"FLUSH")){n.abort();return}const a=s.getState();a.phase==="DRAGGING"&&n.update(a.critical,a.impact)}};const O7=e=>t=>n=>{if(!Te(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&J(),e.dispatch(my({completed:s.completed}))},L7=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return r=>i=>{if((Te(i,"FLUSH")||Te(i,"DROP_COMPLETE")||Te(i,"DROP_ANIMATION_FINISHED"))&&s(),r(i),!Te(i,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(IE())}};n=requestAnimationFrame(()=>{n=null,t=jn(window,[a])})}};var F7=e=>()=>t=>n=>{(Te(n,"DROP_COMPLETE")||Te(n,"FLUSH")||Te(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},$7=e=>{let t=!1;return()=>n=>s=>{if(Te(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Te(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Te(s,"DROP_COMPLETE")){t=!1;const r=s.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const z7=e=>Te(e,"DROP_COMPLETE")||Te(e,"DROP_ANIMATE")||Te(e,"FLUSH");var B7=e=>t=>n=>s=>{if(z7(s)){e.stop(),n(s);return}if(Te(s,"INITIAL_PUBLISH")){n(s);const r=t.getState();r.phase!=="DRAGGING"&&J(),e.start(r);return}n(s),e.scroll(t.getState())};const V7=e=>t=>n=>{if(t(n),!Te(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(RE({reason:s.reason})))},U7=eE;var W7=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:r,autoScroller:i})=>Zk(e7,U7(LU(y7(n),F7(e),x7(e),S7,O7,L7,V7,B7(i),D7,$7(t),I7(s,r))));const Kf=()=>({additions:{},removals:{},modified:{}});function H7({registry:e,callbacks:t}){let n=Kf(),s=null;const r=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(xt)).sort((p,x)=>p.descriptor.index-x.descriptor.index),f=Object.keys(d).map(p=>{const b=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:b}}),m={additions:h,removals:Object.keys(u),modified:f};n=Kf(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],r()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],r()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=Kf())}}}var $E=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const r=tn({x:t,y:e},{x:s,y:n});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},zE=()=>{const e=document.documentElement;return e||J(),e},BE=()=>{const e=zE();return $E({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},q7=()=>{const e=FE(),t=BE(),n=e.y,s=e.x,r=zE(),i=r.clientWidth,a=r.clientHeight,l=s+i,c=n+a;return{frame:Ln({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:xt,displacement:xt}}}},G7=({critical:e,scrollOptions:t,registry:n})=>{const s=q7(),r=s.scroll.current,i=e.droppable,a=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(r,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(r));return{dimensions:{draggables:pE(l),droppables:mE(a)},critical:e,viewport:s}};function o1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Y7=(e,t)=>{let n=null;const s=H7({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=(f,m)=>{e.droppable.exists(f)||J(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},a=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;s.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||J();const m=n.critical.draggable;f.type==="ADDITION"&&o1(e,m,f.value)&&s.add(f.value),f.type==="REMOVAL"&&o1(e,m,f.value)&&s.remove(f.value)};return{updateDroppableIsEnabled:r,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:a,startPublishing:f=>{n&&J();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),x={draggable:m.descriptor,droppable:p.descriptor},b=e.subscribe(u);return n={critical:x,unsubscribe:b},G7({critical:x,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},VE=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Q7=e=>{window.scrollBy(e.x,e.y)};const K7=gt(e=>dh(e).filter(t=>!(!t.isEnabled||!t.frame))),X7=(e,t)=>K7(t).find(s=>(s.frame||J(),CE(s.frame.pageMarginBox)(e)))||null;var J7=({center:e,destination:t,droppables:n})=>{if(t){const r=n[t];return r.frame?r:null}return X7(e,n)};const Dl={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Z7=(e,t,n=()=>Dl)=>{const s=n(),r=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:r,maxScrollValueAt:i}},UE=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},gy=1,eq=(e,t,n=()=>Dl)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return gy;const i=1-UE({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=s.maxPixelScroll*s.ease(i);return Math.ceil(a)},tq=(e,t,n)=>{const s=n(),r=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,a=t,l=i,u=Date.now()-a;if(u>=i)return e;if(u<r)return gy;const d=UE({startOfRange:r,endOfRange:l,current:u}),h=e*s.ease(d);return Math.ceil(h)},l1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:r})=>{const i=eq(e,t,r);return i===0?0:s?Math.max(tq(i,n,r),gy):i},c1=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=Z7(e,s,i);return t[s.end]<t[s.start]?l1({distanceToEdge:t[s.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i}):-1*l1({distanceToEdge:t[s.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})},nq=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,r=t.width>e.width;return!r&&!s?n:r&&s?null:{x:r?0:n.x,y:s?0:n.y}};const sq=fE(e=>e===0?0:e);var WE=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=c1({container:t,distanceToEdges:a,dragStartTime:e,axis:ly,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),c=c1({container:t,distanceToEdges:a,dragStartTime:e,axis:yE,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),u=sq({x:c,y:l});if(pr(u,xt))return null;const d=nq({container:t,subject:n,proposedScroll:u});return d?pr(d,xt)?null:d:null};const rq=fE(e=>e===0?0:e>0?1:-1),xy=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const r=bt(t,s),i={x:e(r.x,n.x),y:e(r.y,n.y)};return pr(i,xt)?null:i}})(),HE=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},r=rq(n),i=xy({max:s,current:t,change:r});return!i||r.x!==0&&i.x===0||r.y!==0&&i.y===0},yy=(e,t)=>HE({current:e.scroll.current,max:e.scroll.max,change:t}),iq=(e,t)=>{if(!yy(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return xy({current:s,max:n,change:t})},vy=(e,t)=>{const n=e.frame;return n?HE({current:n.scroll.current,max:n.scroll.max,change:t}):!1},aq=(e,t)=>{const n=e.frame;return!n||!vy(e,t)?null:xy({current:n.scroll.current,max:n.scroll.max,change:t})};var oq=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=WE({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return a&&yy(e,a)?a:null},lq=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=e.frame;if(!a)return null;const l=WE({dragStartTime:s,container:a.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return l&&vy(e,l)?l:null},u1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:r,getAutoScrollerOptions:i})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=oq({dragStartTime:t,viewport:h,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){s(f);return}}const u=J7({center:a,destination:rn(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=lq({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&r(u.descriptor.id,d)},cq=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Dl})=>{const s=Nl(e),r=Nl(t);let i=null;const a=u=>{i||J();const{shouldUseTimeDampening:d,dragStartTime:h}=i;u1({state:u,scrollWindow:s,scrollDroppable:r,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&J();const d=Date.now();let h=!1;const f=()=>{h=!0};u1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&a(u)},stop:()=>{i&&(s.cancel(),r.cancel(),i=null)},scroll:a}},uq=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const u=bt(l.current.client.selection,c);e({client:u})},r=(l,c)=>{if(!vy(l,c))return c;const u=aq(l,c);if(!u)return t(l.descriptor.id,c),null;const d=tn(c,u);return t(l.descriptor.id,d),tn(c,d)},i=(l,c,u)=>{if(!l||!yy(c,u))return u;const d=iq(c,u);if(!d)return n(u),null;const h=tn(u,d);return n(h),tn(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=rn(l.impact);u||J();const d=r(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&s(l,f)}},dq=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const r=cq({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=uq({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){r.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:r.start,stop:r.stop}};const ga="data-rfd",xa=(()=>{const e=`${ga}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Yp=(()=>{const e=`${ga}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),hq=(()=>{const e=`${ga}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),d1={contextId:`${ga}-scroll-container-context-id`},fq=e=>t=>`[${t}="${e}"]`,oo=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),mq="pointer-events: none;";var pq=e=>{const t=fq(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(xa.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:mq,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${Vo.outOfTheWay};
    `;return{selector:t(Yp.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),r={selector:t(hq.contextId),styles:{always:"overflow-anchor: none;"}},a=[s,n,r,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:oo(a,"always"),resting:oo(a,"resting"),dragging:oo(a,"dragging"),dropAnimating:oo(a,"dropAnimating"),userCancel:oo(a,"userCancel")}};const an=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect,Xf=()=>{const e=document.querySelector("head");return e||J(),e},h1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function gq(e,t){const n=Ne(()=>pq(e),[e]),s=y.useRef(null),r=y.useRef(null),i=ge(gt(h=>{const f=r.current;f||J(),f.textContent=h}),[]),a=ge(h=>{const f=s.current;f||J(),f.textContent=h},[]);an(()=>{!s.current&&!r.current||J();const h=h1(t),f=h1(t);return s.current=h,r.current=f,h.setAttribute(`${ga}-always`,e),f.setAttribute(`${ga}-dynamic`,e),Xf().appendChild(h),Xf().appendChild(f),a(n.always),i(n.resting),()=>{const m=p=>{const x=p.current;x||J(),Xf().removeChild(x),p.current=null};m(s),m(r)}},[t,a,i,n.always,n.resting,e]);const l=ge(()=>i(n.dragging),[i,n.dragging]),c=ge(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=ge(()=>{r.current&&i(n.resting)},[i,n.resting]);return Ne(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function qE(e,t){return Array.from(e.querySelectorAll(t))}var GE=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function ph(e){return e instanceof GE(e).HTMLElement}function xq(e,t){const n=`[${xa.contextId}="${e}"]`,s=qE(document,n);if(!s.length)return null;const r=s.find(i=>i.getAttribute(xa.draggableId)===t);return!r||!ph(r)?null:r}function yq(e){const t=y.useRef({}),n=y.useRef(null),s=y.useRef(null),r=y.useRef(!1),i=ge(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const b=t.current;b[f]!==p&&delete b[f]}},[]),a=ge(function(f){const m=xq(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=ge(function(f,m){n.current===f&&(n.current=m)},[]),c=ge(function(){s.current||r.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const f=n.current;f&&a(f)}))},[a]),u=ge(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(xa.draggableId)===f&&(n.current=f)},[]);return an(()=>(r.current=!0,function(){r.current=!1;const f=s.current;f&&cancelAnimationFrame(f)}),[]),Ne(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function vq(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function s(h){t.length&&t.forEach(f=>f(h))}function r(h){return e.draggables[h]||null}function i(h){const f=r(h);return f||J(),f}const a={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=r(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:r,exists:h=>!!r(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||J(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function bq(){const e=Ne(vq,[]);return y.useEffect(()=>function(){e.clean()},[e]),e}var by=ne.createContext(null),bd=()=>{const e=document.body;return e||J(),e};const wq={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},jq=e=>`rfd-announcement-${e}`;function Nq(e){const t=Ne(()=>jq(e),[e]),n=y.useRef(null);return y.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),gd(i.style,wq),bd().appendChild(i),function(){setTimeout(function(){const c=bd();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),ge(r=>{const i=n.current;if(i){i.textContent=r;return}},[])}const Sq={separator:"::"};function wy(e,t=Sq){const n=ne.useId();return Ne(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function Cq({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function kq({contextId:e,text:t}){const n=wy("hidden-text",{separator:"-"}),s=Ne(()=>Cq({contextId:e,uniqueId:n}),[n,e]);return y.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",bd().appendChild(i),function(){const l=bd();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var gh=ne.createContext(null);function YE(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function Eq(){let e=null;function t(){return!!e}function n(a){return a===e}function s(a){e&&J();const l={abandon:a};return e=l,l}function r(){e||J(),e=null}function i(){e&&(e.abandon(),r())}return{isClaimed:t,isActive:n,claim:s,release:r,tryAbandon:i}}function Tl(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Dq=9,Tq=13,jy=27,QE=32,Pq=33,_q=34,Mq=35,Aq=36,Rq=37,Iq=38,Oq=39,Lq=40,Fq={[Tq]:!0,[Dq]:!0};var KE=e=>{Fq[e.keyCode]&&e.preventDefault()};const xh=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),XE=0,f1=5;function $q(e,t){return Math.abs(t.x-e.x)>=f1||Math.abs(t.y-e.y)>=f1}const m1={type:"IDLE"};function zq({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:r=>{const{button:i,clientX:a,clientY:l}=r;if(i!==XE)return;const c={x:a,y:l},u=n();if(u.type==="DRAGGING"){r.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&J();const d=u.point;if(!$q(d,c))return;r.preventDefault();const h=u.actions.fluidLift(c);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:r=>{n().type==="DRAGGING"&&r.preventDefault(),e()}},{eventName:"keydown",fn:r=>{if(n().type==="PENDING"){e();return}if(r.keyCode===jy){r.preventDefault(),e();return}KE(r)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:r=>{const i=n();if(i.type==="IDLE"&&J(),i.actions.shouldRespectForcePress()){e();return}r.preventDefault()}},{eventName:xh,fn:e}]}function Bq(e){const t=y.useRef(m1),n=y.useRef(mr),s=Ne(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==XE||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,a,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),r=Ne(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=ge(function(){const h={passive:!1,capture:!0};n.current=jn(window,[r,s],h)},[r,s]),a=ge(()=>{t.current.type!=="IDLE"&&(t.current=m1,n.current(),i())},[i]),l=ge(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=ge(function(){const h={capture:!0,passive:!1},f=zq({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=jn(window,f,h)},[l,a]),u=ge(function(h,f){t.current.type!=="IDLE"&&J(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);an(function(){return i(),function(){n.current()}},[i])}function Vq(){}const Uq={[_q]:!0,[Pq]:!0,[Aq]:!0,[Mq]:!0};function Wq(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:r=>{if(r.keyCode===jy){r.preventDefault(),n();return}if(r.keyCode===QE){r.preventDefault(),s();return}if(r.keyCode===Lq){r.preventDefault(),e.moveDown();return}if(r.keyCode===Iq){r.preventDefault(),e.moveUp();return}if(r.keyCode===Oq){r.preventDefault(),e.moveRight();return}if(r.keyCode===Rq){r.preventDefault(),e.moveLeft();return}if(Uq[r.keyCode]){r.preventDefault();return}KE(r)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:xh,fn:n}]}function Hq(e){const t=y.useRef(Vq),n=Ne(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==QE)return;const a=e.findClosestDraggableId(i);if(!a)return;const l=e.tryGetLock(a,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||J(),c=!1,t.current(),s()}t.current=jn(window,Wq(u,d),{capture:!0,passive:!1})}}),[e]),s=ge(function(){const i={passive:!1,capture:!0};t.current=jn(window,[n],i)},[n]);an(function(){return s(),function(){t.current()}},[s])}const Jf={type:"IDLE"},qq=120,Gq=.15;function Yq({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===jy&&n.preventDefault(),e()}},{eventName:xh,fn:e}]}function Qq({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}r.hasMoved=!0;const{clientX:i,clientY:a}=s.touches[0],l={x:i,y:a};s.preventDefault(),r.actions.move(l)}},{eventName:"touchend",fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}s.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const r=n();r.type==="IDLE"&&J();const i=s.touches[0];if(!i||!(i.force>=Gq))return;const l=r.actions.shouldRespectForcePress();if(r.type==="PENDING"){l&&e();return}if(l){if(r.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:xh,fn:e}]}function Kq(e){const t=y.useRef(Jf),n=y.useRef(mr),s=ge(function(){return t.current},[]),r=ge(function(m){t.current=m},[]),i=Ne(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const x=e.tryGetLock(p,l,{sourceEvent:m});if(!x)return;const b=m.touches[0],{clientX:w,clientY:v}=b,g={x:w,y:v};n.current(),h(x,g)}}),[e]),a=ge(function(){const m={capture:!0,passive:!1};n.current=jn(window,[i],m)},[i]),l=ge(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),r(Jf),n.current(),a())},[a,r]),c=ge(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=ge(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:s},x=jn(window,Qq(p),m),b=jn(window,Yq(p),m);n.current=function(){x(),b()}},[c,s,l]),d=ge(function(){const m=s();m.type!=="PENDING"&&J();const p=m.actions.fluidLift(m.point);r({type:"DRAGGING",actions:p,hasMoved:!1})},[s,r]),h=ge(function(m,p){s().type!=="IDLE"&&J();const x=setTimeout(d,qq);r({type:"PENDING",point:p,actions:m,longPressTimerId:x}),u()},[u,s,r,d]);an(function(){return a(),function(){n.current();const p=s();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),r(Jf))}},[s,a,r]),an(function(){return jn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Xq=["input","button","textarea","select","option","optgroup","video","audio"];function JE(e,t){if(t==null)return!1;if(Xq.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:JE(e,t.parentElement)}function Jq(e,t){const n=t.target;return ph(n)?JE(e,n):!1}var Zq=e=>Ln(e.getBoundingClientRect()).center;function e9(e){return e instanceof GE(e).Element}const t9=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function ZE(e,t){return e==null?null:e[t9](t)?e:ZE(e.parentElement,t)}function n9(e,t){return e.closest?e.closest(t):ZE(e,t)}function s9(e){return`[${xa.contextId}="${e}"]`}function r9(e,t){const n=t.target;if(!e9(n))return null;const s=s9(e),r=n9(n,s);return!r||!ph(r)?null:r}function i9(e,t){const n=r9(e,t);return n?n.getAttribute(xa.draggableId):null}function a9(e,t){const n=`[${Yp.contextId}="${e}"]`,r=qE(document,n).find(i=>i.getAttribute(Yp.id)===t);return!r||!ph(r)?null:r}function o9(e){e.preventDefault()}function Bc({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function eD({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const r=n.draggable.findById(s);return!(!r||!r.options.isEnabled||!VE(t.getState(),s))}function l9({lockAPI:e,contextId:t,store:n,registry:s,draggableId:r,forceSensorStop:i,sourceEvent:a}){if(!eD({lockAPI:e,store:n,registry:s,draggableId:r}))return null;const c=s.draggable.getById(r),u=a9(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&Jq(u,a))return null;const d=e.claim(i||mr);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(S,k){Bc({expected:S,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(k())}const x=p.bind(null,"DRAGGING");function b(S){function k(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(k(),J()),n.dispatch(n7(S.liftActionArgs)),h="DRAGGING";function N(C,E={shouldBlockNextClick:!1}){if(S.cleanup(),E.shouldBlockNextClick){const P=jn(window,[{eventName:"click",fn:o9,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(P)}k(),n.dispatch(RE({reason:C}))}return{isActive:()=>Bc({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:C=>N("DROP",C),cancel:C=>N("CANCEL",C),...S.actions}}function w(S){const k=Nl(C=>{x(()=>AE({client:C}))});return{...b({liftActionArgs:{id:r,clientSelection:S,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function v(){const S={moveUp:()=>x(d7),moveRight:()=>x(f7),moveDown:()=>x(h7),moveLeft:()=>x(m7)};return b({liftActionArgs:{id:r,clientSelection:Zq(u),movementMode:"SNAP"},cleanup:mr,actions:S})}function g(){Bc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Bc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:w,snapLift:v,abort:g}}const c9=[Bq,Hq,Kq];function u9({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:r}){const i=[...r?c9:[],...s||[]],a=y.useState(()=>Eq())[0],l=ge(function(b,w){Tl(b)&&!Tl(w)&&a.tryAbandon()},[a]);an(function(){let b=t.getState();return t.subscribe(()=>{const v=t.getState();l(b,v),b=v})},[a,t,l]),an(()=>a.tryAbandon,[a.tryAbandon]);const c=ge(x=>eD({lockAPI:a,registry:n,store:t,draggableId:x}),[a,n,t]),u=ge((x,b,w)=>l9({lockAPI:a,registry:n,contextId:e,store:t,draggableId:x,forceSensorStop:b||null,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null}),[e,a,n,t]),d=ge(x=>i9(e,x),[e]),h=ge(x=>{const b=n.draggable.findById(x);return b?b.options:null},[n.draggable]),f=ge(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(fy()))},[a,t]),m=ge(()=>a.isClaimed(),[a]),p=Ne(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let x=0;x<i.length;x++)i[x](p)}const d9=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Il.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),h9=e=>({...Dl,...e.autoScrollerOptions,durationDampening:{...Dl.durationDampening,...e.autoScrollerOptions}});function lo(e){return e.current||J(),e.current}function f9(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:r,dragHandleUsageInstructions:i}=e,a=y.useRef(null),l=YE(e),c=ge(()=>d9(l.current),[l]),u=ge(()=>h9(l.current),[l]),d=Nq(t),h=kq({contextId:t,text:i}),f=gq(t,r),m=ge(P=>{lo(a).dispatch(P)},[]),p=Ne(()=>Vw({publishWhileDragging:r7,updateDroppableScroll:a7,updateDroppableIsEnabled:o7,updateDroppableIsCombineEnabled:l7,collectionStarting:i7},m),[m]),x=bq(),b=Ne(()=>Y7(x,p),[x,p]),w=Ne(()=>dq({scrollWindow:Q7,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u,...Vw({move:AE},m)}),[b.scrollDroppable,m,u]),v=yq(t),g=Ne(()=>W7({announce:d,autoScroller:w,dimensionMarshal:b,focusMarshal:v,getResponders:c,styleMarshal:f}),[d,w,b,v,c,f]);a.current=g;const j=ge(()=>{const P=lo(a);P.getState().phase!=="IDLE"&&P.dispatch(fy())},[]),S=ge(()=>{const P=lo(a).getState();return P.phase==="DROP_ANIMATING"?!0:P.phase==="IDLE"?!1:P.isDragging},[]),k=Ne(()=>({isDragging:S,tryAbort:j}),[S,j]);n(k);const N=ge(P=>VE(lo(a).getState(),P),[]),C=ge(()=>Ur(lo(a).getState()),[]),E=Ne(()=>({marshal:b,focus:v,contextId:t,canLift:N,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:x}),[t,b,h,v,N,C,x]);return u9({contextId:t,store:g,registry:x,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>j,[j]),ne.createElement(gh.Provider,{value:E},ne.createElement(FW,{context:by,store:g},e.children))}function m9(){return ne.useId()}function p9(e){const t=m9(),n=e.dragHandleUsageInstructions||hu.dragHandleUsageInstructions;return ne.createElement(HW,null,s=>ne.createElement(f9,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const p1={dragging:5e3,dropAnimating:4500},g9=(e,t)=>t?Vo.drop(t.duration):e?Vo.snap:Vo.fluid,x9=(e,t)=>{if(e)return t?El.opacity.drop:El.opacity.combining},y9=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function v9(e){const n=e.dimension.client,{offset:s,combineWith:r,dropping:i}=e,a=!!r,l=y9(e),c=!!i,u=c?qp.drop(s,a):qp.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:g9(l,i),transform:u,opacity:x9(a,c),zIndex:c?p1.dropAnimating:p1.dragging,pointerEvents:"none"}}function b9(e){return{transform:qp.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function w9(e){return e.type==="DRAGGING"?v9(e):b9(e)}function j9(e,t,n=xt){const s=window.getComputedStyle(t),r=t.getBoundingClientRect(),i=oE(r,s),a=pd(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:a}}function N9(e){const t=wy("draggable"),{descriptor:n,registry:s,getDraggableRef:r,canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}=e,c=Ne(()=>({canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}),[i,l,a]),u=ge(m=>{const p=r();return p||J(),j9(n,p,m)},[n,r]),d=Ne(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=y.useRef(d),f=y.useRef(!0);an(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),an(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,s.draggable.update(d,m)},[d,s.draggable])}var Ny=ne.createContext(null);function wd(e){const t=y.useContext(e);return t||J(),t}function S9(e){e.preventDefault()}const C9=e=>{const t=y.useRef(null),n=ge((k=null)=>{t.current=k},[]),s=ge(()=>t.current,[]),{contextId:r,dragHandleUsageInstructionsId:i,registry:a}=wd(gh),{type:l,droppableId:c}=wd(Ny),u=Ne(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:x,mapped:b,dropAnimationFinished:w}=e;if(!x){const k=Ne(()=>({descriptor:u,registry:a,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,a,s,p,m,f]);N9(k)}const v=Ne(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":r,draggable:!1,onDragStart:S9}:null,[r,i,h,f]),g=ge(k=>{b.type==="DRAGGING"&&b.dropping&&k.propertyName==="transform"&&Il.flushSync(w)},[w,b]),j=Ne(()=>{const k=w9(b),N=b.type==="DRAGGING"&&b.dropping?g:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":r,"data-rfd-draggable-id":h,style:k,onTransitionEnd:N},dragHandleProps:v}},[r,v,h,b,g,n]),S=Ne(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return ne.createElement(ne.Fragment,null,d(j,b.snapshot,S))};var tD=(e,t)=>e===t,nD=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const k9=e=>e.combine?e.combine.draggableId:null,E9=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function D9(){const e=gt((r,i)=>({x:r,y:i})),t=gt((r,i,a=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:r,draggingOver:a,combineWith:l,combineTargetFor:null})),n=gt((r,i,a,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:r,dimension:a,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(r,i)=>{if(Tl(r)){if(r.critical.draggable.id!==i.draggableId)return null;const a=r.current.client.offset,l=r.dimensions.draggables[i.draggableId],c=rn(r.impact),u=E9(r.impact),d=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,l,i.isClone,c,u,d)}if(r.phase==="DROP_ANIMATING"){const a=r.completed;if(a.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=r.dimensions.draggables[i.draggableId],u=a.result,d=u.mode,h=nD(u),f=k9(u),p={duration:r.dropDuration,curve:py.drop,moveTo:r.newHomeClientOffset,opacity:f?El.opacity.drop:null,scale:f?El.scale.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function sD(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const T9={mapped:{type:"SECONDARY",offset:xt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:sD(null)}};function P9(){const e=gt((a,l)=>({x:a,y:l})),t=gt(sD),n=gt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=a=>a?n(xt,a,!0):null,r=(a,l,c,u)=>{const d=c.displaced.visible[a],h=!!(u.inVirtualList&&u.effected[a]),f=hh(c),m=f&&f.draggableId===a?l:null;if(!d){if(!h)return s(m);if(c.displaced.invisible[a])return null;const b=Aa(u.displacedBy.point),w=e(b.x,b.y);return n(w,m,!0)}if(h)return s(m);const p=c.displacedBy.point,x=e(p.x,p.y);return n(x,m,d.shouldAnimate)};return(a,l)=>{if(Tl(a))return a.critical.draggable.id===l.draggableId?null:r(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:r(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const _9=()=>{const e=D9(),t=P9();return(s,r)=>e(s,r)||t(s,r)||T9},M9={dropAnimationFinished:IE},A9=aE(_9,M9,null,{context:by,areStatePropsEqual:tD})(C9);function rD(e){return wd(Ny).isUsingCloneFor===e.draggableId&&!e.isClone?null:ne.createElement(A9,e)}function R9(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ne.createElement(rD,gd({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const iD=e=>t=>e===t,I9=iD("scroll"),O9=iD("auto"),g1=(e,t)=>t(e.overflowX)||t(e.overflowY),L9=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return g1(n,I9)||g1(n,O9)},F9=()=>!1,aD=e=>e==null?null:e===document.body?F9()?e:null:e===document.documentElement?null:L9(e)?e:aD(e.parentElement);var Qp=e=>({x:e.scrollLeft,y:e.scrollTop});const oD=e=>e?window.getComputedStyle(e).position==="fixed"?!0:oD(e.parentElement):!1;var $9=e=>{const t=aD(e),n=oD(e);return{closestScrollable:t,isFixedOnPage:n}},z9=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:r,client:i,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=$E({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:xt,displacement:xt}}}})(),u=r==="vertical"?ly:yE,d=pa({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:u,isEnabled:t,client:i,page:a,frame:c,subject:d}};const B9=(e,t)=>{const n=lE(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,r=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,a=r+t.scrollWidth,c=ry({top:s,right:a,bottom:i,left:r},n.border);return iy({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var V9=({ref:e,descriptor:t,env:n,windowScroll:s,direction:r,isDropDisabled:i,isCombineEnabled:a,shouldClipSubject:l})=>{const c=n.closestScrollable,u=B9(e,c),d=pd(u,s),h=(()=>{if(!c)return null;const m=lE(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:pd(m,s),scroll:Qp(c),scrollSize:p,shouldClipSubject:l}})();return z9({descriptor:t,isEnabled:!i,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:r,client:u,page:d,closest:h})};const U9={passive:!1},W9={passive:!0};var x1=e=>e.shouldPublishImmediately?U9:W9;const Vc=e=>e&&e.env.closestScrollable||null;function H9(e){const t=y.useRef(null),n=wd(gh),s=wy("droppable"),{registry:r,marshal:i}=n,a=YE(e),l=Ne(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=y.useRef(l),u=Ne(()=>gt((j,S)=>{t.current||J();const k={x:j,y:S};i.updateDroppableScroll(l.id,k)}),[l.id,i]),d=ge(()=>{const j=t.current;return!j||!j.env.closestScrollable?xt:Qp(j.env.closestScrollable)},[]),h=ge(()=>{const j=d();u(j.x,j.y)},[d,u]),f=Ne(()=>Nl(h),[h]),m=ge(()=>{const j=t.current,S=Vc(j);if(j&&S||J(),j.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=ge((j,S)=>{t.current&&J();const k=a.current,N=k.getDroppableRef();N||J();const C=$9(N),E={ref:N,descriptor:l,env:C,scrollOptions:S};t.current=E;const P=V9({ref:N,descriptor:l,env:C,windowScroll:j,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),L=C.closestScrollable;return L&&(L.setAttribute(d1.contextId,n.contextId),L.addEventListener("scroll",m,x1(E.scrollOptions))),P},[n.contextId,l,m,a]),x=ge(()=>{const j=t.current,S=Vc(j);return j&&S||J(),Qp(S)},[]),b=ge(()=>{const j=t.current;j||J();const S=Vc(j);t.current=null,S&&(f.cancel(),S.removeAttribute(d1.contextId),S.removeEventListener("scroll",m,x1(j.scrollOptions)))},[m,f]),w=ge(j=>{const S=t.current;S||J();const k=Vc(S);k||J(),k.scrollTop+=j.y,k.scrollLeft+=j.x},[]),v=Ne(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:x,dragStopped:b,scroll:w}),[b,p,x,w]),g=Ne(()=>({uniqueId:s,descriptor:l,callbacks:v}),[v,l,s]);an(()=>(c.current=g.descriptor,r.droppable.register(g),()=>{t.current&&b(),r.droppable.unregister(g)}),[v,l,b,g,i,r.droppable]),an(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),an(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Zf(){}const y1={width:0,height:0,margin:JW},q9=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?y1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},G9=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=q9({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Vo.placeholder:null}},Y9=e=>{const t=y.useRef(null),n=ge(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:r,onClose:i,contextId:a}=e,[l,c]=y.useState(e.animate==="open");y.useEffect(()=>l?s!=="open"?(n(),c(!1),Zf):t.current?Zf:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):Zf,[s,l,n]);const u=ge(h=>{h.propertyName==="height"&&(r(),s==="close"&&i())},[s,i,r]),d=G9({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return ne.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var Q9=ne.memo(Y9);class K9 extends ne.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const X9=e=>{const t=y.useContext(gh);t||J();const{contextId:n,isMovementAllowed:s}=t,r=y.useRef(null),i=y.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:x,updateViewportMaxScroll:b,getContainerForClone:w}=e,v=ge(()=>r.current,[]),g=ge((L=null)=>{r.current=L},[]);ge(()=>i.current,[]);const j=ge((L=null)=>{i.current=L},[]),S=ge(()=>{s()&&b({maxScroll:BE()})},[s,b]);H9({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:v});const k=Ne(()=>ne.createElement(K9,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:L,data:F,animate:$})=>ne.createElement(Q9,{placeholder:F,onClose:L,innerRef:j,animate:$,contextId:n,onTransitionEnd:S})),[n,S,e.placeholder,e.shouldAnimatePlaceholder,j]),N=Ne(()=>({innerRef:g,placeholder:k,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,k,g]),C=x?x.dragging.draggableId:null,E=Ne(()=>({droppableId:l,type:c,isUsingCloneFor:C}),[l,C,c]);function P(){if(!x)return null;const{dragging:L,render:F}=x,$=ne.createElement(rD,{draggableId:L.draggableId,index:L.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(A,B)=>F(A,B,L));return zP.createPortal($,w())}return ne.createElement(Ny.Provider,{value:E},a(N,p),P())};function J9(){return document.body||J(),document.body}const v1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:J9},lD=e=>{let t={...e},n;for(n in v1)e[n]===void 0&&(t={...t,[n]:v1[n]});return t},em=(e,t)=>e===t.droppable.type,b1=(e,t)=>t.draggables[e.draggable.id],Z9=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=gt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=gt((i,a,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:p}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,a)=>{const l=lD(a),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(Tl(i)){const f=i.critical;if(!em(u,f))return t;const m=b1(f,i.dimensions),p=rn(i.impact)===c;return s(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!em(u,f.critical))return t;const m=b1(f.critical,i.dimensions);return s(c,d,nD(f.result)===c,rn(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!em(u,f.critical))return t;const m=rn(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),x=f.critical.droppable.id===c;return m?p?e:t:x?e:t}return t}},eG={updateViewportMaxScroll:u7},tG=aE(Z9,eG,(e,t,n)=>({...lD(n),...e,...t}),{context:by,areStatePropsEqual:tD})(X9),tm=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function nG(){const{user:e}=ze(),[t,n]=y.useState([]),[s,r]=y.useState(!0),[i,a]=y.useState(!1),[l,c]=y.useState(""),[u,d]=y.useState(null),[h,f]=y.useState({show:!1,title:""}),m=Qt();y.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0),d(null);const C=await Uk(),P=(L=>Array.isArray(L)?L:L&&typeof L=="object"&&L.data&&Array.isArray(L.data)||L&&typeof L=="object"&&L.success&&Array.isArray(L.data)?L.data:[])(C);console.log(" Debug deals response:",{originalResponse:C,extractedData:P,isArray:Array.isArray(P),length:Array.isArray(P)?P.length:"not array"}),!P||P.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${P.length} deals`),n(P),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(C){console.error("Error fetching deals:",C),d(C instanceof Error?C:new Error("Unknown error fetching deals"));let E="Please check your network connection and ensure the server is running.";C instanceof Error&&(E+=` Error details: ${C.message}`),b("Error fetching deals","error",E),n([])}finally{r(!1)}},x=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},b=(C,E="success",P)=>{f({show:!0,title:C,variant:E,description:P}),setTimeout(()=>f({show:!1,title:""}),5e3)},w=async C=>{var T,R;if(a(!1),console.log("Drag end event:",C),!C.destination){console.log("No destination provided in drag result");return}if(C.source.droppableId===C.destination.droppableId&&C.source.index===C.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:E,destination:P,source:L}=C,F=P.droppableId,$=L.droppableId;console.log(`Moving deal ${E} from ${$} to ${F}`);const A=`Moving deal to ${((T=tm.find(H=>H.id===F))==null?void 0:T.label)||F}...`;b(A,"warning");const B=[...t];if(!t.find(H=>H.id===E)){console.error(`Deal with ID ${E} not found`),b("Error updating deal","error","Could not find the deal in the current view");return}const I=t.map(H=>H.id===E?{...H,stage:F}:H);n(I);try{console.log(`Calling API to update deal ${E} to stage ${F}`);const H=await Hk(E,F);if(H){console.log("Deal updated successfully:",H),n(ie=>ie.map(ce=>ce.id===E?H:ce));const G=((R=tm.find(ie=>ie.id===F))==null?void 0:R.label)||F,Z=H.title||"Deal";b(`Deal moved to ${G}`,"success",`"${Z}" has been successfully moved to the ${G} stage.`),F==="won"&&g(H)}else console.error("Server returned null for updated deal"),n(B),b("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(H){console.error("Error updating deal stage:",H),n(B);const G=H instanceof Error?`Error: ${H.message}`:"An unknown error occurred while updating the deal";b("Error updating deal stage","error",G)}},v=()=>{a(!0),h.show&&f({show:!1,title:""})},g=C=>{b("Schedule a job for this deal","success",`You've won the deal with ${C.customer.name}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${C.id}&action=schedule&customerName=${encodeURIComponent(C.customer.name)}`)},1500)},j=Array.isArray(t)?t.filter(C=>{var L;const E=C.title||"",P=((L=C.customer)==null?void 0:L.name)||"";return E.toLowerCase().includes(l.toLowerCase())||P.toLowerCase().includes(l.toLowerCase())}):[],S=C=>j.filter(E=>E.stage===C),k=C=>S(C).reduce((E,P)=>E+P.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const N=({deal:C,provided:E,snapshot:P})=>{var L,F;return o.jsxs("div",{ref:E.innerRef,...E.draggableProps,...E.dragHandleProps,style:{...E.draggableProps.style,opacity:P.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${P.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:C.title||`Deal for ${((L=C.customer)==null?void 0:L.name)||"Customer"}`}),o.jsx("div",{className:"flex space-x-1",children:o.jsx(W,{variant:"ghost",size:"sm",className:"h-6 w-6",children:o.jsx(GA,{className:"h-3 w-3"})})})]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[o.jsx(Ll,{className:"h-3 w-3 mr-1"}),o.jsx("span",{className:"line-clamp-1",children:((F=C.customer)==null?void 0:F.name)||"Unknown Customer"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-bold text-base text-primary-800",children:Se(C.value)}),o.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[C.probability||50,"%"]})]})]})};return o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&o.jsx(lt,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),o.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[o.jsxs(W,{variant:"outline",size:"sm",onClick:p,disabled:s,className:"flex items-center gap-1",children:[o.jsx(Ue,{className:`w-4 h-4 ${s?"animate-spin":""}`}),s?"Loading...":"Refresh"]}),o.jsxs("div",{className:"relative flex-grow",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(_s,{className:"w-4 h-4 text-gray-500"})}),o.jsx(Ee,{type:"text",placeholder:"Search deals...",value:l,onChange:C=>c(C.target.value),className:"pl-10 w-full"})]})]})]}),u&&!s&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx(pi,{className:"h-5 w-5 text-red-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:o.jsx("p",{children:u.message})}),o.jsxs("div",{className:"mt-4",children:[o.jsx(W,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),o.jsx(W,{onClick:x,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Ue,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):o.jsx(p9,{onDragEnd:w,onDragStart:v,children:o.jsx("div",{className:"overflow-x-auto pb-6",children:o.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:tm.map(C=>o.jsxs("div",{className:`rounded-lg ${C.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:C.label}),o.jsx(ha,{variant:"outline",className:"text-xs",children:Se(k(C.id))})]}),o.jsx(tG,{droppableId:C.id,children:E=>o.jsxs("div",{ref:E.innerRef,...E.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[S(C.id).map((P,L)=>o.jsx(R9,{draggableId:P.id,index:L,isDragDisabled:i&&P.stage!==C.id,children:(F,$)=>o.jsx(N,{deal:P,provided:F,snapshot:$})},P.id)),E.placeholder,S(C.id).length===0&&!i&&o.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},C.id))})})})]})}const sG=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function rG(){const{id:e}=Qg(),t=Qt(),{user:n}=ze(),[s,r]=y.useState(null),[i,a]=y.useState(!0),[l,c]=y.useState([]),[u,d]=y.useState([]),[h,f]=y.useState(!1),[m,p]=y.useState({show:!1,title:""});y.useEffect(()=>{e&&x()},[e]),y.useEffect(()=>{s!=null&&s.leadId&&b(s.leadId)},[s]);const x=async()=>{try{a(!0);const g=await Wk(e);if(!g){v("Deal not found","error"),t("/deals");return}r(g)}catch(g){console.error("Error fetching deal:",g),v("Error fetching deal details","error")}finally{a(!1)}},b=async g=>{try{f(!0);const j=await MV(g);c(j);const S=[];j.forEach(k=>{if(k.selectedMachines&&k.selectedMachines.length>0)k.selectedMachines.forEach(N=>{S.some(C=>C.id===N.id)||S.push(N)});else if(k.selectedEquipment&&k.selectedEquipment.id){const N={id:k.selectedEquipment.id,machineType:k.machineType,equipmentId:k.selectedEquipment.equipmentId,name:k.selectedEquipment.name,baseRates:k.selectedEquipment.baseRates,baseRate:k.selectedEquipment.baseRates[k.orderType],runningCostPerKm:k.runningCostPerKm,quantity:1};S.some(C=>C.id===N.id)||S.push(N)}}),d(S)}catch(j){console.error("Error fetching deal equipment:",j)}finally{f(!1)}},w=async g=>{if(s)try{const j=await Hk(s.id,g);j&&(r(j),v(`Deal stage updated to ${g}`,"success"))}catch(j){console.error("Error updating deal stage:",j),v("Error updating deal stage","error")}},v=(g,j="success")=>{p({show:!0,title:g,variant:j}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Ue,{className:"h-8 w-8 animate-spin text-primary-600"})}):s?o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(W,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[o.jsx(ix,{size:16,className:"sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),o.jsx("div",{className:"sm:hidden",children:o.jsx(ee,{children:o.jsx(se,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-700 font-medium",children:"Value"}),o.jsx("div",{className:"text-lg font-bold text-primary-700",children:Se(s.value)})]}),o.jsx(W,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})]})})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Deal Information"})}),o.jsxs(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:s.title}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),o.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:Se(s.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),o.jsx("div",{className:"mt-1",children:o.jsx(be,{value:s.stage,onChange:g=>w(g),options:sG,className:"w-full sm:w-[200px] text-sm"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.expectedCloseDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),o.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[s.probability,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:s.assignedTo})]})]})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Notes"})}),o.jsx(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:o.jsx("p",{className:"text-sm text-gray-600",children:s.notes||"No notes available."})})]})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Customer Information"})}),o.jsxs(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dl,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm sm:text-base",children:s.customer.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:s.customer.designation})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ll,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600 break-words",children:s.customer.company})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(zS,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.customer.email})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(VS,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.phone})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Vd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.address})]})]})]}),"          ",o.jsxs(ee,{className:"mb-4",children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsxs(me,{className:"flex items-center",children:[o.jsx(YA,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),o.jsx(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx(Ue,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?o.jsx("div",{className:"space-y-2",children:u.map(g=>o.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm",children:g.name}),o.jsx("p",{className:"text-xs text-gray-500",children:g.machineType})]}),o.jsx("div",{className:"text-sm text-right",children:o.jsxs("span",{className:"font-medium",children:["Qty: ",g.quantity]})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[o.jsxs("div",{children:["Base Rate: ",Se(g.baseRate)]}),o.jsxs("div",{children:["Cost/Km: ",Se(g.runningCostPerKm)]})]})]},g.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),o.jsxs(ee,{className:"hidden sm:block",children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Actions"})}),o.jsx(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:o.jsx(W,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})})]})]})]}),m.show&&o.jsx(lt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const nm=e=>"text"in e&&"level"in e,sm=e=>"text"in e&&!("level"in e),co=e=>"rows"in e,iG=e=>"items"in e,uo=e=>"url"in e;function aG(){return[{key:"company_name",category:"Company"},{key:"company_address",category:"Company"},{key:"company_email",category:"Company"},{key:"company_phone",category:"Company"},{key:"customer_name",category:"Customer"},{key:"customer_email",category:"Customer"},{key:"customer_phone",category:"Customer"},{key:"quotation_number",category:"Quotation"},{key:"quotation_date",category:"Quotation"},{key:"quotation_valid_until",category:"Quotation"},{key:"quotation_total",category:"Quotation"}]}function w1(e){switch(e){case"header":return{text:"New Header",level:2,align:"left"};case"text":return{text:"New text block",align:"left"};case"table":return{rows:[{cells:[{content:"Header 1",header:!0},{content:"Header 2",header:!0}]},{cells:[{content:"Cell 1"},{content:"Cell 2"}]}],styles:{borders:!0,striped:!1}};case"list":return{items:["Item 1","Item 2"],type:"unordered"};case"image":return{url:"",alt:"",align:"center"};case"divider":return{text:""};default:return{text:"",align:"left"}}}function cD({template:e,onChange:t}){const[n,s]=y.useState(()=>{if(e.content)try{const j=new DOMParser().parseFromString(e.content,"text/html");return Array.from(j.body.children).map((S,k)=>{const N=S.tagName.toLowerCase()==="img"?"image":S.tagName.toLowerCase()==="h1"||S.tagName.toLowerCase()==="h2"||S.tagName.toLowerCase()==="h3"?"header":S.tagName.toLowerCase()==="table"?"table":S.tagName.toLowerCase()==="ul"||S.tagName.toLowerCase()==="ol"?"list":"text";return{id:`${N}-${k}`,type:N,content:w1(N)}})}catch(g){return console.error("Error parsing template content:",g),[]}return[]}),[r,i]=y.useState(null),a=y.useRef(null),[l,c]=y.useState(null),[u,d]=y.useState(null),h=y.useRef(null),[f,m]=y.useState(null);y.useEffect(()=>{const g=S=>{if(l&&r){const k=n.find($=>$.id===r);if(!k||!uo(k.content))return;let N=l.origWidth,C=l.origHeight,E=l.origX,P=l.origY;const L=S.clientX-l.startX,F=S.clientY-l.startY;switch(l.direction){case"se":N=Math.max(30,l.origWidth+L),C=Math.max(30,l.origHeight+F);break;case"sw":N=Math.max(30,l.origWidth-L),C=Math.max(30,l.origHeight+F),E=l.origX+L;break;case"ne":N=Math.max(30,l.origWidth+L),C=Math.max(30,l.origHeight-F),P=l.origY+F;break;case"nw":N=Math.max(30,l.origWidth-L),C=Math.max(30,l.origHeight-F),E=l.origX+L,P=l.origY+F;break}x(r,{...k.content,width:`${N}px`,height:`${C}px`,x:E,y:P})}else if(u&&r){const k=n.find(E=>E.id===r);if(!k||!uo(k.content))return;const N=S.clientX-u.startX,C=S.clientY-u.startY;x(r,{...k.content,x:u.origX+N,y:u.origY+C})}},j=()=>{c(null),d(null)};return(l||u)&&(document.addEventListener("mousemove",g),document.addEventListener("mouseup",j)),()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",j)}},[l,u,r,n]),y.useEffect(()=>{l||u?(document.body.style.cursor=l?"nwse-resize":"move",document.body.style.userSelect="none"):(document.body.style.cursor="",document.body.style.userSelect="")},[l,u]);const p=g=>{const j={id:`${g}-${Date.now()}`,type:g,content:w1(g)};s([...n,j]),i(j.id)},x=(g,j)=>{s(n.map(S=>S.id===g?{...S,content:j}:S))},b=async(g,j)=>{try{const S=new FileReader;S.onload=k=>{var E;const N=(E=k.target)==null?void 0:E.result,C=n.find(P=>P.id===j);C&&uo(C.content)&&x(j,{...C.content,url:N})},S.readAsDataURL(g)}catch(S){console.error("Error uploading image:",S)}},w=g=>{switch(g.type){case"header":return nm(g.content)?o.jsxs("div",{style:{textAlign:g.content.align},children:[g.content.level===1&&o.jsx("h1",{className:"text-3xl font-bold",children:g.content.text}),g.content.level===2&&o.jsx("h2",{className:"text-2xl font-semibold",children:g.content.text}),g.content.level===3&&o.jsx("h3",{className:"text-xl font-medium",children:g.content.text})]}):null;case"table":return co(g.content)?o.jsx("table",{className:"w-full border-collapse",children:o.jsx("tbody",{children:g.content.rows.map((j,S)=>o.jsx("tr",{children:j.cells.map((k,N)=>o.jsx("td",{className:`border p-2 ${k.header?"font-semibold bg-gray-50":""}`,children:k.content},N))},S))})}):null;case"text":{if(!sm(g.content))return null;const j=g.content.x??100,S=g.content.y??200,k=g.content.width?parseInt(g.content.width):250,N=g.content.height?parseInt(g.content.height):40,C=f===g.id;return o.jsxs("div",{className:`absolute group border-2 ${r===g.id?"border-blue-400":"border-transparent"} bg-white`,style:{left:j,top:S,width:k,height:N,zIndex:r===g.id?10:1,cursor:u?"move":"pointer",display:"flex",alignItems:"center",justifyContent:g.content.align||"left",pointerEvents:"auto"},onMouseDown:E=>{!C&&r===g.id&&d({startX:E.clientX,startY:E.clientY,origX:j,origY:S})},onClick:E=>{E.stopPropagation(),i(g.id)},onDoubleClick:()=>m(g.id),children:[C?o.jsx("input",{autoFocus:!0,className:"w-full h-full border-none outline-none bg-transparent text-base",value:g.content.text,onChange:E=>x(g.id,{...g.content,text:E.target.value}),onBlur:()=>m(null),onKeyDown:E=>{E.key==="Enter"&&m(null)},style:{pointerEvents:"auto"}}):o.jsx("span",{className:"w-full h-full px-2 text-base select-none",style:{textAlign:g.content.align||"left",whiteSpace:"pre-wrap",wordBreak:"break-word",pointerEvents:"none"},children:g.content.text||"Double-click to edit text"}),r===g.id&&o.jsx(o.Fragment,{children:["nw","ne","sw","se"].map(E=>o.jsx("div",{className:`absolute w-3 h-3 bg-blue-500 rounded-full cursor-nwse-resize ${E==="nw"?"left-0 top-0 -translate-x-1/2 -translate-y-1/2":E==="ne"?"right-0 top-0 translate-x-1/2 -translate-y-1/2":E==="sw"?"left-0 bottom-0 -translate-x-1/2 translate-y-1/2":"right-0 bottom-0 translate-x-1/2 translate-y-1/2"}`,onMouseDown:P=>{P.stopPropagation(),c({direction:E,startX:P.clientX,startY:P.clientY,origWidth:k,origHeight:N,origX:j,origY:S})}},E))})]})}case"image":{if(!uo(g.content))return null;const j=g.content.x??100,S=g.content.y??100,k=g.content.width?parseInt(g.content.width):200,N=g.content.height?parseInt(g.content.height):120;return o.jsxs("div",{className:`absolute group border-2 ${r===g.id?"border-blue-400":"border-transparent"}`,style:{left:j,top:S,width:k,height:N,zIndex:r===g.id?10:1,cursor:u?"move":"pointer"},onMouseDown:C=>{r===g.id&&C.target===C.currentTarget&&d({startX:C.clientX,startY:C.clientY,origX:j,origY:S})},onClick:C=>{C.stopPropagation(),i(g.id)},children:[o.jsx("img",{ref:r===g.id?h:null,src:g.content.url,alt:g.content.alt,style:{width:"100%",height:"100%",objectFit:"contain",display:"block",pointerEvents:"none"},draggable:!1}),r===g.id&&o.jsx(o.Fragment,{children:["nw","ne","sw","se"].map(C=>o.jsx("div",{className:`absolute w-3 h-3 bg-blue-500 rounded-full cursor-nwse-resize ${C==="nw"?"left-0 top-0 -translate-x-1/2 -translate-y-1/2":C==="ne"?"right-0 top-0 translate-x-1/2 -translate-y-1/2":C==="sw"?"left-0 bottom-0 -translate-x-1/2 translate-y-1/2":"right-0 bottom-0 translate-x-1/2 translate-y-1/2"}`,onMouseDown:E=>{E.stopPropagation(),c({direction:C,startX:E.clientX,startY:E.clientY,origWidth:k,origHeight:N,origX:j,origY:S})}},C))})]})}default:return null}},v=g=>{if(!g)return null;switch(g.type){case"header":return nm(g.content)?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ee,{label:"Text",value:g.content.text,onChange:j=>x(g.id,{...g.content,text:j.target.value})}),o.jsx(be,{label:"Level",value:g.content.level.toString(),options:[{value:"1",label:"Heading 1 (Large)"},{value:"2",label:"Heading 2 (Medium)"},{value:"3",label:"Heading 3 (Small)"}],onChange:j=>x(g.id,{...g.content,level:parseInt(j,10)})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),o.jsx(W,{variant:g.content.align==="left"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"left"}),children:o.jsx(mc,{className:"h-4 w-4"})}),o.jsx(W,{variant:g.content.align==="center"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"center"}),children:o.jsx(qh,{className:"h-4 w-4"})}),o.jsx(W,{variant:g.content.align==="right"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"right"}),children:o.jsx(Gh,{className:"h-4 w-4"})})]})]}):null;case"text":return sm(g.content)?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Dn,{label:"Text",value:g.content.text,onChange:j=>x(g.id,{...g.content,text:j.target.value})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),o.jsx(W,{variant:g.content.align==="left"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"left"}),children:o.jsx(mc,{className:"h-4 w-4"})}),o.jsx(W,{variant:g.content.align==="center"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"center"}),children:o.jsx(qh,{className:"h-4 w-4"})}),o.jsx(W,{variant:g.content.align==="right"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"right"}),children:o.jsx(Gh,{className:"h-4 w-4"})})]})]}):null;case"table":return co(g.content)?o.jsxs("div",{className:"space-y-4",children:[g.content.rows.map((j,S)=>o.jsxs("div",{className:"flex gap-2",children:[j.cells.map((k,N)=>o.jsx(Ee,{value:k.content,onChange:C=>{if(!co(g.content))return;const E=[...g.content.rows];E[S].cells[N].content=C.target.value,x(g.id,{...g.content,rows:E})}},N)),o.jsx(W,{variant:"outline",onClick:()=>{if(!co(g.content))return;const k=[...g.content.rows];k[S].cells.push({content:""}),x(g.id,{...g.content,rows:k})},children:o.jsx(rs,{className:"h-4 w-4"})})]},S)),o.jsx(W,{variant:"outline",onClick:()=>{if(!co(g.content))return;const j=[...g.content.rows];j.push({cells:[{content:""}]}),x(g.id,{...g.content,rows:j})},children:"Add Row"})]}):null;case"list":return iG(g.content)?o.jsx("div",{className:"space-y-4"}):null;case"image":return uo(g.content)?o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:a,onChange:j=>{var k;const S=(k=j.target.files)==null?void 0:k[0];S&&b(S,g.id)}}),o.jsxs(W,{variant:"outline",onClick:()=>{var j;return(j=a.current)==null?void 0:j.click()},className:"w-full",children:[o.jsx(WS,{className:"w-4 h-4 mr-2"}),"Upload Image"]}),o.jsx(Ee,{label:"Image URL",value:g.content.url,onChange:j=>x(g.id,{...g.content,url:j.target.value}),placeholder:"Enter image URL or upload an image"}),o.jsx(Ee,{label:"Alt Text",value:g.content.alt,onChange:j=>x(g.id,{...g.content,alt:j.target.value}),placeholder:"Enter image description"}),o.jsx(Ee,{label:"Width",value:g.content.width||"",onChange:j=>x(g.id,{...g.content,width:j.target.value}),placeholder:"e.g., 100%, 300px"}),o.jsx(Ee,{label:"Height",value:g.content.height||"",onChange:j=>x(g.id,{...g.content,height:j.target.value}),placeholder:"e.g., 100%, 300px"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),o.jsx(W,{variant:g.content.align==="left"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"left"}),children:o.jsx(mc,{className:"h-4 w-4"})}),o.jsx(W,{variant:g.content.align==="center"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"center"}),children:o.jsx(qh,{className:"h-4 w-4"})}),o.jsx(W,{variant:g.content.align==="right"?"default":"outline",size:"sm",onClick:()=>x(g.id,{...g.content,align:"right"}),children:o.jsx(Gh,{className:"h-4 w-4"})})]})]}):null;default:return null}};return o.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[o.jsxs("div",{className:"col-span-5 space-y-4",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Add Elements"})}),o.jsx(se,{children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p("header"),className:"flex items-center gap-2",children:[o.jsx(eR,{className:"h-4 w-4"}),"Header"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p("text"),className:"flex items-center gap-2",children:[o.jsx(mc,{className:"h-4 w-4"}),"Text"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p("table"),className:"flex items-center gap-2",children:[o.jsx(JA,{className:"h-4 w-4"}),"Table"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p("list"),className:"flex items-center gap-2",children:[o.jsx(VA,{className:"h-4 w-4"}),"List"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:()=>p("image"),className:"flex items-center gap-2",children:[o.jsx(FS,{className:"h-4 w-4"}),"Image"]})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Properties"})}),o.jsx(se,{children:r?v(n.find(g=>g.id===r)):o.jsx("p",{className:"text-gray-500 text-sm",children:"Select an element to edit its properties"})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Available Placeholders"})}),o.jsx(se,{children:o.jsx("div",{className:"grid grid-cols-2 gap-2",children:aG().map(g=>o.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>{if(r){const j=n.find(S=>S.id===r);j&&(nm(j.content)||sm(j.content))&&x(j.id,{...j.content,text:`{{${g.key}}}`})}},children:`{{${g.key}}}`},g.key))})})]})]}),o.jsx("div",{className:"col-span-7",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Preview"})}),o.jsx(se,{children:o.jsx("div",{className:"min-h-[600px] p-6 border rounded-lg relative",style:{position:"relative"},children:n.map((g,j)=>w(g))})})]})})]})}const oG={company_name:"ASP Cranes",company_address:"123 Industrial Park, Mumbai, India",company_phone:"+91 98765 43210",company_email:"info@aspcranes.com",company_gst:"GST123456789",customer_name:"John Smith",customer_designation:"Project Manager",customer_company:"ABC Construction Ltd.",customer_address:"456 Construction Site, Delhi, India",customer_phone:"+91 98765 12345",customer_email:"john@abcconstruction.com",quotation_number:"QT-2024-001",valid_until:"2024-04-30",quotation_date:"2024-03-31",order_type:"Rental",equipment_name:"Mobile Crane - 50T",project_duration:"30 days",working_hours:"8 hours per day",shift_type:"Single Shift",base_rate:"25,000 per day",subtotal:"750,000",gst_amount:"135,000",total_amount:"885,000",payment_terms:"50% advance, 50% within 30 days",validity_period:"30 days"};function lG({isOpen:e,onClose:t,template:n}){if(!e)return null;if(!n||!n.content)return o.jsx(it,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-500",children:[o.jsx(Ue,{className:"w-8 h-8 animate-spin mb-4"}),o.jsx("p",{children:"Loading template..."})]})});try{const s=Object.entries(oG).reduce((r,[i,a])=>{const l=new RegExp(`{{${i}}}`,"g");return r.replace(l,a)},n.content);return o.jsx(it,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:o.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s}})})}catch(s){return console.error("Error rendering template preview:",s),o.jsx(it,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-red-500",children:[o.jsx("p",{children:"Error rendering template preview"}),o.jsx("p",{className:"text-sm mt-2",children:"Please check the template content for any issues."})]})})}}function cG({template:e,onEdit:t,onDelete:n,onPreview:s,onSetDefault:r}){return o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex items-center",children:[o.jsx(ln,{className:"h-5 w-5 text-gray-700 mr-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 flex-1",children:e.name})]}),o.jsxs("div",{className:"p-4 flex-1",children:[e.description&&o.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-3",children:e.description}),e.isDefault&&o.jsx("span",{className:"inline-block bg-blue-50 text-blue-700 text-xs font-medium px-2.5 py-0.5 rounded-md",children:"Default Template"})]}),o.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex flex-wrap gap-2",children:[o.jsxs(W,{variant:"outline",size:"sm",onClick:t,className:"flex items-center",children:[o.jsx(gi,{className:"h-4 w-4 mr-1.5"}),"Edit"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:s,className:"flex items-center",children:[o.jsx(LS,{className:"h-4 w-4 mr-1.5"}),"Preview"]}),!e.isDefault&&o.jsxs(o.Fragment,{children:[o.jsxs(W,{variant:"outline",size:"sm",onClick:r,className:"flex items-center",children:[o.jsx(LA,{className:"h-4 w-4 mr-1.5"}),"Set Default"]}),o.jsxs(W,{variant:"outline",size:"sm",onClick:n,className:"flex items-center text-red-500 hover:text-red-700 hover:border-red-300",children:[o.jsx(Sa,{className:"h-4 w-4 mr-1.5"}),"Delete"]})]})]})]})}function uD(){const[e,t]=y.useState(null);return{toast:e,showToast:r=>{t(r),r.duration!==0&&setTimeout(()=>{t(null)},r.duration||3e3)},hideToast:()=>{t(null)}}}const j1={content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
    <div style="text-align: center; margin-bottom: 15px;">
      <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
      <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
      <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
    </div>

    <table style="width: 100%; margin-bottom: 15px; font-size: 13px;">
      <tr>
        <td style="width: 50%; vertical-align: top;">
          <strong style="color: #42526E;">From:</strong><br>
          <strong>{{company_name}}</strong><br>
          {{company_address}}<br>
          Phone: {{company_phone}}<br>
          Email: {{company_email}}<br>
          GST: {{company_gst}}
        </td>
        <td style="width: 50%; vertical-align: top;">
          <strong style="color: #42526E;">To:</strong><br>
          <strong>{{customer_name}}</strong><br>
          {{customer_designation}}<br>
          {{customer_company}}<br>
          {{customer_address}}<br>
          Phone: {{customer_phone}}<br>
          Email: {{customer_email}}
        </td>
      </tr>
    </table>

    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 13px;">
      <tr>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Quotation ID:</strong> {{quotation_number}}</td>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Valid Until:</strong> {{valid_until}}</td>
      </tr>
      <tr>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Date:</strong> {{quotation_date}}</td>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Order Type:</strong> {{order_type}}</td>
      </tr>
    </table>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Equipment & Project Details</strong>
      <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA; width: 160px;"><strong>Equipment</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{equipment_name}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Duration</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{project_duration}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Working Hours</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{working_hours}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Shift Type</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{shift_type}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Base Rate</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{base_rate}}</td>
        </tr>
      </table>
    </div>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Pricing Summary</strong>
      <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">Subtotal</td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; text-align: right; width: 160px;">{{subtotal}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;">GST (18%)</td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA; text-align: right;">{{gst_amount}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #0052CC; background: #0052CC; color: white; font-weight: 600;">Total Amount</td>
          <td style="padding: 6px 10px; border: 1px solid #0052CC; background: #0052CC; color: white; text-align: right; font-weight: 600;">{{total_amount}}</td>
        </tr>
      </table>
    </div>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Terms & Conditions</strong>
      <ol style="margin: 0; padding-left: 20px; font-size: 13px; color: #42526E;">
        <li style="margin-bottom: 2px;">Payment Terms: {{payment_terms}}</li>
        <li style="margin-bottom: 2px;">GST @18% will be charged extra as applicable</li>
        <li style="margin-bottom: 2px;">Mobilization charges will be billed extra based on distance</li>
        <li style="margin-bottom: 2px;">Working hours: Standard 8-hour shift. Additional hours will be charged extra</li>
        <li style="margin-bottom: 2px;">Operator & fuel will be provided by ASP Cranes</li>
        <li style="margin-bottom: 2px;">Client to provide necessary permissions & clearances</li>
        <li style="margin-bottom: 2px;">Rate validity: {{validity_period}}</li>
        <li style="margin-bottom: 2px;">Insurance coverage as per standard terms</li>
      </ol>
    </div>

    <div style="text-align: center; margin-top: 20px; color: #42526E; font-size: 13px;">
      <p style="margin: 0 0 2px 0;"><strong>Thank you for your business!</strong></p>
      <p style="margin: 0;">For any queries, please contact us at {{company_phone}} or email at {{company_email}}</p>
    </div>
  </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};function uG(){const{user:e,isAuthenticated:t}=ze(),n=Qt(),{showToast:s}=uD(),[r,i]=y.useState([]),[a,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState("new"),[f,m]=y.useState(!0),[p,x]=y.useState(null),[b,w]=y.useState({show:!1,title:""}),[v,g]=y.useState(!1),[j,S]=y.useState(!1),[k,N]=y.useState({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1}),[C,E]=y.useState(null);y.useEffect(()=>{if(!t||!e){n("/login");return}if(e.role!=="admin"&&e.role!=="sales_agent"){n("/dashboard");return}P()},[t,e,n]);const P=async()=>{try{m(!0),x(null);const T=await Jg();i(T)}catch(T){console.error("Error loading templates:",T),x("Failed to load templates"),s({title:"Error",message:"Failed to load templates",type:"error"})}finally{m(!1)}},L=()=>{n("/templates/new")},F=T=>{n(`/templates/edit/${T.id}`)},$=T=>{E(T),u(!0)},A=async T=>{try{await nS(T),s({title:"Success",message:"Template deleted successfully",type:"success"}),P()}catch(R){console.error("Error deleting template:",R),s({title:"Error",message:"Failed to delete template",type:"error"})}},B=async T=>{T.preventDefault(),m(!0);try{if(k.id)await Zr(k.id,{...k,updatedAt:new Date().toISOString()}),w({show:!0,title:"Template updated successfully",variant:"success"});else{const R=new Date().toISOString(),H={...k,id:`template-${Date.now()}`,createdAt:R,updatedAt:R};await Xg(H),w({show:!0,title:"Template created successfully",variant:"success"})}q(),P()}catch(R){console.error("Error saving template:",R),w({show:!0,title:"Failed to save template",variant:"error"})}finally{m(!1)}},q=()=>{g(!1),l(!1),N({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1}),S(!1)},I=async T=>{try{const R=r.find(H=>H.id===T);R&&(await Promise.all(r.filter(H=>H.isDefault).map(H=>Zr(H.id,{...H,isDefault:!1}))),await Zr(T,{...R,isDefault:!0}),s({title:"Success",message:"Default template updated successfully",type:"success"}),P())}catch(R){console.error("Error setting default template:",R),s({title:"Error",message:"Failed to set default template",type:"error"})}};return f?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(Ue,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx("div",{className:"text-red-500",children:p}),o.jsx(W,{onClick:P,children:"Retry"})]}):!t||!e||e.role!=="admin"&&e.role!=="sales_agent"?null:r.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx("div",{className:"text-gray-500",children:"No templates found"}),o.jsx(W,{onClick:L,children:"Create Template"})]}):o.jsxs("div",{className:"container px-4 sm:px-6 py-6 sm:py-8 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Templates"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage quotation templates for your business"})]}),o.jsxs(W,{onClick:()=>{g(!0),h("new"),N({id:"",name:"",description:"",content:j1.content,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1})},className:"w-full sm:w-auto flex items-center gap-2",children:[o.jsx(rs,{className:"w-4 h-4"}),"Create Template"]})]}),f?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Ue,{className:"w-10 h-10 text-primary-500 animate-spin"})}):p?o.jsx(ee,{children:o.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(ln,{className:"w-12 h-12 text-red-500 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load templates"}),o.jsx("p",{className:"text-gray-500 mb-4 text-center",children:"There was an error loading your templates."}),o.jsx(W,{onClick:P,children:"Try Again"})]})}):r.length===0?o.jsx(ee,{children:o.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(ln,{className:"w-12 h-12 text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),o.jsx("p",{className:"text-gray-500 mb-4 text-center",children:"Create your first quotation template to get started."}),o.jsxs(W,{onClick:()=>{g(!0),h("new"),N({id:"",name:"",description:"",content:j1.content,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1})},children:[o.jsx(rs,{className:"w-4 h-4 mr-2"}),"Create Template"]})]})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(T=>o.jsx(cG,{template:T,onEdit:()=>F(T),onDelete:()=>A(T.id),onPreview:()=>$(T),onSetDefault:()=>I(T.id)},T.id))}),o.jsx(it,{isOpen:v||a,onClose:q,title:a?"Edit Template":"Create Template",size:"full",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ee,{label:"Template Name",value:k.name,onChange:T=>N({...k,name:T.target.value})}),o.jsxs("div",{className:"flex gap-2 sm:gap-4 mb-4",children:[o.jsx(W,{variant:j?"default":"outline",onClick:()=>S(!0),size:"sm",className:"flex-1 sm:flex-none",children:"Visual Editor"}),o.jsx(W,{variant:j?"outline":"default",onClick:()=>S(!1),size:"sm",className:"flex-1 sm:flex-none",children:"HTML Editor"})]}),j?o.jsx(cD,{template:k,onChange:T=>N(T)}):o.jsxs("div",{className:"space-y-4",children:[o.jsx(Dn,{label:"HTML Content",value:k.content,onChange:T=>N({...k,content:T.target.value}),rows:20}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["Use double curly braces for placeholders, e.g. ","{{customer_name}}"]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 mt-6",children:[o.jsx(W,{variant:"outline",onClick:q,className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(W,{onClick:B,disabled:f,className:"w-full sm:w-auto",children:f?"Saving...":"Save Template"})]})]})}),o.jsx(lG,{isOpen:c,onClose:()=>u(!1),template:C}),b.show&&o.jsx(lt,{title:b.title,variant:b.variant,isVisible:b.show,onClose:()=>w({show:!1,title:""})})]})}function dG(){const e=Qt(),{id:t}=Qg(),{showToast:n}=uD(),[s,r]=y.useState(!1),[i,a]=y.useState({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"",isDefault:!1});y.useEffect(()=>{t&&l(t)},[t]);const l=async u=>{try{const d=await tS(u);d&&a(d)}catch(d){console.error("Error loading template:",d),n({title:"Error",message:"Failed to load template",type:"error"}),e("/templates")}},c=async()=>{r(!0);try{if(i.id)await Zr(i.id,{...i,updatedAt:new Date().toISOString()}),n({title:"Success",message:"Template updated successfully",type:"success"});else{const u={...i,id:`template-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Xg(u),n({title:"Success",message:"Template created successfully",type:"success"})}e("/templates")}catch(u){console.error("Error saving template:",u),n({title:"Error",message:"Failed to save template",type:"error"})}finally{r(!1)}};return o.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(W,{variant:"ghost",onClick:()=>e("/templates"),children:[o.jsx(ix,{className:"h-4 w-4 mr-2"}),"Back to Templates"]}),o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Template":"Create Template"})]}),o.jsxs(W,{onClick:c,disabled:s,children:[o.jsx(xi,{className:"h-4 w-4 mr-2"}),s?"Saving...":"Save Template"]})]}),o.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[o.jsx("div",{className:"col-span-12",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Details"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ee,{label:"Template Name",value:i.name,onChange:u=>a({...i,name:u.target.value}),placeholder:"Enter template name"}),o.jsx(Ee,{label:"Description",value:i.description||"",onChange:u=>a({...i,description:u.target.value}),placeholder:"Enter template description"})]})})]})}),o.jsx("div",{className:"col-span-12",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Editor"})}),o.jsx(se,{children:o.jsx(cD,{template:i,onChange:u=>a(u)})})]})})]})]})}const hG=({children:e})=>{const{isAuthenticated:t,user:n,setUser:s}=ze();return y.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await Kg();i&&s(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,s]),o.jsx(o.Fragment,{children:e})};function yt({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:s,isAuthenticated:r,setUser:i}=ze(),[a,l]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const u=await Kg();u?(!s||s.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[s,i]),a?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(` Protected Route Check - Authenticated: ${r}, User: ${(s==null?void 0:s.name)||"none"}`),!r||!s?(console.log(` Route protection failed - redirecting to ${t}`),o.jsx(In,{to:t,replace:!0})):n&&!n.includes(s.role)?(console.log(` Role protection failed - user has ${s.role} but needs one of [${n.join(",")}]`),o.jsx(In,{to:"/dashboard",replace:!0})):(console.log(" Route protection passed - rendering protected content"),e?o.jsx(o.Fragment,{children:e}):o.jsx(qN,{})))}function fG(){const{user:e,isAuthenticated:t}=ze();if(console.log(" DashboardRouter called"),console.log(" Authentication state:",{isAuthenticated:t}),console.log(" User object:",JSON.stringify(e,null,2)),console.log(" User role:",e==null?void 0:e.role),!t||!e)return console.log(" DashboardRouter: Not authenticated, redirecting to login"),o.jsx(In,{to:"/login",replace:!0});if(!e.role)return console.error(" DashboardRouter: User authenticated but role is undefined!"),console.error(" Full user object:",e),console.log(" Fallback: Showing AdminDashboard due to missing role"),o.jsx(jf,{});switch(console.log(" DashboardRouter: User role is",e.role),e.role){case"admin":return console.log(" Rendering AdminDashboard"),o.jsx(jf,{});case"sales_agent":return console.log(" Rendering SalesAgentDashboard"),o.jsx(mz,{});case"operations_manager":return console.log(" Rendering OperationsManagerDashboard"),o.jsx(yz,{});case"operator":return console.log(" Rendering OperatorDashboard"),o.jsx(bz,{});default:return console.log(" Unknown user role:",e.role,"showing AdminDashboard as fallback"),o.jsx(jf,{})}}function mG(){const e=window.location.pathname==="/"||window.location.pathname==="";if(console.log(" AppContent - Current pathname:",window.location.pathname),console.log(" AppContent - Is root URL:",e),e)return console.log(" Redirecting from root to /login"),o.jsx(In,{to:"/login",replace:!0});const t=o.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),o.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return o.jsx(y.Suspense,{fallback:t,children:o.jsxs(A_,{children:[o.jsx(Le,{path:"/blank-check.html",element:o.jsx(In,{to:"/blank-check.html",replace:!0})}),o.jsx(Le,{path:"/api-test.html",element:o.jsx(In,{to:"/api-test.html",replace:!0})}),o.jsx(Le,{path:"/login",element:o.jsx(lR,{})}),o.jsx(Le,{element:o.jsx(yt,{}),children:o.jsxs(Le,{path:"/",element:o.jsx(_5,{}),children:[o.jsx(Le,{index:!0,element:o.jsx(In,{to:"/dashboard",replace:!0})}),o.jsx(Le,{path:"dashboard",element:o.jsx(fG,{})}),o.jsx(Le,{path:"admin/users",element:o.jsx(yt,{allowedRoles:["admin"],children:o.jsx(vU,{})})}),o.jsx(Le,{path:"admin/config",element:o.jsx(yt,{allowedRoles:["admin"],children:o.jsx(MU,{})})}),o.jsx(Le,{path:"admin/equipment",element:o.jsx(yt,{allowedRoles:["admin","operations_manager"],children:o.jsx(pU,{})})}),o.jsx(Le,{path:"admin/services",element:o.jsx(yt,{allowedRoles:["admin","operations_manager"],children:o.jsx(xU,{})})}),o.jsx(Le,{path:"admin/quotation-templates",element:o.jsx(yt,{allowedRoles:["admin","sales_agent"],children:o.jsx(uG,{})})}),o.jsx(Le,{path:"admin/quotation-templates/edit/:id",element:o.jsx(yt,{allowedRoles:["admin","sales_agent"],children:o.jsx(dG,{})})}),o.jsx(Le,{path:"leads",element:o.jsx(yt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(wV,{})})}),o.jsx(Le,{path:"customers",element:o.jsx(yt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(AU,{})})}),o.jsx(Le,{path:"deals",element:o.jsx(yt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(nG,{})})}),o.jsx(Le,{path:"deals/:id",element:o.jsx(yt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(rG,{})})}),o.jsx(Le,{path:"quotations",element:o.jsx(yt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(RV,{})})}),o.jsx(Le,{path:"quotations/create",element:o.jsx(yt,{allowedRoles:["admin","sales_agent"],children:o.jsx(UV,{})})}),o.jsx(Le,{path:"jobs",element:o.jsx(yt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(tU,{})})}),o.jsx(Le,{path:"job-test",element:o.jsx(yt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(rU,{})})}),o.jsx(Le,{path:"site-assessments",element:o.jsx(yt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(aU,{})})}),o.jsx(Le,{path:"job-summary",element:o.jsx(yt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(lU,{})})}),o.jsx(Le,{path:"*",element:o.jsx(In,{to:"/dashboard",replace:!0})})]})})]})})}function pG(){return o.jsx(B_,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(hG,{children:o.jsx(G_,{children:o.jsx(mG,{})})})})}console.log(" Starting ASP Cranes CRM...");console.log(" Current URL:",window.location.href);console.log(" localStorage contents:",{"jwt-token":localStorage.getItem("jwt-token")?"Present":"Missing","explicit-login-performed":localStorage.getItem("explicit-login-performed"),"auth-storage":localStorage.getItem("auth-storage")?"Present":"Missing"});console.log(" Auth store hydration temporarily disabled for debugging");document.body.classList.contains("dark")||document.body.classList.add("dark");const rm=document.getElementById("root");if(!rm)console.error(" Failed to find root element"),document.body.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">Error: Root element not found</div>';else{console.log(" Root element found, creating React app...");try{IN(rm).render(o.jsx(y.StrictMode,{children:o.jsx(y.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading ASP Cranes CRM..."})]})}),children:o.jsx(pG,{})})})),console.log(" React application rendered successfully")}catch(e){console.error(" React render error:",e),rm.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">React render error: '+e+"</div>"}}
