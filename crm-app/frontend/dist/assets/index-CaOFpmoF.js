var xT=Object.defineProperty;var yT=(e,t,n)=>t in e?xT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ue=(e,t,n)=>yT(e,typeof t!="symbol"?t+"":t,n);function vT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Dd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uj={exports:{}},Td={},dj={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tl=Symbol.for("react.element"),bT=Symbol.for("react.portal"),wT=Symbol.for("react.fragment"),jT=Symbol.for("react.strict_mode"),ST=Symbol.for("react.profiler"),NT=Symbol.for("react.provider"),CT=Symbol.for("react.context"),kT=Symbol.for("react.forward_ref"),ET=Symbol.for("react.suspense"),DT=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),Ly=Symbol.iterator;function PT(e){return e===null||typeof e!="object"?null:(e=Ly&&e[Ly]||e["@@iterator"],typeof e=="function"?e:null)}var hj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fj=Object.assign,mj={};function Sa(e,t,n){this.props=e,this.context=t,this.refs=mj,this.updater=n||hj}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pj(){}pj.prototype=Sa.prototype;function cg(e,t,n){this.props=e,this.context=t,this.refs=mj,this.updater=n||hj}var ug=cg.prototype=new pj;ug.constructor=cg;fj(ug,Sa.prototype);ug.isPureReactComponent=!0;var Fy=Array.isArray,gj=Object.prototype.hasOwnProperty,dg={current:null},xj={key:!0,ref:!0,__self:!0,__source:!0};function yj(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)gj.call(t,r)&&!xj.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Tl,type:e,key:i,ref:a,props:s,_owner:dg.current}}function _T(e,t){return{$$typeof:Tl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function hg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tl}function IT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $y=/\/+/g;function Ph(e,t){return typeof e=="object"&&e!==null&&e.key!=null?IT(""+e.key):t.toString(36)}function qc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Tl:case bT:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Ph(a,0):r,Fy(s)?(n="",e!=null&&(n=e.replace($y,"$&/")+"/"),qc(s,t,n,"",function(u){return u})):s!=null&&(hg(s)&&(s=_T(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace($y,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Fy(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ph(i,l);a+=qc(i,t,n,c,s)}else if(c=PT(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ph(i,l++),a+=qc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Jl(e,t,n){if(e==null)return e;var r=[],s=0;return qc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function AT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},Gc={transition:null},MT={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Gc,ReactCurrentOwner:dg};function vj(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Jl,forEach:function(e,t,n){Jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Jl(e,function(){t++}),t},toArray:function(e){return Jl(e,function(t){return t})||[]},only:function(e){if(!hg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=Sa;ke.Fragment=wT;ke.Profiler=ST;ke.PureComponent=cg;ke.StrictMode=jT;ke.Suspense=ET;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MT;ke.act=vj;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fj({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=dg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)gj.call(t,c)&&!xj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Tl,type:e.type,key:s,ref:i,props:r,_owner:a}};ke.createContext=function(e){return e={$$typeof:CT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:NT,_context:e},e.Consumer=e};ke.createElement=yj;ke.createFactory=function(e){var t=yj.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:kT,render:e}};ke.isValidElement=hg;ke.lazy=function(e){return{$$typeof:TT,_payload:{_status:-1,_result:e},_init:AT}};ke.memo=function(e,t){return{$$typeof:DT,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Gc.transition;Gc.transition={};try{e()}finally{Gc.transition=t}};ke.unstable_act=vj;ke.useCallback=function(e,t){return qt.current.useCallback(e,t)};ke.useContext=function(e){return qt.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};ke.useEffect=function(e,t){return qt.current.useEffect(e,t)};ke.useId=function(){return qt.current.useId()};ke.useImperativeHandle=function(e,t,n){return qt.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return qt.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return qt.current.useReducer(e,t,n)};ke.useRef=function(e){return qt.current.useRef(e)};ke.useState=function(e){return qt.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return qt.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return qt.current.useTransition()};ke.version="18.3.1";dj.exports=ke;var x=dj.exports;const te=Dd(x),fg=vT({__proto__:null,default:te},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT=x,RT=Symbol.for("react.element"),LT=Symbol.for("react.fragment"),FT=Object.prototype.hasOwnProperty,$T=OT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BT={key:!0,ref:!0,__self:!0,__source:!0};function bj(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)FT.call(t,r)&&!BT.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:RT,type:e,key:i,ref:a,props:s,_owner:$T.current}}Td.Fragment=LT;Td.jsx=bj;Td.jsxs=bj;uj.exports=Td;var o=uj.exports,wj={exports:{}},mn={},jj={exports:{}},Sj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var z=P.length;P.push(I);e:for(;0<z;){var W=z-1>>>1,Z=P[W];if(0<s(Z,I))P[W]=I,P[z]=Z,z=W;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var I=P[0],z=P.pop();if(z!==I){P[0]=z;e:for(var W=0,Z=P.length,ie=Z>>>1;W<ie;){var le=2*(W+1)-1,ge=P[le],q=le+1,O=P[q];if(0>s(ge,z))q<Z&&0>s(O,ge)?(P[W]=O,P[q]=z,W=q):(P[W]=ge,P[le]=z,W=le);else if(q<Z&&0>s(O,z))P[W]=O,P[q]=z,W=q;else break e}}return I}function s(P,I){var z=P.sortIndex-I.sortIndex;return z!==0?z:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=P)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function S(P){if(g=!1,w(P),!p)if(n(c)!==null)p=!0,V(j);else{var I=n(u);I!==null&&M(S,I.startTime-P)}}function j(P,I){p=!1,g&&(g=!1,b(C),C=-1),m=!0;var z=f;try{for(w(I),h=n(c);h!==null&&(!(h.expirationTime>I)||P&&!F());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var Z=W(h.expirationTime<=I);I=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&r(c),w(I)}else r(c);h=n(c)}if(h!==null)var ie=!0;else{var le=n(u);le!==null&&M(S,le.startTime-I),ie=!1}return ie}finally{h=null,f=z,m=!1}}var k=!1,N=null,C=-1,E=5,T=-1;function F(){return!(e.unstable_now()-T<E)}function R(){if(N!==null){var P=e.unstable_now();T=P;var I=!0;try{I=N(!0,P)}finally{I?$():(k=!1,N=null)}}else k=!1}var $;if(typeof v=="function")$=function(){v(R)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,B=D.port2;D.port1.onmessage=R,$=function(){B.postMessage(null)}}else $=function(){y(R,0)};function V(P){N=P,k||(k=!0,$())}function M(P,I){C=y(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,V(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var z=f;f=I;try{return P()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var z=f;f=P;try{return I()}finally{f=z}},e.unstable_scheduleCallback=function(P,I,z){var W=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,P){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,P={id:d++,callback:I,priorityLevel:P,startTime:z,expirationTime:Z,sortIndex:-1},z>W?(P.sortIndex=z,t(u,P),n(c)===null&&P===n(u)&&(g?(b(C),C=-1):g=!0,M(S,z-W))):(P.sortIndex=Z,t(c,P),p||m||(p=!0,V(j))),P},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(P){var I=f;return function(){var z=f;f=I;try{return P.apply(this,arguments)}finally{f=z}}}})(Sj);jj.exports=Sj;var zT=jj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=x,hn=zT;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nj=new Set,Ho={};function vi(e,t){sa(e,t),sa(e+"Capture",t)}function sa(e,t){for(Ho[e]=t,e=0;e<t.length;e++)Nj.add(t[e])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xm=Object.prototype.hasOwnProperty,UT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,By={},zy={};function WT(e){return xm.call(zy,e)?!0:xm.call(By,e)?!1:UT.test(e)?zy[e]=!0:(By[e]=!0,!1)}function HT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qT(e,t,n,r){if(t===null||typeof t>"u"||HT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gt(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new Gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new Gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new Gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kt[e]=new Gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new Gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new Gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kt[e]=new Gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kt[e]=new Gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kt[e]=new Gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var mg=/[\-:]([a-z])/g;function pg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mg,pg);kt[t]=new Gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mg,pg);kt[t]=new Gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mg,pg);kt[t]=new Gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kt[e]=new Gt(e,1,!1,e.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kt[e]=new Gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function gg(e,t,n,r){var s=kt.hasOwnProperty(t)?kt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qT(t,n,s,r)&&(n=null),r||s===null?WT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fr=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),xg=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),Cj=Symbol.for("react.provider"),kj=Symbol.for("react.context"),yg=Symbol.for("react.forward_ref"),vm=Symbol.for("react.suspense"),bm=Symbol.for("react.suspense_list"),vg=Symbol.for("react.memo"),Yr=Symbol.for("react.lazy"),Ej=Symbol.for("react.offscreen"),Vy=Symbol.iterator;function Va(e){return e===null||typeof e!="object"?null:(e=Vy&&e[Vy]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,_h;function mo(e){if(_h===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var Ih=!1;function Ah(e,t){if(!e||Ih)return"";Ih=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Ih=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mo(e):""}function GT(e){switch(e.tag){case 5:return mo(e.type);case 16:return mo("Lazy");case 13:return mo("Suspense");case 19:return mo("SuspenseList");case 0:case 2:case 15:return e=Ah(e.type,!1),e;case 11:return e=Ah(e.type.render,!1),e;case 1:return e=Ah(e.type,!0),e;default:return""}}function wm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oi:return"Fragment";case Mi:return"Portal";case ym:return"Profiler";case xg:return"StrictMode";case vm:return"Suspense";case bm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kj:return(e.displayName||"Context")+".Consumer";case Cj:return(e._context.displayName||"Context")+".Provider";case yg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vg:return t=e.displayName||null,t!==null?t:wm(e.type)||"Memo";case Yr:t=e._payload,e=e._init;try{return wm(e(t))}catch{}}return null}function YT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wm(t);case 8:return t===xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function js(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QT(e){var t=Dj(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ec(e){e._valueTracker||(e._valueTracker=QT(e))}function Tj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dj(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jm(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Uy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=js(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pj(e,t){t=t.checked,t!=null&&gg(e,"checked",t,!1)}function Sm(e,t){Pj(e,t);var n=js(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Nm(e,t.type,js(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Nm(e,t,n){(t!=="number"||xu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var po=Array.isArray;function Ki(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+js(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Cm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(po(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:js(n)}}function _j(e,t){var n=js(t.value),r=js(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function qy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ij(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function km(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ij(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tc,Aj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KT=["Webkit","ms","Moz","O"];Object.keys(Co).forEach(function(e){KT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Co[t]=Co[e]})});function Mj(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Co.hasOwnProperty(e)&&Co[e]?(""+t).trim():t+"px"}function Oj(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Mj(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var XT=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Em(e,t){if(t){if(XT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Dm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=null;function bg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pm=null,Xi=null,Ji=null;function Gy(e){if(e=Il(e)){if(typeof Pm!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Md(t),Pm(e.stateNode,e.type,t))}}function Rj(e){Xi?Ji?Ji.push(e):Ji=[e]:Xi=e}function Lj(){if(Xi){var e=Xi,t=Ji;if(Ji=Xi=null,Gy(e),t)for(e=0;e<t.length;e++)Gy(t[e])}}function Fj(e,t){return e(t)}function $j(){}var Mh=!1;function Bj(e,t,n){if(Mh)return e(t,n);Mh=!0;try{return Fj(e,t,n)}finally{Mh=!1,(Xi!==null||Ji!==null)&&($j(),Lj())}}function Go(e,t){var n=e.stateNode;if(n===null)return null;var r=Md(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var _m=!1;if(Ar)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){_m=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{_m=!1}function JT(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ko=!1,yu=null,vu=!1,Im=null,ZT={onError:function(e){ko=!0,yu=e}};function eP(e,t,n,r,s,i,a,l,c){ko=!1,yu=null,JT.apply(ZT,arguments)}function tP(e,t,n,r,s,i,a,l,c){if(eP.apply(this,arguments),ko){if(ko){var u=yu;ko=!1,yu=null}else throw Error(K(198));vu||(vu=!0,Im=u)}}function bi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yy(e){if(bi(e)!==e)throw Error(K(188))}function nP(e){var t=e.alternate;if(!t){if(t=bi(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Yy(s),e;if(i===r)return Yy(s),t;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function Vj(e){return e=nP(e),e!==null?Uj(e):null}function Uj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Uj(e);if(t!==null)return t;e=e.sibling}return null}var Wj=hn.unstable_scheduleCallback,Qy=hn.unstable_cancelCallback,rP=hn.unstable_shouldYield,sP=hn.unstable_requestPaint,rt=hn.unstable_now,iP=hn.unstable_getCurrentPriorityLevel,wg=hn.unstable_ImmediatePriority,Hj=hn.unstable_UserBlockingPriority,bu=hn.unstable_NormalPriority,aP=hn.unstable_LowPriority,qj=hn.unstable_IdlePriority,Pd=null,ar=null;function oP(e){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(Pd,e,void 0,(e.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:uP,lP=Math.log,cP=Math.LN2;function uP(e){return e>>>=0,e===0?32:31-(lP(e)/cP|0)|0}var nc=64,rc=4194304;function go(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=go(l):(i&=a,i!==0&&(r=go(i)))}else a=n&~s,a!==0?r=go(a):i!==0&&(r=go(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Hn(t),s=1<<n,r|=e[n],t&=~s;return r}function dP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Hn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=dP(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Am(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gj(){var e=nc;return nc<<=1,!(nc&4194240)&&(nc=64),e}function Oh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Hn(t),e[t]=n}function fP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Hn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function jg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Hn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Re=0;function Yj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qj,Sg,Kj,Xj,Jj,Mm=!1,sc=[],ls=null,cs=null,us=null,Yo=new Map,Qo=new Map,Xr=[],mP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ky(e,t){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(t.pointerId)}}function Wa(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Il(t),t!==null&&Sg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function pP(e,t,n,r,s){switch(t){case"focusin":return ls=Wa(ls,e,t,n,r,s),!0;case"dragenter":return cs=Wa(cs,e,t,n,r,s),!0;case"mouseover":return us=Wa(us,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Yo.set(i,Wa(Yo.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qo.set(i,Wa(Qo.get(i)||null,e,t,n,r,s)),!0}return!1}function Zj(e){var t=Xs(e.target);if(t!==null){var n=bi(t);if(n!==null){if(t=n.tag,t===13){if(t=zj(n),t!==null){e.blockedOn=t,Jj(e.priority,function(){Kj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Om(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Tm=r,n.target.dispatchEvent(r),Tm=null}else return t=Il(n),t!==null&&Sg(t),e.blockedOn=n,!1;t.shift()}return!0}function Xy(e,t,n){Yc(e)&&n.delete(t)}function gP(){Mm=!1,ls!==null&&Yc(ls)&&(ls=null),cs!==null&&Yc(cs)&&(cs=null),us!==null&&Yc(us)&&(us=null),Yo.forEach(Xy),Qo.forEach(Xy)}function Ha(e,t){e.blockedOn===t&&(e.blockedOn=null,Mm||(Mm=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,gP)))}function Ko(e){function t(s){return Ha(s,e)}if(0<sc.length){Ha(sc[0],e);for(var n=1;n<sc.length;n++){var r=sc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ls!==null&&Ha(ls,e),cs!==null&&Ha(cs,e),us!==null&&Ha(us,e),Yo.forEach(t),Qo.forEach(t),n=0;n<Xr.length;n++)r=Xr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)Zj(n),n.blockedOn===null&&Xr.shift()}var Zi=Fr.ReactCurrentBatchConfig,ju=!0;function xP(e,t,n,r){var s=Re,i=Zi.transition;Zi.transition=null;try{Re=1,Ng(e,t,n,r)}finally{Re=s,Zi.transition=i}}function yP(e,t,n,r){var s=Re,i=Zi.transition;Zi.transition=null;try{Re=4,Ng(e,t,n,r)}finally{Re=s,Zi.transition=i}}function Ng(e,t,n,r){if(ju){var s=Om(e,t,n,r);if(s===null)Hh(e,t,r,Su,n),Ky(e,r);else if(pP(s,e,t,n,r))r.stopPropagation();else if(Ky(e,r),t&4&&-1<mP.indexOf(e)){for(;s!==null;){var i=Il(s);if(i!==null&&Qj(i),i=Om(e,t,n,r),i===null&&Hh(e,t,r,Su,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hh(e,t,r,null,n)}}var Su=null;function Om(e,t,n,r){if(Su=null,e=bg(r),e=Xs(e),e!==null)if(t=bi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zj(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Su=e,null}function eS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iP()){case wg:return 1;case Hj:return 4;case bu:case aP:return 16;case qj:return 536870912;default:return 16}default:return 16}}var ts=null,Cg=null,Qc=null;function tS(){if(Qc)return Qc;var e,t=Cg,n=t.length,r,s="value"in ts?ts.value:ts.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Qc=s.slice(e,1<r?1-r:void 0)}function Kc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ic(){return!0}function Jy(){return!1}function pn(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ic:Jy,this.isPropagationStopped=Jy,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kg=pn(Na),_l=Ze({},Na,{view:0,detail:0}),vP=pn(_l),Rh,Lh,qa,_d=Ze({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qa&&(qa&&e.type==="mousemove"?(Rh=e.screenX-qa.screenX,Lh=e.screenY-qa.screenY):Lh=Rh=0,qa=e),Rh)},movementY:function(e){return"movementY"in e?e.movementY:Lh}}),Zy=pn(_d),bP=Ze({},_d,{dataTransfer:0}),wP=pn(bP),jP=Ze({},_l,{relatedTarget:0}),Fh=pn(jP),SP=Ze({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),NP=pn(SP),CP=Ze({},Na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kP=pn(CP),EP=Ze({},Na,{data:0}),e0=pn(EP),DP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _P(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=PP[e])?!!t[e]:!1}function Eg(){return _P}var IP=Ze({},_l,{key:function(e){if(e.key){var t=DP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?TP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eg,charCode:function(e){return e.type==="keypress"?Kc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),AP=pn(IP),MP=Ze({},_d,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=pn(MP),OP=Ze({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eg}),RP=pn(OP),LP=Ze({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),FP=pn(LP),$P=Ze({},_d,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),BP=pn($P),zP=[9,13,27,32],Dg=Ar&&"CompositionEvent"in window,Eo=null;Ar&&"documentMode"in document&&(Eo=document.documentMode);var VP=Ar&&"TextEvent"in window&&!Eo,nS=Ar&&(!Dg||Eo&&8<Eo&&11>=Eo),n0=" ",r0=!1;function rS(e,t){switch(e){case"keyup":return zP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ri=!1;function UP(e,t){switch(e){case"compositionend":return sS(t);case"keypress":return t.which!==32?null:(r0=!0,n0);case"textInput":return e=t.data,e===n0&&r0?null:e;default:return null}}function WP(e,t){if(Ri)return e==="compositionend"||!Dg&&rS(e,t)?(e=tS(),Qc=Cg=ts=null,Ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nS&&t.locale!=="ko"?null:t.data;default:return null}}var HP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HP[e.type]:t==="textarea"}function iS(e,t,n,r){Rj(r),t=Nu(t,"onChange"),0<t.length&&(n=new kg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Do=null,Xo=null;function qP(e){gS(e,0)}function Id(e){var t=$i(e);if(Tj(t))return e}function GP(e,t){if(e==="change")return t}var aS=!1;if(Ar){var $h;if(Ar){var Bh="oninput"in document;if(!Bh){var i0=document.createElement("div");i0.setAttribute("oninput","return;"),Bh=typeof i0.oninput=="function"}$h=Bh}else $h=!1;aS=$h&&(!document.documentMode||9<document.documentMode)}function a0(){Do&&(Do.detachEvent("onpropertychange",oS),Xo=Do=null)}function oS(e){if(e.propertyName==="value"&&Id(Xo)){var t=[];iS(t,Xo,e,bg(e)),Bj(qP,t)}}function YP(e,t,n){e==="focusin"?(a0(),Do=t,Xo=n,Do.attachEvent("onpropertychange",oS)):e==="focusout"&&a0()}function QP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Id(Xo)}function KP(e,t){if(e==="click")return Id(t)}function XP(e,t){if(e==="input"||e==="change")return Id(t)}function JP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gn=typeof Object.is=="function"?Object.is:JP;function Jo(e,t){if(Gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xm.call(t,s)||!Gn(e[s],t[s]))return!1}return!0}function o0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function l0(e,t){var n=o0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o0(n)}}function lS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cS(){for(var e=window,t=xu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xu(e.document)}return t}function Tg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ZP(e){var t=cS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lS(n.ownerDocument.documentElement,n)){if(r!==null&&Tg(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=l0(n,i);var a=l0(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var e_=Ar&&"documentMode"in document&&11>=document.documentMode,Li=null,Rm=null,To=null,Lm=!1;function c0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lm||Li==null||Li!==xu(r)||(r=Li,"selectionStart"in r&&Tg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),To&&Jo(To,r)||(To=r,r=Nu(Rm,"onSelect"),0<r.length&&(t=new kg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Li)))}function ac(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fi={animationend:ac("Animation","AnimationEnd"),animationiteration:ac("Animation","AnimationIteration"),animationstart:ac("Animation","AnimationStart"),transitionend:ac("Transition","TransitionEnd")},zh={},uS={};Ar&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function Ad(e){if(zh[e])return zh[e];if(!Fi[e])return e;var t=Fi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uS)return zh[e]=t[n];return e}var dS=Ad("animationend"),hS=Ad("animationiteration"),fS=Ad("animationstart"),mS=Ad("transitionend"),pS=new Map,u0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){pS.set(e,t),vi(t,[e])}for(var Vh=0;Vh<u0.length;Vh++){var Uh=u0[Vh],t_=Uh.toLowerCase(),n_=Uh[0].toUpperCase()+Uh.slice(1);Ts(t_,"on"+n_)}Ts(dS,"onAnimationEnd");Ts(hS,"onAnimationIteration");Ts(fS,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(mS,"onTransitionEnd");sa("onMouseEnter",["mouseout","mouseover"]);sa("onMouseLeave",["mouseout","mouseover"]);sa("onPointerEnter",["pointerout","pointerover"]);sa("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r_=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function d0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tP(r,t,void 0,e),e.currentTarget=null}function gS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;d0(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;d0(s,l,u),i=c}}}if(vu)throw e=Im,vu=!1,Im=null,e}function Be(e,t){var n=t[Vm];n===void 0&&(n=t[Vm]=new Set);var r=e+"__bubble";n.has(r)||(xS(t,e,2,!1),n.add(r))}function Wh(e,t,n){var r=0;t&&(r|=4),xS(n,e,r,t)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Zo(e){if(!e[oc]){e[oc]=!0,Nj.forEach(function(n){n!=="selectionchange"&&(r_.has(n)||Wh(n,!1,e),Wh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oc]||(t[oc]=!0,Wh("selectionchange",!1,t))}}function xS(e,t,n,r){switch(eS(t)){case 1:var s=xP;break;case 4:s=yP;break;default:s=Ng}n=s.bind(null,t,n,e),s=void 0,!_m||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Xs(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Bj(function(){var u=i,d=bg(n),h=[];e:{var f=pS.get(e);if(f!==void 0){var m=kg,p=e;switch(e){case"keypress":if(Kc(n)===0)break e;case"keydown":case"keyup":m=AP;break;case"focusin":p="focus",m=Fh;break;case"focusout":p="blur",m=Fh;break;case"beforeblur":case"afterblur":m=Fh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=RP;break;case dS:case hS:case fS:m=NP;break;case mS:m=FP;break;case"scroll":m=vP;break;case"wheel":m=BP;break;case"copy":case"cut":case"paste":m=kP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=t0}var g=(t&4)!==0,y=!g&&e==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Go(v,b),S!=null&&g.push(el(v,S,w)))),y)break;v=v.return}0<g.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==Tm&&(p=n.relatedTarget||n.fromElement)&&(Xs(p)||p[Mr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Xs(p):null,p!==null&&(y=bi(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(g=Zy,S="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=t0,S="onPointerLeave",b="onPointerEnter",v="pointer"),y=m==null?f:$i(m),w=p==null?f:$i(p),f=new g(S,v+"leave",m,n,d),f.target=y,f.relatedTarget=w,S=null,Xs(d)===u&&(g=new g(b,v+"enter",p,n,d),g.target=w,g.relatedTarget=y,S=g),y=S,m&&p)t:{for(g=m,b=p,v=0,w=g;w;w=Ei(w))v++;for(w=0,S=b;S;S=Ei(S))w++;for(;0<v-w;)g=Ei(g),v--;for(;0<w-v;)b=Ei(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=Ei(g),b=Ei(b)}g=null}else g=null;m!==null&&h0(h,f,m,g,!1),p!==null&&y!==null&&h0(h,y,p,g,!0)}}e:{if(f=u?$i(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=GP;else if(s0(f))if(aS)j=XP;else{j=QP;var k=YP}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=KP);if(j&&(j=j(e,u))){iS(h,j,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Nm(f,"number",f.value)}switch(k=u?$i(u):window,e){case"focusin":(s0(k)||k.contentEditable==="true")&&(Li=k,Rm=u,To=null);break;case"focusout":To=Rm=Li=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,c0(h,n,d);break;case"selectionchange":if(e_)break;case"keydown":case"keyup":c0(h,n,d)}var N;if(Dg)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ri?rS(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(nS&&n.locale!=="ko"&&(Ri||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ri&&(N=tS()):(ts=d,Cg="value"in ts?ts.value:ts.textContent,Ri=!0)),k=Nu(u,C),0<k.length&&(C=new e0(C,e,null,n,d),h.push({event:C,listeners:k}),N?C.data=N:(N=sS(n),N!==null&&(C.data=N)))),(N=VP?UP(e,n):WP(e,n))&&(u=Nu(u,"onBeforeInput"),0<u.length&&(d=new e0("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}gS(h,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Go(e,n),i!=null&&r.unshift(el(e,i,s)),i=Go(e,t),i!=null&&r.push(el(e,i,s))),e=e.return}return r}function Ei(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function h0(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Go(n,i),c!=null&&a.unshift(el(n,c,l))):s||(c=Go(n,i),c!=null&&a.push(el(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var s_=/\r\n?/g,i_=/\u0000|\uFFFD/g;function f0(e){return(typeof e=="string"?e:""+e).replace(s_,`
`).replace(i_,"")}function lc(e,t,n){if(t=f0(t),f0(e)!==t&&n)throw Error(K(425))}function Cu(){}var Fm=null,$m=null;function Bm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zm=typeof setTimeout=="function"?setTimeout:void 0,a_=typeof clearTimeout=="function"?clearTimeout:void 0,m0=typeof Promise=="function"?Promise:void 0,o_=typeof queueMicrotask=="function"?queueMicrotask:typeof m0<"u"?function(e){return m0.resolve(null).then(e).catch(l_)}:zm;function l_(e){setTimeout(function(){throw e})}function qh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ko(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ko(t)}function ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function p0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),sr="__reactFiber$"+Ca,tl="__reactProps$"+Ca,Mr="__reactContainer$"+Ca,Vm="__reactEvents$"+Ca,c_="__reactListeners$"+Ca,u_="__reactHandles$"+Ca;function Xs(e){var t=e[sr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mr]||n[sr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=p0(e);e!==null;){if(n=e[sr])return n;e=p0(e)}return t}e=n,n=e.parentNode}return null}function Il(e){return e=e[sr]||e[Mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Md(e){return e[tl]||null}var Um=[],Bi=-1;function Ps(e){return{current:e}}function Ue(e){0>Bi||(e.current=Um[Bi],Um[Bi]=null,Bi--)}function Le(e,t){Bi++,Um[Bi]=e.current,e.current=t}var Ss={},Rt=Ps(Ss),Jt=Ps(!1),ci=Ss;function ia(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(e){return e=e.childContextTypes,e!=null}function ku(){Ue(Jt),Ue(Rt)}function g0(e,t,n){if(Rt.current!==Ss)throw Error(K(168));Le(Rt,t),Le(Jt,n)}function yS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(K(108,YT(e)||"Unknown",s));return Ze({},n,r)}function Eu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,ci=Rt.current,Le(Rt,e),Le(Jt,Jt.current),!0}function x0(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=yS(e,t,ci),r.__reactInternalMemoizedMergedChildContext=e,Ue(Jt),Ue(Rt),Le(Rt,e)):Ue(Jt),Le(Jt,n)}var wr=null,Od=!1,Gh=!1;function vS(e){wr===null?wr=[e]:wr.push(e)}function d_(e){Od=!0,vS(e)}function _s(){if(!Gh&&wr!==null){Gh=!0;var e=0,t=Re;try{var n=wr;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wr=null,Od=!1}catch(s){throw wr!==null&&(wr=wr.slice(e+1)),Wj(wg,_s),s}finally{Re=t,Gh=!1}}return null}var zi=[],Vi=0,Du=null,Tu=0,jn=[],Sn=0,ui=null,Sr=1,Nr="";function zs(e,t){zi[Vi++]=Tu,zi[Vi++]=Du,Du=e,Tu=t}function bS(e,t,n){jn[Sn++]=Sr,jn[Sn++]=Nr,jn[Sn++]=ui,ui=e;var r=Sr;e=Nr;var s=32-Hn(r)-1;r&=~(1<<s),n+=1;var i=32-Hn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Sr=1<<32-Hn(t)+s|n<<s|r,Nr=i+e}else Sr=1<<i|n<<s|r,Nr=e}function Pg(e){e.return!==null&&(zs(e,1),bS(e,1,0))}function _g(e){for(;e===Du;)Du=zi[--Vi],zi[Vi]=null,Tu=zi[--Vi],zi[Vi]=null;for(;e===ui;)ui=jn[--Sn],jn[Sn]=null,Nr=jn[--Sn],jn[Sn]=null,Sr=jn[--Sn],jn[Sn]=null}var cn=null,on=null,qe=!1,Vn=null;function wS(e,t){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function y0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cn=e,on=ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cn=e,on=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ui!==null?{id:Sr,overflow:Nr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,cn=e,on=null,!0):!1;default:return!1}}function Wm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hm(e){if(qe){var t=on;if(t){var n=t;if(!y0(e,t)){if(Wm(e))throw Error(K(418));t=ds(n.nextSibling);var r=cn;t&&y0(e,t)?wS(r,n):(e.flags=e.flags&-4097|2,qe=!1,cn=e)}}else{if(Wm(e))throw Error(K(418));e.flags=e.flags&-4097|2,qe=!1,cn=e}}}function v0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cn=e}function cc(e){if(e!==cn)return!1;if(!qe)return v0(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bm(e.type,e.memoizedProps)),t&&(t=on)){if(Wm(e))throw jS(),Error(K(418));for(;t;)wS(e,t),t=ds(t.nextSibling)}if(v0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){on=ds(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}on=null}}else on=cn?ds(e.stateNode.nextSibling):null;return!0}function jS(){for(var e=on;e;)e=ds(e.nextSibling)}function aa(){on=cn=null,qe=!1}function Ig(e){Vn===null?Vn=[e]:Vn.push(e)}var h_=Fr.ReactCurrentBatchConfig;function Ga(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function uc(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b0(e){var t=e._init;return t(e._payload)}function SS(e){function t(b,v){if(e){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=ps(b,v),b.index=0,b.sibling=null,b}function i(b,v,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,S){return v===null||v.tag!==6?(v=ef(w,b.mode,S),v.return=b,v):(v=s(v,w),v.return=b,v)}function c(b,v,w,S){var j=w.type;return j===Oi?d(b,v,w.props.children,S,w.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yr&&b0(j)===v.type)?(S=s(v,w.props),S.ref=Ga(b,v,w),S.return=b,S):(S=ru(w.type,w.key,w.props,null,b.mode,S),S.ref=Ga(b,v,w),S.return=b,S)}function u(b,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=tf(w,b.mode,S),v.return=b,v):(v=s(v,w.children||[]),v.return=b,v)}function d(b,v,w,S,j){return v===null||v.tag!==7?(v=si(w,b.mode,S,j),v.return=b,v):(v=s(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ef(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:return w=ru(v.type,v.key,v.props,null,b.mode,w),w.ref=Ga(b,null,v),w.return=b,w;case Mi:return v=tf(v,b.mode,w),v.return=b,v;case Yr:var S=v._init;return h(b,S(v._payload),w)}if(po(v)||Va(v))return v=si(v,b.mode,w,null),v.return=b,v;uc(b,v)}return null}function f(b,v,w,S){var j=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zl:return w.key===j?c(b,v,w,S):null;case Mi:return w.key===j?u(b,v,w,S):null;case Yr:return j=w._init,f(b,v,j(w._payload),S)}if(po(w)||Va(w))return j!==null?null:d(b,v,w,S,null);uc(b,w)}return null}function m(b,v,w,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,l(v,b,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zl:return b=b.get(S.key===null?w:S.key)||null,c(v,b,S,j);case Mi:return b=b.get(S.key===null?w:S.key)||null,u(v,b,S,j);case Yr:var k=S._init;return m(b,v,w,k(S._payload),j)}if(po(S)||Va(S))return b=b.get(w)||null,d(v,b,S,j,null);uc(v,S)}return null}function p(b,v,w,S){for(var j=null,k=null,N=v,C=v=0,E=null;N!==null&&C<w.length;C++){N.index>C?(E=N,N=null):E=N.sibling;var T=f(b,N,w[C],S);if(T===null){N===null&&(N=E);break}e&&N&&T.alternate===null&&t(b,N),v=i(T,v,C),k===null?j=T:k.sibling=T,k=T,N=E}if(C===w.length)return n(b,N),qe&&zs(b,C),j;if(N===null){for(;C<w.length;C++)N=h(b,w[C],S),N!==null&&(v=i(N,v,C),k===null?j=N:k.sibling=N,k=N);return qe&&zs(b,C),j}for(N=r(b,N);C<w.length;C++)E=m(N,b,C,w[C],S),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?C:E.key),v=i(E,v,C),k===null?j=E:k.sibling=E,k=E);return e&&N.forEach(function(F){return t(b,F)}),qe&&zs(b,C),j}function g(b,v,w,S){var j=Va(w);if(typeof j!="function")throw Error(K(150));if(w=j.call(w),w==null)throw Error(K(151));for(var k=j=null,N=v,C=v=0,E=null,T=w.next();N!==null&&!T.done;C++,T=w.next()){N.index>C?(E=N,N=null):E=N.sibling;var F=f(b,N,T.value,S);if(F===null){N===null&&(N=E);break}e&&N&&F.alternate===null&&t(b,N),v=i(F,v,C),k===null?j=F:k.sibling=F,k=F,N=E}if(T.done)return n(b,N),qe&&zs(b,C),j;if(N===null){for(;!T.done;C++,T=w.next())T=h(b,T.value,S),T!==null&&(v=i(T,v,C),k===null?j=T:k.sibling=T,k=T);return qe&&zs(b,C),j}for(N=r(b,N);!T.done;C++,T=w.next())T=m(N,b,C,T.value,S),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?C:T.key),v=i(T,v,C),k===null?j=T:k.sibling=T,k=T);return e&&N.forEach(function(R){return t(b,R)}),qe&&zs(b,C),j}function y(b,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Oi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zl:e:{for(var j=w.key,k=v;k!==null;){if(k.key===j){if(j=w.type,j===Oi){if(k.tag===7){n(b,k.sibling),v=s(k,w.props.children),v.return=b,b=v;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yr&&b0(j)===k.type){n(b,k.sibling),v=s(k,w.props),v.ref=Ga(b,k,w),v.return=b,b=v;break e}n(b,k);break}else t(b,k);k=k.sibling}w.type===Oi?(v=si(w.props.children,b.mode,S,w.key),v.return=b,b=v):(S=ru(w.type,w.key,w.props,null,b.mode,S),S.ref=Ga(b,v,w),S.return=b,b=S)}return a(b);case Mi:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(b,v.sibling),v=s(v,w.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else t(b,v);v=v.sibling}v=tf(w,b.mode,S),v.return=b,b=v}return a(b);case Yr:return k=w._init,y(b,v,k(w._payload),S)}if(po(w))return p(b,v,w,S);if(Va(w))return g(b,v,w,S);uc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(b,v.sibling),v=s(v,w),v.return=b,b=v):(n(b,v),v=ef(w,b.mode,S),v.return=b,b=v),a(b)):n(b,v)}return y}var oa=SS(!0),NS=SS(!1),Pu=Ps(null),_u=null,Ui=null,Ag=null;function Mg(){Ag=Ui=_u=null}function Og(e){var t=Pu.current;Ue(Pu),e._currentValue=t}function qm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ea(e,t){_u=e,Ag=Ui=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xt=!0),e.firstContext=null)}function In(e){var t=e._currentValue;if(Ag!==e)if(e={context:e,memoizedValue:t,next:null},Ui===null){if(_u===null)throw Error(K(308));Ui=e,_u.dependencies={lanes:0,firstContext:e}}else Ui=Ui.next=e;return t}var Js=null;function Rg(e){Js===null?Js=[e]:Js.push(e)}function CS(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Rg(t)):(n.next=s.next,s.next=n),t.interleaved=n,Or(e,r)}function Or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Qr=!1;function Lg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Or(e,n)}return s=r.interleaved,s===null?(t.next=t,Rg(r)):(t.next=s.next,s.next=t),r.interleaved=t,Or(e,n)}function Xc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,jg(e,n)}}function w0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Iu(e,t,n,r){var s=e.updateQueue;Qr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Ze({},h,f);break e;case 2:Qr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);hi|=a,e.lanes=a,e.memoizedState=h}}function j0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Al={},or=Ps(Al),nl=Ps(Al),rl=Ps(Al);function Zs(e){if(e===Al)throw Error(K(174));return e}function Fg(e,t){switch(Le(rl,t),Le(nl,e),Le(or,Al),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:km(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=km(t,e)}Ue(or),Le(or,t)}function la(){Ue(or),Ue(nl),Ue(rl)}function ES(e){Zs(rl.current);var t=Zs(or.current),n=km(t,e.type);t!==n&&(Le(nl,e),Le(or,n))}function $g(e){nl.current===e&&(Ue(or),Ue(nl))}var Ye=Ps(0);function Au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yh=[];function Bg(){for(var e=0;e<Yh.length;e++)Yh[e]._workInProgressVersionPrimary=null;Yh.length=0}var Jc=Fr.ReactCurrentDispatcher,Qh=Fr.ReactCurrentBatchConfig,di=0,Je=null,pt=null,yt=null,Mu=!1,Po=!1,sl=0,f_=0;function Et(){throw Error(K(321))}function zg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function Vg(e,t,n,r,s,i){if(di=i,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jc.current=e===null||e.memoizedState===null?x_:y_,e=n(r,s),Po){i=0;do{if(Po=!1,sl=0,25<=i)throw Error(K(301));i+=1,yt=pt=null,t.updateQueue=null,Jc.current=v_,e=n(r,s)}while(Po)}if(Jc.current=Ou,t=pt!==null&&pt.next!==null,di=0,yt=pt=Je=null,Mu=!1,t)throw Error(K(300));return e}function Ug(){var e=sl!==0;return sl=0,e}function tr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Je.memoizedState=yt=e:yt=yt.next=e,yt}function An(){if(pt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=yt===null?Je.memoizedState:yt.next;if(t!==null)yt=t,pt=e;else{if(e===null)throw Error(K(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},yt===null?Je.memoizedState=yt=e:yt=yt.next=e}return yt}function il(e,t){return typeof t=="function"?t(e):t}function Kh(e){var t=An(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=pt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((di&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,Je.lanes|=d,hi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Gn(r,t.memoizedState)||(Xt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Je.lanes|=i,hi|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xh(e){var t=An(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Gn(i,t.memoizedState)||(Xt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function DS(){}function TS(e,t){var n=Je,r=An(),s=t(),i=!Gn(r.memoizedState,s);if(i&&(r.memoizedState=s,Xt=!0),r=r.queue,Wg(IS.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,al(9,_S.bind(null,n,r,s,t),void 0,null),vt===null)throw Error(K(349));di&30||PS(n,t,s)}return s}function PS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _S(e,t,n,r){t.value=n,t.getSnapshot=r,AS(t)&&MS(e)}function IS(e,t,n){return n(function(){AS(t)&&MS(e)})}function AS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch{return!0}}function MS(e){var t=Or(e,1);t!==null&&qn(t,e,1,-1)}function S0(e){var t=tr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:e},t.queue=e,e=e.dispatch=g_.bind(null,Je,e),[t.memoizedState,e]}function al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function OS(){return An().memoizedState}function Zc(e,t,n,r){var s=tr();Je.flags|=e,s.memoizedState=al(1|t,n,void 0,r===void 0?null:r)}function Rd(e,t,n,r){var s=An();r=r===void 0?null:r;var i=void 0;if(pt!==null){var a=pt.memoizedState;if(i=a.destroy,r!==null&&zg(r,a.deps)){s.memoizedState=al(t,n,i,r);return}}Je.flags|=e,s.memoizedState=al(1|t,n,i,r)}function N0(e,t){return Zc(8390656,8,e,t)}function Wg(e,t){return Rd(2048,8,e,t)}function RS(e,t){return Rd(4,2,e,t)}function LS(e,t){return Rd(4,4,e,t)}function FS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $S(e,t,n){return n=n!=null?n.concat([e]):null,Rd(4,4,FS.bind(null,t,e),n)}function Hg(){}function BS(e,t){var n=An();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zS(e,t){var n=An();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function VS(e,t,n){return di&21?(Gn(n,t)||(n=Gj(),Je.lanes|=n,hi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xt=!0),e.memoizedState=n)}function m_(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=Qh.transition;Qh.transition={};try{e(!1),t()}finally{Re=n,Qh.transition=r}}function US(){return An().memoizedState}function p_(e,t,n){var r=ms(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WS(e))HS(t,n);else if(n=CS(e,t,n,r),n!==null){var s=Ut();qn(n,e,r,s),qS(n,t,r)}}function g_(e,t,n){var r=ms(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WS(e))HS(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Gn(l,a)){var c=t.interleaved;c===null?(s.next=s,Rg(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=CS(e,t,s,r),n!==null&&(s=Ut(),qn(n,e,r,s),qS(n,t,r))}}function WS(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function HS(e,t){Po=Mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,jg(e,n)}}var Ou={readContext:In,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},x_={readContext:In,useCallback:function(e,t){return tr().memoizedState=[e,t===void 0?null:t],e},useContext:In,useEffect:N0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zc(4194308,4,FS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zc(4,2,e,t)},useMemo:function(e,t){var n=tr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=tr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=p_.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=tr();return e={current:e},t.memoizedState=e},useState:S0,useDebugValue:Hg,useDeferredValue:function(e){return tr().memoizedState=e},useTransition:function(){var e=S0(!1),t=e[0];return e=m_.bind(null,e[1]),tr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,s=tr();if(qe){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),vt===null)throw Error(K(349));di&30||PS(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,N0(IS.bind(null,r,i,e),[e]),r.flags|=2048,al(9,_S.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=tr(),t=vt.identifierPrefix;if(qe){var n=Nr,r=Sr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=f_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y_={readContext:In,useCallback:BS,useContext:In,useEffect:Wg,useImperativeHandle:$S,useInsertionEffect:RS,useLayoutEffect:LS,useMemo:zS,useReducer:Kh,useRef:OS,useState:function(){return Kh(il)},useDebugValue:Hg,useDeferredValue:function(e){var t=An();return VS(t,pt.memoizedState,e)},useTransition:function(){var e=Kh(il)[0],t=An().memoizedState;return[e,t]},useMutableSource:DS,useSyncExternalStore:TS,useId:US,unstable_isNewReconciler:!1},v_={readContext:In,useCallback:BS,useContext:In,useEffect:Wg,useImperativeHandle:$S,useInsertionEffect:RS,useLayoutEffect:LS,useMemo:zS,useReducer:Xh,useRef:OS,useState:function(){return Xh(il)},useDebugValue:Hg,useDeferredValue:function(e){var t=An();return pt===null?t.memoizedState=e:VS(t,pt.memoizedState,e)},useTransition:function(){var e=Xh(il)[0],t=An().memoizedState;return[e,t]},useMutableSource:DS,useSyncExternalStore:TS,useId:US,unstable_isNewReconciler:!1};function Bn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ld={isMounted:function(e){return(e=e._reactInternals)?bi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ut(),s=ms(e),i=Dr(r,s);i.payload=t,n!=null&&(i.callback=n),t=hs(e,i,s),t!==null&&(qn(t,e,s,r),Xc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ut(),s=ms(e),i=Dr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=hs(e,i,s),t!==null&&(qn(t,e,s,r),Xc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ut(),r=ms(e),s=Dr(n,r);s.tag=2,t!=null&&(s.callback=t),t=hs(e,s,r),t!==null&&(qn(t,e,r,n),Xc(t,e,r))}};function C0(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Jo(n,r)||!Jo(s,i):!0}function GS(e,t,n){var r=!1,s=Ss,i=t.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Zt(t)?ci:Rt.current,r=t.contextTypes,i=(r=r!=null)?ia(e,s):Ss),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ld,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function k0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ld.enqueueReplaceState(t,t.state,null)}function Ym(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Lg(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Zt(t)?ci:Rt.current,s.context=ia(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Gm(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ld.enqueueReplaceState(s,s.state,null),Iu(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do n+=GT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Jh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var b_=typeof WeakMap=="function"?WeakMap:Map;function YS(e,t,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lu||(Lu=!0,ip=r),Qm(e,t)},n}function QS(e,t,n){n=Dr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Qm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qm(e,t),typeof r!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function E0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new b_;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=M_.bind(null,e,t,n),t.then(e,e))}function D0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function T0(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Dr(-1,1),t.tag=2,hs(n,t,1))),n.lanes|=1),e)}var w_=Fr.ReactCurrentOwner,Xt=!1;function zt(e,t,n,r){t.child=e===null?NS(t,null,n,r):oa(t,e.child,n,r)}function P0(e,t,n,r,s){n=n.render;var i=t.ref;return ea(t,s),r=Vg(e,t,n,r,i,s),n=Ug(),e!==null&&!Xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Rr(e,t,s)):(qe&&n&&Pg(t),t.flags|=1,zt(e,t,r,s),t.child)}function _0(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Zg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,KS(e,t,i,r,s)):(e=ru(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jo,n(a,r)&&e.ref===t.ref)return Rr(e,t,s)}return t.flags|=1,e=ps(i,r),e.ref=t.ref,e.return=t,t.child=e}function KS(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Jo(i,r)&&e.ref===t.ref)if(Xt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Xt=!0);else return t.lanes=e.lanes,Rr(e,t,s)}return Km(e,t,n,r,s)}function XS(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Hi,rn),rn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(Hi,rn),rn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(Hi,rn),rn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Le(Hi,rn),rn|=r;return zt(e,t,s,n),t.child}function JS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Km(e,t,n,r,s){var i=Zt(n)?ci:Rt.current;return i=ia(t,i),ea(t,s),n=Vg(e,t,n,r,i,s),r=Ug(),e!==null&&!Xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Rr(e,t,s)):(qe&&r&&Pg(t),t.flags|=1,zt(e,t,n,s),t.child)}function I0(e,t,n,r,s){if(Zt(n)){var i=!0;Eu(t)}else i=!1;if(ea(t,s),t.stateNode===null)eu(e,t),GS(t,n,r),Ym(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=In(u):(u=Zt(n)?ci:Rt.current,u=ia(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&k0(t,a,r,u),Qr=!1;var f=t.memoizedState;a.state=f,Iu(t,r,a,s),c=t.memoizedState,l!==r||f!==c||Jt.current||Qr?(typeof d=="function"&&(Gm(t,n,d,r),c=t.memoizedState),(l=Qr||C0(t,n,l,r,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,kS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Bn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=In(c):(c=Zt(n)?ci:Rt.current,c=ia(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&k0(t,a,r,c),Qr=!1,f=t.memoizedState,a.state=f,Iu(t,r,a,s);var p=t.memoizedState;l!==h||f!==p||Jt.current||Qr?(typeof m=="function"&&(Gm(t,n,m,r),p=t.memoizedState),(u=Qr||C0(t,n,u,r,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Xm(e,t,n,r,i,s)}function Xm(e,t,n,r,s,i){JS(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&x0(t,n,!1),Rr(e,t,i);r=t.stateNode,w_.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=oa(t,e.child,null,i),t.child=oa(t,null,l,i)):zt(e,t,l,i),t.memoizedState=r.state,s&&x0(t,n,!0),t.child}function ZS(e){var t=e.stateNode;t.pendingContext?g0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&g0(e,t.context,!1),Fg(e,t.containerInfo)}function A0(e,t,n,r,s){return aa(),Ig(s),t.flags|=256,zt(e,t,n,r),t.child}var Jm={dehydrated:null,treeContext:null,retryLane:0};function Zm(e){return{baseLanes:e,cachePool:null,transitions:null}}function eN(e,t,n){var r=t.pendingProps,s=Ye.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Le(Ye,s&1),e===null)return Hm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Bd(a,r,0,null),e=si(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Zm(n),t.memoizedState=Jm,e):qg(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return j_(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ps(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ps(l,i):(i=si(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Zm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Jm,r}return i=e.child,e=i.sibling,r=ps(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function qg(e,t){return t=Bd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dc(e,t,n,r){return r!==null&&Ig(r),oa(t,e.child,null,n),e=qg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function j_(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Jh(Error(K(422))),dc(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Bd({mode:"visible",children:r.children},s,0,null),i=si(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&oa(t,e.child,null,a),t.child.memoizedState=Zm(a),t.memoizedState=Jm,i);if(!(t.mode&1))return dc(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(K(419)),r=Jh(i,r,void 0),dc(e,t,a,r)}if(l=(a&e.childLanes)!==0,Xt||l){if(r=vt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Or(e,s),qn(r,e,s,-1))}return Jg(),r=Jh(Error(K(421))),dc(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=O_.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,on=ds(s.nextSibling),cn=t,qe=!0,Vn=null,e!==null&&(jn[Sn++]=Sr,jn[Sn++]=Nr,jn[Sn++]=ui,Sr=e.id,Nr=e.overflow,ui=t),t=qg(t,r.children),t.flags|=4096,t)}function M0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qm(e.return,t,n)}function Zh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tN(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(zt(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M0(e,n,t);else if(e.tag===19)M0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Le(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Au(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Zh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Au(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Zh(t,!0,n,null,i);break;case"together":Zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function eu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=ps(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ps(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function S_(e,t,n){switch(t.tag){case 3:ZS(t),aa();break;case 5:ES(t);break;case 1:Zt(t.type)&&Eu(t);break;case 4:Fg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Le(Pu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?eN(e,t,n):(Le(Ye,Ye.current&1),e=Rr(e,t,n),e!==null?e.sibling:null);Le(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tN(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,XS(e,t,n)}return Rr(e,t,n)}var nN,ep,rN,sN;nN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ep=function(){};rN=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Zs(or.current);var i=null;switch(n){case"input":s=jm(e,s),r=jm(e,r),i=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),i=[];break;case"textarea":s=Cm(e,s),r=Cm(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cu)}Em(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ho.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ho.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};sN=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ya(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function N_(e,t,n){var r=t.pendingProps;switch(_g(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Zt(t.type)&&ku(),Dt(t),null;case 3:return r=t.stateNode,la(),Ue(Jt),Ue(Rt),Bg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vn!==null&&(lp(Vn),Vn=null))),ep(e,t),Dt(t),null;case 5:$g(t);var s=Zs(rl.current);if(n=t.type,e!==null&&t.stateNode!=null)rN(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return Dt(t),null}if(e=Zs(or.current),cc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[sr]=t,r[tl]=i,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<xo.length;s++)Be(xo[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Uy(r,i),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Be("invalid",r);break;case"textarea":Hy(r,i),Be("invalid",r)}Em(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&lc(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&lc(r.textContent,l,e),s=["children",""+l]):Ho.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Be("scroll",r)}switch(n){case"input":ec(r),Wy(r,i,!0);break;case"textarea":ec(r),qy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ij(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[sr]=t,e[tl]=r,nN(e,t,!1,!1),t.stateNode=e;e:{switch(a=Dm(n,r),n){case"dialog":Be("cancel",e),Be("close",e),s=r;break;case"iframe":case"object":case"embed":Be("load",e),s=r;break;case"video":case"audio":for(s=0;s<xo.length;s++)Be(xo[s],e);s=r;break;case"source":Be("error",e),s=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),s=r;break;case"details":Be("toggle",e),s=r;break;case"input":Uy(e,r),s=jm(e,r),Be("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),Be("invalid",e);break;case"textarea":Hy(e,r),s=Cm(e,r),Be("invalid",e);break;default:s=r}Em(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Oj(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Aj(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qo(e,c):typeof c=="number"&&qo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ho.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",e):c!=null&&gg(e,i,c,a))}switch(n){case"input":ec(e),Wy(e,r,!1);break;case"textarea":ec(e),qy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+js(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ki(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ki(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)sN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Zs(rl.current),Zs(or.current),cc(t)){if(r=t.stateNode,n=t.memoizedProps,r[sr]=t,(i=r.nodeValue!==n)&&(e=cn,e!==null))switch(e.tag){case 3:lc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sr]=t,t.stateNode=r}return Dt(t),null;case 13:if(Ue(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&on!==null&&t.mode&1&&!(t.flags&128))jS(),aa(),t.flags|=98560,i=!1;else if(i=cc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[sr]=t}else aa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dt(t),i=!1}else Vn!==null&&(lp(Vn),Vn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?gt===0&&(gt=3):Jg())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return la(),ep(e,t),e===null&&Zo(t.stateNode.containerInfo),Dt(t),null;case 10:return Og(t.type._context),Dt(t),null;case 17:return Zt(t.type)&&ku(),Dt(t),null;case 19:if(Ue(Ye),i=t.memoizedState,i===null)return Dt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Ya(i,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Au(e),a!==null){for(t.flags|=128,Ya(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Le(Ye,Ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>ua&&(t.flags|=128,r=!0,Ya(i,!1),t.lanes=4194304)}else{if(!r)if(e=Au(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ya(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!qe)return Dt(t),null}else 2*rt()-i.renderingStartTime>ua&&n!==1073741824&&(t.flags|=128,r=!0,Ya(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,n=Ye.current,Le(Ye,r?n&1|2:n&1),t):(Dt(t),null);case 22:case 23:return Xg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rn&1073741824&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function C_(e,t){switch(_g(t),t.tag){case 1:return Zt(t.type)&&ku(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return la(),Ue(Jt),Ue(Rt),Bg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $g(t),null;case 13:if(Ue(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ye),null;case 4:return la(),null;case 10:return Og(t.type._context),null;case 22:case 23:return Xg(),null;case 24:return null;default:return null}}var hc=!1,It=!1,k_=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Wi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function tp(e,t,n){try{n()}catch(r){tt(e,t,r)}}var O0=!1;function E_(e,t){if(Fm=ju,e=cS(),Tg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=a),f===i&&++d===r&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for($m={focusedElem:e,selectionRange:n},ju=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Bn(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(S){tt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return p=O0,O0=!1,p}function _o(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&tp(t,n,i)}s=s.next}while(s!==r)}}function Fd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function np(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iN(e){var t=e.alternate;t!==null&&(e.alternate=null,iN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sr],delete t[tl],delete t[Vm],delete t[c_],delete t[u_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aN(e){return e.tag===5||e.tag===3||e.tag===4}function R0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||aN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cu));else if(r!==4&&(e=e.child,e!==null))for(rp(e,t,n),e=e.sibling;e!==null;)rp(e,t,n),e=e.sibling}function sp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sp(e,t,n),e=e.sibling;e!==null;)sp(e,t,n),e=e.sibling}var jt=null,zn=!1;function Vr(e,t,n){for(n=n.child;n!==null;)oN(e,t,n),n=n.sibling}function oN(e,t,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(Pd,n)}catch{}switch(n.tag){case 5:It||Wi(n,t);case 6:var r=jt,s=zn;jt=null,Vr(e,t,n),jt=r,zn=s,jt!==null&&(zn?(e=jt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(zn?(e=jt,n=n.stateNode,e.nodeType===8?qh(e.parentNode,n):e.nodeType===1&&qh(e,n),Ko(e)):qh(jt,n.stateNode));break;case 4:r=jt,s=zn,jt=n.stateNode.containerInfo,zn=!0,Vr(e,t,n),jt=r,zn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&tp(n,t,a),s=s.next}while(s!==r)}Vr(e,t,n);break;case 1:if(!It&&(Wi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tt(n,t,l)}Vr(e,t,n);break;case 21:Vr(e,t,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Vr(e,t,n),It=r):Vr(e,t,n);break;default:Vr(e,t,n)}}function L0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new k_),t.forEach(function(r){var s=R_.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $n(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,zn=!1;break e;case 3:jt=l.stateNode.containerInfo,zn=!0;break e;case 4:jt=l.stateNode.containerInfo,zn=!0;break e}l=l.return}if(jt===null)throw Error(K(160));oN(i,a,s),jt=null,zn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lN(t,e),t=t.sibling}function lN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($n(t,e),Jn(e),r&4){try{_o(3,e,e.return),Fd(3,e)}catch(g){tt(e,e.return,g)}try{_o(5,e,e.return)}catch(g){tt(e,e.return,g)}}break;case 1:$n(t,e),Jn(e),r&512&&n!==null&&Wi(n,n.return);break;case 5:if($n(t,e),Jn(e),r&512&&n!==null&&Wi(n,n.return),e.flags&32){var s=e.stateNode;try{qo(s,"")}catch(g){tt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Pj(s,i),Dm(l,a);var u=Dm(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Oj(s,h):d==="dangerouslySetInnerHTML"?Aj(s,h):d==="children"?qo(s,h):gg(s,d,h,u)}switch(l){case"input":Sm(s,i);break;case"textarea":_j(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ki(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ki(s,!!i.multiple,i.defaultValue,!0):Ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[tl]=i}catch(g){tt(e,e.return,g)}}break;case 6:if($n(t,e),Jn(e),r&4){if(e.stateNode===null)throw Error(K(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){tt(e,e.return,g)}}break;case 3:if($n(t,e),Jn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(t.containerInfo)}catch(g){tt(e,e.return,g)}break;case 4:$n(t,e),Jn(e);break;case 13:$n(t,e),Jn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qg=rt())),r&4&&L0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(It=(u=It)||d,$n(t,e),It=u):$n(t,e),Jn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:_o(4,f,f.return);break;case 1:Wi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){tt(r,n,g)}}break;case 5:Wi(f,f.return);break;case 22:if(f.memoizedState!==null){$0(h);continue}}m!==null?(m.return=f,oe=m):$0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Mj("display",a))}catch(g){tt(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){tt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$n(t,e),Jn(e),r&4&&L0(e);break;case 21:break;default:$n(t,e),Jn(e)}}function Jn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(aN(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qo(s,""),r.flags&=-33);var i=R0(e);sp(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=R0(e);rp(e,l,a);break;default:throw Error(K(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function D_(e,t,n){oe=e,cN(e)}function cN(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||hc;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||It;l=hc;var u=It;if(hc=a,(It=c)&&!u)for(oe=s;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?B0(s):c!==null?(c.return=a,oe=c):B0(s);for(;i!==null;)oe=i,cN(i),i=i.sibling;oe=s,hc=l,It=u}F0(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):F0(e)}}function F0(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:It||Fd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Bn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&j0(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}j0(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ko(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}It||t.flags&512&&np(t)}catch(f){tt(t,t.return,f)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function $0(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function B0(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fd(4,t)}catch(c){tt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){tt(t,s,c)}}var i=t.return;try{np(t)}catch(c){tt(t,i,c)}break;case 5:var a=t.return;try{np(t)}catch(c){tt(t,a,c)}}}catch(c){tt(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var T_=Math.ceil,Ru=Fr.ReactCurrentDispatcher,Gg=Fr.ReactCurrentOwner,Tn=Fr.ReactCurrentBatchConfig,Pe=0,vt=null,ct=null,Nt=0,rn=0,Hi=Ps(0),gt=0,ol=null,hi=0,$d=0,Yg=0,Io=null,Qt=null,Qg=0,ua=1/0,vr=null,Lu=!1,ip=null,fs=null,fc=!1,ns=null,Fu=0,Ao=0,ap=null,tu=-1,nu=0;function Ut(){return Pe&6?rt():tu!==-1?tu:tu=rt()}function ms(e){return e.mode&1?Pe&2&&Nt!==0?Nt&-Nt:h_.transition!==null?(nu===0&&(nu=Gj()),nu):(e=Re,e!==0||(e=window.event,e=e===void 0?16:eS(e.type)),e):1}function qn(e,t,n,r){if(50<Ao)throw Ao=0,ap=null,Error(K(185));Pl(e,n,r),(!(Pe&2)||e!==vt)&&(e===vt&&(!(Pe&2)&&($d|=n),gt===4&&Jr(e,Nt)),en(e,r),n===1&&Pe===0&&!(t.mode&1)&&(ua=rt()+500,Od&&_s()))}function en(e,t){var n=e.callbackNode;hP(e,t);var r=wu(e,e===vt?Nt:0);if(r===0)n!==null&&Qy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Qy(n),t===1)e.tag===0?d_(z0.bind(null,e)):vS(z0.bind(null,e)),o_(function(){!(Pe&6)&&_s()}),n=null;else{switch(Yj(r)){case 1:n=wg;break;case 4:n=Hj;break;case 16:n=bu;break;case 536870912:n=qj;break;default:n=bu}n=xN(n,uN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uN(e,t){if(tu=-1,nu=0,Pe&6)throw Error(K(327));var n=e.callbackNode;if(ta()&&e.callbackNode!==n)return null;var r=wu(e,e===vt?Nt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$u(e,r);else{t=r;var s=Pe;Pe|=2;var i=hN();(vt!==e||Nt!==t)&&(vr=null,ua=rt()+500,ri(e,t));do try{I_();break}catch(l){dN(e,l)}while(!0);Mg(),Ru.current=i,Pe=s,ct!==null?t=0:(vt=null,Nt=0,t=gt)}if(t!==0){if(t===2&&(s=Am(e),s!==0&&(r=s,t=op(e,s))),t===1)throw n=ol,ri(e,0),Jr(e,r),en(e,rt()),n;if(t===6)Jr(e,r);else{if(s=e.current.alternate,!(r&30)&&!P_(s)&&(t=$u(e,r),t===2&&(i=Am(e),i!==0&&(r=i,t=op(e,i))),t===1))throw n=ol,ri(e,0),Jr(e,r),en(e,rt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:Vs(e,Qt,vr);break;case 3:if(Jr(e,r),(r&130023424)===r&&(t=Qg+500-rt(),10<t)){if(wu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zm(Vs.bind(null,e,Qt,vr),t);break}Vs(e,Qt,vr);break;case 4:if(Jr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Hn(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T_(r/1960))-r,10<r){e.timeoutHandle=zm(Vs.bind(null,e,Qt,vr),r);break}Vs(e,Qt,vr);break;case 5:Vs(e,Qt,vr);break;default:throw Error(K(329))}}}return en(e,rt()),e.callbackNode===n?uN.bind(null,e):null}function op(e,t){var n=Io;return e.current.memoizedState.isDehydrated&&(ri(e,t).flags|=256),e=$u(e,t),e!==2&&(t=Qt,Qt=n,t!==null&&lp(t)),e}function lp(e){Qt===null?Qt=e:Qt.push.apply(Qt,e)}function P_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jr(e,t){for(t&=~Yg,t&=~$d,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Hn(t),r=1<<n;e[n]=-1,t&=~r}}function z0(e){if(Pe&6)throw Error(K(327));ta();var t=wu(e,0);if(!(t&1))return en(e,rt()),null;var n=$u(e,t);if(e.tag!==0&&n===2){var r=Am(e);r!==0&&(t=r,n=op(e,r))}if(n===1)throw n=ol,ri(e,0),Jr(e,t),en(e,rt()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vs(e,Qt,vr),en(e,rt()),null}function Kg(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(ua=rt()+500,Od&&_s())}}function fi(e){ns!==null&&ns.tag===0&&!(Pe&6)&&ta();var t=Pe;Pe|=1;var n=Tn.transition,r=Re;try{if(Tn.transition=null,Re=1,e)return e()}finally{Re=r,Tn.transition=n,Pe=t,!(Pe&6)&&_s()}}function Xg(){rn=Hi.current,Ue(Hi)}function ri(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,a_(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(_g(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ku();break;case 3:la(),Ue(Jt),Ue(Rt),Bg();break;case 5:$g(r);break;case 4:la();break;case 13:Ue(Ye);break;case 19:Ue(Ye);break;case 10:Og(r.type._context);break;case 22:case 23:Xg()}n=n.return}if(vt=e,ct=e=ps(e.current,null),Nt=rn=t,gt=0,ol=null,Yg=$d=hi=0,Qt=Io=null,Js!==null){for(t=0;t<Js.length;t++)if(n=Js[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Js=null}return e}function dN(e,t){do{var n=ct;try{if(Mg(),Jc.current=Ou,Mu){for(var r=Je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mu=!1}if(di=0,yt=pt=Je=null,Po=!1,sl=0,Gg.current=null,n===null||n.return===null){gt=1,ol=t,ct=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=D0(a);if(m!==null){m.flags&=-257,T0(m,a,l,i,t),m.mode&1&&E0(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){E0(i,u,t),Jg();break e}c=Error(K(426))}}else if(qe&&l.mode&1){var y=D0(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),T0(y,a,l,i,t),Ig(ca(c,l));break e}}i=c=ca(c,l),gt!==4&&(gt=2),Io===null?Io=[i]:Io.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=YS(i,c,t);w0(i,b);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(fs===null||!fs.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=QS(i,l,t);w0(i,S);break e}}i=i.return}while(i!==null)}mN(n)}catch(j){t=j,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function hN(){var e=Ru.current;return Ru.current=Ou,e===null?Ou:e}function Jg(){(gt===0||gt===3||gt===2)&&(gt=4),vt===null||!(hi&268435455)&&!($d&268435455)||Jr(vt,Nt)}function $u(e,t){var n=Pe;Pe|=2;var r=hN();(vt!==e||Nt!==t)&&(vr=null,ri(e,t));do try{__();break}catch(s){dN(e,s)}while(!0);if(Mg(),Pe=n,Ru.current=r,ct!==null)throw Error(K(261));return vt=null,Nt=0,gt}function __(){for(;ct!==null;)fN(ct)}function I_(){for(;ct!==null&&!rP();)fN(ct)}function fN(e){var t=gN(e.alternate,e,rn);e.memoizedProps=e.pendingProps,t===null?mN(e):ct=t,Gg.current=null}function mN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=C_(n,t),n!==null){n.flags&=32767,ct=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,ct=null;return}}else if(n=N_(n,t,rn),n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);gt===0&&(gt=5)}function Vs(e,t,n){var r=Re,s=Tn.transition;try{Tn.transition=null,Re=1,A_(e,t,n,r)}finally{Tn.transition=s,Re=r}return null}function A_(e,t,n,r){do ta();while(ns!==null);if(Pe&6)throw Error(K(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(fP(e,i),e===vt&&(ct=vt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,xN(bu,function(){return ta(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tn.transition,Tn.transition=null;var a=Re;Re=1;var l=Pe;Pe|=4,Gg.current=null,E_(e,n),lN(n,e),ZP($m),ju=!!Fm,$m=Fm=null,e.current=n,D_(n),sP(),Pe=l,Re=a,Tn.transition=i}else e.current=n;if(fc&&(fc=!1,ns=e,Fu=s),i=e.pendingLanes,i===0&&(fs=null),oP(n.stateNode),en(e,rt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Lu)throw Lu=!1,e=ip,ip=null,e;return Fu&1&&e.tag!==0&&ta(),i=e.pendingLanes,i&1?e===ap?Ao++:(Ao=0,ap=e):Ao=0,_s(),null}function ta(){if(ns!==null){var e=Yj(Fu),t=Tn.transition,n=Re;try{if(Tn.transition=null,Re=16>e?16:e,ns===null)var r=!1;else{if(e=ns,ns=null,Fu=0,Pe&6)throw Error(K(331));var s=Pe;for(Pe|=4,oe=e.current;oe!==null;){var i=oe,a=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:_o(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,m=d.return;if(iN(d),d===u){oe=null;break}if(f!==null){f.return=m,oe=f;break}oe=m}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}oe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,oe=a;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_o(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,oe=b;break e}oe=i.return}}var v=e.current;for(oe=v;oe!==null;){a=oe;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,oe=w;else e:for(a=v;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fd(9,l)}}catch(j){tt(l,l.return,j)}if(l===a){oe=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,oe=S;break e}oe=l.return}}if(Pe=s,_s(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(Pd,e)}catch{}r=!0}return r}finally{Re=n,Tn.transition=t}}return!1}function V0(e,t,n){t=ca(n,t),t=YS(e,t,1),e=hs(e,t,1),t=Ut(),e!==null&&(Pl(e,1,t),en(e,t))}function tt(e,t,n){if(e.tag===3)V0(e,e,n);else for(;t!==null;){if(t.tag===3){V0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fs===null||!fs.has(r))){e=ca(n,e),e=QS(t,e,1),t=hs(t,e,1),e=Ut(),t!==null&&(Pl(t,1,e),en(t,e));break}}t=t.return}}function M_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ut(),e.pingedLanes|=e.suspendedLanes&n,vt===e&&(Nt&n)===n&&(gt===4||gt===3&&(Nt&130023424)===Nt&&500>rt()-Qg?ri(e,0):Yg|=n),en(e,t)}function pN(e,t){t===0&&(e.mode&1?(t=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):t=1);var n=Ut();e=Or(e,t),e!==null&&(Pl(e,t,n),en(e,n))}function O_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pN(e,n)}function R_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),pN(e,n)}var gN;gN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jt.current)Xt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Xt=!1,S_(e,t,n);Xt=!!(e.flags&131072)}else Xt=!1,qe&&t.flags&1048576&&bS(t,Tu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;eu(e,t),e=t.pendingProps;var s=ia(t,Rt.current);ea(t,n),s=Vg(null,t,r,e,s,n);var i=Ug();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(r)?(i=!0,Eu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lg(t),s.updater=Ld,t.stateNode=s,s._reactInternals=t,Ym(t,r,e,n),t=Xm(null,t,r,!0,i,n)):(t.tag=0,qe&&i&&Pg(t),zt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(eu(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=F_(r),e=Bn(r,e),s){case 0:t=Km(null,t,r,e,n);break e;case 1:t=I0(null,t,r,e,n);break e;case 11:t=P0(null,t,r,e,n);break e;case 14:t=_0(null,t,r,Bn(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bn(r,s),Km(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bn(r,s),I0(e,t,r,s,n);case 3:e:{if(ZS(t),e===null)throw Error(K(387));r=t.pendingProps,i=t.memoizedState,s=i.element,kS(e,t),Iu(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ca(Error(K(423)),t),t=A0(e,t,r,n,s);break e}else if(r!==s){s=ca(Error(K(424)),t),t=A0(e,t,r,n,s);break e}else for(on=ds(t.stateNode.containerInfo.firstChild),cn=t,qe=!0,Vn=null,n=NS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(aa(),r===s){t=Rr(e,t,n);break e}zt(e,t,r,n)}t=t.child}return t;case 5:return ES(t),e===null&&Hm(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Bm(r,s)?a=null:i!==null&&Bm(r,i)&&(t.flags|=32),JS(e,t),zt(e,t,a,n),t.child;case 6:return e===null&&Hm(t),null;case 13:return eN(e,t,n);case 4:return Fg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=oa(t,null,r,n):zt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bn(r,s),P0(e,t,r,s,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Le(Pu,r._currentValue),r._currentValue=a,i!==null)if(Gn(i.value,a)){if(i.children===s.children&&!Jt.current){t=Rr(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Dr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),qm(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(K(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),qm(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}zt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ea(t,n),s=In(s),r=r(s),t.flags|=1,zt(e,t,r,n),t.child;case 14:return r=t.type,s=Bn(r,t.pendingProps),s=Bn(r.type,s),_0(e,t,r,s,n);case 15:return KS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bn(r,s),eu(e,t),t.tag=1,Zt(r)?(e=!0,Eu(t)):e=!1,ea(t,n),GS(t,r,s),Ym(t,r,s,n),Xm(null,t,r,!0,e,n);case 19:return tN(e,t,n);case 22:return XS(e,t,n)}throw Error(K(156,t.tag))};function xN(e,t){return Wj(e,t)}function L_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(e,t,n,r){return new L_(e,t,n,r)}function Zg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F_(e){if(typeof e=="function")return Zg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yg)return 11;if(e===vg)return 14}return 2}function ps(e,t){var n=e.alternate;return n===null?(n=Cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ru(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")Zg(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Oi:return si(n.children,s,i,t);case xg:a=8,s|=8;break;case ym:return e=Cn(12,n,t,s|2),e.elementType=ym,e.lanes=i,e;case vm:return e=Cn(13,n,t,s),e.elementType=vm,e.lanes=i,e;case bm:return e=Cn(19,n,t,s),e.elementType=bm,e.lanes=i,e;case Ej:return Bd(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cj:a=10;break e;case kj:a=9;break e;case yg:a=11;break e;case vg:a=14;break e;case Yr:a=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Cn(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function si(e,t,n,r){return e=Cn(7,e,r,t),e.lanes=n,e}function Bd(e,t,n,r){return e=Cn(22,e,r,t),e.elementType=Ej,e.lanes=n,e.stateNode={isHidden:!1},e}function ef(e,t,n){return e=Cn(6,e,null,t),e.lanes=n,e}function tf(e,t,n){return t=Cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $_(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oh(0),this.expirationTimes=Oh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ex(e,t,n,r,s,i,a,l,c){return e=new $_(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Cn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lg(i),e}function B_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yN(e){if(!e)return Ss;e=e._reactInternals;e:{if(bi(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Zt(n))return yS(e,n,t)}return t}function vN(e,t,n,r,s,i,a,l,c){return e=ex(n,r,!0,e,s,i,a,l,c),e.context=yN(null),n=e.current,r=Ut(),s=ms(n),i=Dr(r,s),i.callback=t??null,hs(n,i,s),e.current.lanes=s,Pl(e,s,r),en(e,r),e}function zd(e,t,n,r){var s=t.current,i=Ut(),a=ms(s);return n=yN(n),t.context===null?t.context=n:t.pendingContext=n,t=Dr(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=hs(s,t,a),e!==null&&(qn(e,s,a,i),Xc(e,s,a)),a}function Bu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function U0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function tx(e,t){U0(e,t),(e=e.alternate)&&U0(e,t)}function z_(){return null}var bN=typeof reportError=="function"?reportError:function(e){console.error(e)};function nx(e){this._internalRoot=e}Vd.prototype.render=nx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));zd(e,t,null,null)};Vd.prototype.unmount=nx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fi(function(){zd(null,e,null,null)}),t[Mr]=null}};function Vd(e){this._internalRoot=e}Vd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xr.length&&t!==0&&t<Xr[n].priority;n++);Xr.splice(n,0,e),n===0&&Zj(e)}};function rx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ud(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function W0(){}function V_(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Bu(a);i.call(u)}}var a=vN(t,r,e,0,null,!1,!1,"",W0);return e._reactRootContainer=a,e[Mr]=a.current,Zo(e.nodeType===8?e.parentNode:e),fi(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Bu(c);l.call(u)}}var c=ex(e,0,!1,null,null,!1,!1,"",W0);return e._reactRootContainer=c,e[Mr]=c.current,Zo(e.nodeType===8?e.parentNode:e),fi(function(){zd(t,c,n,r)}),c}function Wd(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Bu(a);l.call(c)}}zd(t,a,e,s)}else a=V_(n,t,e,s,r);return Bu(a)}Qj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=go(t.pendingLanes);n!==0&&(jg(t,n|1),en(t,rt()),!(Pe&6)&&(ua=rt()+500,_s()))}break;case 13:fi(function(){var r=Or(e,1);if(r!==null){var s=Ut();qn(r,e,1,s)}}),tx(e,1)}};Sg=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var n=Ut();qn(t,e,134217728,n)}tx(e,134217728)}};Kj=function(e){if(e.tag===13){var t=ms(e),n=Or(e,t);if(n!==null){var r=Ut();qn(n,e,t,r)}tx(e,t)}};Xj=function(){return Re};Jj=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};Pm=function(e,t,n){switch(t){case"input":if(Sm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Md(r);if(!s)throw Error(K(90));Tj(r),Sm(r,s)}}}break;case"textarea":_j(e,n);break;case"select":t=n.value,t!=null&&Ki(e,!!n.multiple,t,!1)}};Fj=Kg;$j=fi;var U_={usingClientEntryPoint:!1,Events:[Il,$i,Md,Rj,Lj,Kg]},Qa={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W_={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vj(e),e===null?null:e.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||z_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{Pd=mc.inject(W_),ar=mc}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U_;mn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rx(t))throw Error(K(200));return B_(e,t,null,n)};mn.createRoot=function(e,t){if(!rx(e))throw Error(K(299));var n=!1,r="",s=bN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ex(e,1,!1,null,null,n,!1,r,s),e[Mr]=t.current,Zo(e.nodeType===8?e.parentNode:e),new nx(t)};mn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Vj(t),e=e===null?null:e.stateNode,e};mn.flushSync=function(e){return fi(e)};mn.hydrate=function(e,t,n){if(!Ud(t))throw Error(K(200));return Wd(null,e,t,!0,n)};mn.hydrateRoot=function(e,t,n){if(!rx(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=bN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=vN(t,null,e,1,n??null,s,!1,i,a),e[Mr]=t.current,Zo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Vd(t)};mn.render=function(e,t,n){if(!Ud(t))throw Error(K(200));return Wd(null,e,t,!1,n)};mn.unmountComponentAtNode=function(e){if(!Ud(e))throw Error(K(40));return e._reactRootContainer?(fi(function(){Wd(null,null,e,!1,function(){e._reactRootContainer=null,e[Mr]=null})}),!0):!1};mn.unstable_batchedUpdates=Kg;mn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ud(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Wd(e,t,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function wN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wN)}catch(e){console.error(e)}}wN(),wj.exports=mn;var Ml=wj.exports;const H_=Dd(Ml);var jN,H0=Ml;jN=H0.createRoot,H0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}var rs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rs||(rs={}));const q0="popstate";function q_(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return cp("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zu(s)}return Y_(t,n,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function SN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function G_(){return Math.random().toString(36).substr(2,8)}function G0(e,t){return{usr:e.state,key:e.key,idx:t}}function cp(e,t,n,r){return n===void 0&&(n=null),ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ka(t):t,{state:n,key:t&&t.key||r||G_()})}function zu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ka(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Y_(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=rs.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(ll({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=rs.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:b})}function f(y,b){l=rs.Push;let v=cp(g.location,y,b);u=d()+1;let w=G0(v,u),S=g.createHref(v);try{a.pushState(w,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function m(y,b){l=rs.Replace;let v=cp(g.location,y,b);u=d();let w=G0(v,u),S=g.createHref(v);a.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function p(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:zu(y);return v=v.replace(/ $/,"%20"),ot(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return l},get location(){return e(s,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(q0,h),c=y,()=>{s.removeEventListener(q0,h),c=null}},createHref(y){return t(s,y)},createURL:p,encodeLocation(y){let b=p(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(y){return a.go(y)}};return g}var Y0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Y0||(Y0={}));function Q_(e,t,n){return n===void 0&&(n="/"),K_(e,t,n)}function K_(e,t,n,r){let s=typeof t=="string"?ka(t):t,i=sx(s.pathname||"/",n);if(i==null)return null;let a=NN(e);X_(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=cI(i);l=aI(a[c],u)}return l}function NN(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ot(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=gs([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),NN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:sI(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of CN(i.path))s(i,a,c)}),t}function CN(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=CN(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function X_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:iI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const J_=/^:[\w-]+$/,Z_=3,eI=2,tI=1,nI=10,rI=-2,Q0=e=>e==="*";function sI(e,t){let n=e.split("/"),r=n.length;return n.some(Q0)&&(r+=rI),t&&(r+=eI),n.filter(s=>!Q0(s)).reduce((s,i)=>s+(J_.test(i)?Z_:i===""?tI:nI),r)}function iI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function aI(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=oI({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:gs([i,h.pathname]),pathnameBase:fI(gs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=gs([i,h.pathnameBase]))}return a}function oI(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=lI(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function lI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),SN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function cI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return SN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function sx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function uI(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ka(e):e;return{pathname:n?n.startsWith("/")?n:dI(n,t):t,search:mI(r),hash:pI(s)}}function dI(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ix(e,t){let n=hI(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ax(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ka(e):(s=ll({},e),ot(!s.pathname||!s.pathname.includes("?"),nf("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),nf("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),nf("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=uI(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const gs=e=>e.join("/").replace(/\/\/+/g,"/"),fI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const kN=["post","put","patch","delete"];new Set(kN);const xI=["get",...kN];new Set(xI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}const ox=x.createContext(null),yI=x.createContext(null),Is=x.createContext(null),Hd=x.createContext(null),dr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),EN=x.createContext(null);function vI(e,t){let{relative:n}=t===void 0?{}:t;Ea()||ot(!1);let{basename:r,navigator:s}=x.useContext(Is),{hash:i,pathname:a,search:l}=PN(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:gs([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Ea(){return x.useContext(Hd)!=null}function hr(){return Ea()||ot(!1),x.useContext(Hd).location}function DN(e){x.useContext(Is).static||x.useLayoutEffect(e)}function Rn(){let{isDataRoute:e}=x.useContext(dr);return e?MI():bI()}function bI(){Ea()||ot(!1);let e=x.useContext(ox),{basename:t,future:n,navigator:r}=x.useContext(Is),{matches:s}=x.useContext(dr),{pathname:i}=hr(),a=JSON.stringify(ix(s,n.v7_relativeSplatPath)),l=x.useRef(!1);return DN(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=ax(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:gs([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,a,i,e])}const wI=x.createContext(null);function jI(e){let t=x.useContext(dr).outlet;return t&&x.createElement(wI.Provider,{value:e},t)}function TN(){let{matches:e}=x.useContext(dr),t=e[e.length-1];return t?t.params:{}}function PN(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=x.useContext(Is),{matches:s}=x.useContext(dr),{pathname:i}=hr(),a=JSON.stringify(ix(s,r.v7_relativeSplatPath));return x.useMemo(()=>ax(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function SI(e,t){return NI(e,t)}function NI(e,t,n,r){Ea()||ot(!1);let{navigator:s}=x.useContext(Is),{matches:i}=x.useContext(dr),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=hr(),d;if(t){var h;let y=typeof t=="string"?ka(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ot(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=Q_(e,{pathname:m}),g=TI(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:gs([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:gs([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return t&&g?x.createElement(Hd.Provider,{value:{location:cl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:rs.Pop}},g):g}function CI(){let e=AI(),t=gI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,null)}const kI=x.createElement(CI,null);class EI extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(dr.Provider,{value:this.props.routeContext},x.createElement(EN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DI(e){let{routeContext:t,match:n,children:r}=e,s=x.useContext(ox);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(dr.Provider,{value:t},r)}function TI(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ot(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,p=!1,g=null,y=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||kI,c&&(u<0&&f===0?(OI("route-fallback"),p=!0,y=null):u===f&&(p=!0,y=h.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,f+1)),v=()=>{let w;return m?w=g:p?w=y:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,x.createElement(DI,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?x.createElement(EI,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var _N=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_N||{}),IN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(IN||{});function PI(e){let t=x.useContext(ox);return t||ot(!1),t}function _I(e){let t=x.useContext(yI);return t||ot(!1),t}function II(e){let t=x.useContext(dr);return t||ot(!1),t}function AN(e){let t=II(),n=t.matches[t.matches.length-1];return n.route.id||ot(!1),n.route.id}function AI(){var e;let t=x.useContext(EN),n=_I(),r=AN();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function MI(){let{router:e}=PI(_N.UseNavigateStable),t=AN(IN.UseNavigateStable),n=x.useRef(!1);return DN(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,cl({fromRouteId:t},i)))},[e,t])}const K0={};function OI(e,t,n){K0[e]||(K0[e]=!0)}function RI(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Un(e){let{to:t,replace:n,state:r,relative:s}=e;Ea()||ot(!1);let{future:i,static:a}=x.useContext(Is),{matches:l}=x.useContext(dr),{pathname:c}=hr(),u=Rn(),d=ax(t,ix(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function MN(e){return jI(e.context)}function He(e){ot(!1)}function LI(e){let{basename:t="/",children:n=null,location:r,navigationType:s=rs.Pop,navigator:i,static:a=!1,future:l}=e;Ea()&&ot(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:i,static:a,future:cl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=ka(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=r,g=x.useMemo(()=>{let y=sx(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:p},navigationType:s}},[c,d,h,f,m,p,s]);return g==null?null:x.createElement(Is.Provider,{value:u},x.createElement(Hd.Provider,{children:n,value:g}))}function FI(e){let{children:t,location:n}=e;return SI(up(t),n)}new Promise(()=>{});function up(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(r,s)=>{if(!x.isValidElement(r))return;let i=[...t,s];if(r.type===x.Fragment){n.push.apply(n,up(r.props.children,i));return}r.type!==He&&ot(!1),!r.props.index||!r.props.children||ot(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=up(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dp.apply(this,arguments)}function $I(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zI(e,t){return e.button===0&&(!t||t==="_self")&&!BI(e)}function hp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function VI(e,t){let n=hp(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}const UI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WI="6";try{window.__reactRouterVersion=WI}catch{}const HI="startTransition",X0=fg[HI];function qI(e){let{basename:t,children:n,future:r,window:s}=e,i=x.useRef();i.current==null&&(i.current=q_({window:s,v5Compat:!0}));let a=i.current,[l,c]=x.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=x.useCallback(h=>{u&&X0?X0(()=>c(h)):c(h)},[c,u]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.useEffect(()=>RI(r),[r]),x.createElement(LI,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const GI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rr=x.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=$I(t,UI),{basename:m}=x.useContext(Is),p,g=!1;if(typeof u=="string"&&YI.test(u)&&(p=u,GI))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=sx(S.pathname,m);S.origin===w.origin&&j!=null?u=j+S.search+S.hash:g=!0}catch{}let y=vI(u,{relative:s}),b=QI(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(w){r&&r(w),w.defaultPrevented||b(w)}return x.createElement("a",dp({},f,{href:p||y,onClick:g||i?r:v,ref:n,target:c}))});var J0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(J0||(J0={}));var Z0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Z0||(Z0={}));function QI(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Rn(),u=hr(),d=PN(e,{relative:a});return x.useCallback(h=>{if(zI(h,n)){h.preventDefault();let f=r!==void 0?r:zu(u)===zu(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}function KI(e){let t=x.useRef(hp(e)),n=x.useRef(!1),r=hr(),s=x.useMemo(()=>VI(r.search,n.current?null:t.current),[r.search]),i=Rn(),a=x.useCallback((l,c)=>{const u=hp(typeof l=="function"?l(s):l);n.current=!0,i("?"+u,c)},[i,s]);return[s,a]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(e,t)=>{const n=x.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>x.createElement("svg",{ref:d,...XI,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${JI(e)}`,l].join(" "),...u},[...t.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=ee("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ee("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=ee("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=ee("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=ee("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=ee("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=ee("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=ee("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=ee("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=ee("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=ee("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=ee("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ee("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=ee("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=ee("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=ee("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ee("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ee("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ee("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=ee("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ee("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ee("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=ee("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=ee("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),PA=380,_A=520,ov=320,lv=320,cv=600,uv=700,IA=()=>{const[e,t]=x.useState(!1),[n,r]=x.useState([{sender:"ai",text:"Hi! I am your Sales Agent AI. How can I help you today?"}]),[s,i]=x.useState(""),[a,l]=x.useState({width:PA,height:_A}),[c,u]=x.useState(!1),d=x.useRef(null),h=x.useRef(null),f=x.useRef(null);x.useEffect(()=>{e&&f.current&&f.current.scrollIntoView({behavior:"smooth"})},[n,e]),x.useEffect(()=>{const p=y=>{if(!c||!h.current)return;const b=y.clientX-h.current.x,v=y.clientY-h.current.y;l({width:Math.min(Math.max(h.current.width+b,ov),cv),height:Math.min(Math.max(h.current.height+v,lv),uv)})},g=()=>u(!1);return c&&(window.addEventListener("mousemove",p),window.addEventListener("mouseup",g)),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g)}},[c]);const m=async()=>{if(!s.trim())return;const p={sender:"user",text:s};r(g=>[...g,p]),i("");try{const g=await fetch("/agent/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})});if(!g.ok)throw new Error("Network error");const y=await g.json();r(b=>[...b,{sender:"ai",text:y.reply||"No response from agent."}])}catch{r(y=>[...y,{sender:"ai",text:"Sorry, there was a problem connecting to the agent."}])}};return o.jsxs(o.Fragment,{children:[!e&&o.jsx("button",{className:"fixed bottom-8 right-8 z-50 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg p-4 flex items-center justify-center transition-all",style:{boxShadow:"0 4px 24px 0 rgba(0,0,0,0.18)"},onClick:()=>t(!0),"aria-label":"Open Chat",children:o.jsx(sv,{className:"h-7 w-7"})}),e&&o.jsxs("div",{ref:d,className:"fixed bottom-8 right-8 z-50 bg-white rounded-2xl shadow-2xl flex flex-col border border-gray-200",style:{width:a.width,height:a.height,minWidth:ov,minHeight:lv,maxWidth:cv,maxHeight:uv,boxShadow:"0 8px 32px 0 rgba(0,0,0,0.22)"},children:[o.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-blue-500 rounded-t-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sv,{className:"h-5 w-5 text-white"}),o.jsx("span",{className:"text-white font-semibold text-lg",children:"Sales Agent AI"}),o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded bg-yellow-400 text-gray-900 font-semibold",title:"This module is in development",children:"In development"})]}),o.jsx("button",{onClick:()=>t(!1),className:"text-white hover:text-gray-200 p-1 rounded-full",children:o.jsx(Ta,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 bg-gray-50",style:{fontFamily:"Inter, sans-serif"},children:[n.map((p,g)=>o.jsx("div",{className:`mb-3 flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:o.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-xl shadow-sm text-base leading-relaxed break-words ${p.sender==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-white text-gray-900 border border-gray-200 rounded-bl-sm"}`,style:{wordBreak:"break-word"},children:p.text})},g)),o.jsx("div",{ref:f})]}),o.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-100 flex items-center gap-2 rounded-b-2xl",children:[o.jsx("input",{type:"text",className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-900 bg-gray-50 placeholder-gray-400 text-base",placeholder:"Type your message...",value:s,onChange:p=>i(p.target.value),onKeyDown:p=>{p.key==="Enter"&&m()},"aria-label":"Type your message",autoFocus:!0}),o.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg p-2 flex items-center justify-center transition-all disabled:opacity-50",onClick:m,disabled:!s.trim(),"aria-label":"Send",children:o.jsx(da,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"absolute bottom-2 right-2 w-5 h-5 cursor-nwse-resize z-50",style:{userSelect:"none"},onMouseDown:p=>{u(!0),h.current={x:p.clientX,y:p.clientY,width:a.width,height:a.height},p.preventDefault()},title:"Resize",children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:o.jsx("path",{d:"M3 17L17 3M10 17H17V10",stroke:"#60A5FA",strokeWidth:"2",strokeLinecap:"round"})})})]})]})};class AA extends x.Component{constructor(n){super(n);ue(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});ue(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?o.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:o.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),o.jsxs("div",{className:"flex flex-col space-y-3",children:[o.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),o.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function MA({children:e}){return o.jsx(AA,{children:e})}const OA={},dv=e=>{let t;const n=new Set,r=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(OA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},RA=e=>e?dv(e):dv;var GN={exports:{}},YN={},QN={exports:{}},KN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=x;function LA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FA=typeof Object.is=="function"?Object.is:LA,$A=fa.useState,BA=fa.useEffect,zA=fa.useLayoutEffect,VA=fa.useDebugValue;function UA(e,t){var n=t(),r=$A({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return zA(function(){s.value=n,s.getSnapshot=t,rf(s)&&i({inst:s})},[e,n,t]),BA(function(){return rf(s)&&i({inst:s}),e(function(){rf(s)&&i({inst:s})})},[e]),VA(n),n}function rf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!FA(e,n)}catch{return!0}}function WA(e,t){return t()}var HA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WA:UA;KN.useSyncExternalStore=fa.useSyncExternalStore!==void 0?fa.useSyncExternalStore:HA;QN.exports=KN;var qA=QN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=x,GA=qA;function YA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var QA=typeof Object.is=="function"?Object.is:YA,KA=GA.useSyncExternalStore,XA=Gd.useRef,JA=Gd.useEffect,ZA=Gd.useMemo,eM=Gd.useDebugValue;YN.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=XA(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=ZA(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),s!==void 0&&a.hasValue){var p=a.value;if(s(p,m))return h=p}return h=m}if(p=h,QA(d,m))return p;var g=r(m);return s!==void 0&&s(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,s]);var l=KA(e,i[0],i[1]);return JA(function(){a.hasValue=!0,a.value=l},[l]),eM(l),l};GN.exports=YN;var tM=GN.exports;const nM=Dd(tM),XN={},{useDebugValue:rM}=te,{useSyncExternalStoreWithSelector:sM}=nM;let hv=!1;const iM=e=>e;function aM(e,t=iM,n){(XN?"production":void 0)!=="production"&&n&&!hv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hv=!0);const r=sM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rM(r),r}const fv=e=>{(XN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?RA(e):e,n=(r,s)=>aM(t,r,s);return Object.assign(n,t),n},JN=e=>e?fv(e):fv;function oM(e){try{const t=e.split(".")[1];return JSON.parse(atob(t.replace(/-/g,"+").replace(/_/g,"/")))}catch{return{}}}const ZN=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("jwt-token");return t&&(e.Authorization=`Bearer ${t}`),e},lM=async(e,t)=>{try{console.log(" Starting sign in process for:",e);const n="http://103.224.243.242:3001/api",r=`${n}/auth/login`;console.log("Login URL:",r);const s=await fetch(r,{method:"POST",headers:ZN(),body:JSON.stringify({email:e,password:t})});if(!s.ok){let c="Authentication failed";try{const u=await s.json();u&&u.message&&(c=u.message)}catch{}throw new Error(c)}let i;try{i=await s.json()}catch{throw new Error("Invalid response from server.")}const{token:a,user:l}=i;if(!l||!l.id||!l.email||!a)throw new Error("Invalid user data received from server");return(!l.role||!["admin","sales_agent","operations_manager","operator","support"].includes(l.role))&&(console.warn(" User role missing or invalid, assigning default role"),l.role="admin"),localStorage.setItem("jwt-token",a),console.log(" Authentication successful"),l}catch(n){throw console.error("Error signing in:",n),n}},cM=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:ZN()}),localStorage.removeItem("jwt-token")}catch(e){console.error("Error signing out:",e),localStorage.removeItem("jwt-token")}},eC=async()=>{try{const e=localStorage.getItem("jwt-token");if(!e)return null;const t=oM(e);if(t.exp&&t.exp*1e3<Date.now())return localStorage.removeItem("jwt-token"),null;console.log(" getCurrentUser: Decoding JWT token directly");const n={id:t.id,email:t.email,name:t.name,role:t.role};return console.log(" getCurrentUser: User from JWT:",JSON.stringify(n,null,2)),!n.id||!n.email||!n.role?(console.error(" getCurrentUser: Invalid user data in JWT"),localStorage.removeItem("jwt-token"),null):n}catch(e){return console.error("Error getting current user:",e),localStorage.removeItem("jwt-token"),null}},uM=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},dM=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")},We=JN()(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const r=await lM(t,n);if(console.log(" Login successful - User data received:",JSON.stringify(r,null,2)),console.log(" User role check:",r==null?void 0:r.role),!r||!r.role)throw console.error(" User object missing or role undefined:",r),new Error("Invalid user data - role missing");if(!["admin","sales_agent","operations_manager","operator","support"].includes(r.role))throw console.error(" Invalid user role:",r.role),new Error(`Invalid user role: ${r.role}`);console.log(" User role validation passed:",r.role);const s=localStorage.getItem("jwt-token")||"";e({user:r,token:s,isAuthenticated:!0,error:null}),uM(r,s),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(r){throw e({error:r.message}),r}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await cM(),e({user:null,token:null,isAuthenticated:!1,error:null}),dM(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}));function hM(){var v,w;const[e,t]=x.useState(""),[n,r]=x.useState(""),[s,i]=x.useState(!1),[a,l]=x.useState(null),[c,u]=x.useState("loading"),{login:d,error:h,isAuthenticated:f,user:m}=We();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),x.useEffect(()=>{console.log("LoginForm mounted");const S="http://103.224.243.242:3001/api";fetch(`${S}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(j=>(console.log("API health check response:",j.status),u(j.ok?"available":"error"),j.text())).then(j=>{console.log("API health check data:",j)}).catch(j=>{console.error("API health check failed:",j),u("error"),l(`API connection error: ${j.message}. Make sure the API server is running at ${S}`)}),console.log("Environment variables check:",{apiUrl:"http://103.224.243.242:3001/api",dbHost:"crm-db"})},[]);const p=Rn(),g=hr(),y=((w=(v=g.state)==null?void 0:v.from)==null?void 0:w.pathname)||"/dashboard";x.useEffect(()=>{console.log(" LoginForm useEffect - Authentication check:",{isAuthenticated:f,user:m==null?void 0:m.name}),f&&m&&(console.log(" User is authenticated, navigating to:",y),p(y,{replace:!0}))},[f,m,p,y]),x.useEffect(()=>{g.pathname==="/login"&&localStorage.removeItem("jwt-token")},[g.pathname]);const b=async S=>{if(S.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log(" Login attempt for:",e);try{const j="http://103.224.243.242:3001/api";try{const k=await fetch(`${j}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok)throw console.error("API health check failed before login attempt:",await k.text()),u("error"),new Error(`API server is not responding correctly. Status: ${k.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(k){throw console.error("Failed to connect to API:",k),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}console.log(" Calling auth store login..."),await d(e,n),console.log(" Login attempt successful, auth state should be updated"),setTimeout(()=>{var N,C;const k=We.getState();console.log(" Current auth state after login:",{isAuthenticated:k.isAuthenticated,user:(N=k.user)==null?void 0:N.name,userRole:(C=k.user)==null?void 0:C.role,token:k.token?"Present":"Missing",fullUser:k.user}),k.isAuthenticated&&k.user?(console.log(" Forcing navigation to dashboard..."),console.log(" User object before navigation:",JSON.stringify(k.user,null,2)),p("/dashboard",{replace:!0})):console.log(" Auth state not updated properly, user may need to refresh")},500)}catch(j){console.error("Login error:",j),j instanceof Error&&(j.message.includes("<!DOCTYPE")||j.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://103.224.243.242:3001/api.`):(j.message.includes("NetworkError")||j.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),r("")}finally{i(!1)}};if(a)return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),o.jsx("p",{className:"text-gray-700 mb-4",children:a}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",o.jsx("br",{}),"API URL: ","http://103.224.243.242:3001/api"]}),o.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[o.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Make sure the API server is running"}),o.jsx("li",{children:"Check your .env file configuration"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsx("li",{children:"Check browser console for network errors"})]})]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsx("div",{children:o.jsx("input",{id:"email",name:"email",type:"email",value:e,onChange:S=>t(S.target.value),required:!0,autoComplete:"email",placeholder:"Email address",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})}),o.jsx("div",{children:o.jsx("input",{id:"password",name:"password",type:"password",value:n,onChange:S=>r(S.target.value),required:!0,autoComplete:"current-password",placeholder:"Password",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})})]}),o.jsx("div",{className:"flex justify-end text-xs mt-1",children:o.jsxs("a",{href:"#",className:"text-blue-700 hover:underline",children:["Forget password ",o.jsx("span",{className:"font-bold",children:"Click here"})]})}),o.jsx("button",{type:"submit",disabled:s,className:"w-full h-12 bg-black text-white rounded-md text-lg font-semibold mt-2 transition-colors duration-150 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-50",children:s?"Logging in...":"Login Now"}),h&&o.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[o.jsx(wi,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:h})]})]})}catch(S){return console.error("Error rendering login form:",S),l(`Error rendering login form: ${S instanceof Error?S.message:String(S)}`),null}}function fM({error:e,resetError:t}){return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:o.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),o.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),o.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:o.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),o.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class mM extends x.Component{constructor(n){super(n);ue(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?o.jsx(fM,{error:this.state.error,resetError:this.resetError}):this.props.children}}function pM(){const{isAuthenticated:e}=We();return e?o.jsx(Un,{to:"/dashboard"}):o.jsxs("div",{className:"h-screen overflow-hidden flex flex-col lg:flex-row bg-[#F2EEE7]",children:[o.jsxs("div",{className:"relative flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-[#385197] to-[#404040] text-white px-8 py-12 overflow-hidden",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M0 800 Q400 400 800 800",stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M0 600 Q400 200 800 600",stroke:"white",strokeWidth:"1.5"}),o.jsx("path",{d:"M0 400 Q400 0 800 400",stroke:"white",strokeWidth:"1"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-start max-w-lg w-full",children:[o.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight flex items-center gap-2",children:[o.jsx("span",{className:"text-white drop-shadow-lg",children:"Hello,"}),o.jsx("span",{className:"text-[#FFCC3F] drop-shadow-[0_2px_8px_rgba(255,204,63,0.7)]",children:"ASP Cranes!"}),o.jsx("span",{className:"inline-block text-5xl ml-2 align-middle",children:""})]}),o.jsx("p",{className:"text-xl md:text-2xl font-bold mb-8 text-white drop-shadow-lg tracking-wide",children:"The all-in-one platform to supercharge your heavy equipment rental business."}),o.jsxs("p",{className:"text-xs opacity-60 mt-12",children:[" ",new Date().getFullYear()," ASP Cranes. All rights reserved."]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center items-center bg-[#F2EEE7] px-6",children:o.jsxs("div",{className:"w-full max-w-md mx-auto relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/10 backdrop-blur-xl border border-[#CAC0B0]/60 shadow-2xl",style:{zIndex:1}}),o.jsxs("div",{className:"relative z-10 p-10 flex flex-col",children:[o.jsxs("h2",{className:"text-2xl font-bold text-[#404040] mb-2 flex items-center gap-2",children:["Welcome Back! ",o.jsx("span",{className:"text-[#FFCC3F]",children:""})]}),o.jsxs("p",{className:"text-[#385197] mb-6 text-sm",children:["Don't have an account? ",o.jsx("a",{href:"#",className:"text-[#FFCC3F] font-medium hover:underline",children:"Create a new account now"}),".",o.jsx("br",{}),"It's FREE! Takes less than a minute."]}),o.jsx(hM,{})]}),o.jsxs("svg",{className:"absolute -top-8 -right-8 w-32 h-32 opacity-30",viewBox:"0 0 100 100",fill:"none",children:[o.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"#FFCC3F",strokeWidth:"2"}),o.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#385197",strokeWidth:"1"})]}),o.jsx("svg",{className:"absolute -bottom-8 -left-8 w-24 h-24 opacity-20",viewBox:"0 0 100 100",fill:"none",children:o.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"20",stroke:"#404040",strokeWidth:"2"})})]})})]})}function gM(){return x.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://103.224.243.242:3001/api")},[]),o.jsx(mM,{children:o.jsx(pM,{})})}const tC=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Yd=x.createContext({}),Qd=x.createContext(null),Kd=typeof document<"u",mx=Kd?x.useLayoutEffect:x.useEffect,nC=x.createContext({strict:!1}),px=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),xM="framerAppearId",rC="data-"+px(xM);function yM(e,t,n,r){const{visualElement:s}=x.useContext(Yd),i=x.useContext(nC),a=x.useContext(Qd),l=x.useContext(tC).reducedMotion,c=x.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(n,a)});const d=x.useRef(!!(n[rC]&&!window.HandoffComplete));return mx(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function qi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vM(e,t,n){return x.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):qi(n)&&(n.current=r))},[t])}function ul(e){return typeof e=="string"||Array.isArray(e)}function Xd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const gx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xx=["initial",...gx];function Jd(e){return Xd(e.animate)||xx.some(t=>ul(e[t]))}function sC(e){return!!(Jd(e)||e.variants)}function bM(e,t){if(Jd(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ul(n)?n:void 0,animate:ul(r)?r:void 0}}return e.inherit!==!1?t:{}}function wM(e){const{initial:t,animate:n}=bM(e,x.useContext(Yd));return x.useMemo(()=>({initial:t,animate:n}),[mv(t),mv(n)])}function mv(e){return Array.isArray(e)?e.join(" "):e}const pv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dl={};for(const e in pv)dl[e]={isEnabled:t=>pv[e].some(n=>!!t[n])};function jM(e){for(const t in e)dl[t]={...dl[t],...e[t]}}const yx=x.createContext({}),iC=x.createContext({}),SM=Symbol.for("motionComponentSymbol");function NM({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&jM(e);function i(l,c){let u;const d={...x.useContext(tC),...l,layoutId:CM(l)},{isStatic:h}=d,f=wM(l),m=r(l,h);if(!h&&Kd){f.visualElement=yM(s,m,d,t);const p=x.useContext(iC),g=x.useContext(nC).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,e,p))}return x.createElement(Yd.Provider,{value:f},u&&f.visualElement?x.createElement(u,{visualElement:f.visualElement,...d}):null,n(s,l,vM(m,f.visualElement,c),m,h,f.visualElement))}const a=x.forwardRef(i);return a[SM]=s,a}function CM({layoutId:e}){const t=x.useContext(yx).id;return t&&e!==void 0?t+"-"+e:e}function kM(e){function t(r,s={}){return NM(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const EM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vx(e){return typeof e!="string"||e.includes("-")?!1:!!(EM.indexOf(e)>-1||/[A-Z]/.test(e))}const Wu={};function DM(e){Object.assign(Wu,e)}const Rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Si=new Set(Rl);function aC(e,{layout:t,layoutId:n}){return Si.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Wu[e]||e==="opacity")}const nn=e=>!!(e&&e.getVelocity),TM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PM=Rl.length;function _M(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let a=0;a<PM;a++){const l=Rl[a];if(e[l]!==void 0){const c=TM[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const oC=e=>t=>typeof t=="string"&&t.startsWith(e),lC=oC("--"),pp=oC("var(--"),IM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,AM=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Cs=(e,t,n)=>Math.min(Math.max(n,e),t),Ni={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Mo={...Ni,transform:e=>Cs(0,1,e)},pc={...Ni,default:1},Oo=e=>Math.round(e*1e5)/1e5,Zd=/(-)?([\d]*\.?[\d])+/g,cC=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,MM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ll(e){return typeof e=="string"}const Fl=e=>({test:t=>Ll(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gr=Fl("deg"),lr=Fl("%"),be=Fl("px"),OM=Fl("vh"),RM=Fl("vw"),gv={...lr,parse:e=>lr.parse(e)/100,transform:e=>lr.transform(e*100)},xv={...Ni,transform:Math.round},uC={borderWidth:be,borderTopWidth:be,borderRightWidth:be,borderBottomWidth:be,borderLeftWidth:be,borderRadius:be,radius:be,borderTopLeftRadius:be,borderTopRightRadius:be,borderBottomRightRadius:be,borderBottomLeftRadius:be,width:be,maxWidth:be,height:be,maxHeight:be,size:be,top:be,right:be,bottom:be,left:be,padding:be,paddingTop:be,paddingRight:be,paddingBottom:be,paddingLeft:be,margin:be,marginTop:be,marginRight:be,marginBottom:be,marginLeft:be,rotate:Gr,rotateX:Gr,rotateY:Gr,rotateZ:Gr,scale:pc,scaleX:pc,scaleY:pc,scaleZ:pc,skew:Gr,skewX:Gr,skewY:Gr,distance:be,translateX:be,translateY:be,translateZ:be,x:be,y:be,z:be,perspective:be,transformPerspective:be,opacity:Mo,originX:gv,originY:gv,originZ:be,zIndex:xv,fillOpacity:Mo,strokeOpacity:Mo,numOctaves:xv};function bx(e,t,n,r){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(lC(h)){i[h]=f;continue}const m=uC[h],p=AM(f,m);if(Si.has(h)){if(c=!0,a[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):s[h]=p}if(t.transform||(c||r?s.transform=_M(e.transform,n,d,r):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;s.transformOrigin=`${h} ${f} ${m}`}}const wx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dC(e,t,n){for(const r in t)!nn(t[r])&&!aC(r,n)&&(e[r]=t[r])}function LM({transformTemplate:e},t,n){return x.useMemo(()=>{const r=wx();return bx(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function FM(e,t,n){const r=e.style||{},s={};return dC(s,r,e),Object.assign(s,LM(e,t,n)),e.transformValues?e.transformValues(s):s}function $M(e,t,n){const r={},s=FM(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const BM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||BM.has(e)}let hC=e=>!Hu(e);function zM(e){e&&(hC=t=>t.startsWith("on")?!Hu(t):e(t))}try{zM(require("@emotion/is-prop-valid").default)}catch{}function VM(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(hC(s)||n===!0&&Hu(s)||!t&&!Hu(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function yv(e,t,n){return typeof e=="string"?e:be.transform(t+n*e)}function UM(e,t,n){const r=yv(t,e.x,e.width),s=yv(n,e.y,e.height);return`${r} ${s}`}const WM={offset:"stroke-dashoffset",array:"stroke-dasharray"},HM={offset:"strokeDashoffset",array:"strokeDasharray"};function qM(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?WM:HM;e[i.offset]=be.transform(-r);const a=be.transform(t),l=be.transform(n);e[i.array]=`${a} ${l}`}function jx(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(bx(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:g}=e;m.transform&&(g&&(p.transform=m.transform),delete m.transform),g&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=UM(g,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),a!==void 0&&qM(m,a,l,c,!1)}const fC=()=>({...wx(),attrs:{}}),Sx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function GM(e,t,n,r){const s=x.useMemo(()=>{const i=fC();return jx(i,t,{enableHardwareAcceleration:!1},Sx(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};dC(i,e.style,e),s.style={...i,...s.style}}return s}function YM(e=!1){return(n,r,s,{latestValues:i},a)=>{const c=(vx(n)?GM:$M)(r,i,a,n),d={...VM(r,typeof n=="string",e),...c,ref:s},{children:h}=r,f=x.useMemo(()=>nn(h)?h.get():h,[h]);return x.createElement(n,{...d,children:f})}}function mC(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const pC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gC(e,t,n,r){mC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(pC.has(s)?s:px(s),t.attrs[s])}function Nx(e,t){const{style:n}=e,r={};for(const s in n)(nn(n[s])||t.style&&nn(t.style[s])||aC(s,e))&&(r[s]=n[s]);return r}function xC(e,t){const n=Nx(e,t);for(const r in e)if(nn(e[r])||nn(t[r])){const s=Rl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function Cx(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function yC(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const qu=e=>Array.isArray(e),QM=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),KM=e=>qu(e)?e[e.length-1]||0:e;function su(e){const t=nn(e)?e.get():e;return QM(t)?t.toValue():t}function XM({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const a={latestValues:JM(r,s,i,e),renderState:t()};return n&&(a.mount=l=>n(r,l,a)),a}const vC=e=>(t,n)=>{const r=x.useContext(Yd),s=x.useContext(Qd),i=()=>XM(e,t,r,s);return n?i():yC(i)};function JM(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=su(i[f]);let{initial:a,animate:l}=e;const c=Jd(e),u=sC(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Xd(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=Cx(e,m);if(!p)return;const{transitionEnd:g,transition:y,...b}=p;for(const v in b){let w=b[v];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(s[v]=w)}for(const v in g)s[v]=g[v]}),s}const it=e=>e;class vv{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ZM(e){let t=new vv,n=new vv,r=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:n;return u&&a.add(c),f.add(c)&&h&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const gc=["prepare","read","update","preRender","render","postRender"],eO=40;function tO(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=gc.reduce((h,f)=>(h[f]=ZM(()=>n=!0),h),{}),a=h=>i[h].process(s),l=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,eO),1),s.timestamp=h,s.isProcessing=!0,gc.forEach(a),s.isProcessing=!1,n&&t&&(r=!1,e(l))},c=()=>{n=!0,r=!0,s.isProcessing||e(l)};return{schedule:gc.reduce((h,f)=>{const m=i[f];return h[f]=(p,g=!1,y=!1)=>(n||c(),m.schedule(p,g,y)),h},{}),cancel:h=>gc.forEach(f=>i[f].cancel(h)),state:s,steps:i}}const{schedule:Fe,cancel:Lr,state:Pt,steps:sf}=tO(typeof requestAnimationFrame<"u"?requestAnimationFrame:it,!0),nO={useVisualState:vC({scrapeMotionValuesFromProps:xC,createRenderState:fC,onMount:(e,t,{renderState:n,latestValues:r})=>{Fe.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Fe.render(()=>{jx(n,r,{enableHardwareAcceleration:!1},Sx(t.tagName),e.transformTemplate),gC(t,n)})}})},rO={useVisualState:vC({scrapeMotionValuesFromProps:Nx,createRenderState:wx})};function sO(e,{forwardMotionProps:t=!1},n,r){return{...vx(e)?nO:rO,preloadedFeatures:n,useRender:YM(t),createVisualElement:r,Component:e}}function Cr(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const bC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function eh(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const iO=e=>t=>bC(t)&&e(t,eh(t));function Tr(e,t,n,r){return Cr(e,t,iO(n),r)}const aO=(e,t)=>n=>t(e(n)),ys=(...e)=>e.reduce(aO);function wC(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const bv=wC("dragHorizontal"),wv=wC("dragVertical");function jC(e){let t=!1;if(e==="y")t=wv();else if(e==="x")t=bv();else{const n=bv(),r=wv();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function SC(){const e=jC(!0);return e?(e(),!1):!0}class As{constructor(t){this.isMounted=!1,this.node=t}update(){}}function jv(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||SC())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[r]&&Fe.update(()=>l[r](i,a))};return Tr(e.current,n,s,{passive:!e.getProps()[r]})}class oO extends As{mount(){this.unmount=ys(jv(this.node,!0),jv(this.node,!1))}unmount(){}}class lO extends As{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ys(Cr(this.node.current,"focus",()=>this.onFocus()),Cr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const NC=(e,t)=>t?e===t?!0:NC(e,t.parentElement):!1;function af(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,eh(n))}class cO extends As{constructor(){super(...arguments),this.removeStartListeners=it,this.removeEndListeners=it,this.removeAccessibleListeners=it,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Tr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Fe.update(()=>{!h&&!NC(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),a=Tr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ys(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||af("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Fe.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Cr(this.node.current,"keyup",a),af("down",(l,c)=>{this.startPress(l,c)})},n=Cr(this.node.current,"keydown",t),r=()=>{this.isPressing&&af("cancel",(i,a)=>this.cancelPress(i,a))},s=Cr(this.node.current,"blur",r);this.removeAccessibleListeners=ys(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Fe.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!SC()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Fe.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Tr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Cr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ys(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gp=new WeakMap,of=new WeakMap,uO=e=>{const t=gp.get(e.target);t&&t(e)},dO=e=>{e.forEach(uO)};function hO({root:e,...t}){const n=e||document;of.has(n)||of.set(n,{});const r=of.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(dO,{root:e,...t})),r[s]}function fO(e,t,n){const r=hO(t);return gp.set(e,n),r.observe(e),()=>{gp.delete(e),r.unobserve(e)}}const mO={some:0,all:1};class pO extends As{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:mO[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return fO(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(gO(t,n))&&this.startObserver()}unmount(){}}function gO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const xO={inView:{Feature:pO},tap:{Feature:cO},focus:{Feature:lO},hover:{Feature:oO}};function CC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function yO(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function vO(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function th(e,t,n){const r=e.getProps();return Cx(r,t,n!==void 0?n:r.custom,yO(e),vO(e))}let kx=it;const ii=e=>e*1e3,Pr=e=>e/1e3,bO={current:!1},kC=e=>Array.isArray(e)&&typeof e[0]=="number";function EC(e){return!!(!e||typeof e=="string"&&DC[e]||kC(e)||Array.isArray(e)&&e.every(EC))}const yo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,DC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yo([0,.65,.55,1]),circOut:yo([.55,0,1,.45]),backIn:yo([.31,.01,.66,-.59]),backOut:yo([.33,1.53,.69,.99])};function TC(e){if(e)return kC(e)?yo(e):Array.isArray(e)?e.map(TC):DC[e]}function wO(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=TC(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function jO(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const PC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,SO=1e-7,NO=12;function CO(e,t,n,r,s){let i,a,l=0;do a=t+(n-t)/2,i=PC(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>SO&&++l<NO);return a}function $l(e,t,n,r){if(e===t&&n===r)return it;const s=i=>CO(i,0,1,e,n);return i=>i===0||i===1?i:PC(s(i),t,r)}const kO=$l(.42,0,1,1),EO=$l(0,0,.58,1),_C=$l(.42,0,.58,1),DO=e=>Array.isArray(e)&&typeof e[0]!="number",IC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,AC=e=>t=>1-e(1-t),Ex=e=>1-Math.sin(Math.acos(e)),MC=AC(Ex),TO=IC(Ex),OC=$l(.33,1.53,.69,.99),Dx=AC(OC),PO=IC(Dx),_O=e=>(e*=2)<1?.5*Dx(e):.5*(2-Math.pow(2,-10*(e-1))),IO={linear:it,easeIn:kO,easeInOut:_C,easeOut:EO,circIn:Ex,circInOut:TO,circOut:MC,backIn:Dx,backInOut:PO,backOut:OC,anticipate:_O},Sv=e=>{if(Array.isArray(e)){kx(e.length===4);const[t,n,r,s]=e;return $l(t,n,r,s)}else if(typeof e=="string")return IO[e];return e},Tx=(e,t)=>n=>!!(Ll(n)&&MM.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),RC=(e,t,n)=>r=>{if(!Ll(r))return r;const[s,i,a,l]=r.match(Zd);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},AO=e=>Cs(0,255,e),lf={...Ni,transform:e=>Math.round(AO(e))},ei={test:Tx("rgb","red"),parse:RC("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+lf.transform(e)+", "+lf.transform(t)+", "+lf.transform(n)+", "+Oo(Mo.transform(r))+")"};function MO(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const xp={test:Tx("#"),parse:MO,transform:ei.transform},Gi={test:Tx("hsl","hue"),parse:RC("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+lr.transform(Oo(t))+", "+lr.transform(Oo(n))+", "+Oo(Mo.transform(r))+")"},Bt={test:e=>ei.test(e)||xp.test(e)||Gi.test(e),parse:e=>ei.test(e)?ei.parse(e):Gi.test(e)?Gi.parse(e):xp.parse(e),transform:e=>Ll(e)?e:e.hasOwnProperty("red")?ei.transform(e):Gi.transform(e)},Qe=(e,t,n)=>-n*e+n*t+e;function cf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function OO({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=cf(c,l,e+1/3),i=cf(c,l,e),a=cf(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}const uf=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},RO=[xp,ei,Gi],LO=e=>RO.find(t=>t.test(e));function Nv(e){const t=LO(e);let n=t.parse(e);return t===Gi&&(n=OO(n)),n}const LC=(e,t)=>{const n=Nv(e),r=Nv(t),s={...n};return i=>(s.red=uf(n.red,r.red,i),s.green=uf(n.green,r.green,i),s.blue=uf(n.blue,r.blue,i),s.alpha=Qe(n.alpha,r.alpha,i),ei.transform(s))};function FO(e){var t,n;return isNaN(e)&&Ll(e)&&(((t=e.match(Zd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(cC))===null||n===void 0?void 0:n.length)||0)>0}const FC={regex:IM,countKey:"Vars",token:"${v}",parse:it},$C={regex:cC,countKey:"Colors",token:"${c}",parse:Bt.parse},BC={regex:Zd,countKey:"Numbers",token:"${n}",parse:Ni.parse};function df(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function Gu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&df(n,FC),df(n,$C),df(n,BC),n}function zC(e){return Gu(e).values}function VC(e){const{values:t,numColors:n,numVars:r,tokenised:s}=Gu(e),i=t.length;return a=>{let l=s;for(let c=0;c<i;c++)c<r?l=l.replace(FC.token,a[c]):c<r+n?l=l.replace($C.token,Bt.transform(a[c])):l=l.replace(BC.token,Oo(a[c]));return l}}const $O=e=>typeof e=="number"?0:e;function BO(e){const t=zC(e);return VC(e)(t.map($O))}const ks={test:FO,parse:zC,createTransformer:VC,getAnimatableNone:BO},UC=(e,t)=>n=>`${n>0?t:e}`;function WC(e,t){return typeof e=="number"?n=>Qe(e,t,n):Bt.test(e)?LC(e,t):e.startsWith("var(")?UC(e,t):qC(e,t)}const HC=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,a)=>WC(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}},zO=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=WC(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},qC=(e,t)=>{const n=ks.createTransformer(t),r=Gu(e),s=Gu(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ys(HC(r.values,s.values),n):UC(e,t)},hl=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Cv=(e,t)=>n=>Qe(e,t,n);function VO(e){return typeof e=="number"?Cv:typeof e=="string"?Bt.test(e)?LC:qC:Array.isArray(e)?HC:typeof e=="object"?zO:Cv}function UO(e,t,n){const r=[],s=n||VO(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||it:t;l=ys(c,l)}r.push(l)}return r}function GC(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(kx(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=UO(t,r,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=hl(e[d],e[d+1],u);return a[d](h)};return n?u=>c(Cs(e[0],e[i-1],u)):c}function WO(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=hl(0,t,r);e.push(Qe(n,1,s))}}function HO(e){const t=[0];return WO(t,e.length-1),t}function qO(e,t){return e.map(n=>n*t)}function GO(e,t){return e.map(()=>t||_C).splice(0,e.length-1)}function Yu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=DO(r)?r.map(Sv):Sv(r),i={done:!1,value:t[0]},a=qO(n&&n.length===t.length?n:HO(t),e),l=GC(a,t,{ease:Array.isArray(s)?s:GO(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function YC(e,t){return t?e*(1e3/t):0}const YO=5;function QC(e,t,n){const r=Math.max(t-YO,0);return YC(n-e(r),t-r)}const hf=.001,QO=.01,KO=10,XO=.05,JO=1;function ZO({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i,a=1-t;a=Cs(XO,JO,a),e=Cs(QO,KO,Pr(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-n,m=yp(u,a),p=Math.exp(-h);return hf-f/m*p},i=u=>{const h=u*a*e,f=h*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-h),g=yp(Math.pow(u,2),a);return(-s(u)+hf>0?-1:1)*((f-m)*p)/g}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-hf+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=tR(s,i,l);if(e=ii(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const eR=12;function tR(e,t,n){let r=n;for(let s=1;s<eR;s++)r=r-e(r)/t(r);return r}function yp(e,t){return e*Math.sqrt(1-t*t)}const nR=["duration","bounce"],rR=["stiffness","damping","mass"];function kv(e,t){return t.some(n=>e[n]!==void 0)}function sR(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!kv(e,rR)&&kv(e,nR)){const n=ZO(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function KC({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=sR({...r,velocity:-Pr(r.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-s,y=Pr(Math.sqrt(l/u)),b=Math.abs(g)<5;n||(n=b?.01:2),t||(t=b?.005:.5);let v;if(p<1){const w=yp(y,p);v=S=>{const j=Math.exp(-p*y*S);return i-j*((m+p*y*g)/w*Math.sin(w*S)+g*Math.cos(w*S))}}else if(p===1)v=w=>i-Math.exp(-y*w)*(g+(m+y*g)*w);else{const w=y*Math.sqrt(p*p-1);v=S=>{const j=Math.exp(-p*y*S),k=Math.min(w*S,300);return i-j*((m+p*y*g)*Math.sinh(k)+w*g*Math.cosh(k))/w}}return{calculatedDuration:f&&d||null,next:w=>{const S=v(w);if(f)a.done=w>=d;else{let j=m;w!==0&&(p<1?j=QC(v,w,S):j=0);const k=Math.abs(j)<=n,N=Math.abs(i-S)<=t;a.done=k&&N}return a.value=a.done?i:S,a}}}function Ev({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=n*t;const y=h+g,b=a===void 0?y:a(y);b!==y&&(g=b-h);const v=C=>-g*Math.exp(-C/r),w=C=>b+v(C),S=C=>{const E=v(C),T=w(C);f.done=Math.abs(E)<=u,f.value=f.done?b:T};let j,k;const N=C=>{m(f.value)&&(j=C,k=KC({keyframes:[f.value,p(f.value)],velocity:QC(w,C,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:C=>{let E=!1;return!k&&j===void 0&&(E=!0,S(C),N(C)),j!==void 0&&C>j?k.next(C-j):(!E&&S(C),f)}}}const iR=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Fe.update(t,!0),stop:()=>Lr(t),now:()=>Pt.isProcessing?Pt.timestamp:performance.now()}},Dv=2e4;function Tv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Dv;)t+=n,r=e.next(t);return t>=Dv?1/0:t}const aR={decay:Ev,inertia:Ev,tween:Yu,keyframes:Yu,spring:KC};function Qu({autoplay:e=!0,delay:t=0,driver:n=iR,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,g,y;const b=()=>{y=new Promise(W=>{g=W})};b();let v;const w=aR[s]||Yu;let S;w!==Yu&&typeof r[0]!="number"&&(S=GC([0,100],r,{clamp:!1}),r=[0,100]);const j=w({...f,keyframes:r});let k;l==="mirror"&&(k=w({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let N="idle",C=null,E=null,T=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=Tv(j));const{calculatedDuration:F}=j;let R=1/0,$=1/0;F!==null&&(R=F+a,$=R*(i+1)-a);let D=0;const B=W=>{if(E===null)return;m>0&&(E=Math.min(E,W)),m<0&&(E=Math.min(W-$/m,E)),C!==null?D=C:D=Math.round(W-E)*m;const Z=D-t*(m>=0?1:-1),ie=m>=0?Z<0:Z>$;D=Math.max(Z,0),N==="finished"&&C===null&&(D=$);let le=D,ge=j;if(i){const Q=Math.min(D,$)/R;let fe=Math.floor(Q),_=Q%1;!_&&Q>=1&&(_=1),_===1&&fe--,fe=Math.min(fe,i+1),!!(fe%2)&&(l==="reverse"?(_=1-_,a&&(_-=a/R)):l==="mirror"&&(ge=k)),le=Cs(0,1,_)*R}const q=ie?{done:!1,value:r[0]}:ge.next(le);S&&(q.value=S(q.value));let{done:O}=q;!ie&&F!==null&&(O=m>=0?D>=$:D<=0);const H=C===null&&(N==="finished"||N==="running"&&O);return h&&h(q.value),H&&P(),q},V=()=>{v&&v.stop(),v=void 0},M=()=>{N="idle",V(),g(),b(),E=T=null},P=()=>{N="finished",d&&d(),V(),g()},I=()=>{if(p)return;v||(v=n(B));const W=v.now();c&&c(),C!==null?E=W-C:(!E||N==="finished")&&(E=W),N==="finished"&&b(),T=E,C=null,N="running",v.start()};e&&I();const z={then(W,Z){return y.then(W,Z)},get time(){return Pr(D)},set time(W){W=ii(W),D=W,C!==null||!v||m===0?C=W:E=v.now()-W/m},get duration(){const W=j.calculatedDuration===null?Tv(j):j.calculatedDuration;return Pr(W)},get speed(){return m},set speed(W){W===m||!v||(m=W,z.time=Pr(D))},get state(){return N},play:I,pause:()=>{N="paused",C=D},stop:()=>{p=!0,N!=="idle"&&(N="idle",u&&u(),M())},cancel:()=>{T!==null&&B(T),M()},complete:()=>{N="finished"},sample:W=>(E=0,B(W))};return z}function oR(e){let t;return()=>(t===void 0&&(t=e()),t)}const lR=oR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cR=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xc=10,uR=2e4,dR=(e,t)=>t.type==="spring"||e==="backgroundColor"||!EC(t.ease);function hR(e,t,{onUpdate:n,onComplete:r,...s}){if(!(lR()&&cR.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=s;if(dR(t,s)){const w=Qu({...s,repeat:0,delay:0});let S={done:!1,value:h[0]};const j=[];let k=0;for(;!S.done&&k<uR;)S=w.sample(k),j.push(S.value),k+=xc;p=void 0,h=j,f=k-xc,m="linear"}const g=wO(e.owner.current,t,h,{...s,duration:f,ease:m,times:p}),y=()=>{u=!1,g.cancel()},b=()=>{u=!0,Fe.update(y),l(),d()};return g.onfinish=()=>{u||(e.set(jO(h,s)),r&&r(),b())},{then(w,S){return c.then(w,S)},attachTimeline(w){return g.timeline=w,g.onfinish=null,it},get time(){return Pr(g.currentTime||0)},set time(w){g.currentTime=ii(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return Pr(f)},play:()=>{a||(g.play(),Lr(y))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const S=Qu({...s,autoplay:!1});e.setWithVelocity(S.sample(w-xc).value,S.sample(w).value,xc)}b()},complete:()=>{u||g.finish()},cancel:b}}function fR({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:it,pause:it,stop:it,then:i=>(i(),Promise.resolve()),cancel:it,complete:it});return t?Qu({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const mR={type:"spring",stiffness:500,damping:25,restSpeed:10},pR=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),gR={type:"keyframes",duration:.8},xR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yR=(e,{keyframes:t})=>t.length>2?gR:Si.has(e)?e.startsWith("scale")?pR(t[1]):mR:xR,vp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ks.test(t)||t==="0")&&!t.startsWith("url(")),vR=new Set(["brightness","contrast","saturate","opacity"]);function bR(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Zd)||[];if(!r)return e;const s=n.replace(r,"");let i=vR.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const wR=/([a-z-]*)\(.*?\)/g,bp={...ks,getAnimatableNone:e=>{const t=e.match(wR);return t?t.map(bR).join(" "):e}},jR={...uC,color:Bt,backgroundColor:Bt,outlineColor:Bt,fill:Bt,stroke:Bt,borderColor:Bt,borderTopColor:Bt,borderRightColor:Bt,borderBottomColor:Bt,borderLeftColor:Bt,filter:bp,WebkitFilter:bp},Px=e=>jR[e];function XC(e,t){let n=Px(e);return n!==bp&&(n=ks),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const JC=e=>/^0[^.\s]+$/.test(e);function SR(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||JC(e)}function NR(e,t,n,r){const s=vp(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=r.from!==void 0?r.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),SR(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=XC(t,l)}return i}function CR({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function _x(e,t){return e[t]||e.default||e}const kR={skipAnimations:!1},Ix=(e,t,n,r={})=>s=>{const i=_x(r,e)||{},a=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-ii(a);const c=NR(t,e,n,i),u=c[0],d=c[c.length-1],h=vp(e,u),f=vp(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(CR(i)||(m={...m,...yR(e,m)}),m.duration&&(m.duration=ii(m.duration)),m.repeatDelay&&(m.repeatDelay=ii(m.repeatDelay)),!h||!f||bO.current||i.type===!1||kR.skipAnimations)return fR(m);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=hR(t,e,m);if(p)return p}return Qu(m)};function Ku(e){return!!(nn(e)&&e.add)}const ZC=e=>/^\-?\d*\.?\d+$/.test(e);function Ax(e,t){e.indexOf(t)===-1&&e.push(t)}function Mx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ox{constructor(){this.subscriptions=[]}add(t){return Ax(this.subscriptions,t),()=>Mx(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ER=e=>!isNaN(parseFloat(e));class DR{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:a}=Pt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Fe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Fe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=ER(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ox);const r=this.events[t].add(n);return t==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?YC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ma(e,t){return new DR(e,t)}const e2=e=>t=>t.test(e),TR={test:e=>e==="auto",parse:e=>e},t2=[Ni,be,lr,Gr,RM,OM,TR],Ka=e=>t2.find(e2(e)),PR=[...t2,Bt,ks],_R=e=>PR.find(e2(e));function IR(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ma(n))}function AR(e,t){const n=th(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const a in i){const l=KM(i[a]);IR(e,a,l)}}function MR(e,t,n){var r,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(ZC(d)||JC(d))?d=parseFloat(d):!_R(d)&&ks.test(u)&&(d=XC(c,u)),e.addValue(c,ma(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function OR(e,t){return t?(t[e]||t.default||t).from:void 0}function RR(e,t,n){const r={};for(const s in e){const i=OR(s,t);if(i!==void 0)r[s]=i;else{const a=n.getValue(s);a&&(r[s]=a.get())}}return r}function LR({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function FR(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function n2(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&LR(d,h))continue;const p={delay:n,elapsed:0,..._x(i||{},h)};if(window.HandoffAppearAnimations){const b=e.getProps()[rC];if(b){const v=window.HandoffAppearAnimations(b,h,f,Fe);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!FR(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(Ix(h,f,m,e.shouldReduceMotion&&Si.has(h)?{type:!1}:p));const y=f.animation;Ku(c)&&(c.add(h),y.then(()=>c.remove(h))),u.push(y)}return a&&Promise.all(u).then(()=>{a&&AR(e,a)}),u}function wp(e,t,n={}){const r=th(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(n2(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return $R(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function $R(e,t,n=0,r=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(e.variantChildren).sort(BR).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(wp(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function BR(e,t){return e.sortNodePosition(t)}function zR(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>wp(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=wp(e,t,n);else{const s=typeof t=="function"?th(e,t,n.custom):t;r=Promise.all(n2(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const VR=[...gx].reverse(),UR=gx.length;function WR(e){return t=>Promise.all(t.map(({animation:n,options:r})=>zR(e,n,r)))}function HR(e){let t=WR(e);const n=GR();let r=!0;const s=(c,u)=>{const d=th(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},g=1/0;for(let b=0;b<UR;b++){const v=VR[b],w=n[v],S=d[v]!==void 0?d[v]:h[v],j=ul(S),k=v===u?w.isActive:null;k===!1&&(g=b);let N=S===h[v]&&S!==d[v]&&j;if(N&&r&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...p},!w.isActive&&k===null||!S&&!w.prevProp||Xd(S)||typeof S=="boolean")continue;let E=qR(w.prevProp,S)||v===u&&w.isActive&&!N&&j||b>g&&j,T=!1;const F=Array.isArray(S)?S:[S];let R=F.reduce(s,{});k===!1&&(R={});const{prevResolvedValues:$={}}=w,D={...$,...R},B=V=>{E=!0,m.has(V)&&(T=!0,m.delete(V)),w.needsAnimating[V]=!0};for(const V in D){const M=R[V],P=$[V];if(p.hasOwnProperty(V))continue;let I=!1;qu(M)&&qu(P)?I=!CC(M,P):I=M!==P,I?M!==void 0?B(V):m.add(V):M!==void 0&&m.has(V)?B(V):w.protectedKeys[V]=!0}w.prevProp=S,w.prevResolvedValues=R,w.isActive&&(p={...p,...R}),r&&e.blockInitialAnimation&&(E=!1),E&&(!N||T)&&f.push(...F.map(V=>({animation:V,options:{type:v,...c}})))}if(m.size){const b={};m.forEach(v=>{const w=e.getBaseTarget(v);w!==void 0&&(b[v]=w)}),f.push({animation:b})}let y=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function qR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!CC(t,e):!1}function Os(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GR(){return{animate:Os(!0),whileInView:Os(),whileHover:Os(),whileTap:Os(),whileDrag:Os(),whileFocus:Os(),exit:Os()}}class YR extends As{constructor(t){super(t),t.animationState||(t.animationState=HR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Xd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let QR=0;class KR extends As{constructor(){super(...arguments),this.id=QR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const XR={animation:{Feature:YR},exit:{Feature:KR}},Pv=(e,t)=>Math.abs(e-t);function JR(e,t){const n=Pv(e.x,t.x),r=Pv(e.y,t.y);return Math.sqrt(n**2+r**2)}class r2{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=mf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=JR(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=Pt;this.history.push({...p,timestamp:g});const{onStart:y,onMove:b}=this.handlers;f||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ff(f,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=mf(h.type==="pointercancel"?this.lastMoveEventInfo:ff(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,y),p&&p(h,y)},!bC(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=eh(t),l=ff(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Pt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,mf(l,this.history)),this.removeListeners=ys(Tr(this.contextWindow,"pointermove",this.handlePointerMove),Tr(this.contextWindow,"pointerup",this.handlePointerUp),Tr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Lr(this.updatePoint)}}function ff(e,t){return t?{point:t(e.point)}:e}function _v(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mf({point:e},t){return{point:e,delta:_v(e,s2(t)),offset:_v(e,ZR(t)),velocity:e4(t,.1)}}function ZR(e){return e[0]}function s2(e){return e[e.length-1]}function e4(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=s2(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>ii(t)));)n--;if(!r)return{x:0,y:0};const i=Pr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function fn(e){return e.max-e.min}function jp(e,t=0,n=.01){return Math.abs(e-t)<=n}function Iv(e,t,n,r=.5){e.origin=r,e.originPoint=Qe(t.min,t.max,e.origin),e.scale=fn(n)/fn(t),(jp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Qe(n.min,n.max,e.origin)-e.originPoint,(jp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Ro(e,t,n,r){Iv(e.x,t.x,n.x,r?r.originX:void 0),Iv(e.y,t.y,n.y,r?r.originY:void 0)}function Av(e,t,n){e.min=n.min+t.min,e.max=e.min+fn(t)}function t4(e,t,n){Av(e.x,t.x,n.x),Av(e.y,t.y,n.y)}function Mv(e,t,n){e.min=t.min-n.min,e.max=e.min+fn(t)}function Lo(e,t,n){Mv(e.x,t.x,n.x),Mv(e.y,t.y,n.y)}function n4(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Qe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Qe(n,e,r.max):Math.min(e,n)),e}function Ov(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function r4(e,{top:t,left:n,bottom:r,right:s}){return{x:Ov(e.x,n,s),y:Ov(e.y,t,r)}}function Rv(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function s4(e,t){return{x:Rv(e.x,t.x),y:Rv(e.y,t.y)}}function i4(e,t){let n=.5;const r=fn(e),s=fn(t);return s>r?n=hl(t.min,t.max-r,e.min):r>s&&(n=hl(e.min,e.max-s,t.min)),Cs(0,1,n)}function a4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Sp=.35;function o4(e=Sp){return e===!1?e=0:e===!0&&(e=Sp),{x:Lv(e,"left","right"),y:Lv(e,"top","bottom")}}function Lv(e,t,n){return{min:Fv(e,t),max:Fv(e,n)}}function Fv(e,t){return typeof e=="number"?e:e[t]||0}const $v=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yi=()=>({x:$v(),y:$v()}),Bv=()=>({min:0,max:0}),lt=()=>({x:Bv(),y:Bv()});function wn(e){return[e("x"),e("y")]}function i2({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function l4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function c4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function pf(e){return e===void 0||e===1}function Np({scale:e,scaleX:t,scaleY:n}){return!pf(e)||!pf(t)||!pf(n)}function Us(e){return Np(e)||a2(e)||e.z||e.rotate||e.rotateX||e.rotateY}function a2(e){return zv(e.x)||zv(e.y)}function zv(e){return e&&e!=="0%"}function Xu(e,t,n){const r=e-n,s=t*r;return n+s}function Vv(e,t,n,r,s){return s!==void 0&&(e=Xu(e,s,r)),Xu(e,n,r)+t}function Cp(e,t=0,n=1,r,s){e.min=Vv(e.min,t,n,r,s),e.max=Vv(e.max,t,n,r,s)}function o2(e,{x:t,y:n}){Cp(e.x,t.translate,t.scale,t.originPoint),Cp(e.y,n.translate,n.scale,n.originPoint)}function u4(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Qi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,o2(e,a)),r&&Us(i.latestValues)&&Qi(e,i.latestValues))}t.x=Uv(t.x),t.y=Uv(t.y)}function Uv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Kr(e,t){e.min=e.min+t,e.max=e.max+t}function Wv(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,a=Qe(e.min,e.max,i);Cp(e,t[n],t[r],a,t.scale)}const d4=["x","scaleX","originX"],h4=["y","scaleY","originY"];function Qi(e,t){Wv(e.x,t,d4),Wv(e.y,t,h4)}function l2(e,t){return i2(c4(e.getBoundingClientRect(),t))}function f4(e,t,n){const r=l2(e,n),{scroll:s}=t;return s&&(Kr(r.x,s.offset.x),Kr(r.y,s.offset.y)),r}const c2=({current:e})=>e?e.ownerDocument.defaultView:null,m4=new WeakMap;class p4{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(eh(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=jC(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wn(y=>{let b=this.getAxisMotionValue(y).get()||0;if(lr.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[y];w&&(b=fn(w)*(parseFloat(b)/100))}}this.originPoint[y]=b}),p&&Fe.update(()=>p(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=g4(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>wn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new r2(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:c2(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Fe.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!yc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=n4(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&qi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=r4(s.layoutBox,n):this.constraints=!1,this.elastic=o4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&wn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=a4(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!qi(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=f4(r,s.root,this.visualElement.getTransformPagePoint());let a=s4(s.layout.layoutBox,i);if(n){const l=n(l4(a));this.hasMutatedConstraints=!!l,l&&(a=i2(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=wn(d=>{if(!yc(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,p={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Ix(t,r,0,n))}stopAnimation(){wn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){wn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){wn(n=>{const{drag:r}=this.getProps();if(!yc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-Qe(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!qi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};wn(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=i4({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wn(a=>{if(!yc(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Qe(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;m4.set(this.visualElement,this);const t=this.visualElement.current,n=Tr(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();qi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const a=Cr(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(wn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Sp,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function yc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function g4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class x4 extends As{constructor(t){super(t),this.removeGroupControls=it,this.removeListeners=it,this.controls=new p4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||it}unmount(){this.removeGroupControls(),this.removeListeners()}}const Hv=e=>(t,n)=>{e&&Fe.update(()=>e(t,n))};class y4 extends As{constructor(){super(...arguments),this.removePointerDownListener=it}onPointerDown(t){this.session=new r2(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:c2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Hv(t),onStart:Hv(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Fe.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=Tr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function v4(){const e=x.useContext(Qd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=x.useId();return x.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xa={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(be.test(e))e=parseFloat(e);else return e;const n=qv(e,t.target.x),r=qv(e,t.target.y);return`${n}% ${r}%`}},b4={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ks.parse(e);if(s.length>5)return r;const i=ks.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Qe(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};class w4 extends te.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;DM(j4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Fe.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function u2(e){const[t,n]=v4(),r=x.useContext(yx);return te.createElement(w4,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(iC),isPresent:t,safeToRemove:n})}const j4={borderRadius:{...Xa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xa,borderTopRightRadius:Xa,borderBottomLeftRadius:Xa,borderBottomRightRadius:Xa,boxShadow:b4},d2=["TopLeft","TopRight","BottomLeft","BottomRight"],S4=d2.length,Gv=e=>typeof e=="string"?parseFloat(e):e,Yv=e=>typeof e=="number"||be.test(e);function N4(e,t,n,r,s,i){s?(e.opacity=Qe(0,n.opacity!==void 0?n.opacity:1,C4(r)),e.opacityExit=Qe(t.opacity!==void 0?t.opacity:1,0,k4(r))):i&&(e.opacity=Qe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<S4;a++){const l=`border${d2[a]}Radius`;let c=Qv(t,l),u=Qv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Yv(c)===Yv(u)?(e[l]=Math.max(Qe(Gv(c),Gv(u),r),0),(lr.test(u)||lr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Qe(t.rotate||0,n.rotate||0,r))}function Qv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const C4=h2(0,.5,MC),k4=h2(.5,.95,it);function h2(e,t,n){return r=>r<e?0:r>t?1:n(hl(e,t,r))}function Kv(e,t){e.min=t.min,e.max=t.max}function xn(e,t){Kv(e.x,t.x),Kv(e.y,t.y)}function Xv(e,t,n,r,s){return e-=t,e=Xu(e,1/n,r),s!==void 0&&(e=Xu(e,1/s,r)),e}function E4(e,t=0,n=1,r=.5,s,i=e,a=e){if(lr.test(t)&&(t=parseFloat(t),t=Qe(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Qe(i.min,i.max,r);e===i&&(l-=t),e.min=Xv(e.min,t,n,l,s),e.max=Xv(e.max,t,n,l,s)}function Jv(e,t,[n,r,s],i,a){E4(e,t[n],t[r],t[s],t.scale,i,a)}const D4=["x","scaleX","originX"],T4=["y","scaleY","originY"];function Zv(e,t,n,r){Jv(e.x,t,D4,n?n.x:void 0,r?r.x:void 0),Jv(e.y,t,T4,n?n.y:void 0,r?r.y:void 0)}function eb(e){return e.translate===0&&e.scale===1}function f2(e){return eb(e.x)&&eb(e.y)}function P4(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function m2(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function tb(e){return fn(e.x)/fn(e.y)}class _4{constructor(){this.members=[]}add(t){Ax(this.members,t),t.scheduleRender()}remove(t){if(Mx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nb(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const I4=(e,t)=>e.depth-t.depth;class A4{constructor(){this.children=[],this.isDirty=!1}add(t){Ax(this.children,t),this.isDirty=!0}remove(t){Mx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(I4),this.isDirty=!1,this.children.forEach(t)}}function M4(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Lr(r),e(i-t))};return Fe.read(r,!0),()=>Lr(r)}function O4(e){window.MotionDebug&&window.MotionDebug.record(e)}function R4(e){return e instanceof SVGElement&&e.tagName!=="svg"}function L4(e,t,n){const r=nn(e)?e:ma(e);return r.start(Ix("",r,t,n)),r.animation}const rb=["","X","Y","Z"],F4={visibility:"hidden"},sb=1e3;let $4=0;const Ws={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function p2({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=$4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ws.totalNodes=Ws.resolvedTargetDeltas=Ws.recalculatedProjection=0,this.nodes.forEach(V4),this.nodes.forEach(G4),this.nodes.forEach(Y4),this.nodes.forEach(U4),O4(Ws)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new A4)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Ox),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=R4(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=M4(f,250),iu.hasAnimatedSinceResize&&(iu.hasAnimatedSinceResize=!1,this.nodes.forEach(ab))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Z4,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=d.getProps(),v=!this.targetLayout||!m2(this.targetLayout,p)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const S={..._x(g,"layout"),onPlay:y,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||ab(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Q4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ib);return}this.isUpdating||this.nodes.forEach(H4),this.isUpdating=!1,this.nodes.forEach(q4),this.nodes.forEach(B4),this.nodes.forEach(z4),this.clearAllSnapshots();const l=performance.now();Pt.delta=Cs(0,1e3/60,l-Pt.timestamp),Pt.timestamp=l,Pt.isProcessing=!0,sf.update.process(Pt),sf.preRender.process(Pt),sf.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(W4),this.sharedNodes.forEach(K4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!f2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||Us(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),eL(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return lt();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Kr(l.x,c.offset.x),Kr(l.y,c.offset.y)),l}removeElementScroll(a){const l=lt();xn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){xn(l,a);const{scroll:f}=this.root;f&&(Kr(l.x,-f.offset.x),Kr(l.y,-f.offset.y))}Kr(l.x,d.offset.x),Kr(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=lt();xn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Qi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Us(d.latestValues)&&Qi(c,d.latestValues)}return Us(this.latestValues)&&Qi(c,this.latestValues),c}removeTransform(a){const l=lt();xn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Us(u.latestValues))continue;Np(u.latestValues)&&u.updateSnapshot();const d=lt(),h=u.measurePageBox();xn(d,h),Zv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Us(this.latestValues)&&Zv(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Pt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Lo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=lt(),this.targetWithTransforms=lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),t4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xn(this.target,this.layout.layoutBox),o2(this.target,this.targetDelta)):xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Lo(this.relativeTargetOrigin,this.target,m.target),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ws.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Np(this.parent.latestValues)||a2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;xn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;u4(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=Yi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Yi(),this.projectionDeltaWithTransform=Yi());const g=this.projectionTransform;Ro(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=nb(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Ws.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Yi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=lt(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,y=this.getStack(),b=!y||y.members.length<=1,v=!!(g&&!b&&this.options.crossfade===!0&&!this.path.some(J4));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const j=S/1e3;ob(h.x,a.x,j),ob(h.y,a.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lo(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),X4(this.relativeTarget,this.relativeTargetOrigin,f,j),w&&P4(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=lt()),xn(w,this.relativeTarget)),g&&(this.animationValues=d,N4(d,u,this.latestValues,j,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{iu.hasAnimatedSinceResize=!0,this.currentAnimation=L4(0,sb,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&g2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||lt();const h=fn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=fn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}xn(l,c),Qi(l,d),Ro(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new _4),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<rb.length;d++){const h="rotate"+rb[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return F4;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=su(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=su(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Us(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=nb(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Wu){if(f[g]===void 0)continue;const{correct:y,applyTo:b}=Wu[g],v=u.transform==="none"?f[g]:y(f[g],h);if(b){const w=b.length;for(let S=0;S<w;S++)u[b[S]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=h===this?su(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(ib),this.root.sharedNodes.clear()}}}function B4(e){e.updateLayout()}function z4(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?wn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=fn(f);f.min=r[h].min,f.max=f.min+m}):g2(i,n.layoutBox,r)&&wn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=fn(r[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Yi();Ro(l,r,n.layoutBox);const c=Yi();a?Ro(c,e.applyTransform(s,!0),n.measuredBox):Ro(c,r,n.layoutBox);const u=!f2(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=lt();Lo(p,n.layoutBox,f.layoutBox);const g=lt();Lo(g,r,m.layoutBox),m2(p,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function V4(e){Ws.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function U4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function W4(e){e.clearSnapshot()}function ib(e){e.clearMeasurements()}function H4(e){e.isLayoutDirty=!1}function q4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ab(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function G4(e){e.resolveTargetDelta()}function Y4(e){e.calcProjection()}function Q4(e){e.resetRotation()}function K4(e){e.removeLeadSnapshot()}function ob(e,t,n){e.translate=Qe(t.translate,0,n),e.scale=Qe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function lb(e,t,n,r){e.min=Qe(t.min,n.min,r),e.max=Qe(t.max,n.max,r)}function X4(e,t,n,r){lb(e.x,t.x,n.x,r),lb(e.y,t.y,n.y,r)}function J4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Z4={duration:.45,ease:[.4,0,.1,1]},cb=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),ub=cb("applewebkit/")&&!cb("chrome/")?Math.round:it;function db(e){e.min=ub(e.min),e.max=ub(e.max)}function eL(e){db(e.x),db(e.y)}function g2(e,t,n){return e==="position"||e==="preserve-aspect"&&!jp(tb(t),tb(n),.2)}const tL=p2({attachResizeListener:(e,t)=>Cr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gf={current:void 0},x2=p2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!gf.current){const e=new tL({});e.mount(window),e.setOptions({layoutScroll:!0}),gf.current=e}return gf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),nL={pan:{Feature:y4},drag:{Feature:x4,ProjectionNode:x2,MeasureLayout:u2}},rL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function sL(e){const t=rL.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function kp(e,t,n=1){const[r,s]=sL(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return ZC(a)?parseFloat(a):a}else return pp(s)?kp(s,t,n+1):s}function iL(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!pp(i))return;const a=kp(i,r);a&&s.set(a)});for(const s in t){const i=t[s];if(!pp(i))continue;const a=kp(i,r);a&&(t[s]=a,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const aL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),y2=e=>aL.has(e),oL=e=>Object.keys(e).some(y2),hb=e=>e===Ni||e===be,fb=(e,t)=>parseFloat(e.split(", ")[t]),mb=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return fb(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?fb(i[1],e):0}},lL=new Set(["x","y","z"]),cL=Rl.filter(e=>!lL.has(e));function uL(e){const t=[];return cL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const pa={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:mb(4,13),y:mb(5,14)};pa.translateX=pa.x;pa.translateY=pa.y;const dL=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=pa[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=pa[u](c,i)}),e},hL=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(y2);let i=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Ka(d);const f=t[c];let m;if(qu(f)){const p=f.length,g=f[0]===null?1:0;d=f[g],h=Ka(d);for(let y=g;y<p&&f[y]!==null;y++)m?kx(Ka(f[y])===m):m=Ka(f[y])}else m=Ka(f);if(h!==m)if(hb(h)&&hb(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===be&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(a||(i=uL(e),a=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=dL(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Kd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function fL(e,t,n,r){return oL(t)?hL(e,t,n,r):{target:t,transitionEnd:r}}const mL=(e,t,n,r)=>{const s=iL(e,t,r);return t=s.target,r=s.transitionEnd,fL(e,t,n,r)},Ep={current:null},v2={current:!1};function pL(){if(v2.current=!0,!!Kd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ep.current=e.matches;e.addListener(t),t()}else Ep.current=!1}function gL(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],a=n[s];if(nn(i))e.addValue(s,i),Ku(r)&&r.add(s);else if(nn(a))e.addValue(s,ma(i,{owner:e})),Ku(r)&&r.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,ma(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const pb=new WeakMap,b2=Object.keys(dl),xL=b2.length,gb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yL=xx.length;class vL{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Fe.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=Jd(n),this.isVariantNode=sC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&nn(f)&&(f.set(l[h],!1),Ku(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,pb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),v2.current||pL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ep.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){pb.delete(this.current),this.projection&&this.projection.unmount(),Lr(this.notifyUpdate),Lr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Si.has(t),s=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Fe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let a,l;for(let c=0;c<xL;c++){const u=b2[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=dl[u];f&&(a=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&qi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gb.length;r++){const s=gb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=gL(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<yL;r++){const s=xx[r],i=this.props[s];(ul(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ma(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Cx(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!nn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ox),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class w2 extends vL{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let a=RR(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),a&&(a=s(a))),i){MR(this,r,a);const l=mL(this,r,a,n);n=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:n,...r}}}function bL(e){return window.getComputedStyle(e)}class wL extends w2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Si.has(n)){const r=Px(n);return r&&r.default||0}else{const r=bL(t),s=(lC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return l2(t,n)}build(t,n,r,s){bx(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Nx(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){mC(t,n,r,s)}}class jL extends w2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Si.has(n)){const r=Px(n);return r&&r.default||0}return n=pC.has(n)?n:px(n),t.getAttribute(n)}measureInstanceViewportBox(){return lt()}scrapeMotionValuesFromProps(t,n){return xC(t,n)}build(t,n,r,s){jx(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){gC(t,n,r,s)}mount(t){this.isSVGTag=Sx(t.tagName),super.mount(t)}}const SL=(e,t)=>vx(e)?new jL(t,{enableHardwareAcceleration:!1}):new wL(t,{enableHardwareAcceleration:!0}),NL={layout:{ProjectionNode:x2,MeasureLayout:u2}},CL={...XR,...xO,...nL,...NL},Zr=kM((e,t)=>sO(e,t,CL,SL));function j2(){const e=x.useRef(!1);return mx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function kL(){const e=j2(),[t,n]=x.useState(0),r=x.useCallback(()=>{e.current&&n(t+1)},[t]);return[x.useCallback(()=>Fe.postRender(r),[r]),t]}class EL extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DL({children:e,isPresent:t}){const n=x.useId(),r=x.useRef(null),s=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=s.current;if(t||!r.current||!i||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement(EL,{isPresent:t,childRef:r,sizeRef:s},x.cloneElement(e,{ref:r}))}const xf=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=yC(TL),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;r&&r()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return x.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),x.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(e=x.createElement(DL,{isPresent:n},e)),x.createElement(Qd.Provider,{value:u},e)};function TL(){return new Map}function PL(e){return x.useEffect(()=>()=>e(),[])}const Hs=e=>e.key||"";function _L(e,t){e.forEach(n=>{const r=Hs(n);t.set(r,n)})}function IL(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const Rx=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=x.useContext(yx).forceRender||kL()[0],c=j2(),u=IL(e);let d=u;const h=x.useRef(new Map).current,f=x.useRef(d),m=x.useRef(new Map).current,p=x.useRef(!0);if(mx(()=>{p.current=!1,_L(u,m),f.current=d}),PL(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return x.createElement(x.Fragment,null,d.map(v=>x.createElement(xf,{key:Hs(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},v)));d=[...d];const g=f.current.map(Hs),y=u.map(Hs),b=g.length;for(let v=0;v<b;v++){const w=g[v];y.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((v,w)=>{if(y.indexOf(w)!==-1)return;const S=m.get(w);if(!S)return;const j=g.indexOf(w);let k=v;if(!k){const N=()=>{h.delete(w);const C=Array.from(m.keys()).filter(E=>!y.includes(E));if(C.forEach(E=>m.delete(E)),f.current=u.filter(E=>{const T=Hs(E);return T===w||C.includes(T)}),!h.size){if(c.current===!1)return;l(),r&&r()}};k=x.createElement(xf,{key:Hs(S),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:i,mode:a},S),h.set(w,k)}d.splice(j,0,k)}),d=d.map(v=>{const w=v.key;return h.has(w)?v:x.createElement(xf,{key:Hs(v),isPresent:!0,presenceAffectsLayout:i,mode:a},v)}),x.createElement(x.Fragment,null,h.size?d:d.map(v=>x.cloneElement(v)))},AL="/assets/asp-logo-Cq2CSw-i.jpg",ML="/crane-icon.svg",OL=[{label:"Dashboard",icon:o.jsx(fA,{size:18}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:o.jsx(cA,{size:18}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:o.jsx(hA,{size:18}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:o.jsx($N,{size:18}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:o.jsx(cx,{size:18}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:o.jsx(Yn,{size:18}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:o.jsx(zN,{size:18}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:o.jsx(FN,{size:18}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:o.jsx(tn,{size:18}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:o.jsx(ha,{size:18}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:o.jsx(Wt,{size:18}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:o.jsx(xA,{size:18}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Template Builder",icon:o.jsx(Wt,{size:18}),href:"/admin/templates",roles:["admin","sales_agent"]}];function RL({isMobileOpen:e=!1,onMobileClose:t,isCollapsed:n,onCollapseToggle:r}){const{user:s}=We(),i=hr(),[a,l]=x.useState(!1),c=n!==void 0,u=c?n:a;if(x.useEffect(()=>{const y=()=>{window.innerWidth<1024&&l(!0)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),!s)return null;const d=OL.filter(y=>y.roles.includes(s.role)),h=(y,b)=>b?i.pathname===y:y==="/dashboard"&&i.pathname==="/"?!0:i.pathname.startsWith(y),f=()=>{c&&r?r(!u):l(y=>!y)},m=o.jsx(Rx,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(Zr.div,{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),o.jsx(Zr.aside,{className:"fixed inset-y-0 left-0 z-50 w-72 max-w-[85%] bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-2xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},role:"navigation","aria-label":"Mobile navigation",children:g(!1)})]})}),p=o.jsx("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${u?"w-16":"w-72"} bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-xl`,role:"navigation","aria-label":"Main navigation",children:g(u)});return o.jsxs(o.Fragment,{children:[m,p]});function g(y){return o.jsxs("div",{className:"flex flex-col h-full text-white",children:[o.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-white/10",children:[o.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors duration-200 focus:outline-none","aria-label":y?"Expand sidebar":"Collapse sidebar",children:o.jsx(UN,{className:"h-6 w-6 text-white"})}),o.jsxs(rr,{to:"/dashboard",className:"flex items-center group","aria-label":"Go to dashboard",children:[o.jsx("img",{src:AL,alt:"ASP Cranes",className:`object-contain transition-all duration-300 group-hover:scale-105 ${y?"h-8 w-8":"h-10 w-auto"}`,onError:b=>{b.currentTarget.src=ML,b.currentTarget.onerror=null}}),!y&&o.jsx(Zr.span,{className:"ml-3 text-xl font-bold bg-gradient-to-r from-white to-brand-gold bg-clip-text text-transparent",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"ASP CRM"})]})]}),o.jsx("nav",{className:"flex-1 py-6",role:"navigation",children:o.jsx("ul",{className:"space-y-1 px-3",role:"list",children:d.map(b=>{const v=h(b.href,b.end);return o.jsx("li",{role:"listitem",children:o.jsxs(rr,{to:b.href,className:`group flex items-center rounded-lg transition-all duration-200 ${y?"justify-center p-3":"p-3"} ${v?"bg-brand-gold text-brand-blue font-semibold shadow-lg scale-105":"text-white/90 hover:bg-white/10 hover:text-white hover:scale-[1.02]"}`,onClick:t,"aria-current":v?"page":void 0,children:[o.jsx("span",{className:`flex-shrink-0 transition-transform group-hover:scale-110 ${v?"text-brand-blue":""}`,children:b.icon}),!y&&o.jsx(Zr.span,{className:"ml-3 text-sm font-medium",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05},children:b.label}),y&&o.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50 whitespace-nowrap",children:[b.label,o.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},b.href)})})}),o.jsx("div",{className:"p-4 border-t border-white/10",children:o.jsxs("div",{className:`flex items-center ${y?"justify-center":"space-x-3"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:(s==null?void 0:s.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(s==null?void 0:s.name)||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-brand-gold/50 hover:border-brand-gold transition-colors"})}),!y&&s&&o.jsxs(Zr.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[o.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.name||"User"}),o.jsx("p",{className:"text-xs text-white/70 truncate capitalize",children:s.role?s.role.replace("_"," "):"User"}),o.jsxs("button",{onClick:()=>{t&&t();const b=new CustomEvent("sidebar-logout");document.dispatchEvent(b)},className:"mt-2 flex items-center text-xs text-white/80 hover:text-brand-gold px-2 py-1 rounded-md hover:bg-white/10 transition-all duration-200","aria-label":"Logout",children:[o.jsx(VN,{className:"h-3 w-3 mr-2"}),"Logout"]})]})]})})]})}}const ne=async()=>null,ht=async()=>[],Dp=async()=>({success:!0}),Tp=async()=>({success:!1,error:"Service disabled in production"}),kn=()=>{},LL=kn,FL=kn,$L=kn,BL=kn,zL=kn,VL=kn,UL=()=>!1,WL=kn,HL=Tp,qL=Dp,GL=ne,YL=ne,QL=ne,KL=ne,XL=ne,JL=ne,Pp=ne,ZL=ne,S2=ht,e3=ne,N2=ne,t3=ne,n3=ne,r3=ne,s3=ht,i3=ne,a3=ne,o3=ne,l3=ne,C2=ne,c3=ne,u3=ne,d3=ht,h3=ne,k2=ht,E2=ne,f3=ht,m3=ht,p3=ne,g3=ne,x3=ne,y3=ht,v3=ne,b3=ht,w3=ne,j3=ne,S3=ne,N3=ne,C3=ht,k3=ne,E3=ne,D3=ht,T3=ne,P3=ne,_3=ne,I3=ne,A3=ht,M3=ne,O3=ne,R3=ht,L3=ht,F3=ne,$3=ne,B3=ne,z3=ne,V3=ne,D2=ne,T2=ne,P2=ne,_2=ne,I2=ne,A2=ne,M2=ne,U3=ne,O2=ht,R2=ne,W3=ne,H3=ne,q3=kn,L2=ht,G3=ne,Y3=ne,Q3=ne,F2=ht,$2=ne,K3=ne,X3=ne,B2=ht,z2=ne,V2=ne,U2=ne,W2=ne,J3=ne,H2=(e,t)=>(t==null?void 0:t.content)||"",Z3=()=>[],au=()=>({}),e5=e=>`$${e||0}`,t5=e=>e?new Date(e).toLocaleDateString():"",n5=()=>!0,r5=()=>!0,s5=e=>e||{},i5=e=>(e==null?void 0:e.id)||"",ou={get:ne,post:ne,put:ne,delete:ne,create:ne,update:ne,list:ht},a5={},o5={},l5={},c5={},u5={},d5={},h5={},f5={},m5={},p5={},g5={},x5={},y5={signIn:Tp,signOutUser:Dp,getCurrentUser:ne,create:ne,read:ne,update:ne,delete:ne,list:ht,createDevToken:kn,initAuthDebug:kn,logAuthState:kn,noop:kn,asyncNull:ne,asyncEmptyArray:ht,asyncSuccess:Dp,asyncError:Tp},xb=Object.freeze(Object.defineProperty({__proto__:null,Activity:a5,Customer:u5,Deal:h5,Equipment:f5,Job:c5,Lead:l5,Notification:x5,Quotation:d5,Service:p5,SiteAssessment:g5,Template:m5,User:o5,checkAuthStatus:zL,checkForDevTokens:UL,cleanupDevArtifacts:VL,createActivity:G3,createCustomer:x3,createDeal:I3,createDevToken:LL,createEquipment:$3,createJob:u3,createLead:r3,createNotification:W3,createQuotation:N3,createService:z2,createSiteAssessment:$2,createTemplate:ZL,createUser:KL,debugAuth:BL,default:y5,deleteActivity:Q3,deleteContact:w3,deleteCustomer:v3,deleteDeal:M3,deleteEquipment:B3,deleteJob:h3,deleteLead:i3,deleteNotification:H3,deleteQuotation:k3,deleteService:U2,deleteSiteAssessment:X3,deleteTemplate:e3,deleteUser:XL,extractDataFromApiResponse:s5,formatCurrency:e5,formatDate:t5,getAdditionalParamsConfig:I2,getAllEquipment:f3,getAllOperators:m3,getAvailablePlaceholders:Z3,getConfig:z3,getContactsByCustomer:b3,getCurrentUser:GL,getCustomer:p3,getCustomerIdentifier:i5,getCustomers:y3,getDeal:T3,getDealById:O3,getDeals:A3,getDefaultTemplateConfig:M2,getEquipment:R3,getEquipmentByCategory:L3,getEquipmentById:E2,getHeaders:au,getJob:l3,getJobById:C2,getJobs:d3,getJobsByOperator:k2,getLead:t3,getLeads:s3,getQuotation:j3,getQuotationById:E3,getQuotationConfig:D2,getQuotations:C3,getQuotationsForLead:D3,getRecentActivities:L2,getResourceRatesConfig:P2,getServices:B2,getSiteAssessments:F2,getTemplate:JL,getTemplateById:N2,getTemplates:S2,getUserById:YL,getUserNotifications:O2,initAuthDebug:FL,jobApiClient:ou,logAuthState:$L,markNotificationAsRead:R2,mergeQuotationWithTemplate:H2,mergeTemplate:J3,monitorOperation:q3,removeDevTokens:WL,signIn:HL,signOutUser:qL,toggleServiceStatus:W2,updateActivity:Y3,updateAdditionalParamsConfig:A2,updateConfig:V3,updateCustomer:g3,updateDeal:P3,updateDealStage:_3,updateDefaultTemplateConfig:U3,updateEquipment:F3,updateJob:c3,updateLead:n3,updateLeadAssignment:o3,updateLeadStatus:a3,updateQuotation:S3,updateQuotationConfig:T2,updateResourceRatesConfig:_2,updateService:V2,updateSiteAssessment:K3,updateTemplate:Pp,updateUser:QL,validateEmail:n5,validatePhone:r5},Symbol.toStringTag,{value:"Module"}));function q2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=q2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function G2(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=q2(e))&&(r&&(r+=" "),r+=t);return r}const yb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,vb=G2,Pa=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return vb(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=yb(d)||yb(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[g,y]=p;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...u,h,f]:u},[]);return vb(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},v5=Pa("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function fl({className:e,variant:t,size:n,...r}){return o.jsx("div",{className:v5({variant:t,size:n,className:e}),...r})}const Y2=x.memo(({notification:e,onClick:t})=>o.jsx("button",{onClick:()=>t(e),className:`w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors ${e.read?"":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-brand-blue"}`,"aria-describedby":`notification-${e.id}`,children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${e.read?"bg-gray-300":"bg-brand-blue"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),e.message&&o.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt||Date.now()).toLocaleDateString()})]})]})}));Y2.displayName="NotificationItem";const b5=x.memo(function({onMobileMenuClick:t}){const{user:n,logout:r}=We(),s=Rn(),[i,a]=x.useState([]),[l,c]=x.useState(!1),[u,d]=x.useState(!1);x.useEffect(()=>{n&&h()},[n]),x.useEffect(()=>{const g=y=>{y.target.closest("[data-dropdown]")||(c(!1),d(!1))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=async()=>{if(n)try{const g=await O2(n.id);a(g)}catch(g){console.error("Failed to fetch notifications:",g)}},f=async()=>{try{await r(),s("/login")}catch(g){console.error("Logout error:",g),s("/login")}},m=async g=>{if(!g.read)try{await R2(g.id),await h()}catch(y){console.error("Failed to mark notification as read:",y)}g.link&&s(g.link),c(!1)},p=i.filter(g=>!g.read).length;return o.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm border-b border-gray-200/60 h-16 flex items-center justify-between px-4 lg:px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[t&&o.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Toggle navigation menu",children:o.jsx(UN,{className:"h-5 w-5 text-gray-700"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-brand-blue to-brand-blue/80 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:"ASP CRM"}),o.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Crane Management System"})]})]})]}),o.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search projects, customers, equipment...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all","aria-label":"Search"})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Quick settings",children:o.jsx(ha,{className:"h-5 w-5 text-gray-600"})}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":`Notifications ${p>0?`(${p} unread)`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[o.jsx(ev,{className:"h-5 w-5 text-gray-600"}),p>0&&o.jsx(fl,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center animate-pulse",children:p>99?"99+":p})]}),l&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[p," unread"]})]})}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(ev,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):o.jsx("div",{className:"p-2 space-y-1",children:i.map(g=>o.jsx(Y2,{notification:g,onClick:m},g.id))})}),i.length>0&&o.jsx("div",{className:"p-3 border-t border-gray-100",children:o.jsx("button",{className:"w-full text-sm text-brand-blue hover:text-brand-blue/80 font-medium",children:"View all notifications"})})]})]}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"User menu","aria-expanded":u,"aria-haspopup":"true",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-200 hover:border-brand-blue/30 transition-colors"}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-400 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"hidden sm:block text-left",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 leading-tight",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 capitalize leading-tight",children:n!=null&&n.role?n.role.replace("_"," "):"User"})]})]}),u&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-3 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-10 w-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:(n==null?void 0:n.email)||"user@example.com"})]})]})}),o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(mi,{className:"h-4 w-4 mr-3 text-gray-400"}),"View Profile"]}),o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(ha,{className:"h-4 w-4 mr-3 text-gray-400"}),"Account Settings"]})]}),o.jsx("div",{className:"border-t border-gray-100 py-2",children:o.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[o.jsx(VN,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]})]})]})]})}),w5=x.memo(function({requiredRole:t,children:n}){const{isAuthenticated:r,user:s,logout:i}=We(),a=Rn(),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[h,f]=x.useState(!1),m=x.useRef(!1);if(x.useEffect(()=>{const g=()=>{i().then(()=>{a("/login")}).catch(y=>{console.error("Logout error:",y),a("/login")})};return document.addEventListener("sidebar-logout",g),()=>{document.removeEventListener("sidebar-logout",g)}},[i,a]),x.useEffect(()=>{m.current},[a,r,s,t]),x.useEffect(()=>{const g=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),l)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-brand-gold rounded-full animate-spin",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Application"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please wait..."})]})});if(!r)return o.jsx(Un,{to:"/login"});if(t&&(s==null?void 0:s.role)!==t)return o.jsx(Un,{to:"/dashboard"});const p=()=>{d(!u)};return o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 overflow-hidden",children:[o.jsx(RL,{isMobileOpen:u,onMobileClose:()=>d(!1),isCollapsed:h,onCollapseToggle:f}),o.jsxs("div",{className:`flex flex-col flex-1 overflow-hidden transition-all duration-300 ${h?"lg:ml-16":"lg:ml-72"}`,children:[o.jsx(b5,{onMobileMenuClick:p}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-transparent",children:o.jsx("div",{className:"min-h-full",children:n||o.jsx(MN,{})})})]})]})});let yf=null;const ga=()=>{if(yf!==null)return yf;const e={viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return yf=n,n},Ju=()=>!ga(),j5=(e=!1)=>{const t={"Content-Type":"application/json"};if(e)return t["x-bypass-auth"]="development-only-123",console.log(" Development bypass header added, skipping JWT token"),t;const n=localStorage.getItem("auth-token")||localStorage.getItem("jwt-token")||localStorage.getItem("token");return n?(t.Authorization=`Bearer ${n}`,Ju()&&console.log(" Auth token found and added to headers")):Ju()&&console.warn(" No auth token found in localStorage - API requests may fail with 403"),t},S5=e=>{ga()&&e()},N5=(e,...t)=>{Ju()&&console.log(`[DEBUG] ${e}`,...t)},bb=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},vc=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},C5=()=>{if(ga()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){vc("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),bb("Removed development authentication token from storage")}catch(t){vc("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(vc("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&bb("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&vc("SECURITY RISK: Development flags found in production build!")}},k5=()=>{if(ga()){C5(),console.log("%c PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{if(typeof window<"u"&&ga()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};S5(()=>{k5()});const $e=(e=!0)=>{e=!0;const n=j5(e);if(ga()&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),Ju()){const r=!!n.Authorization;N5(`API headers prepared: Auth token ${r?"present":"missing"}${e?", dev bypass enabled":""}`)}return n};async function wb(e,t){const r=await fetch(`http://103.224.243.242:3001/api/leads/${e}/status`,{method:"PATCH",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify({status:t}),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead status");const s=await r.json();return s.data||s}async function jb(e,t,n){const s=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}/assign`,{method:"PATCH",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify({salesAgentId:t,salesAgentName:n}),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead assignment");const i=await s.json();return i.data||i}async function E5(e,t){const r=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}`,{method:"PATCH",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead");const s=await r.json();return s.data||s}async function D5(e){const n=await fetch("http://103.224.243.242:3001/api/leads",{method:"POST",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create lead");const r=await n.json();return r.data||r}async function Bl(){const t=await fetch("http://103.224.243.242:3001/api/leads",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch leads");const n=await t.json();return n.data||n}const Sb={getJobsByOperator:T5,getEquipmentById:K2,getAllEquipment:X2,getJobs:nh,getAllOperators:zl,createJob:Q2,getJobEquipment:P5,getJobOperators:_5};async function Q2(e){const n=await fetch("http://103.224.243.242:3001/api/jobs",{method:"POST",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create job");return n.json()}async function T5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs?operatorId=${encodeURIComponent(e)}`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch jobs by operator");return await n.json()}async function K2(e){const n=await fetch(`http://103.224.243.242:3001/api/equipment/${encodeURIComponent(e)}`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch equipment by id");return await n.json()}async function X2(){const t=await fetch("http://103.224.243.242:3001/api/equipment",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch equipment");return await t.json()}async function nh(){const t=await fetch("http://103.224.243.242:3001/api/jobs",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch jobs");return await t.json()}async function zl(){const t=await fetch("http://103.224.243.242:3001/api/operators",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch operators");return await t.json()}async function P5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/equipment`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job equipment");return await n.json()}async function _5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/operators`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job operators");return await n.json()}async function I5(e){const n=`http://103.224.243.242:3001/api/equipment?category=${encodeURIComponent(e)}`;console.log(" Fetching equipment by category:",e),console.log(" API URL:",n);const r=await fetch(n,{method:"GET",headers:$e(!0),credentials:"include"});if(console.log(" Response status:",r.status),console.log(" Response ok:",r.ok),!r.ok)throw console.error(" Failed to fetch equipment:",r.status,r.statusText),new Error("Failed to fetch equipment by category");const s=await r.json();return console.log(" Equipment data received:",s),s&&Array.isArray(s.data)?s.data:s}async function Lx(){return[{id:"1",equipmentId:"EQ0001",name:"Demo Crane",category:"mobile_crane",manufacturingDate:"2022-01",registrationDate:"2022-02",maxLiftingCapacity:50,unladenWeight:20,baseRates:{micro:100,small:200,monthly:3e3,yearly:35e3},runningCostPerKm:10,description:"Sample equipment",status:"available",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),runningCost:0,_source:"client",_mockFlag:!0}]}async function rh(){const t=await fetch("http://103.224.243.242:3001/api/deals",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch deals");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function xa(e){const n=await fetch(`http://103.224.243.242:3001/api/deals/${e}`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch deal by ID");const r=await n.json();return r&&r.data?r.data:r}async function A5(e){const n=await fetch("http://103.224.243.242:3001/api/deals",{method:"POST",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create deal");return await n.json()}async function J2(e,t){const r=await fetch(`http://103.224.243.242:3001/api/deals/${e}/stage`,{method:"PATCH",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify({stage:t}),credentials:"include"});if(!r.ok)throw new Error("Failed to update deal stage");const s=await r.json();return s.data||s}const Ve=e=>isNaN(e)||e==null?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),M5=Pa("relative bg-white/80 backdrop-blur-sm border border-gray-200/60 transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5",{variants:{variant:{default:"rounded-xl shadow-sm",bordered:"rounded-xl border-2",flat:"rounded-lg",glass:"rounded-xl bg-white/60 backdrop-blur-md border-white/20 shadow-xl",gradient:"rounded-xl bg-gradient-to-br from-white to-gray-50/50 shadow-md"},padding:{none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-5",lg:"p-5 sm:p-6",xl:"p-6 sm:p-8"},size:{default:"",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"w-full"}},defaultVariants:{variant:"default",padding:"md",size:"default"}}),se=x.memo(te.forwardRef(({className:e="",variant:t,padding:n,size:r,as:s="div",children:i,hover:a=!0,loading:l=!1,...c},u)=>{const d=M5({variant:t,padding:n,size:r}),h=a?"hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5":"",f=l?"animate-pulse":"";return o.jsxs(s,{className:`${d} ${h} ${f} ${e}`,ref:u,role:s==="div"?"article":void 0,...c,children:[l&&o.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin"})}),i]})}));se.displayName="Card";const ye=x.memo(te.forwardRef(({className:e="",children:t,...n},r)=>o.jsx("div",{ref:r,className:`pb-4 border-b border-gray-200/60 ${e}`,...n,children:t})));ye.displayName="CardHeader";const ve=x.memo(te.forwardRef(({className:e="",gradient:t=!1,level:n=2,children:r,...s},i)=>{const a=`h${n}`,l=t?"bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent":"";return o.jsx(a,{ref:i,className:`text-lg font-semibold text-gray-900 leading-tight ${l} ${e}`,...s,children:r})}));ve.displayName="CardTitle";const O5=x.memo(te.forwardRef(({className:e="",children:t,...n},r)=>o.jsx("p",{ref:r,className:`text-sm text-gray-600 leading-relaxed ${e}`,...n,children:t})));O5.displayName="CardDescription";const ae=x.memo(te.forwardRef(({className:e="",children:t,...n},r)=>o.jsx("div",{ref:r,className:`pt-4 ${e}`,...n,children:t})));ae.displayName="CardContent";const R5=x.memo(te.forwardRef(({className:e="",children:t,...n},r)=>o.jsx("div",{ref:r,className:`pt-4 mt-4 border-t border-gray-200/60 ${e}`,...n,children:t})));R5.displayName="CardFooter";const L5=Pa("group relative overflow-hidden",{variants:{variant:{default:"bg-white/90 backdrop-blur-sm",primary:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",secondary:"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200",accent:"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",warning:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200",error:"bg-gradient-to-br from-red-50 to-rose-50 border-red-200",glass:"bg-white/60 backdrop-blur-md border-white/20"},size:{sm:"min-h-[100px]",default:"min-h-[120px]",lg:"min-h-[140px]"}},defaultVariants:{variant:"default",size:"default"}}),Vt=x.memo(te.forwardRef(({className:e="",variant:t,size:n,title:r,value:s,icon:i,trend:a,subtitle:l,footer:c,loading:u=!1,gradient:d=!1,...h},f)=>{const p={primary:"bg-gradient-to-br from-blue-500 to-indigo-600",secondary:"bg-gradient-to-br from-gray-500 to-slate-600",accent:"bg-gradient-to-br from-amber-500 to-yellow-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-orange-500 to-red-600",error:"bg-gradient-to-br from-red-500 to-rose-600",glass:"bg-gradient-to-br from-brand-blue to-brand-blue/80",default:"bg-gradient-to-br from-brand-blue to-brand-blue/80"}[t||"default"],g=()=>a?a.value>0?o.jsx(mp,{className:"w-3 h-3"}):a.value<0?o.jsx(CA,{className:"w-3 h-3"}):o.jsx(WN,{className:"w-3 h-3"}):null,y=()=>a?a.isPositive?"text-green-600":"text-red-600":"";return o.jsxs(se,{ref:f,className:`${L5({variant:t,size:n})} ${e}`,variant:d?"gradient":"default",padding:"lg",hover:!u,loading:u,...h,children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-full transform translate-x-8 -translate-y-8 group-hover:scale-110 transition-transform duration-300"}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1 leading-tight",children:r}),l&&o.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:l})]}),i&&o.jsx("div",{className:`p-2.5 rounded-xl ${p} shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300`,children:o.jsx("div",{className:"text-white w-5 h-5 flex items-center justify-center",children:i})})]}),o.jsx("div",{className:"flex-1 flex items-center",children:o.jsx("div",{className:"text-2xl font-bold text-gray-900 group-hover:text-brand-blue transition-colors duration-300",children:u?o.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}):s})}),a&&o.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[o.jsxs("div",{className:`flex items-center space-x-1 ${y()}`,children:[g(),o.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.value),"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),c&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/60",children:c})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-blue/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})}));Vt.displayName="StatCard";const F5=x.memo(()=>o.jsxs(se,{className:"min-h-[120px] animate-pulse",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"})]}),o.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}));F5.displayName="StatCardSkeleton";const $5=e=>{switch(e){case"lead":return o.jsx(mi,{className:"h-4 w-4"});case"deal":return o.jsx(uA,{className:"h-4 w-4"});case"job":return o.jsx(Wt,{className:"h-4 w-4"});case"equipment":return o.jsx(Ht,{className:"h-4 w-4"});case"user":return o.jsx(mi,{className:"h-4 w-4"});default:return o.jsx(wi,{className:"h-4 w-4"})}},B5=e=>{switch(e){case"success":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"info":default:return"text-blue-600 bg-blue-50"}},z5=e=>{const n=new Date().getTime()-e.getTime(),r=Math.floor(n/(1e3*60)),s=Math.floor(r/60),i=Math.floor(s/24);return r<1?"Just now":r<60?`${r}m ago`:s<24?`${s}h ago`:i<7?`${i}d ago`:e.toLocaleDateString()},V5=[{id:"1",type:"lead",title:"New lead created",description:"John Doe submitted a crane rental inquiry",timestamp:new Date(Date.now()-1e3*60*15),status:"info",user:"System"},{id:"2",type:"deal",title:"Deal closed",description:"Construction project deal worth 2,50,000 closed successfully",timestamp:new Date(Date.now()-1e3*60*60*2),status:"success",user:"Sales Agent"},{id:"3",type:"job",title:"Job scheduled",description:"Crane deployment for Site A scheduled for tomorrow",timestamp:new Date(Date.now()-1e3*60*60*4),status:"info",user:"Operations Manager"},{id:"4",type:"equipment",title:"Maintenance alert",description:"Crane CR-001 requires scheduled maintenance",timestamp:new Date(Date.now()-1e3*60*60*6),status:"warning",user:"System"},{id:"5",type:"user",title:"New user registered",description:"New operator account created for Mike Johnson",timestamp:new Date(Date.now()-1e3*60*60*24),status:"info",user:"Admin"}];function U5({activities:e,className:t}){const[n,r]=x.useState([]),[s,i]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{if(e)r(e);else{const l=await L2(5);r(l)}}catch(l){console.error("Error fetching activities:",l),r(V5)}finally{i(!1)}})()},[e]),s?o.jsxs(se,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(Qn,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),o.jsx("p",{children:"Loading activities..."})]})})]}):o.jsxs(se,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(Qn,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(wi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"No recent activities"})]}):n.map(a=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${B5(a.status)}`,children:$5(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:z5(a.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),a.user&&o.jsx("div",{className:"flex items-center mt-2",children:o.jsx(fl,{variant:"secondary",className:"text-xs",children:a.user})})]})]},a.id))}),n.length>0&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all activities "})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vl(e){return e+.5|0}const ss=(e,t,n)=>Math.max(Math.min(e,n),t);function vo(e){return ss(Vl(e*2.55),0,255)}function vs(e){return ss(Vl(e*255),0,255)}function jr(e){return ss(Vl(e/2.55)/100,0,1)}function Nb(e){return ss(Vl(e*100),0,100)}const yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_p=[..."0123456789ABCDEF"],W5=e=>_p[e&15],H5=e=>_p[(e&240)>>4]+_p[e&15],bc=e=>(e&240)>>4===(e&15),q5=e=>bc(e.r)&&bc(e.g)&&bc(e.b)&&bc(e.a);function G5(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&yn[e[1]]*17,g:255&yn[e[2]]*17,b:255&yn[e[3]]*17,a:t===5?yn[e[4]]*17:255}:(t===7||t===9)&&(n={r:yn[e[1]]<<4|yn[e[2]],g:yn[e[3]]<<4|yn[e[4]],b:yn[e[5]]<<4|yn[e[6]],a:t===9?yn[e[7]]<<4|yn[e[8]]:255})),n}const Y5=(e,t)=>e<255?t(e):"";function Q5(e){var t=q5(e)?W5:H5;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Y5(e.a,t):void 0}const K5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Z2(e,t,n){const r=t*Math.min(n,1-n),s=(i,a=(i+e/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function X5(e,t,n){const r=(s,i=(s+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function J5(e,t,n){const r=Z2(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function Z5(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function Fx(e){const n=e.r/255,r=e.g/255,s=e.b/255,i=Math.max(n,r,s),a=Math.min(n,r,s),l=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=l>.5?d/(2-i-a):d/(i+a),c=Z5(n,r,s,d,i),c=c*60+.5),[c|0,u||0,l]}function $x(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(vs)}function Bx(e,t,n){return $x(Z2,e,t,n)}function eF(e,t,n){return $x(J5,e,t,n)}function tF(e,t,n){return $x(X5,e,t,n)}function ek(e){return(e%360+360)%360}function nF(e){const t=K5.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?vo(+t[5]):vs(+t[5]));const s=ek(+t[2]),i=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=eF(s,i,a):t[1]==="hsv"?r=tF(s,i,a):r=Bx(s,i,a),{r:r[0],g:r[1],b:r[2],a:n}}function rF(e,t){var n=Fx(e);n[0]=ek(n[0]+t),n=Bx(n),e.r=n[0],e.g=n[1],e.b=n[2]}function sF(e){if(!e)return;const t=Fx(e),n=t[0],r=Nb(t[1]),s=Nb(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${jr(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Cb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function iF(){const e={},t=Object.keys(kb),n=Object.keys(Cb);let r,s,i,a,l;for(r=0;r<t.length;r++){for(a=l=t[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,Cb[i]);i=parseInt(kb[a],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let wc;function aF(e){wc||(wc=iF(),wc.transparent=[0,0,0,0]);const t=wc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const oF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lF(e){const t=oF.exec(e);let n=255,r,s,i;if(t){if(t[7]!==r){const a=+t[7];n=t[8]?vo(a):ss(a*255,0,255)}return r=+t[1],s=+t[3],i=+t[5],r=255&(t[2]?vo(r):ss(r,0,255)),s=255&(t[4]?vo(s):ss(s,0,255)),i=255&(t[6]?vo(i):ss(i,0,255)),{r,g:s,b:i,a:n}}}function cF(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${jr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const vf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Di=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function uF(e,t,n){const r=Di(jr(e.r)),s=Di(jr(e.g)),i=Di(jr(e.b));return{r:vs(vf(r+n*(Di(jr(t.r))-r))),g:vs(vf(s+n*(Di(jr(t.g))-s))),b:vs(vf(i+n*(Di(jr(t.b))-i))),a:e.a+n*(t.a-e.a)}}function jc(e,t,n){if(e){let r=Fx(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=Bx(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function tk(e,t){return e&&Object.assign(t||{},e)}function Eb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=vs(e[3]))):(t=tk(e,{r:0,g:0,b:0,a:1}),t.a=vs(t.a)),t}function dF(e){return e.charAt(0)==="r"?lF(e):nF(e)}class ml{constructor(t){if(t instanceof ml)return t;const n=typeof t;let r;n==="object"?r=Eb(t):n==="string"&&(r=G5(t)||aF(t)||dF(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=tk(this._rgb);return t&&(t.a=jr(t.a)),t}set rgb(t){this._rgb=Eb(t)}rgbString(){return this._valid?cF(this._rgb):void 0}hexString(){return this._valid?Q5(this._rgb):void 0}hslString(){return this._valid?sF(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,c=r.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=uF(this._rgb,t._rgb,n)),this}clone(){return new ml(this.rgb)}alpha(t){return this._rgb.a=vs(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Vl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return jc(this._rgb,2,t),this}darken(t){return jc(this._rgb,2,-t),this}saturate(t){return jc(this._rgb,1,t),this}desaturate(t){return jc(this._rgb,1,-t),this}rotate(t){return rF(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function pr(){}const hF=(()=>{let e=0;return()=>e++})();function _e(e){return e==null}function ut(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ee(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Lt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Zn(e,t){return Lt(e)?e:t}function Ne(e,t){return typeof e>"u"?t:e}const fF=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,nk=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ze(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Me(e,t,n,r){let s,i,a;if(ut(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(Ee(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function Zu(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function ed(e){if(ut(e))return e.map(ed);if(Ee(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=ed(e[n[s]]);return t}return e}function rk(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function mF(e,t,n,r){if(!rk(e))return;const s=t[e],i=n[e];Ee(s)&&Ee(i)?pl(s,i,r):t[e]=ed(i)}function pl(e,t,n){const r=ut(t)?t:[t],s=r.length;if(!Ee(e))return e;n=n||{};const i=n.merger||mF;let a;for(let l=0;l<s;++l){if(a=r[l],!Ee(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],e,a,n)}return e}function Fo(e,t){return pl(e,t,{merger:pF})}function pF(e,t,n){if(!rk(e))return;const r=t[e],s=n[e];Ee(r)&&Ee(s)?Fo(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ed(s))}const Db={"":e=>e,x:e=>e.x,y:e=>e.y};function gF(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function xF(e){const t=gF(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function pi(e,t){return(Db[t]||(Db[t]=xF(t)))(e)}function zx(e){return e.charAt(0).toUpperCase()+e.slice(1)}const gl=e=>typeof e<"u",Es=e=>typeof e=="function",Tb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function yF(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Oe=Math.PI,Xe=2*Oe,vF=Xe+Oe,td=Number.POSITIVE_INFINITY,bF=Oe/180,xt=Oe/2,Rs=Oe/4,Pb=Oe*2/3,sk=Math.log10,cr=Math.sign;function $o(e,t,n){return Math.abs(e-t)<n}function _b(e){const t=Math.round(e);e=$o(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(sk(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function wF(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,i)=>s-i).pop(),t}function jF(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function xl(e){return!jF(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function SF(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function NF(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function kr(e){return e*(Oe/180)}function CF(e){return e*(180/Oe)}function Ib(e){if(!Lt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function ik(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Oe&&(i+=Xe),{angle:i,distance:s}}function Ip(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function kF(e,t){return(e-t+vF)%Xe-Oe}function sn(e){return(e%Xe+Xe)%Xe}function yl(e,t,n,r){const s=sn(e),i=sn(t),a=sn(n),l=sn(i-s),c=sn(a-s),u=sn(s-i),d=sn(s-a);return s===i||s===a||r&&i===a||l>c&&u<d}function At(e,t,n){return Math.max(t,Math.min(n,e))}function EF(e){return At(e,-32768,32767)}function Er(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Vx(e,t,n){n=n||(a=>e[a]<t);let r=e.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ti=(e,t,n,r)=>Vx(e,n,r?s=>{const i=e[s][t];return i<n||i===n&&e[s+1][t]===n}:s=>e[s][t]<n),DF=(e,t,n)=>Vx(e,n,r=>e[r][t]>=n);function TF(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const ak=["push","pop","shift","splice","unshift"];function PF(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ak.forEach(n=>{const r="_onData"+zx(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),a}})})}function Ab(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(ak.forEach(i=>{delete e[i]}),delete e._chartjs)}function ok(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const lk=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function ck(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,lk.call(window,()=>{r=!1,e.apply(t,n)}))}}function _F(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const Ux=e=>e==="start"?"left":e==="end"?"right":"center",_t=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,IF=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function AF(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:a,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:h,max:f,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(s=Math.min(ti(c,d,h).lo,n?r:ti(t,d,a.getPixelForValue(h)).lo),u){const g=c.slice(0,s+1).reverse().findIndex(y=>!_e(y[l.axis]));s-=Math.max(0,g)}s=At(s,0,r-1)}if(p){let g=Math.max(ti(c,a.axis,f,!0).hi+1,n?0:ti(t,d,a.getPixelForValue(f),!0).hi+1);if(u){const y=c.slice(g-1).findIndex(b=>!_e(b[l.axis]));g+=Math.max(0,y)}i=At(g,s,r)-s}else i=r-s}return{start:s,count:i}}function MF(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Sc=e=>e===0||e===1,Mb=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Xe/n)),Ob=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Xe/n)+1,Bo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xt)+1,easeOutSine:e=>Math.sin(e*xt),easeInOutSine:e=>-.5*(Math.cos(Oe*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Sc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Sc(e)?e:Mb(e,.075,.3),easeOutElastic:e=>Sc(e)?e:Ob(e,.075,.3),easeInOutElastic(e){return Sc(e)?e:e<.5?.5*Mb(e*2,.1125,.45):.5+.5*Ob(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Bo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Bo.easeInBounce(e*2)*.5:Bo.easeOutBounce(e*2-1)*.5+.5};function Wx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Rb(e){return Wx(e)?e:new ml(e)}function bf(e){return Wx(e)?e:new ml(e).saturate(.5).darken(.1).hexString()}const OF=["x","y","borderWidth","radius","tension"],RF=["color","borderColor","backgroundColor"];function LF(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:RF},numbers:{type:"number",properties:OF}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function FF(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Lb=new Map;function $F(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Lb.get(n);return r||(r=new Intl.NumberFormat(e,t),Lb.set(n,r)),r}function Hx(e,t,n){return $F(t,n).format(e)}const BF={values(e){return ut(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=zF(e,n)}const a=sk(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Hx(e,r,c)}};function zF(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var uk={formatters:BF};function VF(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const gi=Object.create(null),Ap=Object.create(null);function zo(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function wf(e,t,n){return typeof t=="string"?pl(zo(e,t),n):pl(zo(e,""),t)}class UF{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>bf(s.backgroundColor),this.hoverBorderColor=(r,s)=>bf(s.borderColor),this.hoverColor=(r,s)=>bf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return wf(this,t,n)}get(t){return zo(this,t)}describe(t,n){return wf(Ap,t,n)}override(t,n){return wf(gi,t,n)}route(t,n,r,s){const i=zo(this,t),a=zo(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[s];return Ee(c)?Object.assign({},u,c):Ne(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var at=new UF({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[LF,FF,VF]);function WF(e){return!e||_e(e.size)||_e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Fb(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Ls(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function $b(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Mp(e,t,n,r){dk(e,t,n,r,null)}function dk(e,t,n,r,s){let i,a,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,g=t.radius;let y=(p||0)*bF;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(y),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,r,s/2,g,0,0,Xe):e.arc(n,r,g,0,Xe),e.closePath();break;case"triangle":d=s?s/2:g,e.moveTo(n+Math.sin(y)*d,r-Math.cos(y)*g),y+=Pb,e.lineTo(n+Math.sin(y)*d,r-Math.cos(y)*g),y+=Pb,e.lineTo(n+Math.sin(y)*d,r-Math.cos(y)*g),e.closePath();break;case"rectRounded":u=g*.516,c=g-u,a=Math.cos(y+Rs)*c,h=Math.cos(y+Rs)*(s?s/2-u:c),l=Math.sin(y+Rs)*c,f=Math.sin(y+Rs)*(s?s/2-u:c),e.arc(n-h,r-l,u,y-Oe,y-xt),e.arc(n+f,r-a,u,y-xt,y),e.arc(n+h,r+l,u,y,y+xt),e.arc(n-f,r+a,u,y+xt,y+Oe),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,d=s?s/2:c,e.rect(n-d,r-c,2*d,2*c);break}y+=Rs;case"rectRot":h=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+f,r-a),e.lineTo(n+h,r+l),e.lineTo(n-f,r+a),e.closePath();break;case"crossRot":y+=Rs;case"cross":h=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-a),e.lineTo(n-f,r+a);break;case"star":h=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-a),e.lineTo(n-f,r+a),y+=Rs,h=Math.cos(y)*(s?s/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-a),e.lineTo(n-f,r+a);break;case"line":a=s?s/2:Math.cos(y)*g,l=Math.sin(y)*g,e.moveTo(n-a,r-l),e.lineTo(n+a,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(y)*(s?s/2:g),r+Math.sin(y)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function vl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function sh(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ih(e){e.restore()}function HF(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function qF(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function GF(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function YF(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function QF(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function bl(e,t,n,r,s,i={}){const a=ut(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=s.string,GF(e,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&QF(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),_e(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,r,i.maxWidth)),e.fillText(u,n,r,i.maxWidth),YF(e,n,r,u,i),r+=Number(s.lineHeight);e.restore()}function nd(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Oe,Oe,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Oe,xt,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,xt,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-xt,!0),e.lineTo(n+a.topLeft,r)}const KF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,XF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JF(e,t){const n=(""+e).match(KF);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const ZF=e=>+e||0;function qx(e,t){const n={},r=Ee(t),s=r?Object.keys(t):t,i=Ee(e)?r?a=>Ne(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of s)n[a]=ZF(i(a));return n}function hk(e){return qx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function na(e){return qx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Mn(e){const t=hk(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Mt(e,t){e=e||{},t=t||at.font;let n=Ne(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=Ne(e.style,t.style);r&&!(""+r).match(XF)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Ne(e.family,t.family),lineHeight:JF(Ne(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Ne(e.weight,t.weight),string:""};return s.string=WF(s),s}function Nc(e,t,n,r){let s,i,a;for(s=0,i=e.length;s<i;++s)if(a=e[s],a!==void 0&&a!==void 0)return a}function e6(e,t,n){const{min:r,max:s}=e,i=nk(t,(s-r)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function Ci(e,t){return Object.assign(Object.create(e),t)}function Gx(e,t=[""],n,r,s=()=>e[0]){const i=n||e;typeof r>"u"&&(r=gk("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Gx([l,...e],t,i,r)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return mk(l,c,()=>l6(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return zb(l).includes(c)},ownKeys(l){return zb(l)},set(l,c,u){const d=l._storage||(l._storage=s());return l[c]=d[c]=u,delete l._keys,!0}})}function ya(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:fk(e,r),setContext:i=>ya(e,i,n,r),override:i=>ya(e.override(i),t,n,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete e[a],!0},get(i,a,l){return mk(i,a,()=>n6(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(i,a,l){return e[a]=l,delete i[a],!0}})}function fk(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Es(n)?n:()=>n,isIndexable:Es(r)?r:()=>r}}const t6=(e,t)=>e?e+zx(t):t,Yx=(e,t)=>Ee(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function mk(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function n6(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let l=r[t];return Es(l)&&a.isScriptable(t)&&(l=r6(t,l,e,n)),ut(l)&&l.length&&(l=s6(t,l,e,a.isIndexable)),Yx(t,l)&&(l=ya(l,s,i&&i[t],a)),l}function r6(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,a||r);return l.delete(e),Yx(e,c)&&(c=Qx(s._scopes,s,e,c)),c}function s6(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:l}=n;if(typeof i.index<"u"&&r(e))return t[i.index%t.length];if(Ee(t[0])){const c=t,u=s._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Qx(u,s,e,d);t.push(ya(h,i,a&&a[e],l))}}return t}function pk(e,t,n){return Es(e)?e(t,n):e}const i6=(e,t)=>e===!0?t:typeof e=="string"?pi(t,e):void 0;function a6(e,t,n,r,s){for(const i of t){const a=i6(n,i);if(a){e.add(a);const l=pk(a._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function Qx(e,t,n,r){const s=t._rootScopes,i=pk(t._fallback,n,r),a=[...e,...s],l=new Set;l.add(r);let c=Bb(l,a,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=Bb(l,a,i,c,r),c===null)?!1:Gx(Array.from(l),[""],s,i,()=>o6(t,n,r))}function Bb(e,t,n,r,s){for(;n;)n=a6(e,t,n,r,s);return n}function o6(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return ut(s)&&Ee(n)?n:s||{}}function l6(e,t,n,r){let s;for(const i of t)if(s=gk(t6(i,e),n),typeof s<"u")return Yx(e,s)?Qx(n,r,e,s):s}function gk(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function zb(e){let t=e._keys;return t||(t=e._keys=c6(e._scopes)),t}function c6(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}const u6=Number.EPSILON||1e-14,va=(e,t)=>t<e.length&&!e[t].skip&&e[t],xk=e=>e==="x"?"y":"x";function d6(e,t,n,r){const s=e.skip?t:e,i=t,a=n.skip?t:n,l=Ip(i,s),c=Ip(a,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=r*u,f=r*d;return{previous:{x:i.x-h*(a.x-s.x),y:i.y-h*(a.y-s.y)},next:{x:i.x+f*(a.x-s.x),y:i.y+f*(a.y-s.y)}}}function h6(e,t,n){const r=e.length;let s,i,a,l,c,u=va(e,0);for(let d=0;d<r-1;++d)if(c=u,u=va(e,d+1),!(!c||!u)){if($o(t[d],0,u6)){n[d]=n[d+1]=0;continue}s=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),n[d]=s*a*t[d],n[d+1]=i*a*t[d])}}function f6(e,t,n="x"){const r=xk(n),s=e.length;let i,a,l,c=va(e,0);for(let u=0;u<s;++u){if(a=l,l=c,c=va(e,u+1),!l)continue;const d=l[n],h=l[r];a&&(i=(d-a[n])/3,l[`cp1${n}`]=d-i,l[`cp1${r}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${r}`]=h+i*t[u])}}function m6(e,t="x"){const n=xk(t),r=e.length,s=Array(r).fill(0),i=Array(r);let a,l,c,u=va(e,0);for(a=0;a<r;++a)if(l=c,c=u,u=va(e,a+1),!!c){if(u){const d=u[t]-c[t];s[a]=d!==0?(u[n]-c[n])/d:0}i[a]=l?u?cr(s[a-1])!==cr(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}h6(e,s,i),f6(e,i,t)}function Cc(e,t,n){return Math.max(Math.min(e,n),t)}function p6(e,t){let n,r,s,i,a,l=vl(e[0],t);for(n=0,r=e.length;n<r;++n)a=i,i=l,l=n<r-1&&vl(e[n+1],t),i&&(s=e[n],a&&(s.cp1x=Cc(s.cp1x,t.left,t.right),s.cp1y=Cc(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=Cc(s.cp2x,t.left,t.right),s.cp2y=Cc(s.cp2y,t.top,t.bottom)))}function g6(e,t,n,r,s){let i,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")m6(e,s);else{let u=r?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)l=e[i],c=d6(u,l,e[Math.min(i+1,a-(r?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&p6(e,n)}function Kx(){return typeof window<"u"&&typeof document<"u"}function Xx(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rd(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const ah=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function x6(e,t){return ah(e).getPropertyValue(t)}const y6=["top","right","bottom","left"];function ai(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=y6[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const v6=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function b6(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a=!1,l,c;if(v6(s,i,e.target))l=s,c=i;else{const u=t.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function qs(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=ah(n),i=s.boxSizing==="border-box",a=ai(s,"padding"),l=ai(s,"border","width"),{x:c,y:u,box:d}=b6(e,n),h=a.left+(d&&l.left),f=a.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*n.width/r),y:Math.round((u-f)/p*n.height/r)}}function w6(e,t,n){let r,s;if(t===void 0||n===void 0){const i=e&&Xx(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const a=i.getBoundingClientRect(),l=ah(i),c=ai(l,"border","width"),u=ai(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,r=rd(l.maxWidth,i,"clientWidth"),s=rd(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:r||td,maxHeight:s||td}}const kc=e=>Math.round(e*10)/10;function j6(e,t,n,r){const s=ah(e),i=ai(s,"margin"),a=rd(s.maxWidth,e,"clientWidth")||td,l=rd(s.maxHeight,e,"clientHeight")||td,c=w6(e,t,n);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const f=ai(s,"border","width"),m=ai(s,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,r?u/r:d-i.height),u=kc(Math.min(u,a,c.maxWidth)),d=kc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=kc(u/2)),(t!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=kc(Math.floor(d*r))),{width:u,height:d}}function Vb(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const S6=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Kx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Ub(e,t){const n=x6(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Gs(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function N6(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function C6(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Gs(e,s,n),l=Gs(s,i,n),c=Gs(i,t,n),u=Gs(a,l,n),d=Gs(l,c,n);return Gs(u,d,n)}const k6=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},E6=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ra(e,t,n){return e?k6(t,n):E6()}function yk(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function vk(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function bk(e){return e==="angle"?{between:yl,compare:kF,normalize:sn}:{between:Er,compare:(t,n)=>t-n,normalize:t=>t}}function Wb({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:s}}function D6(e,t,n){const{property:r,start:s,end:i}=n,{between:a,normalize:l}=bk(r),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&a(l(t[u%c][r]),s,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function wk(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,a=t.length,{compare:l,between:c,normalize:u}=bk(r),{start:d,end:h,loop:f,style:m}=D6(e,t,n),p=[];let g=!1,y=null,b,v,w;const S=()=>c(s,w,b)&&l(s,w)!==0,j=()=>l(i,b)===0||c(i,w,b),k=()=>g||S(),N=()=>!g||j();for(let C=d,E=d;C<=h;++C)v=t[C%a],!v.skip&&(b=u(v[r]),b!==w&&(g=c(b,s,i),y===null&&k()&&(y=l(b,s)===0?C:E),y!==null&&N()&&(p.push(Wb({start:y,end:C,loop:f,count:a,style:m})),y=null),E=C,w=b));return y!==null&&p.push(Wb({start:y,end:h,loop:f,count:a,style:m})),p}function jk(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=wk(r[s],e.points,t);i.length&&n.push(...i)}return n}function T6(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}function P6(e,t,n,r){const s=e.length,i=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%s];u.skip||u.stop?l.skip||(r=!1,i.push({start:t%s,end:(c-1)%s,loop:r}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&i.push({start:t%s,end:a%s,loop:r}),i}function _6(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:a,end:l}=T6(n,s,i,r);if(r===!0)return Hb(e,[{start:a,end:l,loop:i}],n,t);const c=l<a?l+s:l,u=!!e._fullLoop&&a===0&&l===s-1;return Hb(e,P6(n,a,c,u),n,t)}function Hb(e,t,n,r){return!r||!r.setContext||!n?t:I6(e,t,n,r)}function I6(e,t,n,r){const s=e._chart.getContext(),i=qb(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,g,y,b){const v=l?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=v;for(;n[g%c].skip;)g+=v;p%c!==g%c&&(u.push({start:p%c,end:g%c,loop:y,style:b}),d=b,h=g%c)}}for(const p of t){h=l?h:p.start;let g=n[h%c],y;for(f=h+1;f<=p.end;f++){const b=n[f%c];y=qb(r.setContext(Ci(s,{type:"segment",p0:g,p1:b,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),A6(y,d)&&m(h,f-1,p.loop,d),g=b,d=y}h<f-1&&m(h,f-1,p.loop,d)}return u}function qb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function A6(e,t){if(!t)return!1;const n=[],r=function(s,i){return Wx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Ec(e,t,n){return e.options.clip?e[n]:t[n]}function M6(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Ec(n,t,"left"),right:Ec(n,t,"right"),top:Ec(r,t,"top"),bottom:Ec(r,t,"bottom")}:t}function Sk(e,t){const n=t._clip;if(n.disabled)return!1;const r=M6(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class O6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const i=n.listeners[s],a=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=lk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(i[a]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,t,"progress")),i.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xr=new O6;const Gb="transparent",R6={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=Rb(e||Gb),s=r.valid&&Rb(t||Gb);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class L6{constructor(t,n,r,s){const i=n[r];s=Nc([t.to,s,i,t.from]);const a=Nc([t.from,i,s]);this._active=!0,this._fn=t.fn||R6[t.type||typeof a],this._easing=Bo[t.easing]||Bo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Nc([t.to,n,s,t.from]),this._from=Nc([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Nk{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ee(t))return;const n=Object.keys(at.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const i=t[s];if(!Ee(i))return;const a={};for(const l of n)a[l]=i[l];(ut(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,a)})})}_animateOptions(t,n){const r=n.options,s=$6(t,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&F6(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,n){const r=this._properties,s=[],i=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=r.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new L6(f,t,u,d),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return xr.add(this._chart,r),!0}}function F6(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const i=e[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function $6(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Yb(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:r?i:s,end:r?s:i}}function B6(e,t,n){if(n===!1)return!1;const r=Yb(e,n),s=Yb(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function z6(e){let t,n,r,s;return Ee(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function Ck(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Qb(e,t,n,r={}){const s=e.keys,i=r.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=s.length;a<l;++a){if(c=+s[a],c===n){if(d=!0,r.all)continue;break}u=e.values[c],Lt(u)&&(i||t===0||cr(t)===cr(u))&&(t+=u)}return!d&&!r.all?0:t}function V6(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[s]:d,[i]:e[d]};return l}function jf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function U6(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function W6(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function H6(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Kb(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const i=e[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Xb(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:l}=r,c=i.axis,u=a.axis,d=U6(i,a,r),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:g,[u]:y}=p,b=p._stacks||(p._stacks={});f=b[u]=H6(s,d,g),f[l]=y,f._top=Kb(f,a,!0,r.type),f._bottom=Kb(f,a,!1,r.type);const v=f._visualValues||(f._visualValues={});v[l]=y}}function Sf(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function q6(e,t){return Ci(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function G6(e,t,n){return Ci(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ja(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const Nf=e=>e==="reset"||e==="none",Jb=(e,t)=>t?e:Object.assign({},e),Y6=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Ck(n,!0),values:null};class oi{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=jf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ja(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=Ne(r.xAxisID,Sf(t,"x")),a=n.yAxisID=Ne(r.yAxisID,Sf(t,"y")),l=n.rAxisID=Ne(r.rAxisID,Sf(t,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,a,l),d=n.vAxisID=s(c,a,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ab(this._data,this),t._stacked&&Ja(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Ee(n)){const s=this._cachedMeta;this._data=V6(n,s)}else if(r!==n){if(r){Ab(r,this);const s=this._cachedMeta;Ja(s),s._parsed=[]}n&&Object.isExtensible(n)&&PF(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=jf(n.vScale,n),n.stack!==r.stack&&(s=!0,Ja(n),n.stack=r.stack),this._resyncElements(t),(s||i!==n._stacked)&&(Xb(this,n._parsed),n._stacked=jf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,l=i.axis;let c=t===0&&n===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{ut(s[t])?f=this.parseArrayData(r,s,t,n):Ee(s[t])?f=this.parseObjectData(r,s,t,n):f=this.parsePrimitiveData(r,s,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)r._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);r._sorted=c}a&&Xb(this,f)}parsePrimitiveData(t,n,r,s){const{iScale:i,vScale:a}=t,l=i.axis,c=a.axis,u=i.getLabels(),d=i===a,h=new Array(s);let f,m,p;for(f=0,m=s;f<m;++f)p=f+r,h[f]={[l]:d||i.parse(u[p],p),[c]:a.parse(n[p],p)};return h}parseArrayData(t,n,r,s){const{xScale:i,yScale:a}=t,l=new Array(s);let c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=n[d],l[c]={x:i.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,n,r,s){const{xScale:i,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,h,f,m;for(d=0,h=s;d<h;++d)f=d+r,m=n[f],u[d]={x:i.parse(pi(m,l),f),y:a.parse(pi(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,i=this._cachedMeta,a=n[t.axis],l={keys:Ck(s,!0),values:n._stacks[t.axis]._visualValues};return Qb(l,a,i.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const i=r[n.axis];let a=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,a=Qb(s,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&t===r.iScale,a=s.length,l=this._getOtherScale(t),c=Y6(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=W6(l);let f,m;function p(){m=s[f];const g=m[l.axis];return!Lt(m[t.axis])||d>g||h<g}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=n.length;s<i;++s)a=n[s][t.axis],Lt(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=z6(Ne(this.options.clip,B6(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,i))}for(d=0;d<a.length;++d)a[d].draw(t,i)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];i=a.$context||(a.$context=G6(this.getContext(),t,a)),i.parsed=this.getParsed(t),i.raw=s.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=q6(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",i=this._cachedDataOpts,a=t+"-"+n,l=i[a],c=this.enableOptionSharing&&gl(r);if(l)return Jb(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(at.elements[t]),p=()=>this.getContext(r,s,n),g=u.resolveNamedOptions(f,m,p,h);return g.$shared&&(g.$shared=c,i[a]=Object.freeze(Jb(g,c))),g}_resolveAnimations(t,n,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,l=i[a];if(l)return l;let c;if(s.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,r,n))}const u=new Nk(s,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Nf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:a}}updateElement(t,n,r,s){Nf(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!Nf(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,i=n.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,t):i<s&&this._removeElements(i,s-i)}_insertElements(t,n,r=!0){const s=this._cachedMeta,i=s.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(i),l=t;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,n),r&&this.updateElements(i,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&Ja(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ue(oi,"defaults",{}),ue(oi,"datasetElementType",null),ue(oi,"dataElementType",null);function Q6(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=ok(r.sort((s,i)=>s-i))}return e._cache.$bar}function K6(e){const t=e.iScale,n=Q6(t,e.type);let r=t._length,s,i,a,l;const c=()=>{a===32767||a===-32768||(gl(l)&&(r=Math.min(r,Math.abs(a-l)||r)),l=a)};for(s=0,i=n.length;s<i;++s)a=t.getPixelForValue(n[s]),c();for(l=void 0,s=0,i=t.ticks.length;s<i;++s)a=t.getPixelForTick(s),c();return r}function X6(e,t,n,r){const s=n.barThickness;let i,a;return _e(s)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:t.pixels[e]-i/2}}function J6(e,t,n,r){const s=t.pixels,i=s[e];let a=e>0?s[e-1]:null,l=e<s.length-1?s[e+1]:null;const c=n.categoryPercentage;a===null&&(a=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-a);const u=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/r,ratio:n.barPercentage,start:u}}function Z6(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),a=Math.min(s,i),l=Math.max(s,i);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:s,end:i,min:a,max:l}}function kk(e,t,n,r){return ut(e)?Z6(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Zb(e,t,n,r){const s=e.iScale,i=e.vScale,a=s.getLabels(),l=s===i,c=[];let u,d,h,f;for(u=n,d=n+r;u<d;++u)f=t[u],h={},h[s.axis]=l||s.parse(a[u],u),c.push(kk(f,h,i,u));return c}function Cf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function e$(e,t,n){return e!==0?cr(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function t$(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}function n$(e,t,n,r){let s=t.borderSkipped;const i={};if(!s){e.borderSkipped=i;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:d}=t$(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=u:(n._bottom||0)===r?s=d:(i[ew(d,a,l,c)]=!0,s=u)),i[ew(s,a,l,c)]=!0,e.borderSkipped=i}function ew(e,t,n,r){return r?(e=r$(e,t,n),e=tw(e,n,t)):e=tw(e,t,n),e}function r$(e,t,n){return e===t?n:e===n?t:e}function tw(e,t,n){return e==="start"?t:e==="end"?n:e}function s$(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class lu extends oi{parsePrimitiveData(t,n,r,s){return Zb(t,n,r,s)}parseArrayData(t,n,r,s){return Zb(t,n,r,s)}parseObjectData(t,n,r,s){const{iScale:i,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[];let f,m,p,g;for(f=r,m=r+s;f<m;++f)g=n[f],p={},p[i.axis]=i.parse(pi(g,u),f),h.push(kk(pi(g,d),p,a,f));return h}updateRangeFromParsed(t,n,r,s){super.updateRangeFromParsed(t,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(t),a=i._custom,l=Cf(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,s){const i=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s);for(let m=n;m<n+r;m++){const p=this.getParsed(m),g=i||_e(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),y=this._calculateBarIndexPixels(m,d),b=(p._stacks||{})[l.axis],v={horizontal:u,base:g.base,enableBorderRadius:!b||Cf(p._custom)||a===b._top||a===b._bottom,x:u?g.head:y.center,y:u?y.center:g.head,height:u?y.size:Math.abs(g.size),width:u?Math.abs(g.size):y.size};f&&(v.options=h||this.resolveDataElementOptions(m,t[m].active?"active":s));const w=v.options||t[m].options;n$(v,w,b,a),s$(v,w,d.ratio),this.updateElement(t[m],m,v,s)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[r.axis],u=d=>{const h=d._parsed.find(m=>m[r.axis]===c),f=h&&h[d.vScale.axis];if(_e(f)||isNaN(f))return!0};for(const d of s)if(!(n!==void 0&&u(d))&&((i===!1||a.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[Ne(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,r){const s=this._getStacks(t,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,a;for(i=0,a=n.data.length;i<a;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const l=t.barThickness;return{min:l||K6(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=Cf(u);let h=c[n.axis],f=0,m=r?this.applyStack(n,c,r):h,p,g;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&cr(h)!==cr(u.barEnd)&&(f=0),f+=h);const y=!_e(i)&&!d?i:f;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=b,g=p-b,Math.abs(g)<a){g=e$(g,n,l)*a,h===l&&(b-=g/2);const v=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(v,w),j=Math.max(v,w);b=Math.max(Math.min(b,j),S),p=b+g,r&&!d&&(c._stacks[n.axis]._visualValues[s]=n.getValueForPixel(p)-n.getValueForPixel(b))}if(b===n.getPixelForValue(l)){const v=cr(g)*n.getLineWidthForValue(l)/2;b+=v,g-=v}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const r=n.scale,s=this.options,i=s.skipNull,a=Ne(s.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=s.barThickness==="flex"?J6(t,n,s,d*u):X6(t,n,s,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(Ne(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}ue(lu,"id","bar"),ue(lu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ue(lu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function i$(e,t,n){let r=1,s=1,i=0,a=0;if(t<Xe){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(w,S,j)=>yl(w,l,c,!0)?1:Math.max(S,S*n,j,j*n),p=(w,S,j)=>yl(w,l,c,!0)?-1:Math.min(S,S*n,j,j*n),g=m(0,u,h),y=m(xt,d,f),b=p(Oe,u,h),v=p(Oe+xt,d,f);r=(g-b)/2,s=(y-v)/2,i=-(g+b)/2,a=-(y+v)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}class bo extends oi{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=c=>+r[c];if(Ee(r[t])){const{key:c="value"}=this._parsing;i=u=>+pi(r[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)s._parsed[a]=i(a)}}_getRotation(){return kr(this.options.rotation-90)}_getCircumference(){return kr(this.options.circumference)}_getRotationExtents(){let t=Xe,n=-Xe;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),a=s._getCircumference();t=Math.min(t,i),n=Math.max(n,i+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(fF(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=i$(h,d,c),y=(r.width-a)/f,b=(r.height-a)/m,v=Math.max(Math.min(y,b)/2,0),w=nk(this.options.radius,v),S=Math.max(w*c,0),j=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,s.total=this.calculateTotal(),this.outerRadius=w-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*i/Xe)}updateElements(t,n,r,s){const i=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,s);let b=this._getRotation(),v;for(v=0;v<n;++v)b+=this._circumference(v,i);for(v=n;v<n+r;++v){const w=this._circumference(v,i),S=t[v],j={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:p,innerRadius:m};y&&(j.options=g||this.resolveDataElementOptions(v,S.active?"active":s)),b+=w,this.updateElement(S,v,j,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,s;for(s=0;s<n.length;s++){const i=t._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Xe*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=Hx(n._parsed[t],r.options.locale);return{label:s[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const r=this.chart;let s,i,a,l,c;if(!t){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,l=a.controller;break}}if(!t)return 0;for(s=0,i=t.length;s<i;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(Ne(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ue(bo,"id","doughnut"),ue(bo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ue(bo,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ue(bo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=t.legend.options;return n.labels.map((i,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class cu extends oi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=AF(n,s,a);this._drawStart=l,this._drawCount=c,MF(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,l,c,t)}updateElements(t,n,r,s){const i=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,s),f=a.axis,m=l.axis,{spanGaps:p,segment:g}=this.options,y=xl(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none",v=n+r,w=t.length;let S=n>0&&this.getParsed(n-1);for(let j=0;j<w;++j){const k=t[j],N=b?k:{};if(j<n||j>=v){N.skip=!0;continue}const C=this.getParsed(j),E=_e(C[m]),T=N[f]=a.getPixelForValue(C[f],j),F=N[m]=i||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[m],j);N.skip=isNaN(T)||isNaN(F)||E,N.stop=j>0&&Math.abs(C[f]-S[f])>y,g&&(N.parsed=C,N.raw=u.data[j]),h&&(N.options=d||this.resolveDataElementOptions(j,k.active?"active":s)),b||this.updateElement(k,j,N,s),S=C}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ue(cu,"id","line"),ue(cu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ue(cu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Fs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Jx{constructor(t){ue(this,"options");this.options=t||{}}static override(t){Object.assign(Jx.prototype,t)}init(){}formats(){return Fs()}parse(){return Fs()}format(){return Fs()}add(){return Fs()}diff(){return Fs()}startOf(){return Fs()}endOf(){return Fs()}}var a$={_date:Jx};function o$(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,l=s._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&i.length){const u=l._reversePixels?DF:ti;if(r){if(s._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=s._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(g=>!_e(g[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(g=>!_e(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function oh(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=o$(i[l],t,a,s);for(let m=h;m<=f;++m){const p=d[m];p.skip||r(p,u,m)}}}function l$(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const i=t?Math.abs(r.x-s.x):0,a=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function kf(e,t,n,r,s){const i=[];return!s&&!e.isPointInArea(t)||oh(e,n,t,function(l,c,u){!s&&!vl(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function c$(e,t,n,r){let s=[];function i(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:h}=ik(a,{x:t.x,y:t.y});yl(h,u,d)&&s.push({element:a,datasetIndex:l,index:c})}return oh(e,n,t,i),s}function u$(e,t,n,r,s,i){let a=[];const l=l$(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,s);if(r&&!m)return;const p=d.getCenterPoint(s);if(!(!!i||e.isPointInArea(p))&&!m)return;const y=l(t,p);y<c?(a=[{element:d,datasetIndex:h,index:f}],c=y):y===c&&a.push({element:d,datasetIndex:h,index:f})}return oh(e,n,t,u),a}function Ef(e,t,n,r,s,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!r?c$(e,t,n,s):u$(e,t,n,r,s,i)}function nw(e,t,n,r,s){const i=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return oh(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],s)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,s))}),r&&!l?[]:i}var d$={modes:{index(e,t,n,r){const s=qs(t,e),i=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?kf(e,s,i,r,a):Ef(e,s,i,!1,r,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,r){const s=qs(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?kf(e,s,i,r,a):Ef(e,s,i,!1,r,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,r){const s=qs(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return kf(e,s,i,r,a)},nearest(e,t,n,r){const s=qs(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return Ef(e,s,i,n.intersect,r,a)},x(e,t,n,r){const s=qs(t,e);return nw(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=qs(t,e);return nw(e,s,"y",n.intersect,r)}}};const Ek=["left","top","right","bottom"];function Za(e,t){return e.filter(n=>n.pos===t)}function rw(e,t){return e.filter(n=>Ek.indexOf(n.pos)===-1&&n.box.axis===t)}function eo(e,t){return e.sort((n,r)=>{const s=t?r:n,i=t?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function h$(e){const t=[];let n,r,s,i,a,l;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:i,options:{stack:a,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:l});return t}function f$(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Ek.includes(s))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}function m$(e,t){const n=f$(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,l;for(i=0,a=e.length;i<a;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*r:c&&t.availableWidth,l.height=s):(l.width=r,l.height=d?d*s:c&&t.availableHeight)}return n}function p$(e){const t=h$(e),n=eo(t.filter(u=>u.box.fullSize),!0),r=eo(Za(t,"left"),!0),s=eo(Za(t,"right")),i=eo(Za(t,"top"),!0),a=eo(Za(t,"bottom")),l=rw(t,"x"),c=rw(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(a).concat(l),chartArea:Za(t,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(a).concat(l)}}function sw(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Dk(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function g$(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!Ee(s)){n.size&&(e[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[s]+=n.size}i.getPadding&&Dk(a,i.getPadding());const l=Math.max(0,t.outerWidth-sw(a,e,"left","right")),c=Math.max(0,t.outerHeight-sw(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function x$(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function y$(e,t){const n=t.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(t[a],n[a])}),i}return r(e?["left","right"]:["top","bottom"])}function wo(e,t,n,r){const s=[];let i,a,l,c,u,d;for(i=0,a=e.length,u=0;i<a;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,y$(l.horizontal,t));const{same:h,other:f}=g$(t,n,l,r);u|=h&&s.length,d=d||f,c.fullSize||s.push(l)}return u&&wo(s,t,n,r)||d}function Dc(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function iw(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const l of e){const c=l.box,u=r[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;gl(u.start)&&(a=u.start),c.fullSize?Dc(c,s.left,a,n.outerWidth-s.right-s.left,f):Dc(c,t.left+u.placed,a,h,f),u.start=a,u.placed+=h,a=c.bottom}else{const h=t.h*d,f=u.size||c.width;gl(u.start)&&(i=u.start),c.fullSize?Dc(c,i,s.top,f,n.outerHeight-s.bottom-s.top):Dc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=a}var En={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=Mn(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),l=p$(e.boxes),c=l.vertical,u=l.horizontal;Me(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},s);Dk(f,Mn(r));const m=Object.assign({maxPadding:f,w:i,h:a,x:s.left,y:s.top},s),p=m$(c.concat(u),h);wo(l.fullSize,m,h,p),wo(c,m,h,p),wo(u,m,h,p)&&wo(c,m,h,p),x$(m),iw(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,iw(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Me(l.chartArea,g=>{const y=g.box;Object.assign(y,e.chartArea),y.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Tk{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class v$ extends Tk{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const uu="$chartjs",b$={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aw=e=>e===null||e==="";function w$(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[uu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",aw(s)){const i=Ub(e,"width");i!==void 0&&(e.width=i)}if(aw(r))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Ub(e,"height");i!==void 0&&(e.height=i)}return e}const Pk=S6?{passive:!0}:!1;function j$(e,t,n){e&&e.addEventListener(t,n,Pk)}function S$(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Pk)}function N$(e,t){const n=b$[e.type]||e.type,{x:r,y:s}=qs(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function sd(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function C$(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||sd(l.addedNodes,r),a=a&&!sd(l.removedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function k$(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||sd(l.removedNodes,r),a=a&&!sd(l.addedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const wl=new Map;let ow=0;function _k(){const e=window.devicePixelRatio;e!==ow&&(ow=e,wl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function E$(e,t){wl.size||window.addEventListener("resize",_k),wl.set(e,t)}function D$(e){wl.delete(e),wl.size||window.removeEventListener("resize",_k)}function T$(e,t,n){const r=e.canvas,s=r&&Xx(r);if(!s)return;const i=ck((l,c)=>{const u=s.clientWidth;n(l,c),u<s.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(s),E$(e,i),a}function Df(e,t,n){n&&n.disconnect(),t==="resize"&&D$(e)}function P$(e,t,n){const r=e.canvas,s=ck(i=>{e.ctx!==null&&n(N$(i,e))},e);return j$(r,t,s),s}class _$ extends Tk{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(w$(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[uu])return!1;const r=n[uu].initial;["height","width"].forEach(i=>{const a=r[i];_e(a)?n.removeAttribute(i):n.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[uu],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),a={attach:C$,detach:k$,resize:T$}[n]||P$;s[n]=a(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:Df,detach:Df,resize:Df}[n]||S$)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return j6(t,n,r,s)}isAttached(t){const n=t&&Xx(t);return!!(n&&n.isConnected)}}function I$(e){return!Kx()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?v$:_$}var Hc;let $r=(Hc=class{constructor(){ue(this,"x");ue(this,"y");ue(this,"active",!1);ue(this,"options");ue(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return xl(this.x)&&xl(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},ue(Hc,"defaults",{}),ue(Hc,"defaultRoutes"),Hc);function A$(e,t){const n=e.options.ticks,r=M$(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?R$(t):[],a=i.length,l=i[0],c=i[a-1],u=[];if(a>s)return L$(t,u,i,a/s),u;const d=O$(i,t,s);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(Tc(t,u,d,_e(m)?0:l-m,l),h=0,f=a-1;h<f;h++)Tc(t,u,d,i[h],i[h+1]);return Tc(t,u,d,c,_e(m)?t.length:c+m),u}return Tc(t,u,d),u}function M$(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function O$(e,t,n){const r=F$(e),s=t.length/n;if(!r)return Math.max(s,1);const i=wF(r);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>s)return c}return Math.max(s,1)}function R$(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function L$(e,t,n,r){let s=0,i=n[0],a;for(r=Math.ceil(r),a=0;a<e.length;a++)a===i&&(t.push(e[a]),s++,i=n[s*r])}function Tc(e,t,n,r,s){const i=Ne(r,0),a=Math.min(Ne(s,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function F$(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const $$=e=>e==="left"?"right":e==="right"?"left":e,lw=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,cw=(e,t)=>Math.min(t||e,e);function uw(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function B$(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<i-l||c>a+l)))return c}function z$(e,t){Me(e,n=>{const r=n.gc,s=r.length/2;let i;if(s>t){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function to(e){return e.drawTicks?e.tickLength:0}function dw(e,t){if(!e.display)return 0;const n=Mt(e.font,t),r=Mn(e.padding);return(ut(e.text)?e.text.length:1)*n.lineHeight+r.height}function V$(e,t){return Ci(e,{scale:t,type:"scale"})}function U$(e,t,n){return Ci(e,{tick:n,index:t,type:"tick"})}function W$(e,t,n){let r=Ux(e);return(n&&t!=="right"||!n&&t==="right")&&(r=$$(r)),r}function H$(e,t,n,r){const{top:s,left:i,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const g=a-s,y=l-i;if(e.isHorizontal()){if(m=_t(r,i,l),Ee(n)){const b=Object.keys(n)[0],v=n[b];p=d[b].getPixelForValue(v)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=lw(e,n,t);f=l-i}else{if(Ee(n)){const b=Object.keys(n)[0],v=n[b];m=d[b].getPixelForValue(v)-y+t}else n==="center"?m=(u.left+u.right)/2-y+t:m=lw(e,n,t);p=_t(r,a,s),h=n==="left"?-xt:xt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class _a extends $r{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Zn(t,Number.POSITIVE_INFINITY),n=Zn(n,Number.NEGATIVE_INFINITY),r=Zn(r,Number.POSITIVE_INFINITY),s=Zn(s,Number.NEGATIVE_INFINITY),{min:Zn(t,r),max:Zn(n,s),minDefined:Lt(t),maxDefined:Lt(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),s||(n=Math.min(n,a.min)),i||(r=Math.max(r,a.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Zn(n,Zn(r,n)),max:Zn(r,Zn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ze(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=e6(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?uw(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=A$(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ze(this.options.afterUpdate,[this])}beforeSetDimensions(){ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ze(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ze(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r],i.label=ze(n.callback,[i.value,r,t],this)}afterTickToLabelConversion(){ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=cw(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let a=s,l,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=At(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/r:m/(r-1),h+6>l&&(l=m/(r-(t.offset?.5:1)),c=this.maxHeight-to(t.grid)-n.padding-dw(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),a=CF(Math.min(Math.asin(At((d.highest.height+6)/l,-1,1)),Math.asin(At(c/u,-1,1))-Math.asin(At(f/u,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ze(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=dw(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=to(i)+c):(t.height=this.maxHeight,t.width=to(i)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=r.padding*2,p=kr(this.labelRotation),g=Math.cos(p),y=Math.sin(p);if(l){const b=r.mirror?0:y*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+b+m)}else{const b=r.mirror?0:g*h.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+b+m)}this._calculatePadding(u,d,y,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=s*t.width,m=r*n.height):(f=r*t.height,m=s*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ze(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)_e(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=uw(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(n/cw(n,r));let u=0,d=0,h,f,m,p,g,y,b,v,w,S,j;for(h=0;h<n;h+=c){if(p=t[h].label,g=this._resolveTickFontOptions(h),s.font=y=g.string,b=i[y]=i[y]||{data:{},gc:[]},v=g.lineHeight,w=S=0,!_e(p)&&!ut(p))w=Fb(s,b.data,b.gc,w,p),S=v;else if(ut(p))for(f=0,m=p.length;f<m;++f)j=p[f],!_e(j)&&!ut(j)&&(w=Fb(s,b.data,b.gc,w,j),S+=v);a.push(w),l.push(S),u=Math.max(w,u),d=Math.max(S,d)}z$(i,n);const k=a.indexOf(u),N=l.indexOf(d),C=E=>({width:a[E]||0,height:l[E]||0});return{first:C(0),last:C(n-1),widest:C(k),highest:C(N),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return EF(this._alignToPixels?Ls(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=U$(this.getContext(),t,r))}return this.$context||(this.$context=V$(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=kr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:l}=s,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=to(i),m=[],p=l.setContext(this.getContext()),g=p.display?p.width:0,y=g/2,b=function(V){return Ls(r,V,g)};let v,w,S,j,k,N,C,E,T,F,R,$;if(a==="top")v=b(this.bottom),N=this.bottom-f,E=v-y,F=b(t.top)+y,$=t.bottom;else if(a==="bottom")v=b(this.top),F=t.top,$=b(t.bottom)-y,N=v+y,E=this.top+f;else if(a==="left")v=b(this.right),k=this.right-f,C=v-y,T=b(t.left)+y,R=t.right;else if(a==="right")v=b(this.left),T=t.left,R=b(t.right)-y,k=v+y,C=this.left+f;else if(n==="x"){if(a==="center")v=b((t.top+t.bottom)/2+.5);else if(Ee(a)){const V=Object.keys(a)[0],M=a[V];v=b(this.chart.scales[V].getPixelForValue(M))}F=t.top,$=t.bottom,N=v+y,E=N+f}else if(n==="y"){if(a==="center")v=b((t.left+t.right)/2);else if(Ee(a)){const V=Object.keys(a)[0],M=a[V];v=b(this.chart.scales[V].getPixelForValue(M))}k=v-y,C=k-f,T=t.left,R=t.right}const D=Ne(s.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/D));for(w=0;w<h;w+=B){const V=this.getContext(w),M=i.setContext(V),P=l.setContext(V),I=M.lineWidth,z=M.color,W=P.dash||[],Z=P.dashOffset,ie=M.tickWidth,le=M.tickColor,ge=M.tickBorderDash||[],q=M.tickBorderDashOffset;S=B$(this,w,c),S!==void 0&&(j=Ls(r,S,I),u?k=C=T=R=j:N=E=F=$=j,m.push({tx1:k,ty1:N,tx2:C,ty2:E,x1:T,y1:F,x2:R,y2:$,width:I,color:z,borderDash:W,borderDashOffset:Z,tickWidth:ie,tickColor:le,tickBorderDash:ge,tickBorderDashOffset:q}))}return this._ticksLength=h,this._borderValue=v,m}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=to(r.grid),m=f+d,p=h?-d:m,g=-kr(this.labelRotation),y=[];let b,v,w,S,j,k,N,C,E,T,F,R,$="middle";if(s==="top")k=this.bottom-p,N=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+p,N=this._getXAxisLabelAlignment();else if(s==="left"){const B=this._getYAxisLabelAlignment(f);N=B.textAlign,j=B.x}else if(s==="right"){const B=this._getYAxisLabelAlignment(f);N=B.textAlign,j=B.x}else if(n==="x"){if(s==="center")k=(t.top+t.bottom)/2+m;else if(Ee(s)){const B=Object.keys(s)[0],V=s[B];k=this.chart.scales[B].getPixelForValue(V)+m}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")j=(t.left+t.right)/2-m;else if(Ee(s)){const B=Object.keys(s)[0],V=s[B];j=this.chart.scales[B].getPixelForValue(V)}N=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?$="top":c==="end"&&($="bottom"));const D=this._getLabelSizes();for(b=0,v=l.length;b<v;++b){w=l[b],S=w.label;const B=i.setContext(this.getContext(b));C=this.getPixelForTick(b)+i.labelOffset,E=this._resolveTickFontOptions(b),T=E.lineHeight,F=ut(S)?S.length:1;const V=F/2,M=B.color,P=B.textStrokeColor,I=B.textStrokeWidth;let z=N;a?(j=C,N==="inner"&&(b===v-1?z=this.options.reverse?"left":"right":b===0?z=this.options.reverse?"right":"left":z="center"),s==="top"?u==="near"||g!==0?R=-F*T+T/2:u==="center"?R=-D.highest.height/2-V*T+T:R=-D.highest.height+T/2:u==="near"||g!==0?R=T/2:u==="center"?R=D.highest.height/2-V*T:R=D.highest.height-F*T,h&&(R*=-1),g!==0&&!B.showLabelBackdrop&&(j+=T/2*Math.sin(g))):(k=C,R=(1-F)*T/2);let W;if(B.showLabelBackdrop){const Z=Mn(B.backdropPadding),ie=D.heights[b],le=D.widths[b];let ge=R-Z.top,q=0-Z.left;switch($){case"middle":ge-=ie/2;break;case"bottom":ge-=ie;break}switch(N){case"center":q-=le/2;break;case"right":q-=le;break;case"inner":b===v-1?q-=le:b>0&&(q-=le/2);break}W={left:q,top:ge,width:le+Z.width,height:ie+Z.height,color:B.backdropColor}}y.push({label:S,font:E,textOffset:R,options:{rotation:g,color:M,strokeColor:P,strokeWidth:I,textAlign:z,textBaseline:$,translation:[j,k],backdrop:W}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-kr(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),l=t+i,c=a.widest.width;let u,d;return n==="left"?s?(d=this.right+i,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:i,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,i,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,a;const l=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,a=s.length;i<a;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Ls(t,this.left,a)-a/2,d=Ls(t,this.right,l)+l/2,h=f=c):(h=Ls(t,this.top,a)-a/2,f=Ls(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&sh(r,s);const i=this.getLabelItems(t);for(const a of i){const l=a.options,c=a.font,u=a.label,d=a.textOffset;bl(r,u,0,d,c,l)}s&&ih(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Mt(r.font),a=Mn(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Ee(n)?(c+=a.bottom,ut(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=H$(this,c,n,l);bl(t,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:W$(l,n,s),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=Ne(t.grid&&t.grid.z,-1),s=Ne(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==_a.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=n.length;i<a;++i){const l=n[i];l[r]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Mt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Pc{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;Y$(n)&&(r=this.register(n));const s=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in s||(s[i]=t,q$(t,a,r),this.override&&at.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in at[s]&&(delete at[s][r],this.override&&delete gi[r])}}function q$(e,t,n){const r=pl(Object.create(null),[n?at.get(n):{},at.get(t),e.defaults]);at.set(t,r),e.defaultRoutes&&G$(t,e.defaultRoutes),e.descriptors&&at.describe(t,e.descriptors)}function G$(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");at.route(i,s,c,l)})}function Y$(e){return"id"in e&&"defaults"in e}class Q${constructor(){this.controllers=new Pc(oi,"datasets",!0),this.elements=new Pc($r,"elements"),this.plugins=new Pc(Object,"plugins"),this.scales=new Pc(_a,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(t,i,s):Me(s,a=>{const l=r||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,r){const s=zx(t);ze(r["before"+s],[],r),n[t](r),ze(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var nr=new Q$;class K${constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(i,t,n,r);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,r,s){s=s||{};for(const i of t){const a=i.plugin,l=a[r],c=[n,s,i.options];if(ze(l,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=Ne(r.options&&r.options.plugins,{}),i=X$(r);return s===!1&&!n?[]:Z$(t,i,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function X$(e){const t={},n=[],r=Object.keys(nr.plugins.items);for(let i=0;i<r.length;i++)n.push(nr.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function J$(e,t){return!t&&e===!1?null:e===!0?{}:e}function Z$(e,{plugins:t,localIds:n},r,s){const i=[],a=e.getContext();for(const l of t){const c=l.id,u=J$(r[c],s);u!==null&&i.push({plugin:l,options:eB(e.config,{plugin:l,local:n[c]},u,a)})}return i}function eB(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(r,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Op(e,t){const n=at.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function tB(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function nB(e,t){return e===t?"_index_":"_value_"}function hw(e){if(e==="x"||e==="y"||e==="r")return e}function rB(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Rp(e,...t){if(hw(e))return e;for(const n of t){const r=n.axis||rB(n.position)||e.length>1&&hw(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function fw(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function sB(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return fw(e,"x",n[0])||fw(e,"y",n[0])}return{}}function iB(e,t){const n=gi[e.type]||{scales:{}},r=t.scales||{},s=Op(e.type,t),i=Object.create(null);return Object.keys(r).forEach(a=>{const l=r[a];if(!Ee(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Rp(a,l,sB(a,e),at.scales[l.type]),u=nB(c,s),d=n.scales||{};i[a]=Fo(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||Op(l,t),d=(gi[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=tB(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Fo(i[m],[{axis:f},r[m],d[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];Fo(l,[at.scales[l.type],at.scale])}),i}function Ik(e){const t=e.options||(e.options={});t.plugins=Ne(t.plugins,{}),t.scales=iB(e,t)}function Ak(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function aB(e){return e=e||{},e.data=Ak(e.data),Ik(e),e}const mw=new Map,Mk=new Set;function _c(e,t){let n=mw.get(e);return n||(n=t(),mw.set(e,n),Mk.add(n)),n}const no=(e,t,n)=>{const r=pi(t,n);r!==void 0&&e.add(r)};let oB=class{constructor(t){this._config=aB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ak(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Ik(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return _c(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return _c(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return _c(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return _c(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:i}=this,a=this._cachedScopes(t,r),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>no(c,t,h))),d.forEach(h=>no(c,s,h)),d.forEach(h=>no(c,gi[i]||{},h)),d.forEach(h=>no(c,at,h)),d.forEach(h=>no(c,Ap,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),Mk.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,gi[n]||{},at.datasets[n]||{},{type:n},at,Ap]}resolveNamedOptions(t,n,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=pw(this._resolverCache,t,s);let c=a;if(cB(a,n)){i.$shared=!1,r=Es(r)?r():r;const u=this.createResolver(t,r,l);c=ya(a,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,r=[""],s){const{resolver:i}=pw(this._resolverCache,t,r);return Ee(n)?ya(i,n,void 0,s):i}};function pw(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Gx(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const lB=e=>Ee(e)&&Object.getOwnPropertyNames(e).some(t=>Es(e[t]));function cB(e,t){const{isScriptable:n,isIndexable:r}=fk(e);for(const s of t){const i=n(s),a=r(s),l=(a||i)&&e[s];if(i&&(Es(l)||lB(l))||a&&ut(l))return!0}return!1}var uB="4.5.0";const dB=["top","bottom","left","right","chartArea"];function gw(e,t){return e==="top"||e==="bottom"||dB.indexOf(e)===-1&&t==="x"}function xw(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function yw(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ze(n&&n.onComplete,[e],t)}function hB(e){const t=e.chart,n=t.options.animation;ze(n&&n.onProgress,[e],t)}function Ok(e){return Kx()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const du={},vw=e=>{const t=Ok(e);return Object.values(du).filter(n=>n.canvas===t).pop()};function fB(e,t,n){const r=Object.keys(e);for(const s of r){const i=+s;if(i>=t){const a=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=a)}}}function mB(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var qr;let Ia=(qr=class{static register(...t){nr.add(...t),bw()}static unregister(...t){nr.remove(...t),bw()}constructor(t,n){const r=this.config=new oB(n),s=Ok(t),i=vw(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||I$(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=hF(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new K$,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_F(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],du[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}xr.listen(this,"complete",yw),xr.listen(this,"progress",hB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return _e(t)?n&&i?i:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return nr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Vb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $b(this.canvas,this.ctx),this}stop(){return xr.stop(this),this}resize(t,n){xr.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Vb(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),ze(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Me(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const l=n[a],c=Rp(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Me(i,a=>{const l=a.options,c=l.id,u=Rp(c,l),d=Ne(l.type,a.dtype);(l.position===void 0||gw(l.position,u)!==gw(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{const f=nr.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),Me(s,(a,l)=>{a||delete r[l]}),Me(r,a=>{En.configure(this,a,a.options),En.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(xw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let a=this.getDatasetMeta(r);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=i.indexAxis||Op(l,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=nr.getController(l),{datasetElementType:u,dataElementType:d}=at.datasets[l];Object.assign(c,{dataElementType:nr.getElement(d),datasetElementType:u&&nr.getElement(u)}),a.controller=new c(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Me(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Me(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xw("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Me(this.scales,t=>{En.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!Tb(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const a=r==="_removeElements"?-i:i;fB(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(t.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Tb(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;En.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Me(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Es(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xr.has(this)?this.attached&&!xr.running(this)&&xr.start(this):(this.draw(),yw({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const a=n[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=Sk(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&sh(n,s),t.controller.draw(),s&&ih(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return vl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const i=d$.modes[n];return typeof i=="function"?i(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ci(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,s);gl(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(i,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),xr.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),$b(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete du[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(i,a)=>{n.addEventListener(this,i,a),t[i]=a},s=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};Me(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Me(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Me(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let i,a,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Zu(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=i(n,t),l=r?t:i(t,n);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:i}=this,a=n,l=this._getActiveElements(t,s,r,a),c=yF(t),u=mB(t,this._lastEvent,r,c);r&&(this._lastEvent=null,ze(i.onHover,[t,l,this],this),c&&ze(i.onClick,[t,l,this],this));const d=!Zu(l,s);return(d||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,d}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,s)}},ue(qr,"defaults",at),ue(qr,"instances",du),ue(qr,"overrides",gi),ue(qr,"registry",nr),ue(qr,"version",uB),ue(qr,"getChart",vw),qr);function bw(){return Me(Ia.instances,e=>e._plugins.invalidate())}function pB(e,t,n){const{startAngle:r,x:s,y:i,outerRadius:a,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/a,sn(r-n));if(e.beginPath(),e.arc(s,i,a-u/2,r+h/2,n-h/2),l>0){const f=Math.min(u/l,sn(r-n));e.arc(s,i,l+u/2,n-f/2,r+f/2,!0)}else{const f=Math.min(u/2,a*sn(r-n));if(d==="round")e.arc(s,i,f,n-Oe/2,r+Oe/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Oe/2)+s,g=-m*Math.sin(n+Oe/2)+i,y=m*Math.cos(r+Oe/2)+s,b=m*Math.sin(r+Oe/2)+i;e.lineTo(p,g),e.lineTo(y,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function gB(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:l,innerRadius:c}=t;let u=s/l;e.beginPath(),e.arc(i,a,l,r-u,n+u),c>s?(u=s/c,e.arc(i,a,c,n+u,r-u,!0)):e.arc(i,a,s,n+xt,r-xt),e.closePath(),e.clip()}function xB(e){return qx(e,["outerStart","outerEnd","innerStart","innerEnd"])}function yB(e,t,n,r){const s=xB(e.options.borderRadius),i=(n-t)/2,a=Math.min(i,r*t/2),l=c=>{const u=(n-Math.min(i,c))*r/2;return At(c,0,Math.min(i,u))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:At(s.innerStart,0,a),innerEnd:At(s.innerEnd,0,a)}}function Ti(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function id(e,t,n,r,s,i){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+r+n-u,0),f=d>0?d+r+n+u:0;let m=0;const p=s-c;if(r){const B=d>0?d-r:0,V=h>0?h-r:0,M=(B+V)/2,P=M!==0?p*M/(M+r):p;m=(p-P)/2}const g=Math.max(.001,p*h-n/Oe)/h,y=(p-g)/2,b=c+y+m,v=s-y-m,{outerStart:w,outerEnd:S,innerStart:j,innerEnd:k}=yB(t,f,h,v-b),N=h-w,C=h-S,E=b+w/N,T=v-S/C,F=f+j,R=f+k,$=b+j/F,D=v-k/R;if(e.beginPath(),i){const B=(E+T)/2;if(e.arc(a,l,h,E,B),e.arc(a,l,h,B,T),S>0){const I=Ti(C,T,a,l);e.arc(I.x,I.y,S,T,v+xt)}const V=Ti(R,v,a,l);if(e.lineTo(V.x,V.y),k>0){const I=Ti(R,D,a,l);e.arc(I.x,I.y,k,v+xt,D+Math.PI)}const M=(v-k/f+(b+j/f))/2;if(e.arc(a,l,f,v-k/f,M,!0),e.arc(a,l,f,M,b+j/f,!0),j>0){const I=Ti(F,$,a,l);e.arc(I.x,I.y,j,$+Math.PI,b-xt)}const P=Ti(N,b,a,l);if(e.lineTo(P.x,P.y),w>0){const I=Ti(N,E,a,l);e.arc(I.x,I.y,w,b-xt,E)}}else{e.moveTo(a,l);const B=Math.cos(E)*h+a,V=Math.sin(E)*h+l;e.lineTo(B,V);const M=Math.cos(T)*h+a,P=Math.sin(T)*h+l;e.lineTo(M,P)}e.closePath()}function vB(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:l}=t;let c=t.endAngle;if(i){id(e,t,n,r,c,s);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=a+(l%Xe||Xe))}return id(e,t,n,r,c,s),e.fill(),c}function bB(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let g=t.endAngle;if(i){id(e,t,n,r,g,s);for(let y=0;y<i;++y)e.stroke();isNaN(l)||(g=a+(l%Xe||Xe))}p&&gB(e,t,g),c.selfJoin&&g-a>=Oe&&m===0&&d!=="miter"&&pB(e,t,g),i||(id(e,t,n,r,g,s),e.stroke())}class jo extends $r{constructor(n){super();ue(this,"circumference");ue(this,"endAngle");ue(this,"fullCircles");ue(this,"innerRadius");ue(this,"outerRadius");ue(this,"pixelMargin");ue(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:a,distance:l}=ik(i,{x:n,y:r}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,p=Ne(f,u-c),g=yl(a,c,u)&&c!==u,y=p>=Xe||g,b=Er(l,d+m,h+m);return y&&b}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+a)/2,f=(l+c+d+u)/2;return{x:r+Math.cos(h)*f,y:s+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,a=(r.spacing||0)/2,l=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Xe?Math.floor(s/Xe):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Oe,s||0)),d=i*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,vB(n,this,d,a,l),bB(n,this,d,a,l),n.restore()}}ue(jo,"id","arc"),ue(jo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ue(jo,"defaultRoutes",{backgroundColor:"backgroundColor"}),ue(jo,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Rk(e,t,n=t){e.lineCap=Ne(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Ne(n.borderDash,t.borderDash)),e.lineDashOffset=Ne(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Ne(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Ne(n.borderWidth,t.borderWidth),e.strokeStyle=Ne(n.borderColor,t.borderColor)}function wB(e,t,n){e.lineTo(n.x,n.y)}function jB(e){return e.stepped?HF:e.tension||e.cubicInterpolationMode==="monotone"?qF:wB}function Lk(e,t,n={}){const r=e.length,{start:s=0,end:i=r-1}=n,{start:a,end:l}=t,c=Math.max(s,a),u=Math.min(i,l),d=s<a&&i<a||s>l&&i>l;return{count:r,start:c,loop:t.loop,ilen:u<c&&!d?r+u-c:u-c}}function SB(e,t,n,r){const{points:s,options:i}=t,{count:a,start:l,loop:c,ilen:u}=Lk(s,n,r),d=jB(i);let{move:h=!0,reverse:f}=r||{},m,p,g;for(m=0;m<=u;++m)p=s[(l+(f?u-m:m))%a],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,g,p,f,i.stepped),g=p);return c&&(p=s[(l+(f?u:0))%a],d(e,g,p,f,i.stepped)),!!c}function NB(e,t,n,r){const s=t.points,{count:i,start:a,ilen:l}=Lk(s,n,r),{move:c=!0,reverse:u}=r||{};let d=0,h=0,f,m,p,g,y,b;const v=S=>(a+(u?l-S:S))%i,w=()=>{g!==y&&(e.lineTo(d,y),e.lineTo(d,g),e.lineTo(d,b))};for(c&&(m=s[v(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=s[v(f)],m.skip)continue;const S=m.x,j=m.y,k=S|0;k===p?(j<g?g=j:j>y&&(y=j),d=(h*d+S)/++h):(w(),e.lineTo(S,j),p=k,h=0,g=y=j),b=j}w()}function Lp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?NB:SB}function CB(e){return e.stepped?N6:e.tension||e.cubicInterpolationMode==="monotone"?C6:Gs}function kB(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),Rk(e,t.options),e.stroke(s)}function EB(e,t,n,r){const{segments:s,options:i}=t,a=Lp(t);for(const l of s)Rk(e,i,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const DB=typeof Path2D=="function";function TB(e,t,n,r){DB&&!t.options.segment?kB(e,t,n,r):EB(e,t,n,r)}class is extends $r{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;g6(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_6(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],i=this.points,a=jk(this,{property:n,start:s,end:s});if(!a.length)return;const l=[],c=CB(r);let u,d;for(u=0,d=a.length;u<d;++u){const{start:h,end:f}=a[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const g=Math.abs((s-m[n])/(p[n]-m[n])),y=c(m,p,g,r.stepped);y[n]=t[n],l.push(y)}return l.length===1?l[0]:l}pathSegment(t,n,r){return Lp(this)(t,this,n,r)}path(t,n,r){const s=this.segments,i=Lp(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)a&=i(t,this,l,{start:n,end:n+r-1});return!!a}draw(t,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),TB(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ue(is,"id","line"),ue(is,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ue(is,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ue(is,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ww(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}class hu extends $r{constructor(n){super();ue(this,"parsed");ue(this,"skip");ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(r-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return ww(this,n,"x",r)}inYRange(n,r){return ww(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!vl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Mp(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ue(hu,"id","point"),ue(hu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ue(hu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Fk(e,t){const{x:n,y:r,base:s,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=a/2,l=Math.min(n,s),c=Math.max(n,s),u=r-h,d=r+h):(h=i/2,l=n-h,c=n+h,u=Math.min(r,s),d=Math.max(r,s)),{left:l,top:u,right:c,bottom:d}}function as(e,t,n,r){return e?0:At(t,n,r)}function PB(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=hk(r);return{t:as(s.top,i.top,0,n),r:as(s.right,i.right,0,t),b:as(s.bottom,i.bottom,0,n),l:as(s.left,i.left,0,t)}}function _B(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=na(s),a=Math.min(t,n),l=e.borderSkipped,c=r||Ee(s);return{topLeft:as(!c||l.top||l.left,i.topLeft,0,a),topRight:as(!c||l.top||l.right,i.topRight,0,a),bottomLeft:as(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:as(!c||l.bottom||l.right,i.bottomRight,0,a)}}function IB(e){const t=Fk(e),n=t.right-t.left,r=t.bottom-t.top,s=PB(e,n/2,r/2),i=_B(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Tf(e,t,n,r){const s=t===null,i=n===null,l=e&&!(s&&i)&&Fk(e,r);return l&&(s||Er(t,l.left,l.right))&&(i||Er(n,l.top,l.bottom))}function AB(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function MB(e,t){e.rect(t.x,t.y,t.w,t.h)}function Pf(e,t,n={}){const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+a,radius:e.radius}}class fu extends $r{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:a}=IB(this),l=AB(a.radius)?nd:MB;t.save(),(a.w!==i.w||a.h!==i.h)&&(t.beginPath(),l(t,Pf(a,n,i)),t.clip(),l(t,Pf(i,-n,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),l(t,Pf(i,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,r){return Tf(this,t,n,r)}inXRange(t,n){return Tf(this,t,null,n)}inYRange(t,n){return Tf(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ue(fu,"id","bar"),ue(fu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ue(fu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function OB(e,t,n){const r=e.segments,s=e.points,i=t.points,a=[];for(const l of r){let{start:c,end:u}=l;u=lh(c,u,s);const d=Fp(n,s[c],s[u],l.loop);if(!t.segments){a.push({source:l,target:d,start:s[c],end:s[u]});continue}const h=jk(t,d);for(const f of h){const m=Fp(n,i[f.start],i[f.end],f.loop),p=wk(l,s,m);for(const g of p)a.push({source:g,target:f,start:{[n]:jw(d,m,"start",Math.max)},end:{[n]:jw(d,m,"end",Math.min)}})}}return a}function Fp(e,t,n,r){if(r)return;let s=t[e],i=n[e];return e==="angle"&&(s=sn(s),i=sn(i)),{property:e,start:s,end:i}}function RB(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,i=[];return t.segments.forEach(({start:a,end:l})=>{l=lh(a,l,s);const c=s[a],u=s[l];r!==null?(i.push({x:c.x,y:r}),i.push({x:u.x,y:r})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function lh(e,t,n){for(;t>e;t--){const r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function jw(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function $k(e,t){let n=[],r=!1;return ut(e)?(r=!0,n=e):n=RB(e,t),n.length?new is({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Sw(e){return e&&e.fill!==!1}function LB(e,t,n){let s=e[t].fill;const i=[t];let a;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Lt(s))return s;if(a=e[s],!a)return!1;if(a.visible)return s;i.push(s),s=a.fill}return!1}function FB(e,t,n){const r=VB(e);if(Ee(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Lt(s)&&Math.floor(s)===s?$B(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function $B(e,t,n,r){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=r?!1:n}function BB(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Ee(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function zB(e,t,n){let r;return e==="start"?r=n:e==="end"?r=t.options.reverse?t.min:t.max:Ee(e)?r=e.value:r=t.getBaseValue(),r}function VB(e){const t=e.options,n=t.fill;let r=Ne(n&&n.target,n);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function UB(e){const{scale:t,index:n,line:r}=e,s=[],i=r.segments,a=r.points,l=WB(t,n);l.push($k({x:null,y:t.bottom},r));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)HB(s,a[d],l)}return new is({points:s,options:{}})}function WB(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function HB(e,t,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:a,last:l,point:c}=qB(i,t,"x");if(!(!c||a&&l)){if(a)r.unshift(c);else if(e.push(c),!l)break}}e.push(...r)}function qB(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],i=e.segments,a=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=a[d.start][n],f=a[d.end][n];if(Er(s,h,f)){l=s===h,c=s===f;break}}return{first:l,last:c,point:r}}class Bk{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,r){const{x:s,y:i,radius:a}=this;return n=n||{start:0,end:Xe},t.arc(s,i,a,n.end,n.start,!0),!r.bounds}interpolate(t){const{x:n,y:r,radius:s}=this,i=t.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function GB(e){const{chart:t,fill:n,line:r}=e;if(Lt(n))return YB(t,n);if(n==="stack")return UB(e);if(n==="shape")return!0;const s=QB(e);return s instanceof Bk?s:$k(s,r)}function YB(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function QB(e){return(e.scale||{}).getPointPositionForValue?XB(e):KB(e)}function KB(e){const{scale:t={},fill:n}=e,r=BB(n,t);if(Lt(r)){const s=t.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function XB(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,i=r.reverse?t.max:t.min,a=zB(n,t,i),l=[];if(r.grid.circular){const c=t.getPointPositionForValue(0,i);return new Bk({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(a)})}for(let c=0;c<s;++c)l.push(t.getPointPositionForValue(c,a));return l}function _f(e,t,n){const r=GB(t),{chart:s,index:i,line:a,scale:l,axis:c}=t,u=a.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=s.getDatasetMeta(i),g=Sk(s,p);r&&a.points.length&&(sh(e,n),JB(e,{line:a,target:r,above:f,below:m,area:n,scale:l,axis:c,clip:g}),ih(e))}function JB(e,t){const{line:n,target:r,above:s,below:i,area:a,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==s&&(u==="x"?(Nw(e,r,a.top),If(e,{line:n,target:r,color:s,scale:l,property:u,clip:c}),e.restore(),e.save(),Nw(e,r,a.bottom)):u==="y"&&(Cw(e,r,a.left),If(e,{line:n,target:r,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),Cw(e,r,a.right),d=s)),If(e,{line:n,target:r,color:d,scale:l,property:u,clip:c}),e.restore()}function Nw(e,t,n){const{segments:r,points:s}=t;let i=!0,a=!1;e.beginPath();for(const l of r){const{start:c,end:u}=l,d=s[c],h=s[lh(c,u,s)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Cw(e,t,n){const{segments:r,points:s}=t;let i=!0,a=!1;e.beginPath();for(const l of r){const{start:c,end:u}=l,d=s[c],h=s[lh(c,u,s)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function If(e,t){const{line:n,target:r,property:s,color:i,scale:a,clip:l}=t,c=OB(n,r,s);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=r!==!0;e.save(),e.fillStyle=m,ZB(e,a,l,p&&Fp(s,h,f)),e.beginPath();const g=!!n.pathSegment(e,u);let y;if(p){g?e.closePath():kw(e,r,f,s);const b=!!r.pathSegment(e,d,{move:g,reverse:!0});y=g&&b,y||kw(e,r,h,s)}e.closePath(),e.fill(y?"evenodd":"nonzero"),e.restore()}}function ZB(e,t,n,r){const s=t.chart.chartArea,{property:i,start:a,end:l}=r||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=a,u=s.top,d=l,h=s.bottom):(c=s.left,u=a,d=s.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function kw(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var Zx={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let i,a,l,c;for(a=0;a<r;++a)i=e.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof is&&(c={visible:e.isDatasetVisible(a),index:a,fill:FB(l,a,r),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,s.push(c);for(a=0;a<r;++a)c=s[a],!(!c||c.fill===!1)&&(c.fill=LB(s,a,n.propagate))},beforeDraw(e,t,n){const r=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=s.length-1;a>=0;--a){const l=s[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),r&&l.fill&&_f(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;Sw(i)&&_f(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;!Sw(r)||n.drawTime!=="beforeDatasetDraw"||_f(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ew=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},ez=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Dw extends $r{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ze(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=Mt(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Ew(r,i);let u,d;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,s,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,g)=>{const y=r+n/2+i.measureText(p.text).width;(g===0||u[u.length-1]+y+2*l>a)&&(h+=d,u[u.length-(g>0?0:1)]=0,m+=d,f++),c[g]={left:0,top:m,row:f,width:y,height:s},u[u.length-1]+=y+l}),h}_fitCols(t,n,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let h=l,f=0,m=0,p=0,g=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:v,itemHeight:w}=tz(r,n,i,y,s);b>0&&m+w+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,g++,f=m=0),c[b]={left:p,top:m,col:g,width:v,height:w},f=Math.max(f,v),m+=w+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,a=ra(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=_t(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=_t(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+t+s,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+s}else{let l=0,c=_t(r,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=_t(r,this.top+t+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;sh(t,this),this._draw(),ih(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:a}=t,l=at.color,c=ra(t.rtl,this.left,this.width),u=Mt(a.font),{padding:d}=a,h=u.size,f=h/2;let m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:y}=Ew(a,h),b=function(k,N,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();const E=Ne(C.lineWidth,1);if(s.fillStyle=Ne(C.fillStyle,l),s.lineCap=Ne(C.lineCap,"butt"),s.lineDashOffset=Ne(C.lineDashOffset,0),s.lineJoin=Ne(C.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=Ne(C.strokeStyle,l),s.setLineDash(Ne(C.lineDash,[])),a.usePointStyle){const T={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},F=c.xPlus(k,p/2),R=N+f;dk(s,T,F,R,a.pointStyleWidth&&p)}else{const T=N+Math.max((h-g)/2,0),F=c.leftForLtr(k,p),R=na(C.borderRadius);s.beginPath(),Object.values(R).some($=>$!==0)?nd(s,{x:F,y:T,w:p,h:g,radius:R}):s.rect(F,T,p,g),s.fill(),E!==0&&s.stroke()}s.restore()},v=function(k,N,C){bl(s,C.text,k,N+y/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?m={x:_t(i,this.left+d,this.right-r[0]),y:this.top+d+S,line:0}:m={x:this.left+d,y:_t(i,this.top+S+d,this.bottom-n[0].height),line:0},yk(this.ctx,t.textDirection);const j=y+d;this.legendItems.forEach((k,N)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;const C=s.measureText(k.text).width,E=c.textAlign(k.textAlign||(k.textAlign=a.textAlign)),T=p+f+C;let F=m.x,R=m.y;c.setWidth(this.width),w?N>0&&F+T+d>this.right&&(R=m.y+=j,m.line++,F=m.x=_t(i,this.left+d,this.right-r[m.line])):N>0&&R+j>this.bottom&&(F=m.x=F+n[m.line].width+d,m.line++,R=m.y=_t(i,this.top+S+d,this.bottom-n[m.line].height));const $=c.x(F);if(b($,R,k),F=IF(E,F+p+f,w?F+T:this.right,t.rtl),v(c.x(F),R,k),w)m.x+=T+d;else if(typeof k.text!="string"){const D=u.lineHeight;m.y+=zk(k,D)+d}else m.y+=j}),vk(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=Mt(n.font),s=Mn(n.padding);if(!n.display)return;const i=ra(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=r.size/2,u=s.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=_t(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);d=u+_t(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=_t(l,h,h+f);a.textAlign=i.textAlign(Ux(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,bl(a,n.text,m,d,r)}_computeTitleHeight(){const t=this.options.title,n=Mt(t.font),r=Mn(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,i;if(Er(t,this.left,this.right)&&Er(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Er(t,s.left,s.left+s.width)&&Er(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!sz(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,i=ez(s,r);s&&!i&&ze(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!i&&ze(n.onHover,[t,r,this],this)}else r&&ze(n.onClick,[t,r,this],this)}}function tz(e,t,n,r,s){const i=nz(r,e,t,n),a=rz(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}function nz(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),t+n.size/2+r.measureText(s).width}function rz(e,t,n){let r=e;return typeof t.text!="string"&&(r=zk(t,n)),r}function zk(e,t){const n=e.text?e.text.length:0;return t*n}function sz(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var ey={id:"legend",_element:Dw,start(e,t,n){const r=e.legend=new Dw({ctx:e.ctx,options:n,chart:e});En.configure(e,r,n),En.addBox(e,r)},stop(e){En.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;En.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=Mn(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Vk extends $r{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=ut(r.text)?r.text.length:1;this._padding=Mn(r.padding);const i=s*Mt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:s,right:i,options:a}=this,l=a.align;let c=0,u,d,h;return this.isHorizontal()?(d=_t(l,r,i),h=n+t,u=i-r):(a.position==="left"?(d=r+t,h=_t(l,s,n),c=Oe*-.5):(d=i-t,h=_t(l,n,s),c=Oe*.5),u=s-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=Mt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);bl(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:Ux(n.align),textBaseline:"middle",translation:[a,l]})}}function iz(e,t){const n=new Vk({ctx:e.ctx,options:t,chart:e});En.configure(e,n,t),En.addBox(e,n),e.titleBlock=n}var Uk={id:"title",_element:Vk,start(e,t,n){iz(e,n)},stop(e){const t=e.titleBlock;En.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;En.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const So={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=e.length;i<a;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Ip(t,u);d<s&&(s=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function er(e,t){return t&&(ut(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function yr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function az(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:l}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Tw(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:l}=t,c=Mt(t.bodyFont),u=Mt(t.titleFont),d=Mt(t.footerFont),h=i.length,f=s.length,m=r.length,p=Mn(t.padding);let g=p.height,y=0,b=r.reduce((S,j)=>S+j.before.length+j.lines.length+j.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const S=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=m*S+(b-m)*c.lineHeight+(b-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let v=0;const w=function(S){y=Math.max(y,n.measureText(S).width+v)};return n.save(),n.font=u.string,Me(e.title,w),n.font=c.string,Me(e.beforeBody.concat(e.afterBody),w),v=t.displayColors?a+2+t.boxPadding:0,Me(r,S=>{Me(S.before,w),Me(S.lines,w),Me(S.after,w)}),v=0,n.font=d.string,Me(e.footer,w),n.restore(),y+=p.width,{width:y,height:g}}function oz(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function lz(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;if(e==="left"&&s+i+a>t.width||e==="right"&&s-i-a<0)return!0}function cz(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return r==="center"?u=s<=(l+c)/2?"left":"right":s<=i/2?u="left":s>=a-i/2&&(u="right"),lz(u,e,t,n)&&(u="center"),u}function Pw(e,t,n){const r=n.yAlign||t.yAlign||oz(e,n);return{xAlign:n.xAlign||t.xAlign||cz(e,t,n,r),yAlign:r}}function uz(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function dz(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function _w(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=s+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=na(a);let p=uz(t,l);const g=dz(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+s:l==="right"&&(p+=Math.max(h,m)+s),{x:At(p,0,r.width-t.width),y:At(g,0,r.height-t.height)}}function Ic(e,t,n){const r=Mn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function Iw(e){return er([],yr(e))}function hz(e,t,n){return Ci(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Aw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Wk={beforeTitle:pr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:pr,beforeBody:pr,beforeLabel:pr,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return _e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:pr,afterBody:pr,beforeFooter:pr,footer:pr,afterFooter:pr};function Yt(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?Wk[t].call(n,r):s}class $p extends $r{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Nk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=hz(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=Yt(r,"beforeTitle",this,t),i=Yt(r,"title",this,t),a=Yt(r,"afterTitle",this,t);let l=[];return l=er(l,yr(s)),l=er(l,yr(i)),l=er(l,yr(a)),l}getBeforeBody(t,n){return Iw(Yt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return Me(t,i=>{const a={before:[],lines:[],after:[]},l=Aw(r,i);er(a.before,yr(Yt(l,"beforeLabel",this,i))),er(a.lines,Yt(l,"label",this,i)),er(a.after,yr(Yt(l,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(t,n){return Iw(Yt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=Yt(r,"beforeFooter",this,t),i=Yt(r,"footer",this,t),a=Yt(r,"afterFooter",this,t);let l=[];return l=er(l,yr(s)),l=er(l,yr(i)),l=er(l,yr(a)),l}_createItems(t){const n=this._active,r=this.chart.data,s=[],i=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(az(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,r))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,r))),Me(l,d=>{const h=Aw(t.callbacks,d);s.push(Yt(h,"labelColor",this,d)),i.push(Yt(h,"labelPointStyle",this,d)),a.push(Yt(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=So[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=Tw(this,r),u=Object.assign({},l,c),d=Pw(this.chart,r,u),h=_w(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const i=this.getCaretPosition(t,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=na(l),{x:f,y:m}=t,{width:p,height:g}=n;let y,b,v,w,S,j;return i==="center"?(S=m+g/2,s==="left"?(y=f,b=y-a,w=S+a,j=S-a):(y=f+p,b=y+a,w=S-a,j=S+a),v=y):(s==="left"?b=f+Math.max(c,d)+a:s==="right"?b=f+p-Math.max(u,h)-a:b=this.caretX,i==="top"?(w=m,S=w-a,y=b-a,v=b+a):(w=m+g,S=w+a,y=b+a,v=b-a),j=w),{x1:y,x2:b,x3:v,y1:w,y2:S,y3:j}}drawTitle(t,n,r){const s=this.title,i=s.length;let a,l,c;if(i){const u=ra(r.rtl,this.x,this.width);for(t.x=Ic(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",a=Mt(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,c=0;c<i;++c)n.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===i&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,i){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,d=Mt(i.bodyFont),h=Ic(this,"left",i),f=s.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,b=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Mp(t,g,y,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Mp(t,g,y,b)}else{t.lineWidth=Ee(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),b=na(a.borderRadius);Object.values(b).some(v=>v!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,nd(t,{x:g,y:p,w:u,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),nd(t,{x:y,y:p+1,w:u-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,p,u,c),t.strokeRect(g,p,u,c),t.fillStyle=a.backgroundColor,t.fillRect(y,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=Mt(r.bodyFont);let f=h.lineHeight,m=0;const p=ra(r.rtl,this.x,this.width),g=function(C){n.fillText(C,p.x(t.x+m),t.y+f/2),t.y+=f+i},y=p.textAlign(a);let b,v,w,S,j,k,N;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,t.x=Ic(this,y,r),n.fillStyle=r.bodyColor,Me(this.beforeBody,g),m=l&&y!=="right"?a==="center"?u/2+d:u+2+d:0,S=0,k=s.length;S<k;++S){for(b=s[S],v=this.labelTextColors[S],n.fillStyle=v,Me(b.before,g),w=b.lines,l&&w.length&&(this._drawColorBox(n,t,S,p,r),f=Math.max(h.lineHeight,c)),j=0,N=w.length;j<N;++j)g(w[j]),f=h.lineHeight;Me(b.after,g)}m=0,f=h.lineHeight,Me(this.afterBody,g),t.y-=i}drawFooter(t,n,r){const s=this.footer,i=s.length;let a,l;if(i){const c=ra(r.rtl,this.x,this.width);for(t.x=Ic(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",a=Mt(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,l=0;l<i;++l)n.fillText(s[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=na(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&i==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),a==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),a==="center"&&i==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=So[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=Tw(this,t),c=Object.assign({},a,this._size),u=Pw(n,t,c),d=_w(t,c,u,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Mn(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,s,n),yk(t,n.textDirection),i.y+=a.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),vk(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Zu(r,s),a=this._positionChanged(s,n);(i||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(t,i,n,r),l=this._positionChanged(a,t),c=n||!Zu(a,i)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,s){const i=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:r,caretY:s,options:i}=this,a=So[i.position].call(this,t,n);return a!==!1&&(r!==a.x||s!==a.y)}}ue($p,"positioners",So);var ty={id:"tooltip",_element:$p,positioners:So,afterInit(e,t,n){n&&(e.tooltip=new $p({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Wk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fz=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function mz(e,t,n,r){const s=e.indexOf(t);if(s===-1)return fz(e,t,n,r);const i=e.lastIndexOf(t);return s!==i?n:s}const pz=(e,t)=>e===null?null:At(Math.round(e),0,t);function Mw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ad extends _a{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(_e(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:mz(r,t,Ne(n,t),this._addedLabels),pz(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=n;a++)s.push({value:a});return s}getLabelForValue(t){return Mw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ue(ad,"id","category"),ue(ad,"defaults",{ticks:{callback:Mw}});function gz(e,t){const n=[],{bounds:s,step:i,min:a,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:g,max:y}=t,b=!_e(a),v=!_e(l),w=!_e(u),S=(y-g)/(h+1);let j=_b((y-g)/p/m)*m,k,N,C,E;if(j<1e-14&&!b&&!v)return[{value:g},{value:y}];E=Math.ceil(y/j)-Math.floor(g/j),E>p&&(j=_b(E*j/p/m)*m),_e(c)||(k=Math.pow(10,c),j=Math.ceil(j*k)/k),s==="ticks"?(N=Math.floor(g/j)*j,C=Math.ceil(y/j)*j):(N=g,C=y),b&&v&&i&&SF((l-a)/i,j/1e3)?(E=Math.round(Math.min((l-a)/j,d)),j=(l-a)/E,N=a,C=l):w?(N=b?a:N,C=v?l:C,E=u-1,j=(C-N)/E):(E=(C-N)/j,$o(E,Math.round(E),j/1e3)?E=Math.round(E):E=Math.ceil(E));const T=Math.max(Ib(j),Ib(N));k=Math.pow(10,_e(c)?T:c),N=Math.round(N*k)/k,C=Math.round(C*k)/k;let F=0;for(b&&(f&&N!==a?(n.push({value:a}),N<a&&F++,$o(Math.round((N+F*j)*k)/k,a,Ow(a,S,e))&&F++):N<a&&F++);F<E;++F){const R=Math.round((N+F*j)*k)/k;if(v&&R>l)break;n.push({value:R})}return v&&f&&C!==l?n.length&&$o(n[n.length-1].value,l,Ow(l,S,e))?n[n.length-1].value=l:n.push({value:l}):(!v||C===l)&&n.push({value:C}),n}function Ow(e,t,{horizontal:n,minRotation:r}){const s=kr(r),i=(n?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/i,a)}class xz extends _a{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return _e(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const a=c=>s=n?s:c,l=c=>i=r?i:c;if(t){const c=cr(s),u=cr(i);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||a(s-c)}this.min=s,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=gz(s,i);return t.bounds==="ticks"&&NF(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return Hx(t,this.chart.options.locale,this.options.ticks.format)}}class od extends xz{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Lt(t)?t:0,this.max=Lt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=kr(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ue(od,"id","linear"),ue(od,"defaults",{ticks:{callback:uk.formatters.numeric}});const ch={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kt=Object.keys(ch);function Rw(e,t){return e-t}function Lw(e,t){if(_e(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),Lt(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(xl(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,s)),+a)}function Fw(e,t,n,r){const s=Kt.length;for(let i=Kt.indexOf(e);i<s-1;++i){const a=ch[Kt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=r)return Kt[i]}return Kt[s-1]}function yz(e,t,n,r,s){for(let i=Kt.length-1;i>=Kt.indexOf(n);i--){const a=Kt[i];if(ch[a].common&&e._adapter.diff(s,r,a)>=t-1)return a}return Kt[n?Kt.indexOf(n):0]}function vz(e){for(let t=Kt.indexOf(e)+1,n=Kt.length;t<n;++t)if(ch[Kt[t]].common)return Kt[t]}function $w(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=Vx(n,t),i=n[r]>=t?n[r]:n[s];e[i]=!0}}function bz(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let l,c;for(l=i;l<=a;l=+s.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function Bw(e,t,n){const r=[],s={},i=t.length;let a,l;for(a=0;a<i;++a)l=t[a],s[l]=a,r.push({value:l,major:!1});return i===0||!n?r:bz(e,r,s,n)}class ld extends _a{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new a$._date(t.adapters.date);s.init(n),Fo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Lw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Lt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Lt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,l=TF(s,i,a);return this._unit=n.unit||(r.autoSkip?Fw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):yz(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:vz(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),Bw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,i;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=At(n,0,a),r=At(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||Fw(i.minUnit,n,r,this._getLabelCapacity(n)),l=Ne(s.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=xl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(r,n,a)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+a);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<r;f=+t.add(f,l,a),m++)$w(d,f,p);return(f===r||s.bounds==="ticks"||m===1)&&$w(d,f,p),Object.keys(d).sort(Rw).map(g=>+g)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,i=this._unit,a=n||s[i];return this._adapter.format(t,a)}_tickFormatFunction(t,n,r,s){const i=this.options,a=i.ticks.callback;if(a)return ze(a,[t,n,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=r[n],m=u&&h&&f&&f.major;return this._adapter.format(t,s||(m?h:d))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=kr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*a,h:r*a+l*i}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(t,0,Bw(this,[t],this._majorUnit),s),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(Lw(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ok(t.sort(Rw))}}ue(ld,"id","time"),ue(ld,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ac(e,t,n){let r=0,s=e.length-1,i,a,l,c;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=ti(e,"pos",t)),{pos:i,time:l}=e[r],{pos:a,time:c}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=ti(e,"time",t)),{time:i,pos:l}=e[r],{time:a,pos:c}=e[s]);const u=a-i;return u?l+(c-l)*(t-i)/u:l}class zw extends ld{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ac(n,this.min),this._tableRange=Ac(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],i=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,l=s.length;a<l;++a)d=s[a+1],c=s[a-1],u=s[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(l-1)});return i}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Ac(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return Ac(this._table,r*this._tableRange+this._minPos,!0)}}ue(zw,"id","timeseries"),ue(zw,"defaults",ld.defaults);const Hk="label";function Vw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function wz(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function qk(e,t){e.labels=t}function Gk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hk;const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(a=>a[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function jz(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hk;const n={labels:[],datasets:[]};return qk(n,e.labels),Gk(n,e.datasets,t),n}function Sz(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=x.useRef(null),p=x.useRef(null),g=()=>{m.current&&(p.current=new Ia(m.current,{type:a,data:jz(l,i),options:c&&{...c},plugins:u}),Vw(t,p.current))},y=()=>{Vw(t,null),p.current&&(p.current.destroy(),p.current=null)};return x.useEffect(()=>{!s&&p.current&&c&&wz(p.current,c)},[s,c]),x.useEffect(()=>{!s&&p.current&&qk(p.current.config.data,l.labels)},[s,l.labels]),x.useEffect(()=>{!s&&p.current&&l.datasets&&Gk(p.current.config.data,l.datasets,i)},[s,l.datasets]),x.useEffect(()=>{p.current&&(s?(y(),setTimeout(g)):p.current.update(h))},[s,c,l.labels,l.datasets,h]),x.useEffect(()=>{p.current&&(y(),setTimeout(g))},[a]),x.useEffect(()=>(g(),()=>y()),[]),te.createElement("canvas",{ref:m,role:"img",height:n,width:r,...f},d)}const Nz=x.forwardRef(Sz);function ny(e,t){return Ia.register(t),x.forwardRef((n,r)=>te.createElement(Nz,{...n,ref:r,type:e}))}const Cz=ny("line",cu),kz=ny("bar",lu),Ez=ny("doughnut",bo);Ia.register(ad,od,fu,Uk,ty,ey,Zx);function Yk({data:e,options:t,height:n=300}){const s={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(kz,{data:e,options:s})})}Ia.register(ad,od,hu,is,Uk,ty,ey,Zx);function Dz({data:e,options:t,height:n=300}){const s={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(Cz,{data:e,options:s})})}Ia.register(jo,ty,ey,Zx);function Tz({data:e,options:t,height:n=250}){const s={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const a=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${a}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(Ez,{data:e,options:s})})}const Pz=x.memo(Dz),_z=x.memo(Yk),Iz=x.memo(Tz);function Af(){const{user:e,isAuthenticated:t}=We(),[n,r]=x.useState([]),[s,i]=x.useState([]),[a,l]=x.useState(0),[c,u]=x.useState(0),[d,h]=x.useState(!0),[f,m]=x.useState([]),[p,g]=x.useState([]),[y,b]=x.useState(null);x.useEffect(()=>{(async()=>{if(!t||!e){console.log(" Skipping data fetch - user not authenticated"),h(!1);return}try{console.log(" AdminDashboard: Starting data fetch..."),b(null);const[C,E,T,F,R]=await Promise.all([Bl().catch(I=>(console.error("Leads error:",I),[])),nh().catch(I=>(console.error("Jobs error:",I),[])),Lx().catch(I=>(console.error("Equipment error:",I),[])),zl().catch(I=>(console.error("Operators error:",I),[])),rh().catch(I=>(console.error("Deals error:",I),[]))]),$=I=>Array.isArray(I)?I:I&&typeof I=="object"&&I.data&&Array.isArray(I.data)||I&&typeof I=="object"&&I.success&&Array.isArray(I.data)?I.data:[],D=$(C),B=$(E),V=$(T),M=$(F),P=$(R);r(D),i(B),l(V.length),u(M.length),m(V),g(P)}catch(C){console.error(" Error fetching dashboard data:",C),b(`Failed to load dashboard data: ${(C==null?void 0:C.message)||C}`)}finally{h(!1)}})()},[t,e]);const v=x.useMemo(()=>{try{if(Array.isArray(p)&&p.length>0)return p.filter(N=>N&&N.stage==="won").reduce((N,C)=>N+(C.value||0),0)}catch(N){console.error("Error calculating revenue:",N)}return 0},[p]),w=x.useMemo(()=>Array.isArray(s)?s.filter(N=>N.status==="in_progress"||N.status==="scheduled").length/(a||1)*100:0,[s,a]),S=x.useMemo(()=>({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[15e4,2e5,18e4,22e4,25e4,v>0?v:3e5],backgroundColor:"rgba(56, 81, 159, 0.1)",borderColor:"#38519F",pointBackgroundColor:"#FFCC3F",pointBorderColor:"#38519F",pointHoverBackgroundColor:"#38519F",pointHoverBorderColor:"#FFCC3F",borderWidth:3,tension:.4,fill:!0}]}),[v]),j=x.useMemo(()=>({labels:["Available","In Use","Maintenance"],datasets:[{data:[Array.isArray(f)?f.filter(N=>N.status==="available").length:0,Array.isArray(f)?f.filter(N=>N.status==="in_use").length:0,Array.isArray(f)?f.filter(N=>N.status==="maintenance").length:0],backgroundColor:["#22C55E","#38519F","#FFCC3F"],borderColor:["#16A34A","#38519F","#FFCC3F"],borderWidth:2,hoverBorderWidth:4}]}),[f]),k=x.useMemo(()=>({labels:["Scheduled","In Progress","Completed","Cancelled"],datasets:[{label:"Jobs by Status",data:[Array.isArray(s)?s.filter(N=>N.status==="scheduled").length:0,Array.isArray(s)?s.filter(N=>N.status==="in_progress").length:0,Array.isArray(s)?s.filter(N=>N.status==="completed").length:0,Array.isArray(s)?s.filter(N=>N.status==="cancelled").length:0],backgroundColor:["rgba(56, 81, 159, 0.8)","rgba(34, 197, 94, 0.8)","rgba(64, 64, 64, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#38519F","#22C55E","#404040","#EF4444"],borderWidth:2,borderRadius:8}]}),[s]);return d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-20 w-20 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 h-20 w-20 border-4 border-transparent border-t-brand-gold rounded-full animate-spin animate-reverse",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Dashboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fetching your data..."})]})]})}):y?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(se,{variant:"bordered",className:"max-w-md bg-red-50 border-red-200",children:o.jsxs(ae,{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(TA,{className:"w-8 h-8 text-red-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),o.jsx("p",{className:"text-red-600 mb-6",children:y}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20",children:o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin"]}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your business today."})]}),o.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Last updated"}),o.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleTimeString()})]})})]})}),o.jsxs("section",{className:"grid gap-6 auto-fit-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},role:"region","aria-label":"Key Performance Indicators",children:[o.jsx(Vt,{title:"Total Revenue",value:Ve(v),icon:o.jsx(ir,{className:"h-5 w-5"}),variant:"primary",trend:{value:12.5,isPositive:!0},loading:d}),o.jsx(Vt,{title:"Equipment Fleet",value:a,subtitle:"Active units",icon:o.jsx(Ht,{className:"h-5 w-5"}),variant:"success",trend:{value:8.2,isPositive:!0},loading:d}),o.jsx(Vt,{title:"Active Jobs",value:s.length,subtitle:"In progress",icon:o.jsx(ZI,{className:"h-5 w-5"}),variant:"warning",trend:{value:3.1,isPositive:!1},loading:d}),o.jsx(Vt,{title:"Operators",value:c,subtitle:"Available staff",icon:o.jsx(tn,{className:"h-5 w-5"}),variant:"accent",trend:{value:5.7,isPositive:!0},loading:d})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",role:"region","aria-label":"Analytics Charts",children:[o.jsxs(se,{variant:"glass",className:"col-span-1",children:[o.jsx(ye,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(SA,{className:"h-4 w-4 text-green-600"})}),o.jsx(ve,{className:"text-lg",children:"Equipment Status"})]})}),o.jsx(ae,{children:o.jsx("div",{className:"h-64",children:o.jsx(Iz,{data:j,height:240})})})]}),o.jsxs(se,{variant:"glass",className:"col-span-1",children:[o.jsx(ye,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(mp,{className:"h-4 w-4 text-blue-600"})}),o.jsx(ve,{className:"text-lg",children:"Monthly Revenue"})]})}),o.jsx(ae,{children:o.jsx("div",{className:"h-64",children:o.jsx(Pz,{data:S,height:240})})})]}),o.jsxs(se,{variant:"glass",className:"col-span-1",children:[o.jsx(ye,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(RN,{className:"h-4 w-4 text-purple-600"})}),o.jsx(ve,{className:"text-lg",children:"Jobs by Status"})]})}),o.jsx(ae,{children:o.jsx("div",{className:"h-64",children:o.jsx(_z,{data:k,height:240})})})]})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx(U5,{className:"h-full"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(se,{variant:"gradient",className:"h-fit",children:[o.jsx(ye,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-blue/10 rounded-lg",children:o.jsx(Ht,{className:"h-4 w-4 text-brand-blue"})}),o.jsx(ve,{className:"text-lg",children:"Equipment Summary"})]})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Available Equipment:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(f)?f.filter(N=>N.status==="available").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"In Use:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Array.isArray(f)?f.filter(N=>N.status==="in_use").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Under Maintenance:"}),o.jsx("span",{className:"text-sm font-semibold text-orange-600",children:Array.isArray(f)?f.filter(N=>N.status==="maintenance").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Utilization Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[a>0?Math.round(w):0,"%"]})]})})]})})]}),o.jsxs(se,{variant:"gradient",className:"h-fit",children:[o.jsx(ye,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-gold/10 rounded-lg",children:o.jsx(mp,{className:"h-4 w-4 text-brand-gold"})}),o.jsx(ve,{className:"text-lg",children:"Business Overview"})]})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:n.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Active Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Won Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.filter(N=>N.stage==="won").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[n.length>0?Math.round((Array.isArray(p)?p.length:0)/n.length*100):0,"%"]})]})})]})})]})]})]})]})})}const ry="-",Az=e=>{const t=Oz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(ry);return l[0]===""&&l.length!==1&&l.shift(),Qk(l,t)||Mz(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},Qk=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Qk(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(ry);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Uw=/^\[(.+)\]$/,Mz=e=>{if(Uw.test(e)){const t=Uw.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Oz=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Bp(n[s],r,s,t);return r},Bp=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Ww(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(Rz(s)){Bp(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Bp(a,Ww(t,i),n,r)})})},Ww=(e,t)=>{let n=e;return t.split(ry).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Rz=e=>e.isThemeGetter,Lz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},zp="!",Vp=":",Fz=Vp.length,$z=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let a=0,l=0,c=0,u;for(let p=0;p<s.length;p++){let g=s[p];if(a===0&&l===0){if(g===Vp){i.push(s.slice(c,p)),c=p+Fz;continue}if(g==="/"){u=p;continue}}g==="["?a++:g==="]"?a--:g==="("?l++:g===")"&&l--}const d=i.length===0?s:s.substring(c),h=Bz(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const s=t+Vp,i=r;r=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},Bz=e=>e.endsWith(zp)?e.substring(0,e.length-1):e.startsWith(zp)?e.substring(1):e,zz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(a=>{a[0]==="["||t[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},Vz=e=>({cache:Lz(e.cacheSize),parseClassName:$z(e),sortModifiers:zz(e),...Az(e)}),Uz=/\s+/,Wz=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,a=[],l=e.trim().split(Uz);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let y=!!g,b=r(y?p.substring(0,g):p);if(!b){if(!y){c=d+(c.length>0?" "+c:c);continue}if(b=r(p),!b){c=d+(c.length>0?" "+c:c);continue}y=!1}const v=i(f).join(":"),w=m?v+zp:v,S=w+b;if(a.includes(S))continue;a.push(S);const j=s(b,y);for(let k=0;k<j.length;++k){const N=j[k];a.push(w+N)}c=d+(c.length>0?" "+c:c)}return c};function Hz(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Kk(t))&&(r&&(r+=" "),r+=n);return r}const Kk=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Kk(e[r]))&&(n&&(n+=" "),n+=t);return n};function qz(e,...t){let n,r,s,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=Vz(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=Wz(c,n);return s(c,d),d}return function(){return i(Hz.apply(null,arguments))}}const mt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Xk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Jk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Gz=/^\d+\/\d+$/,Yz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Qz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Kz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Xz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Jz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pi=e=>Gz.test(e),Ce=e=>!!e&&!Number.isNaN(Number(e)),Ur=e=>!!e&&Number.isInteger(Number(e)),Mf=e=>e.endsWith("%")&&Ce(e.slice(0,-1)),gr=e=>Yz.test(e),Zz=()=>!0,eV=e=>Qz.test(e)&&!Kz.test(e),Zk=()=>!1,tV=e=>Xz.test(e),nV=e=>Jz.test(e),rV=e=>!de(e)&&!he(e),sV=e=>Aa(e,nE,Zk),de=e=>Xk.test(e),$s=e=>Aa(e,rE,eV),Of=e=>Aa(e,cV,Ce),Hw=e=>Aa(e,eE,Zk),iV=e=>Aa(e,tE,nV),Mc=e=>Aa(e,sE,tV),he=e=>Jk.test(e),ro=e=>Ma(e,rE),aV=e=>Ma(e,uV),qw=e=>Ma(e,eE),oV=e=>Ma(e,nE),lV=e=>Ma(e,tE),Oc=e=>Ma(e,sE,!0),Aa=(e,t,n)=>{const r=Xk.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Ma=(e,t,n=!1)=>{const r=Jk.exec(e);return r?r[1]?t(r[1]):n:!1},eE=e=>e==="position"||e==="percentage",tE=e=>e==="image"||e==="url",nE=e=>e==="length"||e==="size"||e==="bg-size",rE=e=>e==="length",cV=e=>e==="number",uV=e=>e==="family-name",sE=e=>e==="shadow",dV=()=>{const e=mt("color"),t=mt("font"),n=mt("text"),r=mt("font-weight"),s=mt("tracking"),i=mt("leading"),a=mt("breakpoint"),l=mt("container"),c=mt("spacing"),u=mt("radius"),d=mt("shadow"),h=mt("inset-shadow"),f=mt("text-shadow"),m=mt("drop-shadow"),p=mt("blur"),g=mt("perspective"),y=mt("aspect"),b=mt("ease"),v=mt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...S(),he,de],k=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],C=()=>[he,de,c],E=()=>[Pi,"full","auto",...C()],T=()=>[Ur,"none","subgrid",he,de],F=()=>["auto",{span:["full",Ur,he,de]},Ur,he,de],R=()=>[Ur,"auto",he,de],$=()=>["auto","min","max","fr",he,de],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...C()],M=()=>[Pi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],P=()=>[e,he,de],I=()=>[...S(),qw,Hw,{position:[he,de]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",oV,sV,{size:[he,de]}],Z=()=>[Mf,ro,$s],ie=()=>["","none","full",u,he,de],le=()=>["",Ce,ro,$s],ge=()=>["solid","dashed","dotted","double"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>[Ce,Mf,qw,Hw],H=()=>["","none",p,he,de],Q=()=>["none",Ce,he,de],fe=()=>["none",Ce,he,de],_=()=>[Ce,he,de],L=()=>[Pi,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gr],breakpoint:[gr],color:[Zz],container:[gr],"drop-shadow":[gr],ease:["in","out","in-out"],font:[rV],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gr],shadow:[gr],spacing:["px",Ce],text:[gr],"text-shadow":[gr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pi,de,he,y]}],container:["container"],columns:[{columns:[Ce,de,he,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[Ur,"auto",he,de]}],basis:[{basis:[Pi,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ce,Pi,"auto","initial","none",de]}],grow:[{grow:["",Ce,he,de]}],shrink:[{shrink:["",Ce,he,de]}],order:[{order:[Ur,"first","last","none",he,de]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:M()}],w:[{w:[l,"screen",...M()]}],"min-w":[{"min-w":[l,"screen","none",...M()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...M()]}],h:[{h:["screen","lh",...M()]}],"min-h":[{"min-h":["screen","lh","none",...M()]}],"max-h":[{"max-h":["screen","lh",...M()]}],"font-size":[{text:["base",n,ro,$s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,he,Of]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mf,de]}],"font-family":[{font:[aV,de,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,he,de]}],"line-clamp":[{"line-clamp":[Ce,"none",he,Of]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",he,de]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",he,de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ce,"from-font","auto",he,$s]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[Ce,"auto",he,de]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he,de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he,de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ur,he,de],radial:["",he,de],conic:[Ur,he,de]},lV,iV]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ce,he,de]}],"outline-w":[{outline:["",Ce,ro,$s]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",d,Oc,Mc]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",h,Oc,Mc]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[Ce,$s]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",f,Oc,Mc]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[Ce,he,de]}],"mix-blend":[{"mix-blend":[...q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ce]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[he,de]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[Ce]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",he,de]}],filter:[{filter:["","none",he,de]}],blur:[{blur:H()}],brightness:[{brightness:[Ce,he,de]}],contrast:[{contrast:[Ce,he,de]}],"drop-shadow":[{"drop-shadow":["","none",m,Oc,Mc]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",Ce,he,de]}],"hue-rotate":[{"hue-rotate":[Ce,he,de]}],invert:[{invert:["",Ce,he,de]}],saturate:[{saturate:[Ce,he,de]}],sepia:[{sepia:["",Ce,he,de]}],"backdrop-filter":[{"backdrop-filter":["","none",he,de]}],"backdrop-blur":[{"backdrop-blur":H()}],"backdrop-brightness":[{"backdrop-brightness":[Ce,he,de]}],"backdrop-contrast":[{"backdrop-contrast":[Ce,he,de]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ce,he,de]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ce,he,de]}],"backdrop-invert":[{"backdrop-invert":["",Ce,he,de]}],"backdrop-opacity":[{"backdrop-opacity":[Ce,he,de]}],"backdrop-saturate":[{"backdrop-saturate":[Ce,he,de]}],"backdrop-sepia":[{"backdrop-sepia":["",Ce,he,de]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",he,de]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ce,"initial",he,de]}],ease:[{ease:["linear","initial",b,he,de]}],delay:[{delay:[Ce,he,de]}],animate:[{animate:["none",v,he,de]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,he,de]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:_()}],"skew-x":[{"skew-x":_()}],"skew-y":[{"skew-y":_()}],transform:[{transform:[he,de,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:L()}],"translate-x":[{"translate-x":L()}],"translate-y":[{"translate-y":L()}],"translate-z":[{"translate-z":L()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he,de]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he,de]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[Ce,ro,$s,Of]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},hV=qz(dV);function fV(...e){return hV(G2(e))}function Ul({status:e,className:t}){const n=r=>{switch(r){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("span",{className:fV("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}async function mV(e,t){const r=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"PATCH",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update quotation");return r.json()}async function iE(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotation by ID");return n.json()}async function pV(e){const n=await fetch("http://103.224.243.242:3001/api/quotations",{method:"POST",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create quotation");return n.json()}async function gV(){const t=await fetch("http://103.224.243.242:3001/api/quotations",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quotations");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function cd(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations?leadId=${encodeURIComponent(e)}`,{method:"GET",headers:$e(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotations");return await n.json()}const xV=Pa("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function yV({stages:e,height:t=250}){const n=Math.max(...e.map(s=>s.value)),r=e.reduce((s,i)=>s+i.value,0);return o.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((s,i)=>{const a=n===0?40:Math.max(40,Math.min(100,s.value/n*100)),l=r===0?0:Math.round(s.value/r*100),c=i===0?"first":i===e.length-1?"last":"middle";return o.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${a}%`},children:[o.jsx("div",{className:xV({position:c}),style:{backgroundColor:s.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:o.jsx("span",{className:"text-white text-xs font-medium",children:s.value})}),o.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[o.jsx("span",{className:"font-medium text-gray-800",children:s.label}),o.jsxs("span",{children:[l,"%"]})]})]},s.label)})})}function vV(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const g=await Bl(),b=(w=>Array.isArray(w)?w:w&&typeof w=="object"&&w.data&&Array.isArray(w.data)||w&&typeof w=="object"&&w.success&&Array.isArray(w.data)?w.data:[])(g);t(b);const v=b.filter(w=>w.status==="converted");if(v.length>0){const w=v[0],S=await cd(w.id);r(S)}}catch(g){console.error("Error fetching dashboard data:",g),t([]),r([])}finally{i(!1)}})()},[]);const a=Array.isArray(e)?e.filter(p=>p.status==="new").length:0,l=Array.isArray(e)?e.filter(p=>p.status==="in_process").length:0,c=Array.isArray(e)?e.filter(p=>p.status==="qualified").length:0,u=Array.isArray(e)?e.filter(p=>p.status==="converted").length:0,d=Array.isArray(n)?n.reduce((p,g)=>p+g.totalRent,0):0,h=Array.isArray(e)?[...e].sort((p,g)=>new Date(g.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5):[],f=[{label:"New",value:a,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return s?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Vt,{title:"New Leads",value:a,icon:o.jsx(tv,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Vt,{title:"In Process",value:l,icon:o.jsx(tn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Vt,{title:"Qualified Leads",value:c,icon:o.jsx(tv,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Vt,{title:"Quotation Value",value:Ve(d),icon:o.jsx(ir,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Lead Conversion Funnel"})}),o.jsx(ae,{className:"flex justify-center",children:o.jsx(yV,{stages:f,height:250})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Weekly Lead Generation"})}),o.jsx(ae,{children:o.jsx(Yk,{data:m,height:250})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ve,{children:"Recent Leads"}),o.jsx(rr,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),o.jsx(ae,{children:h.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Ul,{status:p.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(se,{className:"h-full",children:[o.jsx(ye,{children:o.jsx(ve,{children:"Upcoming Tasks"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx($N,{className:"h-5 w-5 text-primary-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(nA,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(RN,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}const bV=Pa("inline-flex items-center justify-center font-medium transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden",{variants:{variant:{default:"bg-gradient-to-r from-brand-blue to-brand-blue/90 text-white shadow-lg hover:shadow-xl hover:shadow-brand-blue/25 hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:scale-[1.02] focus:ring-red-500/30 active:scale-[0.98]",outline:"border-2 border-brand-blue text-brand-blue bg-transparent hover:bg-brand-blue hover:text-white hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:shadow-md hover:from-gray-200 hover:to-gray-300 hover:scale-[1.02] focus:ring-gray-400/30 active:scale-[0.98]",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-400/30 hover:scale-[1.02] active:scale-[0.98]",link:"text-brand-blue underline-offset-4 hover:underline hover:text-brand-blue/80 focus:ring-brand-blue/30",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:shadow-green-500/25 hover:scale-[1.02] focus:ring-green-500/30 active:scale-[0.98]",warning:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:shadow-amber-500/25 hover:scale-[1.02] focus:ring-amber-500/30 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-blue via-purple-600 to-brand-blue text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 hover:scale-[1.02] focus:ring-purple-500/30 active:scale-[0.98]",accent:"bg-gradient-to-r from-brand-gold via-brand-gold to-brand-gold/95 text-brand-dark shadow-xl hover:shadow-2xl hover:shadow-brand-gold/40 hover:scale-[1.05] hover:from-brand-gold/90 hover:to-brand-gold hover:brightness-110 focus:ring-brand-gold/50 active:scale-[0.98] font-semibold transform"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-lg",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-6 text-base rounded-xl",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-xs":"h-7 w-7 rounded-md","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),U=x.memo(te.forwardRef(({className:e="",variant:t,size:n,leftIcon:r,rightIcon:s,isLoading:i=!1,loadingText:a,fullWidth:l=!1,disabled:c,children:u,asChild:d=!1,...h},f)=>{const m=bV({variant:t,size:n}),p=l?"w-full":"",g=c||i,y=o.jsxs(o.Fragment,{children:[(t==="default"||t==="gradient")&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 ease-in-out"}),i?o.jsxs(o.Fragment,{children:[o.jsx(pA,{className:"w-4 h-4 animate-spin mr-2"}),a||"Loading..."]}):o.jsxs(o.Fragment,{children:[r&&o.jsx("span",{className:"mr-2 flex-shrink-0",children:r}),u,s&&o.jsx("span",{className:"ml-2 flex-shrink-0",children:s})]})]});return d?o.jsx("span",{className:`${m} ${p} ${e}`,children:y}):o.jsx("button",{className:`${m} ${p} ${e}`,ref:f,disabled:g,"aria-busy":i,...h,children:y})}));U.displayName="Button";const wV=x.memo(te.forwardRef(({icon:e,className:t="",size:n="icon",...r},s)=>o.jsx(U,{ref:s,size:n,className:t,...r,children:e})));wV.displayName="IconButton";const jV=x.memo(({children:e,className:t="",orientation:n="horizontal",size:r="default"})=>{const s=n==="horizontal"?"flex-row":"flex-col",i={sm:"space-x-2 space-y-0",default:"space-x-3 space-y-0",lg:"space-x-4 space-y-0"}[r];return o.jsx("div",{className:`flex ${s} ${i} ${t}`,role:"group",children:e})});jV.displayName="ButtonGroup";function SV(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(0),[a,l]=x.useState(0),[c,u]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const[f,m,p,g]=await Promise.all([Bl(),nh(),Lx(),zl()]);t(f),r(m),i(p.length),l(g.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return c?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Vt,{title:"Scheduled Jobs",value:d,icon:o.jsx(Yn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Vt,{title:"Equipment",value:s,icon:o.jsx(Ht,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),o.jsx(Vt,{title:"Operators",value:a,icon:o.jsx(tn,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ve,{children:"Recent Won Leads"}),o.jsx(rr,{to:"/jobs",children:o.jsx(U,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),o.jsx(ae,{children:e.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(U,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(se,{className:"h-full",children:[o.jsx(ye,{children:o.jsx(ve,{children:"Quick Actions"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(rr,{to:"/config/equipment",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(Ht,{size:16}),children:"Manage Equipment"})}),o.jsx(rr,{to:"/config/operators",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(tn,{size:16}),children:"Manage Operators"})}),o.jsx(rr,{to:"/jobs",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(Yn,{size:16}),children:"View Job Calendar"})}),o.jsx(rr,{to:"/feedback",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(xs,{size:16}),children:"Review Completed Jobs"})}),o.jsx(rr,{to:"/config",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(FN,{size:16}),children:"System Configuration"})}),o.jsx(rr,{to:"/config/maintenance",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(fx,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Recent Job Activity"})}),o.jsx(ae,{children:n.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.scheduledStartDate).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Ul,{status:h.status==="scheduled"?"pending":h.status})})]},h.id))})]})})})]})]})}const NV=Pa("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function ft({className:e,variant:t,title:n,description:r,onClose:s,duration:i=5e3,isVisible:a=!0,...l}){const[c,u]=x.useState(a);x.useEffect(()=>{u(a)},[a]),x.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),s==null||s()},i);return()=>clearTimeout(f)}},[c,i,s]);const d=()=>{u(!1),s==null||s()},h=()=>{switch(t){case"success":return o.jsx(xs,{className:"h-5 w-5 text-success-500"});case"error":return o.jsx(Ol,{className:"h-5 w-5 text-error-500"});case"warning":return o.jsx(wi,{className:"h-5 w-5 text-warning-500"});case"info":return o.jsx(Uu,{className:"h-5 w-5 text-primary-500"});default:return null}};return o.jsx(Rx,{children:c&&o.jsx(Zr.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:`pointer-events-auto ${NV({variant:t,className:e})}`,...l,children:o.jsxs("div",{className:"flex items-start",children:[t&&o.jsx("div",{className:"flex-shrink-0",children:h()}),o.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[o.jsx("p",{className:"text-sm font-medium",children:n}),r&&o.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:r})]}),o.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:o.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Ta,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function CV(){const{user:e}=We(),[t,n]=x.useState([]),[r,s]=x.useState({}),[i,a]=x.useState(!0),[l,c]=x.useState({show:!1,title:""});x.useEffect(()=>{(async()=>{if(e)try{const g=await k2(e.id);n(g);const y={};for(const b of g)if(!y[b.equipmentId]){const v=await E2(b.equipmentId);v&&(y[b.equipmentId]=v)}s(y)}catch(g){console.error("Error fetching operator data:",g)}finally{a(!1)}})()},[e]);const u=(p,g)=>{var y;n(b=>b.map(v=>v.id===p?{...v,status:g==="accept"?"accepted":g==="reject"?"rejected":"completed"}:v)),c({show:!0,title:g==="accept"?"Job Accepted":g==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(y=t.find(b=>b.id===p))==null?void 0:y.customerName} has been ${g}ed.`,variant:g==="reject"?"warning":"success"}),setTimeout(()=>{c(b=>({...b,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,g)=>new Date(p.startDate).getTime()-new Date(g.startDate).getTime());return i?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(Vt,{title:"Scheduled Jobs",value:d,icon:o.jsx(Yn,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Vt,{title:"Accepted Jobs",value:h,icon:o.jsx(xs,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Vt,{title:"Completed Jobs",value:f,icon:o.jsx(Qn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Upcoming Jobs"})}),o.jsx(ae,{children:m.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):o.jsx("div",{className:"space-y-4",children:m.map(p=>{var g;return o.jsx(se,{variant:"bordered",className:"overflow-hidden",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),o.jsx(Ul,{status:p.status})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Ht,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:((g=r[p.equipmentId])==null?void 0:g.name)||"Equipment"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(qd,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:p.location})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Yn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Qn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),o.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&o.jsxs(o.Fragment,{children:[o.jsx(U,{variant:"success",size:"sm",leftIcon:o.jsx(xs,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),o.jsx(U,{variant:"destructive",size:"sm",leftIcon:o.jsx(Ol,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&o.jsx(U,{variant:"secondary",size:"sm",leftIcon:o.jsx(xs,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Equipment Assignment"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-4",children:[Object.values(r).map(p=>o.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[o.jsx(Ht,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(r).length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Operator Information"})}),o.jsxs(ae,{children:[o.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[o.jsx("div",{className:"mr-4",children:o.jsx(lA,{className:"h-16 w-16 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),o.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),o.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&o.jsx(ft,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function Ke({label:e,error:t,className:n="",leftIcon:r,rightIcon:s,name:i,id:a,...l}){var d;const c={...l},u=i||a||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return o.jsxs("div",{className:"space-y-1.5",children:[e&&o.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[r&&o.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r}),o.jsx("input",{name:u,id:a||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-[#222] placeholder:text-[#888]
            text-base
            py-2 px-3 border border-[#CAC0B0] bg-white
            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${r?"pl-8 sm:pl-10":""}
            ${s?"pr-8 sm:pr-10":""}
            ${n}
          `,style:{color:"#222",WebkitTextFillColor:"#222",background:"#fff",borderColor:"#CAC0B0",fontWeight:600,letterSpacing:"0.08em"},placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),s&&o.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s})]}),t&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}function me({label:e,helperText:t,error:n,fullWidth:r=!0,className:s="",type:i="text",id:a,name:l,...c}){const u=a||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return o.jsxs("div",{className:`${r?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&o.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx(Ke,{id:u,name:l||u,type:i,className:`${r?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${s}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&o.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function De({options:e,value:t,onChange:n,label:r,error:s,leftIcon:i,className:a="",...l}){return o.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[r&&o.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[r,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[i&&o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",o.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${s?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${a}
          `,...l,children:e.map(c=>o.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:o.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:s})]})}function ur({label:e,error:t,helperText:n,className:r="",...s}){const i=s.id||`textarea-${s.name||Math.random().toString(36).substring(2,9)}`;return o.jsxs("div",{className:"space-y-2",children:[e&&o.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${s.required?"text-blue-700":"text-green-700"}`,children:[e,s.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!s.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${s.required?"bg-blue-50 border-blue-200 focus:bg-white":s.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${r}`,placeholder:s.placeholder?`${s.placeholder}${s.required?" *":""}`:"",...s}),t&&o.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}ur.displayName="TextArea";var kV=Object.defineProperty,EV=(e,t,n)=>t in e?kV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rf=(e,t,n)=>(EV(e,typeof t!="symbol"?t+"":t,n),n);let DV=class{constructor(){Rf(this,"current",this.detect()),Rf(this,"handoffState","pending"),Rf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},_r=new DV,On=(e,t)=>{_r.isServer?x.useEffect(e,t):x.useLayoutEffect(e,t)};function Ir(e){let t=x.useRef(e);return On(()=>{t.current=e},[e]),t}let Ge=function(e){let t=Ir(e);return te.useCallback((...n)=>t.current(...n),[t])};function uh(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ki(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return uh(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=ki();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function sy(){let[e]=x.useState(ki);return x.useEffect(()=>()=>e.dispose(),[e]),e}function TV(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(fg)(()=>()=>{},()=>!1,()=>!e)}function Oa(){let e=TV(),[t,n]=x.useState(_r.isHandoffComplete);return t&&_r.isHandoffComplete===!1&&n(!1),x.useEffect(()=>{t!==!0&&n(!0)},[t]),x.useEffect(()=>_r.handoff(),[]),e?!1:t}var Gw;let Ra=(Gw=te.useId)!=null?Gw:function(){let e=Oa(),[t,n]=te.useState(e?()=>_r.nextId():null);return On(()=>{t===null&&n(_r.nextId())},[t]),t!=null?""+t:void 0};function Ot(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ot),r}function aE(e){return _r.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Up=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ks=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Ks||{}),oE=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(oE||{}),PV=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(PV||{});function _V(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Up)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var lE=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(lE||{});function IV(e,t=0){var n;return e===((n=aE(e))==null?void 0:n.body)?!1:Ot(t,{0(){return e.matches(Up)},1(){let r=e;for(;r!==null;){if(r.matches(Up))return!0;r=r.parentElement}return!1}})}var AV=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(AV||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function li(e){e==null||e.focus({preventScroll:!0})}let MV=["textarea","input"].join(",");function OV(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,MV))!=null?n:!1}function RV(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let a=s.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function mu(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?RV(e):e:_V(e);s.length>0&&a.length>1&&(a=a.filter(m=>!s.includes(m))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(r))-1;if(t&4)return Math.max(0,a.indexOf(r))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=a.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=a[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&OV(f)&&f.select(),2}function cE(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function LV(){return/Android/gi.test(window.navigator.userAgent)}function FV(){return cE()||LV()}function Rc(e,t,n){let r=Ir(t);x.useEffect(()=>{function s(i){r.current(i)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[e,n])}function uE(e,t,n){let r=Ir(t);x.useEffect(()=>{function s(i){r.current(i)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[e,n])}function $V(e,t,n=!0){let r=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(a,l){if(!r.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||a.composed&&a.composedPath().includes(h))return}return!IV(c,lE.Loose)&&c.tabIndex!==-1&&a.preventDefault(),t(a,c)}let i=x.useRef(null);Rc("pointerdown",a=>{var l,c;r.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Rc("mousedown",a=>{var l,c;r.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Rc("click",a=>{FV()||i.current&&(s(a,()=>i.current),i.current=null)},!0),Rc("touchend",a=>s(a,()=>a.target instanceof HTMLElement?a.target:null),!0),uE("blur",a=>s(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Wl(...e){return x.useMemo(()=>aE(...e),[...e])}let dE=Symbol();function BV(e,t=!0){return Object.assign(e,{[dE]:t})}function Xn(...e){let t=x.useRef(e);x.useEffect(()=>{t.current=e},[e]);let n=Ge(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[dE]))?void 0:n}function iy(e,t){let n=x.useRef([]),r=Ge(e);x.useEffect(()=>{let s=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let l=r(t,s);return n.current=t,l}},[r,...t])}function ud(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var dd=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(dd||{}),os=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(os||{});function Ln({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:a,mergeRefs:l}){l=l??zV;let c=hE(t,e);if(i)return Lc(c,n,r,a,l);let u=s??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Lc(h,n,r,a,l)}if(u&1){let{unmount:d=!0,...h}=c;return Ot(d?0:1,{0(){return null},1(){return Lc({...h,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Lc(c,n,r,a,l)}function Lc(e,t={},n,r,s){let{as:i=n,children:a,refName:l="ref",...c}=Lf(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===x.Fragment&&Object.keys(Yw(c)).length>0){if(!x.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...g)=>ud(f==null?void 0:f.className(...g),c.className):ud(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return x.cloneElement(d,Object.assign({},hE(d.props,Yw(Lf(c,["ref"]))),h,u,{ref:s(d.ref,u.ref)},p))}return x.createElement(i,Object.assign({},Lf(c,["ref"]),i!==x.Fragment&&u,i!==x.Fragment&&h),d)}function zV(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function hE(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](s,...i){let a=n[r];for(let l of a){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return t}function gn(e){var t;return Object.assign(x.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Yw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Lf(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let VV="div";var hd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(hd||{});function UV(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ln({ourProps:i,theirProps:s,slot:{},defaultTag:VV,name:"Hidden"})}let Wp=gn(UV),ay=x.createContext(null);ay.displayName="OpenClosedContext";var an=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(an||{});function oy(){return x.useContext(ay)}function WV({value:e,children:t}){return te.createElement(ay.Provider,{value:e},t)}function HV(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let es=[];HV(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&es[0]!==t.target&&(es.unshift(t.target),es=es.filter(n=>n!=null&&n.isConnected),es.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function qV(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&GV(n)?!1:r}function GV(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var fE=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(fE||{});function mE(e,t,n,r){let s=Ir(n);x.useEffect(()=>{e=e??window;function i(a){s.current(a)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function Hl(){let e=x.useRef(!1);return On(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function pE(e){let t=Ge(e),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,uh(()=>{n.current&&t()})}),[t])}var No=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(No||{});function YV(){let e=x.useRef(0);return uE("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function gE(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let QV="div";var xE=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(xE||{});function KV(e,t){let n=x.useRef(null),r=Xn(n,t),{initialFocus:s,containers:i,features:a=30,...l}=e;Oa()||(a=1);let c=Wl(n);ZV({ownerDocument:c},!!(a&16));let u=eU({ownerDocument:c,container:n,initialFocus:s},!!(a&2));tU({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(a&8));let d=YV(),h=Ge(g=>{let y=n.current;y&&(b=>b())(()=>{Ot(d.current,{[No.Forwards]:()=>{mu(y,Ks.First,{skipElements:[g.relatedTarget]})},[No.Backwards]:()=>{mu(y,Ks.Last,{skipElements:[g.relatedTarget]})}})})}),f=sy(),m=x.useRef(!1),p={ref:r,onKeyDown(g){g.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let y=gE(i);n.current instanceof HTMLElement&&y.add(n.current);let b=g.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(yE(y,b)||(m.current?mu(n.current,Ot(d.current,{[No.Forwards]:()=>Ks.Next,[No.Backwards]:()=>Ks.Previous})|Ks.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&li(g.target)))}};return te.createElement(te.Fragment,null,!!(a&4)&&te.createElement(Wp,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:hd.Focusable}),Ln({ourProps:p,theirProps:l,defaultTag:QV,name:"FocusTrap"}),!!(a&4)&&te.createElement(Wp,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:hd.Focusable}))}let XV=gn(KV),so=Object.assign(XV,{features:xE});function JV(e=!0){let t=x.useRef(es.slice());return iy(([n],[r])=>{r===!0&&n===!1&&uh(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=es.slice())},[e,es,t]),Ge(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function ZV({ownerDocument:e},t){let n=JV(t);iy(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&li(n())},[t]),pE(()=>{t&&li(n())})}function eU({ownerDocument:e,container:t,initialFocus:n},r){let s=x.useRef(null),i=Hl();return iy(()=>{if(!r)return;let a=t.current;a&&uh(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(a.contains(l)){s.current=l;return}n!=null&&n.current?li(n.current):mu(a,Ks.First)===oE.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=e==null?void 0:e.activeElement})},[r]),s}function tU({ownerDocument:e,container:t,containers:n,previousActiveElement:r},s){let i=Hl();mE(e==null?void 0:e.defaultView,"focus",a=>{if(!s||!i.current)return;let l=gE(n);t.current instanceof HTMLElement&&l.add(t.current);let c=r.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?yE(l,u)?(r.current=u,li(u)):(a.preventDefault(),a.stopPropagation(),li(c)):li(r.current)},!0)}function yE(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let vE=x.createContext(!1);function nU(){return x.useContext(vE)}function Hp(e){return te.createElement(vE.Provider,{value:e.force},e.children)}function rU(e){let t=nU(),n=x.useContext(bE),r=Wl(e),[s,i]=x.useState(()=>{if(!t&&n!==null||_r.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return x.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),x.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),s}let sU=x.Fragment;function iU(e,t){let n=e,r=x.useRef(null),s=Xn(BV(d=>{r.current=d}),t),i=Wl(r),a=rU(r),[l]=x.useState(()=>{var d;return _r.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=x.useContext(qp),u=Oa();return On(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),On(()=>{if(l&&c)return c.register(l)},[c,l]),pE(()=>{var d;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a)))}),u?!a||!l?null:Ml.createPortal(Ln({ourProps:{ref:s},theirProps:n,defaultTag:sU,name:"Portal"}),l):null}let aU=x.Fragment,bE=x.createContext(null);function oU(e,t){let{target:n,...r}=e,s={ref:Xn(t)};return te.createElement(bE.Provider,{value:n},Ln({ourProps:s,theirProps:r,defaultTag:aU,name:"Popover.Group"}))}let qp=x.createContext(null);function lU(){let e=x.useContext(qp),t=x.useRef([]),n=Ge(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=Ge(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),s=x.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,x.useMemo(()=>function({children:i}){return te.createElement(qp.Provider,{value:s},i)},[s])]}let cU=gn(iU),uU=gn(oU),Gp=Object.assign(cU,{Group:uU});const dU=(e=>e.useSyncExternalStore)(fg);function hU(e){return dU(e.subscribe,e.getSnapshot,e.getSnapshot)}function fU(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let a=t[s].call(n,...i);a&&(n=a,r.forEach(l=>l()))}}}function mU(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,s=r.clientWidth-r.offsetWidth,i=e-s;n.style(r,"paddingRight",`${i}px`)}}}function pU(){return cE()?{before({doc:e,d:t,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=ki();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!r(d)&&(a=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function gU(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function xU(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ni=fU(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:ki(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:xU(n)},s=[pU(),mU(),gU()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ni.subscribe(()=>{let e=ni.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&ni.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ni.dispatch("TEARDOWN",n)}});function yU(e,t,n){let r=hU(ni),s=e?r.get(e):void 0,i=s?s.count>0:!1;return On(()=>{if(!(!e||!t))return ni.dispatch("PUSH",e,n),()=>ni.dispatch("POP",e,n)},[t,e]),i}let Ff=new Map,io=new Map;function Qw(e,t=!0){On(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function s(){var a;if(!r)return;let l=(a=io.get(r))!=null?a:1;if(l===1?io.delete(r):io.set(r,l-1),l!==1)return;let c=Ff.get(r);c&&(c["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",c["aria-hidden"]),r.inert=c.inert,Ff.delete(r))}let i=(n=io.get(r))!=null?n:0;return io.set(r,i+1),i!==0||(Ff.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[e,t])}function vU({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let s=x.useRef((r=n==null?void 0:n.current)!=null?r:null),i=Wl(s),a=Ge(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(s.current)||h.contains((u=(c=s.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:a,contains:Ge(l=>a().some(c=>c.contains(l))),mainTreeNodeRef:s,MainTreeNode:x.useMemo(()=>function(){return n!=null?null:te.createElement(Wp,{features:hd.Hidden,ref:s})},[s,n])}}let ly=x.createContext(()=>{});ly.displayName="StackContext";var Yp=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Yp||{});function bU(){return x.useContext(ly)}function wU({children:e,onUpdate:t,type:n,element:r,enabled:s}){let i=bU(),a=Ge((...l)=>{t==null||t(...l),i(...l)});return On(()=>{let l=s===void 0||s===!0;return l&&a(0,n,r),()=>{l&&a(1,n,r)}},[a,n,r,s]),te.createElement(ly.Provider,{value:a},e)}let wE=x.createContext(null);function jE(){let e=x.useContext(wE);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,jE),t}return e}function jU(){let[e,t]=x.useState([]);return[e.length>0?e.join(" "):void 0,x.useMemo(()=>function(n){let r=Ge(i=>(t(a=>[...a,i]),()=>t(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),s=x.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return te.createElement(wE.Provider,{value:s},n.children)},[t])]}let SU="p";function NU(e,t){let n=Ra(),{id:r=`headlessui-description-${n}`,...s}=e,i=jE(),a=Xn(t);On(()=>i.register(r),[r,i.register]);let l={ref:a,...i.props,id:r};return Ln({ourProps:l,theirProps:s,slot:i.slot||{},defaultTag:SU,name:i.name||"Description"})}let CU=gn(NU),kU=Object.assign(CU,{});var EU=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(EU||{}),DU=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(DU||{});let TU={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},fd=x.createContext(null);fd.displayName="DialogContext";function ql(e){let t=x.useContext(fd);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ql),n}return t}function PU(e,t,n=()=>[document.body]){yU(e,t,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function _U(e,t){return Ot(t.type,TU,e,t)}let IU="div",AU=dd.RenderStrategy|dd.Static;function MU(e,t){let n=Ra(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:a,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=x.useState(0),f=x.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=oy();s===void 0&&m!==null&&(s=(m&an.Open)===an.Open);let p=x.useRef(null),g=Xn(p,t),y=Wl(p),b=e.hasOwnProperty("open")||m!==null,v=e.hasOwnProperty("onClose");if(!b&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!b)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let w=s?0:1,[S,j]=x.useReducer(_U,{titleId:null,descriptionId:null,panelRef:x.createRef()}),k=Ge(()=>i(!1)),N=Ge(_=>j({type:0,id:_})),C=Oa()?c?!1:w===0:!1,E=d>1,T=x.useContext(fd)!==null,[F,R]=lU(),$={get current(){var _;return(_=S.panelRef.current)!=null?_:p.current}},{resolveContainers:D,mainTreeNodeRef:B,MainTreeNode:V}=vU({portals:F,defaultContainers:[$]}),M=E?"parent":"leaf",P=m!==null?(m&an.Closing)===an.Closing:!1,I=T||P?!1:C,z=x.useCallback(()=>{var _,L;return(L=Array.from((_=y==null?void 0:y.querySelectorAll("body > *"))!=null?_:[]).find(A=>A.id==="headlessui-portal-root"?!1:A.contains(B.current)&&A instanceof HTMLElement))!=null?L:null},[B]);Qw(z,I);let W=E?!0:C,Z=x.useCallback(()=>{var _,L;return(L=Array.from((_=y==null?void 0:y.querySelectorAll("[data-headlessui-portal]"))!=null?_:[]).find(A=>A.contains(B.current)&&A instanceof HTMLElement))!=null?L:null},[B]);Qw(Z,W),$V(D,_=>{_.preventDefault(),k()},!(!C||E));let le=!(E||w!==0);mE(y==null?void 0:y.defaultView,"keydown",_=>{le&&(_.defaultPrevented||_.key===fE.Escape&&(_.preventDefault(),_.stopPropagation(),k()))}),PU(y,!(P||w!==0||T),D),x.useEffect(()=>{if(w!==0||!p.current)return;let _=new ResizeObserver(L=>{for(let A of L){let G=A.target.getBoundingClientRect();G.x===0&&G.y===0&&G.width===0&&G.height===0&&k()}});return _.observe(p.current),()=>_.disconnect()},[w,p,k]);let[q,O]=jU(),H=x.useMemo(()=>[{dialogState:w,close:k,setTitleId:N},S],[w,S,k,N]),Q=x.useMemo(()=>({open:w===0}),[w]),fe={ref:g,id:r,role:l,"aria-modal":w===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":q};return te.createElement(wU,{type:"Dialog",enabled:w===0,element:p,onUpdate:Ge((_,L)=>{L==="Dialog"&&Ot(_,{[Yp.Add]:()=>h(A=>A+1),[Yp.Remove]:()=>h(A=>A-1)})})},te.createElement(Hp,{force:!0},te.createElement(Gp,null,te.createElement(fd.Provider,{value:H},te.createElement(Gp.Group,{target:p},te.createElement(Hp,{force:!1},te.createElement(O,{slot:Q,name:"Dialog.Description"},te.createElement(so,{initialFocus:a,containers:D,features:C?Ot(M,{parent:so.features.RestoreFocus,leaf:so.features.All&~so.features.FocusLock}):so.features.None},te.createElement(R,null,Ln({ourProps:fe,theirProps:u,slot:Q,defaultTag:IU,features:AU,visible:w===0,name:"Dialog"}))))))))),te.createElement(V,null))}let OU="div";function RU(e,t){let n=Ra(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=e,[{dialogState:i,close:a}]=ql("Dialog.Overlay"),l=Xn(t),c=Ge(d=>{if(d.target===d.currentTarget){if(qV(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),a()}}),u=x.useMemo(()=>({open:i===0}),[i]);return Ln({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:c},theirProps:s,slot:u,defaultTag:OU,name:"Dialog.Overlay"})}let LU="div";function FU(e,t){let n=Ra(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=e,[{dialogState:i},a]=ql("Dialog.Backdrop"),l=Xn(t);x.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let c=x.useMemo(()=>({open:i===0}),[i]);return te.createElement(Hp,{force:!0},te.createElement(Gp,null,Ln({ourProps:{ref:l,id:r,"aria-hidden":!0},theirProps:s,slot:c,defaultTag:LU,name:"Dialog.Backdrop"})))}let $U="div";function BU(e,t){let n=Ra(),{id:r=`headlessui-dialog-panel-${n}`,...s}=e,[{dialogState:i},a]=ql("Dialog.Panel"),l=Xn(t,a.panelRef),c=x.useMemo(()=>({open:i===0}),[i]),u=Ge(d=>{d.stopPropagation()});return Ln({ourProps:{ref:l,id:r,onClick:u},theirProps:s,slot:c,defaultTag:$U,name:"Dialog.Panel"})}let zU="h2";function VU(e,t){let n=Ra(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:a}]=ql("Dialog.Title"),l=Xn(t);x.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=x.useMemo(()=>({open:i===0}),[i]);return Ln({ourProps:{ref:l,id:r},theirProps:s,slot:c,defaultTag:zU,name:"Dialog.Title"})}let UU=gn(MU),WU=gn(FU),HU=gn(BU),qU=gn(RU),GU=gn(VU),Fc=Object.assign(UU,{Backdrop:WU,Panel:HU,Overlay:qU,Title:GU,Description:kU});function YU(e=0){let[t,n]=x.useState(e),r=Hl(),s=x.useCallback(c=>{r.current&&n(u=>u|c)},[t,r]),i=x.useCallback(c=>!!(t&c),[t]),a=x.useCallback(c=>{r.current&&n(u=>u&~c)},[n,r]),l=x.useCallback(c=>{r.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:s,hasFlag:i,removeFlag:a,toggleFlag:l}}function QU(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function $f(e,...t){e&&t.length>0&&e.classList.add(...t)}function Bf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function KU(e,t){let n=ki();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[i,a]=[r,s].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+a;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function XU(e,t,n,r){let s=n?"enter":"leave",i=ki(),a=r!==void 0?QU(r):()=>{};s==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=Ot(s,{enter:()=>t.enter,leave:()=>t.leave}),c=Ot(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=Ot(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Bf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),$f(e,...t.base,...l,...u),i.nextFrame(()=>{Bf(e,...t.base,...l,...u),$f(e,...t.base,...l,...c),KU(e,()=>(Bf(e,...t.base,...l),$f(e,...t.base,...t.entered),a()))}),i.dispose}function JU({immediate:e,container:t,direction:n,classes:r,onStart:s,onStop:i}){let a=Hl(),l=sy(),c=Ir(n);On(()=>{e&&(c.current="enter")},[e]),On(()=>{let u=ki();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&a.current)return u.dispose(),s.current(c.current),u.add(XU(d,r.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function Wr(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let dh=x.createContext(null);dh.displayName="TransitionContext";var ZU=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ZU||{});function e8(){let e=x.useContext(dh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function t8(){let e=x.useContext(hh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let hh=x.createContext(null);hh.displayName="NestingContext";function fh(e){return"children"in e?fh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function SE(e,t){let n=Ir(e),r=x.useRef([]),s=Hl(),i=sy(),a=Ge((m,p=os.Hidden)=>{let g=r.current.findIndex(({el:y})=>y===m);g!==-1&&(Ot(p,{[os.Unmount](){r.current.splice(g,1)},[os.Hidden](){r.current[g].state="hidden"}}),i.microTask(()=>{var y;!fh(r)&&s.current&&((y=n.current)==null||y.call(n))}))}),l=Ge(m=>{let p=r.current.find(({el:g})=>g===m);return p?p.state!=="visible"&&(p.state="visible"):r.current.push({el:m,state:"visible"}),()=>a(m,os.Unmount)}),c=x.useRef([]),u=x.useRef(Promise.resolve()),d=x.useRef({enter:[],leave:[],idle:[]}),h=Ge((m,p,g)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([y])=>y!==m)),t==null||t.chains.current[p].push([m,new Promise(y=>{c.current.push(y)})]),t==null||t.chains.current[p].push([m,new Promise(y=>{Promise.all(d.current[p].map(([b,v])=>v)).then(()=>y())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(p)):g(p)}),f=Ge((m,p,g)=>{Promise.all(d.current[p].splice(0).map(([y,b])=>b)).then(()=>{var y;(y=c.current.shift())==null||y()}).then(()=>g(p))});return x.useMemo(()=>({children:r,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d}),[l,a,r,h,f,d,u])}function n8(){}let r8=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Kw(e){var t;let n={};for(let r of r8)n[r]=(t=e[r])!=null?t:n8;return n}function s8(e){let t=x.useRef(Kw(e));return x.useEffect(()=>{t.current=Kw(e)},[e]),t}let i8="div",NE=dd.RenderStrategy;function a8(e,t){var n,r;let{beforeEnter:s,afterEnter:i,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...g}=e,y=x.useRef(null),b=Xn(y,t),v=(n=g.unmount)==null||n?os.Unmount:os.Hidden,{show:w,appear:S,initial:j}=e8(),[k,N]=x.useState(w?"visible":"hidden"),C=t8(),{register:E,unregister:T}=C;x.useEffect(()=>E(y),[E,y]),x.useEffect(()=>{if(v===os.Hidden&&y.current){if(w&&k!=="visible"){N("visible");return}return Ot(k,{hidden:()=>T(y),visible:()=>E(y)})}},[k,y,E,T,w,v]);let F=Ir({base:Wr(g.className),enter:Wr(c),enterFrom:Wr(u),enterTo:Wr(d),entered:Wr(h),leave:Wr(f),leaveFrom:Wr(m),leaveTo:Wr(p)}),R=s8({beforeEnter:s,afterEnter:i,beforeLeave:a,afterLeave:l}),$=Oa();x.useEffect(()=>{if($&&k==="visible"&&y.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[y,k,$]);let D=j&&!S,B=S&&w&&j,V=!$||D?"idle":w?"enter":"leave",M=YU(0),P=Ge(le=>Ot(le,{enter:()=>{M.addFlag(an.Opening),R.current.beforeEnter()},leave:()=>{M.addFlag(an.Closing),R.current.beforeLeave()},idle:()=>{}})),I=Ge(le=>Ot(le,{enter:()=>{M.removeFlag(an.Opening),R.current.afterEnter()},leave:()=>{M.removeFlag(an.Closing),R.current.afterLeave()},idle:()=>{}})),z=SE(()=>{N("hidden"),T(y)},C),W=x.useRef(!1);JU({immediate:B,container:y,classes:F,direction:V,onStart:Ir(le=>{W.current=!0,z.onStart(y,le,P)}),onStop:Ir(le=>{W.current=!1,z.onStop(y,le,I),le==="leave"&&!fh(z)&&(N("hidden"),T(y))})});let Z=g,ie={ref:b};return B?Z={...Z,className:ud(g.className,...F.current.enter,...F.current.enterFrom)}:W.current&&(Z.className=ud(g.className,(r=y.current)==null?void 0:r.className),Z.className===""&&delete Z.className),te.createElement(hh.Provider,{value:z},te.createElement(WV,{value:Ot(k,{visible:an.Open,hidden:an.Closed})|M.flags},Ln({ourProps:ie,theirProps:Z,defaultTag:i8,features:NE,visible:k==="visible",name:"Transition.Child"})))}function o8(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,a=x.useRef(null),l=Xn(a,t);Oa();let c=oy();if(n===void 0&&c!==null&&(n=(c&an.Open)===an.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=x.useState(n?"visible":"hidden"),h=SE(()=>{d("hidden")}),[f,m]=x.useState(!0),p=x.useRef([n]);On(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let g=x.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);x.useEffect(()=>{if(n)d("visible");else if(!fh(h))d("hidden");else{let w=a.current;if(!w)return;let S=w.getBoundingClientRect();S.x===0&&S.y===0&&S.width===0&&S.height===0&&d("hidden")}},[n,h]);let y={unmount:s},b=Ge(()=>{var w;f&&m(!1),(w=e.beforeEnter)==null||w.call(e)}),v=Ge(()=>{var w;f&&m(!1),(w=e.beforeLeave)==null||w.call(e)});return te.createElement(hh.Provider,{value:h},te.createElement(dh.Provider,{value:g},Ln({ourProps:{...y,as:x.Fragment,children:te.createElement(CE,{ref:l,...y,...i,beforeEnter:b,beforeLeave:v})},theirProps:{},defaultTag:x.Fragment,features:NE,visible:u==="visible",name:"Transition"})))}function l8(e,t){let n=x.useContext(dh)!==null,r=oy()!==null;return te.createElement(te.Fragment,null,!n&&r?te.createElement(Qp,{ref:t,...e}):te.createElement(CE,{ref:t,...e}))}let Qp=gn(o8),CE=gn(a8),c8=gn(l8),zf=Object.assign(Qp,{Child:c8,Root:Qp});const u8={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function Ct({isOpen:e,onClose:t,title:n,description:r,children:s,size:i="md"}){return o.jsx(zf,{show:e,as:x.Fragment,children:o.jsxs(Fc,{as:"div",className:"relative z-50",onClose:t,children:[o.jsx(zf.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),o.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:o.jsx(zf.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:o.jsxs(Fc.Panel,{className:`w-full ${u8[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[o.jsxs("div",{children:[n&&o.jsx(Fc.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),r&&o.jsx(Fc.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:r})]}),o.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Ta,{className:"h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:s})]})})})})]})})}const Vf="http://103.224.243.242:3001/api",d8=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},ao=async(e,t={})=>{var n,r;try{console.log(` API Call: ${t.method||"GET"} ${Vf}${e}`);let s="";try{s=d8()}catch(c){throw c}const i={"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{},...t.headers||{}},a=await fetch(`${Vf}${e}`,{...t,headers:i});if(console.log(` API Response: ${a.status} ${a.statusText} for ${e}`),e==="/quotations"){const c=a.clone();try{const u=await c.json();if(console.log(` Quotations API Response Data (${e}):`,u),u&&u.length>0){console.log(" First quotation details:",{id:u[0].id,customerName:u[0].customerName,customerId:u[0].customerId,customerContact:JSON.stringify(u[0].customerContact).substring(0,100),selectedEquipment:u[0].selectedEquipment?`${u[0].selectedEquipment.name||"Unnamed"} (${u[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const d=u[0].selectedEquipment&&u[0].selectedEquipment.name,h=u[0].selectedMachines&&Array.isArray(u[0].selectedMachines)&&u[0].selectedMachines.length>0;console.log(" Equipment data check:",{hasEquipment:!!d,hasMachines:!!h,machineCount:h?u[0].selectedMachines.length:0,firstMachine:h?u[0].selectedMachines[0].name:"N/A"});const f=!!u[0].customerId,m=!!u[0].customerName,p=u[0].customerContact&&typeof u[0].customerContact=="object"&&Object.keys(u[0].customerContact).length>0;console.log(" Customer data check:",{hasCustomerId:f,hasCustomerName:m,hasCustomerContact:p,customerType:p?typeof u[0].customerContact:"N/A"})}}catch(u){console.error("Error parsing response data:",u)}}if(!a.ok){let c=`API Error: ${a.status} ${a.statusText}`;const u=a.headers.get("content-type");console.error(`API Error: ${a.status} ${a.statusText} for ${Vf}${e}`),console.error("Response Headers:",{"content-type":u,"content-length":a.headers.get("content-length")});try{if(u&&u.includes("application/json")){const d=await a.json();if(c=d.error||c,d.details&&(c+=` - ${d.details}`),console.error("API Error JSON:",d),a.status===401)throw console.warn(" Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((r=t.headers)==null?void 0:r["X-Bypass-Auth"])||"Not present"},environment:"production",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const d=await a.text();d&&(console.error("API Error Text:",d.substring(0,300)),c+=` - ${d.substring(0,100)}`)}}catch(d){console.error("Error parsing API error response:",d),c+=" (Error response could not be parsed)"}throw new Error(`${c} (${e})`)}const l=await a.json();return l&&typeof l=="object"&&"success"in l&&"data"in l?l.data:l}catch(s){throw console.error(`API call failed: ${e}`,s),s}},Fn={get:e=>ao(e,{method:"GET"}),post:(e,t)=>ao(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>ao(e,{method:"PUT",body:JSON.stringify(t)}),patch:(e,t)=>ao(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>ao(e,{method:"DELETE"})},kE=async()=>{try{console.log(" DEBUG: customerService.getCustomers() called"),console.log(' DEBUG: About to call api.get("/customers")');const e=await Fn.get("/customers");return console.log(" DEBUG: api.get response received:",e),console.log(" DEBUG: Response type:",typeof e,"Array?",Array.isArray(e)),e}catch(e){return console.error(" DEBUG: Failed to fetch customers:",e),console.error(" DEBUG: Error details:",e.message,e.stack),[]}},EE=async e=>{try{console.log("Creating customer via API:",e);const t=await Fn.post("/customers",e);return console.log("Customer created successfully:",t),t}catch(t){throw console.error("Failed to create customer:",t),new Error(t.message||"Failed to create customer")}},h8=async(e,t)=>{try{return await Fn.put(`/customers/${e}`,t)}catch(n){throw console.error(`Failed to update customer ${e}:`,n),new Error(n.message||"Failed to update customer")}},f8=async e=>{try{return await Fn.delete(`/customers/${e}`),!0}catch(t){throw console.error(`Failed to delete customer ${e}:`,t),new Error(t.message||"Failed to delete customer")}};function m8({isOpen:e,onClose:t,onSelect:n,initialCustomerData:r}){const[s,i]=x.useState("select"),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState(!0),[f,m]=x.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",address:(r==null?void 0:r.address)||"",companyName:(r==null?void 0:r.companyName)||"",designation:(r==null?void 0:r.designation)||""});x.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{console.log(" Fetching customers for modal...");const v=await kE();console.log(" Received customers:",v),l(v)}catch(v){console.error(" Error fetching customers:",v)}finally{h(!1)}},g=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const v=await EE({...f,name:f.name.trim(),contactName:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A",type:"other",notes:""});console.log("Created new customer:",v),n(v)}catch(v){console.error("Error creating customer:",v),alert("Error creating customer")}},y=v=>{console.log("Selected existing customer:",v),n(v)},b=a.filter(v=>{var w;return v.name.toLowerCase().includes(c.toLowerCase())||v.email.toLowerCase().includes(c.toLowerCase())||((w=v.id)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))});return o.jsx(Ct,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(U,{variant:s==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),o.jsx(U,{variant:s==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",address:(r==null?void 0:r.address)||"",companyName:(r==null?void 0:r.companyName)||"",designation:(r==null?void 0:r.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),s==="select"?o.jsxs(o.Fragment,{children:["            ",o.jsxs("div",{className:"relative mb-2",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),o.jsx(me,{placeholder:"Search customers...",value:c,onChange:v=>u(v.target.value),className:"pl-10"}),c&&o.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),o.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?o.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):b.length===0?o.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):b.map(v=>o.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>y(v),children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"font-semibold text-base text-gray-900",children:v.name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[v.companyName&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:v.companyName}),v.designation&&v.companyName&&o.jsx("div",{className:"hidden sm:inline-block text-gray-700",children:""}),v.designation&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:v.designation})]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-700 truncate",children:v.email}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mt-0.5",children:["ID: ",v.id]})]})},v.id))})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(me,{label:"Customer Name",value:f.name,onChange:v=>m(w=>({...w,name:v.target.value})),placeholder:"Enter customer name",required:!0}),o.jsx(me,{label:"Company Name",value:f.companyName,onChange:v=>m(w=>({...w,companyName:v.target.value})),placeholder:"Enter company name",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(me,{label:"Designation",value:f.designation,onChange:v=>m(w=>({...w,designation:v.target.value})),placeholder:"Enter designation",required:!0}),o.jsx(me,{label:"Email",type:"email",value:f.email,onChange:v=>m(w=>({...w,email:v.target.value})),placeholder:"Enter email address",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(me,{label:"Phone",value:f.phone,onChange:v=>m(w=>({...w,phone:v.target.value})),placeholder:"Enter phone number",required:!0}),o.jsx(me,{label:"Address",value:f.address,onChange:v=>m(w=>({...w,address:v.target.value})),placeholder:"Enter address",required:!0})]}),"            ",o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[o.jsx(U,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(U,{onClick:g,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function md(){return o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx(Uu,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",o.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[o.jsx(Uu,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",o.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const p8=({data:e,dataType:t,className:n})=>{const[r,s]=x.useState(!1);return x.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),a=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});s(i||a)},[e]),r?o.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),o.jsxs("p",{children:["You are currently viewing ",o.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",o.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsx("li",{children:"Check that the API server is running"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),o.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[o.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},g8=e=>{if(!e)return console.warn("API response is null or undefined"),[];if(Array.isArray(e))return e;if(e.data&&Array.isArray(e.data)||e.success&&e.data&&Array.isArray(e.data))return e.data;if(e.items&&Array.isArray(e.items))return e.items;if(typeof e=="object"&&!Array.isArray(e)){const t=Object.values(e);if(t.length===1&&Array.isArray(t[0]))return t[0]}return console.warn("Unable to extract array from API response:",e),[]},x8=e=>{if(!e)return"No item";const t=e.customerName||e.customer_name||e.customer&&e.customer.name||"Unknown",n=e.email||e.customer&&e.customer.email||"",r=e.customerId||e.customer_id||e.id||"";return`${t}${n?` (${n})`:""}${r?` [${r}]`:""}`},Xw=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],y8=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],v8=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function b8(){const{user:e}=We(),t=Rn(),[n,r]=x.useState([]),[s,i]=x.useState([]),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[S,j]=x.useState(null),[k,N]=x.useState({show:!1,title:""}),C=new Date().toISOString().split("T")[0],[E,T]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[F,R]=x.useState(0),[$,D]=x.useState(null),[B,V]=x.useState(!1),[M,P]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",serviceNeeded:"",siteLocation:"",startDate:"",rentalDays:1,shiftTiming:"",status:"new",source:"",designation:"",notes:""});x.useEffect(()=>{I(),z()},[]),x.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),W()},[n,c,d]),x.useEffect(()=>{if(v&&S){const _=new Date().toISOString().split("T")[0];P({fullName:S.customerName||"",companyName:S.companyName||"",phoneNumber:S.phone||"",email:S.email||"",serviceNeeded:S.serviceNeeded||"",siteLocation:S.siteLocation||"",startDate:S.startDate||_,rentalDays:S.rentalDays||1,shiftTiming:S.shiftTiming||"",status:S.status||"new",source:S.source||"",designation:S.designation||"",notes:S.notes||""})}},[v,S]);const I=async()=>{try{console.log("Fetching leads from API...");const _=await Bl(),L=g8(_);console.log(" Debug leads response:",{originalResponse:_,extractedData:L,isArray:Array.isArray(L),length:Array.isArray(L)?L.length:"not array",firstLead:L.length>0?x8(L[0]):"none"}),console.log("Leads data received:",L),r(L||[]),m(!1)}catch(_){console.error("Error fetching leads:",_),Q("Error fetching leads","error"),r([]),m(!1)}},z=async()=>{try{const L=`${"http://103.224.243.242:3001/api".replace(/\/$/,"")}/auth/sales-agents`;console.log("Fetching sales agents from API at:",L);const A=await fetch(L,{headers:{"Content-Type":"application/json","X-Bypass-Auth":"development-only-123"}});if(A.ok){const G=await A.json();console.log("Sales agents fetched:",G),i(G)}else console.error("Failed to fetch sales agents:",A.status),i([])}catch(_){console.error("Error fetching sales agents:",_),i([])}},W=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads. Current filters:`,{searchTerm:c,statusFilter:d});let _=[...n];c&&(_=_.filter(L=>{var A,G,X,Y;return((A=L==null?void 0:L.customerName)==null?void 0:A.toLowerCase().includes(c.toLowerCase()))||!1||((G=L==null?void 0:L.companyName)==null?void 0:G.toLowerCase().includes(c.toLowerCase()))||!1||((X=L==null?void 0:L.email)==null?void 0:X.toLowerCase().includes(c.toLowerCase()))||!1||((Y=L==null?void 0:L.phone)==null?void 0:Y.includes(c))||!1}),console.log(`After search filter: ${_.length} leads`)),d!=="all"?(_=_.filter(L=>(L==null?void 0:L.status)===d),console.log(`After status filter (${d}): ${_.length} leads`)):(_=_.filter(L=>(L==null?void 0:L.status)!=="converted"),console.log(`After excluding converted leads: ${_.length} leads`)),console.log(`Final filtered leads: ${_.length} leads match criteria`),l(_)},Z=async _=>{var G;if(_.preventDefault(),!E.fullName||!E.phoneNumber||!E.email||!E.machineryType||!E.location||!E.startDate||!E.rentalDays){Q("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)){Q("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(E.phoneNumber)){Q("Please enter a valid phone number","error");return}try{const X=(e==null?void 0:e.role)==="sales_agent"?e.id:E.assignedTo,Y=(e==null?void 0:e.role)==="sales_agent"?e.name:((G=s.find(we=>we.id===E.assignedTo))==null?void 0:G.name)||"",pe={customerName:E.fullName,companyName:E.companyName,email:E.email,phone:E.phoneNumber,serviceNeeded:E.machineryType,siteLocation:E.location,startDate:E.startDate,rentalDays:parseInt(E.rentalDays),shiftTiming:E.shiftTiming,status:"new",notes:E.notes,designation:E.designation,...X&&X.trim()!==""?{assignedTo:X,assignedToName:Y}:{}};console.log("Creating lead with data:",pe);const re=await D5(pe);r(we=>[...we,re]),g(!1),H(),Q("Lead created successfully","success")}catch(X){console.error("Error creating lead:",X),Q("Error creating lead","error")}},ie=async(_,L)=>{try{const A=await wb(_,L);A&&(r(G=>G.map(X=>X.id===_?A:X)),Q("Lead status updated","success"))}catch(A){console.error("Error updating lead status:",A),Q("Error updating lead status","error")}},le=_=>{console.log("Selected customer:",_),D(_),b(!1),setTimeout(()=>{V(!0)},100)},ge=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:S,selectedCustomer:$,dealValue:F}),!S){Q("No lead selected","error");return}if(!$){Q("No customer selected","error");return}const _=await A5({title:`Deal for ${$.name}`,description:`Deal created from lead for ${$.name}${$.companyName?` (${$.companyName})`:""}`,leadId:S.id,customerId:$.id,stage:"qualification",value:F,expectedCloseDate:new Date().toISOString(),customer:{name:$.name,email:$.email||S.email,phone:$.phone||S.phone,company:$.companyName||"",address:$.address||"",designation:$.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:S.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",_),await wb(S.id,"converted"),r(L=>L.map(A=>A.id===S.id?{...A,status:"converted"}:A)),Q("Lead converted to deal successfully","success"),V(!1),b(!1),j(null),D(null),R(0),t("/deals")}catch(_){console.error("Error converting lead to deal:",_),Q("Error converting lead to deal","error")}finally{m(!1)}},q=async _=>{if(_.status!=="qualified"){Q("Only qualified leads can be converted to deals","warning");return}j(_),b(!0)},O=async(_,L)=>{try{if(L===""){console.log("Unassigning lead",_);const X=await jb(_,"","Unassigned");X&&(r(Y=>Y.map(pe=>pe.id===_?X:pe)),Q("Lead unassigned successfully","success"));return}const A=s.find(X=>X.id===L);if(!A){Q("Selected sales agent not found","error");return}const G=await jb(_,L,A.name);G&&(r(X=>X.map(Y=>Y.id===_?G:Y)),Q("Lead assignment updated","success"))}catch(A){console.error("Error updating lead assignment:",A),Q("Error updating lead assignment","error")}},H=()=>{T({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},Q=(_,L="success")=>{N({show:!0,title:_,variant:L}),setTimeout(()=>N({show:!1,title:""}),3e3)},fe=async _=>{if(_.preventDefault(),!M.fullName||!M.phoneNumber||!M.email||!M.serviceNeeded||!M.siteLocation||!M.startDate||!M.rentalDays||M.rentalDays<1){Q("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.email)){Q("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(M.phoneNumber)){Q("Please enter a valid phone number","error");return}try{const G=await E5(S.id,{customerName:M.fullName,companyName:M.companyName,email:M.email,phone:M.phoneNumber,serviceNeeded:M.serviceNeeded,siteLocation:M.siteLocation,startDate:M.startDate,rentalDays:M.rentalDays,shiftTiming:M.shiftTiming,status:M.status,source:M.source,designation:M.designation,notes:M.notes});console.log("Update response:",G),G?r(X=>{const Y=X.map(pe=>pe.id===S.id?G:pe);return console.log("Updated leads array:",Y),Y}):(console.log("No updated lead returned, refetching all leads"),await I()),w(!1),j(null),Q("Lead updated successfully","success")}catch(G){console.error("Error updating lead:",G),Q("Error updating lead","error")}};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(p8,{data:n,dataType:"leads"}),o.jsxs(se,{children:[o.jsxs(ye,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4",children:[o.jsx(ve,{className:"text-xl font-semibold text-gray-900",children:"Leads Pipeline"}),o.jsx(U,{onClick:()=>g(!0),className:"whitespace-nowrap self-start sm:self-auto",leftIcon:o.jsx(Pn,{className:"h-4 w-4"}),variant:"accent",children:"Add Lead"})]}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4 p-4 bg-gradient-to-r from-gray-50/80 to-gray-100/50 rounded-xl border border-gray-200/60 shadow-sm relative z-10",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx(fr,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),o.jsx(Ke,{type:"text",placeholder:"Search leads...",value:c,onChange:_=>u(_.target.value),className:"w-full bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 min-w-0 text-gray-900 placeholder:text-gray-500"})]}),o.jsx("div",{className:"relative z-20 w-full sm:w-[180px] flex-shrink-0",children:o.jsx(De,{value:d,onChange:_=>h(_),options:[{value:"all",label:"All Status"},...Xw],className:"w-full bg-white border-gray-200"})})]})]}),o.jsx(ae,{children:f?o.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):a.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):o.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200/60 bg-white shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assigned To"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(_=>o.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/30 transition-all duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.customerName||"Unknown Customer"}),_.companyName&&o.jsx("div",{className:"text-sm text-gray-500",children:_.companyName}),!_.customerName&&!_.companyName&&_.id&&o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",_.id.substring(0,8),"..."]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.serviceNeeded||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.siteLocation||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(De,{value:_.status,onChange:L=>ie(_.id,L),options:Xw,className:"min-w-[130px]"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?o.jsx(De,{value:_.assignedTo||"",onChange:L=>O(_.id,L),options:[{value:"",label:"Unassigned"},...s.map(L=>({value:L.id,label:L.name}))],className:"min-w-[160px]"}):o.jsx("div",{className:"text-sm text-gray-900",children:!_.assignedTo||_.assignedTo===""?"Unassigned":_.assignedToName||"Unassigned"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{j(_),w(!0)},leftIcon:o.jsx(Da,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Edit"}),_.status==="qualified"&&o.jsx(U,{variant:"outline",size:"sm",onClick:()=>q(_),leftIcon:o.jsx(eA,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Convert to Deal"})]})})]},_.id))})]})})})]}),o.jsx(Ct,{isOpen:p,onClose:()=>{g(!1),H()},title:"Create New Lead",size:"lg",children:o.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[o.jsx(md,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(me,{label:"Full Name",value:E.fullName,onChange:_=>T(L=>({...L,fullName:_.target.value})),required:!0}),o.jsx(me,{label:"Company Name",value:E.companyName,onChange:_=>T(L=>({...L,companyName:_.target.value})),helperText:"Optional"}),o.jsx(me,{label:"Phone Number",type:"tel",value:E.phoneNumber,onChange:_=>T(L=>({...L,phoneNumber:_.target.value})),required:!0}),o.jsx(me,{label:"Email Address",type:"email",value:E.email,onChange:_=>T(L=>({...L,email:_.target.value})),required:!0}),o.jsx(De,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...y8],value:E.machineryType,onChange:_=>T(L=>({...L,machineryType:_})),required:!0}),o.jsx(me,{label:"Site Location",value:E.location,onChange:_=>T(L=>({...L,location:_.target.value})),required:!0}),o.jsx(me,{label:"Start Date",type:"date",value:E.startDate,min:C,onChange:_=>T(L=>({...L,startDate:_.target.value})),required:!0}),o.jsx(me,{label:"Number of Rental Days",type:"number",min:"1",value:E.rentalDays,onChange:_=>{const L=Math.max(1,parseInt(_.target.value)||1);T(A=>({...A,rentalDays:L.toString()}))},required:!0}),o.jsx(De,{label:"Shift Timing",options:v8,value:E.shiftTiming,onChange:_=>T(L=>({...L,shiftTiming:_})),required:!0}),o.jsx(me,{label:"Designation",value:E.designation,onChange:_=>T(L=>({...L,designation:_.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&o.jsx(De,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...s.map(_=>({value:_.id,label:_.name}))],value:E.assignedTo,onChange:_=>T(L=>({...L,assignedTo:_})),required:!0})]}),o.jsx(ur,{label:"Additional Notes",value:E.notes,onChange:_=>T(L=>({...L,notes:_.target.value})),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{g(!1),H()},children:"Cancel"}),"            ",o.jsx(U,{type:"submit",variant:"accent",children:"Create Lead"})]})]})}),o.jsx(m8,{isOpen:y,onClose:()=>{b(!1),j(null),D(null),R(0)},onSelect:le,initialCustomerData:S?{name:S.customerName,email:S.email||"",phone:S.phone||"",companyName:S.companyName||"",address:"",designation:S.designation||""}:void 0}),o.jsx(Ct,{isOpen:B,onClose:()=>{V(!1),j(null),D(null),R(0)},title:"Enter Deal Value",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(me,{label:"Deal Value",type:"number",value:F===0?"":F,onChange:_=>{const L=_.target.value;R(L===""?0:Number(L))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{V(!1),j(null),D(null),R(0)},children:"Cancel"}),o.jsx(U,{onClick:ge,variant:"accent",children:"Create Deal"})]})]})}),o.jsx(Ct,{isOpen:v,onClose:()=>{w(!1),j(null)},title:"Edit Lead Details",size:"lg",children:S&&o.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[o.jsx(md,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(me,{label:"Full Name",value:M.fullName,onChange:_=>P(L=>({...L,fullName:_.target.value})),required:!0}),o.jsx(me,{label:"Company Name",value:M.companyName,onChange:_=>P(L=>({...L,companyName:_.target.value})),helperText:"Optional"}),o.jsx(me,{label:"Phone Number",type:"tel",value:M.phoneNumber,onChange:_=>P(L=>({...L,phoneNumber:_.target.value})),required:!0}),o.jsx(me,{label:"Email Address",type:"email",value:M.email,onChange:_=>P(L=>({...L,email:_.target.value})),required:!0}),o.jsx(me,{label:"Service Needed",value:M.serviceNeeded,onChange:_=>P(L=>({...L,serviceNeeded:_.target.value})),required:!0}),o.jsx(me,{label:"Site Location",value:M.siteLocation,onChange:_=>P(L=>({...L,siteLocation:_.target.value})),required:!0}),o.jsx(me,{label:"Start Date",type:"date",value:M.startDate,onChange:_=>P(L=>({...L,startDate:_.target.value})),required:!0}),o.jsx(me,{label:"Rental Days",type:"number",min:"1",value:M.rentalDays.toString(),onChange:_=>P(L=>({...L,rentalDays:parseInt(_.target.value)||1})),required:!0}),o.jsx(me,{label:"Shift Timing",value:M.shiftTiming,onChange:_=>P(L=>({...L,shiftTiming:_.target.value})),placeholder:"e.g., Day Shift, Night Shift"}),o.jsx(De,{label:"Status",value:M.status,onChange:_=>P(L=>({...L,status:_})),options:[{label:"New",value:"new"},{label:"In Process",value:"in_process"},{label:"Qualified",value:"qualified"},{label:"Unqualified",value:"unqualified"},{label:"Lost",value:"lost"},{label:"Converted",value:"converted"}],required:!0}),o.jsx(De,{label:"Source",value:M.source,onChange:_=>P(L=>({...L,source:_})),options:[{label:"Select Source",value:""},{label:"Website",value:"website"},{label:"Referral",value:"referral"},{label:"Direct",value:"direct"},{label:"Social Media",value:"social"},{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Other",value:"other"}]})]}),o.jsx("div",{children:o.jsx(me,{label:"Designation",value:M.designation,onChange:_=>P(L=>({...L,designation:_.target.value})),placeholder:"Job title or role"})}),o.jsx("div",{children:o.jsx(ur,{label:"Notes",value:M.notes,onChange:_=>P(L=>({...L,notes:_.target.value})),placeholder:"Additional notes or comments...",rows:3})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{w(!1),j(null)},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:"Save Changes"})]})]})}),k.show&&o.jsx(ft,{title:k.title,variant:k.variant,isVisible:k.show,onClose:()=>N({show:!1,title:""})})]})}function w8({toast:e,onRemove:t}){return x.useEffect(()=>{const n=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(n)},[e.id,e.duration,t]),o.jsxs("div",{className:`
      fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg
      ${e.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}
    `,children:[e.type==="success"?o.jsx(LN,{size:20,className:"text-green-600"}):o.jsx(Ol,{size:20,className:"text-red-600"}),o.jsx("span",{className:`text-sm font-medium ${e.type==="success"?"text-green-800":"text-red-800"}`,children:e.message}),o.jsx("button",{onClick:()=>t(e.id),className:`ml-2 ${e.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"}`,children:o.jsx(Ta,{size:16})})]})}function j8(){const[e,t]=x.useState([]),n=(s,i="success")=>{const a=Date.now().toString();t(l=>[...l,{id:a,message:s,type:i}])},r=s=>{t(i=>i.filter(a=>a.id!==s))};return x.useEffect(()=>{window.showToast=n},[]),o.jsx("div",{className:"fixed top-0 right-0 z-50 space-y-2 p-4",children:e.map(s=>o.jsx(w8,{toast:s,onRemove:r},s.id))})}const S8="modulepreload",N8=function(e){return"/"+e},Jw={},Zw=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=N8(c),c in Jw)return;Jw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":S8,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},C8=[{value:"incident1",label:"Incident 1 - 5,000",amount:5e3},{value:"incident2",label:"Incident 2 - 10,000",amount:1e4},{value:"incident3",label:"Incident 3 - 15,000",amount:15e3}],DE=({calculations:e,formData:t,additionalParams:n,showGst:r=!0})=>o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qn,{className:"w-4 h-4 text-blue-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Working Cost"})]}),o.jsx("span",{className:"font-bold text-blue-900",children:Ve(e.workingCost)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(tn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Food & Accommodation"})]}),o.jsx("span",{className:"font-bold text-green-900",children:Ve(e.foodAccomCost)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ht,{className:"w-4 h-4 text-orange-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Mob/Demob Cost"})]}),o.jsx("span",{className:"font-bold text-orange-900",children:Ve(e.mobDemobCost)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lx,{className:"w-4 h-4 text-red-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Risk & Usage"})]}),o.jsx("span",{className:"font-bold text-red-900",children:Ve(e.riskAdjustment+e.usageLoadFactor)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ir,{className:"w-4 h-4 text-purple-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Extra Commercial Charges"})]}),o.jsx("span",{className:"font-bold text-purple-900",children:Ve(Number(t.extraCharge))})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(wi,{className:"w-4 h-4 text-indigo-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Incidental Charges"})]}),o.jsx("span",{className:"font-bold text-indigo-900",children:Ve(t.incidentalCharges.reduce((s,i)=>{const a=C8.find(l=>l.value===i);return s+(a?a.amount:0)},0))})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(tn,{className:"w-4 h-4 text-cyan-600"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Other Factors"})]}),o.jsx("span",{className:"font-bold text-cyan-900",children:Ve((t.otherFactors.includes("rigger")?(n==null?void 0:n.riggerAmount)||4e4:0)+(t.otherFactors.includes("helper")?(n==null?void 0:n.helperAmount)||12e3:0))})]}),o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{className:"font-semibold text-gray-900",children:Ve(e.totalAmount-e.gstAmount)})]}),r&&t.includeGst&&o.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[o.jsx("span",{children:"GST (18%)"}),o.jsx("span",{className:"font-semibold text-gray-900",children:Ve(e.gstAmount)})]}),o.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-300",children:[o.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Amount"}),o.jsx("span",{className:"text-2xl font-bold text-blue-600",children:Ve(e.totalAmount)})]})]})})]}),$c=[{id:"customer_details",label:"Customer Details",description:"Customer name, contact information, and address",category:"Customer Information",icon:o.jsx(mi,{className:"w-4 h-4"}),defaultChecked:!0},{id:"company_info",label:"Company Information",description:"Company name and business details",category:"Customer Information",icon:o.jsx(tA,{className:"w-4 h-4"}),defaultChecked:!0},{id:"project_duration",label:"Project Duration",description:"Number of days and working hours",category:"Project Details",icon:o.jsx(Yn,{className:"w-4 h-4"}),defaultChecked:!0},{id:"site_location",label:"Site Location & Distance",description:"Work site location and distance from base",category:"Project Details",icon:o.jsx(qd,{className:"w-4 h-4"}),defaultChecked:!0},{id:"shift_details",label:"Shift & Working Hours",description:"Shift type, day/night, and working schedule",category:"Project Details",icon:o.jsx(Qn,{className:"w-4 h-4"}),defaultChecked:!0},{id:"equipment_list",label:"Equipment List",description:"Selected machines and equipment details",category:"Equipment Information",icon:o.jsx(Ht,{className:"w-4 h-4"}),defaultChecked:!0},{id:"equipment_rates",label:"Equipment Base Rates",description:"Base rental rates for each equipment",category:"Equipment Information",icon:o.jsx(ir,{className:"w-4 h-4"}),defaultChecked:!1},{id:"working_cost",label:"Working Cost",description:"Basic working cost calculation",category:"Cost Breakdown",icon:o.jsx(fp,{className:"w-4 h-4"}),defaultChecked:!0},{id:"food_accommodation",label:"Food & Accommodation",description:"Food and accommodation charges",category:"Cost Breakdown",icon:o.jsx(tn,{className:"w-4 h-4"}),defaultChecked:!0},{id:"mob_demob",label:"Mobilization/Demobilization",description:"Transportation and setup costs",category:"Cost Breakdown",icon:o.jsx(Ht,{className:"w-4 h-4"}),defaultChecked:!0},{id:"risk_usage",label:"Risk & Usage Factors",description:"Risk assessment and usage load factors",category:"Cost Breakdown",icon:o.jsx(lx,{className:"w-4 h-4"}),defaultChecked:!0},{id:"extra_charges",label:"Extra Commercial Charges",description:"Additional commercial charges",category:"Cost Breakdown",icon:o.jsx(ir,{className:"w-4 h-4"}),defaultChecked:!0},{id:"incidental_charges",label:"Incidental Charges",description:"Miscellaneous and incidental costs",category:"Cost Breakdown",icon:o.jsx(ha,{className:"w-4 h-4"}),defaultChecked:!0},{id:"other_factors",label:"Other Factors",description:"Rigger, helper, and other operational factors",category:"Cost Breakdown",icon:o.jsx(tn,{className:"w-4 h-4"}),defaultChecked:!0},{id:"cost_summary",label:"Cost Summary",description:"Detailed breakdown of all costs",category:"Financial Summary",icon:o.jsx(fp,{className:"w-4 h-4"}),defaultChecked:!0},{id:"gst_details",label:"GST Details",description:"GST calculation and total amount",category:"Financial Summary",icon:o.jsx(ir,{className:"w-4 h-4"}),defaultChecked:!0},{id:"total_amount",label:"Total Amount",description:"Final total amount including all charges",category:"Financial Summary",icon:o.jsx(ir,{className:"w-4 h-4"}),defaultChecked:!0},{id:"terms_conditions",label:"Terms & Conditions",description:"Payment terms and business conditions",category:"Terms & Conditions",icon:o.jsx(Wt,{className:"w-4 h-4"}),defaultChecked:!0},{id:"payment_terms",label:"Payment Terms",description:"Payment schedule and billing details",category:"Terms & Conditions",icon:o.jsx(ir,{className:"w-4 h-4"}),defaultChecked:!0}],TE=({isOpen:e,onClose:t,onPrint:n})=>{const[r,s]=x.useState($c.filter(d=>d.defaultChecked).map(d=>d.id)),i=d=>{s(h=>h.includes(d)?h.filter(f=>f!==d):[...h,d])},a=()=>{s($c.map(d=>d.id))},l=()=>{s([])},c=()=>{n(r),t()},u=$c.reduce((d,h)=>(d[h.category]||(d[h.category]=[]),d[h.category].push(h),d),{});return o.jsx(Ct,{isOpen:e,onClose:t,title:"Print Options",size:"lg",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Select the information you want to include in your quotation print:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(U,{variant:"outline",size:"sm",onClick:a,children:"Select All"}),o.jsx(U,{variant:"outline",size:"sm",onClick:l,children:"Deselect All"})]})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:Object.entries(u).map(([d,h])=>o.jsxs(se,{children:[o.jsx(ye,{className:"pb-3",children:o.jsx(ve,{className:"text-base font-medium text-gray-900",children:d})}),o.jsx(ae,{className:"pt-0",children:o.jsx("div",{className:"space-y-3",children:h.map(f=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("input",{type:"checkbox",id:f.id,checked:r.includes(f.id),onChange:()=>i(f.id),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("label",{htmlFor:f.id,className:"flex items-center gap-2 cursor-pointer",children:[f.icon,o.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.label})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.description})]})]},f.id))})})]},d))}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Wt,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Selected: ",r.length," of ",$c.length," options"]})]}),o.jsx("p",{className:"text-xs text-blue-700",children:"Your quotation will be generated with the selected information. You can always come back and modify these settings for future prints."})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[o.jsx(U,{variant:"outline",onClick:t,children:"Cancel"}),o.jsxs(U,{onClick:c,disabled:r.length===0,className:"bg-blue-600 hover:bg-blue-700",children:["Generate PDF (",r.length," items)"]})]})]})})};function k8(e,t){let n=e;return t.includes("customer_details")||(n=n.replace(/<div[^>]*id=["']customer-details["'][^>]*>[\s\S]*?<\/div>/gi,"")),n}const E8={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1},{id:"sample-equipment-2",machineType:"mobile_crane",equipmentId:"crane-002",name:"100T Mobile Crane",baseRates:{micro:8e3,small:7500,monthly:7e3,yearly:6500},baseRate:7e3,runningCostPerKm:150,quantity:2}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",workingCost:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile_crane",otherFactors:["rigger","area","customer_reputation"],dealType:"credit",sundayWorking:"no"};function D8({template:e,quotation:t,onDownloadPDF:n,onSendEmail:r,className:s=""}){const[i,a]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState({show:!1,title:""});x.useEffect(()=>{if(!e){d("Template is required");return}if(!e.content){d("Template content is required");return}d(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t)},[e,t]);const m=t||E8,p=(j,k="success")=>{f({show:!0,title:j,variant:k}),setTimeout(()=>f({show:!1,title:""}),3e3)};let g="";try{e&&e.content?(g=H2(m,e),console.log("Generated merged content:",g?g.substring(0,100)+"...":"empty")):(console.warn("Cannot merge template - missing template or content"),g='<div style="padding: 20px;">Template content could not be loaded</div>')}catch(j){console.error("Error merging template:",j),d("Failed to merge template with quotation data"),g='<div style="padding: 20px; color: red;">Error generating preview</div>'}const b=[{key:"customer_name",label:"Customer Name",category:"Customer"},{key:"equipment_name",label:"Equipment Name",category:"Equipment"},{key:"project_duration",label:"Project Duration",category:"Project"},{key:"total_amount",label:"Total Amount",category:"Financial"}].reduce((j,k)=>(j[k.category]||(j[k.category]=[]),j[k.category].push(k),j),{}),v=()=>{if(!g){p("No content to copy","error");return}navigator.clipboard.writeText(g).then(()=>{p("Content copied to clipboard","success")}).catch(()=>{p("Failed to copy content","error")})},w=()=>{c(!0)},S=j=>{p(`Generating PDF with ${j.length} selected options`,"success");const k=k8(g,j);console.log("Filtered content for PDF:",k),n&&n()};return u?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[o.jsx("strong",{children:"Error:"})," ",u]})}):o.jsxs("div",{className:`space-y-4 sm:space-y-6 ${s}`,children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[o.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[o.jsx("div",{className:"flex-1",children:o.jsxs(se,{children:[o.jsx(ye,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsx(ve,{className:"text-base sm:text-lg",children:"Quotation Preview"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsxs(U,{variant:"outline",size:"xs",onClick:w,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(dx,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),r&&o.jsxs(U,{variant:"outline",size:"xs",onClick:r,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(da,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),o.jsxs(ae,{className:"p-3 sm:p-6",children:[u?o.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[o.jsxs("p",{className:"font-medium",children:["Error: ",u]}),o.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,g?o.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:g}}):o.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[o.jsx(st,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),o.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}),e&&!e.content&&o.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[o.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),o.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]})}),o.jsxs("div",{className:"w-full md:w-80 bg-white rounded-lg shadow p-6 mt-6 md:mt-0",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Quotation Summary"}),o.jsx(DE,{calculations:{workingCost:m.workingCost||0,foodAccomCost:((m.foodResources||0)+(m.accomResources||0))*(m.numberOfDays||1),mobDemobCost:m.mobDemob||0,riskAdjustment:m.riskFactor==="high"?1e4:m.riskFactor==="medium"?5e3:0,usageLoadFactor:m.usage==="heavy"?5e3:0,extraCharges:m.extraCharge||0,gstAmount:m.includeGst?Math.round((m.totalRent||0)*.18):0,totalAmount:m.includeGst?Math.round((m.totalRent||0)*1.18):m.totalRent||0},formData:{extraCharge:m.extraCharge||0,incidentalCharges:m.incidentalCharges||[],otherFactors:m.otherFactors||[],includeGst:m.includeGst},additionalParams:{riggerAmount:4e4,helperAmount:12e3}})]})]}),o.jsxs(se,{children:[o.jsx(ye,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsxs(ve,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o.jsx(Wt,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsxs(U,{variant:"outline",size:"xs",onClick:()=>a(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(Uu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),o.jsx(U,{variant:"outline",size:"xs",onClick:v,disabled:!g,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&o.jsx(ae,{className:"px-3 sm:px-6",children:o.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&o.jsxs(se,{children:[o.jsx(ye,{className:"p-3 sm:p-6",children:o.jsx(ve,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),o.jsxs(ae,{className:"p-3 sm:p-6",children:[o.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(b).map(([j,k])=>o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:j}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:k.map(N=>o.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:N.description,onClick:()=>{navigator.clipboard.writeText(`{{${N.key}}}`),p(`Copied {{${N.key}}}`,"success")},children:`{{${N.key}}}`},N.key))})]},j))}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),h.show&&o.jsx(ft,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})}),o.jsx(TE,{isOpen:l,onClose:()=>c(!1),onPrint:S})]})}const T8=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function P8(){const{user:e}=We(),t=Rn(),[n,r]=x.useState([]),[s,i]=x.useState([]),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(null),[y,b]=x.useState(null),[v,w]=x.useState(null),[S,j]=x.useState(!1),[k,N]=x.useState(!1),[C,E]=x.useState(""),[T,F]=x.useState(!1),[R,$]=x.useState(!1),[D,B]=x.useState({show:!1,title:""}),[V,M]=x.useState(null);x.useEffect(()=>{P()},[]),x.useEffect(()=>{z()},[n,c,d]);const P=async()=>{try{m(!0),g(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:A}=await Zw(async()=>{const{getCustomers:ce}=await Promise.resolve().then(()=>xb);return{getCustomers:ce}},void 0);let G=[],X=[],Y=[];try{G=await gV(),console.log("QuotationManagement: Fetched quotations:",(G==null?void 0:G.length)||0)}catch(ce){console.error("Error fetching quotations:",ce),W("Warning: Could not load quotations","warning")}try{X=await rh(),console.log("QuotationManagement: Fetched deals:",(X==null?void 0:X.length)||0)}catch(ce){console.error("Error fetching deals:",ce),W("Warning: Could not load deals.","warning"),X=[]}try{Y=await A(),console.log("QuotationManagement: Fetched customers:",(Y==null?void 0:Y.length)||0)}catch(ce){console.error("Error fetching customers:",ce),W("Warning: Could not load customers","warning")}const pe=new Map;Y.forEach(ce=>{pe.set(ce.id,ce)}),G.length>0&&console.log("Sample quotation data:",{id:G[0].id,customerId:G[0].customerId,customerName:G[0].customerName,customerContact:G[0].customerContact,selectedEquipment:G[0].selectedEquipment}),Y.length>0&&console.log("Sample customer data:",{id:Y[0].id,name:Y[0].name});const re=G.map(ce=>{const je={...ce},nt=pe.get(ce.customerId);return nt?(console.log(`Found matching customer for quotation ${ce.id}: ${nt.name}`),je.customerName=je.customerName||nt.name,je.customerContact=je.customerContact||{},je.customerContact.name||(je.customerContact.name=nt.contactName),je.customerContact.company||(je.customerContact.company=nt.name),je.customerContact.email||(je.customerContact.email=nt.email),je.customerContact.phone||(je.customerContact.phone=nt.phone),je.customerContact.address||(je.customerContact.address=nt.address)):console.log(`No matching customer found for quotation ${ce.id} with customerId ${ce.customerId}`),je.customerName=je.customerName||"Unknown Customer",je.customerContact=je.customerContact||{},je.customerContact.name=je.customerContact.name||"Contact Not Available",je.customerContact.company=je.customerContact.company||"No Company",je});r(re);const we=X.filter(ce=>ce.stage==="qualification"||ce.stage==="proposal");i(we),await I()}catch(A){console.error("Error fetching data:",A),g("Failed to load quotations. Please try again."),W("Error fetching data","error")}finally{m(!1)}},I=async()=>{try{const A=await M2();if(A&&A.defaultTemplateId){const X=await N2(A.defaultTemplateId);if(X){console.log("Loaded template from config:",X),w(X);return}}try{const Y=await(await Zw(()=>Promise.resolve().then(()=>xb),void 0)).getTemplates();if(Y&&Y.length>0){const pe=Y.find(re=>re.isDefault)||Y[0];console.log("Loaded template from templateService:",pe),w(pe);return}}catch(X){console.error("Error loading templates from service:",X)}const G={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),w(G)}catch(A){console.error("Error loading default template:",A);const G={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};w(G)}},z=()=>{let A=[...n];c&&(A=A.filter(G=>{var X,Y,pe;return(((X=G.customerContact)==null?void 0:X.name)||G.customerName||"").toLowerCase().includes(c.toLowerCase())||(((Y=G.customerContact)==null?void 0:Y.company)||"").toLowerCase().includes(c.toLowerCase())||(G.machineType||"").toLowerCase().includes(c.toLowerCase())||G.selectedMachines&&G.selectedMachines.some(re=>(re.name||"").toLowerCase().includes(c.toLowerCase()))||(((pe=G.selectedEquipment)==null?void 0:pe.name)||"").toLowerCase().includes(c.toLowerCase())})),d!=="all"&&(A=A.filter(G=>G.status===d)),l(A)},W=(A,G="success",X)=>{B({show:!0,title:A,description:X,variant:G}),setTimeout(()=>{B({show:!1,title:""})},5e3)},Z=()=>{if(!C){W("Please select a deal","warning");return}console.log("[handleProceedWithDeal] Navigating to /quotations/create?dealId="+C),t(`/quotations/create?dealId=${C}`),N(!1),E("")},ie=async A=>{try{M(A.id),console.log("Editing quotation:",A);const G=A.dealId||A.leadId;if(!G){W("Invalid quotation data","error","Missing deal ID");return}const[X,Y]=await Promise.all([iE(A.id),xa(G)]);if(!Y){W("Associated deal not found","error","The deal associated with this quotation no longer exists");return}if(!X){W("Quotation not found","error","The quotation could not be found");return}console.log("Navigating to:",`/quotations/create?dealId=${G}&quotationId=${A.id}`),t(`/quotations/create?dealId=${G}&quotationId=${A.id}`,{state:{quotation:X,deal:Y}})}catch(G){console.error("Error preparing quotation edit:",G),W("Error preparing quotation edit","error")}finally{M(null)}},[le,ge]=x.useState(!1),[q,O]=x.useState(null),H=A=>{O(A),ge(!0)},Q=A=>{q&&fe(q,A),ge(!1),O(null)},fe=async(A,G)=>{var X,Y,pe,re;try{if(F(!0),console.log("Selected options for PDF:",G),!v){W("No default template configured","warning","Please set a default template in Configuration settings.");return}let we=v.content;we=we.replace(/\{\{customer_name\}\}/g,((X=A.customerContact)==null?void 0:X.name)||A.customerName||""),we=we.replace(/\{\{equipment_name\}\}/g,((Y=A.selectedEquipment)==null?void 0:Y.name)||""),we=we.replace(/\{\{project_duration\}\}/g,`${A.numberOfDays} days`),we=we.replace(/\{\{total_amount\}\}/g,((pe=A.totalRent)==null?void 0:pe.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");const ce=window.open("","_blank");if(!ce){W("Popup blocked","error","Please allow popups to download PDF.");return}ce.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((re=A.customerContact)==null?void 0:re.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${we}
        </body>
        </html>
      `),await new Promise(je=>setTimeout(je,1e3)),ce.document.close(),ce.print(),ce.close(),W("PDF generated successfully","success")}catch(we){console.error("Error generating PDF:",we),W("Failed to generate PDF","error")}finally{F(!1)}},_=async A=>{var G,X,Y,pe,re,we;try{if($(!0),!v){W("No default template configured","warning","Please set a default template in Configuration settings.");return}let ce=v.content;ce=ce.replace(/\{\{customer_name\}\}/g,((G=A.customerContact)==null?void 0:G.name)||A.customerName||""),ce=ce.replace(/\{\{equipment_name\}\}/g,((X=A.selectedEquipment)==null?void 0:X.name)||""),ce=ce.replace(/\{\{project_duration\}\}/g,`${A.numberOfDays} days`),ce=ce.replace(/\{\{total_amount\}\}/g,((Y=A.totalRent)==null?void 0:Y.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");let je="Equipment";A.selectedMachines&&A.selectedMachines.length>1?je=`${A.selectedMachines.length} machines (${A.selectedMachines.map(Xl=>Xl.name).join(", ")})`:A.selectedMachines&&A.selectedMachines.length===1?je=A.selectedMachines[0].name:(pe=A.selectedEquipment)!=null&&pe.name?je=A.selectedEquipment.name:A.machineType&&(je=A.machineType);const nt=`Quotation from ASP Cranes - ${A.id.slice(0,8).toUpperCase()}`,Br=((re=A.customerContact)==null?void 0:re.name)||A.customerName||"Customer",Eh=((we=A.customerContact)==null?void 0:we.email)||"",Dh=`Dear ${Br},

Please find your quotation details for ${je} below:

${ce}

Best regards,
ASP Cranes Team`,Kl=`mailto:${Eh}?subject=${encodeURIComponent(nt)}&body=${encodeURIComponent(Dh)}`;window.open(Kl),W("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(ce){console.error("Error sending to customer:",ce),W("Error preparing email","error")}finally{$(!1)}},L=x.useMemo(()=>s.length===0?[{value:"",label:"No deals available"}]:s.map(A=>{var G,X;return{value:A.id,label:`${((G=A.customer)==null?void 0:G.name)||"Unnamed"} - ${((X=A.customer)==null?void 0:X.company)||"No Company"} (${Ve(A.value)})`}}),[s]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",o.jsx(U,{onClick:()=>N(!0),className:"w-full sm:w-auto",leftIcon:o.jsx(Pn,{className:"w-4 h-4"}),variant:"accent",children:"Create New Quotation"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ke,{placeholder:"Search by customer, company or equipment...",value:c,onChange:A=>u(A.target.value),leftIcon:o.jsx(fr,{className:"w-4 h-4"}),disabled:f})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsx(De,{options:T8,value:d,onChange:h,leftIcon:o.jsx(dA,{className:"w-4 h-4"}),disabled:f})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Quotation History"})}),o.jsx(ae,{className:"px-0 sm:px-6",children:f?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(st,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"text-center py-8 text-red-500",children:[o.jsx(Ta,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),o.jsx("p",{className:"text-lg font-medium",children:p}),o.jsx(U,{variant:"outline",size:"sm",onClick:P,className:"mt-4",children:"Try Again"})]}):a.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Wt,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),o.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(A=>{var G,X,Y,pe;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-start flex-col",children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((G=A.customerContact)==null?void 0:G.name)||A.customerName||"Customer"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((X=A.customerContact)==null?void 0:X.company)||A.customerName||"No Company"}),o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",A.customerId?A.customerId.substring(0,8):"None"]}),o.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:A.selectedMachines&&A.selectedMachines.length>0?A.selectedMachines.length===1?A.selectedMachines[0].name:`${A.selectedMachines.length} machines`:((Y=A.selectedEquipment)==null?void 0:Y.name)||A.machineType||"No equipment data"}),o.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:Ve(A.totalRent)})]})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:A.selectedMachines&&A.selectedMachines.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:A.selectedMachines.map(re=>re.name).join(", ")}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[A.selectedMachines.length," machine",A.selectedMachines.length>1?"s":""]})]}):(pe=A.selectedEquipment)!=null&&pe.name?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:A.selectedEquipment.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment"})]}):A.machineType?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:A.machineType}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment Type"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Type not specified"})]})}),o.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[o.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[A.numberOfDays," days"]}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[A.workingHours," hrs/day"]})]}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:Ve(A.totalRent)}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsx(Ul,{status:A.status})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>ie(A),title:"Edit Quotation",disabled:f||V===A.id,children:V===A.id?o.jsx(st,{size:14,className:"animate-spin"}):o.jsx(Da,{size:14})}),o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>{b(A),j(!0)},title:"Preview Quotation",disabled:!v||f,children:o.jsx(Vu,{size:14})}),o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>H(A),disabled:T||!v||f,title:"Download PDF",children:T?o.jsx(st,{size:14,className:"animate-spin"}):o.jsx(dx,{size:14})}),o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>_(A),disabled:R||!v||f,title:"Send to Customer",children:R?o.jsx(st,{size:14,className:"animate-spin"}):o.jsx(da,{size:14})})]})})]},A.id)})})]})})})]}),o.jsx(Ct,{isOpen:k,onClose:()=>{N(!1),E("")},title:"Create New Quotation",size:"lg",children:o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",o.jsx(De,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...L.filter(A=>A.value!=="")],value:C,onChange:E,label:"Available Deals",disabled:f,required:!0}),C&&o.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const A=s.find(G=>G.id===C);return A?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),o.jsx("p",{className:"text-blue-800",children:A.customer.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),o.jsx("p",{className:"text-blue-800",children:A.customer.company})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),o.jsx("p",{className:"text-blue-800",children:Ve(A.value)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),o.jsx("p",{className:"text-blue-800 capitalize",children:A.stage})]})]})]}):null})()})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[o.jsx(U,{variant:"outline",onClick:()=>{N(!1),E("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),o.jsxs(U,{onClick:Z,disabled:!C||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",variant:"accent",children:[f?o.jsx(st,{className:"w-4 h-4 animate-spin"}):o.jsx(Pn,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),o.jsx(Ct,{isOpen:S,onClose:()=>j(!1),title:"Quotation Preview",size:"full",children:y&&v&&o.jsx("div",{className:"flex flex-col md:flex-row gap-8",children:o.jsx("div",{className:"flex-1",children:o.jsx(D8,{quotation:y,template:v,onDownloadPDF:()=>fe(y),onSendEmail:()=>_(y)})})})}),D.show&&o.jsx(ft,{title:D.title,variant:D.variant,isVisible:D.show,onClose:()=>B({show:!1,title:""})}),o.jsx(TE,{isOpen:le,onClose:()=>ge(!1),onPrint:Q})]})})}const e1={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},t1={foodRate:2500,accommodationRate:4e3,transportRate:0},Uf={riggerAmount:4e4,helperAmount:12e3,incidentalOptions:[{value:"incident1",label:"Incident 1 - 5,000",amount:5e3},{value:"incident2",label:"Incident 2 - 10,000",amount:1e4},{value:"incident3",label:"Incident 3 - 15,000",amount:15e3}],usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}},_8=5*60*1e3,I8=JN((e,t)=>{let n=[];const r=s=>{n.forEach(i=>i(s))};return{quotationConfig:null,resourceRatesConfig:null,additionalParamsConfig:null,isLoading:!1,errors:{},lastFetchTimes:{},fetchAllConfigs:async()=>{const{fetchQuotationConfig:s,fetchResourceRatesConfig:i,fetchAdditionalParamsConfig:a}=t();e({isLoading:!0,errors:{}});try{await Promise.all([s(),i(),a()])}catch(l){console.error("Error fetching configurations:",l)}finally{e({isLoading:!1})}},fetchQuotationConfig:async()=>{try{const s=await D2();e(i=>({quotationConfig:s||e1,lastFetchTimes:{...i.lastFetchTimes,quotation:Date.now()},errors:{...i.errors,quotation:""}}))}catch(s){console.error("Error fetching quotation config:",s),e(i=>({quotationConfig:e1,errors:{...i.errors,quotation:"Failed to fetch quotation configuration"}}))}},fetchResourceRatesConfig:async()=>{try{const s=await P2();e(i=>({resourceRatesConfig:s||t1,lastFetchTimes:{...i.lastFetchTimes,resourceRates:Date.now()},errors:{...i.errors,resourceRates:""}}))}catch(s){console.error("Error fetching resource rates config:",s),e(i=>({resourceRatesConfig:t1,errors:{...i.errors,resourceRates:"Failed to fetch resource rates configuration"}}))}},fetchAdditionalParamsConfig:async()=>{try{const s=await I2();e(i=>({additionalParamsConfig:{...Uf,...s},lastFetchTimes:{...i.lastFetchTimes,additionalParams:Date.now()},errors:{...i.errors,additionalParams:""}}))}catch(s){console.error("Error fetching additional params config:",s),e(i=>({additionalParamsConfig:Uf,errors:{...i.errors,additionalParams:"Failed to fetch additional parameters configuration"}}))}},updateQuotationConfig:async s=>{try{const i=await T2({orderTypeLimits:s});e(a=>({quotationConfig:i,lastFetchTimes:{...a.lastFetchTimes,quotation:Date.now()},errors:{...a.errors,quotation:""}})),r("quotation")}catch(i){throw console.error("Error updating quotation config:",i),e(a=>({errors:{...a.errors,quotation:"Failed to update quotation configuration"}})),i}},updateResourceRatesConfig:async s=>{try{const i=await _2(s);e(a=>({resourceRatesConfig:i,lastFetchTimes:{...a.lastFetchTimes,resourceRates:Date.now()},errors:{...a.errors,resourceRates:""}})),r("resourceRates")}catch(i){throw console.error("Error updating resource rates config:",i),e(a=>({errors:{...a.errors,resourceRates:"Failed to update resource rates configuration"}})),i}},updateAdditionalParamsConfig:async s=>{try{const i=await A2(s);e(a=>({additionalParamsConfig:{...Uf,...i},lastFetchTimes:{...a.lastFetchTimes,additionalParams:Date.now()},errors:{...a.errors,additionalParams:""}})),r("additionalParams")}catch(i){throw console.error("Error updating additional params config:",i),e(a=>({errors:{...a.errors,additionalParams:"Failed to update additional parameters configuration"}})),i}},invalidateConfig:s=>{e(i=>{const a={...i.lastFetchTimes};return delete a[s],{lastFetchTimes:a}})},isConfigStale:(s,i=_8)=>{const{lastFetchTimes:a}=t(),l=a[s];return l?Date.now()-l>i:!0},subscribeToConfigChanges:s=>(n.push(s),()=>{n=n.filter(i=>i!==s)})}}),A8=()=>{const{quotationConfig:e,resourceRatesConfig:t,additionalParamsConfig:n,isLoading:r,errors:s,fetchAllConfigs:i,fetchQuotationConfig:a,fetchResourceRatesConfig:l,fetchAdditionalParamsConfig:c,subscribeToConfigChanges:u,isConfigStale:d}=I8(),h=x.useCallback(async()=>{await i()},[i]),f=x.useCallback(async m=>{switch(m){case"quotation":await a();break;case"resourceRates":await l();break;case"additionalParams":await c();break}},[a,l,c]);return x.useEffect(()=>((async()=>{(!e||d("quotation"))&&await a(),(!t||d("resourceRates"))&&await l(),(!n||d("additionalParams"))&&await c()})(),u(g=>{console.log(`Configuration changed: ${g}. Quotation components will use updated values.`),window.dispatchEvent(new CustomEvent("configurationChanged",{detail:{configType:g}}))})),[e,t,n,a,l,c,u,d]),{quotationConfig:e,resourceRates:t,additionalParams:n,isLoading:r,errors:s,refreshConfigurations:h,refreshSpecificConfig:f}},Wf=(e,t)=>{x.useEffect(()=>{const n=r=>{t(r.detail)};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}},[e,t])},M8=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],O8=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],R8=[{value:"day",label:"Day"},{value:"night",label:"Night"}],L8=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],n1=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],F8=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],$8=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],r1=[{value:"incident1",label:"Incident 1 - 5,000",amount:5e3},{value:"incident2",label:"Incident 2 - 10,000",amount:1e4},{value:"incident3",label:"Incident 3 - 15,000",amount:15e3}];function B8(){var D,B,V,M,P,I,z,W,Z,ie,le,ge;const{user:e}=We(),t=Rn(),[n]=KI(),r=hr(),s=n.get("dealId")||"",i=n.get("quotationId"),{quotationConfig:a,resourceRates:l,additionalParams:c}=A8(),[u,d]=x.useState(null),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(0),[w,S]=x.useState({show:!1,title:""}),[j,k]=x.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:n1[0].value,sundayWorking:"no"}),[N,C]=x.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});Wf("resourceRatesUpdated",()=>{console.log("Resource rates updated, recalculating quotation..."),F()}),Wf("additionalParamsUpdated",()=>{console.log("Additional parameters updated, recalculating quotation..."),F()}),Wf("quotationConfigUpdated",q=>{if(console.log("Quotation configuration updated, checking order type...",q),j.numberOfDays>0){const O=T(j.numberOfDays);O!==j.orderType&&k(H=>({...H,orderType:O}))}F()}),x.useEffect(()=>{E()},[s,i]),x.useEffect(()=>{F()},[j,b]),x.useEffect(()=>{j.workingHours!==void 0&&F()},[j.workingHours]),x.useEffect(()=>{var q;if(j.orderType&&((q=j.selectedEquipment)!=null&&q.id)&&Array.isArray(h)&&h.length>0){const O=h.find(H=>H.id===j.selectedEquipment.id);if(O!=null&&O.baseRates){const H=O.baseRates[j.orderType];v(H)}}j.selectedMachines.length>0&&Array.isArray(h)&&h.length>0&&k(O=>({...O,selectedMachines:O.selectedMachines.map(H=>{const Q=h.find(fe=>fe.id===H.id);return Q!=null&&Q.baseRates?{...H,baseRate:Q.baseRates[j.orderType]||H.baseRate}:H})}))},[j.orderType,h.length]),x.useEffect(()=>{j.machineType?(async()=>{try{const O=await I5(j.machineType);f(Array.isArray(O)?O:[])}catch(O){console.error("Error fetching equipment:",O),f([])}})():f([])},[j.machineType]);const E=async()=>{var q,O,H,Q,fe,_,L,A;try{p(!0),console.log("[QuotationCreation] Fetching data with dealId:",s,"quotationId:",i);const G=r.state;let X=null,Y=null;if(G&&(G.quotation&&(X=G.quotation,console.log("[QuotationCreation] Found quotation in navigation state:",X)),G.deal&&(Y=G.deal,console.log("[QuotationCreation] Found deal in navigation state:",Y),d(Y))),!Y&&s)try{Y=await xa(s),console.log("[QuotationCreation] Fetched deal data:",Y),d(Y)}catch(re){console.error("[QuotationCreation] Error fetching deal by ID:",re),R("Warning: Could not load deal details. You can still create a quotation.","warning"),d({id:s,customer:{name:"Unknown Customer",email:"",phone:"",company:"Unknown Company",address:"",designation:""},title:"Unknown Deal",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()})}else Y||d({id:"new",customer:{name:"New Customer",email:"",phone:"",company:"",address:"",designation:""},title:"New Quotation",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()});const pe=await Lx();if(console.log("Fetched equipment data:",pe),f(pe),i){let re=X;if(!re)try{console.log("[QuotationCreation] Fetching existing quotation from API:",i),re=await iE(i)}catch(we){console.error("[QuotationCreation] Error fetching quotation:",we),R("Error loading quotation data","error")}if(re){console.log("[QuotationCreation] Loading quotation data for ID:",re.id);const we={...j,machineType:re.machineType||"",selectedEquipment:re.selectedEquipment||j.selectedEquipment,selectedMachines:re.selectedMachines||[],orderType:re.orderType||"micro",numberOfDays:re.numberOfDays||0,workingHours:re.workingHours||8,foodResources:re.foodResources||0,accomResources:re.accomResources||0,siteDistance:re.siteDistance||0,usage:re.usage||"normal",riskFactor:re.riskFactor||"low",extraCharge:re.extraCharge||0,incidentalCharges:re.incidentalCharges||[],otherFactorsCharge:re.otherFactorsCharge||0,billing:re.billing||"gst",includeGst:re.includeGst!==void 0?re.includeGst:!0,shift:re.shift||"single",dayNight:re.dayNight||"day",mobDemob:re.mobDemob||0,mobRelaxation:re.mobRelaxation||0,runningCostPerKm:re.runningCostPerKm||0,otherFactors:re.otherFactors||[],dealType:re.dealType||n1[0].value,sundayWorking:re.sundayWorking||"no",version:re.version||1,status:re.status||"draft",customerName:re.customerName||((q=Y==null?void 0:Y.customer)==null?void 0:q.name)||"",customerContact:re.customerContact||{name:((O=Y==null?void 0:Y.customer)==null?void 0:O.name)||"",email:((H=Y==null?void 0:Y.customer)==null?void 0:H.email)||"",phone:((Q=Y==null?void 0:Y.customer)==null?void 0:Q.phone)||"",company:((fe=Y==null?void 0:Y.customer)==null?void 0:fe.company)||"",address:((_=Y==null?void 0:Y.customer)==null?void 0:_.address)||"",designation:((L=Y==null?void 0:Y.customer)==null?void 0:L.designation)||""}};if(console.log("[QuotationCreation] Form data populated with",Object.keys(we).length,"fields"),k(we),(A=re.selectedEquipment)!=null&&A.id&&pe){const ce=pe.find(je=>je.id===re.selectedEquipment.id);if(ce!=null&&ce.baseRates){const je=ce.baseRates[re.orderType||"micro"];v(je)}}if(!Y&&re.dealId)try{const ce=await xa(re.dealId);ce&&(console.log("[QuotationCreation] Loaded deal from quotation:",ce),d(ce))}catch(ce){console.warn("[QuotationCreation] Could not load deal for quotation:",ce)}}else console.warn("[QuotationCreation] No quotation found with ID:",i),R("Quotation not found","warning")}else f(pe);console.log("Quotation config managed by centralized store")}catch(G){console.error("Error fetching data:",G),R("Error fetching data","error")}finally{p(!1)}},T=q=>{if(!(a!=null&&a.orderTypeLimits))return"micro";const O=a.orderTypeLimits;return q<=0?"micro":q>=O.yearly.minDays?"yearly":q>=O.monthly.minDays?"monthly":q>=O.small.minDays?"small":"micro"},F=()=>{console.log("Calculating quotation with working hours:",j.workingHours);const q=j.selectedMachines.length>0,O=b;if(!j.numberOfDays||!q&&!O){C({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const H=Number(j.numberOfDays),Q=Number(j.workingHours)||8,fe=H*Q;let _=0;q?_=j.selectedMachines.reduce((zr,mr)=>{const Ms=mr.baseRate*mr.quantity;return j.orderType==="monthly"?zr+Ms*Math.ceil(H/26):zr+Ms*fe},0):j.orderType==="monthly"?_=O*Math.ceil(H/26):_=O*fe;const L=(l==null?void 0:l.foodRate)||0,A=(l==null?void 0:l.accommodationRate)||0,G=(j.foodResources||0)*L*H,X=(j.accomResources||0)*A*H,Y=G+X;let pe=0;if(j.mobDemob>0)pe=j.mobDemob;else if(j.siteDistance>0){if(q)pe=j.selectedMachines.reduce((zr,mr)=>{const Ms=j.siteDistance||0,Th=mr.runningCostPerKm||0,gT=Ms*2*Th+5e3;return zr+gT*mr.quantity},0);else{const zr=j.siteDistance||0,mr=j.runningCostPerKm||0;pe=zr*2*mr+5e3}j.mobRelaxation>0&&(pe=pe*(1-j.mobRelaxation/100))}const re=_;let we=0,ce=0;j.riskFactor==="high"?we=.15:j.riskFactor==="medium"?we=.1:we=.05,j.usage==="heavy"?ce=.1:ce=.05;const je=re*we,nt=re*ce,Br=Number(j.extraCharge)||0,Eh=j.incidentalCharges.reduce((zr,mr)=>{const Ms=r1.find(Th=>Th.value===mr);return zr+(Ms?Ms.amount:0)},0),Dh=(j.otherFactors.includes("rigger")?(c==null?void 0:c.riggerAmount)||4e4:0)+(j.otherFactors.includes("helper")?(c==null?void 0:c.helperAmount)||12e3:0),Kl=_+Y+pe+je+nt+Br+Eh+Dh,Xl=j.includeGst?Kl*.18:0,pT=Kl+Xl;C({baseRate:O,totalHours:fe,workingCost:_,mobDemobCost:pe,foodAccomCost:Y,usageLoadFactor:nt,extraCharges:Br,riskAdjustment:je,gstAmount:Xl,totalAmount:pT})},R=(q,O="success",H)=>{S({show:!0,title:q,description:H,variant:O}),setTimeout(()=>S({show:!1,title:""}),5e3)},$=async q=>{var O,H,Q,fe,_,L,A,G,X,Y,pe,re,we;if(q.preventDefault(),!j.numberOfDays||j.numberOfDays===0){R("Please enter the number of days","error");return}if(j.selectedMachines.length===0&&!j.selectedEquipment.id){R("Please select at least one machine","error");return}try{y(!0);const ce={...j,dealId:s||"new",customerName:j.customerName||((O=u==null?void 0:u.customer)==null?void 0:O.name)||"",customerContact:{name:((H=j.customerContact)==null?void 0:H.name)||((Q=u==null?void 0:u.customer)==null?void 0:Q.name)||"",email:((fe=j.customerContact)==null?void 0:fe.email)||((_=u==null?void 0:u.customer)==null?void 0:_.email)||"",phone:((L=j.customerContact)==null?void 0:L.phone)||((A=u==null?void 0:u.customer)==null?void 0:A.phone)||"",company:((G=j.customerContact)==null?void 0:G.company)||((X=u==null?void 0:u.customer)==null?void 0:X.company)||"",address:((Y=j.customerContact)==null?void 0:Y.address)||((pe=u==null?void 0:u.customer)==null?void 0:pe.address)||"",designation:((re=j.customerContact)==null?void 0:re.designation)||((we=u==null?void 0:u.customer)==null?void 0:we.designation)||""},calculations:N,totalAmount:N.totalAmount,createdBy:(e==null?void 0:e.id)||"",updatedAt:new Date().toISOString()};i?(await mV(i,ce),R("Quotation updated successfully","success")):(await pV(ce),R("Quotation created successfully","success")),t("/quotations")}catch(ce){console.error("Error saving quotation:",ce),R("Error saving quotation","error")}finally{y(!1)}};return m?o.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsx("style",{children:`
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:o.jsx(ON,{size:16}),className:"self-start",children:"Back"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:i?"Edit Quotation":"Create Quotation"}),o.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",((D=u==null?void 0:u.customer)==null?void 0:D.name)||"New Customer"," - ",(u==null?void 0:u.title)||"New Quotation"]})]})]})}),o.jsxs("form",{onSubmit:$,className:"max-w-full mx-auto px-2 sm:px-4",children:[o.jsx(md,{}),o.jsxs(se,{className:"mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(ye,{className:"pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(tn,{className:"w-5 h-5 text-gray-500"}),o.jsx(ve,{className:"text-lg font-medium",children:"Customer Information"})]})}),o.jsx(ae,{className:"pt-0",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600 mb-1",children:"Customer"}),o.jsx("div",{className:"font-semibold text-gray-900",children:j.customerName||((B=u==null?void 0:u.customer)==null?void 0:B.name)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600 mb-1",children:"Company"}),o.jsx("div",{className:"font-semibold text-gray-900",children:((V=j.customerContact)==null?void 0:V.company)||((M=u==null?void 0:u.customer)==null?void 0:M.company)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600 mb-1",children:"Email"}),o.jsx("div",{className:"font-semibold text-gray-900 break-all",children:((P=j.customerContact)==null?void 0:P.email)||((I=u==null?void 0:u.customer)==null?void 0:I.email)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600 mb-1",children:"Phone"}),o.jsx("div",{className:"font-semibold text-gray-900",children:((z=j.customerContact)==null?void 0:z.phone)||((W=u==null?void 0:u.customer)==null?void 0:W.phone)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600 mb-1",children:"Designation"}),o.jsx("div",{className:"font-semibold text-gray-900",children:((Z=j.customerContact)==null?void 0:Z.designation)||((ie=u==null?void 0:u.customer)==null?void 0:ie.designation)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600 mb-1",children:"Address"}),o.jsx("div",{className:"font-semibold text-gray-900",children:((le=j.customerContact)==null?void 0:le.address)||((ge=u==null?void 0:u.customer)==null?void 0:ge.address)||"N/A"})]})]})})]}),o.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs(se,{className:"shadow-sm",children:[o.jsx(ye,{className:"pb-3",children:o.jsxs(ve,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-gray-500"}),"Duration"]})}),o.jsxs(ae,{className:"pt-0 space-y-3",children:[o.jsx(me,{type:"number",label:"Number of Days",value:j.numberOfDays||"",onChange:q=>{const O=q.target.value===""?0:Number(q.target.value),H=T(O);k(Q=>{const fe=O>0&&H!==Q.orderType;let _=[...Q.selectedMachines];return fe&&(_=Q.selectedMachines.map(L=>{var A;return{...L,baseRate:((A=L.baseRates)==null?void 0:A[H])||L.baseRate}})),{...Q,numberOfDays:O,orderType:O>0?H:Q.orderType,selectedMachines:_}})},required:!0,min:"1",placeholder:"Enter days"}),o.jsx(me,{type:"number",label:"Working Hours/Day",value:j.workingHours||"",onChange:q=>{const O=Number(q.target.value)||8;k(H=>({...H,workingHours:O}))},min:"1",max:"24",placeholder:"8"})]})]}),o.jsxs(se,{className:"shadow-sm",children:[o.jsx(ye,{className:"pb-3",children:o.jsxs(ve,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(Ht,{className:"w-4 h-4 text-gray-500"}),"Machine Selection"]})}),o.jsxs(ae,{className:"pt-0 space-y-3",children:[o.jsx(De,{label:"Machine Type",value:j.machineType,onChange:q=>k(O=>({...O,machineType:q,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[]})),options:M8,required:!0}),j.machineType&&o.jsx(De,{label:"Equipment",value:j.selectedEquipment.id,onChange:q=>{const O=h.find(H=>H.id===q);if(O){const H=O.baseRates[j.orderType];v(H),k(Q=>({...Q,selectedEquipment:{id:O.id,equipmentId:O.equipmentId,name:O.name,baseRates:O.baseRates},baseRate:H,runningCostPerKm:O.runningCostPerKm||0}))}},options:[{value:"",label:"Select equipment..."},...h.map(q=>({value:q.id,label:`${q.name} (${q.equipmentId})`}))],required:j.selectedMachines.length===0})]})]}),o.jsxs(se,{className:"shadow-sm",children:[o.jsx(ye,{className:"pb-3",children:o.jsxs(ve,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(ha,{className:"w-4 h-4 text-gray-500"}),"Configuration"]})}),o.jsxs(ae,{className:"pt-0 space-y-3",children:[o.jsx(De,{label:"Shift Type",value:j.shift,onChange:q=>k(O=>({...O,shift:q})),options:O8}),o.jsx(De,{label:"Time",value:j.dayNight,onChange:q=>k(O=>({...O,dayNight:q})),options:R8})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs(se,{className:"shadow-sm",children:[o.jsx(ye,{className:"pb-3",children:o.jsxs(ve,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(tn,{className:"w-4 h-4 text-gray-500"}),"Food & Accommodation"]})}),o.jsxs(ae,{className:"pt-0 space-y-3",children:[o.jsx(me,{type:"number",label:"Food Resources",value:j.foodResources||"",onChange:q=>{k(O=>({...O,foodResources:Number(q.target.value)||0}))},min:"0",placeholder:"Number of people"}),o.jsx(me,{type:"number",label:"Accommodation Resources",value:j.accomResources||"",onChange:q=>{k(O=>({...O,accomResources:Number(q.target.value)||0}))},min:"0",placeholder:"Number of people"})]})]}),o.jsxs(se,{className:"shadow-sm",children:[o.jsx(ye,{className:"pb-3",children:o.jsxs(ve,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(Ht,{className:"w-4 h-4 text-gray-500"}),"Transport & Site"]})}),o.jsxs(ae,{className:"pt-0 space-y-3",children:[o.jsx(me,{type:"number",label:"Site Distance (km)",value:j.siteDistance||"",onChange:q=>{k(O=>({...O,siteDistance:Number(q.target.value)||0}))},min:"0",placeholder:"Distance in km"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(De,{label:"Usage",value:j.usage,onChange:q=>k(O=>({...O,usage:q})),options:L8}),o.jsx(De,{label:"Risk Level",value:j.riskFactor,onChange:q=>k(O=>({...O,riskFactor:q})),options:F8})]})]})]})]}),o.jsxs(se,{className:"shadow-sm mb-6",children:[o.jsx(ye,{className:"pb-3",children:o.jsxs(ve,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(ir,{className:"w-4 h-4 text-gray-500"}),"Additional Charges"]})}),o.jsx(ae,{className:"pt-0",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(me,{type:"number",label:"Extra Commercial Charges",value:j.extraCharge||"",onChange:q=>{k(O=>({...O,extraCharge:Number(q.target.value)||0}))},min:"0",placeholder:"0"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Incidental Charges"}),o.jsx("div",{className:"space-y-2",children:r1.map(q=>o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:j.incidentalCharges.includes(q.value),onChange:O=>{O.target.checked?k(H=>({...H,incidentalCharges:[...H.incidentalCharges,q.value]})):k(H=>({...H,incidentalCharges:H.incidentalCharges.filter(Q=>Q!==q.value)}))},className:"mr-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:q.label})]},q.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Factors"}),o.jsx("div",{className:"space-y-2",children:$8.map(q=>o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:j.otherFactors.includes(q.value),onChange:O=>{O.target.checked?k(H=>({...H,otherFactors:[...H.otherFactors,q.value]})):k(H=>({...H,otherFactors:H.otherFactors.filter(Q=>Q!==q.value)}))},className:"mr-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[q.label,q.value==="rigger"&&" (40,000)",q.value==="helper"&&" (12,000)"]})]},q.value))})]})]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1",children:"Cancel"}),o.jsx(U,{type:"submit",disabled:g||j.selectedMachines.length===0&&!j.selectedEquipment.id,className:"sm:flex-1 bg-primary-600 hover:bg-primary-700",leftIcon:g?o.jsx(Qn,{className:"animate-spin"}):o.jsx(ji,{}),variant:"accent",children:g?"Saving...":i?"Update Quotation":"Create Quotation"}),j.selectedMachines.length===0&&!j.selectedEquipment.id&&o.jsx("div",{className:"text-xs text-center text-amber-600 col-span-2",children:"Please add at least one machine"})]})]}),o.jsx("div",{className:"w-full xl:w-[400px] flex-shrink-0",children:o.jsx("div",{className:"sticky top-6",children:o.jsxs(se,{className:"shadow-xl border border-gray-200 bg-white",children:[o.jsx(ye,{className:"border-b border-gray-100 pb-4 bg-gradient-to-r from-blue-50 to-white",children:o.jsxs(ve,{className:"text-lg font-bold flex items-center gap-2 text-blue-800",children:[o.jsx(fp,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{children:"Quotation Summary"})]})}),o.jsxs(ae,{className:"pt-4",children:[o.jsx(DE,{calculations:N,formData:j,additionalParams:c}),o.jsx("div",{className:"mt-4",children:o.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.includeGst,onChange:q=>k(O=>({...O,includeGst:q.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),o.jsx("div",{className:"text-sm text-gray-600",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})})})]})]}),w.show&&o.jsx(ft,{title:w.title,description:w.description,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function Kn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function et(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function dt(e){et(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||pd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function s1(e,t){et(2,arguments);var n=dt(e),r=Kn(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function PE(e,t){et(2,arguments);var n=dt(e).getTime(),r=Kn(t);return new Date(n+r)}var z8=36e5;function _E(e,t){et(2,arguments);var n=Kn(t);return PE(e,n*z8)}var V8={};function La(){return V8}function U8(e,t){var n,r,s,i,a,l,c,u;et(1,arguments);var d=La(),h=Kn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=dt(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function W8(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function i1(e){et(1,arguments);var t=dt(e);return t.setHours(0,0,0,0),t}function H8(e,t){et(2,arguments);var n=i1(e),r=i1(t);return n.getTime()===r.getTime()}function q8(e){return et(1,arguments),e instanceof Date||pd(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function G8(e){if(et(1,arguments),!q8(e)&&typeof e!="number")return!1;var t=dt(e);return!isNaN(Number(t))}function Y8(e,t){var n;et(1,arguments);var r=e||{},s=dt(r.start),i=dt(r.end),a=i.getTime();if(!(s.getTime()<=a))throw new RangeError("Invalid interval");var l=[],c=s;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=a;)l.push(dt(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function Q8(e,t){var n,r,s,i,a,l,c,u;et(1,arguments);var d=La(),h=Kn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=dt(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function K8(e,t){et(2,arguments);var n=Kn(t);return PE(e,-n)}var X8=864e5;function J8(e){et(1,arguments);var t=dt(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/X8)+1}function gd(e){et(1,arguments);var t=1,n=dt(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function IE(e){et(1,arguments);var t=dt(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=gd(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=gd(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function Z8(e){et(1,arguments);var t=IE(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=gd(n);return r}var eW=6048e5;function tW(e){et(1,arguments);var t=dt(e),n=gd(t).getTime()-Z8(t).getTime();return Math.round(n/eW)+1}function xd(e,t){var n,r,s,i,a,l,c,u;et(1,arguments);var d=La(),h=Kn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=dt(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function AE(e,t){var n,r,s,i,a,l,c,u;et(1,arguments);var d=dt(e),h=d.getUTCFullYear(),f=La(),m=Kn((n=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var g=xd(p,t),y=new Date(0);y.setUTCFullYear(h,0,m),y.setUTCHours(0,0,0,0);var b=xd(y,t);return d.getTime()>=g.getTime()?h+1:d.getTime()>=b.getTime()?h:h-1}function nW(e,t){var n,r,s,i,a,l,c,u;et(1,arguments);var d=La(),h=Kn((n=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=AE(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=xd(m,t);return p}var rW=6048e5;function sW(e,t){et(1,arguments);var n=dt(e),r=xd(n,t).getTime()-nW(n,t).getTime();return Math.round(r/rW)+1}function Ae(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Hr={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Ae(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Ae(r+1,2)},d:function(t,n){return Ae(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Ae(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Ae(t.getUTCHours(),n.length)},m:function(t,n){return Ae(t.getUTCMinutes(),n.length)},s:function(t,n){return Ae(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return Ae(i,n.length)}},_i={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iW={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return Hr.y(t,n)},Y:function(t,n,r,s){var i=AE(t,s),a=i>0?i:1-i;if(n==="YY"){var l=a%100;return Ae(l,2)}return n==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ae(a,n.length)},R:function(t,n){var r=IE(t);return Ae(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Ae(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ae(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ae(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Hr.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ae(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var i=sW(t,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Ae(i,n.length)},I:function(t,n,r){var s=tW(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ae(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Hr.d(t,n)},D:function(t,n,r){var s=J8(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ae(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var i=t.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Ae(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var i=t.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Ae(a,n.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Ae(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),i;switch(s===12?i=_i.noon:s===0?i=_i.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),i;switch(s>=17?i=_i.evening:s>=12?i=_i.afternoon:s>=4?i=_i.morning:i=_i.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Hr.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Hr.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ae(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ae(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Hr.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Hr.s(t,n)},S:function(t,n){return Hr.S(t,n)},X:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return o1(a);case"XXXX":case"XX":return Ys(a);case"XXXXX":case"XXX":default:return Ys(a,":")}},x:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return o1(a);case"xxxx":case"xx":return Ys(a);case"xxxxx":case"xxx":default:return Ys(a,":")}},O:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+a1(a,":");case"OOOO":default:return"GMT"+Ys(a,":")}},z:function(t,n,r,s){var i=s._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+a1(a,":");case"zzzz":default:return"GMT"+Ys(a,":")}},t:function(t,n,r,s){var i=s._originalDate||t,a=Math.floor(i.getTime()/1e3);return Ae(a,n.length)},T:function(t,n,r,s){var i=s._originalDate||t,a=i.getTime();return Ae(a,n.length)}};function a1(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var a=t;return n+String(s)+a+Ae(i,2)}function o1(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Ae(Math.abs(e)/60,2)}return Ys(e,t)}function Ys(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),i=Ae(Math.floor(s/60),2),a=Ae(s%60,2);return r+i+n+a}var l1=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ME=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},aW=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return l1(t,n);var a;switch(s){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",l1(s,n)).replace("{{time}}",ME(i,n))},oW={p:ME,P:aW},lW=["D","DD"],cW=["YY","YYYY"];function uW(e){return lW.indexOf(e)!==-1}function dW(e){return cW.indexOf(e)!==-1}function c1(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hW={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},fW=function(t,n,r){var s,i=hW[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Hf(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var mW={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pW={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gW={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xW={date:Hf({formats:mW,defaultWidth:"full"}),time:Hf({formats:pW,defaultWidth:"full"}),dateTime:Hf({formats:gW,defaultWidth:"full"})},yW={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vW=function(t,n,r,s){return yW[t]};function oo(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var bW={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wW={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jW={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SW={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},NW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CW={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kW=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},EW={ordinalNumber:kW,era:oo({values:bW,defaultWidth:"wide"}),quarter:oo({values:wW,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:oo({values:jW,defaultWidth:"wide"}),day:oo({values:SW,defaultWidth:"wide"}),dayPeriod:oo({values:NW,defaultWidth:"wide",formattingValues:CW,defaultFormattingWidth:"wide"})};function lo(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var a=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?TW(l,function(h){return h.test(a)}):DW(l,function(h){return h.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function DW(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function TW(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function PW(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(s.length);return{value:a,rest:l}}}var _W=/^(\d+)(th|st|nd|rd)?/i,IW=/\d+/i,AW={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MW={any:[/^b/i,/^(a|c)/i]},OW={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RW={any:[/1/i,/2/i,/3/i,/4/i]},LW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$W={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BW={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zW={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VW={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},UW={ordinalNumber:PW({matchPattern:_W,parsePattern:IW,valueCallback:function(t){return parseInt(t,10)}}),era:lo({matchPatterns:AW,defaultMatchWidth:"wide",parsePatterns:MW,defaultParseWidth:"any"}),quarter:lo({matchPatterns:OW,defaultMatchWidth:"wide",parsePatterns:RW,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:lo({matchPatterns:LW,defaultMatchWidth:"wide",parsePatterns:FW,defaultParseWidth:"any"}),day:lo({matchPatterns:$W,defaultMatchWidth:"wide",parsePatterns:BW,defaultParseWidth:"any"}),dayPeriod:lo({matchPatterns:zW,defaultMatchWidth:"any",parsePatterns:VW,defaultParseWidth:"any"})},WW={code:"en-US",formatDistance:fW,formatLong:xW,formatRelative:vW,localize:EW,match:UW,options:{weekStartsOn:0,firstWeekContainsDate:1}},HW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GW=/^'([^]*?)'?$/,YW=/''/g,QW=/[a-zA-Z]/;function br(e,t,n){var r,s,i,a,l,c,u,d,h,f,m,p,g,y;et(2,arguments);var b=String(t),v=La(),w=(r=(s=void 0)!==null&&s!==void 0?s:v.locale)!==null&&r!==void 0?r:WW,S=Kn((i=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:v.firstWeekContainsDate)!==null&&a!==void 0?a:(u=v.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=Kn((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:v.weekStartsOn)!==null&&f!==void 0?f:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&h!==void 0?h:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var k=dt(e);if(!G8(k))throw new RangeError("Invalid time value");var N=W8(k),C=K8(k,N),E={firstWeekContainsDate:S,weekStartsOn:j,locale:w,_originalDate:k},T=b.match(qW).map(function(F){var R=F[0];if(R==="p"||R==="P"){var $=oW[R];return $(F,w.formatLong)}return F}).join("").match(HW).map(function(F){if(F==="''")return"'";var R=F[0];if(R==="'")return KW(F);var $=iW[R];if($)return dW(F)&&c1(F,t,String(e)),uW(F)&&c1(F,t,String(e)),$(C,F,w.localize,E);if(R.match(QW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return F}).join("");return T}function KW(e){var t=e.match(GW);return t?t[1].replace(YW,"'"):e}function XW(e,t){et(2,arguments);var n=dt(e).getTime(),r=dt(t.start).getTime(),s=dt(t.end).getTime();if(!(r<=s))throw new RangeError("Invalid interval");return n>=r&&n<=s}const u1=Array.from({length:15},(e,t)=>_E(new Date().setHours(6,0,0,0),t));function JW(){const{user:e}=We(),[t,n]=x.useState("week"),[r,s]=x.useState(new Date),[i,a]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState(null),[j,k]=x.useState(null),[N,C]=x.useState([]),[E,T]=x.useState(!1),F=hr(),R=Rn(),[$,D]=x.useState({show:!1,title:""}),[B,V]=x.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),[M,P]=x.useState("");x.useEffect(()=>{I();const O=new URLSearchParams(F.search),H=O.get("dealId"),Q=O.get("action"),fe=O.get("customerName");if(H&&Q==="schedule"){if(S(H),fe){const _=decodeURIComponent(fe);k(_),D({show:!0,title:`Deal won with ${_}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}z(H),R("/jobs",{replace:!0})}},[F]),x.useEffect(()=>{B.operatorId&&B.startDate&&B.endDate&&(ge().some(Q=>Q.id===B.operatorId)||V(Q=>({...Q,operatorId:""})))},[B.startDate,B.endDate,i]);const I=async()=>{try{const[O,H,Q,fe,_]=await Promise.all([nh(),X2(),zl(),Bl(),rh()]);a(O),c(H),d(Q);const A=_.filter(X=>X.stage==="won").map(X=>X.leadId),G=fe.filter(X=>X.status==="converted"&&A.includes(X.id));if(f(G),w)try{const X=await xa(w);if(X){V(re=>{var we;return{...re,leadId:X.leadId||"",location:((we=X.customer)==null?void 0:we.address)||"",notes:X.description||""}});const Y=new Date,pe=new Date;pe.setDate(Y.getDate()+7),V(re=>({...re,startDate:Y.toISOString().slice(0,16),endDate:pe.toISOString().slice(0,16)}))}}catch(X){console.error("Error fetching deal data:",X)}}catch(O){console.error("Error fetching data:",O),ie("Error fetching data","error")}finally{p(!1)}},z=async O=>{var H,Q,fe,_,L;try{const A=await xa(O);if(A){const G=new Date,X=new Date;X.setDate(G.getDate()+7);const Y=G.toISOString().slice(0,16),pe=X.toISOString().slice(0,16);S(O),(H=A.customer)!=null&&H.name&&k(A.customer.name),T(!0);try{const re=await cd(A.leadId);if(re&&re.length>0){const we=[];re.forEach(ce=>{if(ce.selectedEquipment&&ce.selectedEquipment.equipmentId){const je=l.find(nt=>nt.id===ce.selectedEquipment.equipmentId);je&&!we.some(nt=>nt.id===je.id)&&we.push(je)}ce.selectedMachines&&ce.selectedMachines.length>0&&ce.selectedMachines.forEach(je=>{if(je.equipmentId){const nt=l.find(Br=>Br.id===je.equipmentId);nt&&!we.some(Br=>Br.id===nt.id)&&we.push(nt)}})}),C(we),we.length>0?V({leadId:A.leadId,equipmentId:we[0].id,operatorId:"",startDate:Y,endDate:pe,location:((Q=A.customer)==null?void 0:Q.address)||"",notes:A.description||""}):V({leadId:A.leadId,equipmentId:"",operatorId:"",startDate:Y,endDate:pe,location:((fe=A.customer)==null?void 0:fe.address)||"",notes:A.description||""})}else V({leadId:A.leadId,equipmentId:"",operatorId:"",startDate:Y,endDate:pe,location:((_=A.customer)==null?void 0:_.address)||"",notes:A.description||""})}catch(re){console.error("Error fetching quotations:",re),V({leadId:A.leadId,equipmentId:"",operatorId:"",startDate:Y,endDate:pe,location:((L=A.customer)==null?void 0:L.address)||"",notes:A.description||""})}finally{T(!1)}y(!0)}else ie("Deal not found","error")}catch(A){console.error("Error fetching deal:",A),ie("Error fetching deal","error")}},W=async()=>{try{if(!B.leadId||!B.equipmentId||!B.operatorId||!B.startDate||!B.endDate||!B.location){ie("Please fill in all required fields","error");return}let O="";const H=h.find(Q=>Q.id===B.leadId);if(H)O=H.customerName;else if(j)O=j;else{ie("Customer information is missing","error");return}await Q2({title:"Scheduled Job",leadId:B.leadId,customerId:(H==null?void 0:H.customerId)||"",customerName:O,equipmentIds:[B.equipmentId],operatorIds:[B.operatorId],scheduledStartDate:B.startDate,scheduledEndDate:B.endDate,location:B.location,status:"scheduled",notes:B.notes,dealId:w||void 0,createdBy:(e==null?void 0:e.id)||""}),await I(),y(!1),Z(),S(null),k(null),ie("Job scheduled successfully","success")}catch(O){console.error("Error creating job:",O),ie("Error creating job","error")}},Z=()=>{V({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),C([])},ie=(O,H="success")=>{D({show:!0,title:O,variant:H}),setTimeout(()=>D({show:!1,title:""}),3e3)},le=(O,H,Q,fe)=>i.filter(L=>{const A=new Date(L.scheduledStartDate),G=new Date(L.scheduledEndDate),X=new Date(Q),Y=new Date(fe);return(L.equipmentIds.includes(O)||L.operatorIds.includes(H))&&L.status!=="completed"&&L.status!=="cancelled"&&(X>=A&&X<G||Y>A&&Y<=G||X<=A&&Y>=G)}),ge=()=>{if(!B.startDate||!B.endDate)return u;const O=new Date(B.startDate),H=new Date(B.endDate);return u.filter(Q=>i.filter(_=>{const L=new Date(_.scheduledStartDate),A=new Date(_.scheduledEndDate);return _.operatorIds.includes(Q.id)&&_.status!=="completed"&&_.status!=="cancelled"&&(O>=L&&O<A||H>L&&H<=A||O<=L&&H>=A)}).length===0)},q=()=>{const O=U8(r,{weekStartsOn:1}),H=Q8(r,{weekStartsOn:1}),Q=Y8({start:O,end:H});return o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[o.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[o.jsx("div",{className:"h-12"}),u1.map((fe,_)=>o.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-900",children:br(fe,"h:mm a")},_))]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[Q.map((fe,_)=>o.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-gray-900",children:br(fe,"EEE")}),o.jsx("div",{className:"text-xs text-gray-700",children:br(fe,"MMM d")})]})},_)),u1.map((fe,_)=>o.jsx(te.Fragment,{children:Q.map((L,A)=>{const G=new Date(L.setHours(fe.getHours(),fe.getMinutes())),X=i.filter(Y=>{const pe=new Date(Y.scheduledStartDate),re=new Date(Y.scheduledEndDate);return(!M||Y.operatorIds.includes(M))&&H8(G,pe)&&XW(G,{start:pe,end:re})});return o.jsx("div",{className:`border-b border-r border-gray-100 relative ${_===0?"border-t":""} ${A===0?"border-l":""}`,style:{minHeight:`${Math.max(80,X.length*44+8)}px`},onClick:()=>{y(!0),V(Y=>({...Y,startDate:G.toISOString().slice(0,16),endDate:_E(G,2).toISOString().slice(0,16)}))},children:X.map((Y,pe)=>o.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:`${4+pe*44}px`,minHeight:"40px",zIndex:10+pe,right:pe>0?`${pe*8}px`:"4px"},onClick:re=>{re.stopPropagation(),v(Y)},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-sm truncate",children:Y.customerName}),o.jsx(Ul,{status:Y.status,className:"ml-2"})]}),o.jsxs("div",{className:"text-xs text-black mt-1",children:[br(new Date(Y.scheduledStartDate),"h:mm a")," - ",br(new Date(Y.scheduledEndDate),"h:mm a")]})]},Y.id))},`${_}-${A}`)})},_))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-900",children:"Loading job scheduling data..."})]}):o.jsxs("div",{className:"space-y-6 font-sans",children:[o.jsxs("div",{className:"flex flex-wrap items-center mb-2 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(U,{variant:"outline",size:"sm",onClick:()=>s(O=>s1(O,-7)),children:o.jsx(aA,{className:"h-4 w-4"})}),o.jsx("h2",{className:"text-lg font-semibold font-sans",children:br(r,"MMMM yyyy")}),o.jsx(U,{variant:"outline",size:"sm",onClick:()=>s(O=>s1(O,7)),children:o.jsx(oA,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end min-w-0",children:[o.jsx(De,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:O=>n(O),className:"w-24 min-w-0"}),o.jsx(De,{label:"Operator",options:[{value:"",label:"All Operators"},...u.map(O=>({value:O.id,label:O.name}))],value:M,onChange:P,className:"w-32 min-w-0"}),o.jsx(U,{size:"lg",className:"ml-2 font-bold px-6 py-2",onClick:()=>{h.length===0?D({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):y(!0)},leftIcon:o.jsx(Pn,{size:20}),children:"New Job"})]})]}),o.jsx(se,{children:o.jsxs(ae,{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Schedule"})}),m?o.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-sans",children:"No Won Deals Yet"}),o.jsx("p",{className:"text-gray-700 font-sans",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):q()]})}),o.jsxs(Ct,{isOpen:g,onClose:()=>{y(!1),Z()},title:w?`Schedule Job for Won Deal: ${j||""}`:"Schedule Job for Won Deal",size:"lg",children:[o.jsxs("div",{className:"space-y-6",children:[w&&o.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[o.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),o.jsxs("p",{className:"text-green-700",children:[o.jsx("span",{className:"font-medium",children:"Customer:"})," ",j||"Unknown customer"]}),o.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),o.jsx(De,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...Array.isArray(h)?h.map(O=>({value:O.id,label:`${O.customerName} - Won Deal`})):[]],value:B.leadId,onChange:O=>{V(H=>({...H,leadId:O})),O?(async()=>{T(!0);try{const Q=await cd(O);if(Q&&Q.length>0){const fe=[];Q.forEach(_=>{if(_.selectedEquipment&&_.selectedEquipment.equipmentId){const L=l.find(A=>A.id===_.selectedEquipment.equipmentId);L&&!fe.some(A=>A.id===L.id)&&fe.push(L)}_.selectedMachines&&_.selectedMachines.length>0&&_.selectedMachines.forEach(L=>{if(L.equipmentId){const A=l.find(G=>G.id===L.equipmentId);A&&!fe.some(G=>G.id===A.id)&&fe.push(A)}})}),C(fe),fe.length>0&&V(_=>({..._,equipmentId:fe[0].id}))}}catch(Q){console.error("Error loading equipment for lead:",Q)}finally{T(!1)}})():(C([]),V(H=>({...H,equipmentId:""})))},required:!0,className:"text-black"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(De,{label:"Equipment",options:N.length>0&&w?[{value:"",label:"-- Select deal-specific equipment --"},...Array.isArray(N)?N.map(O=>({value:O.id,label:`${O.name} (From Deal)`})):[]]:[{value:"",label:"-- Select equipment --"},...Array.isArray(l)?l.map(O=>({value:O.id,label:O.name})):[]],value:B.equipmentId,onChange:O=>V(H=>({...H,equipmentId:O})),required:!0,className:"text-black"}),E?o.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):N.length>0?o.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[N.length," equipment item",N.length!==1?"s":""," from deal quotation",N.length!==1?"s":""]}):B.leadId?o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),o.jsx(De,{label:"Operator",options:[{value:"",label:"-- Select operator --"},...ge().map(O=>({value:O.id,label:O.name}))],value:B.operatorId,onChange:O=>V(H=>({...H,operatorId:O})),required:!0,className:"text-black"}),B.startDate&&B.endDate&&o.jsx("p",{className:"mt-1 text-xs text-gray-600",children:(()=>{const O=ge(),H=u.length,Q=H-O.length;return Q===0?`All ${H} operators are available`:O.length===0?"No operators available for this time slot":`${O.length} of ${H} operators available (${Q} busy)`})()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Ke,{type:"datetime-local",label:"Start Date & Time",value:B.startDate,onChange:O=>V(H=>({...H,startDate:O.target.value})),required:!0,className:"text-black"}),o.jsx(Ke,{type:"datetime-local",label:"End Date & Time",value:B.endDate,onChange:O=>V(H=>({...H,endDate:O.target.value})),required:!0,className:"text-black"})]}),o.jsx(Ke,{label:"Location",value:B.location,onChange:O=>V(H=>({...H,location:O.target.value})),required:!0,className:"text-black"}),o.jsx(ur,{label:"Notes",value:B.notes,onChange:O=>V(H=>({...H,notes:O.target.value})),rows:4,className:"text-black"}),B.equipmentId&&B.operatorId&&B.startDate&&B.endDate&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[o.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const O=le(B.equipmentId,B.operatorId,B.startDate,B.endDate);return O.length>0?o.jsxs("div",{className:"text-error-600",children:[o.jsx("p",{children:"Conflicts found:"}),o.jsx("ul",{className:"list-disc list-inside text-sm",children:O.map(H=>o.jsxs("li",{children:[H.customerName," - ",br(new Date(H.scheduledStartDate),"MMM d, h:mm a")]},H.id))})]}):o.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(U,{variant:"outline",onClick:()=>{y(!1),Z()},children:"Cancel"}),o.jsx(U,{onClick:W,variant:"accent",children:"Schedule Job"})]})]}),o.jsx(Ct,{isOpen:!!b,onClose:()=>v(null),title:"Job Details",size:"lg",children:b&&o.jsx(ZW,{selectedJob:b})}),$.show&&o.jsx(ft,{title:$.title,description:$.description,variant:$.variant,isVisible:$.show,duration:3e3,onClose:()=>D({show:!1,title:""})})]})}function ZW({selectedJob:e}){const[t,n]=te.useState(""),[r,s]=te.useState("");return te.useEffect(()=>{async function i(){try{const a=await Sb.getJobEquipment(e.id);if(!a||a.length===0){n("No equipment assigned");return}const l=[];for(const c of a){const u=await K2(c.id);u&&u.name&&l.push(u.name)}n(l.length>0?l.join(", "):"No equipment assigned")}catch(a){console.error("Error fetching equipment names:",a),n("Error loading equipment")}}i()},[e.id]),te.useEffect(()=>{async function i(){try{const a=await Sb.getJobOperators(e.id);if(!a||a.length===0){s("No operator assigned");return}const l=[];for(const c of a){const d=(await zl()).find(h=>h.id===c.id);d&&d.name&&l.push(d.name)}s(l.length>0?l.join(", "):"No operator assigned")}catch(a){console.error("Error fetching operator names:",a),s("Error loading operators")}}i()},[e.id]),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Customer"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.customerName,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Status"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.status,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Equipment"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:t,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Operator"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:r,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Start Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:br(new Date(e.scheduledStartDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"End Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:br(new Date(e.scheduledEndDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Location"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.location,disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Notes"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.notes||"No notes",disabled:!0,readOnly:!0})]})]})})}function eH(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState([]),[a,l]=x.useState(!0),[c,u]=x.useState(null);x.useEffect(()=>{d()},[]);const d=async()=>{try{l(!0),u(null);const[h,f,m]=await Promise.all([ou.getAllJobs(),ou.getAllEquipment(),ou.getAllOperators()]);t(h),r(f),i(m)}catch(h){u(h instanceof Error?h.message:"An error occurred"),console.error("Error loading data:",h)}finally{l(!1)}};return a?o.jsx("div",{className:"p-4",children:"Loading job data..."}):c?o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",c]}),o.jsx(U,{onClick:d,children:"Try Again"})]}):o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Job Scheduling System"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx(se,{children:o.jsxs(ae,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Jobs"}),o.jsx("p",{className:"text-2xl font-bold",children:e.length})]})}),o.jsx(se,{children:o.jsxs(ae,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Equipment"}),o.jsx("p",{className:"text-2xl font-bold",children:n.length})]})}),o.jsx(se,{children:o.jsxs(ae,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Operators"}),o.jsx("p",{className:"text-2xl font-bold",children:s.length})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsx(se,{children:o.jsxs(ae,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Recent Jobs"}),e.length===0?o.jsx("p",{className:"text-gray-500",children:"No jobs found."}):o.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.title}),o.jsx("p",{className:"text-sm text-gray-600",children:h.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:h.location})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="in_progress"?"bg-blue-100 text-blue-800":h.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status})]},h.id))})]})}),o.jsx(se,{children:o.jsxs(ae,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Equipment"}),n.length===0?o.jsx("p",{className:"text-gray-500",children:"No equipment found."}):o.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.type})]}),o.jsxs("p",{className:"text-sm font-medium",children:["$",h.baseRate,"/day"]})]},h.id))})]})}),o.jsx(se,{children:o.jsxs(ae,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Operators"}),s.length===0?o.jsx("p",{className:"text-gray-500",children:"No operators found."}):o.jsx("div",{className:"space-y-2",children:s.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.specialization})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.availability==="available"?"bg-green-100 text-green-800":h.availability==="assigned"?"bg-blue-100 text-blue-800":h.availability==="on_leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.availability||"available"})]},h.id))})]})})]})]})}function tH(){const[e,t]=x.useState("loading"),[n,r]=x.useState("");x.useEffect(()=>{s()},[]);const s=async()=>{try{t("loading"),r("");const i=await fetch("http://localhost:3001/api/health");i.ok?t("success"):(t("error"),r(`API returned status ${i.status}`))}catch(i){t("error"),r(i instanceof Error?i.message:"Unknown error")}};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Job Scheduling System Test"}),o.jsx("p",{className:"text-gray-600",children:"Testing the complete job scheduling implementation"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(se,{children:o.jsx(ae,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"API Connection Status"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[e==="loading"&&"Testing API connection...",e==="success"&&"API connection successful",e==="error"&&`API connection failed: ${n}`]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${e==="loading"?"bg-yellow-500":e==="success"?"bg-green-500":"bg-red-500"}`}),o.jsx(U,{onClick:s,size:"sm",children:"Test Again"})]})]})})})}),e==="success"&&o.jsx(eH,{}),e==="error"&&o.jsx(se,{children:o.jsx(ae,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"Connection Error"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Please make sure the backend server is running on port 3001"}),o.jsx(U,{onClick:s,children:"Retry Connection"})]})})})]})}const nH=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function rH(){const{user:e}=We(),[t,n]=x.useState(""),[r,s]=x.useState(""),[i,a]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(""),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState([]),[j,k]=x.useState(!0),[N,C]=x.useState({show:!1,title:""}),E=x.useRef(null);x.useEffect(()=>{(async()=>{try{const z=await F2();S(z),k(!1)}catch(z){console.error("Error fetching site assessments:",z),M("Error loading site assessments","error"),k(!1)}})()},[]);const T=I=>{const Z=Array.from(I.target.files||[]).filter(ie=>{const le=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(ie.type),ge=ie.size<=10*1024*1024;return!le||!ge?(M("Invalid file",`${ie.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(ie=>({id:Math.random().toString(36).substring(2,9),file:ie,preview:URL.createObjectURL(ie),annotations:[]}));d(ie=>[...ie,...Z])},F=I=>{I.preventDefault();const z=Array.from(I.dataTransfer.files),W=E.current;if(W){const Z=new DataTransfer;z.forEach(le=>Z.items.add(le)),W.files=Z.files;const ie=new Event("change",{bubbles:!0});W.dispatchEvent(ie)}},R=I=>{I.preventDefault()},$=I=>{d(z=>{const W=z.filter(Z=>Z.id!==I);return z.forEach(Z=>{Z.id===I&&URL.revokeObjectURL(Z.preview)}),W})},D=I=>{f(z=>z.find(Z=>Z.id===I.id)?z.filter(Z=>Z.id!==I.id):[...z,{...I}])},B=(I,z)=>{f(W=>W.map(Z=>Z.id===I?{...Z,notes:z}:Z))},V=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){M("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(I=>setTimeout(I,1e3)),M("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{M("Error sending link","Please try again later","error")}},M=(I,z,W="success")=>{C({show:!0,title:I,description:z,variant:W}),setTimeout(()=>C({show:!1,title:""}),3e3)},P=async()=>{if(!e){M("Error","You need to be logged in to submit a site assessment","error");return}if(!t){M("Missing title","Please provide a title for the site assessment","warning");return}if(!i){M("Missing location","Please provide the site location","warning");return}if(u.length===0){M("Missing files","Please upload at least one site photo or video","warning");return}try{const I=u.filter(ge=>ge.file.type.startsWith("image/")).map(ge=>`mock-url-${ge.id}`),z=u.filter(ge=>ge.file.type.startsWith("video/")).map(ge=>`mock-url-${ge.id}`),W=h.map(ge=>ge.id),Z=h.filter(ge=>ge.notes).map(ge=>`${ge.label}: ${ge.notes}`).join(`
`),ie={title:t,description:r,customerId:l||"unknown",location:i,constraints:W,notes:Z,images:I,videos:z,createdBy:e.id},le=await $2(ie);S(ge=>[...ge,le]),n(""),s(""),c(""),a(""),d([]),f([]),p(""),M("Site assessment submitted successfully",void 0,"success")}catch(I){console.error("Error submitting site assessment:",I),M("Error submitting assessment","Please try again later","error")}};return te.useEffect(()=>()=>{u.forEach(I=>{URL.revokeObjectURL(I.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Upload Media"})}),o.jsxs(ae,{children:[o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:F,onDragOver:R,children:[o.jsx("input",{ref:E,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:T}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(hx,{className:"h-12 w-12 text-gray-400"})}),o.jsxs("div",{children:[o.jsx(U,{variant:"outline",onClick:()=>{var I;return(I=E.current)==null?void 0:I.click()},children:"Choose Files"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&o.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(I=>o.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[I.file.type.startsWith("image/")?o.jsx("img",{src:I.preview,alt:"Preview",className:"w-full h-32 object-cover"}):o.jsx("video",{src:I.preview,className:"w-full h-32 object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[I.file.type.startsWith("image/")&&o.jsx(U,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{v(I),y(!0)},children:o.jsx(rv,{size:16})}),o.jsx(U,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>$(I.id),children:o.jsx(Ns,{size:16})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:I.file.name})]},I.id))})]})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Site Constraints"})}),o.jsx(ae,{children:o.jsx("div",{className:"space-y-4",children:nH.map(I=>{var z;return o.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(W=>W.id===I.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(W=>W.id===I.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>D(I),children:h.some(W=>W.id===I.id)&&o.jsx(sA,{className:"text-white h-4 w-4"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"font-medium text-gray-900",children:I.label}),I.description&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:I.description}),h.some(W=>W.id===I.id)&&o.jsx(ur,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((z=h.find(W=>W.id===I.id))==null?void 0:z.notes)||"",onChange:W=>B(I.id,W.target.value),rows:2})]})]})},I.id)})})})]})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Remote Site Assessment"})}),o.jsx(ae,{children:o.jsxs("div",{className:"max-w-md",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ke,{type:"tel",placeholder:"Enter phone number",value:m,onChange:I=>p(I.target.value)}),o.jsx(U,{onClick:V,leftIcon:o.jsx(da,{size:16}),children:"Send Link"})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Site Details"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx(Ke,{value:t,onChange:I=>n(I.target.value),placeholder:"Site assessment title",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),o.jsx(Ke,{value:l,onChange:I=>c(I.target.value),placeholder:"Enter customer ID if available"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),o.jsx(Ke,{value:i,onChange:I=>a(I.target.value),placeholder:"Enter site address/location",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx(ur,{value:r,onChange:I=>s(I.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsxs(U,{onClick:P,className:"flex items-center gap-2",children:[o.jsx(da,{size:16}),"Submit Assessment"]})}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Assessment Summary"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(I=>o.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[I.file.type.startsWith("image/")?o.jsx(rA,{size:14}):o.jsx(rv,{size:14}),o.jsx("span",{className:"truncate max-w-[200px]",children:I.file.name})]},I.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?o.jsx("div",{className:"space-y-3",children:h.map(I=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[o.jsx(qN,{size:14}),I.label]}),I.notes&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:I.notes})]},I.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),o.jsx(Rx,{children:g&&b&&o.jsx(Zr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:o.jsxs(Zr.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{y(!1),v(null)},children:o.jsx(Ta,{size:20})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:b.preview,alt:"Annotation",className:"max-w-full h-auto"})}),o.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{y(!1),v(null)},children:"Cancel"}),o.jsx(U,{onClick:()=>{y(!1),v(null),M("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),N.show&&o.jsx(ft,{title:N.title,description:N.description,variant:N.variant,isVisible:N.show,onClose:()=>C({show:!1,title:""})})]})}const sH=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function iH(){const{id:e}=TN(),{user:t}=We(),[n,r]=x.useState(null),[s,i]=x.useState(!0),[a,l]=x.useState(sH),[c,u]=x.useState(""),[d,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState(!1),[v,w]=x.useState(null),[S,j]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&k()},[e]);const k=async()=>{try{const R=await C2(e);r(R),w({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch(R){console.error("Error fetching job details:",R),F("Error fetching job details","error")}finally{i(!1)}},N=R=>{l($=>$.map(D=>D.id===R?{...D,checked:!D.checked}:D))},C=async()=>{try{await new Promise(R=>setTimeout(R,1e3)),F("Feedback request sent successfully","success")}catch{F("Error sending feedback request","error")}},E=async()=>{if(!f||!p){F("Please fill in all discount request fields","error");return}try{await new Promise(R=>setTimeout(R,1e3)),F("Discount request submitted for approval","success")}catch{F("Error submitting discount request","error")}},T=()=>{F("Summary downloaded successfully","success")},F=(R,$="success")=>{j({show:!0,title:R,variant:$}),setTimeout(()=>j({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):s?o.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),o.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),o.jsx(U,{variant:"outline",leftIcon:o.jsx(dx,{size:16}),onClick:T,children:"Download Summary"})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Job Details"})}),o.jsx(ae,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),o.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(qd,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:n.location})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(Ht,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(mi,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Mike Operator"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),o.jsxs("div",{className:"mt-1 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:new Date(n.startDate).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qn,{className:"h-5 w-5 text-gray-400"}),o.jsxs("span",{children:[new Date(n.startDate).toLocaleTimeString()," - ",new Date(n.endDate).toLocaleTimeString()]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Safety Observations"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(R=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${R.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>N(R.id),children:R.checked&&o.jsx(xs,{className:"text-white h-4 w-4"})}),o.jsx("span",{className:"text-gray-700",children:R.label})]},R.id))}),o.jsx(ur,{label:"Safety Notes",value:c,onChange:R=>u(R.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ve,{children:"Customer Feedback"}),o.jsx(U,{variant:"outline",leftIcon:o.jsx(da,{size:16}),onClick:C,children:"Request Feedback"})]})}),o.jsx(ae,{children:v?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex",children:[1,2,3,4,5].map(R=>o.jsx("svg",{className:`h-5 w-5 ${R<=v.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},R))}),o.jsx("span",{className:"text-lg font-medium",children:v.rating})]}),o.jsx("p",{className:"text-gray-600",children:v.comments}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(v.submittedAt).toLocaleDateString()]})]}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Discount Request"})}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"requestDiscount",checked:d,onChange:R=>h(R.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&o.jsxs("div",{className:"space-y-4",children:[o.jsx(ur,{label:"Reason for Discount",value:f,onChange:R=>m(R.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),o.jsx("div",{className:"w-48",children:o.jsx(Ke,{type:"number",label:"Discount Percentage",value:p,onChange:R=>g(R.target.value),min:"0",max:"100",placeholder:"Enter %"})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(U,{onClick:E,children:"Submit for Approval"})})]})]})})]}),S.show&&o.jsx(ft,{title:S.title,variant:S.variant,isVisible:S.show,onClose:()=>j({show:!1,title:""})})]}):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const aH=async()=>{try{return await Fn.get("/equipment")}catch(e){return console.error("Failed to fetch equipment:",e),[]}},oH=async e=>{try{return await Fn.post("/equipment",e)}catch(t){throw console.error("Failed to create equipment:",t),new Error(t.message||"Failed to create equipment")}},lH=async(e,t)=>{try{return await Fn.put(`/equipment/${e}`,t)}catch(n){return console.error(`Failed to update equipment ${e}:`,n),null}},cH=async e=>{try{return await Fn.delete(`/equipment/${e}`),!0}catch(t){return console.error(`Failed to delete equipment ${e}:`,t),!1}},qf=e=>{var t,n,r,s;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((r=e.baseRates)==null?void 0:r.monthly)||0,yearly:((s=e.baseRates)==null?void 0:s.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},Gf=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],Yf=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],uH=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function dH(){const{user:e}=We(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,a]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!0),[m,p]=x.useState(!1),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState({show:!1,title:""}),[j,k]=x.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"});x.useEffect(()=>{N()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const N=async()=>{try{let D=await aH();D=D.map(qf),n(D),console.log("Successfully connected to equipment API"),f(!1)}catch(D){console.error("Error fetching equipment:",D),$("Error fetching equipment","error"),f(!1)}},C=()=>{let D=[...t];i&&(D=D.filter(B=>B.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(D=D.filter(B=>B.status===l)),u!=="all"&&(D=D.filter(B=>B.category===u)),s(D)},E=()=>{if(!j.name||!j.manufacturingDate||!j.registrationDate||!j.maxLiftingCapacity||!j.unladenWeight||!j.runningCostPerKm||!j.baseRates.micro||!j.baseRates.small||!j.baseRates.monthly||!j.baseRates.yearly)return $("Please fill in all required fields","error"),!1;const D=/^\d{4}-\d{2}$/;return!D.test(j.manufacturingDate)||!D.test(j.registrationDate)?($("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(j.maxLiftingCapacity))||isNaN(Number(j.unladenWeight))||isNaN(Number(j.runningCostPerKm))||isNaN(Number(j.baseRates.micro))||isNaN(Number(j.baseRates.small))||isNaN(Number(j.baseRates.monthly))||isNaN(Number(j.baseRates.yearly))?($("Please enter valid numbers for numeric fields","error"),!1):!0},T=async D=>{if(D.preventDefault(),!!E())try{const B={...j,equipmentId:(b==null?void 0:b.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(j.maxLiftingCapacity),unladenWeight:Number(j.unladenWeight),baseRates:{micro:Number(j.baseRates.micro),small:Number(j.baseRates.small),monthly:Number(j.baseRates.monthly),yearly:Number(j.baseRates.yearly)},runningCost:Number(j.runningCostPerKm),runningCostPerKm:Number(j.runningCostPerKm)};if(console.log("Form submission data:",B),b){console.log(`Updating equipment ${b.id}`,B);let V=await lH(b.id,B);V?(console.log("Update successful:",V),V=qf(V),n(M=>M.map(P=>P.id===b.id?V:P)),$("Equipment updated successfully","success")):$("Failed to update equipment","error")}else{console.log("Creating new equipment",B);let V=await oH(B);V=qf(V),console.log("Creation successful:",V),n(M=>[...M,V]),$("Equipment added successfully","success")}setTimeout(()=>{N()},500),p(!1),R()}catch(B){console.error("Error saving equipment:",B),$("Error saving equipment","error")}},F=async()=>{if(b)try{await cH(b.id),n(D=>D.filter(B=>B.id!==b.id)),y(!1),v(null),$("Equipment deleted successfully","success")}catch{$("Error deleting equipment","error")}},R=()=>{k({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),v(null)},$=(D,B="success")=>{S({show:!0,title:D,variant:B}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search equipment...",value:i,onChange:D=>a(D.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(De,{value:u,onChange:D=>d(D),options:[{value:"all",label:"All Categories"},...Yf],className:"w-full sm:w-48"}),o.jsx(De,{value:l,onChange:D=>c(D),options:[{value:"all",label:"All Status"},...Gf],className:"w-full sm:w-48"})]})]}),o.jsx(U,{onClick:()=>{R(),p(!0)},leftIcon:o.jsx(Pn,{className:"w-4 h-4"}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Equipment"})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Equipment Inventory"})}),o.jsx(ae,{children:h?o.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):r.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sm:px-6",children:"Rates"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(D=>{var B,V;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:D.name}),o.jsx("div",{className:"text-sm text-gray-500",children:D.equipmentId}),D.description&&o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:D.description})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(fl,{variant:"secondary",className:"w-full justify-center",children:(B=Yf.find(M=>M.value===D.category))==null?void 0:B.label}),o.jsx(fl,{variant:D.status==="available"?"success":D.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(V=Gf.find(M=>M.value===D.status))==null?void 0:V.label})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"text-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Mfg: ",D.manufacturingDate||"N/A"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(DA,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:D.maxLiftingCapacity?`${D.maxLiftingCapacity} tons max lift`:"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ht,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:D.unladenWeight?`${D.unladenWeight} tons unladen`:"N/A"})]}),D.registrationDate&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Reg: ",D.registrationDate]})]})]})}),o.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:o.jsxs("div",{className:"text-sm",children:["                          ",o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),o.jsx("div",{className:"space-y-2.5",children:uH.map(M=>o.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[o.jsx("span",{className:"text-gray-600",children:M.label}),o.jsxs("div",{className:"flex items-baseline gap-1.5",children:[o.jsx("span",{className:"text-gray-400 text-sm",children:""}),o.jsx("span",{className:"text-gray-900 font-medium",children:D.baseRates&&D.baseRates[M.value]!==void 0?Ve(D.baseRates[M.value]):"N/A"}),o.jsx("span",{className:"text-gray-500 text-sm",children:M.value==="monthly"||M.value==="yearly"?o.jsxs("div",{children:["per",o.jsx("br",{}),"month"]}):"per hour"})]})]},M.value))})]}),"                            ",o.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[o.jsx(Ht,{className:"h-4 w-4"}),o.jsx("span",{children:"Running:"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-gray-400",children:""}),o.jsx("span",{className:"text-gray-900",children:D.runningCostPerKm!==void 0?Ve(D.runningCostPerKm):"N/A"}),o.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{v(D),k({name:D.name||"",category:D.category||"mobile_crane",manufacturingDate:D.manufacturingDate||"",registrationDate:D.registrationDate||"",maxLiftingCapacity:D.maxLiftingCapacity!==void 0?String(D.maxLiftingCapacity):"",unladenWeight:D.unladenWeight!==void 0?String(D.unladenWeight):"",baseRates:{micro:D.baseRates&&D.baseRates.micro!==void 0?String(D.baseRates.micro):"",small:D.baseRates&&D.baseRates.small!==void 0?String(D.baseRates.small):"",monthly:D.baseRates&&D.baseRates.monthly!==void 0?String(D.baseRates.monthly):"",yearly:D.baseRates&&D.baseRates.yearly!==void 0?String(D.baseRates.yearly):""},runningCostPerKm:D.runningCostPerKm!==void 0?String(D.runningCostPerKm):"",description:D.description||"",status:D.status||"available"}),p(!0)},children:o.jsx(Da,{className:"h-4 w-4"})}),o.jsx(U,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{v(D),y(!0)},children:o.jsx(Ns,{className:"h-4 w-4"})})]})})]},D.id)})})]})})})]}),o.jsx(Ct,{title:b?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),R()},size:"lg",children:o.jsxs("form",{onSubmit:T,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(me,{label:"Name",value:j.name,onChange:D=>k({...j,name:D.target.value}),required:!0}),o.jsx(me,{label:"Max Lifting Capacity (tons)",type:"number",value:j.maxLiftingCapacity,onChange:D=>k({...j,maxLiftingCapacity:D.target.value}),required:!0}),o.jsx(De,{label:"Category",value:j.category,onChange:D=>k({...j,category:D}),options:Yf,className:"w-full"}),o.jsx(me,{label:"Unladen Weight (tons)",type:"number",value:j.unladenWeight,onChange:D=>k({...j,unladenWeight:D.target.value}),required:!0}),o.jsx(me,{label:"Manufacturing Date (YYYY-MM)",value:j.manufacturingDate,onChange:D=>k({...j,manufacturingDate:D.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(me,{label:"Running Cost (/km)",type:"number",value:j.runningCostPerKm,onChange:D=>k({...j,runningCostPerKm:D.target.value}),required:!0}),o.jsx(me,{label:"Registration Date (YYYY-MM)",value:j.registrationDate,onChange:D=>k({...j,registrationDate:D.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(De,{label:"Status",value:j.status,onChange:D=>k({...j,status:D}),options:Gf,className:"w-full"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(me,{label:"Micro Rate ( per hour)",type:"number",value:j.baseRates.micro,onChange:D=>k({...j,baseRates:{...j.baseRates,micro:D.target.value}}),required:!0}),o.jsx(me,{label:"Small Rate ( per hour)",type:"number",value:j.baseRates.small,onChange:D=>k({...j,baseRates:{...j.baseRates,small:D.target.value}}),required:!0}),o.jsx(me,{label:"Monthly Rate ( per month)",type:"number",value:j.baseRates.monthly,onChange:D=>k({...j,baseRates:{...j.baseRates,monthly:D.target.value}}),required:!0}),o.jsx(me,{label:"Yearly Rate ( per month)",type:"number",value:j.baseRates.yearly,onChange:D=>k({...j,baseRates:{...j.baseRates,yearly:D.target.value}}),required:!0})]})]}),o.jsx(ur,{label:"Description",value:j.description,onChange:D=>k({...j,description:D.target.value}),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{p(!1),R()},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:b?"Update Equipment":"Add Equipment"})]})]})}),o.jsx(Ct,{title:"Delete Equipment",isOpen:g,onClose:()=>{y(!1),v(null)},children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this equipment? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{y(!1),v(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:F,children:"Delete Equipment"})]})]})}),o.jsx(ft,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const Qf=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],hH=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function fH(){const{user:e}=We(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,a]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[g,y]=x.useState(null),[b,v]=x.useState(!0),[w,S]=x.useState({show:!1,title:""}),j=($,D="success",B)=>{S({show:!0,title:$,variant:D,description:B}),setTimeout(()=>S({show:!1,title:""}),3e3)},[k,N]=x.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});x.useEffect(()=>{(async()=>{try{v(!0);const D=await B2();n(D),v(!1)}catch(D){console.error("Error fetching services:",D),j("Error fetching services","error"),v(!1)}})()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const C=()=>{let $=[...t];i&&($=$.filter(D=>D.name.toLowerCase().includes(i.toLowerCase())||D.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&($=$.filter(D=>D.type===l)),u!=="all"&&($=$.filter(D=>u==="active"?D.isActive:!D.isActive)),s($)},E=async $=>{if($.preventDefault(),!k.name||!k.type||!k.baseRate||!k.unit){j("Please fill in all required fields","error");return}try{const D={name:k.name,type:k.type,baseRate:parseFloat(k.baseRate),unit:k.unit,description:k.description,isActive:k.isActive};if(g){const B=await V2(g.id,D);n(V=>V.map(M=>M.id===g.id?B:M)),j("Service updated successfully","success")}else{const B=await z2(D);n(V=>[...V,B]),j("Service added successfully","success")}f(!1),F()}catch{j("Error saving service","error")}},T=async()=>{if(g)try{await U2(g.id),n($=>$.filter(D=>D.id!==g.id)),p(!1),y(null),j("Service deleted successfully","success")}catch($){console.error("Error deleting service:",$),j("Error deleting service","error")}},F=()=>{N({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),y(null)},R=async $=>{try{const D=await W2($.id);n(B=>B.map(V=>V.id===$.id?D:V)),j(`Service ${$.isActive?"deactivated":"activated"}`,"success")}catch(D){console.error("Error toggling service status:",D),j("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search services...",value:i,onChange:$=>a($.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(De,{options:[{value:"all",label:"All Types"},...Qf],value:l,onChange:c,className:"w-40"}),o.jsx(De,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:$=>d($),className:"w-40"})]})]}),o.jsx(U,{onClick:()=>{F(),f(!0)},leftIcon:o.jsx(Pn,{size:16}),children:"Add Service"})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Services Catalog"})}),"        ",o.jsx(ae,{children:b?o.jsx("div",{className:"text-center py-4",children:"Loading services..."}):r.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map($=>{var D;return o.jsx(se,{variant:"bordered",className:"h-full",children:o.jsxs(ae,{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:$.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(qN,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-500",children:(D=Qf.find(B=>B.value===$.type))==null?void 0:D.label})]})]}),o.jsx(U,{variant:$.isActive?"default":"ghost",size:"sm",onClick:()=>R($),children:$.isActive?o.jsx(xs,{className:"h-4 w-4"}):o.jsx(Ol,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:$.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[o.jsx(ir,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:Ve($.baseRate)})]}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(Qn,{className:"h-4 w-4"}),o.jsxs("span",{children:["Per ",$.unit]})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{y($),N({name:$.name,type:$.type,baseRate:$.baseRate.toString(),unit:$.unit,description:$.description||"",isActive:$.isActive}),f(!0)},children:o.jsx(Da,{className:"h-4 w-4"})}),o.jsx(U,{variant:"destructive",size:"sm",onClick:()=>{y($),p(!0)},children:o.jsx(Ns,{className:"h-4 w-4"})})]})]})},$.id)})})})]}),o.jsx(Ct,{isOpen:h,onClose:()=>{f(!1),F()},title:g?"Edit Service":"Add New Service",size:"lg",children:o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsx(me,{label:"Service Name",value:k.name,onChange:$=>N(D=>({...D,name:$.target.value})),required:!0}),o.jsx(De,{label:"Service Type",options:Qf,value:k.type,onChange:$=>N(D=>({...D,type:$})),required:!0}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(me,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:k.baseRate,onChange:$=>N(D=>({...D,baseRate:$.target.value})),required:!0}),o.jsx(De,{label:"Rate Unit",options:hH,value:k.unit,onChange:$=>N(D=>({...D,unit:$})),required:!0})]}),o.jsx(ur,{label:"Description",value:k.description,onChange:$=>N(D=>({...D,description:$.target.value})),rows:3}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:$=>N(D=>({...D,isActive:$.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{f(!1),F()},children:"Cancel"}),o.jsx(U,{type:"submit",children:g?"Update Service":"Add Service"})]})]})}),o.jsx(Ct,{isOpen:m,onClose:()=>{p(!1),y(null)},title:"Delete Service",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{p(!1),y(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:T,children:"Delete"})]})]})}),w.show&&o.jsx(ft,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const mH=async()=>await Fn.get("/users"),pH=async e=>await Fn.post("/users",e),d1=async(e,t)=>await Fn.put(`/users/${e}`,t),gH=async e=>{await Fn.delete(`/users/${e}`)},Kf=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],xH=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],co=10,Xf=e=>{const t=e.split("").reduce((a,l)=>a+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],r=t%n.length,s=n[r];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${s}&color=fff&size=128`};function yH(){const{user:e}=We(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,a]=x.useState(1),[l,c]=x.useState(""),[u,d]=x.useState("all"),[h,f]=x.useState("all"),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(!1),[w,S]=x.useState(null),[j,k]=x.useState({show:!1,title:""}),[N,C]=x.useState({name:"",email:"",password:"",role:"operator",status:"active"});x.useEffect(()=>{(async()=>{try{if(p(!0),!e){T("Authentication Required","You need to log in to view users","warning"),p(!1);return}try{const I=(await mH()).map(z=>({id:z.id,name:z.name,email:z.email,role:z.role,status:z.status==="active"?"active":"inactive"}));n(I),s(I)}catch(P){console.error("Error fetching users:",P),P.message&&P.message.includes("Authentication required")?T("Authentication Error","You need to log in to view users","error"):T("Error loading users",P.message||"Please try again later","error");const I=[{id:"1",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"2",name:"Sales Agent",email:"sales@example.com",role:"sales_agent",status:"active"}];n(I),s(I)}}finally{p(!1)}})()},[]),x.useEffect(()=>{E()},[t,l,u,h]);const E=()=>{let M=[...t];if(l){const P=l.toLowerCase();M=M.filter(I=>I&&typeof I.name=="string"&&typeof I.email=="string"&&(I.name.toLowerCase().includes(P)||I.email.toLowerCase().includes(P)))}u!=="all"&&(M=M.filter(P=>P.role===u)),h!=="all"&&(M=M.filter(P=>P.status===h)),s(M),a(1)},T=(M,P,I="success")=>{k({show:!0,title:M,description:P,variant:I}),setTimeout(()=>k({show:!1,title:""}),3e3)},F=async M=>{const P=M.status==="active"?"inactive":"active";try{await d1(M.id,{}),n(I=>I.map(z=>z.id===M.id?{...z,status:P}:z)),T(`User ${M.status==="active"?"deactivated":"activated"}`,"success")}catch(I){console.error("Error toggling user status:",I),T("Error updating user status","error")}},R=async M=>{if(M.preventDefault(),!N.name||!N.email||!N.role){T("Please fill in all required fields","error");return}if(!w&&!N.password){T("Password is required for new users","error");return}try{if(w){const P={...w,name:N.name,email:N.email,role:N.role,status:N.status};await d1(w.id,{name:N.name,email:N.email,role:N.role,isActive:N.status==="active"}),n(I=>I.map(z=>z.id===w.id?P:z)),T("User updated successfully","success")}else try{const P=await pH({email:N.email,name:N.name,role:N.role,isActive:N.status==="active"}),I={id:P.id,name:P.name,email:P.email,role:P.role,status:P.isActive?"active":"inactive",avatar:Xf(N.name)};n(z=>[...z,I]),T("User added successfully","success")}catch(P){T(`Error creating user account: ${P.message||"Unknown error"}`,"error");return}y(!1),D()}catch(P){T(`Error saving user: ${P.message||"Unknown error"}`,"error")}},$=async()=>{if(w)try{await gH(w.id),n(M=>M.filter(P=>P.id!==w.id)),v(!1),S(null),T("User deleted successfully","success")}catch(M){console.error("Error deleting user:",M),T("Error deleting user","error")}},D=()=>{C({name:"",email:"",password:"",role:"operator",status:"active"}),S(null)},B=Math.ceil(r.length/co),V=r.slice((i-1)*co,i*co);return!e||e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search users...",value:l,onChange:M=>c(M.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(De,{options:[{value:"all",label:"All Roles"},...Kf],value:u,onChange:M=>d(M),className:"w-full sm:w-40"}),o.jsx(De,{options:[{value:"all",label:"All Status"},...xH],value:h,onChange:M=>f(M),className:"w-full sm:w-40"})]})]}),o.jsx(U,{onClick:()=>{D(),y(!0)},leftIcon:o.jsx(EA,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add User"})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"User Management"})}),o.jsx(ae,{children:m?o.jsx("div",{className:"text-center py-4",children:"Loading users..."}):V.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(M=>{var P;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:M.avatar||Xf(M.name),alt:M.name,className:"h-10 w-10 rounded-full object-cover",onError:I=>{const z=I.target;z.onerror=null,z.src=Xf(M.name)}}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium text-gray-900",children:M.name}),o.jsx("div",{className:"text-sm text-gray-500",children:M.email})]})]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(P=Kf.find(I=>I.value===M.role))==null?void 0:P.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:M.status==="active"?"Active":"Inactive"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>F(M),children:M.status==="active"?o.jsx(Ol,{size:16}):o.jsx(xs,{size:16})}),o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{S(M),C({name:M.name,email:M.email,password:"",role:M.role,status:M.status}),y(!0)},children:o.jsx(Da,{size:16})}),o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{S(M),v(!0)},children:o.jsx(Ns,{size:16})})]})})]},M.id)})})]})}),B>1&&o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*co+1," to"," ",Math.min(i*co,r.length)," of"," ",r.length," users"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(U,{variant:"outline",size:"sm",onClick:()=>a(M=>Math.max(1,M-1)),disabled:i===1,children:"Previous"}),o.jsx(U,{variant:"outline",size:"sm",onClick:()=>a(M=>Math.min(B,M+1)),disabled:i===B,children:"Next"})]})]})]})})]}),"      ",o.jsx(Ct,{isOpen:g,onClose:()=>{y(!1),D()},title:w?"Edit User":"Add New User",size:"lg",children:o.jsxs("form",{onSubmit:R,className:"space-y-6",children:[o.jsx(md,{}),o.jsx(me,{label:"Full Name",value:N.name,onChange:M=>C(P=>({...P,name:M.target.value})),required:!0}),"          ",o.jsx(me,{label:"Email Address",type:"email",value:N.email,onChange:M=>C(P=>({...P,email:M.target.value})),required:!0}),o.jsx(me,{label:"Password",type:"password",value:N.password||"",onChange:M=>C(P=>({...P,password:M.target.value})),required:!w,placeholder:w?"Leave blank to keep current password":""}),o.jsx(De,{label:"Role",options:Kf,value:N.role,onChange:M=>C(P=>({...P,role:M})),required:!0}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:N.status==="active",onChange:M=>C(P=>({...P,status:M.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{y(!1),D()},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:w?"Update User":"Add User"})]})]})}),"      ",o.jsx(Ct,{isOpen:b,onClose:()=>{v(!1),S(null)},title:"Delete User",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[o.jsx(wi,{className:"h-5 w-5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{v(!1),S(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:$,children:"Delete User"})]})]})}),j.show&&o.jsx(ft,{title:j.title,variant:j.variant,isVisible:j.show,onClose:()=>k({show:!1,title:""})})]})}function Ii({children:e,title:t,defaultExpanded:n=!1,icon:r,className:s="",onToggle:i}){const[a,l]=x.useState(n),c=()=>{const u=!a;l(u),i==null||i(u)};return o.jsxs(se,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${s}`,children:[o.jsx(ye,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[r&&o.jsx("div",{className:"text-gray-500 flex-shrink-0",children:r}),o.jsx(ve,{className:"text-base sm:text-lg font-medium",children:t})]}),o.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${a?"rotate-180":""}`,children:o.jsx(iA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),o.jsx("div",{className:`transition-all duration-300 overflow-hidden ${a?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:o.jsx(ae,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}const h1={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},mh=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("authToken");return t&&(e.Authorization=`Bearer ${t}`),e},vH=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:mh()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||h1}catch(e){return console.error("Error fetching quotation config:",e),h1}},bH=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:mh(),body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to update quotation config")}return(await t.json()).data}catch(t){throw console.error("Error updating quotation config:",t),t}},OE=async e=>{try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:mh()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},RE=async(e,t)=>{try{const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:mh(),body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.message||`Failed to update ${e} config`)}return(await n.json()).data}catch(n){throw console.error(`Error updating ${e} config:`,n),n}},wH=async()=>OE("resourceRates"),jH=async e=>RE("resourceRates",e),SH=async()=>OE("additionalParams"),NH=async e=>RE("additionalParams",e);function CH(){const[e,t]=x.useState(!0),[n,r]=x.useState(!1),[s,i]=x.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await vH();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{r(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const g of f){const y=s[g];if(y.minDays<=p){u(`${g.charAt(0).toUpperCase()+g.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(y.maxDays<=y.minDays){u(`${g.charAt(0).toUpperCase()+g.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=y.maxDays}if(!m)return;await bH({orderTypeLimits:s}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{r(!1)}},h=(f,m,p)=>{const g=parseInt(p)||0;i(y=>({...y,[f]:{...y[f],[m]:g}}))};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>o.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ke,{type:"number",label:"Minimum Days",value:s[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),o.jsx("div",{children:o.jsx(Ke,{type:"number",label:"Maximum Days",value:s[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:s[f].minDays+1})})]})]},f))}),o.jsx("div",{className:"flex justify-end",children:o.jsx(U,{onClick:d,disabled:n,leftIcon:n?o.jsx(st,{className:"animate-spin"}):o.jsx(ji,{}),children:n?"Saving...":"Save Changes"})}),a.show&&o.jsx(ft,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function kH(){const[e,t]=x.useState(!0),[n,r]=x.useState(!1),[s,i]=x.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await wH();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(r(!0),s.foodRatePerMonth<=0||s.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await jH(s),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{r(!1)}};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(tn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),o.jsx(Ke,{type:"number",value:s.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["",(s.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(tn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),o.jsx(Ke,{type:"number",value:s.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["",(s.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(U,{onClick:d,disabled:n,leftIcon:n?o.jsx(st,{className:"animate-spin"}):o.jsx(ji,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(ft,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function EH(){const[e,t]=x.useState(!0),[n,r]=x.useState(!1),[s,i]=x.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await SH(),m={...s,...f,usageFactors:{...s.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{r(!0),await NH(s),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{r(!1)}};if(e)return o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:g=!1})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),o.jsxs("div",{className:"relative mt-1",children:[!g&&o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:""})}),o.jsx(Ke,{type:"number",value:f,onChange:y=>m(Number(y.target.value)),className:g?"pr-8":"pl-7",min:"0"}),g&&o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx(wA,{className:"h-4 w-4 text-gray-400"})})]})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fx,{className:"h-5 w-5 text-primary-500"}),o.jsx(ve,{children:"Usage Rates"})]})}),"          ",o.jsxs(ae,{className:"space-y-4",children:[o.jsx(h,{label:"Normal Usage Factor",value:s.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Usage Factor",value:s.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"Heavy Usage Factor",value:s.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lx,{className:"h-5 w-5 text-primary-500"}),o.jsx(ve,{children:"Risk Factors"})]})}),o.jsxs(ae,{className:"space-y-4",children:[o.jsx(h,{label:"Low Risk",value:s.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Risk",value:s.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"High Risk",value:s.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qn,{className:"h-5 w-5 text-primary-500"}),o.jsx(ve,{children:"Shift Factors"})]})}),o.jsxs(ae,{className:"space-y-4",children:[o.jsx(h,{label:"Single Shift",value:s.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),o.jsx(h,{label:"Double Shift",value:s.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yA,{className:"h-5 w-5 text-primary-500"}),o.jsx(ve,{children:"Day/Night Factors"})]})}),o.jsxs(ae,{className:"space-y-4",children:[o.jsx(h,{label:"Day Factor",value:s.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),o.jsx(h,{label:"Night Factor",value:s.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(U,{onClick:d,disabled:n,leftIcon:n?o.jsx(st,{className:"animate-spin"}):o.jsx(ji,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(ft,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function DH(){const e=TH();return e?{Authorization:`Bearer ${e}`}:{}}const TH=()=>{try{return localStorage.getItem("jwt-token")||localStorage.getItem("authToken")||sessionStorage.getItem("jwt-token")||sessionStorage.getItem("authToken")}catch(e){return console.error("Error accessing storage for auth token:",e),null}};async function PH(e,t){const n=await fetch("/api/templates/merge",{method:"POST",headers:{"Content-Type":"application/json",...DH()},body:JSON.stringify({templateId:e,data:t})});if(!n.ok)throw new Error("Failed to merge template");return(await n.json()).mergedContent||""}const f1={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["10000"],otherFactorsCharge:2e3,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile",dealType:"rental",sundayWorking:"no",otherFactors:[]};function _H({onSave:e}){var w,S;const[t,n]=x.useState([]),[r,s]=x.useState(""),[i,a]=x.useState(null),[l,c]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState({show:!1,title:""}),[m,p]=x.useState("");x.useEffect(()=>{async function j(){if(i&&f1)try{const k=await PH(i.id,f1);p(k)}catch{p('<div style="color:red">Error generating preview</div>')}else p("")}j()},[i]),x.useEffect(()=>{g()},[]),x.useEffect(()=>{if(r){const j=t.find(k=>k.id===r);a(j||null)}else a(null)},[r,t]);const g=async()=>{try{c(!0);const j=await S2();n(j);const k=j.find(N=>N.isDefault);k&&s(k.id)}catch(j){console.error("Error loading templates and config:",j),y("Error loading configuration","error")}finally{c(!1)}},y=(j,k="success")=>{f({show:!0,title:j,variant:k}),setTimeout(()=>f({show:!1,title:""}),3e3)},b=async()=>{try{d(!0);const j=t.find(k=>k.isDefault);if(j&&j.id!==r&&await Pp(j.id,{isDefault:!1}),r){const k=t.find(N=>N.id===r);k&&await Pp(k.id,{isDefault:!0})}await g(),y("Default template configuration saved successfully"),e==null||e()}catch(j){console.error("Error saving default template config:",j),y("Error saving configuration","error")}finally{d(!1)}},v=[{value:"",label:"No default template selected"},...t.map(j=>({value:j.id,label:j.name}))];return l?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(se,{children:[o.jsx(ye,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wt,{className:"h-5 w-5 text-primary-500"}),o.jsx(ve,{children:"Default Quotation Template"})]})}),o.jsxs(ae,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),o.jsx(De,{options:v,value:r,onChange:s,className:"w-full max-w-md"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),r&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Wt,{className:"h-5 w-5 text-blue-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),o.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(w=t.find(j=>j.id===r))==null?void 0:w.name}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(S=t.find(j=>j.id===r))==null?void 0:S.description})]})]})}),t.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(st,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),o.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(U,{onClick:b,disabled:u||t.length===0,leftIcon:u?o.jsx(st,{className:"animate-spin"}):o.jsx(ji,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&o.jsxs(se,{children:[o.jsx(ye,{children:o.jsx(ve,{children:"Template Preview"})}),o.jsx(ae,{children:o.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:o.jsx("div",{dangerouslySetInnerHTML:{__html:m}})})})]}),h.show&&o.jsx(ft,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const IH=()=>{const[e,t]=x.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,r]=x.useState(!0),[s,i]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState("untested"),[d,h]=x.useState({show:!1,title:""}),f=(b,v="success")=>{h({show:!0,title:b,variant:v}),setTimeout(()=>h({show:!1,title:""}),v==="success"?5e3:3e3)};x.useEffect(()=>{m()},[]);const m=async()=>{r(!0);try{const b=await fetch("/api/dbconfig",{method:"GET",headers:au()});if(!b.ok)throw new Error("Failed to fetch database configuration");const v=await b.json();v.success&&v.data&&t({host:v.data.host||"localhost",port:v.data.port||5432,database:v.data.database||"asp_crm",user:v.data.user||"postgres",password:"",ssl:v.data.ssl||!1})}catch(b){console.error("Failed to fetch database config:",b),f("Failed to load database configuration","error")}finally{r(!1)}},p=b=>{const{name:v,value:w,type:S,checked:j}=b.target;t(k=>({...k,[v]:S==="checkbox"?j:S==="number"?parseInt(w)||0:w}))},g=async()=>{l(!0);try{const b=await fetch("/api/dbconfig",{method:"PUT",headers:au(),body:JSON.stringify(e)}),v=await b.json();if(b.ok&&v.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(v.message||"Unknown error")}catch(b){console.error("Failed to save database config:",b),f(`Failed to save database configuration: ${b instanceof Error?b.message:"Unknown error"}`,"error")}finally{l(!1)}},y=async()=>{var b,v;i(!0),u("untested");try{const w=await fetch("/api/dbconfig/test",{method:"POST",headers:au(),body:JSON.stringify(e)}),S=await w.json();w.ok&&S.success?(u("success"),f(`Connection successful! PostgreSQL ${((v=(b=S.data)==null?void 0:b.version)==null?void 0:v.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${S.message||"Unknown error"}`,"error"))}catch(w){console.error("Connection test error:",w),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?o.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),o.jsx(Ke,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:o.jsx(NA,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),o.jsx(Ke,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),o.jsx(Ke,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:o.jsx(ux,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx(Ke,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),o.jsx(Ke,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsx("input",{type:"checkbox",id:"ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),o.jsx("label",{htmlFor:"ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsx(U,{variant:"outline",onClick:y,disabled:s,leftIcon:s?o.jsx(st,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?o.jsx(LN,{className:"h-4 w-4 text-green-500"}):void 0,children:s?"Testing...":"Test Connection"}),o.jsx(U,{onClick:g,disabled:a,leftIcon:a?o.jsx(st,{className:"h-4 w-4 animate-spin"}):o.jsx(ji,{className:"h-4 w-4"}),children:a?"Saving...":"Save Configuration"})]}),d.show&&o.jsx(ft,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function AH(){const{user:e}=We();return!e||e.role!=="admin"&&e.role!=="operations_manager"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),o.jsx(ha,{className:"h-6 w-6 text-gray-400"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ii,{icon:o.jsx(Wt,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:o.jsx(_H,{})}),o.jsx(Ii,{icon:o.jsx(Yn,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:o.jsx(CH,{})}),o.jsx(Ii,{icon:o.jsx(Wt,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:o.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),o.jsx(Ii,{icon:o.jsx(tn,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:o.jsx(kH,{})}),o.jsx(Ii,{icon:o.jsx(fx,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:o.jsx(EH,{})}),o.jsx(Ii,{icon:o.jsx(ux,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:o.jsx(IH,{})})]})]})}function MH(){const{user:e}=We(),[t,n]=x.useState([]),[r,s]=x.useState(""),[i,a]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(!0),[m,p]=x.useState({show:!1,title:""}),[g,y]=x.useState({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""});x.useEffect(()=>{b()},[]);const b=async()=>{try{const N=await kE();N&&Array.isArray(N)?n(N):j("Error fetching customers: Invalid data format","error")}catch{j("Error fetching customers","error")}finally{f(!1)}},v=async N=>{if(N.preventDefault(),!g.name||!g.companyName||!g.contactName||!g.email||!g.phone||!g.address||!g.type){j("Please fill in all required fields","error");return}try{if(u){const C=await h8(u.id,g);C&&n(E=>E.map(T=>T.id===u.id?C:T)),j("Customer updated successfully","success")}else{const C=await EE(g);n(E=>[...E,C]),j("Customer added successfully","success")}a(!1),S()}catch{j("Error saving customer","error")}},w=async()=>{if(u)try{await f8(u.id),n(N=>N.filter(C=>C.id!==u.id)),c(!1),d(null),j("Customer deleted successfully","success")}catch{j("Error deleting customer","error")}},S=()=>{y({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""}),d(null)},j=(N,C="success")=>{p({show:!0,title:N,variant:C}),setTimeout(()=>p({show:!1,title:""}),3e3)},k=t.filter(N=>N&&typeof N.name=="string"&&typeof N.email=="string"&&(N.name.toLowerCase().includes(r.toLowerCase())||N.email.toLowerCase().includes(r.toLowerCase())||N.companyName&&typeof N.companyName=="string"&&N.companyName.toLowerCase().includes(r.toLowerCase())));return!e||e.role!=="admin"&&e.role!=="sales_agent"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 max-w-md relative",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search customers...",value:r,onChange:N=>s(N.target.value),className:"pl-10 w-full"})]}),o.jsx(U,{onClick:()=>{S(),a(!0)},leftIcon:o.jsx(Pn,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Customer"})]}),o.jsx(se,{children:o.jsx(ae,{children:h?o.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):k.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(N=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.contactName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.companyName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.designation||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.type}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.email}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.phone}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.address}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{d(N),y({name:N.name,companyName:N.companyName,contactName:N.contactName,email:N.email,phone:N.phone,address:N.address,type:N.type,designation:N.designation||"",notes:N.notes||""}),a(!0)},title:"Edit Customer",children:o.jsx(Da,{className:"h-4 w-4"})}),o.jsx(U,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{d(N),c(!0)},title:"Delete Customer",children:o.jsx(Ns,{className:"h-4 w-4"})})]})})]},N.id))})]})})})}),o.jsx(Ct,{isOpen:i,onClose:()=>{a(!1),S()},title:u?"Edit Customer":"Add New Customer",size:"lg",children:o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsx(me,{label:"Customer Name",value:g.name,onChange:N=>y(C=>({...C,name:N.target.value})),required:!0}),o.jsx(me,{label:"Company Name",value:g.companyName,onChange:N=>y(C=>({...C,companyName:N.target.value})),required:!0}),o.jsx(me,{label:"Contact Name",value:g.contactName,onChange:N=>y(C=>({...C,contactName:N.target.value})),required:!0}),o.jsx(me,{label:"Designation",value:g.designation,onChange:N=>y(C=>({...C,designation:N.target.value}))}),o.jsx(me,{label:"Type",value:g.type,onChange:N=>y(C=>({...C,type:N.target.value})),required:!0}),o.jsx(me,{label:"Email",type:"email",value:g.email,onChange:N=>y(C=>({...C,email:N.target.value})),required:!0}),o.jsx(me,{label:"Phone",value:g.phone,onChange:N=>y(C=>({...C,phone:N.target.value})),required:!0}),o.jsx(me,{label:"Address",value:g.address,onChange:N=>y(C=>({...C,address:N.target.value})),required:!0}),o.jsx(me,{label:"Notes",value:g.notes,onChange:N=>y(C=>({...C,notes:N.target.value}))}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{a(!1),S()},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:u?"Update Customer":"Add Customer"})]})]})}),o.jsx(Ct,{isOpen:l,onClose:()=>{c(!1),d(null)},title:"Delete Customer",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:w,children:"Delete"})]})]})}),m.show&&o.jsx(ft,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]})}function $t(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var OH=typeof Symbol=="function"&&Symbol.observable||"@@observable",m1=OH,p1=()=>Math.random().toString(36).substring(7).split("").join("."),RH={INIT:`@@redux/INIT${p1()}`,REPLACE:`@@redux/REPLACE${p1()}`},g1=RH;function LH(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function LE(e,t,n){if(typeof e!="function")throw new Error($t(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($t(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($t(1));return n(LE)(e,t)}let r=e,s=t,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((y,b)=>{a.set(b,y)}))}function d(){if(c)throw new Error($t(3));return s}function h(y){if(typeof y!="function")throw new Error($t(4));if(c)throw new Error($t(5));let b=!0;u();const v=l++;return a.set(v,y),function(){if(b){if(c)throw new Error($t(6));b=!1,u(),a.delete(v),i=null}}}function f(y){if(!LH(y))throw new Error($t(7));if(typeof y.type>"u")throw new Error($t(8));if(typeof y.type!="string")throw new Error($t(17));if(c)throw new Error($t(9));try{c=!0,s=r(s,y)}finally{c=!1}return(i=a).forEach(v=>{v()}),y}function m(y){if(typeof y!="function")throw new Error($t(10));r=y,f({type:g1.REPLACE})}function p(){const y=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error($t(11));function v(){const S=b;S.next&&S.next(d())}return v(),{unsubscribe:y(v)}},[m1](){return this}}}return f({type:g1.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[m1]:p}}function x1(e,t){return function(...n){return t(e.apply(this,n))}}function y1(e,t){if(typeof e=="function")return x1(e,t);if(typeof e!="object"||e===null)throw new Error($t(16));const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=x1(s,t))}return n}function FE(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function FH(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error($t(15))};const a={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(a));return i=FE(...l)(s.dispatch),{...s,dispatch:i}}}var $H={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gl=x;function BH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zH=typeof Object.is=="function"?Object.is:BH,VH=Gl.useSyncExternalStore,UH=Gl.useRef,WH=Gl.useEffect,HH=Gl.useMemo,qH=Gl.useDebugValue;$H.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=UH(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=HH(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),s!==void 0&&a.hasValue){var p=a.value;if(s(p,m))return h=p}return h=m}if(p=h,zH(d,m))return p;var g=r(m);return s!==void 0&&s(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,s]);var l=VH(e,i[0],i[1]);return WH(function(){a.hasValue=!0,a.value=l},[l]),qH(l),l};var GH=x.version.startsWith("19"),YH=Symbol.for(GH?"react.transitional.element":"react.element"),QH=Symbol.for("react.portal"),KH=Symbol.for("react.fragment"),XH=Symbol.for("react.strict_mode"),JH=Symbol.for("react.profiler"),ZH=Symbol.for("react.consumer"),eq=Symbol.for("react.context"),$E=Symbol.for("react.forward_ref"),tq=Symbol.for("react.suspense"),nq=Symbol.for("react.suspense_list"),cy=Symbol.for("react.memo"),rq=Symbol.for("react.lazy"),sq=$E,iq=cy;function aq(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case YH:switch(e=e.type,e){case KH:case JH:case XH:case tq:case nq:return e;default:switch(e=e&&e.$$typeof,e){case eq:case $E:case rq:case cy:return e;case ZH:return e;default:return t}}case QH:return t}}}function oq(e){return aq(e)===cy}function lq(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:a}){let l=!1,c,u,d,h,f;function m(v,w){return c=v,u=w,d=e(c,u),h=t(r,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(r,u)),f=n(d,h,u),f}function g(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(r,u)),f=n(d,h,u),f}function y(){const v=e(c,u),w=!a(v,d);return d=v,w&&(f=n(d,h,u)),f}function b(v,w){const S=!i(w,u),j=!s(v,c,w,u);return c=v,u=w,S&&j?p():S?g():j?y():f}return function(w,S){return l?b(w,S):m(w,S)}}function cq(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...s}){const i=t(e,s),a=n(e,s),l=r(e,s);return lq(i,a,l,e,s)}function uq(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...i)=>t(s(...i)))}return n}function Kp(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function v1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function BE(e,t){return function(r,{displayName:s}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=v1(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=v1(u),u=i(l,c)),u},i}}function uy(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function dq(e){return e&&typeof e=="object"?Kp(t=>uq(e,t)):e?typeof e=="function"?BE(e):uy(e,"mapDispatchToProps"):Kp(t=>({dispatch:t}))}function hq(e){return e?typeof e=="function"?BE(e):uy(e,"mapStateToProps"):Kp(()=>({}))}function fq(e,t,n){return{...n,...e,...t}}function mq(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let i=!1,a;return function(c,u,d){const h=e(c,u,d);return i?s(h,a)||(a=h):(i=!0,a=h),a}}}function pq(e){return e?typeof e=="function"?mq(e):uy(e,"mergeProps"):()=>fq}function gq(e){e()}function xq(){let e=null,t=null;return{clear(){e=null,t=null},notify(){gq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var b1={notify(){},get:()=>[]};function zE(e,t){let n,r=b1,s=0,i=!1;function a(g){d();const y=r.subscribe(g);let b=!1;return()=>{b||(b=!0,y(),h())}}function l(){r.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=xq())}function h(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=b1)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>r};return p}var yq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vq=yq(),bq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wq=bq(),jq=()=>vq||wq?x.useLayoutEffect:x.useEffect,yd=jq();function w1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Jf(e,t){if(w1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!w1(e[n[s]],t[n[s]]))return!1;return!0}var Sq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Nq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Cq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},VE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kq={[sq]:Cq,[iq]:VE};function j1(e){return oq(e)?VE:kq[e.$$typeof]||Sq}var Eq=Object.defineProperty,Dq=Object.getOwnPropertyNames,S1=Object.getOwnPropertySymbols,Tq=Object.getOwnPropertyDescriptor,Pq=Object.getPrototypeOf,N1=Object.prototype;function Xp(e,t){if(typeof t!="string"){if(N1){const i=Pq(t);i&&i!==N1&&Xp(e,i)}let n=Dq(t);S1&&(n=n.concat(S1(t)));const r=j1(e),s=j1(t);for(let i=0;i<n.length;++i){const a=n[i];if(!Nq[a]&&!(s&&s[a])&&!(r&&r[a])){const l=Tq(t,a);try{Eq(e,a,l)}catch{}}}}return e}var Zf=Symbol.for("react-redux-context"),em=typeof globalThis<"u"?globalThis:{};function _q(){if(!x.createContext)return{};const e=em[Zf]??(em[Zf]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var UE=_q(),Iq=[null,null];function Aq(e,t,n){yd(()=>e(...t),n)}function Mq(e,t,n,r,s,i){e.current=r,n.current=!1,s.current&&(s.current=null,i())}function Oq(e,t,n,r,s,i,a,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const g=t.getState();let y,b;try{y=r(g,s.current)}catch(v){b=v,f=v}b||(f=null),y===i.current?a.current||u():(i.current=y,c.current=y,a.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function Rq(e,t){return e===t}function Lq(e,t,n,{pure:r,areStatesEqual:s=Rq,areOwnPropsEqual:i=Jf,areStatePropsEqual:a=Jf,areMergedPropsEqual:l=Jf,forwardRef:c=!1,context:u=UE}={}){const d=u,h=hq(e),f=dq(t),m=pq(n),p=!!e;return y=>{const b=y.displayName||y.name||"Component",v=`Connect(${b})`,w={shouldHandleStateChanges:p,displayName:v,wrappedComponentName:b,WrappedComponent:y,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:s,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:l};function S(N){const[C,E,T]=x.useMemo(()=>{const{reactReduxForwardedRef:L,...A}=N;return[N.context,L,A]},[N]),F=x.useMemo(()=>{let L=d;return C!=null&&C.Consumer,L},[C,d]),R=x.useContext(F),$=!!N.store&&!!N.store.getState&&!!N.store.dispatch,D=!!R&&!!R.store,B=$?N.store:R.store,V=D?R.getServerState:B.getState,M=x.useMemo(()=>cq(B.dispatch,w),[B]),[P,I]=x.useMemo(()=>{if(!p)return Iq;const L=zE(B,$?void 0:R.subscription),A=L.notifyNestedSubs.bind(L);return[L,A]},[B,$,R]),z=x.useMemo(()=>$?R:{...R,subscription:P},[$,R,P]),W=x.useRef(void 0),Z=x.useRef(T),ie=x.useRef(void 0),le=x.useRef(!1),ge=x.useRef(!1),q=x.useRef(void 0);yd(()=>(ge.current=!0,()=>{ge.current=!1}),[]);const O=x.useMemo(()=>()=>ie.current&&T===Z.current?ie.current:M(B.getState(),T),[B,T]),H=x.useMemo(()=>A=>P?Oq(p,B,P,M,Z,W,le,ge,ie,I,A):()=>{},[P]);Aq(Mq,[Z,W,le,T,ie,I]);let Q;try{Q=x.useSyncExternalStore(H,O,V?()=>M(V(),T):O)}catch(L){throw q.current&&(L.message+=`
The error may be correlated with this previous error:
${q.current.stack}

`),L}yd(()=>{q.current=void 0,ie.current=void 0,W.current=Q});const fe=x.useMemo(()=>x.createElement(y,{...Q,ref:E}),[E,y,Q]);return x.useMemo(()=>p?x.createElement(F.Provider,{value:z},fe):fe,[F,fe,z])}const k=x.memo(S);if(k.WrappedComponent=y,k.displayName=S.displayName=v,c){const C=x.forwardRef(function(T,F){return x.createElement(k,{...T,reactReduxForwardedRef:F})});return C.displayName=v,C.WrappedComponent=y,Xp(C,y)}return Xp(k,y)}}var WE=Lq;function Fq(e){const{children:t,context:n,serverState:r,store:s}=e,i=x.useMemo(()=>{const c=zE(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),a=x.useMemo(()=>s.getState(),[s]);yd(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=n||UE;return x.createElement(l.Provider,{value:i},t)}var $q=Fq,Bq="Invariant failed";function zq(e,t){throw new Error(Bq)}var Wn=function(t){var n=t.top,r=t.right,s=t.bottom,i=t.left,a=r-i,l=s-n,c={top:n,right:r,bottom:s,left:i,width:a,height:l,x:i,y:n,center:{x:(r+i)/2,y:(s+n)/2}};return c},dy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},C1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},Vq=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},tm={top:0,right:0,bottom:0,left:0},hy=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?tm:r,i=t.border,a=i===void 0?tm:i,l=t.padding,c=l===void 0?tm:l,u=Wn(dy(n,s)),d=Wn(C1(n,a)),h=Wn(C1(d,c));return{marginBox:u,borderBox:Wn(n),paddingBox:d,contentBox:h,margin:s,border:a,padding:c}},vn=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&zq(),s},Uq=function(){return{x:window.pageXOffset,y:window.pageYOffset}},vd=function(t,n){var r=t.borderBox,s=t.border,i=t.margin,a=t.padding,l=Vq(r,n);return hy({borderBox:l,border:s,margin:i,padding:a})},bd=function(t,n){return n===void 0&&(n=Uq()),vd(t,n)},HE=function(t,n){var r={top:vn(n.marginTop),right:vn(n.marginRight),bottom:vn(n.marginBottom),left:vn(n.marginLeft)},s={top:vn(n.paddingTop),right:vn(n.paddingRight),bottom:vn(n.paddingBottom),left:vn(n.paddingLeft)},i={top:vn(n.borderTopWidth),right:vn(n.borderRightWidth),bottom:vn(n.borderBottomWidth),left:vn(n.borderLeftWidth)};return hy({borderBox:t,margin:r,padding:s,border:i})},qE=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return HE(n,r)},jl=function(t){var n=[],r=null,s=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wd.apply(null,arguments)}function GE(e,t){}GE.bind(null,"warn");GE.bind(null,"error");function bs(){}function Wq(e,t){return{...e,...t}}function Dn(e,t,n){const r=t.map(s=>{const i=Wq(n,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){r.forEach(i=>{i()})}}const Hq="Invariant failed";class jd extends Error{}jd.prototype.toString=function(){return this.message};function J(e,t){throw new jd(Hq)}class qq extends te.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=bs,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof jd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Dn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof jd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Gq=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Sd=e=>e+1,Yq=e=>`
  You have lifted an item in position ${Sd(e.source.index)}
`,YE=(e,t)=>{const n=e.droppableId===t.droppableId,r=Sd(e.index),s=Sd(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},QE=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Qq=e=>{const t=e.destination;if(t)return YE(e.source,t);const n=e.combine;return n?QE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},k1=e=>`
  The item has returned to its starting position
  of ${Sd(e.index)}
`,Kq=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${k1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${YE(e.source,t)}
    `:n?`
      You have dropped the item.
      ${QE(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${k1(e.source)}
  `},pu={dragHandleUsageInstructions:Gq,onDragStart:Yq,onDragUpdate:Qq,onDragEnd:Kq};function Xq(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function KE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Xq(e[n],t[n]))return!1;return!0}function Te(e,t){const n=x.useState(()=>({inputs:t,result:e()}))[0],r=x.useRef(!0),s=x.useRef(n),a=r.current||!!(t&&s.current.inputs&&KE(t,s.current.inputs))?s.current:{inputs:t,result:e()};return x.useEffect(()=>{r.current=!1,s.current=a},[a]),a.result}function xe(e,t){return Te(()=>e,t)}const wt={x:0,y:0},St=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),ln=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ws=(e,t)=>e.x===t.x&&e.y===t.y,Fa=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),xi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Sl=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),E1=(e,t)=>Math.min(...t.map(n=>Sl(e,n))),XE=e=>t=>({x:e(t.x),y:e(t.y)});var Jq=(e,t)=>{const n=Wn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Yl=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),D1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Zq={top:0,right:0,bottom:0,left:0},e7=(e,t)=>t?Yl(e,t.scroll.diff.displacement):e,t7=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,n7=(e,t)=>t&&t.shouldClipSubject?Jq(t.pageMarginBox,e):Wn(e);var ba=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=e7(e.marginBox,r),i=t7(s,n,t),a=n7(i,r);return{page:e,withPlaceholder:t,active:a}},fy=(e,t)=>{e.frame||J();const n=e.frame,r=ln(t,n.scroll.initial),s=Fa(r),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},a=ba({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:a}};function bt(e,t=KE){let n=null;function r(...s){if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;const i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}const JE=bt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),ZE=bt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),ph=bt(e=>Object.values(e)),r7=bt(e=>Object.values(e));var $a=bt((e,t)=>r7(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function my(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function gh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var xh=bt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),s7=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!my(s))return null;function a(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...s,at:p}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=xh(t,r);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&J();const h=d-1;if(h<0)return null;const f=u[h];return a(f.descriptor.id)},Ba=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const eD={point:wt,value:0},Nl={invisible:{},visible:{},all:[]},i7={displaced:Nl,displacedBy:eD,at:null};var _n=(e,t)=>n=>e<=n&&n<=t,tD=e=>{const t=_n(e.top,e.bottom),n=_n(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;const c=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right;return c&&u?!0:c&&a||u&&i}},a7=e=>{const t=_n(e.top,e.bottom),n=_n(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const py={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},nD={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var o7=e=>t=>{const n=_n(t.top,t.bottom),r=_n(t.left,t.right);return s=>e===py?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const l7=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:wt;return Yl(e,n)},c7=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,u7=(e,t,n)=>n(t)(e),gy=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const i=r?l7(e,t):e;return c7(i,t,s)&&u7(i,n,s)},d7=e=>gy({...e,isVisibleThroughFrameFn:tD}),rD=e=>gy({...e,isVisibleThroughFrameFn:a7}),h7=e=>gy({...e,isVisibleThroughFrameFn:o7(e.destination.axis)}),f7=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const i=s[e];return i?i.shouldAnimate:!0};function m7(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Wn(dy(n,r))}function Cl({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:i}){return e.reduce(function(l,c){const u=m7(c,n),d=c.descriptor.id;if(l.all.push(d),!d7({target:u,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=f7(d,i,s),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function p7(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function T1({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=p7(e,{inHomeList:t});return{displaced:Nl,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Nd({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:i,index:a,forceShouldAnimate:l}){const c=Ba(e,n);if(a==null)return T1({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const u=t.find(p=>p.descriptor.index===a);if(!u)return T1({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const d=xh(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:Cl({afterDragging:f,destination:n,displacedBy:s,last:i,viewport:r.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function Ds(e,t){return!!t.effected[e]}var g7=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const i=r.draggableId,l=n[i].descriptor.index;return Ds(i,s)?e?l:l-1:e?l+1:l},x7=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,i=e?s+1:s-1,a=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<a||i>c?null:i},y7=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:i,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||J(),u.type==="REORDER"){const h=x7({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:Nd({draggable:n,insideDestination:i,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})}const d=g7({isMovingForward:e,destination:s,displaced:a.displaced,draggables:r,combine:u.combine,afterCritical:c});return d==null?null:Nd({draggable:n,insideDestination:i,destination:s,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})},v7=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return Ds(n,t)?s?wt:Fa(r.point):s?r.point:wt},b7=({afterCritical:e,impact:t,draggables:n})=>{const r=gh(t);r||J();const s=r.draggableId,i=n[s].page.borderBox.center,a=v7({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return St(i,a)};const sD=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,w7=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,xy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,P1=({axis:e,moveRelativeTo:t,isMoving:n})=>xi(e.line,t.marginBox[e.end]+sD(e,n),xy(e,t.marginBox,n)),_1=({axis:e,moveRelativeTo:t,isMoving:n})=>xi(e.line,t.marginBox[e.start]-w7(e,n),xy(e,t.marginBox,n)),j7=({axis:e,moveInto:t,isMoving:n})=>xi(e.line,t.contentBox[e.start]+sD(e,n),xy(e,t.contentBox,n));var S7=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const i=$a(r.descriptor.id,n),a=t.page,l=r.axis;if(!i.length)return j7({axis:l,moveInto:r.page,isMoving:a});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(Ds(d,s))return _1({axis:l,moveRelativeTo:f.page,isMoving:a});const m=vd(f.page,u.point);return _1({axis:l,moveRelativeTo:m,isMoving:a})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return a.borderBox.center;if(Ds(h.descriptor.id,s)){const f=vd(h.page,Fa(s.displacedBy.point));return P1({axis:l,moveRelativeTo:f,isMoving:a})}return P1({axis:l,moveRelativeTo:h.page,isMoving:a})},Jp=(e,t)=>{const n=e.frame;return n?St(t,n.scroll.diff.displacement):t};const N7=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const i=t.page.borderBox.center,a=e.at;return!n||!a?i:a.type==="REORDER"?S7({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):b7({impact:e,draggables:r,afterCritical:s})};var yh=e=>{const t=N7(e),n=e.droppable;return n?Jp(n,t):t},iD=(e,t)=>{const n=ln(t,e.scroll.initial),r=Fa(n);return{frame:Wn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function I1(e,t){return e.map(n=>t[n])}function C7(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var k7=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const i=iD(t,St(t.scroll.current,s)),a=n.frame?fy(n,St(n.frame.scroll.current,s)):n,l=e.displaced,c=Cl({afterDragging:I1(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=Cl({afterDragging:I1(l.all,r),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const g=C7(p,f);if(g){h[p]=g;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},E7=(e,t)=>St(e.scroll.diff.displacement,t),yy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=E7(n,e),s=ln(r,t.page.borderBox.center);return St(t.client.borderBox.center,s)},aD=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const a=ln(n,e.page.borderBox.center),c={target:Yl(e.page.borderBox,a),destination:t,withDroppableDisplacement:s,viewport:r};return i?h7(c):rD(c)},D7=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:i,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=$a(n.descriptor.id,r),d=Ba(t,n),h=s7({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:s})||y7({isMovingForward:e,isInHomeList:d,draggable:t,draggables:r,destination:n,insideDestination:u,previousImpact:s,viewport:i,afterCritical:c});if(!h)return null;const f=yh({impact:h,draggable:t,droppable:n,draggables:r,afterCritical:c});if(aD({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:yy({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=ln(f,a),g=k7({impact:h,viewport:i,destination:n,draggables:r,maxScrollChange:p});return{clientSelection:l,impact:g,scrollJumpRequest:p}};const Ft=e=>{const t=e.subject.active;return t||J(),t};var T7=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const i=n.subject.active;if(!i)return null;const a=n.axis,l=_n(i[a.start],i[a.end]),c=ph(r).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>tD(s.frame)(Ft(d))).filter(d=>{const h=Ft(d);return e?i[a.crossAxisEnd]<h[a.crossAxisEnd]:h[a.crossAxisStart]<i[a.crossAxisStart]}).filter(d=>{const h=Ft(d),f=_n(h[a.start],h[a.end]);return l(h[a.start])||l(h[a.end])||f(i[a.start])||f(i[a.end])}).sort((d,h)=>{const f=Ft(d)[a.crossAxisStart],m=Ft(h)[a.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>Ft(d)[a.crossAxisStart]===Ft(f[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>_n(Ft(d)[a.start],Ft(d)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>Ft(d)[a.start]-Ft(h)[a.start])[0]:c.sort((d,h)=>{const f=E1(t,D1(Ft(d))),m=E1(t,D1(Ft(h)));return f!==m?f-m:Ft(d)[a.start]-Ft(h)[a.start]})[0]};const A1=(e,t)=>{const n=e.page.borderBox.center;return Ds(e.descriptor.id,t)?ln(n,t.displacedBy.point):n},P7=(e,t)=>{const n=e.page.borderBox;return Ds(e.descriptor.id,t)?Yl(n,Fa(t.displacedBy.point)):n};var _7=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(a=>rD({target:P7(a,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=Sl(e,Jp(n,A1(a,s))),u=Sl(e,Jp(n,A1(l,s)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Ql=bt(function(t,n){const r=n[t.line];return{value:r,point:xi(t.line,r)}});const I7=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return xi(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],c=$a(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[r.size],0)+t[r.line]-s;return c<=0?null:xi(r.line,c)},oD=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),lD=(e,t,n)=>{const r=e.frame;Ba(t,e)&&J(),e.subject.withPlaceholder&&J();const s=Ql(e.axis,t.displaceBy).point,i=I7(e,s,n),a={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const d=ba({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?St(r.scroll.max,i):r.scroll.max,c=oD(r,l),u=ba({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},A7=e=>{const t=e.subject.withPlaceholder;t||J();const n=e.frame;if(!n){const a=ba({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const r=t.oldFrameMaxScroll;r||J();const s=oD(n,r),i=ba({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:i,frame:s}};var M7=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:i,viewport:a,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:Nl,displacedBy:eD,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=yh({impact:h,draggable:r,droppable:i,draggables:s,afterCritical:l}),m=Ba(r,i)?i:lD(i,r,s);return aD({draggable:r,destination:m,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?h:h+1})(),d=Ql(i.axis,r.displaceBy);return Nd({draggable:r,insideDestination:n,destination:i,viewport:a,displacedBy:d,last:Nl,index:u})},O7=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:i,viewport:a,afterCritical:l})=>{const c=T7({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:i,viewport:a});if(!c)return null;const u=$a(c.descriptor.id,s),d=_7({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=M7({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;const f=yh({impact:h,draggable:n,droppable:c,draggables:s,afterCritical:l});return{clientSelection:yy({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null}},un=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const R7=(e,t)=>{const n=un(e);return n?t[n]:null};var L7=({state:e,type:t})=>{const n=R7(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],i=n||s,a=i.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?D7({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):O7({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Qs(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function cD(e){const t=_n(e.top,e.bottom),n=_n(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function F7(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function $7({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(i=>{const a=i.axis,l=xi(i.axis.line,e.center[a.line],i.page.borderBox.center[a.crossAxisLine]);return{id:i.descriptor.id,distance:Sl(r,l)}}).sort((i,a)=>a.distance-i.distance);return s[0]?s[0].id:null}function B7({pageBorderBox:e,draggable:t,droppables:n}){const r=ph(n).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!F7(e,i))return!1;if(cD(i)(e.center))return!0;const a=s.axis,l=i.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],d=_n(i[a.crossAxisStart],i[a.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return r.length?r.length===1?r[0].descriptor.id:$7({pageBorderBox:e,draggable:t,candidates:r}):null}const uD=(e,t)=>Wn(Yl(e,t));var z7=(e,t)=>{const n=e.frame;return n?uD(t,n.scroll.diff.value):t};function dD({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function V7({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var U7=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:i,afterCritical:a})=>{const l=n.axis,c=Ql(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=xh(t,r).find(g=>{const y=g.descriptor.id,b=g.page.borderBox.center[l.line],v=Ds(y,a),w=dD({displaced:s,id:y});return v?w?h<=b:d<b-u:w?h<=b+u:d<b})||null,p=V7({draggable:t,closest:m,inHomeList:Ba(t,n)});return Nd({draggable:t,insideDestination:r,destination:n,viewport:i,last:s,displacedBy:c,index:p})};const W7=4;var H7=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const a=r.axis,l=Ql(r.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=xh(e,s).find(p=>{const g=p.descriptor.id,y=p.page.borderBox,v=y[a.size]/W7,w=Ds(g,i),S=dD({displaced:n.displaced,id:g});return w?S?d>y[a.start]+v&&d<y[a.end]-v:u>y[a.start]-c+v&&u<y[a.end]-c-v:S?d>y[a.start]+c+v&&d<y[a.end]+c-v:u>y[a.start]+v&&u<y[a.end]-v});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:r.descriptor.id}}}:null},hD=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:i,afterCritical:a})=>{const l=uD(t.page.borderBox,e),c=B7({pageBorderBox:l,draggable:t,droppables:r});if(!c)return i7;const u=r[c],d=$a(u.descriptor.id,n),h=z7(u,l);return H7({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:s,destination:u,insideDestination:d,afterCritical:a})||U7({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:s.displaced,viewport:i,afterCritical:a})},vy=(e,t)=>({...e,[t.descriptor.id]:t});const q7=({previousImpact:e,impact:t,droppables:n})=>{const r=un(e),s=un(t);if(!r||r===s)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const a=A7(i);return vy(n,a)};var G7=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const i=q7({previousImpact:r,impact:s,droppables:n}),a=un(s);if(!a)return i;const l=n[a];if(Ba(e,l)||l.subject.withPlaceholder)return i;const c=lD(l,e,t);return vy(i,c)},Vo=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:i})=>{const a=r||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=ln(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:St(e.initial.client.borderBoxCenter,u)},h={selection:St(d.selection,a.scroll.current),borderBoxCenter:St(d.borderBoxCenter,a.scroll.current),offset:St(d.offset,a.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:f};const m=l.draggables[e.critical.draggable.id],p=s||hD({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),g=G7({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:g},impact:p,viewport:a,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function Y7(e,t){return e.map(n=>t[n])}var fD=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const i=e.displaced,a=Y7(i.all,n),l=Cl({afterDragging:a,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:i});return{...e,displaced:l}},mD=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:i})=>{const a=yh({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i});return yy({pageBorderBoxCenter:a,draggable:t,viewport:s})},pD=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&J();const r=e.impact,s=n||e.viewport,i=t||e.dimensions,{draggables:a,droppables:l}=i,c=a[e.critical.draggable.id],u=un(r);u||J();const d=l[u],h=fD({impact:r,viewport:s,destination:d,draggables:a}),f=mD({impact:h,draggable:c,droppable:d,draggables:a,viewport:s,afterCritical:e.afterCritical});return Vo({impact:h,clientSelection:f,state:e,dimensions:i,viewport:s})},Q7=e=>({index:e.index,droppableId:e.droppableId}),gD=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=Ql(t.axis,e.displaceBy),i=$a(t.descriptor.id,n),a=i.indexOf(e);a===-1&&J();const l=i.slice(a+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:Cl({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:Q7(e.descriptor)}},afterCritical:u}},K7=(e,t)=>({draggables:e.draggables,droppables:vy(e.droppables,t)}),X7=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=vd(e.client,t),s=bd(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},J7=e=>{const t=e.frame;return t||J(),t},Z7=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const i=s.descriptor.droppableId,a=t[i],c=J7(a).scroll.diff.value,u=St(r,c);return X7({draggable:s,offset:u,initialWindowScroll:n.scroll.initial})})},e9=({state:e,published:t})=>{const n=t.modified.map(b=>{const v=e.dimensions.droppables[b.droppableId];return fy(v,b.scroll)}),r={...e.dimensions.droppables,...JE(n)},s=ZE(Z7({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),i={...e.dimensions.draggables,...s};t.removals.forEach(b=>{delete i[b]});const a={droppables:r,draggables:i},l=un(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],d=a.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=gD({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=hD({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),g={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Zp=e=>e.movementMode==="SNAP",nm=(e,t,n)=>{const r=K7(e.dimensions,t);return!Zp(e)||n?Vo({state:e,dimensions:r}):pD({state:e,dimensions:r})};function rm(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const M1={phase:"IDLE",completed:null,shouldFlush:!1};var t9=(e=M1,t)=>{if(t.type==="FLUSH")return{...M1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&J();const{critical:n,clientSelection:r,viewport:s,dimensions:i,movementMode:a}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:r,borderBoxCenter:l.client.borderBox.center,offset:wt},d={client:u,page:{selection:St(u.selection,s.scroll.initial),borderBoxCenter:St(u.selection,s.scroll.initial),offset:St(u.selection,s.scroll.diff.value)}},h=ph(i.droppables).every(g=>!g.isFixedOnPage),{impact:f,afterCritical:m}=gD({draggable:l,home:c,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&J(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||J(),e9({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Qs(e)||J();const{client:n}=t.payload;return ws(n,e.current.client.selection)?e:Vo({state:e,clientSelection:n,impact:Zp(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return rm(e);Qs(e)||J();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const i=fy(s,r);return nm(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qs(e)||J();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||J(),s.isEnabled===r&&J();const i={...s,isEnabled:r};return nm(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Qs(e)||J();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||J(),s.isCombineEnabled===r&&J();const i={...s,isCombineEnabled:r};return nm(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Qs(e)||J(),e.isWindowScrollAllowed||J();const n=t.payload.newScroll;if(ws(e.viewport.scroll.current,n))return rm(e);const r=iD(e.viewport,n);return Zp(e)?pD({state:e,viewport:r}):Vo({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Qs(e))return e;const n=t.payload.maxScroll;if(ws(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&J();const n=L7({state:e,type:t.type});return n?Vo({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&J(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||J(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ie(e,t){return e instanceof Object&&"type"in e&&e.type===t}const n9=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),r9=e=>({type:"LIFT",payload:e}),s9=e=>({type:"INITIAL_PUBLISH",payload:e}),i9=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),a9=()=>({type:"COLLECTION_STARTING",payload:null}),o9=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),l9=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),c9=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),xD=e=>({type:"MOVE",payload:e}),u9=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),d9=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),h9=()=>({type:"MOVE_UP",payload:null}),f9=()=>({type:"MOVE_DOWN",payload:null}),m9=()=>({type:"MOVE_RIGHT",payload:null}),p9=()=>({type:"MOVE_LEFT",payload:null}),by=()=>({type:"FLUSH",payload:null}),g9=e=>({type:"DROP_ANIMATE",payload:e}),wy=e=>({type:"DROP_COMPLETE",payload:e}),yD=e=>({type:"DROP",payload:e}),x9=e=>({type:"DROP_PENDING",payload:e}),vD=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var y9=e=>({getState:t,dispatch:n})=>r=>s=>{if(!Ie(s,"LIFT")){r(s);return}const{id:i,clientSelection:a,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&n(wy({completed:c.completed})),t().phase!=="IDLE"&&J(),n(by()),n(n9({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(s9({critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:m}))},v9=e=>()=>t=>n=>{Ie(n,"INITIAL_PUBLISH")&&e.dragging(),Ie(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ie(n,"FLUSH")||Ie(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const jy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},kl={opacity:{drop:0,combining:.7},scale:{drop:.75}},bD={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Bs=`${bD.outOfTheWay}s ${jy.outOfTheWay}`,Uo={fluid:`opacity ${Bs}`,snap:`transform ${Bs}, opacity ${Bs}`,drop:e=>{const t=`${e}s ${jy.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Bs}`,placeholder:`height ${Bs}, width ${Bs}, margin ${Bs}`},O1=e=>ws(e,wt)?void 0:`translate(${e.x}px, ${e.y}px)`,eg={moveTo:O1,drop:(e,t)=>{const n=O1(e);if(n)return t?`${n} scale(${kl.scale.drop})`:n}},{minDropTime:tg,maxDropTime:wD}=bD,b9=wD-tg,R1=1500,w9=.6;var j9=({current:e,destination:t,reason:n})=>{const r=Sl(e,t);if(r<=0)return tg;if(r>=R1)return wD;const s=r/R1,i=tg+b9*s,a=n==="CANCEL"?i*w9:i;return Number(a.toFixed(2))},S9=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:i,droppables:a}=n,l=un(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],d=mD({impact:e,draggable:t,draggables:i,afterCritical:s,droppable:c||u,viewport:r});return ln(d,t.client.borderBox.center)},N9=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:fD({draggables:e,impact:i,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Nl},didDropInsideDroppable:!0};const C9=({getState:e,dispatch:t})=>n=>r=>{if(!Ie(r,"DROP")){n(r);return}const s=e(),i=r.payload.reason;if(s.phase==="COLLECTING"){t(x9({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&J(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||J();const l=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=N9({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),f=h?my(d):null,m=h?gh(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:s.movementMode,destination:f,combine:m},y=S9({impact:d,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),b={critical:s.critical,afterCritical:s.afterCritical,result:g,impact:d};if(!(!ws(s.current.client.offset,y)||!!g.combine)){t(wy({completed:b}));return}const w=j9({current:s.current.client.offset,destination:y,reason:i});t(g9({newHomeClientOffset:y,dropDuration:w,completed:b}))};var jD=()=>({x:window.pageXOffset,y:window.pageYOffset});function k9(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function E9({onWindowScroll:e}){function t(){e(jD())}const n=jl(t),r=k9(n);let s=bs;function i(){return s!==bs}function a(){i()&&J(),s=Dn(window,[r])}function l(){i()||J(),n.cancel(),s(),s=bs}return{start:a,stop:l,isActive:i}}const D9=e=>Ie(e,"DROP_COMPLETE")||Ie(e,"DROP_ANIMATE")||Ie(e,"FLUSH"),T9=e=>{const t=E9({onWindowScroll:n=>{e.dispatch(u9({newScroll:n}))}});return n=>r=>{!t.isActive()&&Ie(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&D9(r)&&t.stop(),n(r)}};var P9=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return s.wasCalled=()=>t,s},_9=()=>{const e=[],t=s=>{const i=e.findIndex(l=>l.timerId===s);i===-1&&J();const[a]=e.splice(i,1);a.callback()};return{add:s=>{const i=setTimeout(()=>t(i)),a={timerId:i,callback:s};e.push(a)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const I9=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,A9=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,M9=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},uo=(e,t)=>{t()},Bc=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function sm(e,t,n,r){if(!e){n(r(t));return}const s=P9(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var O9=(e,t)=>{const n=_9();let r=null;const s=(h,f)=>{r&&J(),uo("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{r&&J(),uo("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Bc(h,f))})},a=(h,f)=>{r&&J();const m=Bc(h,f);r={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{uo("onDragStart",()=>sm(e().onDragStart,m,t,pu.onDragStart))})},l=(h,f)=>{const m=my(f),p=gh(f);r||J();const g=!M9(h,r.lastCritical);g&&(r.lastCritical=h);const y=!I9(r.lastLocation,m);y&&(r.lastLocation=m);const b=!A9(r.lastCombine,p);if(b&&(r.lastCombine=p),!g&&!y&&!b)return;const v={...Bc(h,r.mode),combine:p,destination:m};n.add(()=>{uo("onDragUpdate",()=>sm(e().onDragUpdate,v,t,pu.onDragUpdate))})},c=()=>{r||J(),n.flush()},u=h=>{r||J(),r=null,uo("onDragEnd",()=>sm(e().onDragEnd,h,t,pu.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:a,update:l,flush:c,drop:u,abort:()=>{if(!r)return;const h={...Bc(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},R9=(e,t)=>{const n=O9(e,t);return r=>s=>i=>{if(Ie(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ie(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),s(i),n.start(l,i.payload.movementMode);return}if(Ie(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),s(i),n.drop(l);return}if(s(i),Ie(i,"FLUSH")){n.abort();return}const a=r.getState();a.phase==="DRAGGING"&&n.update(a.critical,a.impact)}};const L9=e=>t=>n=>{if(!Ie(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&J(),e.dispatch(wy({completed:r.completed}))},F9=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>i=>{if((Ie(i,"FLUSH")||Ie(i,"DROP_COMPLETE")||Ie(i,"DROP_ANIMATION_FINISHED"))&&r(),s(i),!Ie(i,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(vD())}};n=requestAnimationFrame(()=>{n=null,t=Dn(window,[a])})}};var $9=e=>()=>t=>n=>{(Ie(n,"DROP_COMPLETE")||Ie(n,"FLUSH")||Ie(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},B9=e=>{let t=!1;return()=>n=>r=>{if(Ie(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Ie(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ie(r,"DROP_COMPLETE")){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const z9=e=>Ie(e,"DROP_COMPLETE")||Ie(e,"DROP_ANIMATE")||Ie(e,"FLUSH");var V9=e=>t=>n=>r=>{if(z9(r)){e.stop(),n(r);return}if(Ie(r,"INITIAL_PUBLISH")){n(r);const s=t.getState();s.phase!=="DRAGGING"&&J(),e.start(s);return}n(r),e.scroll(t.getState())};const U9=e=>t=>n=>{if(t(n),!Ie(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(yD({reason:r.reason})))},W9=FE;var H9=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:i})=>LE(t9,W9(FH(v9(n),$9(e),y9(e),C9,L9,F9,U9,V9(i),T9,B9(t),R9(r,s))));const im=()=>({additions:{},removals:{},modified:{}});function q9({registry:e,callbacks:t}){let n=im(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(wt)).sort((p,g)=>p.descriptor.index-g.descriptor.index),f=Object.keys(d).map(p=>{const y=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:y}}),m={additions:h,removals:Object.keys(u),modified:f};n=im(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],s()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=im())}}}var SD=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=ln({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},ND=()=>{const e=document.documentElement;return e||J(),e},CD=()=>{const e=ND();return SD({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},G9=()=>{const e=jD(),t=CD(),n=e.y,r=e.x,s=ND(),i=s.clientWidth,a=s.clientHeight,l=r+i,c=n+a;return{frame:Wn({top:n,left:r,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:wt,displacement:wt}}}},Y9=({critical:e,scrollOptions:t,registry:n})=>{const r=G9(),s=r.scroll.current,i=e.droppable,a=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(s,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(s));return{dimensions:{draggables:ZE(l),droppables:JE(a)},critical:e,viewport:r}};function L1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Q9=(e,t)=>{let n=null;const r=q9({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(f,m)=>{e.droppable.exists(f)||J(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},a=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;r.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||J();const m=n.critical.draggable;f.type==="ADDITION"&&L1(e,m,f.value)&&r.add(f.value),f.type==="REMOVAL"&&L1(e,m,f.value)&&r.remove(f.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:a,startPublishing:f=>{n&&J();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),g={draggable:m.descriptor,droppable:p.descriptor},y=e.subscribe(u);return n={critical:g,unsubscribe:y},Y9({critical:g,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},kD=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",K9=e=>{window.scrollBy(e.x,e.y)};const X9=bt(e=>ph(e).filter(t=>!(!t.isEnabled||!t.frame))),J9=(e,t)=>X9(t).find(r=>(r.frame||J(),cD(r.frame.pageMarginBox)(e)))||null;var Z9=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return J9(e,n)};const El={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var eG=(e,t,n=()=>El)=>{const r=n(),s=e[t.size]*r.startFromPercentage,i=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},ED=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Sy=1,tG=(e,t,n=()=>El)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Sy;const i=1-ED({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=r.maxPixelScroll*r.ease(i);return Math.ceil(a)},nG=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,a=t,l=i,u=Date.now()-a;if(u>=i)return e;if(u<s)return Sy;const d=ED({startOfRange:s,endOfRange:l,current:u}),h=e*r.ease(d);return Math.ceil(h)},F1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=tG(e,t,s);return i===0?0:r?Math.max(nG(i,n,s),Sy):i},$1=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const a=eG(e,r,i);return t[r.end]<t[r.start]?F1({distanceToEdge:t[r.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*F1({distanceToEdge:t[r.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},rG=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const sG=XE(e=>e===0?0:e);var DD=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const a={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=$1({container:t,distanceToEdges:a,dragStartTime:e,axis:py,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),c=$1({container:t,distanceToEdges:a,dragStartTime:e,axis:nD,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),u=sG({x:c,y:l});if(ws(u,wt))return null;const d=rG({container:t,subject:n,proposedScroll:u});return d?ws(d,wt)?null:d:null};const iG=XE(e=>e===0?0:e>0?1:-1),Ny=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=St(t,r),i={x:e(s.x,n.x),y:e(s.y,n.y)};return ws(i,wt)?null:i}})(),TD=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=iG(n),i=Ny({max:r,current:t,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},Cy=(e,t)=>TD({current:e.scroll.current,max:e.scroll.max,change:t}),aG=(e,t)=>{if(!Cy(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Ny({current:r,max:n,change:t})},ky=(e,t)=>{const n=e.frame;return n?TD({current:n.scroll.current,max:n.scroll.max,change:t}):!1},oG=(e,t)=>{const n=e.frame;return!n||!ky(e,t)?null:Ny({current:n.scroll.current,max:n.scroll.max,change:t})};var lG=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const a=DD({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return a&&Cy(e,a)?a:null},cG=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const a=e.frame;if(!a)return null;const l=DD({dragStartTime:r,container:a.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return l&&ky(e,l)?l:null},B1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:i})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=lG({dragStartTime:t,viewport:h,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){r(f);return}}const u=Z9({center:a,destination:un(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=cG({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&s(u.descriptor.id,d)},uG=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>El})=>{const r=jl(e),s=jl(t);let i=null;const a=u=>{i||J();const{shouldUseTimeDampening:d,dragStartTime:h}=i;B1({state:u,scrollWindow:r,scrollDroppable:s,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&J();const d=Date.now();let h=!1;const f=()=>{h=!0};B1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&a(u)},stop:()=>{i&&(r.cancel(),s.cancel(),i=null)},scroll:a}},dG=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,c)=>{const u=St(l.current.client.selection,c);e({client:u})},s=(l,c)=>{if(!ky(l,c))return c;const u=oG(l,c);if(!u)return t(l.descriptor.id,c),null;const d=ln(c,u);return t(l.descriptor.id,d),ln(c,d)},i=(l,c,u)=>{if(!l||!Cy(c,u))return u;const d=aG(c,u);if(!d)return n(u),null;const h=ln(u,d);return n(h),ln(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=un(l.impact);u||J();const d=s(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&r(l,f)}},hG=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=uG({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),i=dG({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:s.start,stop:s.stop}};const wa="data-rfd",ja=(()=>{const e=`${wa}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),ng=(()=>{const e=`${wa}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),fG=(()=>{const e=`${wa}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),z1={contextId:`${wa}-scroll-container-context-id`},mG=e=>t=>`[${t}="${e}"]`,ho=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),pG="pointer-events: none;";var gG=e=>{const t=mG(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ja.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:pG,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Uo.outOfTheWay};
    `;return{selector:t(ng.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(fG.contextId),styles:{always:"overflow-anchor: none;"}},a=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ho(a,"always"),resting:ho(a,"resting"),dragging:ho(a,"dragging"),dropAnimating:ho(a,"dropAnimating"),userCancel:ho(a,"userCancel")}};const dn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,am=()=>{const e=document.querySelector("head");return e||J(),e},V1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function xG(e,t){const n=Te(()=>gG(e),[e]),r=x.useRef(null),s=x.useRef(null),i=xe(bt(h=>{const f=s.current;f||J(),f.textContent=h}),[]),a=xe(h=>{const f=r.current;f||J(),f.textContent=h},[]);dn(()=>{!r.current&&!s.current||J();const h=V1(t),f=V1(t);return r.current=h,s.current=f,h.setAttribute(`${wa}-always`,e),f.setAttribute(`${wa}-dynamic`,e),am().appendChild(h),am().appendChild(f),a(n.always),i(n.resting),()=>{const m=p=>{const g=p.current;g||J(),am().removeChild(g),p.current=null};m(r),m(s)}},[t,a,i,n.always,n.resting,e]);const l=xe(()=>i(n.dragging),[i,n.dragging]),c=xe(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=xe(()=>{s.current&&i(n.resting)},[i,n.resting]);return Te(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function PD(e,t){return Array.from(e.querySelectorAll(t))}var _D=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function vh(e){return e instanceof _D(e).HTMLElement}function yG(e,t){const n=`[${ja.contextId}="${e}"]`,r=PD(document,n);if(!r.length)return null;const s=r.find(i=>i.getAttribute(ja.draggableId)===t);return!s||!vh(s)?null:s}function vG(e){const t=x.useRef({}),n=x.useRef(null),r=x.useRef(null),s=x.useRef(!1),i=xe(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const y=t.current;y[f]!==p&&delete y[f]}},[]),a=xe(function(f){const m=yG(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=xe(function(f,m){n.current===f&&(n.current=m)},[]),c=xe(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const f=n.current;f&&a(f)}))},[a]),u=xe(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(ja.draggableId)===f&&(n.current=f)},[]);return dn(()=>(s.current=!0,function(){s.current=!1;const f=r.current;f&&cancelAnimationFrame(f)}),[]),Te(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function bG(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function r(h){t.length&&t.forEach(f=>f(h))}function s(h){return e.draggables[h]||null}function i(h){const f=s(h);return f||J(),f}const a={register:h=>{e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=s(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&r({type:"REMOVAL",value:h}))},getById:i,findById:s,exists:h=>!!s(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||J(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function wG(){const e=Te(bG,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var Ey=te.createContext(null),Cd=()=>{const e=document.body;return e||J(),e};const jG={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},SG=e=>`rfd-announcement-${e}`;function NG(e){const t=Te(()=>SG(e),[e]),n=x.useRef(null);return x.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),wd(i.style,jG),Cd().appendChild(i),function(){setTimeout(function(){const c=Cd();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),xe(s=>{const i=n.current;if(i){i.textContent=s;return}},[])}const CG={separator:"::"};function Dy(e,t=CG){const n=te.useId();return Te(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function kG({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function EG({contextId:e,text:t}){const n=Dy("hidden-text",{separator:"-"}),r=Te(()=>kG({contextId:e,uniqueId:n}),[n,e]);return x.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=t,i.style.display="none",Cd().appendChild(i),function(){const l=Cd();l.contains(i)&&l.removeChild(i)}},[r,t]),r}var bh=te.createContext(null);function ID(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function DG(){let e=null;function t(){return!!e}function n(a){return a===e}function r(a){e&&J();const l={abandon:a};return e=l,l}function s(){e||J(),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:i}}function Dl(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const TG=9,PG=13,Ty=27,AD=32,_G=33,IG=34,AG=35,MG=36,OG=37,RG=38,LG=39,FG=40,$G={[PG]:!0,[TG]:!0};var MD=e=>{$G[e.keyCode]&&e.preventDefault()};const wh=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),OD=0,U1=5;function BG(e,t){return Math.abs(t.x-e.x)>=U1||Math.abs(t.y-e.y)>=U1}const W1={type:"IDLE"};function zG({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:a,clientY:l}=s;if(i!==OD)return;const c={x:a,y:l},u=n();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&J();const d=u.point;if(!BG(d,c))return;s.preventDefault();const h=u.actions.fluidLift(c);r({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:s=>{const i=n();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===Ty){s.preventDefault(),e();return}MD(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=n();if(i.type==="IDLE"&&J(),i.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:wh,fn:e}]}function VG(e){const t=x.useRef(W1),n=x.useRef(bs),r=Te(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==OD||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,a,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),s=Te(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=xe(function(){const h={passive:!1,capture:!0};n.current=Dn(window,[s,r],h)},[s,r]),a=xe(()=>{t.current.type!=="IDLE"&&(t.current=W1,n.current(),i())},[i]),l=xe(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=xe(function(){const h={capture:!0,passive:!1},f=zG({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=Dn(window,f,h)},[l,a]),u=xe(function(h,f){t.current.type!=="IDLE"&&J(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);dn(function(){return i(),function(){n.current()}},[i])}function UG(){}const WG={[IG]:!0,[_G]:!0,[MG]:!0,[AG]:!0};function HG(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Ty){s.preventDefault(),n();return}if(s.keyCode===AD){s.preventDefault(),r();return}if(s.keyCode===FG){s.preventDefault(),e.moveDown();return}if(s.keyCode===RG){s.preventDefault(),e.moveUp();return}if(s.keyCode===LG){s.preventDefault(),e.moveRight();return}if(s.keyCode===OG){s.preventDefault(),e.moveLeft();return}if(WG[s.keyCode]){s.preventDefault();return}MD(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:wh,fn:n}]}function qG(e){const t=x.useRef(UG),n=Te(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==AD)return;const a=e.findClosestDraggableId(i);if(!a)return;const l=e.tryGetLock(a,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||J(),c=!1,t.current(),r()}t.current=Dn(window,HG(u,d),{capture:!0,passive:!1})}}),[e]),r=xe(function(){const i={passive:!1,capture:!0};t.current=Dn(window,[n],i)},[n]);dn(function(){return r(),function(){t.current()}},[r])}const om={type:"IDLE"},GG=120,YG=.15;function QG({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Ty&&n.preventDefault(),e()}},{eventName:wh,fn:e}]}function KG({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:i,clientY:a}=r.touches[0],l={x:i,y:a};r.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&J();const i=r.touches[0];if(!i||!(i.force>=YG))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:wh,fn:e}]}function XG(e){const t=x.useRef(om),n=x.useRef(bs),r=xe(function(){return t.current},[]),s=xe(function(m){t.current=m},[]),i=Te(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const g=e.tryGetLock(p,l,{sourceEvent:m});if(!g)return;const y=m.touches[0],{clientX:b,clientY:v}=y,w={x:b,y:v};n.current(),h(g,w)}}),[e]),a=xe(function(){const m={capture:!0,passive:!1};n.current=Dn(window,[i],m)},[i]),l=xe(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),s(om),n.current(),a())},[a,s]),c=xe(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=xe(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:r},g=Dn(window,KG(p),m),y=Dn(window,QG(p),m);n.current=function(){g(),y()}},[c,r,l]),d=xe(function(){const m=r();m.type!=="PENDING"&&J();const p=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:p,hasMoved:!1})},[r,s]),h=xe(function(m,p){r().type!=="IDLE"&&J();const g=setTimeout(d,GG);s({type:"PENDING",point:p,actions:m,longPressTimerId:g}),u()},[u,r,s,d]);dn(function(){return a(),function(){n.current();const p=r();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),s(om))}},[r,a,s]),dn(function(){return Dn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const JG=["input","button","textarea","select","option","optgroup","video","audio"];function RD(e,t){if(t==null)return!1;if(JG.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:RD(e,t.parentElement)}function ZG(e,t){const n=t.target;return vh(n)?RD(e,n):!1}var eY=e=>Wn(e.getBoundingClientRect()).center;function tY(e){return e instanceof _D(e).Element}const nY=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function LD(e,t){return e==null?null:e[nY](t)?e:LD(e.parentElement,t)}function rY(e,t){return e.closest?e.closest(t):LD(e,t)}function sY(e){return`[${ja.contextId}="${e}"]`}function iY(e,t){const n=t.target;if(!tY(n))return null;const r=sY(e),s=rY(n,r);return!s||!vh(s)?null:s}function aY(e,t){const n=iY(e,t);return n?n.getAttribute(ja.draggableId):null}function oY(e,t){const n=`[${ng.contextId}="${e}"]`,s=PD(document,n).find(i=>i.getAttribute(ng.id)===t);return!s||!vh(s)?null:s}function lY(e){e.preventDefault()}function zc({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function FD({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!kD(t.getState(),r))}function cY({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:i,sourceEvent:a}){if(!FD({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const c=r.draggable.getById(s),u=oY(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&ZG(u,a))return null;const d=e.claim(i||bs);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(j,k){zc({expected:j,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(k())}const g=p.bind(null,"DRAGGING");function y(j){function k(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(k(),J()),n.dispatch(r9(j.liftActionArgs)),h="DRAGGING";function N(C,E={shouldBlockNextClick:!1}){if(j.cleanup(),E.shouldBlockNextClick){const T=Dn(window,[{eventName:"click",fn:lY,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}k(),n.dispatch(yD({reason:C}))}return{isActive:()=>zc({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:C=>N("DROP",C),cancel:C=>N("CANCEL",C),...j.actions}}function b(j){const k=jl(C=>{g(()=>xD({client:C}))});return{...y({liftActionArgs:{id:s,clientSelection:j,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function v(){const j={moveUp:()=>g(h9),moveRight:()=>g(m9),moveDown:()=>g(f9),moveLeft:()=>g(p9)};return y({liftActionArgs:{id:s,clientSelection:eY(u),movementMode:"SNAP"},cleanup:bs,actions:j})}function w(){zc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>zc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:b,snapLift:v,abort:w}}const uY=[VG,qG,XG];function dY({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const i=[...s?uY:[],...r||[]],a=x.useState(()=>DG())[0],l=xe(function(y,b){Dl(y)&&!Dl(b)&&a.tryAbandon()},[a]);dn(function(){let y=t.getState();return t.subscribe(()=>{const v=t.getState();l(y,v),y=v})},[a,t,l]),dn(()=>a.tryAbandon,[a.tryAbandon]);const c=xe(g=>FD({lockAPI:a,registry:n,store:t,draggableId:g}),[a,n,t]),u=xe((g,y,b)=>cY({lockAPI:a,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:y||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,a,n,t]),d=xe(g=>aY(e,g),[e]),h=xe(g=>{const y=n.draggable.findById(g);return y?y.options:null},[n.draggable]),f=xe(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(by()))},[a,t]),m=xe(()=>a.isClaimed(),[a]),p=Te(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let g=0;g<i.length;g++)i[g](p)}const hY=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Ml.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),fY=e=>({...El,...e.autoScrollerOptions,durationDampening:{...El.durationDampening,...e.autoScrollerOptions}});function fo(e){return e.current||J(),e.current}function mY(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:i}=e,a=x.useRef(null),l=ID(e),c=xe(()=>hY(l.current),[l]),u=xe(()=>fY(l.current),[l]),d=NG(t),h=EG({contextId:t,text:i}),f=xG(t,s),m=xe(T=>{fo(a).dispatch(T)},[]),p=Te(()=>y1({publishWhileDragging:i9,updateDroppableScroll:o9,updateDroppableIsEnabled:l9,updateDroppableIsCombineEnabled:c9,collectionStarting:a9},m),[m]),g=wG(),y=Te(()=>Q9(g,p),[g,p]),b=Te(()=>hG({scrollWindow:K9,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:u,...y1({move:xD},m)}),[y.scrollDroppable,m,u]),v=vG(t),w=Te(()=>H9({announce:d,autoScroller:b,dimensionMarshal:y,focusMarshal:v,getResponders:c,styleMarshal:f}),[d,b,y,v,c,f]);a.current=w;const S=xe(()=>{const T=fo(a);T.getState().phase!=="IDLE"&&T.dispatch(by())},[]),j=xe(()=>{const T=fo(a).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),k=Te(()=>({isDragging:j,tryAbort:S}),[j,S]);n(k);const N=xe(T=>kD(fo(a).getState(),T),[]),C=xe(()=>Qs(fo(a).getState()),[]),E=Te(()=>({marshal:y,focus:v,contextId:t,canLift:N,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:g}),[t,y,h,v,N,C,g]);return dY({contextId:t,store:w,registry:g,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>S,[S]),te.createElement(bh.Provider,{value:E},te.createElement($q,{context:Ey,store:w},e.children))}function pY(){return te.useId()}function gY(e){const t=pY(),n=e.dragHandleUsageInstructions||pu.dragHandleUsageInstructions;return te.createElement(qq,null,r=>te.createElement(mY,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const H1={dragging:5e3,dropAnimating:4500},xY=(e,t)=>t?Uo.drop(t.duration):e?Uo.snap:Uo.fluid,yY=(e,t)=>{if(e)return t?kl.opacity.drop:kl.opacity.combining},vY=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function bY(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:i}=e,a=!!s,l=vY(e),c=!!i,u=c?eg.drop(r,a):eg.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:xY(l,i),transform:u,opacity:yY(a,c),zIndex:c?H1.dropAnimating:H1.dragging,pointerEvents:"none"}}function wY(e){return{transform:eg.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function jY(e){return e.type==="DRAGGING"?bY(e):wY(e)}function SY(e,t,n=wt){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=HE(s,r),a=bd(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:r.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:a}}function NY(e){const t=Dy("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}=e,c=Te(()=>({canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}),[i,l,a]),u=xe(m=>{const p=s();return p||J(),SY(n,p,m)},[n,s]),d=Te(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=x.useRef(d),f=x.useRef(!0);dn(()=>(r.draggable.register(h.current),()=>r.draggable.unregister(h.current)),[r.draggable]),dn(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,r.draggable.update(d,m)},[d,r.draggable])}var Py=te.createContext(null);function kd(e){const t=x.useContext(e);return t||J(),t}function CY(e){e.preventDefault()}const kY=e=>{const t=x.useRef(null),n=xe((k=null)=>{t.current=k},[]),r=xe(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:a}=kd(bh),{type:l,droppableId:c}=kd(Py),u=Te(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:g,mapped:y,dropAnimationFinished:b}=e;if(!g){const k=Te(()=>({descriptor:u,registry:a,getDraggableRef:r,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,a,r,p,m,f]);NY(k)}const v=Te(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:CY}:null,[s,i,h,f]),w=xe(k=>{y.type==="DRAGGING"&&y.dropping&&k.propertyName==="transform"&&Ml.flushSync(b)},[b,y]),S=Te(()=>{const k=jY(y),N=y.type==="DRAGGING"&&y.dropping?w:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":h,style:k,onTransitionEnd:N},dragHandleProps:v}},[s,v,h,y,w,n]),j=Te(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return te.createElement(te.Fragment,null,d(S,y.snapshot,j))};var $D=(e,t)=>e===t,BD=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const EY=e=>e.combine?e.combine.draggableId:null,DY=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function TY(){const e=bt((s,i)=>({x:s,y:i})),t=bt((s,i,a=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:a,combineWith:l,combineTargetFor:null})),n=bt((s,i,a,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:s,dimension:a,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(s,i)=>{if(Dl(s)){if(s.critical.draggable.id!==i.draggableId)return null;const a=s.current.client.offset,l=s.dimensions.draggables[i.draggableId],c=un(s.impact),u=DY(s.impact),d=s.forceShouldAnimate;return n(e(a.x,a.y),s.movementMode,l,i.isClone,c,u,d)}if(s.phase==="DROP_ANIMATING"){const a=s.completed;if(a.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=s.dimensions.draggables[i.draggableId],u=a.result,d=u.mode,h=BD(u),f=EY(u),p={duration:s.dropDuration,curve:jy.drop,moveTo:s.newHomeClientOffset,opacity:f?kl.opacity.drop:null,scale:f?kl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function zD(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const PY={mapped:{type:"SECONDARY",offset:wt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:zD(null)}};function _Y(){const e=bt((a,l)=>({x:a,y:l})),t=bt(zD),n=bt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),r=a=>a?n(wt,a,!0):null,s=(a,l,c,u)=>{const d=c.displaced.visible[a],h=!!(u.inVirtualList&&u.effected[a]),f=gh(c),m=f&&f.draggableId===a?l:null;if(!d){if(!h)return r(m);if(c.displaced.invisible[a])return null;const y=Fa(u.displacedBy.point),b=e(y.x,y.y);return n(b,m,!0)}if(h)return r(m);const p=c.displacedBy.point,g=e(p.x,p.y);return n(g,m,d.shouldAnimate)};return(a,l)=>{if(Dl(a))return a.critical.draggable.id===l.draggableId?null:s(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const IY=()=>{const e=TY(),t=_Y();return(r,s)=>e(r,s)||t(r,s)||PY},AY={dropAnimationFinished:vD},MY=WE(IY,AY,null,{context:Ey,areStatePropsEqual:$D})(kY);function VD(e){return kd(Py).isUsingCloneFor===e.draggableId&&!e.isClone?null:te.createElement(MY,e)}function OY(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return te.createElement(VD,wd({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const UD=e=>t=>e===t,RY=UD("scroll"),LY=UD("auto"),q1=(e,t)=>t(e.overflowX)||t(e.overflowY),FY=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return q1(n,RY)||q1(n,LY)},$Y=()=>!1,WD=e=>e==null?null:e===document.body?$Y()?e:null:e===document.documentElement?null:FY(e)?e:WD(e.parentElement);var rg=e=>({x:e.scrollLeft,y:e.scrollTop});const HD=e=>e?window.getComputedStyle(e).position==="fixed"?!0:HD(e.parentElement):!1;var BY=e=>{const t=WD(e),n=HD(e);return{closestScrollable:t,isFixedOnPage:n}},zY=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:i,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=SD({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:wt,displacement:wt}}}})(),u=s==="vertical"?py:nD,d=ba({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:t,client:i,page:a,frame:c,subject:d}};const VY=(e,t)=>{const n=qE(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,a=s+t.scrollWidth,c=dy({top:r,right:a,bottom:i,left:s},n.border);return hy({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var UY=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:i,isCombineEnabled:a,shouldClipSubject:l})=>{const c=n.closestScrollable,u=VY(e,c),d=bd(u,r),h=(()=>{if(!c)return null;const m=qE(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:bd(m,r),scroll:rg(c),scrollSize:p,shouldClipSubject:l}})();return zY({descriptor:t,isEnabled:!i,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:s,client:u,page:d,closest:h})};const WY={passive:!1},HY={passive:!0};var G1=e=>e.shouldPublishImmediately?WY:HY;const Vc=e=>e&&e.env.closestScrollable||null;function qY(e){const t=x.useRef(null),n=kd(bh),r=Dy("droppable"),{registry:s,marshal:i}=n,a=ID(e),l=Te(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=x.useRef(l),u=Te(()=>bt((S,j)=>{t.current||J();const k={x:S,y:j};i.updateDroppableScroll(l.id,k)}),[l.id,i]),d=xe(()=>{const S=t.current;return!S||!S.env.closestScrollable?wt:rg(S.env.closestScrollable)},[]),h=xe(()=>{const S=d();u(S.x,S.y)},[d,u]),f=Te(()=>jl(h),[h]),m=xe(()=>{const S=t.current,j=Vc(S);if(S&&j||J(),S.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=xe((S,j)=>{t.current&&J();const k=a.current,N=k.getDroppableRef();N||J();const C=BY(N),E={ref:N,descriptor:l,env:C,scrollOptions:j};t.current=E;const T=UY({ref:N,descriptor:l,env:C,windowScroll:S,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),F=C.closestScrollable;return F&&(F.setAttribute(z1.contextId,n.contextId),F.addEventListener("scroll",m,G1(E.scrollOptions))),T},[n.contextId,l,m,a]),g=xe(()=>{const S=t.current,j=Vc(S);return S&&j||J(),rg(j)},[]),y=xe(()=>{const S=t.current;S||J();const j=Vc(S);t.current=null,j&&(f.cancel(),j.removeAttribute(z1.contextId),j.removeEventListener("scroll",m,G1(S.scrollOptions)))},[m,f]),b=xe(S=>{const j=t.current;j||J();const k=Vc(j);k||J(),k.scrollTop+=S.y,k.scrollLeft+=S.x},[]),v=Te(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:g,dragStopped:y,scroll:b}),[y,p,g,b]),w=Te(()=>({uniqueId:r,descriptor:l,callbacks:v}),[v,l,r]);dn(()=>(c.current=w.descriptor,s.droppable.register(w),()=>{t.current&&y(),s.droppable.unregister(w)}),[v,l,y,w,i,s.droppable]),dn(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),dn(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function lm(){}const Y1={width:0,height:0,margin:Zq},GY=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?Y1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},YY=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=GY({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Uo.placeholder:null}},QY=e=>{const t=x.useRef(null),n=xe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:i,contextId:a}=e,[l,c]=x.useState(e.animate==="open");x.useEffect(()=>l?r!=="open"?(n(),c(!1),lm):t.current?lm:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):lm,[r,l,n]);const u=xe(h=>{h.propertyName==="height"&&(s(),r==="close"&&i())},[r,i,s]),d=YY({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return te.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var KY=te.memo(QY);class XY extends te.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const JY=e=>{const t=x.useContext(bh);t||J();const{contextId:n,isMovementAllowed:r}=t,s=x.useRef(null),i=x.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:g,updateViewportMaxScroll:y,getContainerForClone:b}=e,v=xe(()=>s.current,[]),w=xe((F=null)=>{s.current=F},[]);xe(()=>i.current,[]);const S=xe((F=null)=>{i.current=F},[]),j=xe(()=>{r()&&y({maxScroll:CD()})},[r,y]);qY({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:v});const k=Te(()=>te.createElement(XY,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:F,data:R,animate:$})=>te.createElement(KY,{placeholder:R,onClose:F,innerRef:S,animate:$,contextId:n,onTransitionEnd:j})),[n,j,e.placeholder,e.shouldAnimatePlaceholder,S]),N=Te(()=>({innerRef:w,placeholder:k,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,k,w]),C=g?g.dragging.draggableId:null,E=Te(()=>({droppableId:l,type:c,isUsingCloneFor:C}),[l,C,c]);function T(){if(!g)return null;const{dragging:F,render:R}=g,$=te.createElement(VD,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(D,B)=>R(D,B,F));return H_.createPortal($,b())}return te.createElement(Py.Provider,{value:E},a(N,p),T())};function ZY(){return document.body||J(),document.body}const Q1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ZY},qD=e=>{let t={...e},n;for(n in Q1)e[n]===void 0&&(t={...t,[n]:Q1[n]});return t},cm=(e,t)=>e===t.droppable.type,K1=(e,t)=>t.draggables[e.draggable.id],eQ=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=bt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=bt((i,a,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:p}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,a)=>{const l=qD(a),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(Dl(i)){const f=i.critical;if(!cm(u,f))return t;const m=K1(f,i.dimensions),p=un(i.impact)===c;return r(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!cm(u,f.critical))return t;const m=K1(f.critical,i.dimensions);return r(c,d,BD(f.result)===c,un(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!cm(u,f.critical))return t;const m=un(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),g=f.critical.droppable.id===c;return m?p?e:t:g?e:t}return t}},tQ={updateViewportMaxScroll:d9},nQ=WE(eQ,tQ,(e,t,n)=>({...qD(n),...e,...t}),{context:Ey,areStatePropsEqual:$D})(JY),um=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function rQ(){const{user:e}=We(),[t,n]=x.useState([]),[r,s]=x.useState(!0),[i,a]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState({show:!1,title:""}),m=Rn();x.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0),d(null);const C=await rh(),T=(F=>Array.isArray(F)?F:F&&typeof F=="object"&&F.data&&Array.isArray(F.data)||F&&typeof F=="object"&&F.success&&Array.isArray(F.data)?F.data:[])(C);console.log(" Debug deals response:",{originalResponse:C,extractedData:T,isArray:Array.isArray(T),length:Array.isArray(T)?T.length:"not array"}),!T||T.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${T.length} deals`),n(T),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(C){console.error("Error fetching deals:",C),d(C instanceof Error?C:new Error("Unknown error fetching deals"));let E="Please check your network connection and ensure the server is running.";C instanceof Error&&(E+=` Error details: ${C.message}`),y("Error fetching deals","error",E),n([])}finally{s(!1)}},g=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},y=(C,E="success",T)=>{f({show:!0,title:C,variant:E,description:T}),setTimeout(()=>f({show:!1,title:""}),5e3)},b=async C=>{var P,I;if(a(!1),console.log("Drag end event:",C),!C.destination){console.log("No destination provided in drag result");return}if(C.source.droppableId===C.destination.droppableId&&C.source.index===C.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:E,destination:T,source:F}=C,R=T.droppableId,$=F.droppableId;console.log(`Moving deal ${E} from ${$} to ${R}`);const D=`Moving deal to ${((P=um.find(z=>z.id===R))==null?void 0:P.label)||R}...`;y(D,"warning");const B=[...t];if(!t.find(z=>z.id===E)){console.error(`Deal with ID ${E} not found`),y("Error updating deal","error","Could not find the deal in the current view");return}const M=t.map(z=>z.id===E?{...z,stage:R}:z);n(M);try{console.log(`Calling API to update deal ${E} to stage ${R}`);const z=await J2(E,R);if(z&&typeof z=="object"&&z.id){console.log("Deal updated successfully:",z);const W={...z,customer:z.customer||{name:"Unknown Customer",email:"",phone:"",company:"",address:""}};n(le=>le.map(ge=>ge.id===E?W:ge));const Z=((I=um.find(le=>le.id===R))==null?void 0:I.label)||R,ie=W.title||"Deal";y(`Deal moved to ${Z}`,"success",`"${ie}" has been successfully moved to the ${Z} stage.`),R==="won"&&w(W)}else console.error("Server returned null for updated deal"),n(B),y("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(z){console.error("Error updating deal stage:",z),console.error("Error details:",{dealId:E,newStage:R,errorMessage:z instanceof Error?z.message:"Unknown error",errorStack:z instanceof Error?z.stack:void 0}),n(B);const W=z instanceof Error?`Error: ${z.message}`:"An unknown error occurred while updating the deal";y("Error updating deal stage","error",W)}},v=()=>{a(!0),h.show&&f({show:!1,title:""})},w=C=>{var T;const E=((T=C.customer)==null?void 0:T.name)||"Customer";y("Schedule a job for this deal","success",`You've won the deal with ${E}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${C.id}&action=schedule&customerName=${encodeURIComponent(E)}`)},1500)},S=Array.isArray(t)?t.filter(C=>{var F;const E=C.title||"",T=((F=C.customer)==null?void 0:F.name)||"";return E.toLowerCase().includes(l.toLowerCase())||T.toLowerCase().includes(l.toLowerCase())}):[],j=C=>S.filter(E=>E.stage===C),k=C=>j(C).reduce((E,T)=>E+T.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const N=({deal:C,provided:E,snapshot:T})=>{var F,R;return o.jsxs("div",{ref:E.innerRef,...E.draggableProps,...E.dragHandleProps,style:{...E.draggableProps.style,opacity:T.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${T.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:C.title||`Deal for ${((F=C.customer)==null?void 0:F.name)||"Customer"}`}),o.jsx("div",{className:"flex space-x-1",children:o.jsx(U,{variant:"ghost",size:"sm",className:"h-6 w-6",children:o.jsx(vA,{className:"h-3 w-3"})})})]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[o.jsx(cx,{className:"h-3 w-3 mr-1"}),o.jsx("span",{className:"line-clamp-1",children:((R=C.customer)==null?void 0:R.name)||"Unknown Customer"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-bold text-base text-primary-800",children:Ve(C.value)}),o.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[C.probability||50,"%"]})]})]})};return o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&o.jsx(ft,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),o.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[o.jsxs(U,{variant:"outline",size:"sm",onClick:p,disabled:r,className:"flex items-center gap-1",children:[o.jsx(st,{className:`w-4 h-4 ${r?"animate-spin":""}`}),r?"Loading...":"Refresh"]}),o.jsxs("div",{className:"relative flex-grow",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(fr,{className:"w-4 h-4 text-gray-500"})}),o.jsx(Ke,{type:"text",placeholder:"Search deals...",value:l,onChange:C=>c(C.target.value),className:"pl-10 w-full"})]})]})]}),u&&!r&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx(wi,{className:"h-5 w-5 text-red-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:o.jsx("p",{children:u.message})}),o.jsxs("div",{className:"mt-4",children:[o.jsx(U,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),o.jsx(U,{onClick:g,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),r?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(st,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):o.jsx(gY,{onDragEnd:b,onDragStart:v,children:o.jsx("div",{className:"overflow-x-auto pb-6",children:o.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:um.map(C=>o.jsxs("div",{className:`rounded-lg ${C.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:C.label}),o.jsx(fl,{variant:"outline",className:"text-xs",children:Ve(k(C.id))})]}),o.jsx(nQ,{droppableId:C.id,children:E=>o.jsxs("div",{ref:E.innerRef,...E.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[j(C.id).map((T,F)=>o.jsx(OY,{draggableId:T.id,index:F,isDragDisabled:i&&T.stage!==C.id,children:(R,$)=>o.jsx(N,{deal:T,provided:R,snapshot:$})},T.id)),E.placeholder,j(C.id).length===0&&!i&&o.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},C.id))})})})]})}const sQ=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function iQ(){const{id:e}=TN(),t=Rn(),{user:n}=We(),[r,s]=x.useState(null),[i,a]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState(!1),[m,p]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&g()},[e]),x.useEffect(()=>{r!=null&&r.leadId&&y(r.leadId)},[r]);const g=async()=>{try{a(!0);const w=await xa(e);if(!w){v("Deal not found","error"),t("/deals");return}s(w)}catch(w){console.error("Error fetching deal:",w),v("Error fetching deal details","error")}finally{a(!1)}},y=async w=>{try{f(!0);const S=await cd(w);c(S);const j=[];S.forEach(k=>{if(k.selectedMachines&&k.selectedMachines.length>0)k.selectedMachines.forEach(N=>{j.some(C=>C.id===N.id)||j.push(N)});else if(k.selectedEquipment&&k.selectedEquipment.id){const N={id:k.selectedEquipment.id,machineType:k.machineType,equipmentId:k.selectedEquipment.equipmentId,name:k.selectedEquipment.name,baseRates:k.selectedEquipment.baseRates,baseRate:k.selectedEquipment.baseRates[k.orderType],runningCostPerKm:k.runningCostPerKm,quantity:1};j.some(C=>C.id===N.id)||j.push(N)}}),d(j)}catch(S){console.error("Error fetching deal equipment:",S)}finally{f(!1)}},b=async w=>{if(r)try{const S=await J2(r.id,w);S&&(s(S),v(`Deal stage updated to ${w}`,"success"))}catch(S){console.error("Error updating deal stage:",S),v("Error updating deal stage","error")}},v=(w,S="success")=>{p({show:!0,title:w,variant:S}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(st,{className:"h-8 w-8 animate-spin text-primary-600"})}):r?o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(U,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[o.jsx(ON,{size:16,className:"sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),o.jsx("div",{className:"sm:hidden",children:o.jsx(se,{children:o.jsx(ae,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-700 font-medium",children:"Value"}),o.jsx("div",{className:"text-lg font-bold text-primary-700",children:Ve(r.value)})]}),o.jsx(U,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${r.id}`),variant:"accent",children:"Create Quotation"})]})})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[o.jsxs(se,{children:[o.jsx(ye,{className:"p-4 sm:p-6",children:o.jsx(ve,{children:"Deal Information"})}),o.jsxs(ae,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:r.title}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.description})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),o.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:Ve(r.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),o.jsx("div",{className:"mt-1",children:o.jsx(De,{value:r.stage,onChange:w=>b(w),options:sQ,className:"w-full sm:w-[200px] text-sm"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(r.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(r.expectedCloseDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),o.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[r.probability,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:r.assignedTo})]})]})]})]}),o.jsxs(se,{children:[o.jsx(ye,{className:"p-4 sm:p-6",children:o.jsx(ve,{children:"Notes"})}),o.jsx(ae,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:o.jsx("p",{className:"text-sm text-gray-600",children:r.notes||"No notes available."})})]})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs(se,{children:[o.jsx(ye,{className:"p-4 sm:p-6",children:o.jsx(ve,{children:"Customer Information"})}),o.jsxs(ae,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm sm:text-base",children:r.customer.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:r.customer.designation})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cx,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600 break-words",children:r.customer.company})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(gA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600 break-all",children:r.customer.email})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600",children:r.customer.phone})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(qd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600",children:r.customer.address})]})]})]}),"          ",o.jsxs(se,{className:"mb-4",children:[o.jsx(ye,{className:"p-4 sm:p-6",children:o.jsxs(ve,{className:"flex items-center",children:[o.jsx(bA,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),o.jsx(ae,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx(st,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?o.jsx("div",{className:"space-y-2",children:u.map(w=>o.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm",children:w.name}),o.jsx("p",{className:"text-xs text-gray-500",children:w.machineType})]}),o.jsx("div",{className:"text-sm text-right",children:o.jsxs("span",{className:"font-medium",children:["Qty: ",w.quantity]})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[o.jsxs("div",{children:["Base Rate: ",Ve(w.baseRate)]}),o.jsxs("div",{children:["Cost/Km: ",Ve(w.runningCostPerKm)]})]})]},w.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),o.jsxs(se,{className:"hidden sm:block",children:[o.jsx(ye,{className:"p-4 sm:p-6",children:o.jsx(ve,{children:"Actions"})}),o.jsx(ae,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:o.jsx(U,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${r.id}`),variant:"accent",children:"Create Quotation"})})]})]})]}),m.show&&o.jsx(ft,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const GD=x.createContext({dragDropManager:void 0});function bn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var X1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),J1=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z1={INIT:"@@redux/INIT"+J1(),REPLACE:"@@redux/REPLACE"+J1()};function aQ(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function YD(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bn(1));return n(YD)(e,t)}if(typeof e!="function")throw new Error(bn(2));var s=e,i=t,a=[],l=a,c=!1;function u(){l===a&&(l=a.slice())}function d(){if(c)throw new Error(bn(3));return i}function h(g){if(typeof g!="function")throw new Error(bn(4));if(c)throw new Error(bn(5));var y=!0;return u(),l.push(g),function(){if(y){if(c)throw new Error(bn(6));y=!1,u();var v=l.indexOf(g);l.splice(v,1),a=null}}}function f(g){if(!aQ(g))throw new Error(bn(7));if(typeof g.type>"u")throw new Error(bn(8));if(c)throw new Error(bn(9));try{c=!0,i=s(i,g)}finally{c=!1}for(var y=a=l,b=0;b<y.length;b++){var v=y[b];v()}return g}function m(g){if(typeof g!="function")throw new Error(bn(10));s=g,f({type:Z1.REPLACE})}function p(){var g,y=h;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(bn(11));function w(){v.next&&v.next(d())}w();var S=y(w);return{unsubscribe:S}}},g[X1]=function(){return this},g}return f({type:Z1.INIT}),r={dispatch:f,subscribe:h,getState:d,replaceReducer:m},r[X1]=p,r}function Se(e,t,...n){if(oQ()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let r;if(t===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;r=new Error(t.replace(/%s/g,function(){return n[s++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function oQ(){return typeof process<"u"&&!0}function lQ(e,t,n){return t.split(".").reduce((r,s)=>r&&r[s]?r[s]:n||null,e)}function cQ(e,t){return e.filter(n=>n!==t)}function QD(e){return typeof e=="object"}function uQ(e,t){const n=new Map,r=i=>{n.set(i,n.has(i)?n.get(i)+1:1)};e.forEach(r),t.forEach(r);const s=[];return n.forEach((i,a)=>{i===1&&s.push(a)}),s}function dQ(e,t){return e.filter(n=>t.indexOf(n)>-1)}const _y="dnd-core/INIT_COORDS",jh="dnd-core/BEGIN_DRAG",Iy="dnd-core/PUBLISH_DRAG_SOURCE",Sh="dnd-core/HOVER",Nh="dnd-core/DROP",Ch="dnd-core/END_DRAG";function ej(e,t){return{type:_y,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const hQ={type:_y,payload:{clientOffset:null,sourceClientOffset:null}};function fQ(e){return function(n=[],r={publishSource:!0}){const{publishSource:s=!0,clientOffset:i,getSourceClientOffset:a}=r,l=e.getMonitor(),c=e.getRegistry();e.dispatch(ej(i)),mQ(n,l,c);const u=xQ(n,l);if(u==null){e.dispatch(hQ);return}let d=null;if(i){if(!a)throw new Error("getSourceClientOffset must be defined");pQ(a),d=a(u)}e.dispatch(ej(i,d));const f=c.getSource(u).beginDrag(l,u);if(f==null)return;gQ(f),c.pinSource(u);const m=c.getSourceType(u);return{type:jh,payload:{itemType:m,item:f,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!s}}}}function mQ(e,t,n){Se(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(r){Se(n.getSource(r),"Expected sourceIds to be registered.")})}function pQ(e){Se(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function gQ(e){Se(QD(e),"Item must be an object.")}function xQ(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function yQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vQ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){yQ(e,s,n[s])})}return e}function bQ(e){return function(n={}){const r=e.getMonitor(),s=e.getRegistry();wQ(r),NQ(r).forEach((a,l)=>{const c=jQ(a,l,s,r),u={type:Nh,payload:{dropResult:vQ({},n,c)}};e.dispatch(u)})}}function wQ(e){Se(e.isDragging(),"Cannot call drop while not dragging."),Se(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function jQ(e,t,n,r){const s=n.getTarget(e);let i=s?s.drop(r,e):void 0;return SQ(i),typeof i>"u"&&(i=t===0?{}:r.getDropResult()),i}function SQ(e){Se(typeof e>"u"||QD(e),"Drop result must either be an object or undefined.")}function NQ(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function CQ(e){return function(){const n=e.getMonitor(),r=e.getRegistry();kQ(n);const s=n.getSourceId();return s!=null&&(r.getSource(s,!0).endDrag(n,s),r.unpinSource()),{type:Ch}}}function kQ(e){Se(e.isDragging(),"Cannot call endDrag while not dragging.")}function sg(e,t){return t===null?e===null:Array.isArray(e)?e.some(n=>n===t):e===t}function EQ(e){return function(n,{clientOffset:r}={}){DQ(n);const s=n.slice(0),i=e.getMonitor(),a=e.getRegistry(),l=i.getItemType();return PQ(s,a,l),TQ(s,i,a),_Q(s,i,a),{type:Sh,payload:{targetIds:s,clientOffset:r||null}}}}function DQ(e){Se(Array.isArray(e),"Expected targetIds to be an array.")}function TQ(e,t,n){Se(t.isDragging(),"Cannot call hover while not dragging."),Se(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const s=e[r];Se(e.lastIndexOf(s)===r,"Expected targetIds to be unique in the passed array.");const i=n.getTarget(s);Se(i,"Expected targetIds to be registered.")}}function PQ(e,t,n){for(let r=e.length-1;r>=0;r--){const s=e[r],i=t.getTargetType(s);sg(i,n)||e.splice(r,1)}}function _Q(e,t,n){e.forEach(function(r){n.getTarget(r).hover(t,r)})}function IQ(e){return function(){if(e.getMonitor().isDragging())return{type:Iy}}}function AQ(e){return{beginDrag:fQ(e),publishDragSource:IQ(e),hover:EQ(e),drop:bQ(e),endDrag:CQ(e)}}class MQ{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:n}=this.store;function r(i){return(...a)=>{const l=i.apply(t,a);typeof l<"u"&&n(l)}}const s=AQ(this);return Object.keys(s).reduce((i,a)=>{const l=s[a];return i[a]=r(l),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=n,t.subscribe(this.handleRefCountChange)}}function OQ(e,t){return{x:e.x+t.x,y:e.y+t.y}}function KD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function RQ(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return!t||!n||!r?null:KD(OQ(t,r),n)}function LQ(e){const{clientOffset:t,initialClientOffset:n}=e;return!t||!n?null:KD(t,n)}const Wo=[],Ay=[];Wo.__IS_NONE__=!0;Ay.__IS_ALL__=!0;function FQ(e,t){return e===Wo?!1:e===Ay||typeof t>"u"?!0:dQ(t,e).length>0}class $Q{subscribeToStateChange(t,n={}){const{handlerIds:r}=n;Se(typeof t=="function","listener must be a function."),Se(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const i=()=>{const a=this.store.getState(),l=a.stateId;try{l===s||l===s+1&&!FQ(a.dirtyHandlerIds,r)||t()}finally{s=l}};return this.store.subscribe(i)}subscribeToOffsetChange(t){Se(typeof t=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const s=this.store.getState().dragOffset;s!==n&&(n=s,t())};return this.store.subscribe(r)}canDragSource(t){if(!t)return!1;const n=this.registry.getSource(t);return Se(n,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:n.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const n=this.registry.getTarget(t);if(Se(n,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(t),s=this.getItemType();return sg(r,s)&&n.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const n=this.registry.getSource(t,!0);if(Se(n,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(t),s=this.getItemType();return r!==s?!1:n.isDragging(this,t)}isOverTarget(t,n={shallow:!1}){if(!t)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const s=this.registry.getTargetType(t),i=this.getItemType();if(i&&!sg(s,i))return!1;const a=this.getTargetIds();if(!a.length)return!1;const l=a.indexOf(t);return r?l===a.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return RQ(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return LQ(this.store.getState().dragOffset)}constructor(t,n){this.store=t,this.registry=n}}const tj=typeof global<"u"?global:self,XD=tj.MutationObserver||tj.WebKitMutationObserver;function JD(e){return function(){const n=setTimeout(s,0),r=setInterval(s,50);function s(){clearTimeout(n),clearInterval(r),e()}}}function BQ(e){let t=1;const n=new XD(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}const zQ=typeof XD=="function"?BQ:JD;class VQ{enqueueTask(t){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const n=this.index;if(this.index++,t[n].call(),this.index>this.capacity){for(let r=0,s=t.length-this.index;r<s;r++)t[r]=t[r+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=zQ(this.flush),this.requestErrorThrow=JD(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class UQ{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,n){this.onError=t,this.release=n,this.task=null}}class WQ{create(t){const n=this.freeTasks,r=n.length?n.pop():new UQ(this.onError,s=>n[n.length]=s);return r.task=t,r}constructor(t){this.onError=t,this.freeTasks=[]}}const ZD=new VQ,HQ=new WQ(ZD.registerPendingError);function qQ(e){ZD.enqueueTask(HQ.create(e))}const My="dnd-core/ADD_SOURCE",Oy="dnd-core/ADD_TARGET",Ry="dnd-core/REMOVE_SOURCE",kh="dnd-core/REMOVE_TARGET";function GQ(e){return{type:My,payload:{sourceId:e}}}function YQ(e){return{type:Oy,payload:{targetId:e}}}function QQ(e){return{type:Ry,payload:{sourceId:e}}}function KQ(e){return{type:kh,payload:{targetId:e}}}function XQ(e){Se(typeof e.canDrag=="function","Expected canDrag to be a function."),Se(typeof e.beginDrag=="function","Expected beginDrag to be a function."),Se(typeof e.endDrag=="function","Expected endDrag to be a function.")}function JQ(e){Se(typeof e.canDrop=="function","Expected canDrop to be a function."),Se(typeof e.hover=="function","Expected hover to be a function."),Se(typeof e.drop=="function","Expected beginDrag to be a function.")}function ig(e,t){if(t&&Array.isArray(e)){e.forEach(n=>ig(n,!1));return}Se(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Nn;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Nn||(Nn={}));let ZQ=0;function eK(){return ZQ++}function tK(e){const t=eK().toString();switch(e){case Nn.SOURCE:return`S${t}`;case Nn.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function nj(e){switch(e[0]){case"S":return Nn.SOURCE;case"T":return Nn.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function rj(e,t){const n=e.entries();let r=!1;do{const{done:s,value:[,i]}=n.next();if(i===t)return!0;r=!!s}while(!r);return!1}class nK{addSource(t,n){ig(t),XQ(n);const r=this.addHandler(Nn.SOURCE,t,n);return this.store.dispatch(GQ(r)),r}addTarget(t,n){ig(t,!0),JQ(n);const r=this.addHandler(Nn.TARGET,t,n);return this.store.dispatch(YQ(r)),r}containsHandler(t){return rj(this.dragSources,t)||rj(this.dropTargets,t)}getSource(t,n=!1){return Se(this.isSourceId(t),"Expected a valid source ID."),n&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return Se(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return Se(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return Se(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return nj(t)===Nn.SOURCE}isTargetId(t){return nj(t)===Nn.TARGET}removeSource(t){Se(this.getSource(t),"Expected an existing source."),this.store.dispatch(QQ(t)),qQ(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){Se(this.getTarget(t),"Expected an existing target."),this.store.dispatch(KQ(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const n=this.getSource(t);Se(n,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=n}unpinSource(){Se(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,n,r){const s=tK(t);return this.types.set(s,n),t===Nn.SOURCE?this.dragSources.set(s,r):t===Nn.TARGET&&this.dropTargets.set(s,r),s}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const rK=(e,t)=>e===t;function sK(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function iK(e,t,n=rK){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function aK(e=Wo,t){switch(t.type){case Sh:break;case My:case Oy:case kh:case Ry:return Wo;case jh:case Iy:case Ch:case Nh:default:return Ay}const{targetIds:n=[],prevTargetIds:r=[]}=t.payload,s=uQ(n,r);if(!(s.length>0||!iK(n,r)))return Wo;const a=r[r.length-1],l=n[n.length-1];return a!==l&&(a&&s.push(a),l&&s.push(l)),s}function oK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){oK(e,s,n[s])})}return e}const sj={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function cK(e=sj,t){const{payload:n}=t;switch(t.type){case _y:case jh:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Sh:return sK(e.clientOffset,n.clientOffset)?e:lK({},e,{clientOffset:n.clientOffset});case Ch:case Nh:return sj;default:return e}}function uK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ai(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){uK(e,s,n[s])})}return e}const dK={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function hK(e=dK,t){const{payload:n}=t;switch(t.type){case jh:return Ai({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Iy:return Ai({},e,{isSourcePublic:!0});case Sh:return Ai({},e,{targetIds:n.targetIds});case kh:return e.targetIds.indexOf(n.targetId)===-1?e:Ai({},e,{targetIds:cQ(e.targetIds,n.targetId)});case Nh:return Ai({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Ch:return Ai({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function fK(e=0,t){switch(t.type){case My:case Oy:return e+1;case Ry:case kh:return e-1;default:return e}}function mK(e=0){return e+1}function pK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){pK(e,s,n[s])})}return e}function xK(e={},t){return{dirtyHandlerIds:aK(e.dirtyHandlerIds,{type:t.type,payload:gK({},t.payload,{prevTargetIds:lQ(e,"dragOperation.targetIds",[])})}),dragOffset:cK(e.dragOffset,t),refCount:fK(e.refCount,t),dragOperation:hK(e.dragOperation,t),stateId:mK(e.stateId)}}function yK(e,t=void 0,n={},r=!1){const s=vK(r),i=new $Q(s,new nK(s)),a=new MQ(s,i),l=e(a,t,n);return a.receiveBackend(l),a}function vK(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return YD(xK,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function bK(e,t){if(e==null)return{};var n=wK(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wK(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}let ij=0;const gu=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var jK=x.memo(function(t){var{children:n}=t,r=bK(t,["children"]);const[s,i]=SK(r);return x.useEffect(()=>{if(i){const a=eT();return++ij,()=>{--ij===0&&(a[gu]=null)}}},[]),o.jsx(GD.Provider,{value:s,children:n})});function SK(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=NK(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}function NK(e,t=eT(),n,r){const s=t;return s[gu]||(s[gu]={dragDropManager:yK(e,t,n,r)}),s[gu]}function eT(){return typeof global<"u"?global:window}var CK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var a=i[s];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const kK=Dd(CK),yi=typeof window<"u"?x.useLayoutEffect:x.useEffect;function EK(e,t,n){const[r,s]=x.useState(()=>t(e)),i=x.useCallback(()=>{const a=t(e);kK(r,a)||(s(a),n&&n())},[r,e,n]);return yi(i),[r,i]}function DK(e,t,n){const[r,s]=EK(e,t,n);return yi(function(){const a=e.getHandlerId();if(a!=null)return e.subscribeToStateChange(s,{handlerIds:[a]})},[e,s]),r}function tT(e,t,n){return DK(t,e||(()=>({})),()=>n.reconnect())}function nT(e,t){const n=[];return typeof e!="function"&&n.push(e),x.useMemo(()=>typeof e=="function"?e():e,n)}function TK(e){return x.useMemo(()=>e.hooks.dragSource(),[e])}function PK(e){return x.useMemo(()=>e.hooks.dragPreview(),[e])}let dm=!1,hm=!1;class _K{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){Se(!dm,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return dm=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{dm=!1}}isDragging(){if(!this.sourceId)return!1;Se(!hm,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return hm=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{hm=!1}}subscribeToStateChange(t,n){return this.internalMonitor.subscribeToStateChange(t,n)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,n){return this.internalMonitor.isOverTarget(t,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let fm=!1;class IK{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,n){return this.internalMonitor.subscribeToStateChange(t,n)}canDrop(){if(!this.targetId)return!1;Se(!fm,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return fm=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{fm=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function AK(e,t,n){const r=n.getRegistry(),s=r.addTarget(e,t);return[s,()=>r.removeTarget(s)]}function MK(e,t,n){const r=n.getRegistry(),s=r.addSource(e,t);return[s,()=>r.removeSource(s)]}function ag(e,t,n,r){let s;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const u=i[c];if(!l(u))return!1;const d=e[u],h=t[u];if(s=void 0,s===!1||s===void 0&&d!==h)return!1}return!0}function og(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function OK(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function RK(e){return(t=null,n=null)=>{if(!x.isValidElement(t)){const i=t;return e(i,n),i}const r=t;return OK(r),LK(r,n?i=>e(i,n):e)}}function rT(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const s=RK(r);t[n]=()=>s}}),t}function aj(e,t){typeof e=="function"?e(t):e.current=t}function LK(e,t){const n=e.ref;return Se(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?x.cloneElement(e,{ref:r=>{aj(n,r),aj(t,r)}}):x.cloneElement(e,{ref:t})}class FK{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?t?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),n):(this.lastConnectedDragSource=t,n):n}reconnectDragPreview(t=!1){const n=this.dragPreview,r=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ag(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ag(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=rT({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,og(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,og(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class $K{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ag(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=rT({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,og(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function za(){const{dragDropManager:e}=x.useContext(GD);return Se(e!=null,"Expected drag drop context"),e}function BK(e,t){const n=za(),r=x.useMemo(()=>new FK(n.getBackend()),[n]);return yi(()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource()),[r,e]),yi(()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,t]),r}function zK(){const e=za();return x.useMemo(()=>new _K(e),[e])}class VK{beginDrag(){const t=this.spec,n=this.monitor;let r=null;return typeof t.item=="object"?r=t.item:typeof t.item=="function"?r=t.item(n):r={},r??null}canDrag(){const t=this.spec,n=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(n):!0}isDragging(t,n){const r=this.spec,s=this.monitor,{isDragging:i}=r;return i?i(s):n===t.getSourceId()}endDrag(){const t=this.spec,n=this.monitor,r=this.connector,{end:s}=t;s&&s(n.getItem(),n),r.reconnect()}constructor(t,n,r){this.spec=t,this.monitor=n,this.connector=r}}function UK(e,t,n){const r=x.useMemo(()=>new VK(e,t,n),[t,n]);return x.useEffect(()=>{r.spec=e},[e]),r}function WK(e){return x.useMemo(()=>{const t=e.type;return Se(t!=null,"spec.type must be defined"),t},[e])}function HK(e,t,n){const r=za(),s=UK(e,t,n),i=WK(e);yi(function(){if(i!=null){const[l,c]=MK(i,s,r);return t.receiveHandlerId(l),n.receiveHandlerId(l),c}},[r,t,n,s,i])}function sT(e,t){const n=nT(e);Se(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=zK(),s=BK(n.options,n.previewOptions);return HK(n,r,s),[tT(n.collect,r,s),TK(s),PK(s)]}function qK(e){return x.useMemo(()=>e.hooks.dropTarget(),[e])}function GK(e){const t=za(),n=x.useMemo(()=>new $K(t.getBackend()),[t]);return yi(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}function YK(){const e=za();return x.useMemo(()=>new IK(e),[e])}function QK(e){const{accept:t}=e;return x.useMemo(()=>(Se(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class KK{canDrop(){const t=this.spec,n=this.monitor;return t.canDrop?t.canDrop(n.getItem(),n):!0}hover(){const t=this.spec,n=this.monitor;t.hover&&t.hover(n.getItem(),n)}drop(){const t=this.spec,n=this.monitor;if(t.drop)return t.drop(n.getItem(),n)}constructor(t,n){this.spec=t,this.monitor=n}}function XK(e,t){const n=x.useMemo(()=>new KK(e,t),[t]);return x.useEffect(()=>{n.spec=e},[e]),n}function JK(e,t,n){const r=za(),s=XK(e,t),i=QK(e);yi(function(){const[l,c]=AK(i,s,r);return t.receiveHandlerId(l),n.receiveHandlerId(l),c},[r,t,s,n,i.map(a=>a.toString()).join("|")])}function iT(e,t){const n=nT(e),r=YK(),s=GK(n.options);return JK(n,r,s),[tT(n.collect,r,s),qK(s)]}function aT(e){let t=null;return()=>(t==null&&(t=e()),t)}function ZK(e,t){return e.filter(n=>n!==t)}function eX(e,t){const n=new Set,r=i=>n.add(i);e.forEach(r),t.forEach(r);const s=[];return n.forEach(i=>s.push(i)),s}class tX{enter(t){const n=this.entered.length,r=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(t));return this.entered=eX(this.entered.filter(r),[t]),n===0&&this.entered.length>0}leave(t){const n=this.entered.length;return this.entered=ZK(this.entered.filter(this.isNodeInDocument),t),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class nX{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const s=this.config.exposeProperties[r];s!=null&&(n[r]={value:s(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,n){return n===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const oT="__NATIVE_FILE__",lT="__NATIVE_URL__",cT="__NATIVE_TEXT__",uT="__NATIVE_HTML__",oj=Object.freeze(Object.defineProperty({__proto__:null,FILE:oT,HTML:uT,TEXT:cT,URL:lT},Symbol.toStringTag,{value:"Module"}));function mm(e,t,n){const r=t.reduce((s,i)=>s||e.getData(i),"");return r??n}const lg={[oT]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[uT]:{exposeProperties:{html:(e,t)=>mm(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[lT]:{exposeProperties:{urls:(e,t)=>mm(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[cT]:{exposeProperties:{text:(e,t)=>mm(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function rX(e,t){const n=lg[e];if(!n)throw new Error(`native type ${e} has no configuration`);const r=new nX(n);return r.loadDataTransfer(t),r}function pm(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(lg).filter(n=>{const r=lg[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(s=>t.indexOf(s)>-1):!1})[0]||null}const sX=aT(()=>/firefox/i.test(navigator.userAgent)),dT=aT(()=>!!window.safari);class lj{interpolate(t){const{xs:n,ys:r,c1s:s,c2s:i,c3s:a}=this;let l=n.length-1;if(t===n[l])return r[l];let c=0,u=a.length-1,d;for(;c<=u;){d=Math.floor(.5*(c+u));const m=n[d];if(m<t)c=d+1;else if(m>t)u=d-1;else return r[d]}l=Math.max(0,u);const h=t-n[l],f=h*h;return r[l]+s[l]*h+i[l]*f+a[l]*h*f}constructor(t,n){const{length:r}=t,s=[];for(let m=0;m<r;m++)s.push(m);s.sort((m,p)=>t[m]<t[p]?-1:1);const i=[],a=[];let l,c;for(let m=0;m<r-1;m++)l=t[m+1]-t[m],c=n[m+1]-n[m],i.push(l),a.push(c/l);const u=[a[0]];for(let m=0;m<i.length-1;m++){const p=a[m],g=a[m+1];if(p*g<=0)u.push(0);else{l=i[m];const y=i[m+1],b=l+y;u.push(3*b/((b+y)/p+(b+l)/g))}}u.push(a[a.length-1]);const d=[],h=[];let f;for(let m=0;m<u.length-1;m++){f=a[m];const p=u[m],g=1/i[m],y=p+u[m+1]-f-f;d.push((f-p-y)*g),h.push(y*g*g)}this.xs=t,this.ys=n,this.c1s=u,this.c2s=d,this.c3s=h}}const iX=1;function hT(e){const t=e.nodeType===iX?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Uc(e){return{x:e.clientX,y:e.clientY}}function aX(e){var t;return e.nodeName==="IMG"&&(sX()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function oX(e,t,n,r){let s=e?t.width:n,i=e?t.height:r;return dT()&&e&&(i/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:i}}function lX(e,t,n,r,s){const i=aX(t),l=hT(i?e:t),c={x:n.x-l.x,y:n.y-l.y},{offsetWidth:u,offsetHeight:d}=e,{anchorX:h,anchorY:f}=r,{dragPreviewWidth:m,dragPreviewHeight:p}=oX(i,t,u,d),g=()=>{let k=new lj([0,.5,1],[c.y,c.y/d*p,c.y+p-d]).interpolate(f);return dT()&&i&&(k+=(window.devicePixelRatio-1)*p),k},y=()=>new lj([0,.5,1],[c.x,c.x/u*m,c.x+m-u]).interpolate(h),{offsetX:b,offsetY:v}=s,w=b===0||b,S=v===0||v;return{x:w?b:y(),y:S?v:g()}}class cX{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,n){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=n}}function uX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){uX(e,s,n[s])})}return e}class dX{profile(){var t,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,n,r){return this.sourcePreviewNodeOptions.set(t,r),this.sourcePreviewNodes.set(t,n),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,n,r){this.sourceNodes.set(t,n),this.sourceNodeOptions.set(t,r);const s=a=>this.handleDragStart(a,t),i=a=>this.handleSelectStart(a);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",s),n.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),n.removeEventListener("dragstart",s),n.removeEventListener("selectstart",i),n.setAttribute("draggable","false")}}connectDropTarget(t,n){const r=a=>this.handleDragEnter(a,t),s=a=>this.handleDragOver(a,t),i=a=>this.handleDrop(a,t);return n.addEventListener("dragenter",r),n.addEventListener("dragover",s),n.addEventListener("drop",i),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",s),n.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(t);return cj({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(t);return cj({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(oj).some(n=>oj[n]===t)}beginDragNativeItem(t,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=rX(t,n),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,n){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(t,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(t,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(t,n){this.dropTargetIds.unshift(n)}constructor(t,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const i=this.sourceNodes.get(s);return i&&hT(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const a=Uc(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:l}=s,c=pm(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const d=this.monitor.getSourceId(),h=this.sourceNodes.get(d),f=this.sourcePreviewNodes.get(d)||h;if(f){const{anchorX:m,anchorY:p,offsetX:g,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),w=lX(h,f,a,{anchorX:m,anchorY:p},{offsetX:g,offsetY:y});l.setDragImage(f,w.x,w.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:l}=s,c=pm(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Uc(s)}),i.some(l=>this.monitor.canDropOnTarget(l))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=Uc(s),this.scheduleHover(i),(i||[]).some(l=>this.monitor.canDropOnTarget(l))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;s.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}else pm(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Uc(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const i=s.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(s.preventDefault(),i.dragDrop()))},this.options=new cX(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new tX(this.isNodeInDocument)}}const hX=function(t,n,r){return new dX(t,n,r)};async function fX(){const t=await fetch("http://103.224.243.242:3001/api/templates/modern",{method:"GET",headers:$e(),credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch modern templates: ${t.status} ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.data||[]}async function fT(e){const n=await fetch("http://103.224.243.242:3001/api/templates/modern",{method:"POST",headers:{...$e(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create modern template");const r=await n.json();return r.data||r}async function mX(e){if(!(await fetch(`http://103.224.243.242:3001/api/templates/modern/${e}`,{method:"DELETE",headers:$e(),credentials:"include"})).ok)throw new Error("Failed to delete modern template")}const Wc=(e,t="success")=>{window.showToast?window.showToast(e,t):alert(t==="error"?`Error: ${e}`:e)},Ed={ELEMENT:"element",PALETTE_ITEM:"palette_item"},pX=[{type:"text",label:"Text Block",icon:kA,description:"Add custom text content"},{type:"field",label:"Dynamic Field",icon:ux,description:"Insert quotation data"},{type:"table",label:"Data Table",icon:BN,description:"Display tabular data"},{type:"image",label:"Image/Logo",icon:zN,description:"Add company logo or images"},{type:"spacer",label:"Spacer",icon:WN,description:"Add vertical spacing"}],mT=[{item:"Mobile Crane 50T",quantity:1,rate:"4,000/day",amount:"120,000"},{item:"Operator Services",quantity:1,rate:"500/day",amount:"15,000"},{item:"Transportation",quantity:1,rate:"2,000/km",amount:"50,000"},{item:"Setup & Breakdown",quantity:1,rate:"8,000",amount:"8,000"}],gX=[{value:"customer_name",label:"Customer Name"},{value:"customer_address",label:"Customer Address"},{value:"customer_phone",label:"Customer Phone"},{value:"quotation_number",label:"Quotation Number"},{value:"quotation_date",label:"Quotation Date"},{value:"validity_date",label:"Validity Date"},{value:"equipment_type",label:"Equipment Type"},{value:"total_amount",label:"Total Amount"},{value:"company_name",label:"Company Name"},{value:"company_address",label:"Company Address"}];function xX({item:e}){const[{isDragging:t},n]=sT(()=>({type:Ed.PALETTE_ITEM,item:{elementType:e.type},collect:s=>({isDragging:s.isDragging()})})),r=e.icon;return o.jsx("div",{ref:n,className:`
        cursor-move p-3 bg-white border border-gray-200 rounded-lg shadow-sm
        hover:shadow-md hover:border-blue-300 transition-all duration-200
        ${t?"opacity-50":"opacity-100"}
      `,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(r,{size:20,className:"text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm text-gray-900",children:e.label}),o.jsx("div",{className:"text-xs text-gray-500",children:e.description})]})]})})}function yX({elements:e,setElements:t}){const[{isOver:n},r]=iT(()=>({accept:Ed.PALETTE_ITEM,drop:(l,c)=>{if(!c.isOver({shallow:!0}))return;const u={id:`element-${Date.now()}`,type:l.elementType,content:"",fieldType:void 0};t(d=>[...d,u])},collect:l=>({isOver:l.isOver()})})),s=x.useCallback((l,c)=>{t(u=>{const d=Array.from(u),[h]=d.splice(l,1);return d.splice(c,0,h),d})},[t]),i=x.useCallback((l,c)=>{t(u=>u.map((d,h)=>h===l?{...d,...c}:d))},[t]),a=x.useCallback(l=>{t(c=>c.filter((u,d)=>d!==l))},[t]);return o.jsx("div",{ref:r,className:`
        min-h-[500px] border-2 border-dashed rounded-lg p-4 transition-colors
        ${n?"border-blue-400 bg-blue-50":"border-gray-300 bg-gray-50"}
      `,children:e.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-20",children:[o.jsx(HN,{size:48,className:"mx-auto mb-4 text-gray-300"}),o.jsx("p",{className:"text-lg font-medium",children:"Drop elements here to build your template"}),o.jsx("p",{className:"text-sm",children:"Drag items from the palette to get started"})]}):o.jsx("div",{className:"space-y-4",children:e.map((l,c)=>o.jsx(vX,{element:l,index:c,moveElement:s,updateElement:i,removeElement:a},l.id))})})}function vX({element:e,index:t,moveElement:n,updateElement:r,removeElement:s}){const[{isDragging:i},a]=sT(()=>({type:Ed.ELEMENT,item:{index:t},collect:d=>({isDragging:d.isDragging()})})),[,l]=iT(()=>({accept:Ed.ELEMENT,drop:d=>{d.index!==t&&n(d.index,t)}})),c=d=>{r(t,{content:d})},u=()=>{switch(e.type){case"text":return o.jsxs("div",{children:[o.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-md resize-vertical font-mono text-sm",rows:4,value:e.content||"",onChange:d=>c(d.target.value),placeholder:"Enter your text content here..."}),o.jsxs("div",{className:"mt-2 p-3 bg-gray-50 border rounded-md",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Preview:"}),o.jsx("div",{className:"text-sm whitespace-pre-wrap",children:e.content||"Your text will appear here..."})]})]});case"field":return o.jsxs("div",{children:[o.jsxs("select",{className:"w-full p-3 border border-gray-300 rounded-md mb-3",value:e.fieldType||"",onChange:d=>r(t,{fieldType:d.target.value}),children:[o.jsx("option",{value:"",children:"Select a field..."}),gX.map(d=>o.jsx("option",{value:d.value,children:d.label},d.value))]}),o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx("div",{className:"text-xs text-blue-600 mb-1",children:"Dynamic Field:"}),o.jsx("div",{className:"font-mono text-sm text-blue-800",children:e.fieldType?`{{${e.fieldType}}}`:"Select a field above"})]})]});case"table":return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table Title"}),o.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md",value:e.content||"Cost Breakdown",onChange:d=>c(d.target.value),placeholder:"Table title..."})]}),o.jsx("div",{className:"border rounded-md overflow-hidden",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Item"}),o.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Qty"}),o.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Rate"}),o.jsx("th",{className:"px-3 py-2 text-left font-medium",children:"Amount"})]})}),o.jsx("tbody",{children:mT.map((d,h)=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"px-3 py-2",children:d.item}),o.jsx("td",{className:"px-3 py-2",children:d.quantity}),o.jsx("td",{className:"px-3 py-2",children:d.rate}),o.jsx("td",{className:"px-3 py-2 font-medium",children:d.amount})]},h))})]})}),o.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"This table will display actual quotation data when used in templates"})]});case"image":return o.jsxs("div",{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Source"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded-md",value:e.content||"",onChange:d=>c(d.target.value),placeholder:"Enter image URL or upload an image..."}),o.jsxs("button",{type:"button",onClick:()=>{var d;return(d=document.getElementById(`file-input-${e.id}`))==null?void 0:d.click()},className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1",children:[o.jsx(hx,{size:16}),"Upload"]}),o.jsx("input",{id:`file-input-${e.id}`,type:"file",accept:"image/*",className:"hidden",onChange:d=>{var f;const h=(f=d.target.files)==null?void 0:f[0];if(h){const m=new FileReader;m.onload=p=>{var g;c((g=p.target)==null?void 0:g.result)},m.readAsDataURL(h)}}})]})]}),e.content&&o.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border rounded-md",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),o.jsx("img",{src:e.content,alt:"Template image",className:"max-w-full h-32 object-contain border rounded",onError:d=>{d.currentTarget.style.display="none"}})]})]});case"spacer":return o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spacer Height"}),o.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md",value:e.content||"medium",onChange:d=>c(d.target.value),children:[o.jsx("option",{value:"small",children:"Small (20px)"}),o.jsx("option",{value:"medium",children:"Medium (40px)"}),o.jsx("option",{value:"large",children:"Large (60px)"}),o.jsx("option",{value:"xlarge",children:"Extra Large (100px)"})]}),o.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border rounded-md",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Preview:"}),o.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-400 rounded",style:{height:e.content==="small"?"20px":e.content==="large"?"60px":e.content==="xlarge"?"100px":"40px"}})]})]});default:return o.jsx("div",{children:"Unknown element type"})}};return o.jsxs("div",{ref:d=>a(l(d)),className:`
        bg-white border border-gray-200 rounded-lg p-4 shadow-sm
        ${i?"opacity-50":"opacity-100"}
        hover:shadow-md transition-shadow
      `,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(HN,{size:16,className:"text-gray-400 cursor-move"}),o.jsxs("span",{className:"font-medium text-sm text-gray-700 capitalize",children:[e.type," Element"]})]}),o.jsx("button",{onClick:()=>s(t),className:"text-red-500 hover:text-red-700 p-1",title:"Remove element",children:o.jsx(Ns,{size:16})})]}),u()]})}function bX(){const[e,t]=x.useState(""),[n,r]=x.useState(""),[s,i]=x.useState([]),[a,l]=x.useState(!1),{user:c}=We(),u=async()=>{if(!e.trim()){Wc("Please enter a template name","error");return}if(s.length===0){Wc("Please add at least one element to the template","error");return}l(!0);try{const f={name:e.trim(),description:n.trim(),elements:s,createdBy:(c==null?void 0:c.id)||"unknown",usage_count:0,tags:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Saving template:",f),await fT(f),Wc("Template saved successfully!"),t(""),r(""),i([])}catch(f){console.error("Error saving template:",f),Wc(`Failed to save template: ${f.message||"Unknown error"}`,"error")}finally{l(!1)}},d=f=>{const m={id:`element-${Date.now()}`,type:f,content:"",fieldType:void 0};i([...s,m])},h=f=>{switch(f.type){case"text":return o.jsx("div",{className:"text-sm",children:f.content||"Sample text content will appear here..."});case"field":return o.jsx("div",{className:"text-sm bg-blue-50 px-2 py-1 rounded border",children:o.jsx("span",{className:"font-mono text-blue-800",children:f.fieldType?`{{${f.fieldType}}}`:"Dynamic Field"})});case"table":return o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm mb-2",children:f.content||"Cost Breakdown"}),o.jsxs("table",{className:"w-full text-xs border border-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1 text-left border",children:"Item"}),o.jsx("th",{className:"px-2 py-1 text-left border",children:"Qty"}),o.jsx("th",{className:"px-2 py-1 text-left border",children:"Rate"}),o.jsx("th",{className:"px-2 py-1 text-left border",children:"Amount"})]})}),o.jsx("tbody",{children:mT.slice(0,3).map((m,p)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-2 py-1 border",children:m.item}),o.jsx("td",{className:"px-2 py-1 border",children:m.quantity}),o.jsx("td",{className:"px-2 py-1 border",children:m.rate}),o.jsx("td",{className:"px-2 py-1 border font-medium",children:m.amount})]},p))})]})]});case"image":return o.jsx("div",{className:"border border-gray-200 rounded p-2",children:f.content?o.jsx("img",{src:f.content,alt:"Template image",className:"max-w-full h-16 object-contain",onError:m=>{m.currentTarget.style.display="none"}}):o.jsx("div",{className:"h-16 bg-gray-100 flex items-center justify-center text-xs text-gray-500",children:"Image placeholder"})});case"spacer":return o.jsx("div",{className:"bg-gray-100 border-2 border-dashed border-gray-300 rounded",style:{height:f.content==="small"?"10px":f.content==="large"?"30px":f.content==="xlarge"?"50px":"20px"}});default:return o.jsx("div",{className:"text-xs text-gray-400",children:"Unknown element"})}};return o.jsx(jK,{backend:hX,children:o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Modern Template Builder"}),o.jsx("p",{className:"text-gray-600",children:"Create dynamic quotation templates with drag-and-drop elements"})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Template Details"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),o.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter template name..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("input",{type:"text",value:n,onChange:f=>r(f.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter template description..."})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Element Palette"}),o.jsx("div",{className:"space-y-3",children:pX.map((f,m)=>o.jsx(xX,{item:f},m))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>d("text"),className:"w-full px-3 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-md text-sm flex items-center gap-2",children:[o.jsx(Pn,{size:14}),"Add Text Block"]}),o.jsxs("button",{onClick:()=>d("table"),className:"w-full px-3 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-md text-sm flex items-center gap-2",children:[o.jsx(Pn,{size:14}),"Add Table"]}),o.jsxs("button",{onClick:()=>d("image"),className:"w-full px-3 py-2 text-left bg-gray-50 hover:bg-gray-100 rounded-md text-sm flex items-center gap-2",children:[o.jsx(Pn,{size:14}),"Add Image"]})]})]})]}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:"Template Canvas"}),o.jsx("button",{onClick:u,disabled:a||!e.trim()||s.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ji,{size:16}),"Save Template"]})})]}),o.jsx(yX,{elements:s,setElements:i})]})}),o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[o.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Vu,{size:16}),"Live Preview"]}),o.jsx("div",{className:"bg-gray-50 p-4 rounded-md border-2 border-dashed border-gray-300 min-h-[600px]",children:o.jsx("div",{className:"bg-white shadow-sm rounded p-4 space-y-4",style:{transform:"scale(0.8)",transformOrigin:"top left"},children:s.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-12",children:[o.jsx(Wt,{size:48,className:"mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"Add elements to see live preview"})]}):s.map(f=>o.jsx("div",{className:"border-b border-gray-100 pb-4 last:border-b-0",children:h(f)},f.id))})}),o.jsx("div",{className:"mt-4 text-xs text-gray-500",children:"This preview shows how your template will appear in quotations"})]})})]})]})})}const wX=()=>{const[e,t]=x.useState([]),[n,r]=x.useState(!0),[s,i]=x.useState(""),[a,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState("grid"),[f,m]=x.useState("all"),[p,g]=x.useState({show:!1,title:""});x.useEffect(()=>{y()},[]);const y=async()=>{try{r(!0);const E=await fX();t(E)}catch(E){console.error("Error fetching templates:",E),k("Error loading templates","error")}finally{r(!1)}},b=()=>{l(null),u(!0)},v=E=>{l(E),u(!0)},w=async E=>{if(window.confirm("Are you sure you want to delete this template?"))try{await mX(E),t(T=>T.filter(F=>F.id!==E)),k("Template deleted successfully","success")}catch(T){console.error("Error deleting template:",T),k("Error deleting template","error")}},S=async E=>{try{const T=await fT({...E,name:`${E.name} (Copy)`,createdBy:"Current User",usage_count:0,isDefault:!1});t(F=>[T,...F]),k("Template duplicated successfully","success")}catch(T){console.error("Error duplicating template:",T),k("Error duplicating template","error")}},j=E=>{console.log("Preview template:",E)},k=(E,T="success")=>{g({show:!0,title:E,variant:T}),setTimeout(()=>g({show:!1,title:""}),3e3)},N=e.filter(E=>{var R,$;const T=E.name.toLowerCase().includes(s.toLowerCase())||((R=E.description)==null?void 0:R.toLowerCase().includes(s.toLowerCase())),F=f==="all"||(($=E.tags)==null?void 0:$.includes(f));return T&&F}),C=["all",...new Set(e.flatMap(E=>E.tags||[]))];return c?o.jsx(bX,{}):o.jsxs("div",{className:"container mx-auto py-6 px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Management"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage quotation templates"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(U,{variant:"ghost",leftIcon:o.jsx(hx,{}),children:"Import"}),o.jsx(U,{onClick:b,leftIcon:o.jsx(Pn,{}),className:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",children:"Create Template"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ke,{placeholder:"Search templates...",value:s,onChange:E=>i(E.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("select",{value:f,onChange:E=>m(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:C.map(E=>o.jsx("option",{value:E,children:E==="all"?"All Categories":E.charAt(0).toUpperCase()+E.slice(1)},E))}),o.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[o.jsx(U,{variant:d==="grid"?"accent":"ghost",size:"sm",onClick:()=>h("grid"),className:"rounded-none",children:o.jsx(BN,{className:"h-4 w-4"})}),o.jsx(U,{variant:d==="list"?"accent":"ghost",size:"sm",onClick:()=>h("list"),className:"rounded-none",children:o.jsx(mA,{className:"h-4 w-4"})})]})]})]}),n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsx("div",{className:d==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:N.map(E=>o.jsx(se,{className:`group hover:shadow-lg transition-all duration-200 ${E.isDefault?"ring-2 ring-primary-200":""} ${d==="list"?"flex-row":""}`,children:d==="grid"?o.jsxs(o.Fragment,{children:[o.jsxs(ye,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wt,{className:"h-5 w-5 text-primary-600"}),E.isDefault&&o.jsx(av,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>j(E),children:o.jsx(Vu,{className:"h-3 w-3"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>v(E),children:o.jsx(iv,{className:"h-3 w-3"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>S(E),children:o.jsx(nv,{className:"h-3 w-3"})}),!E.isDefault&&o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>w(E.id),className:"text-red-600 hover:text-red-700",children:o.jsx(Ns,{className:"h-3 w-3"})})]})]}),o.jsx(ve,{className:"text-lg",children:E.name}),E.description&&o.jsx("p",{className:"text-sm text-gray-600",children:E.description})]}),o.jsx(ae,{children:o.jsxs("div",{className:"space-y-3",children:[E.tags&&E.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:E.tags.map(T=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:T},T))}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(mi,{className:"h-3 w-3"}),o.jsx("span",{children:E.createdBy})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Qn,{className:"h-3 w-3"}),o.jsx("span",{children:new Date(E.updatedAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Used ",E.usage_count||0," times"]})]})})]}):o.jsxs("div",{className:"flex items-center justify-between p-4 w-full",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wt,{className:"h-5 w-5 text-primary-600"}),E.isDefault&&o.jsx(av,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:E.name}),o.jsx("p",{className:"text-sm text-gray-600",children:E.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[o.jsxs("span",{children:["By ",E.createdBy]}),o.jsxs("span",{children:["Updated ",new Date(E.updatedAt).toLocaleDateString()]}),o.jsxs("span",{children:["Used ",E.usage_count||0," times"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>j(E),children:o.jsx(Vu,{className:"h-4 w-4"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>v(E),children:o.jsx(iv,{className:"h-4 w-4"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>S(E),children:o.jsx(nv,{className:"h-4 w-4"})}),!E.isDefault&&o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>w(E.id),className:"text-red-600 hover:text-red-700",children:o.jsx(Ns,{className:"h-4 w-4"})})]})]})},E.id))}),N.length===0&&!n&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Wt,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),o.jsx("p",{className:"text-gray-600 mb-2",children:s||f!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first template."}),o.jsx("p",{className:"text-gray-500 mb-4",children:"You can create a new template from here. Click the button below to get started."}),!s&&f==="all"&&o.jsx(U,{onClick:b,leftIcon:o.jsx(Pn,{}),children:"Create Your First Template"})]}),p.show&&o.jsx(ft,{title:p.title,variant:p.variant,isVisible:p.show,onClose:()=>g({show:!1,title:""})})]})},jX=({children:e})=>{const{isAuthenticated:t,user:n,setUser:r}=We();return x.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await eC();i&&r(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,r]),o.jsx(o.Fragment,{children:e})};function Tt({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:r,isAuthenticated:s,setUser:i}=We(),[a,l]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const u=await eC();u?(!r||r.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[r,i]),a?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(` Protected Route Check - Authenticated: ${s}, User: ${(r==null?void 0:r.name)||"none"}`),!s||!r?(console.log(` Route protection failed - redirecting to ${t}`),o.jsx(Un,{to:t,replace:!0})):n&&!n.includes(r.role)?(console.log(` Role protection failed - user has ${r.role} but needs one of [${n.join(",")}]`),o.jsx(Un,{to:"/dashboard",replace:!0})):(console.log(" Route protection passed - rendering protected content"),e?o.jsx(o.Fragment,{children:e}):o.jsx(MN,{})))}function SX(){const{user:e,isAuthenticated:t}=We();if(console.log(" DashboardRouter called"),console.log(" Authentication state:",{isAuthenticated:t}),console.log(" User object:",JSON.stringify(e,null,2)),console.log(" User role:",e==null?void 0:e.role),!t||!e)return console.log(" DashboardRouter: Not authenticated, redirecting to login"),o.jsx(Un,{to:"/login",replace:!0});if(!e.role)return console.error(" DashboardRouter: User authenticated but role is undefined!"),console.error(" Full user object:",e),console.log(" Fallback: Showing AdminDashboard due to missing role"),o.jsx(Af,{});switch(console.log(" DashboardRouter: User role is",e.role),e.role){case"admin":return console.log(" Rendering AdminDashboard"),o.jsx(Af,{});case"sales_agent":return console.log(" Rendering SalesAgentDashboard"),o.jsx(vV,{});case"operations_manager":return console.log(" Rendering OperationsManagerDashboard"),o.jsx(SV,{});case"operator":return console.log(" Rendering OperatorDashboard"),o.jsx(CV,{});default:return console.log(" Unknown user role:",e.role,"showing AdminDashboard as fallback"),o.jsx(Af,{})}}function NX(){const e=window.location.pathname==="/"||window.location.pathname==="";if(console.log(" AppContent - Current pathname:",window.location.pathname),console.log(" AppContent - Is root URL:",e),e)return console.log(" Redirecting from root to /login"),o.jsx(Un,{to:"/login",replace:!0});const t=o.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),o.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return o.jsx(x.Suspense,{fallback:t,children:o.jsxs(FI,{children:[o.jsx(He,{path:"/blank-check.html",element:o.jsx(Un,{to:"/blank-check.html",replace:!0})}),o.jsx(He,{path:"/api-test.html",element:o.jsx(Un,{to:"/api-test.html",replace:!0})}),o.jsx(He,{path:"/login",element:o.jsx(gM,{})}),o.jsx(He,{element:o.jsx(Tt,{}),children:o.jsxs(He,{path:"/",element:o.jsx(w5,{}),children:[o.jsx(He,{index:!0,element:o.jsx(Un,{to:"/dashboard",replace:!0})}),o.jsx(He,{path:"dashboard",element:o.jsx(SX,{})}),o.jsx(He,{path:"admin/users",element:o.jsx(Tt,{allowedRoles:["admin"],children:o.jsx(yH,{})})}),o.jsx(He,{path:"admin/config",element:o.jsx(Tt,{allowedRoles:["admin"],children:o.jsx(AH,{})})}),o.jsx(He,{path:"admin/equipment",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager"],children:o.jsx(dH,{})})}),o.jsx(He,{path:"admin/services",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager"],children:o.jsx(fH,{})})}),o.jsx(He,{path:"admin/templates",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent"],children:o.jsx(wX,{})})}),o.jsx(He,{path:"leads",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(b8,{})})}),o.jsx(He,{path:"customers",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(MH,{})})}),o.jsx(He,{path:"deals",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(rQ,{})})}),o.jsx(He,{path:"deals/:id",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(iQ,{})})}),o.jsx(He,{path:"quotations",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(P8,{})})}),o.jsx(He,{path:"quotations/create",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent"],children:o.jsx(B8,{})})}),o.jsx(He,{path:"jobs",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(JW,{})})}),o.jsx(He,{path:"job-test",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(tH,{})})}),o.jsx(He,{path:"site-assessments",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(rH,{})})}),o.jsx(He,{path:"job-summary",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(iH,{})})}),o.jsx(He,{path:"*",element:o.jsx(Un,{to:"/dashboard",replace:!0})})]})})]})})}function CX(){return o.jsx(qI,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(jX,{children:o.jsx(MA,{children:o.jsxs(o.Fragment,{children:[o.jsx(NX,{}),o.jsx(IA,{}),o.jsx(j8,{})]})})})})}console.log(" Starting ASP Cranes CRM...");console.log(" Current URL:",window.location.href);console.log(" localStorage contents:",{"jwt-token":localStorage.getItem("jwt-token")?"Present":"Missing","explicit-login-performed":localStorage.getItem("explicit-login-performed"),"auth-storage":localStorage.getItem("auth-storage")?"Present":"Missing"});console.log(" Auth store hydration temporarily disabled for debugging");document.body.classList.contains("dark")||document.body.classList.add("dark");const gm=document.getElementById("root");if(!gm)console.error(" Failed to find root element"),document.body.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">Error: Root element not found</div>';else{console.log(" Root element found, creating React app...");try{jN(gm).render(o.jsx(x.StrictMode,{children:o.jsx(x.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading ASP Cranes CRM..."})]})}),children:o.jsx(CX,{})})})),console.log(" React application rendered successfully")}catch(e){console.error(" React render error:",e),gm.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">React render error: '+e+"</div>"}}
